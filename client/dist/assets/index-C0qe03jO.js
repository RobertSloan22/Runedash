var Ive=Object.defineProperty;var Ove=(t,e,n)=>e in t?Ive(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var He=(t,e,n)=>Ove(t,typeof e!="symbol"?e+"":e,n);function ZZ(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var co=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function jc(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var JZ={exports:{}},tM={},eJ={exports:{}},Qt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_=Symbol.for("react.element"),Rve=Symbol.for("react.portal"),Dve=Symbol.for("react.fragment"),Pve=Symbol.for("react.strict_mode"),Nve=Symbol.for("react.profiler"),$ve=Symbol.for("react.provider"),Lve=Symbol.for("react.context"),Fve=Symbol.for("react.forward_ref"),Bve=Symbol.for("react.suspense"),Uve=Symbol.for("react.memo"),zve=Symbol.for("react.lazy"),i5=Symbol.iterator;function jve(t){return t===null||typeof t!="object"?null:(t=i5&&t[i5]||t["@@iterator"],typeof t=="function"?t:null)}var tJ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nJ=Object.assign,rJ={};function _y(t,e,n){this.props=t,this.context=e,this.refs=rJ,this.updater=n||tJ}_y.prototype.isReactComponent={};_y.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function iJ(){}iJ.prototype=_y.prototype;function RB(t,e,n){this.props=t,this.context=e,this.refs=rJ,this.updater=n||tJ}var DB=RB.prototype=new iJ;DB.constructor=RB;nJ(DB,_y.prototype);DB.isPureReactComponent=!0;var o5=Array.isArray,oJ=Object.prototype.hasOwnProperty,PB={current:null},sJ={key:!0,ref:!0,__self:!0,__source:!0};function aJ(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)oJ.call(e,r)&&!sJ.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:e_,type:t,key:o,ref:s,props:i,_owner:PB.current}}function Wve(t,e){return{$$typeof:e_,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function NB(t){return typeof t=="object"&&t!==null&&t.$$typeof===e_}function Vve(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var s5=/\/+/g;function nR(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Vve(""+t.key):e.toString(36)}function sE(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case e_:case Rve:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+nR(s,0):r,o5(i)?(n="",t!=null&&(n=t.replace(s5,"$&/")+"/"),sE(i,e,n,"",function(c){return c})):i!=null&&(NB(i)&&(i=Wve(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(s5,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",o5(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+nR(o,a);s+=sE(o,e,n,l,i)}else if(l=jve(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+nR(o,a++),s+=sE(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function xS(t,e,n){if(t==null)return t;var r=[],i=0;return sE(t,r,"","",function(o){return e.call(n,o,i++)}),r}function Hve(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Lo={current:null},aE={transition:null},Gve={ReactCurrentDispatcher:Lo,ReactCurrentBatchConfig:aE,ReactCurrentOwner:PB};function lJ(){throw Error("act(...) is not supported in production builds of React.")}Qt.Children={map:xS,forEach:function(t,e,n){xS(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return xS(t,function(){e++}),e},toArray:function(t){return xS(t,function(e){return e})||[]},only:function(t){if(!NB(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Qt.Component=_y;Qt.Fragment=Dve;Qt.Profiler=Nve;Qt.PureComponent=RB;Qt.StrictMode=Pve;Qt.Suspense=Bve;Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gve;Qt.act=lJ;Qt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=nJ({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=PB.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)oJ.call(e,l)&&!sJ.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:e_,type:t.type,key:i,ref:o,props:r,_owner:s}};Qt.createContext=function(t){return t={$$typeof:Lve,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:$ve,_context:t},t.Consumer=t};Qt.createElement=aJ;Qt.createFactory=function(t){var e=aJ.bind(null,t);return e.type=t,e};Qt.createRef=function(){return{current:null}};Qt.forwardRef=function(t){return{$$typeof:Fve,render:t}};Qt.isValidElement=NB;Qt.lazy=function(t){return{$$typeof:zve,_payload:{_status:-1,_result:t},_init:Hve}};Qt.memo=function(t,e){return{$$typeof:Uve,type:t,compare:e===void 0?null:e}};Qt.startTransition=function(t){var e=aE.transition;aE.transition={};try{t()}finally{aE.transition=e}};Qt.unstable_act=lJ;Qt.useCallback=function(t,e){return Lo.current.useCallback(t,e)};Qt.useContext=function(t){return Lo.current.useContext(t)};Qt.useDebugValue=function(){};Qt.useDeferredValue=function(t){return Lo.current.useDeferredValue(t)};Qt.useEffect=function(t,e){return Lo.current.useEffect(t,e)};Qt.useId=function(){return Lo.current.useId()};Qt.useImperativeHandle=function(t,e,n){return Lo.current.useImperativeHandle(t,e,n)};Qt.useInsertionEffect=function(t,e){return Lo.current.useInsertionEffect(t,e)};Qt.useLayoutEffect=function(t,e){return Lo.current.useLayoutEffect(t,e)};Qt.useMemo=function(t,e){return Lo.current.useMemo(t,e)};Qt.useReducer=function(t,e,n){return Lo.current.useReducer(t,e,n)};Qt.useRef=function(t){return Lo.current.useRef(t)};Qt.useState=function(t){return Lo.current.useState(t)};Qt.useSyncExternalStore=function(t,e,n){return Lo.current.useSyncExternalStore(t,e,n)};Qt.useTransition=function(){return Lo.current.useTransition()};Qt.version="18.3.1";eJ.exports=Qt;var R=eJ.exports;const B=cn(R),fp=ZZ({__proto__:null,default:B},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qve=R,Xve=Symbol.for("react.element"),Kve=Symbol.for("react.fragment"),Yve=Object.prototype.hasOwnProperty,Qve=qve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zve={key:!0,ref:!0,__self:!0,__source:!0};function cJ(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Yve.call(e,r)&&!Zve.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Xve,type:t,key:o,ref:s,props:i,_owner:Qve.current}}tM.Fragment=Kve;tM.jsx=cJ;tM.jsxs=cJ;JZ.exports=tM;var I=JZ.exports,uJ={exports:{}},Vs={},dJ={exports:{}},fJ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,V){var G=L.length;L.push(V);e:for(;0<G;){var Q=G-1>>>1,te=L[Q];if(0<i(te,V))L[Q]=V,L[G]=te,G=Q;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var V=L[0],G=L.pop();if(G!==V){L[0]=G;e:for(var Q=0,te=L.length,ne=te>>>1;Q<ne;){var ee=2*(Q+1)-1,re=L[ee],se=ee+1,me=L[se];if(0>i(re,G))se<te&&0>i(me,re)?(L[Q]=me,L[se]=G,Q=se):(L[Q]=re,L[ee]=G,Q=ee);else if(se<te&&0>i(me,G))L[Q]=me,L[se]=G,Q=se;else break e}}return V}function i(L,V){var G=L.sortIndex-V.sortIndex;return G!==0?G:L.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,g=!1,p=!1,m=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(L){for(var V=n(c);V!==null;){if(V.callback===null)r(c);else if(V.startTime<=L)r(c),V.sortIndex=V.expirationTime,e(l,V);else break;V=n(c)}}function y(L){if(p=!1,w(L),!g)if(n(l)!==null)g=!0,N(b);else{var V=n(c);V!==null&&U(y,V.startTime-L)}}function b(L,V){g=!1,p&&(p=!1,v(C),C=-1),h=!0;var G=f;try{for(w(V),d=n(l);d!==null&&(!(d.expirationTime>V)||L&&!k());){var Q=d.callback;if(typeof Q=="function"){d.callback=null,f=d.priorityLevel;var te=Q(d.expirationTime<=V);V=t.unstable_now(),typeof te=="function"?d.callback=te:d===n(l)&&r(l),w(V)}else r(l);d=n(l)}if(d!==null)var ne=!0;else{var ee=n(c);ee!==null&&U(y,ee.startTime-V),ne=!1}return ne}finally{d=null,f=G,h=!1}}var x=!1,S=null,C=-1,T=5,E=-1;function k(){return!(t.unstable_now()-E<T)}function A(){if(S!==null){var L=t.unstable_now();E=L;var V=!0;try{V=S(!0,L)}finally{V?O():(x=!1,S=null)}}else x=!1}var O;if(typeof _=="function")O=function(){_(A)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,P=D.port2;D.port1.onmessage=A,O=function(){P.postMessage(null)}}else O=function(){m(A,0)};function N(L){S=L,x||(x=!0,O())}function U(L,V){C=m(function(){L(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){g||h||(g=!0,N(b))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(L){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var G=f;f=V;try{return L()}finally{f=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,V){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var G=f;f=L;try{return V()}finally{f=G}},t.unstable_scheduleCallback=function(L,V,G){var Q=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?Q+G:Q):G=Q,L){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=G+te,L={id:u++,callback:V,priorityLevel:L,startTime:G,expirationTime:te,sortIndex:-1},G>Q?(L.sortIndex=G,e(c,L),n(l)===null&&L===n(c)&&(p?(v(C),C=-1):p=!0,U(y,G-Q))):(L.sortIndex=te,e(l,L),g||h||(g=!0,N(b))),L},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(L){var V=f;return function(){var G=f;f=V;try{return L.apply(this,arguments)}finally{f=G}}}})(fJ);dJ.exports=fJ;var Jve=dJ.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eye=R,Us=Jve;function Ye(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hJ=new Set,sx={};function Qp(t,e){dv(t,e),dv(t+"Capture",e)}function dv(t,e){for(sx[t]=e,t=0;t<e.length;t++)hJ.add(e[t])}var Au=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rN=Object.prototype.hasOwnProperty,tye=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,a5={},l5={};function nye(t){return rN.call(l5,t)?!0:rN.call(a5,t)?!1:tye.test(t)?l5[t]=!0:(a5[t]=!0,!1)}function rye(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iye(t,e,n,r){if(e===null||typeof e>"u"||rye(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fo(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Vi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Vi[t]=new Fo(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Vi[e]=new Fo(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Vi[t]=new Fo(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Vi[t]=new Fo(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Vi[t]=new Fo(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Vi[t]=new Fo(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Vi[t]=new Fo(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Vi[t]=new Fo(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Vi[t]=new Fo(t,5,!1,t.toLowerCase(),null,!1,!1)});var $B=/[\-:]([a-z])/g;function LB(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($B,LB);Vi[e]=new Fo(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($B,LB);Vi[e]=new Fo(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($B,LB);Vi[e]=new Fo(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Vi[t]=new Fo(t,1,!1,t.toLowerCase(),null,!1,!1)});Vi.xlinkHref=new Fo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Vi[t]=new Fo(t,1,!1,t.toLowerCase(),null,!0,!0)});function FB(t,e,n,r){var i=Vi.hasOwnProperty(e)?Vi[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iye(e,n,i,r)&&(n=null),r||i===null?nye(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Yu=eye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wS=Symbol.for("react.element"),yg=Symbol.for("react.portal"),bg=Symbol.for("react.fragment"),BB=Symbol.for("react.strict_mode"),iN=Symbol.for("react.profiler"),pJ=Symbol.for("react.provider"),mJ=Symbol.for("react.context"),UB=Symbol.for("react.forward_ref"),oN=Symbol.for("react.suspense"),sN=Symbol.for("react.suspense_list"),zB=Symbol.for("react.memo"),Sd=Symbol.for("react.lazy"),gJ=Symbol.for("react.offscreen"),c5=Symbol.iterator;function b0(t){return t===null||typeof t!="object"?null:(t=c5&&t[c5]||t["@@iterator"],typeof t=="function"?t:null)}var mr=Object.assign,rR;function lb(t){if(rR===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);rR=e&&e[1]||""}return`
`+rR+t}var iR=!1;function oR(t,e){if(!t||iR)return"";iR=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{iR=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?lb(t):""}function oye(t){switch(t.tag){case 5:return lb(t.type);case 16:return lb("Lazy");case 13:return lb("Suspense");case 19:return lb("SuspenseList");case 0:case 2:case 15:return t=oR(t.type,!1),t;case 11:return t=oR(t.type.render,!1),t;case 1:return t=oR(t.type,!0),t;default:return""}}function aN(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case bg:return"Fragment";case yg:return"Portal";case iN:return"Profiler";case BB:return"StrictMode";case oN:return"Suspense";case sN:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case mJ:return(t.displayName||"Context")+".Consumer";case pJ:return(t._context.displayName||"Context")+".Provider";case UB:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zB:return e=t.displayName||null,e!==null?e:aN(t.type)||"Memo";case Sd:e=t._payload,t=t._init;try{return aN(t(e))}catch{}}return null}function sye(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return aN(e);case 8:return e===BB?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function df(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vJ(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aye(t){var e=vJ(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _S(t){t._valueTracker||(t._valueTracker=aye(t))}function yJ(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=vJ(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ZE(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lN(t,e){var n=e.checked;return mr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function u5(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=df(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bJ(t,e){e=e.checked,e!=null&&FB(t,"checked",e,!1)}function cN(t,e){bJ(t,e);var n=df(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?uN(t,e.type,n):e.hasOwnProperty("defaultValue")&&uN(t,e.type,df(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function d5(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function uN(t,e,n){(e!=="number"||ZE(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var cb=Array.isArray;function zg(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+df(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function dN(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ye(91));return mr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function f5(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ye(92));if(cb(n)){if(1<n.length)throw Error(Ye(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:df(n)}}function xJ(t,e){var n=df(e.value),r=df(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function h5(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function wJ(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fN(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?wJ(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var SS,_J=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(SS=SS||document.createElement("div"),SS.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=SS.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ax(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Mb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lye=["Webkit","ms","Moz","O"];Object.keys(Mb).forEach(function(t){lye.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Mb[e]=Mb[t]})});function SJ(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Mb.hasOwnProperty(t)&&Mb[t]?(""+e).trim():e+"px"}function CJ(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=SJ(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var cye=mr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hN(t,e){if(e){if(cye[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ye(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ye(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ye(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ye(62))}}function pN(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mN=null;function jB(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gN=null,jg=null,Wg=null;function p5(t){if(t=r_(t)){if(typeof gN!="function")throw Error(Ye(280));var e=t.stateNode;e&&(e=sM(e),gN(t.stateNode,t.type,e))}}function EJ(t){jg?Wg?Wg.push(t):Wg=[t]:jg=t}function TJ(){if(jg){var t=jg,e=Wg;if(Wg=jg=null,p5(t),e)for(t=0;t<e.length;t++)p5(e[t])}}function kJ(t,e){return t(e)}function AJ(){}var sR=!1;function MJ(t,e,n){if(sR)return t(e,n);sR=!0;try{return kJ(t,e,n)}finally{sR=!1,(jg!==null||Wg!==null)&&(AJ(),TJ())}}function lx(t,e){var n=t.stateNode;if(n===null)return null;var r=sM(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ye(231,e,typeof n));return n}var vN=!1;if(Au)try{var x0={};Object.defineProperty(x0,"passive",{get:function(){vN=!0}}),window.addEventListener("test",x0,x0),window.removeEventListener("test",x0,x0)}catch{vN=!1}function uye(t,e,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Ib=!1,JE=null,eT=!1,yN=null,dye={onError:function(t){Ib=!0,JE=t}};function fye(t,e,n,r,i,o,s,a,l){Ib=!1,JE=null,uye.apply(dye,arguments)}function hye(t,e,n,r,i,o,s,a,l){if(fye.apply(this,arguments),Ib){if(Ib){var c=JE;Ib=!1,JE=null}else throw Error(Ye(198));eT||(eT=!0,yN=c)}}function Zp(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function IJ(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function m5(t){if(Zp(t)!==t)throw Error(Ye(188))}function pye(t){var e=t.alternate;if(!e){if(e=Zp(t),e===null)throw Error(Ye(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return m5(i),t;if(o===r)return m5(i),e;o=o.sibling}throw Error(Ye(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(Ye(189))}}if(n.alternate!==r)throw Error(Ye(190))}if(n.tag!==3)throw Error(Ye(188));return n.stateNode.current===n?t:e}function OJ(t){return t=pye(t),t!==null?RJ(t):null}function RJ(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=RJ(t);if(e!==null)return e;t=t.sibling}return null}var DJ=Us.unstable_scheduleCallback,g5=Us.unstable_cancelCallback,mye=Us.unstable_shouldYield,gye=Us.unstable_requestPaint,Ir=Us.unstable_now,vye=Us.unstable_getCurrentPriorityLevel,WB=Us.unstable_ImmediatePriority,PJ=Us.unstable_UserBlockingPriority,tT=Us.unstable_NormalPriority,yye=Us.unstable_LowPriority,NJ=Us.unstable_IdlePriority,nM=null,dc=null;function bye(t){if(dc&&typeof dc.onCommitFiberRoot=="function")try{dc.onCommitFiberRoot(nM,t,void 0,(t.current.flags&128)===128)}catch{}}var pl=Math.clz32?Math.clz32:_ye,xye=Math.log,wye=Math.LN2;function _ye(t){return t>>>=0,t===0?32:31-(xye(t)/wye|0)|0}var CS=64,ES=4194304;function ub(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nT(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=ub(a):(o&=s,o!==0&&(r=ub(o)))}else s=n&~i,s!==0?r=ub(s):o!==0&&(r=ub(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-pl(e),i=1<<n,r|=t[n],e&=~i;return r}function Sye(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cye(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-pl(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=Sye(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function bN(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $J(){var t=CS;return CS<<=1,!(CS&4194240)&&(CS=64),t}function aR(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function t_(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-pl(e),t[e]=n}function Eye(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-pl(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function VB(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-pl(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var In=0;function LJ(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var FJ,HB,BJ,UJ,zJ,xN=!1,TS=[],Gd=null,qd=null,Xd=null,cx=new Map,ux=new Map,kd=[],Tye="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function v5(t,e){switch(t){case"focusin":case"focusout":Gd=null;break;case"dragenter":case"dragleave":qd=null;break;case"mouseover":case"mouseout":Xd=null;break;case"pointerover":case"pointerout":cx.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ux.delete(e.pointerId)}}function w0(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=r_(e),e!==null&&HB(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function kye(t,e,n,r,i){switch(e){case"focusin":return Gd=w0(Gd,t,e,n,r,i),!0;case"dragenter":return qd=w0(qd,t,e,n,r,i),!0;case"mouseover":return Xd=w0(Xd,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return cx.set(o,w0(cx.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ux.set(o,w0(ux.get(o)||null,t,e,n,r,i)),!0}return!1}function jJ(t){var e=Ih(t.target);if(e!==null){var n=Zp(e);if(n!==null){if(e=n.tag,e===13){if(e=IJ(n),e!==null){t.blockedOn=e,zJ(t.priority,function(){BJ(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lE(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wN(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);mN=r,n.target.dispatchEvent(r),mN=null}else return e=r_(n),e!==null&&HB(e),t.blockedOn=n,!1;e.shift()}return!0}function y5(t,e,n){lE(t)&&n.delete(e)}function Aye(){xN=!1,Gd!==null&&lE(Gd)&&(Gd=null),qd!==null&&lE(qd)&&(qd=null),Xd!==null&&lE(Xd)&&(Xd=null),cx.forEach(y5),ux.forEach(y5)}function _0(t,e){t.blockedOn===e&&(t.blockedOn=null,xN||(xN=!0,Us.unstable_scheduleCallback(Us.unstable_NormalPriority,Aye)))}function dx(t){function e(i){return _0(i,t)}if(0<TS.length){_0(TS[0],t);for(var n=1;n<TS.length;n++){var r=TS[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Gd!==null&&_0(Gd,t),qd!==null&&_0(qd,t),Xd!==null&&_0(Xd,t),cx.forEach(e),ux.forEach(e),n=0;n<kd.length;n++)r=kd[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<kd.length&&(n=kd[0],n.blockedOn===null);)jJ(n),n.blockedOn===null&&kd.shift()}var Vg=Yu.ReactCurrentBatchConfig,rT=!0;function Mye(t,e,n,r){var i=In,o=Vg.transition;Vg.transition=null;try{In=1,GB(t,e,n,r)}finally{In=i,Vg.transition=o}}function Iye(t,e,n,r){var i=In,o=Vg.transition;Vg.transition=null;try{In=4,GB(t,e,n,r)}finally{In=i,Vg.transition=o}}function GB(t,e,n,r){if(rT){var i=wN(t,e,n,r);if(i===null)vR(t,e,r,iT,n),v5(t,r);else if(kye(i,t,e,n,r))r.stopPropagation();else if(v5(t,r),e&4&&-1<Tye.indexOf(t)){for(;i!==null;){var o=r_(i);if(o!==null&&FJ(o),o=wN(t,e,n,r),o===null&&vR(t,e,r,iT,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else vR(t,e,r,null,n)}}var iT=null;function wN(t,e,n,r){if(iT=null,t=jB(r),t=Ih(t),t!==null)if(e=Zp(t),e===null)t=null;else if(n=e.tag,n===13){if(t=IJ(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return iT=t,null}function WJ(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vye()){case WB:return 1;case PJ:return 4;case tT:case yye:return 16;case NJ:return 536870912;default:return 16}default:return 16}}var Dd=null,qB=null,cE=null;function VJ(){if(cE)return cE;var t,e=qB,n=e.length,r,i="value"in Dd?Dd.value:Dd.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return cE=i.slice(t,1<r?1-r:void 0)}function uE(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function kS(){return!0}function b5(){return!1}function Hs(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?kS:b5,this.isPropagationStopped=b5,this}return mr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=kS)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=kS)},persist:function(){},isPersistent:kS}),e}var Sy={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},XB=Hs(Sy),n_=mr({},Sy,{view:0,detail:0}),Oye=Hs(n_),lR,cR,S0,rM=mr({},n_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:KB,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==S0&&(S0&&t.type==="mousemove"?(lR=t.screenX-S0.screenX,cR=t.screenY-S0.screenY):cR=lR=0,S0=t),lR)},movementY:function(t){return"movementY"in t?t.movementY:cR}}),x5=Hs(rM),Rye=mr({},rM,{dataTransfer:0}),Dye=Hs(Rye),Pye=mr({},n_,{relatedTarget:0}),uR=Hs(Pye),Nye=mr({},Sy,{animationName:0,elapsedTime:0,pseudoElement:0}),$ye=Hs(Nye),Lye=mr({},Sy,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Fye=Hs(Lye),Bye=mr({},Sy,{data:0}),w5=Hs(Bye),Uye={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zye={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jye={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wye(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jye[t])?!!e[t]:!1}function KB(){return Wye}var Vye=mr({},n_,{key:function(t){if(t.key){var e=Uye[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=uE(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zye[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:KB,charCode:function(t){return t.type==="keypress"?uE(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?uE(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Hye=Hs(Vye),Gye=mr({},rM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_5=Hs(Gye),qye=mr({},n_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:KB}),Xye=Hs(qye),Kye=mr({},Sy,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yye=Hs(Kye),Qye=mr({},rM,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Zye=Hs(Qye),Jye=[9,13,27,32],YB=Au&&"CompositionEvent"in window,Ob=null;Au&&"documentMode"in document&&(Ob=document.documentMode);var e0e=Au&&"TextEvent"in window&&!Ob,HJ=Au&&(!YB||Ob&&8<Ob&&11>=Ob),S5=" ",C5=!1;function GJ(t,e){switch(t){case"keyup":return Jye.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qJ(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xg=!1;function t0e(t,e){switch(t){case"compositionend":return qJ(e);case"keypress":return e.which!==32?null:(C5=!0,S5);case"textInput":return t=e.data,t===S5&&C5?null:t;default:return null}}function n0e(t,e){if(xg)return t==="compositionend"||!YB&&GJ(t,e)?(t=VJ(),cE=qB=Dd=null,xg=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return HJ&&e.locale!=="ko"?null:e.data;default:return null}}var r0e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function E5(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!r0e[t.type]:e==="textarea"}function XJ(t,e,n,r){EJ(r),e=oT(e,"onChange"),0<e.length&&(n=new XB("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Rb=null,fx=null;function i0e(t){oee(t,0)}function iM(t){var e=Sg(t);if(yJ(e))return t}function o0e(t,e){if(t==="change")return e}var KJ=!1;if(Au){var dR;if(Au){var fR="oninput"in document;if(!fR){var T5=document.createElement("div");T5.setAttribute("oninput","return;"),fR=typeof T5.oninput=="function"}dR=fR}else dR=!1;KJ=dR&&(!document.documentMode||9<document.documentMode)}function k5(){Rb&&(Rb.detachEvent("onpropertychange",YJ),fx=Rb=null)}function YJ(t){if(t.propertyName==="value"&&iM(fx)){var e=[];XJ(e,fx,t,jB(t)),MJ(i0e,e)}}function s0e(t,e,n){t==="focusin"?(k5(),Rb=e,fx=n,Rb.attachEvent("onpropertychange",YJ)):t==="focusout"&&k5()}function a0e(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return iM(fx)}function l0e(t,e){if(t==="click")return iM(e)}function c0e(t,e){if(t==="input"||t==="change")return iM(e)}function u0e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Sl=typeof Object.is=="function"?Object.is:u0e;function hx(t,e){if(Sl(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!rN.call(e,i)||!Sl(t[i],e[i]))return!1}return!0}function A5(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function M5(t,e){var n=A5(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=A5(n)}}function QJ(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?QJ(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ZJ(){for(var t=window,e=ZE();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ZE(t.document)}return e}function QB(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function d0e(t){var e=ZJ(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&QJ(n.ownerDocument.documentElement,n)){if(r!==null&&QB(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=M5(n,o);var s=M5(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var f0e=Au&&"documentMode"in document&&11>=document.documentMode,wg=null,_N=null,Db=null,SN=!1;function I5(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;SN||wg==null||wg!==ZE(r)||(r=wg,"selectionStart"in r&&QB(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Db&&hx(Db,r)||(Db=r,r=oT(_N,"onSelect"),0<r.length&&(e=new XB("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=wg)))}function AS(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _g={animationend:AS("Animation","AnimationEnd"),animationiteration:AS("Animation","AnimationIteration"),animationstart:AS("Animation","AnimationStart"),transitionend:AS("Transition","TransitionEnd")},hR={},JJ={};Au&&(JJ=document.createElement("div").style,"AnimationEvent"in window||(delete _g.animationend.animation,delete _g.animationiteration.animation,delete _g.animationstart.animation),"TransitionEvent"in window||delete _g.transitionend.transition);function oM(t){if(hR[t])return hR[t];if(!_g[t])return t;var e=_g[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in JJ)return hR[t]=e[n];return t}var eee=oM("animationend"),tee=oM("animationiteration"),nee=oM("animationstart"),ree=oM("transitionend"),iee=new Map,O5="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Af(t,e){iee.set(t,e),Qp(e,[t])}for(var pR=0;pR<O5.length;pR++){var mR=O5[pR],h0e=mR.toLowerCase(),p0e=mR[0].toUpperCase()+mR.slice(1);Af(h0e,"on"+p0e)}Af(eee,"onAnimationEnd");Af(tee,"onAnimationIteration");Af(nee,"onAnimationStart");Af("dblclick","onDoubleClick");Af("focusin","onFocus");Af("focusout","onBlur");Af(ree,"onTransitionEnd");dv("onMouseEnter",["mouseout","mouseover"]);dv("onMouseLeave",["mouseout","mouseover"]);dv("onPointerEnter",["pointerout","pointerover"]);dv("onPointerLeave",["pointerout","pointerover"]);Qp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qp("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var db="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),m0e=new Set("cancel close invalid load scroll toggle".split(" ").concat(db));function R5(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,hye(r,e,void 0,t),t.currentTarget=null}function oee(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;R5(i,a,c),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;R5(i,a,c),o=l}}}if(eT)throw t=yN,eT=!1,yN=null,t}function Kn(t,e){var n=e[AN];n===void 0&&(n=e[AN]=new Set);var r=t+"__bubble";n.has(r)||(see(e,t,2,!1),n.add(r))}function gR(t,e,n){var r=0;e&&(r|=4),see(n,t,r,e)}var MS="_reactListening"+Math.random().toString(36).slice(2);function px(t){if(!t[MS]){t[MS]=!0,hJ.forEach(function(n){n!=="selectionchange"&&(m0e.has(n)||gR(n,!1,t),gR(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[MS]||(e[MS]=!0,gR("selectionchange",!1,e))}}function see(t,e,n,r){switch(WJ(e)){case 1:var i=Mye;break;case 4:i=Iye;break;default:i=GB}n=i.bind(null,e,n,t),i=void 0,!vN||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function vR(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Ih(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}MJ(function(){var c=o,u=jB(n),d=[];e:{var f=iee.get(t);if(f!==void 0){var h=XB,g=t;switch(t){case"keypress":if(uE(n)===0)break e;case"keydown":case"keyup":h=Hye;break;case"focusin":g="focus",h=uR;break;case"focusout":g="blur",h=uR;break;case"beforeblur":case"afterblur":h=uR;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=x5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Dye;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Xye;break;case eee:case tee:case nee:h=$ye;break;case ree:h=Yye;break;case"scroll":h=Oye;break;case"wheel":h=Zye;break;case"copy":case"cut":case"paste":h=Fye;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=_5}var p=(e&4)!==0,m=!p&&t==="scroll",v=p?f!==null?f+"Capture":null:f;p=[];for(var _=c,w;_!==null;){w=_;var y=w.stateNode;if(w.tag===5&&y!==null&&(w=y,v!==null&&(y=lx(_,v),y!=null&&p.push(mx(_,y,w)))),m)break;_=_.return}0<p.length&&(f=new h(f,g,null,n,u),d.push({event:f,listeners:p}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==mN&&(g=n.relatedTarget||n.fromElement)&&(Ih(g)||g[Mu]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(g=n.relatedTarget||n.toElement,h=c,g=g?Ih(g):null,g!==null&&(m=Zp(g),g!==m||g.tag!==5&&g.tag!==6)&&(g=null)):(h=null,g=c),h!==g)){if(p=x5,y="onMouseLeave",v="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(p=_5,y="onPointerLeave",v="onPointerEnter",_="pointer"),m=h==null?f:Sg(h),w=g==null?f:Sg(g),f=new p(y,_+"leave",h,n,u),f.target=m,f.relatedTarget=w,y=null,Ih(u)===c&&(p=new p(v,_+"enter",g,n,u),p.target=w,p.relatedTarget=m,y=p),m=y,h&&g)t:{for(p=h,v=g,_=0,w=p;w;w=xm(w))_++;for(w=0,y=v;y;y=xm(y))w++;for(;0<_-w;)p=xm(p),_--;for(;0<w-_;)v=xm(v),w--;for(;_--;){if(p===v||v!==null&&p===v.alternate)break t;p=xm(p),v=xm(v)}p=null}else p=null;h!==null&&D5(d,f,h,p,!1),g!==null&&m!==null&&D5(d,m,g,p,!0)}}e:{if(f=c?Sg(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var b=o0e;else if(E5(f))if(KJ)b=c0e;else{b=a0e;var x=s0e}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(b=l0e);if(b&&(b=b(t,c))){XJ(d,b,n,u);break e}x&&x(t,f,c),t==="focusout"&&(x=f._wrapperState)&&x.controlled&&f.type==="number"&&uN(f,"number",f.value)}switch(x=c?Sg(c):window,t){case"focusin":(E5(x)||x.contentEditable==="true")&&(wg=x,_N=c,Db=null);break;case"focusout":Db=_N=wg=null;break;case"mousedown":SN=!0;break;case"contextmenu":case"mouseup":case"dragend":SN=!1,I5(d,n,u);break;case"selectionchange":if(f0e)break;case"keydown":case"keyup":I5(d,n,u)}var S;if(YB)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else xg?GJ(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(HJ&&n.locale!=="ko"&&(xg||C!=="onCompositionStart"?C==="onCompositionEnd"&&xg&&(S=VJ()):(Dd=u,qB="value"in Dd?Dd.value:Dd.textContent,xg=!0)),x=oT(c,C),0<x.length&&(C=new w5(C,t,null,n,u),d.push({event:C,listeners:x}),S?C.data=S:(S=qJ(n),S!==null&&(C.data=S)))),(S=e0e?t0e(t,n):n0e(t,n))&&(c=oT(c,"onBeforeInput"),0<c.length&&(u=new w5("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=S))}oee(d,e)})}function mx(t,e,n){return{instance:t,listener:e,currentTarget:n}}function oT(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=lx(t,n),o!=null&&r.unshift(mx(t,o,i)),o=lx(t,e),o!=null&&r.push(mx(t,o,i))),t=t.return}return r}function xm(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function D5(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=lx(n,o),l!=null&&s.unshift(mx(n,l,a))):i||(l=lx(n,o),l!=null&&s.push(mx(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var g0e=/\r\n?/g,v0e=/\u0000|\uFFFD/g;function P5(t){return(typeof t=="string"?t:""+t).replace(g0e,`
`).replace(v0e,"")}function IS(t,e,n){if(e=P5(e),P5(t)!==e&&n)throw Error(Ye(425))}function sT(){}var CN=null,EN=null;function TN(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var kN=typeof setTimeout=="function"?setTimeout:void 0,y0e=typeof clearTimeout=="function"?clearTimeout:void 0,N5=typeof Promise=="function"?Promise:void 0,b0e=typeof queueMicrotask=="function"?queueMicrotask:typeof N5<"u"?function(t){return N5.resolve(null).then(t).catch(x0e)}:kN;function x0e(t){setTimeout(function(){throw t})}function yR(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),dx(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);dx(e)}function Kd(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $5(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Cy=Math.random().toString(36).slice(2),Zl="__reactFiber$"+Cy,gx="__reactProps$"+Cy,Mu="__reactContainer$"+Cy,AN="__reactEvents$"+Cy,w0e="__reactListeners$"+Cy,_0e="__reactHandles$"+Cy;function Ih(t){var e=t[Zl];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mu]||n[Zl]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=$5(t);t!==null;){if(n=t[Zl])return n;t=$5(t)}return e}t=n,n=t.parentNode}return null}function r_(t){return t=t[Zl]||t[Mu],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Sg(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ye(33))}function sM(t){return t[gx]||null}var MN=[],Cg=-1;function Mf(t){return{current:t}}function er(t){0>Cg||(t.current=MN[Cg],MN[Cg]=null,Cg--)}function jn(t,e){Cg++,MN[Cg]=t.current,t.current=e}var ff={},po=Mf(ff),Jo=Mf(!1),hp=ff;function fv(t,e){var n=t.type.contextTypes;if(!n)return ff;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function es(t){return t=t.childContextTypes,t!=null}function aT(){er(Jo),er(po)}function L5(t,e,n){if(po.current!==ff)throw Error(Ye(168));jn(po,e),jn(Jo,n)}function aee(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ye(108,sye(t)||"Unknown",i));return mr({},n,r)}function lT(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ff,hp=po.current,jn(po,t),jn(Jo,Jo.current),!0}function F5(t,e,n){var r=t.stateNode;if(!r)throw Error(Ye(169));n?(t=aee(t,e,hp),r.__reactInternalMemoizedMergedChildContext=t,er(Jo),er(po),jn(po,t)):er(Jo),jn(Jo,n)}var iu=null,aM=!1,bR=!1;function lee(t){iu===null?iu=[t]:iu.push(t)}function S0e(t){aM=!0,lee(t)}function If(){if(!bR&&iu!==null){bR=!0;var t=0,e=In;try{var n=iu;for(In=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}iu=null,aM=!1}catch(i){throw iu!==null&&(iu=iu.slice(t+1)),DJ(WB,If),i}finally{In=e,bR=!1}}return null}var Eg=[],Tg=0,cT=null,uT=0,ua=[],da=0,pp=null,fu=1,hu="";function uh(t,e){Eg[Tg++]=uT,Eg[Tg++]=cT,cT=t,uT=e}function cee(t,e,n){ua[da++]=fu,ua[da++]=hu,ua[da++]=pp,pp=t;var r=fu;t=hu;var i=32-pl(r)-1;r&=~(1<<i),n+=1;var o=32-pl(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,fu=1<<32-pl(e)+i|n<<i|r,hu=o+t}else fu=1<<o|n<<i|r,hu=t}function ZB(t){t.return!==null&&(uh(t,1),cee(t,1,0))}function JB(t){for(;t===cT;)cT=Eg[--Tg],Eg[Tg]=null,uT=Eg[--Tg],Eg[Tg]=null;for(;t===pp;)pp=ua[--da],ua[da]=null,hu=ua[--da],ua[da]=null,fu=ua[--da],ua[da]=null}var Os=null,Ts=null,sr=!1,ol=null;function uee(t,e){var n=va(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function B5(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Os=t,Ts=Kd(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Os=t,Ts=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=pp!==null?{id:fu,overflow:hu}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=va(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Os=t,Ts=null,!0):!1;default:return!1}}function IN(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ON(t){if(sr){var e=Ts;if(e){var n=e;if(!B5(t,e)){if(IN(t))throw Error(Ye(418));e=Kd(n.nextSibling);var r=Os;e&&B5(t,e)?uee(r,n):(t.flags=t.flags&-4097|2,sr=!1,Os=t)}}else{if(IN(t))throw Error(Ye(418));t.flags=t.flags&-4097|2,sr=!1,Os=t}}}function U5(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Os=t}function OS(t){if(t!==Os)return!1;if(!sr)return U5(t),sr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!TN(t.type,t.memoizedProps)),e&&(e=Ts)){if(IN(t))throw dee(),Error(Ye(418));for(;e;)uee(t,e),e=Kd(e.nextSibling)}if(U5(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ye(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ts=Kd(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ts=null}}else Ts=Os?Kd(t.stateNode.nextSibling):null;return!0}function dee(){for(var t=Ts;t;)t=Kd(t.nextSibling)}function hv(){Ts=Os=null,sr=!1}function eU(t){ol===null?ol=[t]:ol.push(t)}var C0e=Yu.ReactCurrentBatchConfig;function C0(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ye(309));var r=n.stateNode}if(!r)throw Error(Ye(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(Ye(284));if(!n._owner)throw Error(Ye(290,t))}return t}function RS(t,e){throw t=Object.prototype.toString.call(e),Error(Ye(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function z5(t){var e=t._init;return e(t._payload)}function fee(t){function e(v,_){if(t){var w=v.deletions;w===null?(v.deletions=[_],v.flags|=16):w.push(_)}}function n(v,_){if(!t)return null;for(;_!==null;)e(v,_),_=_.sibling;return null}function r(v,_){for(v=new Map;_!==null;)_.key!==null?v.set(_.key,_):v.set(_.index,_),_=_.sibling;return v}function i(v,_){return v=Jd(v,_),v.index=0,v.sibling=null,v}function o(v,_,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<_?(v.flags|=2,_):w):(v.flags|=2,_)):(v.flags|=1048576,_)}function s(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,_,w,y){return _===null||_.tag!==6?(_=TR(w,v.mode,y),_.return=v,_):(_=i(_,w),_.return=v,_)}function l(v,_,w,y){var b=w.type;return b===bg?u(v,_,w.props.children,y,w.key):_!==null&&(_.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Sd&&z5(b)===_.type)?(y=i(_,w.props),y.ref=C0(v,_,w),y.return=v,y):(y=vE(w.type,w.key,w.props,null,v.mode,y),y.ref=C0(v,_,w),y.return=v,y)}function c(v,_,w,y){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=kR(w,v.mode,y),_.return=v,_):(_=i(_,w.children||[]),_.return=v,_)}function u(v,_,w,y,b){return _===null||_.tag!==7?(_=Qh(w,v.mode,y,b),_.return=v,_):(_=i(_,w),_.return=v,_)}function d(v,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return _=TR(""+_,v.mode,w),_.return=v,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case wS:return w=vE(_.type,_.key,_.props,null,v.mode,w),w.ref=C0(v,null,_),w.return=v,w;case yg:return _=kR(_,v.mode,w),_.return=v,_;case Sd:var y=_._init;return d(v,y(_._payload),w)}if(cb(_)||b0(_))return _=Qh(_,v.mode,w,null),_.return=v,_;RS(v,_)}return null}function f(v,_,w,y){var b=_!==null?_.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return b!==null?null:a(v,_,""+w,y);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case wS:return w.key===b?l(v,_,w,y):null;case yg:return w.key===b?c(v,_,w,y):null;case Sd:return b=w._init,f(v,_,b(w._payload),y)}if(cb(w)||b0(w))return b!==null?null:u(v,_,w,y,null);RS(v,w)}return null}function h(v,_,w,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return v=v.get(w)||null,a(_,v,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case wS:return v=v.get(y.key===null?w:y.key)||null,l(_,v,y,b);case yg:return v=v.get(y.key===null?w:y.key)||null,c(_,v,y,b);case Sd:var x=y._init;return h(v,_,w,x(y._payload),b)}if(cb(y)||b0(y))return v=v.get(w)||null,u(_,v,y,b,null);RS(_,y)}return null}function g(v,_,w,y){for(var b=null,x=null,S=_,C=_=0,T=null;S!==null&&C<w.length;C++){S.index>C?(T=S,S=null):T=S.sibling;var E=f(v,S,w[C],y);if(E===null){S===null&&(S=T);break}t&&S&&E.alternate===null&&e(v,S),_=o(E,_,C),x===null?b=E:x.sibling=E,x=E,S=T}if(C===w.length)return n(v,S),sr&&uh(v,C),b;if(S===null){for(;C<w.length;C++)S=d(v,w[C],y),S!==null&&(_=o(S,_,C),x===null?b=S:x.sibling=S,x=S);return sr&&uh(v,C),b}for(S=r(v,S);C<w.length;C++)T=h(S,v,C,w[C],y),T!==null&&(t&&T.alternate!==null&&S.delete(T.key===null?C:T.key),_=o(T,_,C),x===null?b=T:x.sibling=T,x=T);return t&&S.forEach(function(k){return e(v,k)}),sr&&uh(v,C),b}function p(v,_,w,y){var b=b0(w);if(typeof b!="function")throw Error(Ye(150));if(w=b.call(w),w==null)throw Error(Ye(151));for(var x=b=null,S=_,C=_=0,T=null,E=w.next();S!==null&&!E.done;C++,E=w.next()){S.index>C?(T=S,S=null):T=S.sibling;var k=f(v,S,E.value,y);if(k===null){S===null&&(S=T);break}t&&S&&k.alternate===null&&e(v,S),_=o(k,_,C),x===null?b=k:x.sibling=k,x=k,S=T}if(E.done)return n(v,S),sr&&uh(v,C),b;if(S===null){for(;!E.done;C++,E=w.next())E=d(v,E.value,y),E!==null&&(_=o(E,_,C),x===null?b=E:x.sibling=E,x=E);return sr&&uh(v,C),b}for(S=r(v,S);!E.done;C++,E=w.next())E=h(S,v,C,E.value,y),E!==null&&(t&&E.alternate!==null&&S.delete(E.key===null?C:E.key),_=o(E,_,C),x===null?b=E:x.sibling=E,x=E);return t&&S.forEach(function(A){return e(v,A)}),sr&&uh(v,C),b}function m(v,_,w,y){if(typeof w=="object"&&w!==null&&w.type===bg&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case wS:e:{for(var b=w.key,x=_;x!==null;){if(x.key===b){if(b=w.type,b===bg){if(x.tag===7){n(v,x.sibling),_=i(x,w.props.children),_.return=v,v=_;break e}}else if(x.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Sd&&z5(b)===x.type){n(v,x.sibling),_=i(x,w.props),_.ref=C0(v,x,w),_.return=v,v=_;break e}n(v,x);break}else e(v,x);x=x.sibling}w.type===bg?(_=Qh(w.props.children,v.mode,y,w.key),_.return=v,v=_):(y=vE(w.type,w.key,w.props,null,v.mode,y),y.ref=C0(v,_,w),y.return=v,v=y)}return s(v);case yg:e:{for(x=w.key;_!==null;){if(_.key===x)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){n(v,_.sibling),_=i(_,w.children||[]),_.return=v,v=_;break e}else{n(v,_);break}else e(v,_);_=_.sibling}_=kR(w,v.mode,y),_.return=v,v=_}return s(v);case Sd:return x=w._init,m(v,_,x(w._payload),y)}if(cb(w))return g(v,_,w,y);if(b0(w))return p(v,_,w,y);RS(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,_!==null&&_.tag===6?(n(v,_.sibling),_=i(_,w),_.return=v,v=_):(n(v,_),_=TR(w,v.mode,y),_.return=v,v=_),s(v)):n(v,_)}return m}var pv=fee(!0),hee=fee(!1),dT=Mf(null),fT=null,kg=null,tU=null;function nU(){tU=kg=fT=null}function rU(t){var e=dT.current;er(dT),t._currentValue=e}function RN(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Hg(t,e){fT=t,tU=kg=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Xo=!0),t.firstContext=null)}function Ma(t){var e=t._currentValue;if(tU!==t)if(t={context:t,memoizedValue:e,next:null},kg===null){if(fT===null)throw Error(Ye(308));kg=t,fT.dependencies={lanes:0,firstContext:t}}else kg=kg.next=t;return e}var Oh=null;function iU(t){Oh===null?Oh=[t]:Oh.push(t)}function pee(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,iU(e)):(n.next=i.next,i.next=n),e.interleaved=n,Iu(t,r)}function Iu(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Cd=!1;function oU(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mee(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _u(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yd(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ln&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Iu(t,n)}return i=r.interleaved,i===null?(e.next=e,iU(r)):(e.next=i.next,i.next=e),r.interleaved=e,Iu(t,n)}function dE(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,VB(t,n)}}function j5(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function hT(t,e,n,r){var i=t.updateQueue;Cd=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==s&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;s=0,u=c=l=null,a=o;do{var f=a.lane,h=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,p=a;switch(f=e,h=n,p.tag){case 1:if(g=p.payload,typeof g=="function"){d=g.call(h,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,f=typeof g=="function"?g.call(h,d,f):g,f==null)break e;d=mr({},d,f);break e;case 2:Cd=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,s|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);gp|=s,t.lanes=s,t.memoizedState=d}}function W5(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ye(191,i));i.call(r)}}}var i_={},fc=Mf(i_),vx=Mf(i_),yx=Mf(i_);function Rh(t){if(t===i_)throw Error(Ye(174));return t}function sU(t,e){switch(jn(yx,e),jn(vx,t),jn(fc,i_),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fN(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=fN(e,t)}er(fc),jn(fc,e)}function mv(){er(fc),er(vx),er(yx)}function gee(t){Rh(yx.current);var e=Rh(fc.current),n=fN(e,t.type);e!==n&&(jn(vx,t),jn(fc,n))}function aU(t){vx.current===t&&(er(fc),er(vx))}var dr=Mf(0);function pT(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xR=[];function lU(){for(var t=0;t<xR.length;t++)xR[t]._workInProgressVersionPrimary=null;xR.length=0}var fE=Yu.ReactCurrentDispatcher,wR=Yu.ReactCurrentBatchConfig,mp=0,hr=null,oi=null,Ci=null,mT=!1,Pb=!1,bx=0,E0e=0;function Qi(){throw Error(Ye(321))}function cU(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Sl(t[n],e[n]))return!1;return!0}function uU(t,e,n,r,i,o){if(mp=o,hr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fE.current=t===null||t.memoizedState===null?M0e:I0e,t=n(r,i),Pb){o=0;do{if(Pb=!1,bx=0,25<=o)throw Error(Ye(301));o+=1,Ci=oi=null,e.updateQueue=null,fE.current=O0e,t=n(r,i)}while(Pb)}if(fE.current=gT,e=oi!==null&&oi.next!==null,mp=0,Ci=oi=hr=null,mT=!1,e)throw Error(Ye(300));return t}function dU(){var t=bx!==0;return bx=0,t}function Fl(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ci===null?hr.memoizedState=Ci=t:Ci=Ci.next=t,Ci}function Ia(){if(oi===null){var t=hr.alternate;t=t!==null?t.memoizedState:null}else t=oi.next;var e=Ci===null?hr.memoizedState:Ci.next;if(e!==null)Ci=e,oi=t;else{if(t===null)throw Error(Ye(310));oi=t,t={memoizedState:oi.memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},Ci===null?hr.memoizedState=Ci=t:Ci=Ci.next=t}return Ci}function xx(t,e){return typeof e=="function"?e(t):e}function _R(t){var e=Ia(),n=e.queue;if(n===null)throw Error(Ye(311));n.lastRenderedReducer=t;var r=oi,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,c=o;do{var u=c.lane;if((mp&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,s=r):l=l.next=d,hr.lanes|=u,gp|=u}c=c.next}while(c!==null&&c!==o);l===null?s=r:l.next=a,Sl(r,e.memoizedState)||(Xo=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,hr.lanes|=o,gp|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function SR(t){var e=Ia(),n=e.queue;if(n===null)throw Error(Ye(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);Sl(o,e.memoizedState)||(Xo=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function vee(){}function yee(t,e){var n=hr,r=Ia(),i=e(),o=!Sl(r.memoizedState,i);if(o&&(r.memoizedState=i,Xo=!0),r=r.queue,fU(wee.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Ci!==null&&Ci.memoizedState.tag&1){if(n.flags|=2048,wx(9,xee.bind(null,n,r,i,e),void 0,null),ki===null)throw Error(Ye(349));mp&30||bee(n,e,i)}return i}function bee(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=hr.updateQueue,e===null?(e={lastEffect:null,stores:null},hr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function xee(t,e,n,r){e.value=n,e.getSnapshot=r,_ee(e)&&See(t)}function wee(t,e,n){return n(function(){_ee(e)&&See(t)})}function _ee(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Sl(t,n)}catch{return!0}}function See(t){var e=Iu(t,1);e!==null&&ml(e,t,1,-1)}function V5(t){var e=Fl();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xx,lastRenderedState:t},e.queue=t,t=t.dispatch=A0e.bind(null,hr,t),[e.memoizedState,t]}function wx(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=hr.updateQueue,e===null?(e={lastEffect:null,stores:null},hr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Cee(){return Ia().memoizedState}function hE(t,e,n,r){var i=Fl();hr.flags|=t,i.memoizedState=wx(1|e,n,void 0,r===void 0?null:r)}function lM(t,e,n,r){var i=Ia();r=r===void 0?null:r;var o=void 0;if(oi!==null){var s=oi.memoizedState;if(o=s.destroy,r!==null&&cU(r,s.deps)){i.memoizedState=wx(e,n,o,r);return}}hr.flags|=t,i.memoizedState=wx(1|e,n,o,r)}function H5(t,e){return hE(8390656,8,t,e)}function fU(t,e){return lM(2048,8,t,e)}function Eee(t,e){return lM(4,2,t,e)}function Tee(t,e){return lM(4,4,t,e)}function kee(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Aee(t,e,n){return n=n!=null?n.concat([t]):null,lM(4,4,kee.bind(null,e,t),n)}function hU(){}function Mee(t,e){var n=Ia();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cU(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Iee(t,e){var n=Ia();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cU(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Oee(t,e,n){return mp&21?(Sl(n,e)||(n=$J(),hr.lanes|=n,gp|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Xo=!0),t.memoizedState=n)}function T0e(t,e){var n=In;In=n!==0&&4>n?n:4,t(!0);var r=wR.transition;wR.transition={};try{t(!1),e()}finally{In=n,wR.transition=r}}function Ree(){return Ia().memoizedState}function k0e(t,e,n){var r=Zd(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Dee(t))Pee(e,n);else if(n=pee(t,e,n,r),n!==null){var i=Do();ml(n,t,r,i),Nee(n,e,r)}}function A0e(t,e,n){var r=Zd(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Dee(t))Pee(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,Sl(a,s)){var l=e.interleaved;l===null?(i.next=i,iU(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=pee(t,e,i,r),n!==null&&(i=Do(),ml(n,t,r,i),Nee(n,e,r))}}function Dee(t){var e=t.alternate;return t===hr||e!==null&&e===hr}function Pee(t,e){Pb=mT=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Nee(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,VB(t,n)}}var gT={readContext:Ma,useCallback:Qi,useContext:Qi,useEffect:Qi,useImperativeHandle:Qi,useInsertionEffect:Qi,useLayoutEffect:Qi,useMemo:Qi,useReducer:Qi,useRef:Qi,useState:Qi,useDebugValue:Qi,useDeferredValue:Qi,useTransition:Qi,useMutableSource:Qi,useSyncExternalStore:Qi,useId:Qi,unstable_isNewReconciler:!1},M0e={readContext:Ma,useCallback:function(t,e){return Fl().memoizedState=[t,e===void 0?null:e],t},useContext:Ma,useEffect:H5,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hE(4194308,4,kee.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hE(4194308,4,t,e)},useInsertionEffect:function(t,e){return hE(4,2,t,e)},useMemo:function(t,e){var n=Fl();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Fl();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=k0e.bind(null,hr,t),[r.memoizedState,t]},useRef:function(t){var e=Fl();return t={current:t},e.memoizedState=t},useState:V5,useDebugValue:hU,useDeferredValue:function(t){return Fl().memoizedState=t},useTransition:function(){var t=V5(!1),e=t[0];return t=T0e.bind(null,t[1]),Fl().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=hr,i=Fl();if(sr){if(n===void 0)throw Error(Ye(407));n=n()}else{if(n=e(),ki===null)throw Error(Ye(349));mp&30||bee(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,H5(wee.bind(null,r,o,t),[t]),r.flags|=2048,wx(9,xee.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Fl(),e=ki.identifierPrefix;if(sr){var n=hu,r=fu;n=(r&~(1<<32-pl(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=bx++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=E0e++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},I0e={readContext:Ma,useCallback:Mee,useContext:Ma,useEffect:fU,useImperativeHandle:Aee,useInsertionEffect:Eee,useLayoutEffect:Tee,useMemo:Iee,useReducer:_R,useRef:Cee,useState:function(){return _R(xx)},useDebugValue:hU,useDeferredValue:function(t){var e=Ia();return Oee(e,oi.memoizedState,t)},useTransition:function(){var t=_R(xx)[0],e=Ia().memoizedState;return[t,e]},useMutableSource:vee,useSyncExternalStore:yee,useId:Ree,unstable_isNewReconciler:!1},O0e={readContext:Ma,useCallback:Mee,useContext:Ma,useEffect:fU,useImperativeHandle:Aee,useInsertionEffect:Eee,useLayoutEffect:Tee,useMemo:Iee,useReducer:SR,useRef:Cee,useState:function(){return SR(xx)},useDebugValue:hU,useDeferredValue:function(t){var e=Ia();return oi===null?e.memoizedState=t:Oee(e,oi.memoizedState,t)},useTransition:function(){var t=SR(xx)[0],e=Ia().memoizedState;return[t,e]},useMutableSource:vee,useSyncExternalStore:yee,useId:Ree,unstable_isNewReconciler:!1};function el(t,e){if(t&&t.defaultProps){e=mr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function DN(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:mr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var cM={isMounted:function(t){return(t=t._reactInternals)?Zp(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Do(),i=Zd(t),o=_u(r,i);o.payload=e,n!=null&&(o.callback=n),e=Yd(t,o,i),e!==null&&(ml(e,t,i,r),dE(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Do(),i=Zd(t),o=_u(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Yd(t,o,i),e!==null&&(ml(e,t,i,r),dE(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Do(),r=Zd(t),i=_u(n,r);i.tag=2,e!=null&&(i.callback=e),e=Yd(t,i,r),e!==null&&(ml(e,t,r,n),dE(e,t,r))}};function G5(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!hx(n,r)||!hx(i,o):!0}function $ee(t,e,n){var r=!1,i=ff,o=e.contextType;return typeof o=="object"&&o!==null?o=Ma(o):(i=es(e)?hp:po.current,r=e.contextTypes,o=(r=r!=null)?fv(t,i):ff),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cM,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function q5(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&cM.enqueueReplaceState(e,e.state,null)}function PN(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},oU(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Ma(o):(o=es(e)?hp:po.current,i.context=fv(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(DN(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&cM.enqueueReplaceState(i,i.state,null),hT(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function gv(t,e){try{var n="",r=e;do n+=oye(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function CR(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function NN(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var R0e=typeof WeakMap=="function"?WeakMap:Map;function Lee(t,e,n){n=_u(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){yT||(yT=!0,HN=r),NN(t,e)},n}function Fee(t,e,n){n=_u(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){NN(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){NN(t,e),typeof r!="function"&&(Qd===null?Qd=new Set([this]):Qd.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function X5(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new R0e;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=G0e.bind(null,t,e,n),e.then(t,t))}function K5(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Y5(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=_u(-1,1),e.tag=2,Yd(n,e,1))),n.lanes|=1),t)}var D0e=Yu.ReactCurrentOwner,Xo=!1;function wo(t,e,n,r){e.child=t===null?hee(e,null,n,r):pv(e,t.child,n,r)}function Q5(t,e,n,r,i){n=n.render;var o=e.ref;return Hg(e,i),r=uU(t,e,n,r,o,i),n=dU(),t!==null&&!Xo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ou(t,e,i)):(sr&&n&&ZB(e),e.flags|=1,wo(t,e,r,i),e.child)}function Z5(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!wU(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Bee(t,e,o,r,i)):(t=vE(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:hx,n(s,r)&&t.ref===e.ref)return Ou(t,e,i)}return e.flags|=1,t=Jd(o,r),t.ref=e.ref,t.return=e,e.child=t}function Bee(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(hx(o,r)&&t.ref===e.ref)if(Xo=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Xo=!0);else return e.lanes=t.lanes,Ou(t,e,i)}return $N(t,e,n,r,i)}function Uee(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},jn(Mg,xs),xs|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,jn(Mg,xs),xs|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,jn(Mg,xs),xs|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,jn(Mg,xs),xs|=r;return wo(t,e,i,n),e.child}function zee(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function $N(t,e,n,r,i){var o=es(n)?hp:po.current;return o=fv(e,o),Hg(e,i),n=uU(t,e,n,r,o,i),r=dU(),t!==null&&!Xo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ou(t,e,i)):(sr&&r&&ZB(e),e.flags|=1,wo(t,e,n,i),e.child)}function J5(t,e,n,r,i){if(es(n)){var o=!0;lT(e)}else o=!1;if(Hg(e,i),e.stateNode===null)pE(t,e),$ee(e,n,r),PN(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ma(c):(c=es(n)?hp:po.current,c=fv(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==c)&&q5(e,s,r,c),Cd=!1;var f=e.memoizedState;s.state=f,hT(e,r,s,i),l=e.memoizedState,a!==r||f!==l||Jo.current||Cd?(typeof u=="function"&&(DN(e,n,u,r),l=e.memoizedState),(a=Cd||G5(e,n,a,r,f,l,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,mee(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:el(e.type,a),s.props=c,d=e.pendingProps,f=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ma(l):(l=es(n)?hp:po.current,l=fv(e,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||f!==l)&&q5(e,s,r,l),Cd=!1,f=e.memoizedState,s.state=f,hT(e,r,s,i);var g=e.memoizedState;a!==d||f!==g||Jo.current||Cd?(typeof h=="function"&&(DN(e,n,h,r),g=e.memoizedState),(c=Cd||G5(e,n,c,r,f,g,l)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,g,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,g,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),s.props=r,s.state=g,s.context=l,r=c):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return LN(t,e,n,r,o,i)}function LN(t,e,n,r,i,o){zee(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&F5(e,n,!1),Ou(t,e,o);r=e.stateNode,D0e.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=pv(e,t.child,null,o),e.child=pv(e,null,a,o)):wo(t,e,a,o),e.memoizedState=r.state,i&&F5(e,n,!0),e.child}function jee(t){var e=t.stateNode;e.pendingContext?L5(t,e.pendingContext,e.pendingContext!==e.context):e.context&&L5(t,e.context,!1),sU(t,e.containerInfo)}function eG(t,e,n,r,i){return hv(),eU(i),e.flags|=256,wo(t,e,n,r),e.child}var FN={dehydrated:null,treeContext:null,retryLane:0};function BN(t){return{baseLanes:t,cachePool:null,transitions:null}}function Wee(t,e,n){var r=e.pendingProps,i=dr.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),jn(dr,i&1),t===null)return ON(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=fM(s,r,0,null),t=Qh(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=BN(n),e.memoizedState=FN,t):pU(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return P0e(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Jd(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Jd(a,o):(o=Qh(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?BN(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=FN,r}return o=t.child,t=o.sibling,r=Jd(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function pU(t,e){return e=fM({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function DS(t,e,n,r){return r!==null&&eU(r),pv(e,t.child,null,n),t=pU(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function P0e(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=CR(Error(Ye(422))),DS(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=fM({mode:"visible",children:r.children},i,0,null),o=Qh(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&pv(e,t.child,null,s),e.child.memoizedState=BN(s),e.memoizedState=FN,o);if(!(e.mode&1))return DS(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(Ye(419)),r=CR(o,r,void 0),DS(t,e,s,r)}if(a=(s&t.childLanes)!==0,Xo||a){if(r=ki,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Iu(t,i),ml(r,t,i,-1))}return xU(),r=CR(Error(Ye(421))),DS(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=q0e.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Ts=Kd(i.nextSibling),Os=e,sr=!0,ol=null,t!==null&&(ua[da++]=fu,ua[da++]=hu,ua[da++]=pp,fu=t.id,hu=t.overflow,pp=e),e=pU(e,r.children),e.flags|=4096,e)}function tG(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),RN(t.return,e,n)}function ER(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Vee(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(wo(t,e,r.children,n),r=dr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&tG(t,n,e);else if(t.tag===19)tG(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(jn(dr,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&pT(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ER(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&pT(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ER(e,!0,n,null,o);break;case"together":ER(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pE(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ou(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),gp|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ye(153));if(e.child!==null){for(t=e.child,n=Jd(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Jd(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function N0e(t,e,n){switch(e.tag){case 3:jee(e),hv();break;case 5:gee(e);break;case 1:es(e.type)&&lT(e);break;case 4:sU(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;jn(dT,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(jn(dr,dr.current&1),e.flags|=128,null):n&e.child.childLanes?Wee(t,e,n):(jn(dr,dr.current&1),t=Ou(t,e,n),t!==null?t.sibling:null);jn(dr,dr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Vee(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),jn(dr,dr.current),r)break;return null;case 22:case 23:return e.lanes=0,Uee(t,e,n)}return Ou(t,e,n)}var Hee,UN,Gee,qee;Hee=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};UN=function(){};Gee=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Rh(fc.current);var o=null;switch(n){case"input":i=lN(t,i),r=lN(t,r),o=[];break;case"select":i=mr({},i,{value:void 0}),r=mr({},r,{value:void 0}),o=[];break;case"textarea":i=dN(t,i),r=dN(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=sT)}hN(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(sx.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(sx.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Kn("scroll",t),o||a===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};qee=function(t,e,n,r){n!==r&&(e.flags|=4)};function E0(t,e){if(!sr)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zi(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function $0e(t,e,n){var r=e.pendingProps;switch(JB(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zi(e),null;case 1:return es(e.type)&&aT(),Zi(e),null;case 3:return r=e.stateNode,mv(),er(Jo),er(po),lU(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(OS(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ol!==null&&(XN(ol),ol=null))),UN(t,e),Zi(e),null;case 5:aU(e);var i=Rh(yx.current);if(n=e.type,t!==null&&e.stateNode!=null)Gee(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ye(166));return Zi(e),null}if(t=Rh(fc.current),OS(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Zl]=e,r[gx]=o,t=(e.mode&1)!==0,n){case"dialog":Kn("cancel",r),Kn("close",r);break;case"iframe":case"object":case"embed":Kn("load",r);break;case"video":case"audio":for(i=0;i<db.length;i++)Kn(db[i],r);break;case"source":Kn("error",r);break;case"img":case"image":case"link":Kn("error",r),Kn("load",r);break;case"details":Kn("toggle",r);break;case"input":u5(r,o),Kn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Kn("invalid",r);break;case"textarea":f5(r,o),Kn("invalid",r)}hN(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&IS(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&IS(r.textContent,a,t),i=["children",""+a]):sx.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Kn("scroll",r)}switch(n){case"input":_S(r),d5(r,o,!0);break;case"textarea":_S(r),h5(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=sT)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wJ(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Zl]=e,t[gx]=r,Hee(t,e,!1,!1),e.stateNode=t;e:{switch(s=pN(n,r),n){case"dialog":Kn("cancel",t),Kn("close",t),i=r;break;case"iframe":case"object":case"embed":Kn("load",t),i=r;break;case"video":case"audio":for(i=0;i<db.length;i++)Kn(db[i],t);i=r;break;case"source":Kn("error",t),i=r;break;case"img":case"image":case"link":Kn("error",t),Kn("load",t),i=r;break;case"details":Kn("toggle",t),i=r;break;case"input":u5(t,r),i=lN(t,r),Kn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=mr({},r,{value:void 0}),Kn("invalid",t);break;case"textarea":f5(t,r),i=dN(t,r),Kn("invalid",t);break;default:i=r}hN(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?CJ(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&_J(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ax(t,l):typeof l=="number"&&ax(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(sx.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Kn("scroll",t):l!=null&&FB(t,o,l,s))}switch(n){case"input":_S(t),d5(t,r,!1);break;case"textarea":_S(t),h5(t);break;case"option":r.value!=null&&t.setAttribute("value",""+df(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?zg(t,!!r.multiple,o,!1):r.defaultValue!=null&&zg(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=sT)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zi(e),null;case 6:if(t&&e.stateNode!=null)qee(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ye(166));if(n=Rh(yx.current),Rh(fc.current),OS(e)){if(r=e.stateNode,n=e.memoizedProps,r[Zl]=e,(o=r.nodeValue!==n)&&(t=Os,t!==null))switch(t.tag){case 3:IS(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&IS(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zl]=e,e.stateNode=r}return Zi(e),null;case 13:if(er(dr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(sr&&Ts!==null&&e.mode&1&&!(e.flags&128))dee(),hv(),e.flags|=98560,o=!1;else if(o=OS(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(Ye(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Ye(317));o[Zl]=e}else hv(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zi(e),o=!1}else ol!==null&&(XN(ol),ol=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||dr.current&1?di===0&&(di=3):xU())),e.updateQueue!==null&&(e.flags|=4),Zi(e),null);case 4:return mv(),UN(t,e),t===null&&px(e.stateNode.containerInfo),Zi(e),null;case 10:return rU(e.type._context),Zi(e),null;case 17:return es(e.type)&&aT(),Zi(e),null;case 19:if(er(dr),o=e.memoizedState,o===null)return Zi(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)E0(o,!1);else{if(di!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=pT(t),s!==null){for(e.flags|=128,E0(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return jn(dr,dr.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ir()>vv&&(e.flags|=128,r=!0,E0(o,!1),e.lanes=4194304)}else{if(!r)if(t=pT(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),E0(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!sr)return Zi(e),null}else 2*Ir()-o.renderingStartTime>vv&&n!==1073741824&&(e.flags|=128,r=!0,E0(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ir(),e.sibling=null,n=dr.current,jn(dr,r?n&1|2:n&1),e):(Zi(e),null);case 22:case 23:return bU(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?xs&1073741824&&(Zi(e),e.subtreeFlags&6&&(e.flags|=8192)):Zi(e),null;case 24:return null;case 25:return null}throw Error(Ye(156,e.tag))}function L0e(t,e){switch(JB(e),e.tag){case 1:return es(e.type)&&aT(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return mv(),er(Jo),er(po),lU(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return aU(e),null;case 13:if(er(dr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ye(340));hv()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return er(dr),null;case 4:return mv(),null;case 10:return rU(e.type._context),null;case 22:case 23:return bU(),null;case 24:return null;default:return null}}var PS=!1,so=!1,F0e=typeof WeakSet=="function"?WeakSet:Set,ht=null;function Ag(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){xr(t,e,r)}else n.current=null}function zN(t,e,n){try{n()}catch(r){xr(t,e,r)}}var nG=!1;function B0e(t,e){if(CN=rT,t=ZJ(),QB(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=s+i),d!==o||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=s),f===o&&++u===r&&(l=s),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(EN={focusedElem:t,selectionRange:n},rT=!1,ht=e;ht!==null;)if(e=ht,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ht=t;else for(;ht!==null;){e=ht;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var p=g.memoizedProps,m=g.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?p:el(e.type,p),m);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ye(163))}}catch(y){xr(e,e.return,y)}if(t=e.sibling,t!==null){t.return=e.return,ht=t;break}ht=e.return}return g=nG,nG=!1,g}function Nb(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&zN(e,n,o)}i=i.next}while(i!==r)}}function uM(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function jN(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Xee(t){var e=t.alternate;e!==null&&(t.alternate=null,Xee(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zl],delete e[gx],delete e[AN],delete e[w0e],delete e[_0e])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Kee(t){return t.tag===5||t.tag===3||t.tag===4}function rG(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Kee(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function WN(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=sT));else if(r!==4&&(t=t.child,t!==null))for(WN(t,e,n),t=t.sibling;t!==null;)WN(t,e,n),t=t.sibling}function VN(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(VN(t,e,n),t=t.sibling;t!==null;)VN(t,e,n),t=t.sibling}var Bi=null,tl=!1;function ld(t,e,n){for(n=n.child;n!==null;)Yee(t,e,n),n=n.sibling}function Yee(t,e,n){if(dc&&typeof dc.onCommitFiberUnmount=="function")try{dc.onCommitFiberUnmount(nM,n)}catch{}switch(n.tag){case 5:so||Ag(n,e);case 6:var r=Bi,i=tl;Bi=null,ld(t,e,n),Bi=r,tl=i,Bi!==null&&(tl?(t=Bi,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Bi.removeChild(n.stateNode));break;case 18:Bi!==null&&(tl?(t=Bi,n=n.stateNode,t.nodeType===8?yR(t.parentNode,n):t.nodeType===1&&yR(t,n),dx(t)):yR(Bi,n.stateNode));break;case 4:r=Bi,i=tl,Bi=n.stateNode.containerInfo,tl=!0,ld(t,e,n),Bi=r,tl=i;break;case 0:case 11:case 14:case 15:if(!so&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&zN(n,e,s),i=i.next}while(i!==r)}ld(t,e,n);break;case 1:if(!so&&(Ag(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){xr(n,e,a)}ld(t,e,n);break;case 21:ld(t,e,n);break;case 22:n.mode&1?(so=(r=so)||n.memoizedState!==null,ld(t,e,n),so=r):ld(t,e,n);break;default:ld(t,e,n)}}function iG(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new F0e),e.forEach(function(r){var i=X0e.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ga(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:Bi=a.stateNode,tl=!1;break e;case 3:Bi=a.stateNode.containerInfo,tl=!0;break e;case 4:Bi=a.stateNode.containerInfo,tl=!0;break e}a=a.return}if(Bi===null)throw Error(Ye(160));Yee(o,s,i),Bi=null,tl=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){xr(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Qee(e,t),e=e.sibling}function Qee(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ga(e,t),$l(t),r&4){try{Nb(3,t,t.return),uM(3,t)}catch(p){xr(t,t.return,p)}try{Nb(5,t,t.return)}catch(p){xr(t,t.return,p)}}break;case 1:Ga(e,t),$l(t),r&512&&n!==null&&Ag(n,n.return);break;case 5:if(Ga(e,t),$l(t),r&512&&n!==null&&Ag(n,n.return),t.flags&32){var i=t.stateNode;try{ax(i,"")}catch(p){xr(t,t.return,p)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&bJ(i,o),pN(a,s);var c=pN(a,o);for(s=0;s<l.length;s+=2){var u=l[s],d=l[s+1];u==="style"?CJ(i,d):u==="dangerouslySetInnerHTML"?_J(i,d):u==="children"?ax(i,d):FB(i,u,d,c)}switch(a){case"input":cN(i,o);break;case"textarea":xJ(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?zg(i,!!o.multiple,h,!1):f!==!!o.multiple&&(o.defaultValue!=null?zg(i,!!o.multiple,o.defaultValue,!0):zg(i,!!o.multiple,o.multiple?[]:"",!1))}i[gx]=o}catch(p){xr(t,t.return,p)}}break;case 6:if(Ga(e,t),$l(t),r&4){if(t.stateNode===null)throw Error(Ye(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(p){xr(t,t.return,p)}}break;case 3:if(Ga(e,t),$l(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{dx(e.containerInfo)}catch(p){xr(t,t.return,p)}break;case 4:Ga(e,t),$l(t);break;case 13:Ga(e,t),$l(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(vU=Ir())),r&4&&iG(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(so=(c=so)||u,Ga(e,t),so=c):Ga(e,t),$l(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(ht=t,u=t.child;u!==null;){for(d=ht=u;ht!==null;){switch(f=ht,h=f.child,f.tag){case 0:case 11:case 14:case 15:Nb(4,f,f.return);break;case 1:Ag(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(p){xr(r,n,p)}}break;case 5:Ag(f,f.return);break;case 22:if(f.memoizedState!==null){sG(d);continue}}h!==null?(h.return=f,ht=h):sG(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=SJ("display",s))}catch(p){xr(t,t.return,p)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(p){xr(t,t.return,p)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ga(e,t),$l(t),r&4&&iG(t);break;case 21:break;default:Ga(e,t),$l(t)}}function $l(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Kee(n)){var r=n;break e}n=n.return}throw Error(Ye(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ax(i,""),r.flags&=-33);var o=rG(t);VN(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=rG(t);WN(t,a,s);break;default:throw Error(Ye(161))}}catch(l){xr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function U0e(t,e,n){ht=t,Zee(t)}function Zee(t,e,n){for(var r=(t.mode&1)!==0;ht!==null;){var i=ht,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||PS;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||so;a=PS;var c=so;if(PS=s,(so=l)&&!c)for(ht=i;ht!==null;)s=ht,l=s.child,s.tag===22&&s.memoizedState!==null?aG(i):l!==null?(l.return=s,ht=l):aG(i);for(;o!==null;)ht=o,Zee(o),o=o.sibling;ht=i,PS=a,so=c}oG(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ht=o):oG(t)}}function oG(t){for(;ht!==null;){var e=ht;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:so||uM(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!so)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:el(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&W5(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}W5(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&dx(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ye(163))}so||e.flags&512&&jN(e)}catch(f){xr(e,e.return,f)}}if(e===t){ht=null;break}if(n=e.sibling,n!==null){n.return=e.return,ht=n;break}ht=e.return}}function sG(t){for(;ht!==null;){var e=ht;if(e===t){ht=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ht=n;break}ht=e.return}}function aG(t){for(;ht!==null;){var e=ht;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{uM(4,e)}catch(l){xr(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){xr(e,i,l)}}var o=e.return;try{jN(e)}catch(l){xr(e,o,l)}break;case 5:var s=e.return;try{jN(e)}catch(l){xr(e,s,l)}}}catch(l){xr(e,e.return,l)}if(e===t){ht=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ht=a;break}ht=e.return}}var z0e=Math.ceil,vT=Yu.ReactCurrentDispatcher,mU=Yu.ReactCurrentOwner,Ta=Yu.ReactCurrentBatchConfig,ln=0,ki=null,Hr=null,Wi=0,xs=0,Mg=Mf(0),di=0,_x=null,gp=0,dM=0,gU=0,$b=null,Wo=null,vU=0,vv=1/0,nu=null,yT=!1,HN=null,Qd=null,NS=!1,Pd=null,bT=0,Lb=0,GN=null,mE=-1,gE=0;function Do(){return ln&6?Ir():mE!==-1?mE:mE=Ir()}function Zd(t){return t.mode&1?ln&2&&Wi!==0?Wi&-Wi:C0e.transition!==null?(gE===0&&(gE=$J()),gE):(t=In,t!==0||(t=window.event,t=t===void 0?16:WJ(t.type)),t):1}function ml(t,e,n,r){if(50<Lb)throw Lb=0,GN=null,Error(Ye(185));t_(t,n,r),(!(ln&2)||t!==ki)&&(t===ki&&(!(ln&2)&&(dM|=n),di===4&&Ad(t,Wi)),ts(t,r),n===1&&ln===0&&!(e.mode&1)&&(vv=Ir()+500,aM&&If()))}function ts(t,e){var n=t.callbackNode;Cye(t,e);var r=nT(t,t===ki?Wi:0);if(r===0)n!==null&&g5(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&g5(n),e===1)t.tag===0?S0e(lG.bind(null,t)):lee(lG.bind(null,t)),b0e(function(){!(ln&6)&&If()}),n=null;else{switch(LJ(r)){case 1:n=WB;break;case 4:n=PJ;break;case 16:n=tT;break;case 536870912:n=NJ;break;default:n=tT}n=ste(n,Jee.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Jee(t,e){if(mE=-1,gE=0,ln&6)throw Error(Ye(327));var n=t.callbackNode;if(Gg()&&t.callbackNode!==n)return null;var r=nT(t,t===ki?Wi:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=xT(t,r);else{e=r;var i=ln;ln|=2;var o=tte();(ki!==t||Wi!==e)&&(nu=null,vv=Ir()+500,Yh(t,e));do try{V0e();break}catch(a){ete(t,a)}while(!0);nU(),vT.current=o,ln=i,Hr!==null?e=0:(ki=null,Wi=0,e=di)}if(e!==0){if(e===2&&(i=bN(t),i!==0&&(r=i,e=qN(t,i))),e===1)throw n=_x,Yh(t,0),Ad(t,r),ts(t,Ir()),n;if(e===6)Ad(t,r);else{if(i=t.current.alternate,!(r&30)&&!j0e(i)&&(e=xT(t,r),e===2&&(o=bN(t),o!==0&&(r=o,e=qN(t,o))),e===1))throw n=_x,Yh(t,0),Ad(t,r),ts(t,Ir()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Ye(345));case 2:dh(t,Wo,nu);break;case 3:if(Ad(t,r),(r&130023424)===r&&(e=vU+500-Ir(),10<e)){if(nT(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Do(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=kN(dh.bind(null,t,Wo,nu),e);break}dh(t,Wo,nu);break;case 4:if(Ad(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-pl(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Ir()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*z0e(r/1960))-r,10<r){t.timeoutHandle=kN(dh.bind(null,t,Wo,nu),r);break}dh(t,Wo,nu);break;case 5:dh(t,Wo,nu);break;default:throw Error(Ye(329))}}}return ts(t,Ir()),t.callbackNode===n?Jee.bind(null,t):null}function qN(t,e){var n=$b;return t.current.memoizedState.isDehydrated&&(Yh(t,e).flags|=256),t=xT(t,e),t!==2&&(e=Wo,Wo=n,e!==null&&XN(e)),t}function XN(t){Wo===null?Wo=t:Wo.push.apply(Wo,t)}function j0e(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Sl(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ad(t,e){for(e&=~gU,e&=~dM,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-pl(e),r=1<<n;t[n]=-1,e&=~r}}function lG(t){if(ln&6)throw Error(Ye(327));Gg();var e=nT(t,0);if(!(e&1))return ts(t,Ir()),null;var n=xT(t,e);if(t.tag!==0&&n===2){var r=bN(t);r!==0&&(e=r,n=qN(t,r))}if(n===1)throw n=_x,Yh(t,0),Ad(t,e),ts(t,Ir()),n;if(n===6)throw Error(Ye(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,dh(t,Wo,nu),ts(t,Ir()),null}function yU(t,e){var n=ln;ln|=1;try{return t(e)}finally{ln=n,ln===0&&(vv=Ir()+500,aM&&If())}}function vp(t){Pd!==null&&Pd.tag===0&&!(ln&6)&&Gg();var e=ln;ln|=1;var n=Ta.transition,r=In;try{if(Ta.transition=null,In=1,t)return t()}finally{In=r,Ta.transition=n,ln=e,!(ln&6)&&If()}}function bU(){xs=Mg.current,er(Mg)}function Yh(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,y0e(n)),Hr!==null)for(n=Hr.return;n!==null;){var r=n;switch(JB(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&aT();break;case 3:mv(),er(Jo),er(po),lU();break;case 5:aU(r);break;case 4:mv();break;case 13:er(dr);break;case 19:er(dr);break;case 10:rU(r.type._context);break;case 22:case 23:bU()}n=n.return}if(ki=t,Hr=t=Jd(t.current,null),Wi=xs=e,di=0,_x=null,gU=dM=gp=0,Wo=$b=null,Oh!==null){for(e=0;e<Oh.length;e++)if(n=Oh[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Oh=null}return t}function ete(t,e){do{var n=Hr;try{if(nU(),fE.current=gT,mT){for(var r=hr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}mT=!1}if(mp=0,Ci=oi=hr=null,Pb=!1,bx=0,mU.current=null,n===null||n.return===null){di=1,_x=e,Hr=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=Wi,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=K5(s);if(h!==null){h.flags&=-257,Y5(h,s,a,o,e),h.mode&1&&X5(o,c,e),e=h,l=c;var g=e.updateQueue;if(g===null){var p=new Set;p.add(l),e.updateQueue=p}else g.add(l);break e}else{if(!(e&1)){X5(o,c,e),xU();break e}l=Error(Ye(426))}}else if(sr&&a.mode&1){var m=K5(s);if(m!==null){!(m.flags&65536)&&(m.flags|=256),Y5(m,s,a,o,e),eU(gv(l,a));break e}}o=l=gv(l,a),di!==4&&(di=2),$b===null?$b=[o]:$b.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var v=Lee(o,l,e);j5(o,v);break e;case 1:a=l;var _=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof _.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Qd===null||!Qd.has(w)))){o.flags|=65536,e&=-e,o.lanes|=e;var y=Fee(o,a,e);j5(o,y);break e}}o=o.return}while(o!==null)}rte(n)}catch(b){e=b,Hr===n&&n!==null&&(Hr=n=n.return);continue}break}while(!0)}function tte(){var t=vT.current;return vT.current=gT,t===null?gT:t}function xU(){(di===0||di===3||di===2)&&(di=4),ki===null||!(gp&268435455)&&!(dM&268435455)||Ad(ki,Wi)}function xT(t,e){var n=ln;ln|=2;var r=tte();(ki!==t||Wi!==e)&&(nu=null,Yh(t,e));do try{W0e();break}catch(i){ete(t,i)}while(!0);if(nU(),ln=n,vT.current=r,Hr!==null)throw Error(Ye(261));return ki=null,Wi=0,di}function W0e(){for(;Hr!==null;)nte(Hr)}function V0e(){for(;Hr!==null&&!mye();)nte(Hr)}function nte(t){var e=ote(t.alternate,t,xs);t.memoizedProps=t.pendingProps,e===null?rte(t):Hr=e,mU.current=null}function rte(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=L0e(n,e),n!==null){n.flags&=32767,Hr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{di=6,Hr=null;return}}else if(n=$0e(n,e,xs),n!==null){Hr=n;return}if(e=e.sibling,e!==null){Hr=e;return}Hr=e=t}while(e!==null);di===0&&(di=5)}function dh(t,e,n){var r=In,i=Ta.transition;try{Ta.transition=null,In=1,H0e(t,e,n,r)}finally{Ta.transition=i,In=r}return null}function H0e(t,e,n,r){do Gg();while(Pd!==null);if(ln&6)throw Error(Ye(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ye(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Eye(t,o),t===ki&&(Hr=ki=null,Wi=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||NS||(NS=!0,ste(tT,function(){return Gg(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ta.transition,Ta.transition=null;var s=In;In=1;var a=ln;ln|=4,mU.current=null,B0e(t,n),Qee(n,t),d0e(EN),rT=!!CN,EN=CN=null,t.current=n,U0e(n),gye(),ln=a,In=s,Ta.transition=o}else t.current=n;if(NS&&(NS=!1,Pd=t,bT=i),o=t.pendingLanes,o===0&&(Qd=null),bye(n.stateNode),ts(t,Ir()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(yT)throw yT=!1,t=HN,HN=null,t;return bT&1&&t.tag!==0&&Gg(),o=t.pendingLanes,o&1?t===GN?Lb++:(Lb=0,GN=t):Lb=0,If(),null}function Gg(){if(Pd!==null){var t=LJ(bT),e=Ta.transition,n=In;try{if(Ta.transition=null,In=16>t?16:t,Pd===null)var r=!1;else{if(t=Pd,Pd=null,bT=0,ln&6)throw Error(Ye(331));var i=ln;for(ln|=4,ht=t.current;ht!==null;){var o=ht,s=o.child;if(ht.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ht=c;ht!==null;){var u=ht;switch(u.tag){case 0:case 11:case 15:Nb(8,u,o)}var d=u.child;if(d!==null)d.return=u,ht=d;else for(;ht!==null;){u=ht;var f=u.sibling,h=u.return;if(Xee(u),u===c){ht=null;break}if(f!==null){f.return=h,ht=f;break}ht=h}}}var g=o.alternate;if(g!==null){var p=g.child;if(p!==null){g.child=null;do{var m=p.sibling;p.sibling=null,p=m}while(p!==null)}}ht=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,ht=s;else e:for(;ht!==null;){if(o=ht,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Nb(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,ht=v;break e}ht=o.return}}var _=t.current;for(ht=_;ht!==null;){s=ht;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,ht=w;else e:for(s=_;ht!==null;){if(a=ht,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:uM(9,a)}}catch(b){xr(a,a.return,b)}if(a===s){ht=null;break e}var y=a.sibling;if(y!==null){y.return=a.return,ht=y;break e}ht=a.return}}if(ln=i,If(),dc&&typeof dc.onPostCommitFiberRoot=="function")try{dc.onPostCommitFiberRoot(nM,t)}catch{}r=!0}return r}finally{In=n,Ta.transition=e}}return!1}function cG(t,e,n){e=gv(n,e),e=Lee(t,e,1),t=Yd(t,e,1),e=Do(),t!==null&&(t_(t,1,e),ts(t,e))}function xr(t,e,n){if(t.tag===3)cG(t,t,n);else for(;e!==null;){if(e.tag===3){cG(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qd===null||!Qd.has(r))){t=gv(n,t),t=Fee(e,t,1),e=Yd(e,t,1),t=Do(),e!==null&&(t_(e,1,t),ts(e,t));break}}e=e.return}}function G0e(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Do(),t.pingedLanes|=t.suspendedLanes&n,ki===t&&(Wi&n)===n&&(di===4||di===3&&(Wi&130023424)===Wi&&500>Ir()-vU?Yh(t,0):gU|=n),ts(t,e)}function ite(t,e){e===0&&(t.mode&1?(e=ES,ES<<=1,!(ES&130023424)&&(ES=4194304)):e=1);var n=Do();t=Iu(t,e),t!==null&&(t_(t,e,n),ts(t,n))}function q0e(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ite(t,n)}function X0e(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ye(314))}r!==null&&r.delete(e),ite(t,n)}var ote;ote=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Jo.current)Xo=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Xo=!1,N0e(t,e,n);Xo=!!(t.flags&131072)}else Xo=!1,sr&&e.flags&1048576&&cee(e,uT,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;pE(t,e),t=e.pendingProps;var i=fv(e,po.current);Hg(e,n),i=uU(null,e,r,t,i,n);var o=dU();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,es(r)?(o=!0,lT(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,oU(e),i.updater=cM,e.stateNode=i,i._reactInternals=e,PN(e,r,t,n),e=LN(null,e,r,!0,o,n)):(e.tag=0,sr&&o&&ZB(e),wo(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(pE(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Y0e(r),t=el(r,t),i){case 0:e=$N(null,e,r,t,n);break e;case 1:e=J5(null,e,r,t,n);break e;case 11:e=Q5(null,e,r,t,n);break e;case 14:e=Z5(null,e,r,el(r.type,t),n);break e}throw Error(Ye(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:el(r,i),$N(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:el(r,i),J5(t,e,r,i,n);case 3:e:{if(jee(e),t===null)throw Error(Ye(387));r=e.pendingProps,o=e.memoizedState,i=o.element,mee(t,e),hT(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=gv(Error(Ye(423)),e),e=eG(t,e,r,n,i);break e}else if(r!==i){i=gv(Error(Ye(424)),e),e=eG(t,e,r,n,i);break e}else for(Ts=Kd(e.stateNode.containerInfo.firstChild),Os=e,sr=!0,ol=null,n=hee(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hv(),r===i){e=Ou(t,e,n);break e}wo(t,e,r,n)}e=e.child}return e;case 5:return gee(e),t===null&&ON(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,TN(r,i)?s=null:o!==null&&TN(r,o)&&(e.flags|=32),zee(t,e),wo(t,e,s,n),e.child;case 6:return t===null&&ON(e),null;case 13:return Wee(t,e,n);case 4:return sU(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=pv(e,null,r,n):wo(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:el(r,i),Q5(t,e,r,i,n);case 7:return wo(t,e,e.pendingProps,n),e.child;case 8:return wo(t,e,e.pendingProps.children,n),e.child;case 12:return wo(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,jn(dT,r._currentValue),r._currentValue=s,o!==null)if(Sl(o.value,s)){if(o.children===i.children&&!Jo.current){e=Ou(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=_u(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),RN(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(Ye(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),RN(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}wo(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Hg(e,n),i=Ma(i),r=r(i),e.flags|=1,wo(t,e,r,n),e.child;case 14:return r=e.type,i=el(r,e.pendingProps),i=el(r.type,i),Z5(t,e,r,i,n);case 15:return Bee(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:el(r,i),pE(t,e),e.tag=1,es(r)?(t=!0,lT(e)):t=!1,Hg(e,n),$ee(e,r,i),PN(e,r,i,n),LN(null,e,r,!0,t,n);case 19:return Vee(t,e,n);case 22:return Uee(t,e,n)}throw Error(Ye(156,e.tag))};function ste(t,e){return DJ(t,e)}function K0e(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function va(t,e,n,r){return new K0e(t,e,n,r)}function wU(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Y0e(t){if(typeof t=="function")return wU(t)?1:0;if(t!=null){if(t=t.$$typeof,t===UB)return 11;if(t===zB)return 14}return 2}function Jd(t,e){var n=t.alternate;return n===null?(n=va(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function vE(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")wU(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case bg:return Qh(n.children,i,o,e);case BB:s=8,i|=8;break;case iN:return t=va(12,n,e,i|2),t.elementType=iN,t.lanes=o,t;case oN:return t=va(13,n,e,i),t.elementType=oN,t.lanes=o,t;case sN:return t=va(19,n,e,i),t.elementType=sN,t.lanes=o,t;case gJ:return fM(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pJ:s=10;break e;case mJ:s=9;break e;case UB:s=11;break e;case zB:s=14;break e;case Sd:s=16,r=null;break e}throw Error(Ye(130,t==null?t:typeof t,""))}return e=va(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Qh(t,e,n,r){return t=va(7,t,r,e),t.lanes=n,t}function fM(t,e,n,r){return t=va(22,t,r,e),t.elementType=gJ,t.lanes=n,t.stateNode={isHidden:!1},t}function TR(t,e,n){return t=va(6,t,null,e),t.lanes=n,t}function kR(t,e,n){return e=va(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Q0e(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=aR(0),this.expirationTimes=aR(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=aR(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function _U(t,e,n,r,i,o,s,a,l){return t=new Q0e(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=va(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},oU(o),t}function Z0e(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yg,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ate(t){if(!t)return ff;t=t._reactInternals;e:{if(Zp(t)!==t||t.tag!==1)throw Error(Ye(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(es(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ye(171))}if(t.tag===1){var n=t.type;if(es(n))return aee(t,n,e)}return e}function lte(t,e,n,r,i,o,s,a,l){return t=_U(n,r,!0,t,i,o,s,a,l),t.context=ate(null),n=t.current,r=Do(),i=Zd(n),o=_u(r,i),o.callback=e??null,Yd(n,o,i),t.current.lanes=i,t_(t,i,r),ts(t,r),t}function hM(t,e,n,r){var i=e.current,o=Do(),s=Zd(i);return n=ate(n),e.context===null?e.context=n:e.pendingContext=n,e=_u(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Yd(i,e,s),t!==null&&(ml(t,i,s,o),dE(t,i,s)),s}function wT(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function uG(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function SU(t,e){uG(t,e),(t=t.alternate)&&uG(t,e)}function J0e(){return null}var cte=typeof reportError=="function"?reportError:function(t){console.error(t)};function CU(t){this._internalRoot=t}pM.prototype.render=CU.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ye(409));hM(t,e,null,null)};pM.prototype.unmount=CU.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;vp(function(){hM(null,t,null,null)}),e[Mu]=null}};function pM(t){this._internalRoot=t}pM.prototype.unstable_scheduleHydration=function(t){if(t){var e=UJ();t={blockedOn:null,target:t,priority:e};for(var n=0;n<kd.length&&e!==0&&e<kd[n].priority;n++);kd.splice(n,0,t),n===0&&jJ(t)}};function EU(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mM(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dG(){}function ebe(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=wT(s);o.call(c)}}var s=lte(e,r,t,0,null,!1,!1,"",dG);return t._reactRootContainer=s,t[Mu]=s.current,px(t.nodeType===8?t.parentNode:t),vp(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=wT(l);a.call(c)}}var l=_U(t,0,!1,null,null,!1,!1,"",dG);return t._reactRootContainer=l,t[Mu]=l.current,px(t.nodeType===8?t.parentNode:t),vp(function(){hM(e,l,n,r)}),l}function gM(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=wT(s);a.call(l)}}hM(e,s,t,i)}else s=ebe(n,e,t,i,r);return wT(s)}FJ=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ub(e.pendingLanes);n!==0&&(VB(e,n|1),ts(e,Ir()),!(ln&6)&&(vv=Ir()+500,If()))}break;case 13:vp(function(){var r=Iu(t,1);if(r!==null){var i=Do();ml(r,t,1,i)}}),SU(t,1)}};HB=function(t){if(t.tag===13){var e=Iu(t,134217728);if(e!==null){var n=Do();ml(e,t,134217728,n)}SU(t,134217728)}};BJ=function(t){if(t.tag===13){var e=Zd(t),n=Iu(t,e);if(n!==null){var r=Do();ml(n,t,e,r)}SU(t,e)}};UJ=function(){return In};zJ=function(t,e){var n=In;try{return In=t,e()}finally{In=n}};gN=function(t,e,n){switch(e){case"input":if(cN(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=sM(r);if(!i)throw Error(Ye(90));yJ(r),cN(r,i)}}}break;case"textarea":xJ(t,n);break;case"select":e=n.value,e!=null&&zg(t,!!n.multiple,e,!1)}};kJ=yU;AJ=vp;var tbe={usingClientEntryPoint:!1,Events:[r_,Sg,sM,EJ,TJ,yU]},T0={findFiberByHostInstance:Ih,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nbe={bundleType:T0.bundleType,version:T0.version,rendererPackageName:T0.rendererPackageName,rendererConfig:T0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yu.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=OJ(t),t===null?null:t.stateNode},findFiberByHostInstance:T0.findFiberByHostInstance||J0e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $S=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$S.isDisabled&&$S.supportsFiber)try{nM=$S.inject(nbe),dc=$S}catch{}}Vs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tbe;Vs.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!EU(e))throw Error(Ye(200));return Z0e(t,e,null,n)};Vs.createRoot=function(t,e){if(!EU(t))throw Error(Ye(299));var n=!1,r="",i=cte;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=_U(t,1,!1,null,null,n,!1,r,i),t[Mu]=e.current,px(t.nodeType===8?t.parentNode:t),new CU(e)};Vs.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ye(188)):(t=Object.keys(t).join(","),Error(Ye(268,t)));return t=OJ(e),t=t===null?null:t.stateNode,t};Vs.flushSync=function(t){return vp(t)};Vs.hydrate=function(t,e,n){if(!mM(e))throw Error(Ye(200));return gM(null,t,e,!0,n)};Vs.hydrateRoot=function(t,e,n){if(!EU(t))throw Error(Ye(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=cte;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=lte(e,null,t,1,n??null,i,!1,o,s),t[Mu]=e.current,px(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new pM(e)};Vs.render=function(t,e,n){if(!mM(e))throw Error(Ye(200));return gM(null,t,e,!1,n)};Vs.unmountComponentAtNode=function(t){if(!mM(t))throw Error(Ye(40));return t._reactRootContainer?(vp(function(){gM(null,null,t,!1,function(){t._reactRootContainer=null,t[Mu]=null})}),!0):!1};Vs.unstable_batchedUpdates=yU;Vs.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!mM(n))throw Error(Ye(200));if(t==null||t._reactInternals===void 0)throw Error(Ye(38));return gM(t,e,n,!1,r)};Vs.version="18.3.1-next-f1338f8080-20240426";function ute(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ute)}catch(t){console.error(t)}}ute(),uJ.exports=Vs;var o_=uJ.exports;const Dh=cn(o_);var dte,fG=o_;dte=fG.createRoot,fG.hydrateRoot;var fte={exports:{}},hte={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s_=R;function rbe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ibe=typeof Object.is=="function"?Object.is:rbe,obe=s_.useSyncExternalStore,sbe=s_.useRef,abe=s_.useEffect,lbe=s_.useMemo,cbe=s_.useDebugValue;hte.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var o=sbe(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=lbe(function(){function l(h){if(!c){if(c=!0,u=h,h=r(h),i!==void 0&&s.hasValue){var g=s.value;if(i(g,h))return d=g}return d=h}if(g=d,ibe(u,h))return g;var p=r(h);return i!==void 0&&i(g,p)?g:(u=h,d=p)}var c=!1,u,d,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,r,i]);var a=obe(t,o[0],o[1]);return abe(function(){s.hasValue=!0,s.value=a},[a]),cbe(a),a};fte.exports=hte;var ube=fte.exports,ks="default"in fp?B:fp,hG=Symbol.for("react-redux-context"),pG=typeof globalThis<"u"?globalThis:{};function dbe(){if(!ks.createContext)return{};const t=pG[hG]??(pG[hG]=new Map);let e=t.get(ks.createContext);return e||(e=ks.createContext(null),t.set(ks.createContext,e)),e}var hf=dbe(),fbe=()=>{throw new Error("uSES not initialized!")};function TU(t=hf){return function(){return ks.useContext(t)}}var pte=TU(),mte=fbe,hbe=t=>{mte=t},pbe=(t,e)=>t===e;function mbe(t=hf){const e=t===hf?pte:TU(t),n=(r,i={})=>{const{equalityFn:o=pbe,devModeChecks:s={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:l,getServerState:c,stabilityCheck:u,identityFunctionCheck:d}=e();ks.useRef(!0);const f=ks.useCallback({[r.name](g){return r(g)}}[r.name],[r,u,s.stabilityCheck]),h=mte(l.addNestedSub,a.getState,c||a.getState,f,o);return ks.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var vM=mbe();function gte(t){t()}function gbe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){gte(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var mG={notify(){},get:()=>[]};function vbe(t,e){let n,r=mG,i=0,o=!1;function s(p){u();const m=r.subscribe(p);let v=!1;return()=>{v||(v=!0,m(),d())}}function a(){r.notify()}function l(){g.onStateChange&&g.onStateChange()}function c(){return o}function u(){i++,n||(n=t.subscribe(l),r=gbe())}function d(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=mG)}function f(){o||(o=!0,u())}function h(){o&&(o=!1,d())}const g={addNestedSub:s,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:f,tryUnsubscribe:h,getListeners:()=>r};return g}var ybe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bbe=typeof navigator<"u"&&navigator.product==="ReactNative",xbe=ybe||bbe?ks.useLayoutEffect:ks.useEffect;function gG(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Fb(t,e){if(gG(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!gG(t[n[i]],e[n[i]]))return!1;return!0}function wbe({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:o="once"}){const s=ks.useMemo(()=>{const c=vbe(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:o}},[t,r,i,o]),a=ks.useMemo(()=>t.getState(),[t]);xbe(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,a]);const l=e||hf;return ks.createElement(l.Provider,{value:s},n)}var _be=wbe;function vte(t=hf){const e=t===hf?pte:TU(t),n=()=>{const{store:r}=e();return r};return Object.assign(n,{withTypes:()=>n}),n}var yte=vte();function Sbe(t=hf){const e=t===hf?yte:vte(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var yM=Sbe(),Cbe=gte;hbe(ube.useSyncExternalStoreWithSelector);/**
 * @remix-run/router v1.19.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sx(){return Sx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sx.apply(this,arguments)}var Nd;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Nd||(Nd={}));const vG="popstate";function Ebe(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:s,hash:a}=r.location;return KN("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:_T(i)}return kbe(e,n,null,t)}function pr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function bte(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Tbe(){return Math.random().toString(36).substr(2,8)}function yG(t,e){return{usr:t.state,key:t.key,idx:e}}function KN(t,e,n,r){return n===void 0&&(n=null),Sx({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ey(e):e,{state:n,key:e&&e.key||r||Tbe()})}function _T(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ey(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function kbe(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a=Nd.Pop,l=null,c=u();c==null&&(c=0,s.replaceState(Sx({},s.state,{idx:c}),""));function u(){return(s.state||{idx:null}).idx}function d(){a=Nd.Pop;let m=u(),v=m==null?null:m-c;c=m,l&&l({action:a,location:p.location,delta:v})}function f(m,v){a=Nd.Push;let _=KN(p.location,m,v);c=u()+1;let w=yG(_,c),y=p.createHref(_);try{s.pushState(w,"",y)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;i.location.assign(y)}o&&l&&l({action:a,location:p.location,delta:1})}function h(m,v){a=Nd.Replace;let _=KN(p.location,m,v);c=u();let w=yG(_,c),y=p.createHref(_);s.replaceState(w,"",y),o&&l&&l({action:a,location:p.location,delta:0})}function g(m){let v=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof m=="string"?m:_T(m);return _=_.replace(/ $/,"%20"),pr(v,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,v)}let p={get action(){return a},get location(){return t(i,s)},listen(m){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(vG,d),l=m,()=>{i.removeEventListener(vG,d),l=null}},createHref(m){return e(i,m)},createURL:g,encodeLocation(m){let v=g(m);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:h,go(m){return s.go(m)}};return p}var bG;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(bG||(bG={}));function Abe(t,e,n){return n===void 0&&(n="/"),Mbe(t,e,n,!1)}function Mbe(t,e,n,r){let i=typeof e=="string"?Ey(e):e,o=yv(i.pathname||"/",n);if(o==null)return null;let s=xte(t);Ibe(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let c=zbe(o);a=Bbe(s[l],c,r)}return a}function xte(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&(pr(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ef([r,l.relativePath]),u=n.concat(l);o.children&&o.children.length>0&&(pr(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),xte(o.children,e,u,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:Lbe(c,o.index),routesMeta:u})};return t.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let l of wte(o.path))i(o,s,l)}),e}function wte(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=wte(r.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),i&&a.push(...s),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Ibe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Fbe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Obe=/^:[\w-]+$/,Rbe=3,Dbe=2,Pbe=1,Nbe=10,$be=-2,xG=t=>t==="*";function Lbe(t,e){let n=t.split("/"),r=n.length;return n.some(xG)&&(r+=$be),e&&(r+=Dbe),n.filter(i=>!xG(i)).reduce((i,o)=>i+(Obe.test(o)?Rbe:o===""?Pbe:Nbe),r)}function Fbe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Bbe(t,e,n){let{routesMeta:r}=t,i={},o="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=o==="/"?e:e.slice(o.length)||"/",d=ST({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=ST({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),s.push({params:i,pathname:ef([o,d.pathname]),pathnameBase:Hbe(ef([o,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(o=ef([o,d.pathnameBase]))}return s}function ST(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Ube(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:f,isOptional:h}=u;if(f==="*"){let p=a[d]||"";s=o.slice(0,o.length-p.length).replace(/(.)\/+$/,"$1")}const g=a[d];return h&&!g?c[f]=void 0:c[f]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:s,pattern:t}}function Ube(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),bte(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function zbe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bte(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function yv(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function jbe(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ey(t):t;return{pathname:n?n.startsWith("/")?n:Wbe(n,e):e,search:Gbe(r),hash:qbe(i)}}function Wbe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function AR(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Vbe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function kU(t,e){let n=Vbe(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function AU(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Ey(t):(i=Sx({},t),pr(!i.pathname||!i.pathname.includes("?"),AR("?","pathname","search",i)),pr(!i.pathname||!i.pathname.includes("#"),AR("#","pathname","hash",i)),pr(!i.search||!i.search.includes("#"),AR("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let d=e.length-1;if(!r&&s.startsWith("..")){let f=s.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=jbe(i,a),c=s&&s!=="/"&&s.endsWith("/"),u=(o||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const ef=t=>t.join("/").replace(/\/\/+/g,"/"),Hbe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Gbe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,qbe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Xbe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const _te=["post","put","patch","delete"];new Set(_te);const Kbe=["get",..._te];new Set(Kbe);/**
 * React Router v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cx(){return Cx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cx.apply(this,arguments)}const bM=R.createContext(null),Ste=R.createContext(null),Qu=R.createContext(null),xM=R.createContext(null),Of=R.createContext({outlet:null,matches:[],isDataRoute:!1}),Cte=R.createContext(null);function Ybe(t,e){let{relative:n}=e===void 0?{}:e;Ty()||pr(!1);let{basename:r,navigator:i}=R.useContext(Qu),{hash:o,pathname:s,search:a}=_M(t,{relative:n}),l=s;return r!=="/"&&(l=s==="/"?r:ef([r,s])),i.createHref({pathname:l,search:a,hash:o})}function Ty(){return R.useContext(xM)!=null}function ky(){return Ty()||pr(!1),R.useContext(xM).location}function Ete(t){R.useContext(Qu).static||R.useLayoutEffect(t)}function wM(){let{isDataRoute:t}=R.useContext(Of);return t?cxe():Qbe()}function Qbe(){Ty()||pr(!1);let t=R.useContext(bM),{basename:e,future:n,navigator:r}=R.useContext(Qu),{matches:i}=R.useContext(Of),{pathname:o}=ky(),s=JSON.stringify(kU(i,n.v7_relativeSplatPath)),a=R.useRef(!1);return Ete(()=>{a.current=!0}),R.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=AU(c,JSON.parse(s),o,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ef([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,s,o,t])}function _M(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=R.useContext(Qu),{matches:i}=R.useContext(Of),{pathname:o}=ky(),s=JSON.stringify(kU(i,r.v7_relativeSplatPath));return R.useMemo(()=>AU(t,JSON.parse(s),o,n==="path"),[t,s,o,n])}function Zbe(t,e){return Jbe(t,e)}function Jbe(t,e,n,r){Ty()||pr(!1);let{navigator:i}=R.useContext(Qu),{matches:o}=R.useContext(Of),s=o[o.length-1],a=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let c=ky(),u;if(e){var d;let m=typeof e=="string"?Ey(e):e;l==="/"||(d=m.pathname)!=null&&d.startsWith(l)||pr(!1),u=m}else u=c;let f=u.pathname||"/",h=f;if(l!=="/"){let m=l.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(m.length).join("/")}let g=Abe(t,{pathname:h}),p=ixe(g&&g.map(m=>Object.assign({},m,{params:Object.assign({},a,m.params),pathname:ef([l,i.encodeLocation?i.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?l:ef([l,i.encodeLocation?i.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),o,n,r);return e&&p?R.createElement(xM.Provider,{value:{location:Cx({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Nd.Pop}},p):p}function exe(){let t=lxe(),e=Xbe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:i},n):null,null)}const txe=R.createElement(exe,null);class nxe extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?R.createElement(Of.Provider,{value:this.props.routeContext},R.createElement(Cte.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rxe(t){let{routeContext:e,match:n,children:r}=t,i=R.useContext(bM);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(Of.Provider,{value:e},r)}function ixe(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=s.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||pr(!1),s=s.slice(0,Math.min(s.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<s.length;u++){let d=s[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:h}=n,g=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||g){l=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((u,d,f)=>{let h,g=!1,p=null,m=null;n&&(h=a&&d.route.id?a[d.route.id]:void 0,p=d.route.errorElement||txe,l&&(c<0&&f===0?(g=!0,m=null):c===f&&(g=!0,m=d.route.hydrateFallbackElement||null)));let v=e.concat(s.slice(0,f+1)),_=()=>{let w;return h?w=p:g?w=m:d.route.Component?w=R.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=u,R.createElement(rxe,{match:d,routeContext:{outlet:u,matches:v,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?R.createElement(nxe,{location:n.location,revalidation:n.revalidation,component:p,error:h,children:_(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):_()},null)}var Tte=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Tte||{}),CT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(CT||{});function oxe(t){let e=R.useContext(bM);return e||pr(!1),e}function sxe(t){let e=R.useContext(Ste);return e||pr(!1),e}function axe(t){let e=R.useContext(Of);return e||pr(!1),e}function kte(t){let e=axe(),n=e.matches[e.matches.length-1];return n.route.id||pr(!1),n.route.id}function lxe(){var t;let e=R.useContext(Cte),n=sxe(CT.UseRouteError),r=kte(CT.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function cxe(){let{router:t}=oxe(Tte.UseNavigateStable),e=kte(CT.UseNavigateStable),n=R.useRef(!1);return Ete(()=>{n.current=!0}),R.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Cx({fromRouteId:e},o)))},[t,e])}function uxe(t){let{to:e,replace:n,state:r,relative:i}=t;Ty()||pr(!1);let{future:o,static:s}=R.useContext(Qu),{matches:a}=R.useContext(Of),{pathname:l}=ky(),c=wM(),u=AU(e,kU(a,o.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(u);return R.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function eu(t){pr(!1)}function dxe(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Nd.Pop,navigator:o,static:s=!1,future:a}=t;Ty()&&pr(!1);let l=e.replace(/^\/*/,"/"),c=R.useMemo(()=>({basename:l,navigator:o,static:s,future:Cx({v7_relativeSplatPath:!1},a)}),[l,a,o,s]);typeof r=="string"&&(r=Ey(r));let{pathname:u="/",search:d="",hash:f="",state:h=null,key:g="default"}=r,p=R.useMemo(()=>{let m=yv(u,l);return m==null?null:{location:{pathname:m,search:d,hash:f,state:h,key:g},navigationType:i}},[l,u,d,f,h,g,i]);return p==null?null:R.createElement(Qu.Provider,{value:c},R.createElement(xM.Provider,{children:n,value:p}))}function fxe(t){let{children:e,location:n}=t;return Zbe(YN(e),n)}new Promise(()=>{});function YN(t,e){e===void 0&&(e=[]);let n=[];return R.Children.forEach(t,(r,i)=>{if(!R.isValidElement(r))return;let o=[...e,i];if(r.type===R.Fragment){n.push.apply(n,YN(r.props.children,o));return}r.type!==eu&&pr(!1),!r.props.index||!r.props.children||pr(!1);let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=YN(r.props.children,o)),n.push(s)}),n}/**
 * React Router DOM v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ET(){return ET=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ET.apply(this,arguments)}function Ate(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function hxe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function pxe(t,e){return t.button===0&&(!e||e==="_self")&&!hxe(t)}const mxe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],gxe=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],vxe="6";try{window.__reactRouterVersion=vxe}catch{}const yxe=R.createContext({isTransitioning:!1}),bxe="startTransition",wG=fp[bxe];function xxe(t){let{basename:e,children:n,future:r,window:i}=t,o=R.useRef();o.current==null&&(o.current=Ebe({window:i,v5Compat:!0}));let s=o.current,[a,l]=R.useState({action:s.action,location:s.location}),{v7_startTransition:c}=r||{},u=R.useCallback(d=>{c&&wG?wG(()=>l(d)):l(d)},[l,c]);return R.useLayoutEffect(()=>s.listen(u),[s,u]),R.createElement(dxe,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:s,future:r})}const wxe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_xe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yE=R.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:s,state:a,target:l,to:c,preventScrollReset:u,unstable_viewTransition:d}=e,f=Ate(e,mxe),{basename:h}=R.useContext(Qu),g,p=!1;if(typeof c=="string"&&_xe.test(c)&&(g=c,wxe))try{let w=new URL(window.location.href),y=c.startsWith("//")?new URL(w.protocol+c):new URL(c),b=yv(y.pathname,h);y.origin===w.origin&&b!=null?c=b+y.search+y.hash:p=!0}catch{}let m=Ybe(c,{relative:i}),v=Cxe(c,{replace:s,state:a,target:l,preventScrollReset:u,relative:i,unstable_viewTransition:d});function _(w){r&&r(w),w.defaultPrevented||v(w)}return R.createElement("a",ET({},f,{href:g||m,onClick:p||o?r:_,ref:n,target:l}))}),wm=R.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:o="",end:s=!1,style:a,to:l,unstable_viewTransition:c,children:u}=e,d=Ate(e,gxe),f=_M(l,{relative:d.relative}),h=ky(),g=R.useContext(Ste),{navigator:p,basename:m}=R.useContext(Qu),v=g!=null&&Exe(f)&&c===!0,_=p.encodeLocation?p.encodeLocation(f).pathname:f.pathname,w=h.pathname,y=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;i||(w=w.toLowerCase(),y=y?y.toLowerCase():null,_=_.toLowerCase()),y&&m&&(y=yv(y,m)||y);const b=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let x=w===_||!s&&w.startsWith(_)&&w.charAt(b)==="/",S=y!=null&&(y===_||!s&&y.startsWith(_)&&y.charAt(_.length)==="/"),C={isActive:x,isPending:S,isTransitioning:v},T=x?r:void 0,E;typeof o=="function"?E=o(C):E=[o,x?"active":null,S?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let k=typeof a=="function"?a(C):a;return R.createElement(yE,ET({},d,{"aria-current":T,className:E,ref:n,style:k,to:l,unstable_viewTransition:c}),typeof u=="function"?u(C):u)});var QN;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(QN||(QN={}));var _G;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(_G||(_G={}));function Sxe(t){let e=R.useContext(bM);return e||pr(!1),e}function Cxe(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:s,unstable_viewTransition:a}=e===void 0?{}:e,l=wM(),c=ky(),u=_M(t,{relative:s});return R.useCallback(d=>{if(pxe(d,n)){d.preventDefault();let f=r!==void 0?r:_T(c)===_T(u);l(t,{replace:f,state:i,preventScrollReset:o,relative:s,unstable_viewTransition:a})}},[c,l,u,r,i,n,t,o,s,a])}function Exe(t,e){e===void 0&&(e={});let n=R.useContext(yxe);n==null&&pr(!1);let{basename:r}=Sxe(QN.useViewTransitionState),i=_M(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=yv(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=yv(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ST(i.pathname,s)!=null||ST(i.pathname,o)!=null}function Li(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Txe=typeof Symbol=="function"&&Symbol.observable||"@@observable",SG=Txe,MR=()=>Math.random().toString(36).substring(7).split("").join("."),kxe={INIT:`@@redux/INIT${MR()}`,REPLACE:`@@redux/REPLACE${MR()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${MR()}`},TT=kxe;function Ic(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function Mte(t,e,n){if(typeof t!="function")throw new Error(Li(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Li(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Li(1));return n(Mte)(t,e)}let r=t,i=e,o=new Map,s=o,a=0,l=!1;function c(){s===o&&(s=new Map,o.forEach((m,v)=>{s.set(v,m)}))}function u(){if(l)throw new Error(Li(3));return i}function d(m){if(typeof m!="function")throw new Error(Li(4));if(l)throw new Error(Li(5));let v=!0;c();const _=a++;return s.set(_,m),function(){if(v){if(l)throw new Error(Li(6));v=!1,c(),s.delete(_),o=null}}}function f(m){if(!Ic(m))throw new Error(Li(7));if(typeof m.type>"u")throw new Error(Li(8));if(typeof m.type!="string")throw new Error(Li(17));if(l)throw new Error(Li(9));try{l=!0,i=r(i,m)}finally{l=!1}return(o=s).forEach(_=>{_()}),m}function h(m){if(typeof m!="function")throw new Error(Li(10));r=m,f({type:TT.REPLACE})}function g(){const m=d;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(Li(11));function _(){const y=v;y.next&&y.next(u())}return _(),{unsubscribe:m(_)}},[SG](){return this}}}return f({type:TT.INIT}),{dispatch:f,subscribe:d,getState:u,replaceReducer:h,[SG]:g}}function Axe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:TT.INIT})>"u")throw new Error(Li(12));if(typeof n(void 0,{type:TT.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Li(13))})}function Ite(t){const e=Object.keys(t),n={};for(let o=0;o<e.length;o++){const s=e[o];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{Axe(n)}catch(o){i=o}return function(s={},a){if(i)throw i;let l=!1;const c={};for(let u=0;u<r.length;u++){const d=r[u],f=n[d],h=s[d],g=f(h,a);if(typeof g>"u")throw a&&a.type,new Error(Li(14));c[d]=g,l=l||g!==h}return l=l||r.length!==Object.keys(s).length,l?c:s}}function kT(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function Mxe(...t){return e=>(n,r)=>{const i=e(n,r);let o=()=>{throw new Error(Li(15))};const s={getState:i.getState,dispatch:(l,...c)=>o(l,...c)},a=t.map(l=>l(s));return o=kT(...a)(i.dispatch),{...i,dispatch:o}}}function Ote(t){return Ic(t)&&"type"in t&&typeof t.type=="string"}var MU=Symbol.for("immer-nothing"),Bb=Symbol.for("immer-draftable"),as=Symbol.for("immer-state");function ji(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var yp=Object.getPrototypeOf;function Oc(t){return!!t&&!!t[as]}function Cl(t){var e;return t?Rte(t)||Array.isArray(t)||!!t[Bb]||!!((e=t.constructor)!=null&&e[Bb])||a_(t)||l_(t):!1}var Ixe=Object.prototype.constructor.toString();function Rte(t){if(!t||typeof t!="object")return!1;const e=yp(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Ixe}function Oxe(t){return Oc(t)||ji(15,t),t[as].base_}function Ex(t,e){bp(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function bp(t){const e=t[as];return e?e.type_:Array.isArray(t)?1:a_(t)?2:l_(t)?3:0}function Tx(t,e){return bp(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function IR(t,e){return bp(t)===2?t.get(e):t[e]}function Dte(t,e,n){const r=bp(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Rxe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function a_(t){return t instanceof Map}function l_(t){return t instanceof Set}function fh(t){return t.copy_||t.base_}function ZN(t,e){if(a_(t))return new Map(t);if(l_(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=Rte(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[as];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[s]})}return Object.create(yp(t),r)}else{const r=yp(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function IU(t,e=!1){return SM(t)||Oc(t)||!Cl(t)||(bp(t)>1&&(t.set=t.add=t.clear=t.delete=Dxe),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>IU(r,!0))),t}function Dxe(){ji(2)}function SM(t){return Object.isFrozen(t)}var JN={};function xp(t){const e=JN[t];return e||ji(0,t),e}function Pxe(t,e){JN[t]||(JN[t]=e)}var kx;function Pte(){return kx}function Nxe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function CG(t,e){e&&(xp("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function e$(t){t$(t),t.drafts_.forEach($xe),t.drafts_=null}function t$(t){t===kx&&(kx=t.parent_)}function EG(t){return kx=Nxe(kx,t)}function $xe(t){const e=t[as];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function TG(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[as].modified_&&(e$(e),ji(4)),Cl(t)&&(t=AT(e,t),e.parent_||MT(e,t)),e.patches_&&xp("Patches").generateReplacementPatches_(n[as].base_,t,e.patches_,e.inversePatches_)):t=AT(e,n,[]),e$(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==MU?t:void 0}function AT(t,e,n){if(SM(e))return e;const r=e[as];if(!r)return Ex(e,(i,o)=>kG(t,r,e,i,o,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return MT(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),Ex(o,(a,l)=>kG(t,r,i,a,l,n,s)),MT(t,i,!1),n&&t.patches_&&xp("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function kG(t,e,n,r,i,o,s){if(Oc(i)){const a=o&&e&&e.type_!==3&&!Tx(e.assigned_,r)?o.concat(r):void 0,l=AT(t,i,a);if(Dte(n,r,l),Oc(l))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(Cl(i)&&!SM(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;AT(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&MT(t,i)}}function MT(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&IU(e,n)}function Lxe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:Pte(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=OU;n&&(i=[r],o=Ax);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,a}var OU={get(t,e){if(e===as)return t;const n=fh(t);if(!Tx(n,e))return Fxe(t,n,e);const r=n[e];return t.finalized_||!Cl(r)?r:r===OR(t.base_,e)?(RR(t),t.copy_[e]=r$(r,t)):r},has(t,e){return e in fh(t)},ownKeys(t){return Reflect.ownKeys(fh(t))},set(t,e,n){const r=Nte(fh(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=OR(fh(t),e),o=i==null?void 0:i[as];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Rxe(n,i)&&(n!==void 0||Tx(t.base_,e)))return!0;RR(t),n$(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return OR(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,RR(t),n$(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=fh(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){ji(11)},getPrototypeOf(t){return yp(t.base_)},setPrototypeOf(){ji(12)}},Ax={};Ex(OU,(t,e)=>{Ax[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Ax.deleteProperty=function(t,e){return Ax.set.call(this,t,e,void 0)};Ax.set=function(t,e,n){return OU.set.call(this,t[0],e,n,t[0])};function OR(t,e){const n=t[as];return(n?fh(n):t)[e]}function Fxe(t,e,n){var i;const r=Nte(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function Nte(t,e){if(!(e in t))return;let n=yp(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=yp(n)}}function n$(t){t.modified_||(t.modified_=!0,t.parent_&&n$(t.parent_))}function RR(t){t.copy_||(t.copy_=ZN(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Bxe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const o=n;n=e;const s=this;return function(l=o,...c){return s.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&ji(6),r!==void 0&&typeof r!="function"&&ji(7);let i;if(Cl(e)){const o=EG(this),s=r$(e,void 0);let a=!0;try{i=n(s),a=!1}finally{a?e$(o):t$(o)}return CG(o,r),TG(i,o)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===MU&&(i=void 0),this.autoFreeze_&&IU(i,!0),r){const o=[],s=[];xp("Patches").generateReplacementPatches_(e,i,o,s),r(o,s)}return i}else ji(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...a)=>this.produceWithPatches(s,l=>e(l,...a));let r,i;return[this.produce(e,n,(s,a)=>{r=s,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Cl(t)||ji(8),Oc(t)&&(t=Uxe(t));const e=EG(this),n=r$(t,void 0);return n[as].isManual_=!0,t$(e),n}finishDraft(t,e){const n=t&&t[as];(!n||!n.isManual_)&&ji(9);const{scope_:r}=n;return CG(r,e),TG(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=xp("Patches").applyPatches_;return Oc(t)?r(t,e):this.produce(t,i=>r(i,e))}};function r$(t,e){const n=a_(t)?xp("MapSet").proxyMap_(t,e):l_(t)?xp("MapSet").proxySet_(t,e):Lxe(t,e);return(e?e.scope_:Pte()).drafts_.push(n),n}function Uxe(t){return Oc(t)||ji(10,t),$te(t)}function $te(t){if(!Cl(t)||SM(t))return t;const e=t[as];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=ZN(t,e.scope_.immer_.useStrictShallowCopy_)}else n=ZN(t,!0);return Ex(n,(r,i)=>{Dte(n,r,$te(i))}),e&&(e.finalized_=!1),n}function zxe(){const e="replace",n="add",r="remove";function i(f,h,g,p){switch(f.type_){case 0:case 2:return s(f,h,g,p);case 1:return o(f,h,g,p);case 3:return a(f,h,g,p)}}function o(f,h,g,p){let{base_:m,assigned_:v}=f,_=f.copy_;_.length<m.length&&([m,_]=[_,m],[g,p]=[p,g]);for(let w=0;w<m.length;w++)if(v[w]&&_[w]!==m[w]){const y=h.concat([w]);g.push({op:e,path:y,value:d(_[w])}),p.push({op:e,path:y,value:d(m[w])})}for(let w=m.length;w<_.length;w++){const y=h.concat([w]);g.push({op:n,path:y,value:d(_[w])})}for(let w=_.length-1;m.length<=w;--w){const y=h.concat([w]);p.push({op:r,path:y})}}function s(f,h,g,p){const{base_:m,copy_:v}=f;Ex(f.assigned_,(_,w)=>{const y=IR(m,_),b=IR(v,_),x=w?Tx(m,_)?e:n:r;if(y===b&&x===e)return;const S=h.concat(_);g.push(x===r?{op:x,path:S}:{op:x,path:S,value:b}),p.push(x===n?{op:r,path:S}:x===r?{op:n,path:S,value:d(y)}:{op:e,path:S,value:d(y)})})}function a(f,h,g,p){let{base_:m,copy_:v}=f,_=0;m.forEach(w=>{if(!v.has(w)){const y=h.concat([_]);g.push({op:r,path:y,value:w}),p.unshift({op:n,path:y,value:w})}_++}),_=0,v.forEach(w=>{if(!m.has(w)){const y=h.concat([_]);g.push({op:n,path:y,value:w}),p.unshift({op:r,path:y,value:w})}_++})}function l(f,h,g,p){g.push({op:e,path:[],value:h===MU?void 0:h}),p.push({op:e,path:[],value:f})}function c(f,h){return h.forEach(g=>{const{path:p,op:m}=g;let v=f;for(let b=0;b<p.length-1;b++){const x=bp(v);let S=p[b];typeof S!="string"&&typeof S!="number"&&(S=""+S),(x===0||x===1)&&(S==="__proto__"||S==="constructor")&&ji(19),typeof v=="function"&&S==="prototype"&&ji(19),v=IR(v,S),typeof v!="object"&&ji(18,p.join("/"))}const _=bp(v),w=u(g.value),y=p[p.length-1];switch(m){case e:switch(_){case 2:return v.set(y,w);case 3:ji(16);default:return v[y]=w}case n:switch(_){case 1:return y==="-"?v.push(w):v.splice(y,0,w);case 2:return v.set(y,w);case 3:return v.add(w);default:return v[y]=w}case r:switch(_){case 1:return v.splice(y,1);case 2:return v.delete(y);case 3:return v.delete(g.value);default:return delete v[y]}default:ji(17,m)}}),f}function u(f){if(!Cl(f))return f;if(Array.isArray(f))return f.map(u);if(a_(f))return new Map(Array.from(f.entries()).map(([g,p])=>[g,u(p)]));if(l_(f))return new Set(Array.from(f).map(u));const h=Object.create(yp(f));for(const g in f)h[g]=u(f[g]);return Tx(f,Bb)&&(h[Bb]=f[Bb]),h}function d(f){return Oc(f)?u(f):f}Pxe("Patches",{applyPatches_:c,generatePatches_:i,generateReplacementPatches_:l})}var zs=new Bxe,c_=zs.produce,Lte=zs.produceWithPatches.bind(zs);zs.setAutoFreeze.bind(zs);zs.setUseStrictShallowCopy.bind(zs);var AG=zs.applyPatches.bind(zs);zs.createDraft.bind(zs);zs.finishDraft.bind(zs);function jxe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function Wxe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function Vxe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var MG=t=>Array.isArray(t)?t:[t];function Hxe(t){const e=Array.isArray(t[0])?t[0]:t;return Vxe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function Gxe(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var qxe=class{constructor(t){this.value=t}deref(){return this.value}},Xxe=typeof WeakRef<"u"?WeakRef:qxe,Kxe=0,IG=1;function LS(){return{s:Kxe,v:void 0,o:null,p:null}}function IT(t,e={}){let n=LS();const{resultEqualityCheck:r}=e;let i,o=0;function s(){var d;let a=n;const{length:l}=arguments;for(let f=0,h=l;f<h;f++){const g=arguments[f];if(typeof g=="function"||typeof g=="object"&&g!==null){let p=a.o;p===null&&(a.o=p=new WeakMap);const m=p.get(g);m===void 0?(a=LS(),p.set(g,a)):a=m}else{let p=a.p;p===null&&(a.p=p=new Map);const m=p.get(g);m===void 0?(a=LS(),p.set(g,a)):a=m}}const c=a;let u;if(a.s===IG)u=a.v;else if(u=t.apply(null,arguments),o++,r){const f=((d=i==null?void 0:i.deref)==null?void 0:d.call(i))??i;f!=null&&r(f,u)&&(u=f,o!==0&&o--),i=typeof u=="object"&&u!==null||typeof u=="function"?new Xxe(u):u}return c.s=IG,c.v=u,u}return s.clearCache=()=>{n=LS(),s.resetResultsCount()},s.resultsCount=()=>o,s.resetResultsCount=()=>{o=0},s}function Yxe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let o=0,s=0,a,l={},c=i.pop();typeof c=="object"&&(l=c,c=i.pop()),jxe(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...n,...l},{memoize:d,memoizeOptions:f=[],argsMemoize:h=IT,argsMemoizeOptions:g=[],devModeChecks:p={}}=u,m=MG(f),v=MG(g),_=Hxe(i),w=d(function(){return o++,c.apply(null,arguments)},...m),y=h(function(){s++;const x=Gxe(_,arguments);return a=w.apply(null,x),a},...v);return Object.assign(y,{resultFunc:c,memoizedResultFunc:w,dependencies:_,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>a,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:d,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var RU=Yxe(IT),Qxe=Object.assign((t,e=RU)=>{Wxe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(o=>t[o]);return e(r,(...o)=>o.reduce((s,a,l)=>(s[n[l]]=a,s),{}))},{withTypes:()=>Qxe});function Fte(t){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,t):i(o)}var Zxe=Fte(),Jxe=Fte,ewe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?kT:kT.apply(null,arguments)},twe=t=>t&&typeof t.match=="function";function gl(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(Rs(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>Ote(r)&&r.type===t,n}var Bte=class fb extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,fb.prototype)}static get[Symbol.species](){return fb}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new fb(...e[0].concat(this)):new fb(...e.concat(this))}};function OG(t){return Cl(t)?c_(t,()=>{}):t}function RG(t,e,n){if(t.has(e)){let i=t.get(e);return n.update&&(i=n.update(i,e,t),t.set(e,i)),i}if(!n.insert)throw new Error(Rs(10));const r=n.insert(e,t);return t.set(e,r),r}function nwe(t){return typeof t=="boolean"}var rwe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=e??{};let s=new Bte;return n&&(nwe(n)?s.push(Zxe):s.push(Jxe(n.extraArgument))),s},Ig="RTK_autoBatch",k0=()=>t=>({payload:t,meta:{[Ig]:!0}}),Ute=t=>e=>{setTimeout(e,t)},iwe=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Ute(10),owe=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,o=!1,s=!1;const a=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?iwe:t.type==="callback"?t.queueNotification:Ute(t.timeout),c=()=>{s=!1,o&&(o=!1,a.forEach(u=>u()))};return Object.assign({},r,{subscribe(u){const d=()=>i&&u(),f=r.subscribe(d);return a.add(u),()=>{f(),a.delete(u)}},dispatch(u){var d;try{return i=!((d=u==null?void 0:u.meta)!=null&&d[Ig]),o=!i,o&&(s||(s=!0,l(c))),r.dispatch(u)}finally{i=!0}}})},swe=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new Bte(t);return r&&i.push(owe(typeof r=="object"?r:void 0)),i};function awe(t){const e=rwe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:s=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(Ic(n))a=Ite(n);else throw new Error(Rs(1));let l;typeof r=="function"?l=r(e):l=e();let c=kT;i&&(c=ewe({trace:!1,...typeof i=="object"&&i}));const u=Mxe(...l),d=swe(u);let f=typeof s=="function"?s(d):d();const h=c(...f);return Mte(a,o,h)}function zte(t){const e={},n=[];let r;const i={addCase(o,s){const a=typeof o=="string"?o:o.type;if(!a)throw new Error(Rs(28));if(a in e)throw new Error(Rs(29));return e[a]=s,i},addMatcher(o,s){return n.push({matcher:o,reducer:s}),i},addDefaultCase(o){return r=o,i}};return t(i),[e,n,r]}function lwe(t){return typeof t=="function"}function cwe(t,e){let[n,r,i]=zte(e),o;if(lwe(t))o=()=>OG(t());else{const a=OG(t);o=()=>a}function s(a=o(),l){let c=[n[l.type],...r.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[i]),c.reduce((u,d)=>{if(d)if(Oc(u)){const h=d(u,l);return h===void 0?u:h}else{if(Cl(u))return c_(u,f=>d(f,l));{const f=d(u,l);if(f===void 0){if(u===null)return u;throw new Error(Rs(9))}return f}}return u},a)}return s.getInitialState=o,s}var jte=(t,e)=>twe(t)?t.match(e):t(e);function Ru(...t){return e=>t.some(n=>jte(n,e))}function Ub(...t){return e=>t.every(n=>jte(n,e))}function CM(t,e){if(!t||!t.meta)return!1;const n=typeof t.meta.requestId=="string",r=e.indexOf(t.meta.requestStatus)>-1;return n&&r}function u_(t){return typeof t[0]=="function"&&"pending"in t[0]&&"fulfilled"in t[0]&&"rejected"in t[0]}function DU(...t){return t.length===0?e=>CM(e,["pending"]):u_(t)?Ru(...t.map(e=>e.pending)):DU()(t[0])}function bv(...t){return t.length===0?e=>CM(e,["rejected"]):u_(t)?Ru(...t.map(e=>e.rejected)):bv()(t[0])}function EM(...t){const e=n=>n&&n.meta&&n.meta.rejectedWithValue;return t.length===0?Ub(bv(...t),e):u_(t)?Ub(bv(...t),e):EM()(t[0])}function pf(...t){return t.length===0?e=>CM(e,["fulfilled"]):u_(t)?Ru(...t.map(e=>e.fulfilled)):pf()(t[0])}function i$(...t){return t.length===0?e=>CM(e,["pending","fulfilled","rejected"]):u_(t)?Ru(...t.flatMap(e=>[e.pending,e.rejected,e.fulfilled])):i$()(t[0])}var uwe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Wte=(t=21)=>{let e="",n=t;for(;n--;)e+=uwe[Math.random()*64|0];return e},dwe=["name","message","stack","code"],DR=class{constructor(t,e){He(this,"_type");this.payload=t,this.meta=e}},DG=class{constructor(t,e){He(this,"_type");this.payload=t,this.meta=e}},fwe=t=>{if(typeof t=="object"&&t!==null){const e={};for(const n of dwe)typeof t[n]=="string"&&(e[n]=t[n]);return e}return{message:String(t)}},xv=(()=>{function t(e,n,r){const i=gl(e+"/fulfilled",(l,c,u,d)=>({payload:l,meta:{...d||{},arg:u,requestId:c,requestStatus:"fulfilled"}})),o=gl(e+"/pending",(l,c,u)=>({payload:void 0,meta:{...u||{},arg:c,requestId:l,requestStatus:"pending"}})),s=gl(e+"/rejected",(l,c,u,d,f)=>({payload:d,error:(r&&r.serializeError||fwe)(l||"Rejected"),meta:{...f||{},arg:u,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"}}));function a(l){return(c,u,d)=>{const f=r!=null&&r.idGenerator?r.idGenerator(l):Wte(),h=new AbortController;let g,p;function m(_){p=_,h.abort()}const v=async function(){var y,b;let _;try{let x=(y=r==null?void 0:r.condition)==null?void 0:y.call(r,l,{getState:u,extra:d});if(pwe(x)&&(x=await x),x===!1||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const S=new Promise((C,T)=>{g=()=>{T({name:"AbortError",message:p||"Aborted"})},h.signal.addEventListener("abort",g)});c(o(f,l,(b=r==null?void 0:r.getPendingMeta)==null?void 0:b.call(r,{requestId:f,arg:l},{getState:u,extra:d}))),_=await Promise.race([S,Promise.resolve(n(l,{dispatch:c,getState:u,extra:d,requestId:f,signal:h.signal,abort:m,rejectWithValue:(C,T)=>new DR(C,T),fulfillWithValue:(C,T)=>new DG(C,T)})).then(C=>{if(C instanceof DR)throw C;return C instanceof DG?i(C.payload,f,l,C.meta):i(C,f,l)})])}catch(x){_=x instanceof DR?s(null,f,l,x.payload,x.meta):s(x,f,l)}finally{g&&h.signal.removeEventListener("abort",g)}return r&&!r.dispatchConditionRejection&&s.match(_)&&_.meta.condition||c(_),_}();return Object.assign(v,{abort:m,requestId:f,arg:l,unwrap(){return v.then(hwe)}})}}return Object.assign(a,{pending:o,rejected:s,fulfilled:i,settled:Ru(s,i),typePrefix:e})}return t.withTypes=()=>t,t})();function hwe(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function pwe(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var mwe=Symbol.for("rtk-slice-createasyncthunk");function gwe(t,e){return`${t}/${e}`}function vwe({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[mwe];return function(i){const{name:o,reducerPath:s=o}=i;if(!o)throw new Error(Rs(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(bwe()):i.reducers)||{},l=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(w,y){const b=typeof w=="string"?w:w.type;if(!b)throw new Error(Rs(12));if(b in c.sliceCaseReducersByType)throw new Error(Rs(13));return c.sliceCaseReducersByType[b]=y,u},addMatcher(w,y){return c.sliceMatchers.push({matcher:w,reducer:y}),u},exposeAction(w,y){return c.actionCreators[w]=y,u},exposeCaseReducer(w,y){return c.sliceCaseReducersByName[w]=y,u}};l.forEach(w=>{const y=a[w],b={reducerName:w,type:gwe(o,w),createNotation:typeof i.reducers=="function"};wwe(y)?Swe(b,y,u,e):xwe(b,y,u)});function d(){const[w={},y=[],b=void 0]=typeof i.extraReducers=="function"?zte(i.extraReducers):[i.extraReducers],x={...w,...c.sliceCaseReducersByType};return cwe(i.initialState,S=>{for(let C in x)S.addCase(C,x[C]);for(let C of c.sliceMatchers)S.addMatcher(C.matcher,C.reducer);for(let C of y)S.addMatcher(C.matcher,C.reducer);b&&S.addDefaultCase(b)})}const f=w=>w,h=new Map;let g;function p(w,y){return g||(g=d()),g(w,y)}function m(){return g||(g=d()),g.getInitialState()}function v(w,y=!1){function b(S){let C=S[w];return typeof C>"u"&&y&&(C=m()),C}function x(S=f){const C=RG(h,y,{insert:()=>new WeakMap});return RG(C,S,{insert:()=>{const T={};for(const[E,k]of Object.entries(i.selectors??{}))T[E]=ywe(k,S,m,y);return T}})}return{reducerPath:w,getSelectors:x,get selectors(){return x(b)},selectSlice:b}}const _={name:o,reducer:p,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:m,...v(s),injectInto(w,{reducerPath:y,...b}={}){const x=y??s;return w.inject({reducerPath:x,reducer:p},b),{..._,...v(x,!0)}}};return _}}function ywe(t,e,n,r){function i(o,...s){let a=e(o);return typeof a>"u"&&r&&(a=n()),t(a,...s)}return i.unwrapped=t,i}var ou=vwe();function bwe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function xwe({type:t,reducerName:e,createNotation:n},r,i){let o,s;if("reducer"in r){if(n&&!_we(r))throw new Error(Rs(17));o=r.reducer,s=r.prepare}else o=r;i.addCase(t,o).exposeCaseReducer(e,o).exposeAction(e,s?gl(t,s):gl(t))}function wwe(t){return t._reducerDefinitionType==="asyncThunk"}function _we(t){return t._reducerDefinitionType==="reducerWithPrepare"}function Swe({type:t,reducerName:e},n,r,i){if(!i)throw new Error(Rs(18));const{payloadCreator:o,fulfilled:s,pending:a,rejected:l,settled:c,options:u}=n,d=i(t,o,u);r.exposeAction(e,d),s&&r.addCase(d.fulfilled,s),a&&r.addCase(d.pending,a),l&&r.addCase(d.rejected,l),c&&r.addMatcher(d.settled,c),r.exposeCaseReducer(e,{fulfilled:s||FS,pending:a||FS,rejected:l||FS,settled:c||FS})}function FS(){}function Rs(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Vte=(t=>(t.uninitialized="uninitialized",t.pending="pending",t.fulfilled="fulfilled",t.rejected="rejected",t))(Vte||{});function Cwe(t){return{status:t,isUninitialized:t==="uninitialized",isLoading:t==="pending",isSuccess:t==="fulfilled",isError:t==="rejected"}}var PG=Ic;function Hte(t,e){if(t===e||!(PG(t)&&PG(e)||Array.isArray(t)&&Array.isArray(e)))return e;const n=Object.keys(e),r=Object.keys(t);let i=n.length===r.length;const o=Array.isArray(e)?[]:{};for(const s of n)o[s]=Hte(t[s],e[s]),i&&(i=t[s]===o[s]);return i?t:o}function qg(t){let e=0;for(const n in t)e++;return e}var NG=t=>[].concat(...t);function Ewe(t){return new RegExp("(^|:)//").test(t)}function Twe(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}function $G(t){return t!=null}function kwe(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}var Awe=t=>t.replace(/\/$/,""),Mwe=t=>t.replace(/^\//,"");function Iwe(t,e){if(!t)return e;if(!e)return t;if(Ewe(e))return e;const n=t.endsWith("/")||!e.startsWith("?")?"/":"";return t=Awe(t),e=Mwe(e),`${t}${n}${e}`}var LG=(...t)=>fetch(...t),Owe=t=>t.status>=200&&t.status<=299,Rwe=t=>/ion\/(vnd\.api\+)?json/.test(t.get("content-type")||"");function FG(t){if(!Ic(t))return t;const e={...t};for(const[n,r]of Object.entries(e))r===void 0&&delete e[n];return e}function PU({baseUrl:t,prepareHeaders:e=d=>d,fetchFn:n=LG,paramsSerializer:r,isJsonContentType:i=Rwe,jsonContentType:o="application/json",jsonReplacer:s,timeout:a,responseHandler:l,validateStatus:c,...u}={}){return typeof fetch>"u"&&n===LG&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(f,h)=>{const{signal:g,getState:p,extra:m,endpoint:v,forced:_,type:w}=h;let y,{url:b,headers:x=new Headers(u.headers),params:S=void 0,responseHandler:C=l??"json",validateStatus:T=c??Owe,timeout:E=a,...k}=typeof f=="string"?{url:f}:f,A={...u,signal:g,...k};x=new Headers(FG(x)),A.headers=await e(x,{getState:p,extra:m,endpoint:v,forced:_,type:w})||x;const O=te=>typeof te=="object"&&(Ic(te)||Array.isArray(te)||typeof te.toJSON=="function");if(!A.headers.has("content-type")&&O(A.body)&&A.headers.set("content-type",o),O(A.body)&&i(A.headers)&&(A.body=JSON.stringify(A.body,s)),S){const te=~b.indexOf("?")?"&":"?",ne=r?r(S):new URLSearchParams(FG(S));b+=te+ne}b=Iwe(t,b);const D=new Request(b,A);y={request:new Request(b,A)};let N,U=!1,L=E&&setTimeout(()=>{U=!0,h.abort()},E);try{N=await n(D)}catch(te){return{error:{status:U?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(te)},meta:y}}finally{L&&clearTimeout(L)}const V=N.clone();y.response=V;let G,Q="";try{let te;if(await Promise.all([d(N,C).then(ne=>G=ne,ne=>te=ne),V.text().then(ne=>Q=ne,()=>{})]),te)throw te}catch(te){return{error:{status:"PARSING_ERROR",originalStatus:N.status,data:Q,error:String(te)},meta:y}}return T(N,G)?{data:G,meta:y}:{error:{status:N.status,data:G},meta:y}};async function d(f,h){if(typeof h=="function")return h(f);if(h==="content-type"&&(h=i(f.headers)?"json":"text"),h==="json"){const g=await f.text();return g.length?JSON.parse(g):null}return f.text()}}var BG=class{constructor(t,e=void 0){this.value=t,this.meta=e}},NU=gl("__rtkq/focused"),Gte=gl("__rtkq/unfocused"),$U=gl("__rtkq/online"),qte=gl("__rtkq/offline");function Xte(t){return t.type==="query"}function Dwe(t){return t.type==="mutation"}function LU(t,e,n,r,i,o){return Pwe(t)?t(e,n,r,i).map(o$).map(o):Array.isArray(t)?t.map(o$).map(o):[]}function Pwe(t){return typeof t=="function"}function o$(t){return typeof t=="string"?{type:t}:t}function Nwe(t,e){return t.catch(e)}var Mx=Symbol("forceQueryFn"),s$=t=>typeof t[Mx]=="function";function $we({serializeQueryArgs:t,queryThunk:e,mutationThunk:n,api:r,context:i}){const o=new Map,s=new Map,{unsubscribeQueryResult:a,removeMutationResult:l,updateSubscriptionOptions:c}=r.internalActions;return{buildInitiateQuery:g,buildInitiateMutation:p,getRunningQueryThunk:u,getRunningMutationThunk:d,getRunningQueriesThunk:f,getRunningMutationsThunk:h};function u(m,v){return _=>{var b;const w=i.endpointDefinitions[m],y=t({queryArgs:v,endpointDefinition:w,endpointName:m});return(b=o.get(_))==null?void 0:b[y]}}function d(m,v){return _=>{var w;return(w=s.get(_))==null?void 0:w[v]}}function f(){return m=>Object.values(o.get(m)||{}).filter($G)}function h(){return m=>Object.values(s.get(m)||{}).filter($G)}function g(m,v){const _=(w,{subscribe:y=!0,forceRefetch:b,subscriptionOptions:x,[Mx]:S,...C}={})=>(T,E)=>{var te;const k=t({queryArgs:w,endpointDefinition:v,endpointName:m}),A=e({...C,type:"query",subscribe:y,forceRefetch:b,subscriptionOptions:x,endpointName:m,originalArgs:w,queryCacheKey:k,[Mx]:S}),O=r.endpoints[m].select(w),D=T(A),P=O(E()),{requestId:N,abort:U}=D,L=P.requestId!==N,V=(te=o.get(T))==null?void 0:te[k],G=()=>O(E()),Q=Object.assign(S?D.then(G):L&&!V?Promise.resolve(P):Promise.all([V,D]).then(G),{arg:w,requestId:N,subscriptionOptions:x,queryCacheKey:k,abort:U,async unwrap(){const ne=await Q;if(ne.isError)throw ne.error;return ne.data},refetch:()=>T(_(w,{subscribe:!1,forceRefetch:!0})),unsubscribe(){y&&T(a({queryCacheKey:k,requestId:N}))},updateSubscriptionOptions(ne){Q.subscriptionOptions=ne,T(c({endpointName:m,requestId:N,queryCacheKey:k,options:ne}))}});if(!V&&!L&&!S){const ne=o.get(T)||{};ne[k]=Q,o.set(T,ne),Q.then(()=>{delete ne[k],qg(ne)||o.delete(T)})}return Q};return _}function p(m){return(v,{track:_=!0,fixedCacheKey:w}={})=>(y,b)=>{const x=n({type:"mutation",endpointName:m,originalArgs:v,track:_,fixedCacheKey:w}),S=y(x),{requestId:C,abort:T,unwrap:E}=S,k=Nwe(S.unwrap().then(P=>({data:P})),P=>({error:P})),A=()=>{y(l({requestId:C,fixedCacheKey:w}))},O=Object.assign(k,{arg:S.arg,requestId:C,abort:T,unwrap:E,reset:A}),D=s.get(y)||{};return s.set(y,D),D[C]=O,O.then(()=>{delete D[C],qg(D)||s.delete(y)}),w&&(D[w]=O,O.then(()=>{D[w]===O&&(delete D[w],qg(D)||s.delete(y))})),O}}}function UG(t){return t}function Lwe({reducerPath:t,baseQuery:e,context:{endpointDefinitions:n},serializeQueryArgs:r,api:i,assertTagType:o}){const s=(_,w,y,b)=>(x,S)=>{const C=n[_],T=r({queryArgs:w,endpointDefinition:C,endpointName:_});if(x(i.internalActions.queryResultPatched({queryCacheKey:T,patches:y})),!b)return;const E=i.endpoints[_].select(w)(S()),k=LU(C.providesTags,E.data,void 0,w,{},o);x(i.internalActions.updateProvidedBy({queryCacheKey:T,providedTags:k}))},a=(_,w,y,b=!0)=>(x,S)=>{const T=i.endpoints[_].select(w)(S()),E={patches:[],inversePatches:[],undo:()=>x(i.util.patchQueryData(_,w,E.inversePatches,b))};if(T.status==="uninitialized")return E;let k;if("data"in T)if(Cl(T.data)){const[A,O,D]=Lte(T.data,y);E.patches.push(...O),E.inversePatches.push(...D),k=A}else k=y(T.data),E.patches.push({op:"replace",path:[],value:k}),E.inversePatches.push({op:"replace",path:[],value:T.data});return E.patches.length===0||x(i.util.patchQueryData(_,w,E.patches,b)),E},l=(_,w,y)=>b=>b(i.endpoints[_].initiate(w,{subscribe:!1,forceRefetch:!0,[Mx]:()=>({data:y})})),c=async(_,{signal:w,abort:y,rejectWithValue:b,fulfillWithValue:x,dispatch:S,getState:C,extra:T})=>{const E=n[_.endpointName];try{let k=UG,A;const O={signal:w,abort:y,dispatch:S,getState:C,extra:T,endpoint:_.endpointName,type:_.type,forced:_.type==="query"?u(_,C()):void 0},D=_.type==="query"?_[Mx]:void 0;if(D?A=D():E.query?(A=await e(E.query(_.originalArgs),O,E.extraOptions),E.transformResponse&&(k=E.transformResponse)):A=await E.queryFn(_.originalArgs,O,E.extraOptions,P=>e(P,O,E.extraOptions)),typeof process<"u",A.error)throw new BG(A.error,A.meta);return x(await k(A.data,A.meta,_.originalArgs),{fulfilledTimeStamp:Date.now(),baseQueryMeta:A.meta,[Ig]:!0})}catch(k){let A=k;if(A instanceof BG){let O=UG;E.query&&E.transformErrorResponse&&(O=E.transformErrorResponse);try{return b(await O(A.value,A.meta,_.originalArgs),{baseQueryMeta:A.meta,[Ig]:!0})}catch(D){A=D}}throw typeof process<"u",console.error(A),A}};function u(_,w){var C,T,E;const y=(T=(C=w[t])==null?void 0:C.queries)==null?void 0:T[_.queryCacheKey],b=(E=w[t])==null?void 0:E.config.refetchOnMountOrArgChange,x=y==null?void 0:y.fulfilledTimeStamp,S=_.forceRefetch??(_.subscribe&&b);return S?S===!0||(Number(new Date)-Number(x))/1e3>=S:!1}const d=xv(`${t}/executeQuery`,c,{getPendingMeta(){return{startedTimeStamp:Date.now(),[Ig]:!0}},condition(_,{getState:w}){var E,k,A;const y=w(),b=(k=(E=y[t])==null?void 0:E.queries)==null?void 0:k[_.queryCacheKey],x=b==null?void 0:b.fulfilledTimeStamp,S=_.originalArgs,C=b==null?void 0:b.originalArgs,T=n[_.endpointName];return s$(_)?!0:(b==null?void 0:b.status)==="pending"?!1:u(_,y)||Xte(T)&&((A=T==null?void 0:T.forceRefetch)!=null&&A.call(T,{currentArg:S,previousArg:C,endpointState:b,state:y}))?!0:!x},dispatchConditionRejection:!0}),f=xv(`${t}/executeMutation`,c,{getPendingMeta(){return{startedTimeStamp:Date.now(),[Ig]:!0}}}),h=_=>"force"in _,g=_=>"ifOlderThan"in _,p=(_,w,y)=>(b,x)=>{const S=h(y)&&y.force,C=g(y)&&y.ifOlderThan,T=(k=!0)=>{const A={forceRefetch:k,isPrefetch:!0};return i.endpoints[_].initiate(w,A)},E=i.endpoints[_].select(w)(x());if(S)b(T());else if(C){const k=E==null?void 0:E.fulfilledTimeStamp;if(!k){b(T());return}(Number(new Date)-Number(new Date(k)))/1e3>=C&&b(T())}else b(T(!1))};function m(_){return w=>{var y,b;return((b=(y=w==null?void 0:w.meta)==null?void 0:y.arg)==null?void 0:b.endpointName)===_}}function v(_,w){return{matchPending:Ub(DU(_),m(w)),matchFulfilled:Ub(pf(_),m(w)),matchRejected:Ub(bv(_),m(w))}}return{queryThunk:d,mutationThunk:f,prefetch:p,updateQueryData:a,upsertQueryData:l,patchQueryData:s,buildMatchThunkActions:v}}function Kte(t,e,n,r){return LU(n[t.meta.arg.endpointName][e],pf(t)?t.payload:void 0,EM(t)?t.payload:void 0,t.meta.arg.originalArgs,"baseQueryMeta"in t.meta?t.meta.baseQueryMeta:void 0,r)}function BS(t,e,n){const r=t[e];r&&n(r)}function Ix(t){return("arg"in t?t.arg.fixedCacheKey:t.fixedCacheKey)??t.requestId}function zG(t,e,n){const r=t[Ix(e)];r&&n(r)}var A0={};function Fwe({reducerPath:t,queryThunk:e,mutationThunk:n,context:{endpointDefinitions:r,apiUid:i,extractRehydrationInfo:o,hasRehydrationInfo:s},assertTagType:a,config:l}){const c=gl(`${t}/resetApiState`),u=ou({name:`${t}/queries`,initialState:A0,reducers:{removeQueryResult:{reducer(w,{payload:{queryCacheKey:y}}){delete w[y]},prepare:k0()},queryResultPatched:{reducer(w,{payload:{queryCacheKey:y,patches:b}}){BS(w,y,x=>{x.data=AG(x.data,b.concat())})},prepare:k0()}},extraReducers(w){w.addCase(e.pending,(y,{meta:b,meta:{arg:x}})=>{var C;const S=s$(x);y[C=x.queryCacheKey]??(y[C]={status:"uninitialized",endpointName:x.endpointName}),BS(y,x.queryCacheKey,T=>{T.status="pending",T.requestId=S&&T.requestId?T.requestId:b.requestId,x.originalArgs!==void 0&&(T.originalArgs=x.originalArgs),T.startedTimeStamp=b.startedTimeStamp})}).addCase(e.fulfilled,(y,{meta:b,payload:x})=>{BS(y,b.arg.queryCacheKey,S=>{if(S.requestId!==b.requestId&&!s$(b.arg))return;const{merge:C}=r[b.arg.endpointName];if(S.status="fulfilled",C)if(S.data!==void 0){const{fulfilledTimeStamp:T,arg:E,baseQueryMeta:k,requestId:A}=b;let O=c_(S.data,D=>C(D,x,{arg:E.originalArgs,baseQueryMeta:k,fulfilledTimeStamp:T,requestId:A}));S.data=O}else S.data=x;else S.data=r[b.arg.endpointName].structuralSharing??!0?Hte(Oc(S.data)?Oxe(S.data):S.data,x):x;delete S.error,S.fulfilledTimeStamp=b.fulfilledTimeStamp})}).addCase(e.rejected,(y,{meta:{condition:b,arg:x,requestId:S},error:C,payload:T})=>{BS(y,x.queryCacheKey,E=>{if(!b){if(E.requestId!==S)return;E.status="rejected",E.error=T??C}})}).addMatcher(s,(y,b)=>{const{queries:x}=o(b);for(const[S,C]of Object.entries(x))((C==null?void 0:C.status)==="fulfilled"||(C==null?void 0:C.status)==="rejected")&&(y[S]=C)})}}),d=ou({name:`${t}/mutations`,initialState:A0,reducers:{removeMutationResult:{reducer(w,{payload:y}){const b=Ix(y);b in w&&delete w[b]},prepare:k0()}},extraReducers(w){w.addCase(n.pending,(y,{meta:b,meta:{requestId:x,arg:S,startedTimeStamp:C}})=>{S.track&&(y[Ix(b)]={requestId:x,status:"pending",endpointName:S.endpointName,startedTimeStamp:C})}).addCase(n.fulfilled,(y,{payload:b,meta:x})=>{x.arg.track&&zG(y,x,S=>{S.requestId===x.requestId&&(S.status="fulfilled",S.data=b,S.fulfilledTimeStamp=x.fulfilledTimeStamp)})}).addCase(n.rejected,(y,{payload:b,error:x,meta:S})=>{S.arg.track&&zG(y,S,C=>{C.requestId===S.requestId&&(C.status="rejected",C.error=b??x)})}).addMatcher(s,(y,b)=>{const{mutations:x}=o(b);for(const[S,C]of Object.entries(x))((C==null?void 0:C.status)==="fulfilled"||(C==null?void 0:C.status)==="rejected")&&S!==(C==null?void 0:C.requestId)&&(y[S]=C)})}}),f=ou({name:`${t}/invalidation`,initialState:A0,reducers:{updateProvidedBy:{reducer(w,y){var S,C;const{queryCacheKey:b,providedTags:x}=y.payload;for(const T of Object.values(w))for(const E of Object.values(T)){const k=E.indexOf(b);k!==-1&&E.splice(k,1)}for(const{type:T,id:E}of x){const k=(S=w[T]??(w[T]={}))[C=E||"__internal_without_id"]??(S[C]=[]);k.includes(b)||k.push(b)}},prepare:k0()}},extraReducers(w){w.addCase(u.actions.removeQueryResult,(y,{payload:{queryCacheKey:b}})=>{for(const x of Object.values(y))for(const S of Object.values(x)){const C=S.indexOf(b);C!==-1&&S.splice(C,1)}}).addMatcher(s,(y,b)=>{var S,C;const{provided:x}=o(b);for(const[T,E]of Object.entries(x))for(const[k,A]of Object.entries(E)){const O=(S=y[T]??(y[T]={}))[C=k||"__internal_without_id"]??(S[C]=[]);for(const D of A)O.includes(D)||O.push(D)}}).addMatcher(Ru(pf(e),EM(e)),(y,b)=>{const x=Kte(b,"providesTags",r,a),{queryCacheKey:S}=b.meta.arg;f.caseReducers.updateProvidedBy(y,f.actions.updateProvidedBy({queryCacheKey:S,providedTags:x}))})}}),h=ou({name:`${t}/subscriptions`,initialState:A0,reducers:{updateSubscriptionOptions(w,y){},unsubscribeQueryResult(w,y){},internal_getRTKQSubscriptions(){}}}),g=ou({name:`${t}/internalSubscriptions`,initialState:A0,reducers:{subscriptionsUpdated:{reducer(w,y){return AG(w,y.payload)},prepare:k0()}}}),p=ou({name:`${t}/config`,initialState:{online:kwe(),focused:Twe(),middlewareRegistered:!1,...l},reducers:{middlewareRegistered(w,{payload:y}){w.middlewareRegistered=w.middlewareRegistered==="conflict"||i!==y?"conflict":!0}},extraReducers:w=>{w.addCase($U,y=>{y.online=!0}).addCase(qte,y=>{y.online=!1}).addCase(NU,y=>{y.focused=!0}).addCase(Gte,y=>{y.focused=!1}).addMatcher(s,y=>({...y}))}}),m=Ite({queries:u.reducer,mutations:d.reducer,provided:f.reducer,subscriptions:g.reducer,config:p.reducer}),v=(w,y)=>m(c.match(y)?void 0:w,y),_={...p.actions,...u.actions,...h.actions,...g.actions,...d.actions,...f.actions,resetApiState:c};return{reducer:v,actions:_}}var Ph=Symbol.for("RTKQ/skipToken"),Yte={status:"uninitialized"},jG=c_(Yte,()=>{}),WG=c_(Yte,()=>{});function Bwe({serializeQueryArgs:t,reducerPath:e,createSelector:n}){const r=d=>jG,i=d=>WG;return{buildQuerySelector:a,buildMutationSelector:l,selectInvalidatedBy:c,selectCachedArgsForQuery:u};function o(d){return{...d,...Cwe(d.status)}}function s(d){return d[e]}function a(d,f){return h=>{const g=t({queryArgs:h,endpointDefinition:f,endpointName:d});return n(h===Ph?r:v=>{var _,w;return((w=(_=s(v))==null?void 0:_.queries)==null?void 0:w[g])??jG},o)}}function l(){return d=>{let f;return typeof d=="object"?f=Ix(d)??Ph:f=d,n(f===Ph?i:p=>{var m,v;return((v=(m=s(p))==null?void 0:m.mutations)==null?void 0:v[f])??WG},o)}}function c(d,f){const h=d[e],g=new Set;for(const p of f.map(o$)){const m=h.provided[p.type];if(!m)continue;let v=(p.id!==void 0?m[p.id]:NG(Object.values(m)))??[];for(const _ of v)g.add(_)}return NG(Array.from(g.values()).map(p=>{const m=h.queries[p];return m?[{queryCacheKey:p,endpointName:m.endpointName,originalArgs:m.originalArgs}]:[]}))}function u(d,f){return Object.values(d[e].queries).filter(h=>(h==null?void 0:h.endpointName)===f&&h.status!=="uninitialized").map(h=>h.originalArgs)}}var _m=WeakMap?new WeakMap:void 0,VG=({endpointName:t,queryArgs:e})=>{let n="";const r=_m==null?void 0:_m.get(e);if(typeof r=="string")n=r;else{const i=JSON.stringify(e,(o,s)=>(s=typeof s=="bigint"?{$bigint:s.toString()}:s,s=Ic(s)?Object.keys(s).sort().reduce((a,l)=>(a[l]=s[l],a),{}):s,s));Ic(e)&&(_m==null||_m.set(e,i)),n=i}return`${t}(${n})`};function Uwe(...t){return function(n){const r=IT(c=>{var u;return(u=n.extractRehydrationInfo)==null?void 0:u.call(n,c,{reducerPath:n.reducerPath??"api"})}),i={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...n,extractRehydrationInfo:r,serializeQueryArgs(c){let u=VG;if("serializeQueryArgs"in c.endpointDefinition){const d=c.endpointDefinition.serializeQueryArgs;u=f=>{const h=d(f);return typeof h=="string"?h:VG({...f,queryArgs:h})}}else n.serializeQueryArgs&&(u=n.serializeQueryArgs);return u(c)},tagTypes:[...n.tagTypes||[]]},o={endpointDefinitions:{},batch(c){c()},apiUid:Wte(),extractRehydrationInfo:r,hasRehydrationInfo:IT(c=>r(c)!=null)},s={injectEndpoints:l,enhanceEndpoints({addTagTypes:c,endpoints:u}){if(c)for(const d of c)i.tagTypes.includes(d)||i.tagTypes.push(d);if(u)for(const[d,f]of Object.entries(u))typeof f=="function"?f(o.endpointDefinitions[d]):Object.assign(o.endpointDefinitions[d]||{},f);return s}},a=t.map(c=>c.init(s,i,o));function l(c){const u=c.endpoints({query:d=>({...d,type:"query"}),mutation:d=>({...d,type:"mutation"})});for(const[d,f]of Object.entries(u)){if(c.overrideExisting!==!0&&d in o.endpointDefinitions){if(c.overrideExisting==="throw")throw new Error(Rs(39));typeof process<"u";continue}o.endpointDefinitions[d]=f;for(const h of a)h.injectEndpoint(d,f)}return s}return s.injectEndpoints({endpoints:n.endpoints})}}function cd(t,...e){return Object.assign(t,...e)}var zwe=({api:t,queryThunk:e,internalState:n})=>{const r=`${t.reducerPath}/subscriptions`;let i=null,o=null;const{updateSubscriptionOptions:s,unsubscribeQueryResult:a}=t.internalActions,l=(h,g)=>{var m,v,_;if(s.match(g)){const{queryCacheKey:w,requestId:y,options:b}=g.payload;return(m=h==null?void 0:h[w])!=null&&m[y]&&(h[w][y]=b),!0}if(a.match(g)){const{queryCacheKey:w,requestId:y}=g.payload;return h[w]&&delete h[w][y],!0}if(t.internalActions.removeQueryResult.match(g))return delete h[g.payload.queryCacheKey],!0;if(e.pending.match(g)){const{meta:{arg:w,requestId:y}}=g,b=h[v=w.queryCacheKey]??(h[v]={});return b[`${y}_running`]={},w.subscribe&&(b[y]=w.subscriptionOptions??b[y]??{}),!0}let p=!1;if(e.fulfilled.match(g)||e.rejected.match(g)){const w=h[g.meta.arg.queryCacheKey]||{},y=`${g.meta.requestId}_running`;p||(p=!!w[y]),delete w[y]}if(e.rejected.match(g)){const{meta:{condition:w,arg:y,requestId:b}}=g;if(w&&y.subscribe){const x=h[_=y.queryCacheKey]??(h[_]={});x[b]=y.subscriptionOptions??x[b]??{},p=!0}}return p},c=()=>n.currentSubscriptions,f={getSubscriptions:c,getSubscriptionCount:h=>{const p=c()[h]??{};return qg(p)},isRequestSubscribed:(h,g)=>{var m;const p=c();return!!((m=p==null?void 0:p[h])!=null&&m[g])}};return(h,g)=>{if(i||(i=JSON.parse(JSON.stringify(n.currentSubscriptions))),t.util.resetApiState.match(h))return i=n.currentSubscriptions={},o=null,[!0,!1];if(t.internalActions.internal_getRTKQSubscriptions.match(h))return[!1,f];const p=l(n.currentSubscriptions,h);let m=!0;if(p){o||(o=setTimeout(()=>{const w=JSON.parse(JSON.stringify(n.currentSubscriptions)),[,y]=Lte(i,()=>w);g.next(t.internalActions.subscriptionsUpdated(y)),i=w,o=null},500));const v=typeof h.type=="string"&&!!h.type.startsWith(r),_=e.rejected.match(h)&&h.meta.condition&&!!h.meta.arg.subscribe;m=!v&&!_}return[m,!1]}};function jwe(t){for(const e in t)return!1;return!0}var Wwe=2147483647/1e3-1,Vwe=({reducerPath:t,api:e,queryThunk:n,context:r,internalState:i})=>{const{removeQueryResult:o,unsubscribeQueryResult:s}=e.internalActions,a=Ru(s.match,n.fulfilled,n.rejected);function l(f){const h=i.currentSubscriptions[f];return!!h&&!jwe(h)}const c={},u=(f,h,g)=>{var p;if(a(f)){const m=h.getState()[t],{queryCacheKey:v}=s.match(f)?f.payload:f.meta.arg;d(v,(p=m.queries[v])==null?void 0:p.endpointName,h,m.config)}if(e.util.resetApiState.match(f))for(const[m,v]of Object.entries(c))v&&clearTimeout(v),delete c[m];if(r.hasRehydrationInfo(f)){const m=h.getState()[t],{queries:v}=r.extractRehydrationInfo(f);for(const[_,w]of Object.entries(v))d(_,w==null?void 0:w.endpointName,h,m.config)}};function d(f,h,g,p){const m=r.endpointDefinitions[h],v=(m==null?void 0:m.keepUnusedDataFor)??p.keepUnusedDataFor;if(v===1/0)return;const _=Math.max(0,Math.min(v,Wwe));if(!l(f)){const w=c[f];w&&clearTimeout(w),c[f]=setTimeout(()=>{l(f)||g.dispatch(o({queryCacheKey:f})),delete c[f]},_*1e3)}}return u},HG=new Error("Promise never resolved before cacheEntryRemoved."),Hwe=({api:t,reducerPath:e,context:n,queryThunk:r,mutationThunk:i,internalState:o})=>{const s=i$(r),a=i$(i),l=pf(r,i),c={},u=(h,g,p)=>{const m=d(h);if(r.pending.match(h)){const v=p[e].queries[m],_=g.getState()[e].queries[m];!v&&_&&f(h.meta.arg.endpointName,h.meta.arg.originalArgs,m,g,h.meta.requestId)}else if(i.pending.match(h))g.getState()[e].mutations[m]&&f(h.meta.arg.endpointName,h.meta.arg.originalArgs,m,g,h.meta.requestId);else if(l(h)){const v=c[m];v!=null&&v.valueResolved&&(v.valueResolved({data:h.payload,meta:h.meta.baseQueryMeta}),delete v.valueResolved)}else if(t.internalActions.removeQueryResult.match(h)||t.internalActions.removeMutationResult.match(h)){const v=c[m];v&&(delete c[m],v.cacheEntryRemoved())}else if(t.util.resetApiState.match(h))for(const[v,_]of Object.entries(c))delete c[v],_.cacheEntryRemoved()};function d(h){return s(h)?h.meta.arg.queryCacheKey:a(h)?h.meta.arg.fixedCacheKey??h.meta.requestId:t.internalActions.removeQueryResult.match(h)?h.payload.queryCacheKey:t.internalActions.removeMutationResult.match(h)?Ix(h.payload):""}function f(h,g,p,m,v){const _=n.endpointDefinitions[h],w=_==null?void 0:_.onCacheEntryAdded;if(!w)return;const y={},b=new Promise(k=>{y.cacheEntryRemoved=k}),x=Promise.race([new Promise(k=>{y.valueResolved=k}),b.then(()=>{throw HG})]);x.catch(()=>{}),c[p]=y;const S=t.endpoints[h].select(_.type==="query"?g:p),C=m.dispatch((k,A,O)=>O),T={...m,getCacheEntry:()=>S(m.getState()),requestId:v,extra:C,updateCachedData:_.type==="query"?k=>m.dispatch(t.util.updateQueryData(h,g,k)):void 0,cacheDataLoaded:x,cacheEntryRemoved:b},E=w(g,T);Promise.resolve(E).catch(k=>{if(k!==HG)throw k})}return u},Gwe=({api:t,context:{apiUid:e},reducerPath:n})=>(r,i)=>{t.util.resetApiState.match(r)&&i.dispatch(t.internalActions.middlewareRegistered(e)),typeof process<"u"},qwe=({reducerPath:t,context:e,context:{endpointDefinitions:n},mutationThunk:r,queryThunk:i,api:o,assertTagType:s,refetchQuery:a,internalState:l})=>{const{removeQueryResult:c}=o.internalActions,u=Ru(pf(r),EM(r)),d=Ru(pf(r,i),bv(r,i));let f=[];const h=(m,v)=>{u(m)?p(Kte(m,"invalidatesTags",n,s),v):d(m)?p([],v):o.util.invalidateTags.match(m)&&p(LU(m.payload,void 0,void 0,void 0,void 0,s),v)};function g(m){var v,_;for(const w in m.queries)if(((v=m.queries[w])==null?void 0:v.status)==="pending")return!0;for(const w in m.mutations)if(((_=m.mutations[w])==null?void 0:_.status)==="pending")return!0;return!1}function p(m,v){const _=v.getState(),w=_[t];if(f.push(...m),w.config.invalidationBehavior==="delayed"&&g(w))return;const y=f;if(f=[],y.length===0)return;const b=o.util.selectInvalidatedBy(_,y);e.batch(()=>{const x=Array.from(b.values());for(const{queryCacheKey:S}of x){const C=w.queries[S],T=l.currentSubscriptions[S]??{};C&&(qg(T)===0?v.dispatch(c({queryCacheKey:S})):C.status!=="uninitialized"&&v.dispatch(a(C,S)))}})}return h},Xwe=({reducerPath:t,queryThunk:e,api:n,refetchQuery:r,internalState:i})=>{const o={},s=(f,h)=>{(n.internalActions.updateSubscriptionOptions.match(f)||n.internalActions.unsubscribeQueryResult.match(f))&&l(f.payload,h),(e.pending.match(f)||e.rejected.match(f)&&f.meta.condition)&&l(f.meta.arg,h),(e.fulfilled.match(f)||e.rejected.match(f)&&!f.meta.condition)&&a(f.meta.arg,h),n.util.resetApiState.match(f)&&u()};function a({queryCacheKey:f},h){const g=h.getState()[t],p=g.queries[f],m=i.currentSubscriptions[f];if(!p||p.status==="uninitialized")return;const{lowestPollingInterval:v,skipPollingIfUnfocused:_}=d(m);if(!Number.isFinite(v))return;const w=o[f];w!=null&&w.timeout&&(clearTimeout(w.timeout),w.timeout=void 0);const y=Date.now()+v;o[f]={nextPollTimestamp:y,pollingInterval:v,timeout:setTimeout(()=>{(g.config.focused||!_)&&h.dispatch(r(p,f)),a({queryCacheKey:f},h)},v)}}function l({queryCacheKey:f},h){const p=h.getState()[t].queries[f],m=i.currentSubscriptions[f];if(!p||p.status==="uninitialized")return;const{lowestPollingInterval:v}=d(m);if(!Number.isFinite(v)){c(f);return}const _=o[f],w=Date.now()+v;(!_||w<_.nextPollTimestamp)&&a({queryCacheKey:f},h)}function c(f){const h=o[f];h!=null&&h.timeout&&clearTimeout(h.timeout),delete o[f]}function u(){for(const f of Object.keys(o))c(f)}function d(f={}){let h=!1,g=Number.POSITIVE_INFINITY;for(let p in f)f[p].pollingInterval&&(g=Math.min(f[p].pollingInterval,g),h=f[p].skipPollingIfUnfocused||h);return{lowestPollingInterval:g,skipPollingIfUnfocused:h}}return s},Kwe=({api:t,context:e,queryThunk:n,mutationThunk:r})=>{const i=DU(n,r),o=bv(n,r),s=pf(n,r),a={};return(c,u)=>{var d,f;if(i(c)){const{requestId:h,arg:{endpointName:g,originalArgs:p}}=c.meta,m=e.endpointDefinitions[g],v=m==null?void 0:m.onQueryStarted;if(v){const _={},w=new Promise((S,C)=>{_.resolve=S,_.reject=C});w.catch(()=>{}),a[h]=_;const y=t.endpoints[g].select(m.type==="query"?p:h),b=u.dispatch((S,C,T)=>T),x={...u,getCacheEntry:()=>y(u.getState()),requestId:h,extra:b,updateCachedData:m.type==="query"?S=>u.dispatch(t.util.updateQueryData(g,p,S)):void 0,queryFulfilled:w};v(p,x)}}else if(s(c)){const{requestId:h,baseQueryMeta:g}=c.meta;(d=a[h])==null||d.resolve({data:c.payload,meta:g}),delete a[h]}else if(o(c)){const{requestId:h,rejectedWithValue:g,baseQueryMeta:p}=c.meta;(f=a[h])==null||f.reject({error:c.payload??c.error,isUnhandledError:!g,meta:p}),delete a[h]}}},Ywe=({reducerPath:t,context:e,api:n,refetchQuery:r,internalState:i})=>{const{removeQueryResult:o}=n.internalActions,s=(l,c)=>{NU.match(l)&&a(c,"refetchOnFocus"),$U.match(l)&&a(c,"refetchOnReconnect")};function a(l,c){const u=l.getState()[t],d=u.queries,f=i.currentSubscriptions;e.batch(()=>{for(const h of Object.keys(f)){const g=d[h],p=f[h];if(!p||!g)continue;(Object.values(p).some(v=>v[c]===!0)||Object.values(p).every(v=>v[c]===void 0)&&u.config[c])&&(qg(p)===0?l.dispatch(o({queryCacheKey:h})):g.status!=="uninitialized"&&l.dispatch(r(g,h)))}})}return s};function Qwe(t){const{reducerPath:e,queryThunk:n,api:r,context:i}=t,{apiUid:o}=i,s={invalidateTags:gl(`${e}/invalidateTags`)},a=d=>d.type.startsWith(`${e}/`),l=[Gwe,Vwe,qwe,Xwe,Hwe,Kwe];return{middleware:d=>{let f=!1;const g={...t,internalState:{currentSubscriptions:{}},refetchQuery:u,isThisApiSliceAction:a},p=l.map(_=>_(g)),m=zwe(g),v=Ywe(g);return _=>w=>{if(!Ote(w))return _(w);f||(f=!0,d.dispatch(r.internalActions.middlewareRegistered(o)));const y={...d,next:_},b=d.getState(),[x,S]=m(w,y,b);let C;if(x?C=_(w):C=S,d.getState()[e]&&(v(w,y,b),a(w)||i.hasRehydrationInfo(w)))for(const T of p)T(w,y,b);return C}},actions:s};function u(d,f,h={}){return n({type:"query",endpointName:d.endpointName,originalArgs:d.originalArgs,subscribe:!1,forceRefetch:!0,queryCacheKey:f,...h})}}var GG=Symbol(),Zwe=({createSelector:t=RU}={})=>({name:GG,init(e,{baseQuery:n,tagTypes:r,reducerPath:i,serializeQueryArgs:o,keepUnusedDataFor:s,refetchOnMountOrArgChange:a,refetchOnFocus:l,refetchOnReconnect:c,invalidationBehavior:u},d){zxe();const f=L=>(typeof process<"u",L);Object.assign(e,{reducerPath:i,endpoints:{},internalActions:{onOnline:$U,onOffline:qte,onFocus:NU,onFocusLost:Gte},util:{}});const{queryThunk:h,mutationThunk:g,patchQueryData:p,updateQueryData:m,upsertQueryData:v,prefetch:_,buildMatchThunkActions:w}=Lwe({baseQuery:n,reducerPath:i,context:d,api:e,serializeQueryArgs:o,assertTagType:f}),{reducer:y,actions:b}=Fwe({context:d,queryThunk:h,mutationThunk:g,reducerPath:i,assertTagType:f,config:{refetchOnFocus:l,refetchOnReconnect:c,refetchOnMountOrArgChange:a,keepUnusedDataFor:s,reducerPath:i,invalidationBehavior:u}});cd(e.util,{patchQueryData:p,updateQueryData:m,upsertQueryData:v,prefetch:_,resetApiState:b.resetApiState}),cd(e.internalActions,b);const{middleware:x,actions:S}=Qwe({reducerPath:i,context:d,queryThunk:h,mutationThunk:g,api:e,assertTagType:f});cd(e.util,S),cd(e,{reducer:y,middleware:x});const{buildQuerySelector:C,buildMutationSelector:T,selectInvalidatedBy:E,selectCachedArgsForQuery:k}=Bwe({serializeQueryArgs:o,reducerPath:i,createSelector:t});cd(e.util,{selectInvalidatedBy:E,selectCachedArgsForQuery:k});const{buildInitiateQuery:A,buildInitiateMutation:O,getRunningMutationThunk:D,getRunningMutationsThunk:P,getRunningQueriesThunk:N,getRunningQueryThunk:U}=$we({queryThunk:h,mutationThunk:g,api:e,serializeQueryArgs:o,context:d});return cd(e.util,{getRunningMutationThunk:D,getRunningMutationsThunk:P,getRunningQueryThunk:U,getRunningQueriesThunk:N}),{name:GG,injectEndpoint(L,V){var Q;const G=e;(Q=G.endpoints)[L]??(Q[L]={}),Xte(V)?cd(G.endpoints[L],{name:L,select:C(L,V),initiate:A(L,V)},w(h,L)):Dwe(V)&&cd(G.endpoints[L],{name:L,select:T(),initiate:O(L)},w(g,L))}}}});function Jwe(t){return t.type==="query"}function e_e(t){return t.type==="mutation"}function US(t,...e){return Object.assign(t,...e)}function PR(t){return t.replace(t[0],t[0].toUpperCase())}var Sm=WeakMap?new WeakMap:void 0,t_e=({endpointName:t,queryArgs:e})=>{let n="";const r=Sm==null?void 0:Sm.get(e);if(typeof r=="string")n=r;else{const i=JSON.stringify(e,(o,s)=>(s=typeof s=="bigint"?{$bigint:s.toString()}:s,s=Ic(s)?Object.keys(s).sort().reduce((a,l)=>(a[l]=s[l],a),{}):s,s));Ic(e)&&(Sm==null||Sm.set(e,i)),n=i}return`${t}(${n})`},NR=Symbol();function qG(t,e,n,r){const i=R.useMemo(()=>({queryArgs:t,serialized:typeof t=="object"?e({queryArgs:t,endpointDefinition:n,endpointName:r}):t}),[t,e,n,r]),o=R.useRef(i);return R.useEffect(()=>{o.current.serialized!==i.serialized&&(o.current=i)},[i]),o.current.serialized===i.serialized?o.current.queryArgs:t}function $R(t){const e=R.useRef(t);return R.useEffect(()=>{Fb(e.current,t)||(e.current=t)},[t]),Fb(e.current,t)?e.current:t}var n_e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",r_e=n_e(),i_e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",o_e=i_e(),s_e=()=>r_e||o_e?R.useLayoutEffect:R.useEffect,a_e=s_e(),l_e=t=>t.isUninitialized?{...t,isUninitialized:!1,isFetching:!0,isLoading:t.data===void 0,status:Vte.pending}:t;function c_e({api:t,moduleOptions:{batch:e,hooks:{useDispatch:n,useSelector:r,useStore:i},unstable__sideEffectsInRender:o,createSelector:s},serializeQueryArgs:a,context:l}){const c=o?g=>g():R.useEffect;return{buildQueryHooks:f,buildMutationHook:h,usePrefetch:d};function u(g,p,m){if(p!=null&&p.endpointName&&g.isUninitialized){const{endpointName:x}=p,S=l.endpointDefinitions[x];a({queryArgs:p.originalArgs,endpointDefinition:S,endpointName:x})===a({queryArgs:m,endpointDefinition:S,endpointName:x})&&(p=void 0)}let v=g.isSuccess?g.data:p==null?void 0:p.data;v===void 0&&(v=g.data);const _=v!==void 0,w=g.isLoading,y=(!p||p.isLoading||p.isUninitialized)&&!_&&w,b=g.isSuccess||w&&_;return{...g,data:v,currentData:g.data,isFetching:w,isLoading:y,isSuccess:b}}function d(g,p){const m=n(),v=$R(p);return R.useCallback((_,w)=>m(t.util.prefetch(g,_,{...v,...w})),[g,m,v])}function f(g){const p=(_,{refetchOnReconnect:w,refetchOnFocus:y,refetchOnMountOrArgChange:b,skip:x=!1,pollingInterval:S=0,skipPollingIfUnfocused:C=!1}={})=>{const{initiate:T}=t.endpoints[g],E=n(),k=R.useRef(void 0);if(!k.current){const G=E(t.internalActions.internal_getRTKQSubscriptions());k.current=G}const A=qG(x?Ph:_,t_e,l.endpointDefinitions[g],g),O=$R({refetchOnReconnect:w,refetchOnFocus:y,pollingInterval:S,skipPollingIfUnfocused:C}),D=R.useRef(!1),P=R.useRef(void 0);let{queryCacheKey:N,requestId:U}=P.current||{},L=!1;N&&U&&(L=k.current.isRequestSubscribed(N,U));const V=!L&&D.current;return c(()=>{D.current=L}),c(()=>{V&&(P.current=void 0)},[V]),c(()=>{var te;const G=P.current;if(typeof process<"u",A===Ph){G==null||G.unsubscribe(),P.current=void 0;return}const Q=(te=P.current)==null?void 0:te.subscriptionOptions;if(!G||G.arg!==A){G==null||G.unsubscribe();const ne=E(T(A,{subscriptionOptions:O,forceRefetch:b}));P.current=ne}else O!==Q&&G.updateSubscriptionOptions(O)},[E,T,b,A,O,V]),R.useEffect(()=>()=>{var G;(G=P.current)==null||G.unsubscribe(),P.current=void 0},[]),R.useMemo(()=>({refetch:()=>{var G;if(!P.current)throw new Error(Rs(38));return(G=P.current)==null?void 0:G.refetch()}}),[])},m=({refetchOnReconnect:_,refetchOnFocus:w,pollingInterval:y=0,skipPollingIfUnfocused:b=!1}={})=>{const{initiate:x}=t.endpoints[g],S=n(),[C,T]=R.useState(NR),E=R.useRef(void 0),k=$R({refetchOnReconnect:_,refetchOnFocus:w,pollingInterval:y,skipPollingIfUnfocused:b});c(()=>{var P,N;const D=(P=E.current)==null?void 0:P.subscriptionOptions;k!==D&&((N=E.current)==null||N.updateSubscriptionOptions(k))},[k]);const A=R.useRef(k);c(()=>{A.current=k},[k]);const O=R.useCallback(function(D,P=!1){let N;return e(()=>{var U;(U=E.current)==null||U.unsubscribe(),E.current=N=S(x(D,{subscriptionOptions:A.current,forceRefetch:!P})),T(D)}),N},[S,x]);return R.useEffect(()=>()=>{var D;(D=E==null?void 0:E.current)==null||D.unsubscribe()},[]),R.useEffect(()=>{C!==NR&&!E.current&&O(C,!0)},[C,O]),R.useMemo(()=>[O,C],[O,C])},v=(_,{skip:w=!1,selectFromResult:y}={})=>{const{select:b}=t.endpoints[g],x=qG(w?Ph:_,a,l.endpointDefinitions[g],g),S=R.useRef(void 0),C=R.useMemo(()=>s([b(x),(O,D)=>D,O=>x],u,{memoizeOptions:{resultEqualityCheck:Fb}}),[b,x]),T=R.useMemo(()=>y?s([C],y,{devModeChecks:{identityFunctionCheck:"never"}}):C,[C,y]),E=r(O=>T(O,S.current),Fb),k=i(),A=C(k.getState(),S.current);return a_e(()=>{S.current=A},[A]),E};return{useQueryState:v,useQuerySubscription:p,useLazyQuerySubscription:m,useLazyQuery(_){const[w,y]=m(_),b=v(y,{..._,skip:y===NR}),x=R.useMemo(()=>({lastArg:y}),[y]);return R.useMemo(()=>[w,b,x],[w,b,x])},useQuery(_,w){const y=p(_,w),b=v(_,{selectFromResult:_===Ph||w!=null&&w.skip?void 0:l_e,...w}),{data:x,status:S,isLoading:C,isSuccess:T,isError:E,error:k}=b;return R.useDebugValue({data:x,status:S,isLoading:C,isSuccess:T,isError:E,error:k}),R.useMemo(()=>({...b,...y}),[b,y])}}}function h(g){return({selectFromResult:p,fixedCacheKey:m}={})=>{const{select:v,initiate:_}=t.endpoints[g],w=n(),[y,b]=R.useState();R.useEffect(()=>()=>{y!=null&&y.arg.fixedCacheKey||y==null||y.reset()},[y]);const x=R.useCallback(function(Q){const te=w(_(Q,{fixedCacheKey:m}));return b(te),te},[w,_,m]),{requestId:S}=y||{},C=R.useMemo(()=>v({fixedCacheKey:m,requestId:y==null?void 0:y.requestId}),[m,y,v]),T=R.useMemo(()=>p?s([C],p):C,[p,C]),E=r(T,Fb),k=m==null?y==null?void 0:y.arg.originalArgs:void 0,A=R.useCallback(()=>{e(()=>{y&&b(void 0),m&&w(t.internalActions.removeMutationResult({requestId:S,fixedCacheKey:m}))})},[w,m,y,S]),{endpointName:O,data:D,status:P,isLoading:N,isSuccess:U,isError:L,error:V}=E;R.useDebugValue({endpointName:O,data:D,status:P,isLoading:N,isSuccess:U,isError:L,error:V});const G=R.useMemo(()=>({...E,originalArgs:k,reset:A}),[E,k,A]);return R.useMemo(()=>[x,G],[x,G])}}}var u_e=Symbol(),d_e=({batch:t=Cbe,hooks:e={useDispatch:yM,useSelector:vM,useStore:yte},createSelector:n=RU,unstable__sideEffectsInRender:r=!1,...i}={})=>({name:u_e,init(o,{serializeQueryArgs:s},a){const l=o,{buildQueryHooks:c,buildMutationHook:u,usePrefetch:d}=c_e({api:o,moduleOptions:{batch:t,hooks:e,unstable__sideEffectsInRender:r,createSelector:n},serializeQueryArgs:s,context:a});return US(l,{usePrefetch:d}),US(a,{batch:t}),{injectEndpoint(f,h){if(Jwe(h)){const{useQuery:g,useLazyQuery:p,useLazyQuerySubscription:m,useQueryState:v,useQuerySubscription:_}=c(f);US(l.endpoints[f],{useQuery:g,useLazyQuery:p,useLazyQuerySubscription:m,useQueryState:v,useQuerySubscription:_}),o[`use${PR(f)}Query`]=g,o[`useLazy${PR(f)}Query`]=p}else if(e_e(h)){const g=u(f);US(l.endpoints[f],{useMutation:g}),o[`use${PR(f)}Mutation`]=g}}}}}),FU=Uwe(Zwe(),d_e());const f_e="https://localhost:5000",bE=FU({reducerPath:"authApi",baseQuery:PU({baseUrl:f_e,prepareHeaders:(t,{getState:e})=>{const n=e().auth.userToken;if(n)return t.set("authorization",`Bearer ${n}`),t}}),endpoints:t=>({getUserProfile:t.query({query:()=>({url:"api/user",method:"GET"})}),deposit:t.mutation({query:e=>({url:"api/deposit",method:"POST",body:{amount:e}})}),withdraw:t.mutation({query:e=>({url:"api/withdraw",method:"POST",body:{amount:e}})})})}),{useGetUserProfileQuery:h_e,useDepositMutation:ujt,useWithdrawMutation:djt}=bE;function Qte(t,e){return function(){return t.apply(e,arguments)}}const{toString:p_e}=Object.prototype,{getPrototypeOf:BU}=Object,TM=(t=>e=>{const n=p_e.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ol=t=>(t=t.toLowerCase(),e=>TM(e)===t),kM=t=>e=>typeof e===t,{isArray:Ay}=Array,Ox=kM("undefined");function m_e(t){return t!==null&&!Ox(t)&&t.constructor!==null&&!Ox(t.constructor)&&Ds(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Zte=Ol("ArrayBuffer");function g_e(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Zte(t.buffer),e}const v_e=kM("string"),Ds=kM("function"),Jte=kM("number"),AM=t=>t!==null&&typeof t=="object",y_e=t=>t===!0||t===!1,xE=t=>{if(TM(t)!=="object")return!1;const e=BU(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},b_e=Ol("Date"),x_e=Ol("File"),w_e=Ol("Blob"),__e=Ol("FileList"),S_e=t=>AM(t)&&Ds(t.pipe),C_e=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ds(t.append)&&((e=TM(t))==="formdata"||e==="object"&&Ds(t.toString)&&t.toString()==="[object FormData]"))},E_e=Ol("URLSearchParams"),[T_e,k_e,A_e,M_e]=["ReadableStream","Request","Response","Headers"].map(Ol),I_e=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function d_(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Ay(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const o=n?Object.getOwnPropertyNames(t):Object.keys(t),s=o.length;let a;for(r=0;r<s;r++)a=o[r],e.call(null,t[a],a,t)}}function ene(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Nh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,tne=t=>!Ox(t)&&t!==Nh;function a$(){const{caseless:t}=tne(this)&&this||{},e={},n=(r,i)=>{const o=t&&ene(e,i)||i;xE(e[o])&&xE(r)?e[o]=a$(e[o],r):xE(r)?e[o]=a$({},r):Ay(r)?e[o]=r.slice():e[o]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&d_(arguments[r],n);return e}const O_e=(t,e,n,{allOwnKeys:r}={})=>(d_(e,(i,o)=>{n&&Ds(i)?t[o]=Qte(i,n):t[o]=i},{allOwnKeys:r}),t),R_e=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),D_e=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},P_e=(t,e,n,r)=>{let i,o,s;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-- >0;)s=i[o],(!r||r(s,t,e))&&!a[s]&&(e[s]=t[s],a[s]=!0);t=n!==!1&&BU(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},N_e=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},$_e=t=>{if(!t)return null;if(Ay(t))return t;let e=t.length;if(!Jte(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},L_e=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&BU(Uint8Array)),F_e=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const o=i.value;e.call(t,o[0],o[1])}},B_e=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},U_e=Ol("HTMLFormElement"),z_e=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),XG=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),j_e=Ol("RegExp"),nne=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};d_(n,(i,o)=>{let s;(s=e(i,o,t))!==!1&&(r[o]=s||i)}),Object.defineProperties(t,r)},W_e=t=>{nne(t,(e,n)=>{if(Ds(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Ds(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},V_e=(t,e)=>{const n={},r=i=>{i.forEach(o=>{n[o]=!0})};return Ay(t)?r(t):r(String(t).split(e)),n},H_e=()=>{},G_e=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,LR="abcdefghijklmnopqrstuvwxyz",KG="0123456789",rne={DIGIT:KG,ALPHA:LR,ALPHA_DIGIT:LR+LR.toUpperCase()+KG},q_e=(t=16,e=rne.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function X_e(t){return!!(t&&Ds(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const K_e=t=>{const e=new Array(10),n=(r,i)=>{if(AM(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const o=Ay(r)?[]:{};return d_(r,(s,a)=>{const l=n(s,i+1);!Ox(l)&&(o[a]=l)}),e[i]=void 0,o}}return r};return n(t,0)},Y_e=Ol("AsyncFunction"),Q_e=t=>t&&(AM(t)||Ds(t))&&Ds(t.then)&&Ds(t.catch),ine=((t,e)=>t?setImmediate:e?((n,r)=>(Nh.addEventListener("message",({source:i,data:o})=>{i===Nh&&o===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Nh.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ds(Nh.postMessage)),Z_e=typeof queueMicrotask<"u"?queueMicrotask.bind(Nh):typeof process<"u"&&process.nextTick||ine,Pe={isArray:Ay,isArrayBuffer:Zte,isBuffer:m_e,isFormData:C_e,isArrayBufferView:g_e,isString:v_e,isNumber:Jte,isBoolean:y_e,isObject:AM,isPlainObject:xE,isReadableStream:T_e,isRequest:k_e,isResponse:A_e,isHeaders:M_e,isUndefined:Ox,isDate:b_e,isFile:x_e,isBlob:w_e,isRegExp:j_e,isFunction:Ds,isStream:S_e,isURLSearchParams:E_e,isTypedArray:L_e,isFileList:__e,forEach:d_,merge:a$,extend:O_e,trim:I_e,stripBOM:R_e,inherits:D_e,toFlatObject:P_e,kindOf:TM,kindOfTest:Ol,endsWith:N_e,toArray:$_e,forEachEntry:F_e,matchAll:B_e,isHTMLForm:U_e,hasOwnProperty:XG,hasOwnProp:XG,reduceDescriptors:nne,freezeMethods:W_e,toObjectSet:V_e,toCamelCase:z_e,noop:H_e,toFiniteNumber:G_e,findKey:ene,global:Nh,isContextDefined:tne,ALPHABET:rne,generateString:q_e,isSpecCompliantForm:X_e,toJSONObject:K_e,isAsyncFn:Y_e,isThenable:Q_e,setImmediate:ine,asap:Z_e};function Bt(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}Pe.inherits(Bt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Pe.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const one=Bt.prototype,sne={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{sne[t]={value:t}});Object.defineProperties(Bt,sne);Object.defineProperty(one,"isAxiosError",{value:!0});Bt.from=(t,e,n,r,i,o)=>{const s=Object.create(one);return Pe.toFlatObject(t,s,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Bt.call(s,t.message,e,n,r,i),s.cause=t,s.name=t.name,o&&Object.assign(s,o),s};const J_e=null;function l$(t){return Pe.isPlainObject(t)||Pe.isArray(t)}function ane(t){return Pe.endsWith(t,"[]")?t.slice(0,-2):t}function YG(t,e,n){return t?t.concat(e).map(function(i,o){return i=ane(i),!n&&o?"["+i+"]":i}).join(n?".":""):e}function e1e(t){return Pe.isArray(t)&&!t.some(l$)}const t1e=Pe.toFlatObject(Pe,{},null,function(e){return/^is[A-Z]/.test(e)});function MM(t,e,n){if(!Pe.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Pe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,m){return!Pe.isUndefined(m[p])});const r=n.metaTokens,i=n.visitor||u,o=n.dots,s=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Pe.isSpecCompliantForm(e);if(!Pe.isFunction(i))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(Pe.isDate(g))return g.toISOString();if(!l&&Pe.isBlob(g))throw new Bt("Blob is not supported. Use a Buffer instead.");return Pe.isArrayBuffer(g)||Pe.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,p,m){let v=g;if(g&&!m&&typeof g=="object"){if(Pe.endsWith(p,"{}"))p=r?p:p.slice(0,-2),g=JSON.stringify(g);else if(Pe.isArray(g)&&e1e(g)||(Pe.isFileList(g)||Pe.endsWith(p,"[]"))&&(v=Pe.toArray(g)))return p=ane(p),v.forEach(function(w,y){!(Pe.isUndefined(w)||w===null)&&e.append(s===!0?YG([p],y,o):s===null?p:p+"[]",c(w))}),!1}return l$(g)?!0:(e.append(YG(m,p,o),c(g)),!1)}const d=[],f=Object.assign(t1e,{defaultVisitor:u,convertValue:c,isVisitable:l$});function h(g,p){if(!Pe.isUndefined(g)){if(d.indexOf(g)!==-1)throw Error("Circular reference detected in "+p.join("."));d.push(g),Pe.forEach(g,function(v,_){(!(Pe.isUndefined(v)||v===null)&&i.call(e,v,Pe.isString(_)?_.trim():_,p,f))===!0&&h(v,p?p.concat(_):[_])}),d.pop()}}if(!Pe.isObject(t))throw new TypeError("data must be an object");return h(t),e}function QG(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function UU(t,e){this._pairs=[],t&&MM(t,this,e)}const lne=UU.prototype;lne.append=function(e,n){this._pairs.push([e,n])};lne.toString=function(e){const n=e?function(r){return e.call(this,r,QG)}:QG;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function n1e(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function cne(t,e,n){if(!e)return t;const r=n&&n.encode||n1e,i=n&&n.serialize;let o;if(i?o=i(e,n):o=Pe.isURLSearchParams(e)?e.toString():new UU(e,n).toString(r),o){const s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class ZG{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Pe.forEach(this.handlers,function(r){r!==null&&e(r)})}}const une={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},r1e=typeof URLSearchParams<"u"?URLSearchParams:UU,i1e=typeof FormData<"u"?FormData:null,o1e=typeof Blob<"u"?Blob:null,s1e={isBrowser:!0,classes:{URLSearchParams:r1e,FormData:i1e,Blob:o1e},protocols:["http","https","file","blob","url","data"]},zU=typeof window<"u"&&typeof document<"u",a1e=(t=>zU&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),l1e=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",c1e=zU&&window.location.href||"http://localhost",u1e=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:zU,hasStandardBrowserEnv:a1e,hasStandardBrowserWebWorkerEnv:l1e,origin:c1e},Symbol.toStringTag,{value:"Module"})),vl={...u1e,...s1e};function d1e(t,e){return MM(t,new vl.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,o){return vl.isNode&&Pe.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function f1e(t){return Pe.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function h1e(t){const e={},n=Object.keys(t);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],e[o]=t[o];return e}function dne(t){function e(n,r,i,o){let s=n[o++];if(s==="__proto__")return!0;const a=Number.isFinite(+s),l=o>=n.length;return s=!s&&Pe.isArray(i)?i.length:s,l?(Pe.hasOwnProp(i,s)?i[s]=[i[s],r]:i[s]=r,!a):((!i[s]||!Pe.isObject(i[s]))&&(i[s]=[]),e(n,r,i[s],o)&&Pe.isArray(i[s])&&(i[s]=h1e(i[s])),!a)}if(Pe.isFormData(t)&&Pe.isFunction(t.entries)){const n={};return Pe.forEachEntry(t,(r,i)=>{e(f1e(r),i,n,0)}),n}return null}function p1e(t,e,n){if(Pe.isString(t))try{return(e||JSON.parse)(t),Pe.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const f_={transitional:une,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=Pe.isObject(e);if(o&&Pe.isHTMLForm(e)&&(e=new FormData(e)),Pe.isFormData(e))return i?JSON.stringify(dne(e)):e;if(Pe.isArrayBuffer(e)||Pe.isBuffer(e)||Pe.isStream(e)||Pe.isFile(e)||Pe.isBlob(e)||Pe.isReadableStream(e))return e;if(Pe.isArrayBufferView(e))return e.buffer;if(Pe.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return d1e(e,this.formSerializer).toString();if((a=Pe.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return MM(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),p1e(e)):e}],transformResponse:[function(e){const n=this.transitional||f_.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Pe.isResponse(e)||Pe.isReadableStream(e))return e;if(e&&Pe.isString(e)&&(r&&!this.responseType||i)){const s=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(s)throw a.name==="SyntaxError"?Bt.from(a,Bt.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vl.classes.FormData,Blob:vl.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Pe.forEach(["delete","get","head","post","put","patch"],t=>{f_.headers[t]={}});const m1e=Pe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),g1e=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(s){i=s.indexOf(":"),n=s.substring(0,i).trim().toLowerCase(),r=s.substring(i+1).trim(),!(!n||e[n]&&m1e[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},JG=Symbol("internals");function M0(t){return t&&String(t).trim().toLowerCase()}function wE(t){return t===!1||t==null?t:Pe.isArray(t)?t.map(wE):String(t)}function v1e(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const y1e=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function FR(t,e,n,r,i){if(Pe.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Pe.isString(e)){if(Pe.isString(r))return e.indexOf(r)!==-1;if(Pe.isRegExp(r))return r.test(e)}}function b1e(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function x1e(t,e){const n=Pe.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,o,s){return this[r].call(this,e,i,o,s)},configurable:!0})})}class ns{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function o(a,l,c){const u=M0(l);if(!u)throw new Error("header name must be a non-empty string");const d=Pe.findKey(i,u);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||l]=wE(a))}const s=(a,l)=>Pe.forEach(a,(c,u)=>o(c,u,l));if(Pe.isPlainObject(e)||e instanceof this.constructor)s(e,n);else if(Pe.isString(e)&&(e=e.trim())&&!y1e(e))s(g1e(e),n);else if(Pe.isHeaders(e))for(const[a,l]of e.entries())o(l,a,r);else e!=null&&o(n,e,r);return this}get(e,n){if(e=M0(e),e){const r=Pe.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return v1e(i);if(Pe.isFunction(n))return n.call(this,i,r);if(Pe.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=M0(e),e){const r=Pe.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||FR(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function o(s){if(s=M0(s),s){const a=Pe.findKey(r,s);a&&(!n||FR(r,r[a],a,n))&&(delete r[a],i=!0)}}return Pe.isArray(e)?e.forEach(o):o(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const o=n[r];(!e||FR(this,this[o],o,e,!0))&&(delete this[o],i=!0)}return i}normalize(e){const n=this,r={};return Pe.forEach(this,(i,o)=>{const s=Pe.findKey(r,o);if(s){n[s]=wE(i),delete n[o];return}const a=e?b1e(o):String(o).trim();a!==o&&delete n[o],n[a]=wE(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Pe.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Pe.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[JG]=this[JG]={accessors:{}}).accessors,i=this.prototype;function o(s){const a=M0(s);r[a]||(x1e(i,s),r[a]=!0)}return Pe.isArray(e)?e.forEach(o):o(e),this}}ns.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Pe.reduceDescriptors(ns.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Pe.freezeMethods(ns);function BR(t,e){const n=this||f_,r=e||n,i=ns.from(r.headers);let o=r.data;return Pe.forEach(t,function(a){o=a.call(n,o,i.normalize(),e?e.status:void 0)}),i.normalize(),o}function fne(t){return!!(t&&t.__CANCEL__)}function My(t,e,n){Bt.call(this,t??"canceled",Bt.ERR_CANCELED,e,n),this.name="CanceledError"}Pe.inherits(My,Bt,{__CANCEL__:!0});function hne(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Bt("Request failed with status code "+n.status,[Bt.ERR_BAD_REQUEST,Bt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function w1e(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function _1e(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,o=0,s;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[o];s||(s=c),n[i]=l,r[i]=c;let d=o,f=0;for(;d!==i;)f+=n[d++],d=d%t;if(i=(i+1)%t,i===o&&(o=(o+1)%t),c-s<e)return;const h=u&&c-u;return h?Math.round(f*1e3/h):void 0}}function S1e(t,e){let n=0,r=1e3/e,i,o;const s=(c,u=Date.now())=>{n=u,i=null,o&&(clearTimeout(o),o=null),t.apply(null,c)};return[(...c)=>{const u=Date.now(),d=u-n;d>=r?s(c,u):(i=c,o||(o=setTimeout(()=>{o=null,s(i)},r-d)))},()=>i&&s(i)]}const OT=(t,e,n=3)=>{let r=0;const i=_1e(50,250);return S1e(o=>{const s=o.loaded,a=o.lengthComputable?o.total:void 0,l=s-r,c=i(l),u=s<=a;r=s;const d={loaded:s,total:a,progress:a?s/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-s)/c:void 0,event:o,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(d)},n)},e6=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},t6=t=>(...e)=>Pe.asap(()=>t(...e)),C1e=vl.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(o){let s=o;return e&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(s){const a=Pe.isString(s)?i(s):s;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}(),E1e=vl.hasStandardBrowserEnv?{write(t,e,n,r,i,o){const s=[t+"="+encodeURIComponent(e)];Pe.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),Pe.isString(r)&&s.push("path="+r),Pe.isString(i)&&s.push("domain="+i),o===!0&&s.push("secure"),document.cookie=s.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function T1e(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function k1e(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function pne(t,e){return t&&!T1e(e)?k1e(t,e):e}const n6=t=>t instanceof ns?{...t}:t;function wp(t,e){e=e||{};const n={};function r(c,u,d){return Pe.isPlainObject(c)&&Pe.isPlainObject(u)?Pe.merge.call({caseless:d},c,u):Pe.isPlainObject(u)?Pe.merge({},u):Pe.isArray(u)?u.slice():u}function i(c,u,d){if(Pe.isUndefined(u)){if(!Pe.isUndefined(c))return r(void 0,c,d)}else return r(c,u,d)}function o(c,u){if(!Pe.isUndefined(u))return r(void 0,u)}function s(c,u){if(Pe.isUndefined(u)){if(!Pe.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,d){if(d in e)return r(c,u);if(d in t)return r(void 0,c)}const l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(c,u)=>i(n6(c),n6(u),!0)};return Pe.forEach(Object.keys(Object.assign({},t,e)),function(u){const d=l[u]||i,f=d(t[u],e[u],u);Pe.isUndefined(f)&&d!==a||(n[u]=f)}),n}const mne=t=>{const e=wp({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:s,auth:a}=e;e.headers=s=ns.from(s),e.url=cne(pne(e.baseURL,e.url),t.params,t.paramsSerializer),a&&s.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(Pe.isFormData(n)){if(vl.hasStandardBrowserEnv||vl.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((l=s.getContentType())!==!1){const[c,...u]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];s.setContentType([c||"multipart/form-data",...u].join("; "))}}if(vl.hasStandardBrowserEnv&&(r&&Pe.isFunction(r)&&(r=r(e)),r||r!==!1&&C1e(e.url))){const c=i&&o&&E1e.read(o);c&&s.set(i,c)}return e},A1e=typeof XMLHttpRequest<"u",M1e=A1e&&function(t){return new Promise(function(n,r){const i=mne(t);let o=i.data;const s=ns.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,u,d,f,h,g;function p(){h&&h(),g&&g(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let m=new XMLHttpRequest;m.open(i.method.toUpperCase(),i.url,!0),m.timeout=i.timeout;function v(){if(!m)return;const w=ns.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),b={data:!a||a==="text"||a==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:w,config:t,request:m};hne(function(S){n(S),p()},function(S){r(S),p()},b),m=null}"onloadend"in m?m.onloadend=v:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(v)},m.onabort=function(){m&&(r(new Bt("Request aborted",Bt.ECONNABORTED,t,m)),m=null)},m.onerror=function(){r(new Bt("Network Error",Bt.ERR_NETWORK,t,m)),m=null},m.ontimeout=function(){let y=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const b=i.transitional||une;i.timeoutErrorMessage&&(y=i.timeoutErrorMessage),r(new Bt(y,b.clarifyTimeoutError?Bt.ETIMEDOUT:Bt.ECONNABORTED,t,m)),m=null},o===void 0&&s.setContentType(null),"setRequestHeader"in m&&Pe.forEach(s.toJSON(),function(y,b){m.setRequestHeader(b,y)}),Pe.isUndefined(i.withCredentials)||(m.withCredentials=!!i.withCredentials),a&&a!=="json"&&(m.responseType=i.responseType),c&&([f,g]=OT(c,!0),m.addEventListener("progress",f)),l&&m.upload&&([d,h]=OT(l),m.upload.addEventListener("progress",d),m.upload.addEventListener("loadend",h)),(i.cancelToken||i.signal)&&(u=w=>{m&&(r(!w||w.type?new My(null,t,m):w),m.abort(),m=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const _=w1e(i.url);if(_&&vl.protocols.indexOf(_)===-1){r(new Bt("Unsupported protocol "+_+":",Bt.ERR_BAD_REQUEST,t));return}m.send(o||null)})},I1e=(t,e)=>{let n=new AbortController,r;const i=function(l){if(!r){r=!0,s();const c=l instanceof Error?l:this.reason;n.abort(c instanceof Bt?c:new My(c instanceof Error?c.message:c))}};let o=e&&setTimeout(()=>{i(new Bt(`timeout ${e} of ms exceeded`,Bt.ETIMEDOUT))},e);const s=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(l=>{l&&(l.removeEventListener?l.removeEventListener("abort",i):l.unsubscribe(i))}),t=null)};t.forEach(l=>l&&l.addEventListener&&l.addEventListener("abort",i));const{signal:a}=n;return a.unsubscribe=s,[a,()=>{o&&clearTimeout(o),o=null}]},O1e=function*(t,e){let n=t.byteLength;if(!e||n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},R1e=async function*(t,e,n){for await(const r of t)yield*O1e(ArrayBuffer.isView(r)?r:await n(String(r)),e)},r6=(t,e,n,r,i)=>{const o=R1e(t,e,i);let s=0,a,l=c=>{a||(a=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await o.next();if(u){l(),c.close();return}let f=d.byteLength;if(n){let h=s+=f;n(h)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),o.return()}},{highWaterMark:2})},IM=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",gne=IM&&typeof ReadableStream=="function",c$=IM&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),vne=(t,...e)=>{try{return!!t(...e)}catch{return!1}},D1e=gne&&vne(()=>{let t=!1;const e=new Request(vl.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),i6=64*1024,u$=gne&&vne(()=>Pe.isReadableStream(new Response("").body)),RT={stream:u$&&(t=>t.body)};IM&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!RT[e]&&(RT[e]=Pe.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new Bt(`Response type '${e}' is not supported`,Bt.ERR_NOT_SUPPORT,r)})})})(new Response);const P1e=async t=>{if(t==null)return 0;if(Pe.isBlob(t))return t.size;if(Pe.isSpecCompliantForm(t))return(await new Request(t).arrayBuffer()).byteLength;if(Pe.isArrayBufferView(t)||Pe.isArrayBuffer(t))return t.byteLength;if(Pe.isURLSearchParams(t)&&(t=t+""),Pe.isString(t))return(await c$(t)).byteLength},N1e=async(t,e)=>{const n=Pe.toFiniteNumber(t.getContentLength());return n??P1e(e)},$1e=IM&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:o,timeout:s,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:f}=mne(t);c=c?(c+"").toLowerCase():"text";let[h,g]=i||o||s?I1e([i,o],s):[],p,m;const v=()=>{!p&&setTimeout(()=>{h&&h.unsubscribe()}),p=!0};let _;try{if(l&&D1e&&n!=="get"&&n!=="head"&&(_=await N1e(u,r))!==0){let x=new Request(e,{method:"POST",body:r,duplex:"half"}),S;if(Pe.isFormData(r)&&(S=x.headers.get("content-type"))&&u.setContentType(S),x.body){const[C,T]=e6(_,OT(t6(l)));r=r6(x.body,i6,C,T,c$)}}Pe.isString(d)||(d=d?"include":"omit"),m=new Request(e,{...f,signal:h,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:d});let w=await fetch(m);const y=u$&&(c==="stream"||c==="response");if(u$&&(a||y)){const x={};["status","statusText","headers"].forEach(E=>{x[E]=w[E]});const S=Pe.toFiniteNumber(w.headers.get("content-length")),[C,T]=a&&e6(S,OT(t6(a),!0))||[];w=new Response(r6(w.body,i6,C,()=>{T&&T(),y&&v()},c$),x)}c=c||"text";let b=await RT[Pe.findKey(RT,c)||"text"](w,t);return!y&&v(),g&&g(),await new Promise((x,S)=>{hne(x,S,{data:b,headers:ns.from(w.headers),status:w.status,statusText:w.statusText,config:t,request:m})})}catch(w){throw v(),w&&w.name==="TypeError"&&/fetch/i.test(w.message)?Object.assign(new Bt("Network Error",Bt.ERR_NETWORK,t,m),{cause:w.cause||w}):Bt.from(w,w&&w.code,t,m)}}),d$={http:J_e,xhr:M1e,fetch:$1e};Pe.forEach(d$,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const o6=t=>`- ${t}`,L1e=t=>Pe.isFunction(t)||t===null||t===!1,yne={getAdapter:t=>{t=Pe.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let o=0;o<e;o++){n=t[o];let s;if(r=n,!L1e(n)&&(r=d$[(s=String(n)).toLowerCase()],r===void 0))throw new Bt(`Unknown adapter '${s}'`);if(r)break;i[s||"#"+o]=r}if(!r){const o=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let s=e?o.length>1?`since :
`+o.map(o6).join(`
`):" "+o6(o[0]):"as no adapter specified";throw new Bt("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return r},adapters:d$};function UR(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new My(null,t)}function s6(t){return UR(t),t.headers=ns.from(t.headers),t.data=BR.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),yne.getAdapter(t.adapter||f_.adapter)(t).then(function(r){return UR(t),r.data=BR.call(t,t.transformResponse,r),r.headers=ns.from(r.headers),r},function(r){return fne(r)||(UR(t),r&&r.response&&(r.response.data=BR.call(t,t.transformResponse,r.response),r.response.headers=ns.from(r.response.headers))),Promise.reject(r)})}const bne="1.7.4",jU={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{jU[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const a6={};jU.transitional=function(e,n,r){function i(o,s){return"[Axios v"+bne+"] Transitional option '"+o+"'"+s+(r?". "+r:"")}return(o,s,a)=>{if(e===!1)throw new Bt(i(s," has been removed"+(n?" in "+n:"")),Bt.ERR_DEPRECATED);return n&&!a6[s]&&(a6[s]=!0,console.warn(i(s," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,s,a):!0}};function F1e(t,e,n){if(typeof t!="object")throw new Bt("options must be an object",Bt.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const o=r[i],s=e[o];if(s){const a=t[o],l=a===void 0||s(a,o,t);if(l!==!0)throw new Bt("option "+o+" must be "+l,Bt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Bt("Unknown option "+o,Bt.ERR_BAD_OPTION)}}const f$={assertOptions:F1e,validators:jU},ud=f$.validators;class Zh{constructor(e){this.defaults=e,this.interceptors={request:new ZG,response:new ZG}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=wp(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:o}=n;r!==void 0&&f$.assertOptions(r,{silentJSONParsing:ud.transitional(ud.boolean),forcedJSONParsing:ud.transitional(ud.boolean),clarifyTimeoutError:ud.transitional(ud.boolean)},!1),i!=null&&(Pe.isFunction(i)?n.paramsSerializer={serialize:i}:f$.assertOptions(i,{encode:ud.function,serialize:ud.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=o&&Pe.merge(o.common,o[n.method]);o&&Pe.forEach(["delete","get","head","post","put","patch","common"],g=>{delete o[g]}),n.headers=ns.concat(s,o);const a=[];let l=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(n)===!1||(l=l&&p.synchronous,a.unshift(p.fulfilled,p.rejected))});const c=[];this.interceptors.response.forEach(function(p){c.push(p.fulfilled,p.rejected)});let u,d=0,f;if(!l){const g=[s6.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,c),f=g.length,u=Promise.resolve(n);d<f;)u=u.then(g[d++],g[d++]);return u}f=a.length;let h=n;for(d=0;d<f;){const g=a[d++],p=a[d++];try{h=g(h)}catch(m){p.call(this,m);break}}try{u=s6.call(this,h)}catch(g){return Promise.reject(g)}for(d=0,f=c.length;d<f;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=wp(this.defaults,e);const n=pne(e.baseURL,e.url);return cne(n,e.params,e.paramsSerializer)}}Pe.forEach(["delete","get","head","options"],function(e){Zh.prototype[e]=function(n,r){return this.request(wp(r||{},{method:e,url:n,data:(r||{}).data}))}});Pe.forEach(["post","put","patch"],function(e){function n(r){return function(o,s,a){return this.request(wp(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:s}))}}Zh.prototype[e]=n(),Zh.prototype[e+"Form"]=n(!0)});class WU{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const s=new Promise(a=>{r.subscribe(a),o=a}).then(i);return s.cancel=function(){r.unsubscribe(o)},s},e(function(o,s,a){r.reason||(r.reason=new My(o,s,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new WU(function(i){e=i}),cancel:e}}}function B1e(t){return function(n){return t.apply(null,n)}}function U1e(t){return Pe.isObject(t)&&t.isAxiosError===!0}const h$={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(h$).forEach(([t,e])=>{h$[e]=t});function xne(t){const e=new Zh(t),n=Qte(Zh.prototype.request,e);return Pe.extend(n,Zh.prototype,e,{allOwnKeys:!0}),Pe.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return xne(wp(t,i))},n}const Ht=xne(f_);Ht.Axios=Zh;Ht.CanceledError=My;Ht.CancelToken=WU;Ht.isCancel=fne;Ht.VERSION=bne;Ht.toFormData=MM;Ht.AxiosError=Bt;Ht.Cancel=Ht.CanceledError;Ht.all=function(e){return Promise.all(e)};Ht.spread=B1e;Ht.isAxiosError=U1e;Ht.mergeConfig=wp;Ht.AxiosHeaders=ns;Ht.formToJSON=t=>dne(Pe.isHTMLForm(t)?new FormData(t):t);Ht.getAdapter=yne.getAdapter;Ht.HttpStatusCode=h$;Ht.default=Ht;const wne=void 0,Jh=xv("user/login",async({email:t,password:e},{rejectWithValue:n})=>{try{const r={headers:{"Content-Type":"application/json"}},{data:i}=await Ht.post(`${wne}/api/user/login`,{email:t,password:e},r);return localStorage.setItem("userToken",i.userToken),i}catch(r){return r.response&&r.response.data.message?n(r.response.data.message):n(r.message)}}),ep=xv("auth/register",async({firstName:t,email:e,password:n},{rejectWithValue:r})=>{try{const i={headers:{"Content-Type":"application/json"}};await Ht.post(`${wne}/api/user/register`,{firstName:t,email:e,password:n},i)}catch(i){return i.response&&i.response.data.message?r(i.response.data.message):r(i.message)}}),z1e=localStorage.getItem("userToken")?localStorage.getItem("userToken"):null,j1e={loading:!1,userInfo:null,userToken:z1e,error:null,success:!1},_ne=ou({name:"auth",initialState:j1e,reducers:{logout:t=>{localStorage.removeItem("userToken"),t.loading=!1,t.userInfo=null,t.userToken=null,t.error=null,t.balance=0},setCredentials:(t,{payload:e})=>{t.userInfo=e}},extraReducers:t=>{t.addCase(Jh.pending,e=>{e.loading=!0,e.error=null}).addCase(Jh.fulfilled,(e,{payload:n})=>{e.loading=!1,e.userInfo=n,e.userToken=n.userToken,e.balance=n.balance}).addCase(Jh.rejected,(e,{payload:n})=>{e.loading=!1,e.error=n}).addCase(ep.pending,e=>{e.loading=!0,e.error=null}).addCase(ep.fulfilled,(e,{payload:n})=>{e.loading=!1,e.success=!0}).addCase(ep.rejected,(e,{payload:n})=>{e.loading=!1,e.error=n})}});_ne.actions;const l6=_ne.reducer;var Sne={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var o="",s=0;s<arguments.length;s++){var a=arguments[s];a&&(o=i(o,r(a)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var s="";for(var a in o)e.call(o,a)&&o[a]&&(s=i(s,a));return s}function i(o,s){return s?o?o+" "+s:o+s:o}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(Sne);var W1e=Sne.exports;const yt=cn(W1e),V1e=["as","disabled"];function H1e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function G1e(t){return!t||t.trim()==="#"}function Cne({tagName:t,disabled:e,href:n,target:r,rel:i,role:o,onClick:s,tabIndex:a=0,type:l}){t||(n!=null||r!=null||i!=null?t="a":t="button");const c={tagName:t};if(t==="button")return[{type:l||"button",disabled:e},c];const u=f=>{if((e||t==="a"&&G1e(n))&&f.preventDefault(),e){f.stopPropagation();return}s==null||s(f)},d=f=>{f.key===" "&&(f.preventDefault(),u(f))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:o??"button",disabled:void 0,tabIndex:e?void 0:a,href:n,target:t==="a"?r:void 0,"aria-disabled":e||void 0,rel:t==="a"?i:void 0,onClick:u,onKeyDown:d},c]}const q1e=R.forwardRef((t,e)=>{let{as:n,disabled:r}=t,i=H1e(t,V1e);const[o,{tagName:s}]=Cne(Object.assign({tagName:n,disabled:r},i));return I.jsx(s,Object.assign({},i,o,{ref:e}))});q1e.displayName="Button";const X1e=["xxl","xl","lg","md","sm","xs"],K1e="xs",VU=R.createContext({prefixes:{},breakpoints:X1e,minBreakpoint:K1e});function pi(t,e){const{prefixes:n}=R.useContext(VU);return t||n[e]||e}function Y1e(){const{breakpoints:t}=R.useContext(VU);return t}function Q1e(){const{minBreakpoint:t}=R.useContext(VU);return t}const DT=R.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:r,active:i=!1,disabled:o=!1,className:s,...a},l)=>{const c=pi(e,"btn"),[u,{tagName:d}]=Cne({tagName:t,disabled:o,...a}),f=d;return I.jsx(f,{...u,...a,ref:l,disabled:o,className:yt(s,c,i&&"active",n&&`${c}-${n}`,r&&`${c}-${r}`,a.href&&o&&"disabled")})});DT.displayName="Button";const Z1e=t=>R.forwardRef((e,n)=>I.jsx("div",{...e,ref:n,className:yt(e.className,t)}));/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const HU="167",J1e=0,c6=1,eSe=2,Ene=1,tSe=2,tu=3,mf=0,rs=1,lu=2,tf=0,Xg=1,u6=2,d6=3,f6=4,nSe=5,Sh=100,rSe=101,iSe=102,oSe=103,sSe=104,aSe=200,lSe=201,cSe=202,uSe=203,p$=204,m$=205,dSe=206,fSe=207,hSe=208,pSe=209,mSe=210,gSe=211,vSe=212,ySe=213,bSe=214,xSe=0,wSe=1,_Se=2,PT=3,SSe=4,CSe=5,ESe=6,TSe=7,Tne=0,kSe=1,ASe=2,nf=0,MSe=1,ISe=2,OSe=3,RSe=4,DSe=5,PSe=6,NSe=7,kne=300,wv=301,_v=302,g$=303,v$=304,OM=306,y$=1e3,$h=1001,b$=1002,ya=1003,$Se=1004,zS=1005,ll=1006,zR=1007,Lh=1008,Du=1009,Ane=1010,Mne=1011,Rx=1012,GU=1013,_p=1014,pu=1015,h_=1016,qU=1017,XU=1018,Sv=1020,Ine=35902,One=1021,Rne=1022,ul=1023,Dne=1024,Pne=1025,Kg=1026,Cv=1027,Nne=1028,KU=1029,$ne=1030,YU=1031,QU=1033,_E=33776,SE=33777,CE=33778,EE=33779,x$=35840,w$=35841,_$=35842,S$=35843,C$=36196,E$=37492,T$=37496,k$=37808,A$=37809,M$=37810,I$=37811,O$=37812,R$=37813,D$=37814,P$=37815,N$=37816,$$=37817,L$=37818,F$=37819,B$=37820,U$=37821,TE=36492,z$=36494,j$=36495,Lne=36283,W$=36284,V$=36285,H$=36286,LSe=3200,FSe=3201,BSe=0,USe=1,Md="",Ul="srgb",Rf="srgb-linear",ZU="display-p3",RM="display-p3-linear",NT="linear",Qn="srgb",$T="rec709",LT="p3",Cm=7680,h6=519,zSe=512,jSe=513,WSe=514,Fne=515,VSe=516,HSe=517,GSe=518,qSe=519,p6=35044,m6="300 es",mu=2e3,FT=2001;class Iy{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let o=0,s=i.length;o<s;o++)i[o].call(this,e);e.target=null}}}const Ji=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],jR=Math.PI/180,G$=180/Math.PI;function p_(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Ji[t&255]+Ji[t>>8&255]+Ji[t>>16&255]+Ji[t>>24&255]+"-"+Ji[e&255]+Ji[e>>8&255]+"-"+Ji[e>>16&15|64]+Ji[e>>24&255]+"-"+Ji[n&63|128]+Ji[n>>8&255]+"-"+Ji[n>>16&255]+Ji[n>>24&255]+Ji[r&255]+Ji[r>>8&255]+Ji[r>>16&255]+Ji[r>>24&255]).toLowerCase()}function Vo(t,e,n){return Math.max(e,Math.min(n,t))}function XSe(t,e){return(t%e+e)%e}function WR(t,e,n){return(1-n)*t+n*e}function I0(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Uo(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}class fn{constructor(e=0,n=0){fn.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Vo(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),o=this.x-e.x,s=this.y-e.y;return this.x=o*r-s*i+e.x,this.y=o*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Wt{constructor(e,n,r,i,o,s,a,l,c){Wt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,s,a,l,c)}set(e,n,r,i,o,s,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=n,u[4]=o,u[5]=l,u[6]=r,u[7]=s,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,s=r[0],a=r[3],l=r[6],c=r[1],u=r[4],d=r[7],f=r[2],h=r[5],g=r[8],p=i[0],m=i[3],v=i[6],_=i[1],w=i[4],y=i[7],b=i[2],x=i[5],S=i[8];return o[0]=s*p+a*_+l*b,o[3]=s*m+a*w+l*x,o[6]=s*v+a*y+l*S,o[1]=c*p+u*_+d*b,o[4]=c*m+u*w+d*x,o[7]=c*v+u*y+d*S,o[2]=f*p+h*_+g*b,o[5]=f*m+h*w+g*x,o[8]=f*v+h*y+g*S,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return n*s*u-n*a*c-r*o*u+r*a*l+i*o*c-i*s*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*s-a*c,f=a*l-u*o,h=c*o-s*l,g=n*d+r*f+i*h;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const p=1/g;return e[0]=d*p,e[1]=(i*c-u*r)*p,e[2]=(a*r-i*s)*p,e[3]=f*p,e[4]=(u*n-i*l)*p,e[5]=(i*o-a*n)*p,e[6]=h*p,e[7]=(r*l-c*n)*p,e[8]=(s*n-r*o)*p,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,o,s,a){const l=Math.cos(o),c=Math.sin(o);return this.set(r*l,r*c,-r*(l*s+c*a)+s+e,-i*c,i*l,-i*(-c*s+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(VR.makeScale(e,n)),this}rotate(e){return this.premultiply(VR.makeRotation(-e)),this}translate(e,n){return this.premultiply(VR.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const VR=new Wt;function Bne(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function BT(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function KSe(){const t=BT("canvas");return t.style.display="block",t}const g6={};function zb(t){t in g6||(g6[t]=!0,console.warn(t))}function YSe(t,e,n){return new Promise(function(r,i){function o(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:i();break;case t.TIMEOUT_EXPIRED:setTimeout(o,n);break;default:r()}}setTimeout(o,n)})}const v6=new Wt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),y6=new Wt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),O0={[Rf]:{transfer:NT,primaries:$T,luminanceCoefficients:[.2126,.7152,.0722],toReference:t=>t,fromReference:t=>t},[Ul]:{transfer:Qn,primaries:$T,luminanceCoefficients:[.2126,.7152,.0722],toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[RM]:{transfer:NT,primaries:LT,luminanceCoefficients:[.2289,.6917,.0793],toReference:t=>t.applyMatrix3(y6),fromReference:t=>t.applyMatrix3(v6)},[ZU]:{transfer:Qn,primaries:LT,luminanceCoefficients:[.2289,.6917,.0793],toReference:t=>t.convertSRGBToLinear().applyMatrix3(y6),fromReference:t=>t.applyMatrix3(v6).convertLinearToSRGB()}},QSe=new Set([Rf,RM]),Cn={enabled:!0,_workingColorSpace:Rf,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!QSe.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=O0[e].toReference,i=O0[n].fromReference;return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return O0[t].primaries},getTransfer:function(t){return t===Md?NT:O0[t].transfer},getLuminanceCoefficients:function(t,e=this._workingColorSpace){return t.fromArray(O0[e].luminanceCoefficients)}};function Yg(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function HR(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let Em;class ZSe{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Em===void 0&&(Em=BT("canvas")),Em.width=e.width,Em.height=e.height;const r=Em.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=Em}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=BT("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),o=i.data;for(let s=0;s<o.length;s++)o[s]=Yg(o[s]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Yg(n[r]/255)*255):n[r]=Yg(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let JSe=0;class Une{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:JSe++}),this.uuid=p_(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let o;if(Array.isArray(i)){o=[];for(let s=0,a=i.length;s<a;s++)i[s].isDataTexture?o.push(GR(i[s].image)):o.push(GR(i[s]))}else o=GR(i);r.url=o}return n||(e.images[this.uuid]=r),r}}function GR(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?ZSe.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let eCe=0;class is extends Iy{constructor(e=is.DEFAULT_IMAGE,n=is.DEFAULT_MAPPING,r=$h,i=$h,o=ll,s=Lh,a=ul,l=Du,c=is.DEFAULT_ANISOTROPY,u=Md){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:eCe++}),this.uuid=p_(),this.name="",this.source=new Une(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=o,this.minFilter=s,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new fn(0,0),this.repeat=new fn(1,1),this.center=new fn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Wt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==kne)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case y$:e.x=e.x-Math.floor(e.x);break;case $h:e.x=e.x<0?0:1;break;case b$:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case y$:e.y=e.y-Math.floor(e.y);break;case $h:e.y=e.y<0?0:1;break;case b$:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}is.DEFAULT_IMAGE=null;is.DEFAULT_MAPPING=kne;is.DEFAULT_ANISOTROPY=1;class ci{constructor(e=0,n=0,r=0,i=1){ci.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=this.w,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i+s[12]*o,this.y=s[1]*n+s[5]*r+s[9]*i+s[13]*o,this.z=s[2]*n+s[6]*r+s[10]*i+s[14]*o,this.w=s[3]*n+s[7]*r+s[11]*i+s[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,o;const l=e.elements,c=l[0],u=l[4],d=l[8],f=l[1],h=l[5],g=l[9],p=l[2],m=l[6],v=l[10];if(Math.abs(u-f)<.01&&Math.abs(d-p)<.01&&Math.abs(g-m)<.01){if(Math.abs(u+f)<.1&&Math.abs(d+p)<.1&&Math.abs(g+m)<.1&&Math.abs(c+h+v-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const w=(c+1)/2,y=(h+1)/2,b=(v+1)/2,x=(u+f)/4,S=(d+p)/4,C=(g+m)/4;return w>y&&w>b?w<.01?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt(w),i=x/r,o=S/r):y>b?y<.01?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(y),r=x/i,o=C/i):b<.01?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(b),r=S/o,i=C/o),this.set(r,i,o,n),this}let _=Math.sqrt((m-g)*(m-g)+(d-p)*(d-p)+(f-u)*(f-u));return Math.abs(_)<.001&&(_=1),this.x=(m-g)/_,this.y=(d-p)/_,this.z=(f-u)/_,this.w=Math.acos((c+h+v-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class tCe extends Iy{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new ci(0,0,e,n),this.scissorTest=!1,this.viewport=new ci(0,0,e,n);const i={width:e,height:n,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ll,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const o=new is(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);o.flipY=!1,o.generateMipmaps=r.generateMipmaps,o.internalFormat=r.internalFormat,this.textures=[];const s=r.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,o=this.textures.length;i<o;i++)this.textures[i].image.width=e,this.textures[i].image.height=n,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new Une(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Sp extends tCe{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class zne extends is{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=ya,this.minFilter=ya,this.wrapR=$h,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class nCe extends is{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=ya,this.minFilter=ya,this.wrapR=$h,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class m_{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,o,s,a){let l=r[i+0],c=r[i+1],u=r[i+2],d=r[i+3];const f=o[s+0],h=o[s+1],g=o[s+2],p=o[s+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d;return}if(a===1){e[n+0]=f,e[n+1]=h,e[n+2]=g,e[n+3]=p;return}if(d!==p||l!==f||c!==h||u!==g){let m=1-a;const v=l*f+c*h+u*g+d*p,_=v>=0?1:-1,w=1-v*v;if(w>Number.EPSILON){const b=Math.sqrt(w),x=Math.atan2(b,v*_);m=Math.sin(m*x)/b,a=Math.sin(a*x)/b}const y=a*_;if(l=l*m+f*y,c=c*m+h*y,u=u*m+g*y,d=d*m+p*y,m===1-a){const b=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=b,c*=b,u*=b,d*=b}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d}static multiplyQuaternionsFlat(e,n,r,i,o,s){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],d=o[s],f=o[s+1],h=o[s+2],g=o[s+3];return e[n]=a*g+u*d+l*h-c*f,e[n+1]=l*g+u*f+c*d-a*h,e[n+2]=c*g+u*h+a*f-l*d,e[n+3]=u*g-a*d-l*f-c*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,o=e._z,s=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),d=a(o/2),f=l(r/2),h=l(i/2),g=l(o/2);switch(s){case"XYZ":this._x=f*u*d+c*h*g,this._y=c*h*d-f*u*g,this._z=c*u*g+f*h*d,this._w=c*u*d-f*h*g;break;case"YXZ":this._x=f*u*d+c*h*g,this._y=c*h*d-f*u*g,this._z=c*u*g-f*h*d,this._w=c*u*d+f*h*g;break;case"ZXY":this._x=f*u*d-c*h*g,this._y=c*h*d+f*u*g,this._z=c*u*g+f*h*d,this._w=c*u*d-f*h*g;break;case"ZYX":this._x=f*u*d-c*h*g,this._y=c*h*d+f*u*g,this._z=c*u*g-f*h*d,this._w=c*u*d+f*h*g;break;case"YZX":this._x=f*u*d+c*h*g,this._y=c*h*d+f*u*g,this._z=c*u*g-f*h*d,this._w=c*u*d-f*h*g;break;case"XZY":this._x=f*u*d-c*h*g,this._y=c*h*d-f*u*g,this._z=c*u*g+f*h*d,this._w=c*u*d+f*h*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],o=n[8],s=n[1],a=n[5],l=n[9],c=n[2],u=n[6],d=n[10],f=r+a+d;if(f>0){const h=.5/Math.sqrt(f+1);this._w=.25/h,this._x=(u-l)*h,this._y=(o-c)*h,this._z=(s-i)*h}else if(r>a&&r>d){const h=2*Math.sqrt(1+r-a-d);this._w=(u-l)/h,this._x=.25*h,this._y=(i+s)/h,this._z=(o+c)/h}else if(a>d){const h=2*Math.sqrt(1+a-r-d);this._w=(o-c)/h,this._x=(i+s)/h,this._y=.25*h,this._z=(l+u)/h}else{const h=2*Math.sqrt(1+d-r-a);this._w=(s-i)/h,this._x=(o+c)/h,this._y=(l+u)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Vo(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,o=e._z,s=e._w,a=n._x,l=n._y,c=n._z,u=n._w;return this._x=r*u+s*a+i*c-o*l,this._y=i*u+s*l+o*a-r*c,this._z=o*u+s*c+r*l-i*a,this._w=s*u-r*a-i*l-o*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,o=this._z,s=this._w;let a=s*e._w+r*e._x+i*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=r,this._y=i,this._z=o,this;const l=1-a*a;if(l<=Number.EPSILON){const h=1-n;return this._w=h*s+n*this._w,this._x=h*r+n*this._x,this._y=h*i+n*this._y,this._z=h*o+n*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-n)*u)/c,f=Math.sin(n*u)/c;return this._w=s*d+this._w*f,this._x=r*d+this._x*f,this._y=i*d+this._y*f,this._z=o*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),o=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),o*Math.sin(n),o*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ae{constructor(e=0,n=0,r=0){Ae.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(b6.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(b6.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[3]*r+o[6]*i,this.y=o[1]*n+o[4]*r+o[7]*i,this.z=o[2]*n+o[5]*r+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=e.elements,s=1/(o[3]*n+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*n+o[4]*r+o[8]*i+o[12])*s,this.y=(o[1]*n+o[5]*r+o[9]*i+o[13])*s,this.z=(o[2]*n+o[6]*r+o[10]*i+o[14])*s,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,o=e.x,s=e.y,a=e.z,l=e.w,c=2*(s*i-a*r),u=2*(a*n-o*i),d=2*(o*r-s*n);return this.x=n+l*c+s*d-a*u,this.y=r+l*u+a*c-o*d,this.z=i+l*d+o*u-s*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i,this.y=o[1]*n+o[5]*r+o[9]*i,this.z=o[2]*n+o[6]*r+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,o=e.z,s=n.x,a=n.y,l=n.z;return this.x=i*l-o*a,this.y=o*s-r*l,this.z=r*a-i*s,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return qR.copy(this).projectOnVector(e),this.sub(qR)}reflect(e){return this.sub(qR.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Vo(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const qR=new Ae,b6=new m_;class g_{constructor(e=new Ae(1/0,1/0,1/0),n=new Ae(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(qa.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(qa.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=qa.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const o=r.getAttribute("position");if(n===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)e.isMesh===!0?e.getVertexPosition(s,qa):qa.fromBufferAttribute(o,s),qa.applyMatrix4(e.matrixWorld),this.expandByPoint(qa);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),jS.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),jS.copy(r.boundingBox)),jS.applyMatrix4(e.matrixWorld),this.union(jS)}const i=e.children;for(let o=0,s=i.length;o<s;o++)this.expandByObject(i[o],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,qa),qa.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(R0),WS.subVectors(this.max,R0),Tm.subVectors(e.a,R0),km.subVectors(e.b,R0),Am.subVectors(e.c,R0),dd.subVectors(km,Tm),fd.subVectors(Am,km),Zf.subVectors(Tm,Am);let n=[0,-dd.z,dd.y,0,-fd.z,fd.y,0,-Zf.z,Zf.y,dd.z,0,-dd.x,fd.z,0,-fd.x,Zf.z,0,-Zf.x,-dd.y,dd.x,0,-fd.y,fd.x,0,-Zf.y,Zf.x,0];return!XR(n,Tm,km,Am,WS)||(n=[1,0,0,0,1,0,0,0,1],!XR(n,Tm,km,Am,WS))?!1:(VS.crossVectors(dd,fd),n=[VS.x,VS.y,VS.z],XR(n,Tm,km,Am,WS))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,qa).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(qa).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(qc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),qc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),qc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),qc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),qc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),qc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),qc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),qc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(qc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const qc=[new Ae,new Ae,new Ae,new Ae,new Ae,new Ae,new Ae,new Ae],qa=new Ae,jS=new g_,Tm=new Ae,km=new Ae,Am=new Ae,dd=new Ae,fd=new Ae,Zf=new Ae,R0=new Ae,WS=new Ae,VS=new Ae,Jf=new Ae;function XR(t,e,n,r,i){for(let o=0,s=t.length-3;o<=s;o+=3){Jf.fromArray(t,o);const a=i.x*Math.abs(Jf.x)+i.y*Math.abs(Jf.y)+i.z*Math.abs(Jf.z),l=e.dot(Jf),c=n.dot(Jf),u=r.dot(Jf);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const rCe=new g_,D0=new Ae,KR=new Ae;class JU{constructor(e=new Ae,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):rCe.setFromPoints(e).getCenter(r);let i=0;for(let o=0,s=e.length;o<s;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;D0.subVectors(e,this.center);const n=D0.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(D0,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(KR.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(D0.copy(e.center).add(KR)),this.expandByPoint(D0.copy(e.center).sub(KR))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Xc=new Ae,YR=new Ae,HS=new Ae,hd=new Ae,QR=new Ae,GS=new Ae,ZR=new Ae;class iCe{constructor(e=new Ae,n=new Ae(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Xc)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Xc.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Xc.copy(this.origin).addScaledVector(this.direction,n),Xc.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){YR.copy(e).add(n).multiplyScalar(.5),HS.copy(n).sub(e).normalize(),hd.copy(this.origin).sub(YR);const o=e.distanceTo(n)*.5,s=-this.direction.dot(HS),a=hd.dot(this.direction),l=-hd.dot(HS),c=hd.lengthSq(),u=Math.abs(1-s*s);let d,f,h,g;if(u>0)if(d=s*l-a,f=s*a-l,g=o*u,d>=0)if(f>=-g)if(f<=g){const p=1/u;d*=p,f*=p,h=d*(d+s*f+2*a)+f*(s*d+f+2*l)+c}else f=o,d=Math.max(0,-(s*f+a)),h=-d*d+f*(f+2*l)+c;else f=-o,d=Math.max(0,-(s*f+a)),h=-d*d+f*(f+2*l)+c;else f<=-g?(d=Math.max(0,-(-s*o+a)),f=d>0?-o:Math.min(Math.max(-o,-l),o),h=-d*d+f*(f+2*l)+c):f<=g?(d=0,f=Math.min(Math.max(-o,-l),o),h=f*(f+2*l)+c):(d=Math.max(0,-(s*o+a)),f=d>0?o:Math.min(Math.max(-o,-l),o),h=-d*d+f*(f+2*l)+c);else f=s>0?-o:o,d=Math.max(0,-(s*f+a)),h=-d*d+f*(f+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(YR).addScaledVector(HS,f),h}intersectSphere(e,n){Xc.subVectors(e.center,this.origin);const r=Xc.dot(this.direction),i=Xc.dot(Xc)-r*r,o=e.radius*e.radius;if(i>o)return null;const s=Math.sqrt(o-i),a=r-s,l=r+s;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,o,s,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,f=this.origin;return c>=0?(r=(e.min.x-f.x)*c,i=(e.max.x-f.x)*c):(r=(e.max.x-f.x)*c,i=(e.min.x-f.x)*c),u>=0?(o=(e.min.y-f.y)*u,s=(e.max.y-f.y)*u):(o=(e.max.y-f.y)*u,s=(e.min.y-f.y)*u),r>s||o>i||((o>r||isNaN(r))&&(r=o),(s<i||isNaN(i))&&(i=s),d>=0?(a=(e.min.z-f.z)*d,l=(e.max.z-f.z)*d):(a=(e.max.z-f.z)*d,l=(e.min.z-f.z)*d),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Xc)!==null}intersectTriangle(e,n,r,i,o){QR.subVectors(n,e),GS.subVectors(r,e),ZR.crossVectors(QR,GS);let s=this.direction.dot(ZR),a;if(s>0){if(i)return null;a=1}else if(s<0)a=-1,s=-s;else return null;hd.subVectors(this.origin,e);const l=a*this.direction.dot(GS.crossVectors(hd,GS));if(l<0)return null;const c=a*this.direction.dot(QR.cross(hd));if(c<0||l+c>s)return null;const u=-a*hd.dot(ZR);return u<0?null:this.at(u/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Nr{constructor(e,n,r,i,o,s,a,l,c,u,d,f,h,g,p,m){Nr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,s,a,l,c,u,d,f,h,g,p,m)}set(e,n,r,i,o,s,a,l,c,u,d,f,h,g,p,m){const v=this.elements;return v[0]=e,v[4]=n,v[8]=r,v[12]=i,v[1]=o,v[5]=s,v[9]=a,v[13]=l,v[2]=c,v[6]=u,v[10]=d,v[14]=f,v[3]=h,v[7]=g,v[11]=p,v[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Nr().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/Mm.setFromMatrixColumn(e,0).length(),o=1/Mm.setFromMatrixColumn(e,1).length(),s=1/Mm.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*s,n[9]=r[9]*s,n[10]=r[10]*s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,o=e.z,s=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(o),d=Math.sin(o);if(e.order==="XYZ"){const f=s*u,h=s*d,g=a*u,p=a*d;n[0]=l*u,n[4]=-l*d,n[8]=c,n[1]=h+g*c,n[5]=f-p*c,n[9]=-a*l,n[2]=p-f*c,n[6]=g+h*c,n[10]=s*l}else if(e.order==="YXZ"){const f=l*u,h=l*d,g=c*u,p=c*d;n[0]=f+p*a,n[4]=g*a-h,n[8]=s*c,n[1]=s*d,n[5]=s*u,n[9]=-a,n[2]=h*a-g,n[6]=p+f*a,n[10]=s*l}else if(e.order==="ZXY"){const f=l*u,h=l*d,g=c*u,p=c*d;n[0]=f-p*a,n[4]=-s*d,n[8]=g+h*a,n[1]=h+g*a,n[5]=s*u,n[9]=p-f*a,n[2]=-s*c,n[6]=a,n[10]=s*l}else if(e.order==="ZYX"){const f=s*u,h=s*d,g=a*u,p=a*d;n[0]=l*u,n[4]=g*c-h,n[8]=f*c+p,n[1]=l*d,n[5]=p*c+f,n[9]=h*c-g,n[2]=-c,n[6]=a*l,n[10]=s*l}else if(e.order==="YZX"){const f=s*l,h=s*c,g=a*l,p=a*c;n[0]=l*u,n[4]=p-f*d,n[8]=g*d+h,n[1]=d,n[5]=s*u,n[9]=-a*u,n[2]=-c*u,n[6]=h*d+g,n[10]=f-p*d}else if(e.order==="XZY"){const f=s*l,h=s*c,g=a*l,p=a*c;n[0]=l*u,n[4]=-d,n[8]=c*u,n[1]=f*d+p,n[5]=s*u,n[9]=h*d-g,n[2]=g*d-h,n[6]=a*u,n[10]=p*d+f}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(oCe,e,sCe)}lookAt(e,n,r){const i=this.elements;return gs.subVectors(e,n),gs.lengthSq()===0&&(gs.z=1),gs.normalize(),pd.crossVectors(r,gs),pd.lengthSq()===0&&(Math.abs(r.z)===1?gs.x+=1e-4:gs.z+=1e-4,gs.normalize(),pd.crossVectors(r,gs)),pd.normalize(),qS.crossVectors(gs,pd),i[0]=pd.x,i[4]=qS.x,i[8]=gs.x,i[1]=pd.y,i[5]=qS.y,i[9]=gs.y,i[2]=pd.z,i[6]=qS.z,i[10]=gs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,s=r[0],a=r[4],l=r[8],c=r[12],u=r[1],d=r[5],f=r[9],h=r[13],g=r[2],p=r[6],m=r[10],v=r[14],_=r[3],w=r[7],y=r[11],b=r[15],x=i[0],S=i[4],C=i[8],T=i[12],E=i[1],k=i[5],A=i[9],O=i[13],D=i[2],P=i[6],N=i[10],U=i[14],L=i[3],V=i[7],G=i[11],Q=i[15];return o[0]=s*x+a*E+l*D+c*L,o[4]=s*S+a*k+l*P+c*V,o[8]=s*C+a*A+l*N+c*G,o[12]=s*T+a*O+l*U+c*Q,o[1]=u*x+d*E+f*D+h*L,o[5]=u*S+d*k+f*P+h*V,o[9]=u*C+d*A+f*N+h*G,o[13]=u*T+d*O+f*U+h*Q,o[2]=g*x+p*E+m*D+v*L,o[6]=g*S+p*k+m*P+v*V,o[10]=g*C+p*A+m*N+v*G,o[14]=g*T+p*O+m*U+v*Q,o[3]=_*x+w*E+y*D+b*L,o[7]=_*S+w*k+y*P+b*V,o[11]=_*C+w*A+y*N+b*G,o[15]=_*T+w*O+y*U+b*Q,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],o=e[12],s=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],f=e[10],h=e[14],g=e[3],p=e[7],m=e[11],v=e[15];return g*(+o*l*d-i*c*d-o*a*f+r*c*f+i*a*h-r*l*h)+p*(+n*l*h-n*c*f+o*s*f-i*s*h+i*c*u-o*l*u)+m*(+n*c*d-n*a*h-o*s*d+r*s*h+o*a*u-r*c*u)+v*(-i*a*u-n*l*d+n*a*f+i*s*d-r*s*f+r*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],h=e[11],g=e[12],p=e[13],m=e[14],v=e[15],_=d*m*c-p*f*c+p*l*h-a*m*h-d*l*v+a*f*v,w=g*f*c-u*m*c-g*l*h+s*m*h+u*l*v-s*f*v,y=u*p*c-g*d*c+g*a*h-s*p*h-u*a*v+s*d*v,b=g*d*l-u*p*l-g*a*f+s*p*f+u*a*m-s*d*m,x=n*_+r*w+i*y+o*b;if(x===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/x;return e[0]=_*S,e[1]=(p*f*o-d*m*o-p*i*h+r*m*h+d*i*v-r*f*v)*S,e[2]=(a*m*o-p*l*o+p*i*c-r*m*c-a*i*v+r*l*v)*S,e[3]=(d*l*o-a*f*o-d*i*c+r*f*c+a*i*h-r*l*h)*S,e[4]=w*S,e[5]=(u*m*o-g*f*o+g*i*h-n*m*h-u*i*v+n*f*v)*S,e[6]=(g*l*o-s*m*o-g*i*c+n*m*c+s*i*v-n*l*v)*S,e[7]=(s*f*o-u*l*o+u*i*c-n*f*c-s*i*h+n*l*h)*S,e[8]=y*S,e[9]=(g*d*o-u*p*o-g*r*h+n*p*h+u*r*v-n*d*v)*S,e[10]=(s*p*o-g*a*o+g*r*c-n*p*c-s*r*v+n*a*v)*S,e[11]=(u*a*o-s*d*o-u*r*c+n*d*c+s*r*h-n*a*h)*S,e[12]=b*S,e[13]=(u*p*i-g*d*i+g*r*f-n*p*f-u*r*m+n*d*m)*S,e[14]=(g*a*i-s*p*i-g*r*l+n*p*l+s*r*m-n*a*m)*S,e[15]=(s*d*i-u*a*i+u*r*l-n*d*l-s*r*f+n*a*f)*S,this}scale(e){const n=this.elements,r=e.x,i=e.y,o=e.z;return n[0]*=r,n[4]*=i,n[8]*=o,n[1]*=r,n[5]*=i,n[9]*=o,n[2]*=r,n[6]*=i,n[10]*=o,n[3]*=r,n[7]*=i,n[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),o=1-r,s=e.x,a=e.y,l=e.z,c=o*s,u=o*a;return this.set(c*s+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*s,0,c*l-i*a,u*l+i*s,o*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,o,s){return this.set(1,r,o,0,e,1,s,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,o=n._x,s=n._y,a=n._z,l=n._w,c=o+o,u=s+s,d=a+a,f=o*c,h=o*u,g=o*d,p=s*u,m=s*d,v=a*d,_=l*c,w=l*u,y=l*d,b=r.x,x=r.y,S=r.z;return i[0]=(1-(p+v))*b,i[1]=(h+y)*b,i[2]=(g-w)*b,i[3]=0,i[4]=(h-y)*x,i[5]=(1-(f+v))*x,i[6]=(m+_)*x,i[7]=0,i[8]=(g+w)*S,i[9]=(m-_)*S,i[10]=(1-(f+p))*S,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let o=Mm.set(i[0],i[1],i[2]).length();const s=Mm.set(i[4],i[5],i[6]).length(),a=Mm.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],Xa.copy(this);const c=1/o,u=1/s,d=1/a;return Xa.elements[0]*=c,Xa.elements[1]*=c,Xa.elements[2]*=c,Xa.elements[4]*=u,Xa.elements[5]*=u,Xa.elements[6]*=u,Xa.elements[8]*=d,Xa.elements[9]*=d,Xa.elements[10]*=d,n.setFromRotationMatrix(Xa),r.x=o,r.y=s,r.z=a,this}makePerspective(e,n,r,i,o,s,a=mu){const l=this.elements,c=2*o/(n-e),u=2*o/(r-i),d=(n+e)/(n-e),f=(r+i)/(r-i);let h,g;if(a===mu)h=-(s+o)/(s-o),g=-2*s*o/(s-o);else if(a===FT)h=-s/(s-o),g=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=h,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,o,s,a=mu){const l=this.elements,c=1/(n-e),u=1/(r-i),d=1/(s-o),f=(n+e)*c,h=(r+i)*u;let g,p;if(a===mu)g=(s+o)*d,p=-2*d;else if(a===FT)g=o*d,p=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-h,l[2]=0,l[6]=0,l[10]=p,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const Mm=new Ae,Xa=new Nr,oCe=new Ae(0,0,0),sCe=new Ae(1,1,1),pd=new Ae,qS=new Ae,gs=new Ae,x6=new Nr,w6=new m_;class Pu{constructor(e=0,n=0,r=0,i=Pu.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,o=i[0],s=i[4],a=i[8],l=i[1],c=i[5],u=i[9],d=i[2],f=i[6],h=i[10];switch(n){case"XYZ":this._y=Math.asin(Vo(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,h),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Vo(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,o),this._z=0);break;case"ZXY":this._x=Math.asin(Vo(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,h),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-Vo(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,h),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-s,c));break;case"YZX":this._z=Math.asin(Vo(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,o)):(this._x=0,this._y=Math.atan2(a,h));break;case"XZY":this._z=Math.asin(-Vo(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-u,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return x6.makeRotationFromQuaternion(e),this.setFromRotationMatrix(x6,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return w6.setFromEuler(this),this.setFromQuaternion(w6,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Pu.DEFAULT_ORDER="XYZ";class jne{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let aCe=0;const _6=new Ae,Im=new m_,Kc=new Nr,XS=new Ae,P0=new Ae,lCe=new Ae,cCe=new m_,S6=new Ae(1,0,0),C6=new Ae(0,1,0),E6=new Ae(0,0,1),T6={type:"added"},uCe={type:"removed"},Om={type:"childadded",child:null},JR={type:"childremoved",child:null};class fo extends Iy{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:aCe++}),this.uuid=p_(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=fo.DEFAULT_UP.clone();const e=new Ae,n=new Pu,r=new m_,i=new Ae(1,1,1);function o(){r.setFromEuler(n,!1)}function s(){n.setFromQuaternion(r,void 0,!1)}n._onChange(o),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Nr},normalMatrix:{value:new Wt}}),this.matrix=new Nr,this.matrixWorld=new Nr,this.matrixAutoUpdate=fo.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=fo.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new jne,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Im.setFromAxisAngle(e,n),this.quaternion.multiply(Im),this}rotateOnWorldAxis(e,n){return Im.setFromAxisAngle(e,n),this.quaternion.premultiply(Im),this}rotateX(e){return this.rotateOnAxis(S6,e)}rotateY(e){return this.rotateOnAxis(C6,e)}rotateZ(e){return this.rotateOnAxis(E6,e)}translateOnAxis(e,n){return _6.copy(e).applyQuaternion(this.quaternion),this.position.add(_6.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(S6,e)}translateY(e){return this.translateOnAxis(C6,e)}translateZ(e){return this.translateOnAxis(E6,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Kc.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?XS.copy(e):XS.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),P0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Kc.lookAt(P0,XS,this.up):Kc.lookAt(XS,P0,this.up),this.quaternion.setFromRotationMatrix(Kc),i&&(Kc.extractRotation(i.matrixWorld),Im.setFromRotationMatrix(Kc),this.quaternion.premultiply(Im.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(T6),Om.child=e,this.dispatchEvent(Om),Om.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(uCe),JR.child=e,this.dispatchEvent(JR),JR.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Kc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Kc.multiply(e.parent.matrixWorld)),e.applyMatrix4(Kc),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(T6),Om.child=e,this.dispatchEvent(Om),Om.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectByProperty(e,n);if(s!==void 0)return s}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let o=0,s=i.length;o<s;o++)i[o].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(P0,e,lCe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(P0,cCe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const i=this.children;for(let o=0,s=i.length;o<s;o++)i[o].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function o(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];o(e.shapes,d)}else o(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(o(e.materials,this.material[l]));i.material=a}else i.material=o(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(o(e.animations,l))}}if(n){const a=s(e.geometries),l=s(e.materials),c=s(e.textures),u=s(e.images),d=s(e.shapes),f=s(e.skeletons),h=s(e.animations),g=s(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),f.length>0&&(r.skeletons=f),h.length>0&&(r.animations=h),g.length>0&&(r.nodes=g)}return r.object=i,r;function s(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}fo.DEFAULT_UP=new Ae(0,1,0);fo.DEFAULT_MATRIX_AUTO_UPDATE=!0;fo.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ka=new Ae,Yc=new Ae,eD=new Ae,Qc=new Ae,Rm=new Ae,Dm=new Ae,k6=new Ae,tD=new Ae,nD=new Ae,rD=new Ae;class Jl{constructor(e=new Ae,n=new Ae,r=new Ae){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),Ka.subVectors(e,n),i.cross(Ka);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(e,n,r,i,o){Ka.subVectors(i,n),Yc.subVectors(r,n),eD.subVectors(e,n);const s=Ka.dot(Ka),a=Ka.dot(Yc),l=Ka.dot(eD),c=Yc.dot(Yc),u=Yc.dot(eD),d=s*c-a*a;if(d===0)return o.set(0,0,0),null;const f=1/d,h=(c*l-a*u)*f,g=(s*u-a*l)*f;return o.set(1-h-g,g,h)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Qc)===null?!1:Qc.x>=0&&Qc.y>=0&&Qc.x+Qc.y<=1}static getInterpolation(e,n,r,i,o,s,a,l){return this.getBarycoord(e,n,r,i,Qc)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(o,Qc.x),l.addScaledVector(s,Qc.y),l.addScaledVector(a,Qc.z),l)}static isFrontFacing(e,n,r,i){return Ka.subVectors(r,n),Yc.subVectors(e,n),Ka.cross(Yc).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ka.subVectors(this.c,this.b),Yc.subVectors(this.a,this.b),Ka.cross(Yc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Jl.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Jl.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,o){return Jl.getInterpolation(e,this.a,this.b,this.c,n,r,i,o)}containsPoint(e){return Jl.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Jl.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,o=this.c;let s,a;Rm.subVectors(i,r),Dm.subVectors(o,r),tD.subVectors(e,r);const l=Rm.dot(tD),c=Dm.dot(tD);if(l<=0&&c<=0)return n.copy(r);nD.subVectors(e,i);const u=Rm.dot(nD),d=Dm.dot(nD);if(u>=0&&d<=u)return n.copy(i);const f=l*d-u*c;if(f<=0&&l>=0&&u<=0)return s=l/(l-u),n.copy(r).addScaledVector(Rm,s);rD.subVectors(e,o);const h=Rm.dot(rD),g=Dm.dot(rD);if(g>=0&&h<=g)return n.copy(o);const p=h*c-l*g;if(p<=0&&c>=0&&g<=0)return a=c/(c-g),n.copy(r).addScaledVector(Dm,a);const m=u*g-h*d;if(m<=0&&d-u>=0&&h-g>=0)return k6.subVectors(o,i),a=(d-u)/(d-u+(h-g)),n.copy(i).addScaledVector(k6,a);const v=1/(m+p+f);return s=p*v,a=f*v,n.copy(r).addScaledVector(Rm,s).addScaledVector(Dm,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Wne={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},md={h:0,s:0,l:0},KS={h:0,s:0,l:0};function iD(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}let An=class{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Ul){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Cn.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=Cn.workingColorSpace){return this.r=e,this.g=n,this.b=r,Cn.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=Cn.workingColorSpace){if(e=XSe(e,1),n=Vo(n,0,1),r=Vo(r,0,1),n===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,s=2*r-o;this.r=iD(s,o,e+1/3),this.g=iD(s,o,e),this.b=iD(s,o,e-1/3)}return Cn.toWorkingColorSpace(this,i),this}setStyle(e,n=Ul){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const s=i[1],a=i[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,n);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,n);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=i[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,n);if(s===6)return this.setHex(parseInt(o,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Ul){const r=Wne[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Yg(e.r),this.g=Yg(e.g),this.b=Yg(e.b),this}copyLinearToSRGB(e){return this.r=HR(e.r),this.g=HR(e.g),this.b=HR(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ul){return Cn.fromWorkingColorSpace(eo.copy(this),e),Math.round(Vo(eo.r*255,0,255))*65536+Math.round(Vo(eo.g*255,0,255))*256+Math.round(Vo(eo.b*255,0,255))}getHexString(e=Ul){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Cn.workingColorSpace){Cn.fromWorkingColorSpace(eo.copy(this),n);const r=eo.r,i=eo.g,o=eo.b,s=Math.max(r,i,o),a=Math.min(r,i,o);let l,c;const u=(a+s)/2;if(a===s)l=0,c=0;else{const d=s-a;switch(c=u<=.5?d/(s+a):d/(2-s-a),s){case r:l=(i-o)/d+(i<o?6:0);break;case i:l=(o-r)/d+2;break;case o:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=Cn.workingColorSpace){return Cn.fromWorkingColorSpace(eo.copy(this),n),e.r=eo.r,e.g=eo.g,e.b=eo.b,e}getStyle(e=Ul){Cn.fromWorkingColorSpace(eo.copy(this),e);const n=eo.r,r=eo.g,i=eo.b;return e!==Ul?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(md),this.setHSL(md.h+e,md.s+n,md.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(md),e.getHSL(KS);const r=WR(md.h,KS.h,n),i=WR(md.s,KS.s,n),o=WR(md.l,KS.l,n);return this.setHSL(r,i,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,o=e.elements;return this.r=o[0]*n+o[3]*r+o[6]*i,this.g=o[1]*n+o[4]*r+o[7]*i,this.b=o[2]*n+o[5]*r+o[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const eo=new An;An.NAMES=Wne;let dCe=0;class DM extends Iy{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:dCe++}),this.uuid=p_(),this.name="",this.type="Material",this.blending=Xg,this.side=mf,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=p$,this.blendDst=m$,this.blendEquation=Sh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new An(0,0,0),this.blendAlpha=0,this.depthFunc=PT,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=h6,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Cm,this.stencilZFail=Cm,this.stencilZPass=Cm,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Xg&&(r.blending=this.blending),this.side!==mf&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==p$&&(r.blendSrc=this.blendSrc),this.blendDst!==m$&&(r.blendDst=this.blendDst),this.blendEquation!==Sh&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==PT&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==h6&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Cm&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Cm&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Cm&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(o){const s=[];for(const a in o){const l=o[a];delete l.metadata,s.push(l)}return s}if(n){const o=i(e.textures),s=i(e.images);o.length>0&&(r.textures=o),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let o=0;o!==i;++o)r[o]=n[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}onBeforeRender(){console.warn("Material: onBeforeRender() has been removed.")}}class v_ extends DM{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new An(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Pu,this.combine=Tne,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const zr=new Ae,YS=new fn;class hc{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=p6,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=pu,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return zb("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)YS.fromBufferAttribute(this,n),YS.applyMatrix3(e),this.setXY(n,YS.x,YS.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)zr.fromBufferAttribute(this,n),zr.applyMatrix3(e),this.setXYZ(n,zr.x,zr.y,zr.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)zr.fromBufferAttribute(this,n),zr.applyMatrix4(e),this.setXYZ(n,zr.x,zr.y,zr.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)zr.fromBufferAttribute(this,n),zr.applyNormalMatrix(e),this.setXYZ(n,zr.x,zr.y,zr.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)zr.fromBufferAttribute(this,n),zr.transformDirection(e),this.setXYZ(n,zr.x,zr.y,zr.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=I0(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Uo(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=I0(n,this.array)),n}setX(e,n){return this.normalized&&(n=Uo(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=I0(n,this.array)),n}setY(e,n){return this.normalized&&(n=Uo(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=I0(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Uo(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=I0(n,this.array)),n}setW(e,n){return this.normalized&&(n=Uo(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Uo(n,this.array),r=Uo(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Uo(n,this.array),r=Uo(r,this.array),i=Uo(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,o){return e*=this.itemSize,this.normalized&&(n=Uo(n,this.array),r=Uo(r,this.array),i=Uo(i,this.array),o=Uo(o,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==p6&&(e.usage=this.usage),e}}class Vne extends hc{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class Hne extends hc{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class pc extends hc{constructor(e,n,r){super(new Float32Array(e),n,r)}}let fCe=0;const Js=new Nr,oD=new fo,Pm=new Ae,vs=new g_,N0=new g_,xi=new Ae;class Df extends Iy{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:fCe++}),this.uuid=p_(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Bne(e)?Hne:Vne)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new Wt().getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Js.makeRotationFromQuaternion(e),this.applyMatrix4(Js),this}rotateX(e){return Js.makeRotationX(e),this.applyMatrix4(Js),this}rotateY(e){return Js.makeRotationY(e),this.applyMatrix4(Js),this}rotateZ(e){return Js.makeRotationZ(e),this.applyMatrix4(Js),this}translate(e,n,r){return Js.makeTranslation(e,n,r),this.applyMatrix4(Js),this}scale(e,n,r){return Js.makeScale(e,n,r),this.applyMatrix4(Js),this}lookAt(e){return oD.lookAt(e),oD.updateMatrix(),this.applyMatrix4(oD.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Pm).negate(),this.translate(Pm.x,Pm.y,Pm.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const o=e[r];n.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new pc(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new g_);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Ae(-1/0,-1/0,-1/0),new Ae(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const o=n[r];vs.setFromBufferAttribute(o),this.morphTargetsRelative?(xi.addVectors(this.boundingBox.min,vs.min),this.boundingBox.expandByPoint(xi),xi.addVectors(this.boundingBox.max,vs.max),this.boundingBox.expandByPoint(xi)):(this.boundingBox.expandByPoint(vs.min),this.boundingBox.expandByPoint(vs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new JU);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Ae,1/0);return}if(e){const r=this.boundingSphere.center;if(vs.setFromBufferAttribute(e),n)for(let o=0,s=n.length;o<s;o++){const a=n[o];N0.setFromBufferAttribute(a),this.morphTargetsRelative?(xi.addVectors(vs.min,N0.min),vs.expandByPoint(xi),xi.addVectors(vs.max,N0.max),vs.expandByPoint(xi)):(vs.expandByPoint(N0.min),vs.expandByPoint(N0.max))}vs.getCenter(r);let i=0;for(let o=0,s=e.count;o<s;o++)xi.fromBufferAttribute(e,o),i=Math.max(i,r.distanceToSquared(xi));if(n)for(let o=0,s=n.length;o<s;o++){const a=n[o],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)xi.fromBufferAttribute(a,c),l&&(Pm.fromBufferAttribute(e,c),xi.add(Pm)),i=Math.max(i,r.distanceToSquared(xi))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,i=n.normal,o=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new hc(new Float32Array(4*r.count),4));const s=this.getAttribute("tangent"),a=[],l=[];for(let C=0;C<r.count;C++)a[C]=new Ae,l[C]=new Ae;const c=new Ae,u=new Ae,d=new Ae,f=new fn,h=new fn,g=new fn,p=new Ae,m=new Ae;function v(C,T,E){c.fromBufferAttribute(r,C),u.fromBufferAttribute(r,T),d.fromBufferAttribute(r,E),f.fromBufferAttribute(o,C),h.fromBufferAttribute(o,T),g.fromBufferAttribute(o,E),u.sub(c),d.sub(c),h.sub(f),g.sub(f);const k=1/(h.x*g.y-g.x*h.y);isFinite(k)&&(p.copy(u).multiplyScalar(g.y).addScaledVector(d,-h.y).multiplyScalar(k),m.copy(d).multiplyScalar(h.x).addScaledVector(u,-g.x).multiplyScalar(k),a[C].add(p),a[T].add(p),a[E].add(p),l[C].add(m),l[T].add(m),l[E].add(m))}let _=this.groups;_.length===0&&(_=[{start:0,count:e.count}]);for(let C=0,T=_.length;C<T;++C){const E=_[C],k=E.start,A=E.count;for(let O=k,D=k+A;O<D;O+=3)v(e.getX(O+0),e.getX(O+1),e.getX(O+2))}const w=new Ae,y=new Ae,b=new Ae,x=new Ae;function S(C){b.fromBufferAttribute(i,C),x.copy(b);const T=a[C];w.copy(T),w.sub(b.multiplyScalar(b.dot(T))).normalize(),y.crossVectors(x,T);const k=y.dot(l[C])<0?-1:1;s.setXYZW(C,w.x,w.y,w.z,k)}for(let C=0,T=_.length;C<T;++C){const E=_[C],k=E.start,A=E.count;for(let O=k,D=k+A;O<D;O+=3)S(e.getX(O+0)),S(e.getX(O+1)),S(e.getX(O+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new hc(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let f=0,h=r.count;f<h;f++)r.setXYZ(f,0,0,0);const i=new Ae,o=new Ae,s=new Ae,a=new Ae,l=new Ae,c=new Ae,u=new Ae,d=new Ae;if(e)for(let f=0,h=e.count;f<h;f+=3){const g=e.getX(f+0),p=e.getX(f+1),m=e.getX(f+2);i.fromBufferAttribute(n,g),o.fromBufferAttribute(n,p),s.fromBufferAttribute(n,m),u.subVectors(s,o),d.subVectors(i,o),u.cross(d),a.fromBufferAttribute(r,g),l.fromBufferAttribute(r,p),c.fromBufferAttribute(r,m),a.add(u),l.add(u),c.add(u),r.setXYZ(g,a.x,a.y,a.z),r.setXYZ(p,l.x,l.y,l.z),r.setXYZ(m,c.x,c.y,c.z)}else for(let f=0,h=n.count;f<h;f+=3)i.fromBufferAttribute(n,f+0),o.fromBufferAttribute(n,f+1),s.fromBufferAttribute(n,f+2),u.subVectors(s,o),d.subVectors(i,o),u.cross(d),r.setXYZ(f+0,u.x,u.y,u.z),r.setXYZ(f+1,u.x,u.y,u.z),r.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)xi.fromBufferAttribute(e,n),xi.normalize(),e.setXYZ(n,xi.x,xi.y,xi.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,f=new c.constructor(l.length*u);let h=0,g=0;for(let p=0,m=l.length;p<m;p++){a.isInterleavedBufferAttribute?h=l[p]*a.data.stride+a.offset:h=l[p]*u;for(let v=0;v<u;v++)f[g++]=c[h++]}return new hc(f,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Df,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);n.setAttribute(a,c)}const o=this.morphAttributes;for(const a in o){const l=[],c=o[a];for(let u=0,d=c.length;u<d;u++){const f=c[u],h=e(f,r);l.push(h)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,l=s.length;a<l;a++){const c=s[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let o=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,f=c.length;d<f;d++){const h=c[d];u.push(h.toJSON(e.data))}u.length>0&&(i[l]=u,o=!0)}o&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(n))}const o=e.morphAttributes;for(const c in o){const u=[],d=o[c];for(let f=0,h=d.length;f<h;f++)u.push(d[f].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let c=0,u=s.length;c<u;c++){const d=s[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const A6=new Nr,eh=new iCe,QS=new JU,M6=new Ae,Nm=new Ae,$m=new Ae,Lm=new Ae,sD=new Ae,ZS=new Ae,JS=new fn,eC=new fn,tC=new fn,I6=new Ae,O6=new Ae,R6=new Ae,nC=new Ae,rC=new Ae;class ba extends fo{constructor(e=new Df,n=new v_){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,o=r.morphAttributes.position,s=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(o&&a){ZS.set(0,0,0);for(let l=0,c=o.length;l<c;l++){const u=a[l],d=o[l];u!==0&&(sD.fromBufferAttribute(d,e),s?ZS.addScaledVector(sD,u):ZS.addScaledVector(sD.sub(n),u))}n.add(ZS)}return n}raycast(e,n){const r=this.geometry,i=this.material,o=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),QS.copy(r.boundingSphere),QS.applyMatrix4(o),eh.copy(e.ray).recast(e.near),!(QS.containsPoint(eh.origin)===!1&&(eh.intersectSphere(QS,M6)===null||eh.origin.distanceToSquared(M6)>(e.far-e.near)**2))&&(A6.copy(o).invert(),eh.copy(e.ray).applyMatrix4(A6),!(r.boundingBox!==null&&eh.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,eh)))}_computeIntersections(e,n,r){let i;const o=this.geometry,s=this.material,a=o.index,l=o.attributes.position,c=o.attributes.uv,u=o.attributes.uv1,d=o.attributes.normal,f=o.groups,h=o.drawRange;if(a!==null)if(Array.isArray(s))for(let g=0,p=f.length;g<p;g++){const m=f[g],v=s[m.materialIndex],_=Math.max(m.start,h.start),w=Math.min(a.count,Math.min(m.start+m.count,h.start+h.count));for(let y=_,b=w;y<b;y+=3){const x=a.getX(y),S=a.getX(y+1),C=a.getX(y+2);i=iC(this,v,e,r,c,u,d,x,S,C),i&&(i.faceIndex=Math.floor(y/3),i.face.materialIndex=m.materialIndex,n.push(i))}}else{const g=Math.max(0,h.start),p=Math.min(a.count,h.start+h.count);for(let m=g,v=p;m<v;m+=3){const _=a.getX(m),w=a.getX(m+1),y=a.getX(m+2);i=iC(this,s,e,r,c,u,d,_,w,y),i&&(i.faceIndex=Math.floor(m/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(s))for(let g=0,p=f.length;g<p;g++){const m=f[g],v=s[m.materialIndex],_=Math.max(m.start,h.start),w=Math.min(l.count,Math.min(m.start+m.count,h.start+h.count));for(let y=_,b=w;y<b;y+=3){const x=y,S=y+1,C=y+2;i=iC(this,v,e,r,c,u,d,x,S,C),i&&(i.faceIndex=Math.floor(y/3),i.face.materialIndex=m.materialIndex,n.push(i))}}else{const g=Math.max(0,h.start),p=Math.min(l.count,h.start+h.count);for(let m=g,v=p;m<v;m+=3){const _=m,w=m+1,y=m+2;i=iC(this,s,e,r,c,u,d,_,w,y),i&&(i.faceIndex=Math.floor(m/3),n.push(i))}}}}function hCe(t,e,n,r,i,o,s,a){let l;if(e.side===rs?l=r.intersectTriangle(s,o,i,!0,a):l=r.intersectTriangle(i,o,s,e.side===mf,a),l===null)return null;rC.copy(a),rC.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(rC);return c<n.near||c>n.far?null:{distance:c,point:rC.clone(),object:t}}function iC(t,e,n,r,i,o,s,a,l,c){t.getVertexPosition(a,Nm),t.getVertexPosition(l,$m),t.getVertexPosition(c,Lm);const u=hCe(t,e,n,r,Nm,$m,Lm,nC);if(u){i&&(JS.fromBufferAttribute(i,a),eC.fromBufferAttribute(i,l),tC.fromBufferAttribute(i,c),u.uv=Jl.getInterpolation(nC,Nm,$m,Lm,JS,eC,tC,new fn)),o&&(JS.fromBufferAttribute(o,a),eC.fromBufferAttribute(o,l),tC.fromBufferAttribute(o,c),u.uv1=Jl.getInterpolation(nC,Nm,$m,Lm,JS,eC,tC,new fn)),s&&(I6.fromBufferAttribute(s,a),O6.fromBufferAttribute(s,l),R6.fromBufferAttribute(s,c),u.normal=Jl.getInterpolation(nC,Nm,$m,Lm,I6,O6,R6,new Ae),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:l,c,normal:new Ae,materialIndex:0};Jl.getNormal(Nm,$m,Lm,d.normal),u.face=d}return u}class y_ extends Df{constructor(e=1,n=1,r=1,i=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:o,depthSegments:s};const a=this;i=Math.floor(i),o=Math.floor(o),s=Math.floor(s);const l=[],c=[],u=[],d=[];let f=0,h=0;g("z","y","x",-1,-1,r,n,e,s,o,0),g("z","y","x",1,-1,r,n,-e,s,o,1),g("x","z","y",1,1,e,r,n,i,s,2),g("x","z","y",1,-1,e,r,-n,i,s,3),g("x","y","z",1,-1,e,n,r,i,o,4),g("x","y","z",-1,-1,e,n,-r,i,o,5),this.setIndex(l),this.setAttribute("position",new pc(c,3)),this.setAttribute("normal",new pc(u,3)),this.setAttribute("uv",new pc(d,2));function g(p,m,v,_,w,y,b,x,S,C,T){const E=y/S,k=b/C,A=y/2,O=b/2,D=x/2,P=S+1,N=C+1;let U=0,L=0;const V=new Ae;for(let G=0;G<N;G++){const Q=G*k-O;for(let te=0;te<P;te++){const ne=te*E-A;V[p]=ne*_,V[m]=Q*w,V[v]=D,c.push(V.x,V.y,V.z),V[p]=0,V[m]=0,V[v]=x>0?1:-1,u.push(V.x,V.y,V.z),d.push(te/S),d.push(1-G/C),U+=1}}for(let G=0;G<C;G++)for(let Q=0;Q<S;Q++){const te=f+Q+P*G,ne=f+Q+P*(G+1),ee=f+(Q+1)+P*(G+1),re=f+(Q+1)+P*G;l.push(te,ne,re),l.push(ne,ee,re),L+=6}a.addGroup(h,L,T),h+=L,f+=U}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new y_(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Ev(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function xo(t){const e={};for(let n=0;n<t.length;n++){const r=Ev(t[n]);for(const i in r)e[i]=r[i]}return e}function pCe(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function Gne(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Cn.workingColorSpace}const mCe={clone:Ev,merge:xo};var gCe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,vCe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class gf extends DM{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=gCe,this.fragmentShader=vCe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ev(e.uniforms),this.uniformsGroups=pCe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?n.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?n.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?n.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?n.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?n.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?n.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?n.uniforms[i]={type:"m4",value:s.toArray()}:n.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class qne extends fo{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Nr,this.projectionMatrix=new Nr,this.projectionMatrixInverse=new Nr,this.coordinateSystem=mu}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const gd=new Ae,D6=new fn,P6=new fn;class Ho extends qne{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=G$*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(jR*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return G$*2*Math.atan(Math.tan(jR*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){gd.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(gd.x,gd.y).multiplyScalar(-e/gd.z),gd.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(gd.x,gd.y).multiplyScalar(-e/gd.z)}getViewSize(e,n){return this.getViewBounds(e,D6,P6),n.subVectors(P6,D6)}setViewOffset(e,n,r,i,o,s){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(jR*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,o=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,c=s.fullHeight;o+=s.offsetX*i/l,n-=s.offsetY*r/c,i*=s.width/l,r*=s.height/c}const a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Fm=-90,Bm=1;class yCe extends fo{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Ho(Fm,Bm,e,n);i.layers=this.layers,this.add(i);const o=new Ho(Fm,Bm,e,n);o.layers=this.layers,this.add(o);const s=new Ho(Fm,Bm,e,n);s.layers=this.layers,this.add(s);const a=new Ho(Fm,Bm,e,n);a.layers=this.layers,this.add(a);const l=new Ho(Fm,Bm,e,n);l.layers=this.layers,this.add(l);const c=new Ho(Fm,Bm,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,o,s,a,l]=n;for(const c of n)this.remove(c);if(e===mu)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===FT)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,s,a,l,c,u]=this.children,d=e.getRenderTarget(),f=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const p=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,o),e.setRenderTarget(r,1,i),e.render(n,s),e.setRenderTarget(r,2,i),e.render(n,a),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,c),r.texture.generateMipmaps=p,e.setRenderTarget(r,5,i),e.render(n,u),e.setRenderTarget(d,f,h),e.xr.enabled=g,r.texture.needsPMREMUpdate=!0}}class Xne extends is{constructor(e,n,r,i,o,s,a,l,c,u){e=e!==void 0?e:[],n=n!==void 0?n:wv,super(e,n,r,i,o,s,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class bCe extends Sp{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new Xne(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:ll}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new y_(5,5,5),o=new gf({name:"CubemapFromEquirect",uniforms:Ev(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:rs,blending:tf});o.uniforms.tEquirect.value=n;const s=new ba(i,o),a=n.minFilter;return n.minFilter===Lh&&(n.minFilter=ll),new yCe(1,10,this).update(e,s),n.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,n,r,i){const o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(n,r,i);e.setRenderTarget(o)}}const aD=new Ae,xCe=new Ae,wCe=new Wt;class hh{constructor(e=new Ae(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=aD.subVectors(r,n).cross(xCe.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(aD),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:n.copy(e.start).addScaledVector(r,o)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||wCe.getNormalMatrix(e),i=this.coplanarPoint(aD).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const th=new JU,oC=new Ae;class ez{constructor(e=new hh,n=new hh,r=new hh,i=new hh,o=new hh,s=new hh){this.planes=[e,n,r,i,o,s]}set(e,n,r,i,o,s){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(o),a[5].copy(s),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=mu){const r=this.planes,i=e.elements,o=i[0],s=i[1],a=i[2],l=i[3],c=i[4],u=i[5],d=i[6],f=i[7],h=i[8],g=i[9],p=i[10],m=i[11],v=i[12],_=i[13],w=i[14],y=i[15];if(r[0].setComponents(l-o,f-c,m-h,y-v).normalize(),r[1].setComponents(l+o,f+c,m+h,y+v).normalize(),r[2].setComponents(l+s,f+u,m+g,y+_).normalize(),r[3].setComponents(l-s,f-u,m-g,y-_).normalize(),r[4].setComponents(l-a,f-d,m-p,y-w).normalize(),n===mu)r[5].setComponents(l+a,f+d,m+p,y+w).normalize();else if(n===FT)r[5].setComponents(a,d,p,w).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),th.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),th.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(th)}intersectsSprite(e){return th.center.set(0,0,0),th.radius=.7071067811865476,th.applyMatrix4(e.matrixWorld),this.intersectsSphere(th)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let o=0;o<6;o++)if(n[o].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(oC.x=i.normal.x>0?e.max.x:e.min.x,oC.y=i.normal.y>0?e.max.y:e.min.y,oC.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(oC)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Kne(){let t=null,e=!1,n=null,r=null;function i(o,s){n(o,s),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){n=o},setContext:function(o){t=o}}}function _Ce(t){const e=new WeakMap;function n(a,l){const c=a.array,u=a.usage,d=c.byteLength,f=t.createBuffer();t.bindBuffer(l,f),t.bufferData(l,c,u),a.onUploadCallback();let h;if(c instanceof Float32Array)h=t.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?h=t.HALF_FLOAT:h=t.UNSIGNED_SHORT;else if(c instanceof Int16Array)h=t.SHORT;else if(c instanceof Uint32Array)h=t.UNSIGNED_INT;else if(c instanceof Int32Array)h=t.INT;else if(c instanceof Int8Array)h=t.BYTE;else if(c instanceof Uint8Array)h=t.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)h=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:f,type:h,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:d}}function r(a,l,c){const u=l.array,d=l._updateRange,f=l.updateRanges;if(t.bindBuffer(c,a),d.count===-1&&f.length===0&&t.bufferSubData(c,0,u),f.length!==0){for(let h=0,g=f.length;h<g;h++){const p=f[h];t.bufferSubData(c,p.start*u.BYTES_PER_ELEMENT,u,p.start,p.count)}l.clearUpdateRanges()}d.count!==-1&&(t.bufferSubData(c,d.offset*u.BYTES_PER_ELEMENT,u,d.offset,d.count),d.count=-1),l.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(t.deleteBuffer(l.buffer),e.delete(a))}function s(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,n(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(c.buffer,a,l),c.version=a.version}}return{get:i,remove:o,update:s}}class PM extends Df{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const o=e/2,s=n/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,d=e/a,f=n/l,h=[],g=[],p=[],m=[];for(let v=0;v<u;v++){const _=v*f-s;for(let w=0;w<c;w++){const y=w*d-o;g.push(y,-_,0),p.push(0,0,1),m.push(w/a),m.push(1-v/l)}}for(let v=0;v<l;v++)for(let _=0;_<a;_++){const w=_+c*v,y=_+c*(v+1),b=_+1+c*(v+1),x=_+1+c*v;h.push(w,y,x),h.push(y,b,x)}this.setIndex(h),this.setAttribute("position",new pc(g,3)),this.setAttribute("normal",new pc(p,3)),this.setAttribute("uv",new pc(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new PM(e.width,e.height,e.widthSegments,e.heightSegments)}}var SCe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,CCe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,ECe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,TCe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,kCe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,ACe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,MCe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,ICe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,OCe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,RCe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,DCe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,PCe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,NCe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,$Ce=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,LCe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,FCe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,BCe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,UCe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,zCe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,jCe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,WCe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,VCe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,HCe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,GCe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,qCe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,XCe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,KCe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,YCe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,QCe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,ZCe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,JCe="gl_FragColor = linearToOutputTexel( gl_FragColor );",eEe=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,tEe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,nEe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,rEe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,iEe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,oEe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,sEe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,aEe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,lEe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,cEe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,uEe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,dEe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,fEe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,hEe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,pEe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,mEe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,gEe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,vEe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,yEe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,bEe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,xEe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,wEe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,_Ee=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,SEe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,CEe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,EEe=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,TEe=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,kEe=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,AEe=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,MEe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,IEe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,OEe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,REe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,DEe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,PEe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,NEe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,$Ee=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,LEe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,FEe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,BEe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,UEe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,zEe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,jEe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,WEe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,VEe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,HEe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,GEe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,qEe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,XEe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,KEe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,YEe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,QEe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,ZEe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,JEe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,eTe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,tTe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,nTe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,rTe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,iTe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,oTe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,sTe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,aTe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,lTe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,cTe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,uTe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,dTe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,fTe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,hTe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,pTe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,mTe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,gTe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,vTe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,yTe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,bTe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,xTe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,wTe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const _Te=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,STe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,CTe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,ETe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,TTe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,kTe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ATe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,MTe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,ITe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,OTe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,RTe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,DTe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,PTe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,NTe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,$Te=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,LTe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,FTe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,BTe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UTe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,zTe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jTe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,WTe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,VTe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,HTe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,GTe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,qTe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,XTe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,KTe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YTe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,QTe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ZTe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,JTe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,eke=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,tke=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,jt={alphahash_fragment:SCe,alphahash_pars_fragment:CCe,alphamap_fragment:ECe,alphamap_pars_fragment:TCe,alphatest_fragment:kCe,alphatest_pars_fragment:ACe,aomap_fragment:MCe,aomap_pars_fragment:ICe,batching_pars_vertex:OCe,batching_vertex:RCe,begin_vertex:DCe,beginnormal_vertex:PCe,bsdfs:NCe,iridescence_fragment:$Ce,bumpmap_pars_fragment:LCe,clipping_planes_fragment:FCe,clipping_planes_pars_fragment:BCe,clipping_planes_pars_vertex:UCe,clipping_planes_vertex:zCe,color_fragment:jCe,color_pars_fragment:WCe,color_pars_vertex:VCe,color_vertex:HCe,common:GCe,cube_uv_reflection_fragment:qCe,defaultnormal_vertex:XCe,displacementmap_pars_vertex:KCe,displacementmap_vertex:YCe,emissivemap_fragment:QCe,emissivemap_pars_fragment:ZCe,colorspace_fragment:JCe,colorspace_pars_fragment:eEe,envmap_fragment:tEe,envmap_common_pars_fragment:nEe,envmap_pars_fragment:rEe,envmap_pars_vertex:iEe,envmap_physical_pars_fragment:mEe,envmap_vertex:oEe,fog_vertex:sEe,fog_pars_vertex:aEe,fog_fragment:lEe,fog_pars_fragment:cEe,gradientmap_pars_fragment:uEe,lightmap_pars_fragment:dEe,lights_lambert_fragment:fEe,lights_lambert_pars_fragment:hEe,lights_pars_begin:pEe,lights_toon_fragment:gEe,lights_toon_pars_fragment:vEe,lights_phong_fragment:yEe,lights_phong_pars_fragment:bEe,lights_physical_fragment:xEe,lights_physical_pars_fragment:wEe,lights_fragment_begin:_Ee,lights_fragment_maps:SEe,lights_fragment_end:CEe,logdepthbuf_fragment:EEe,logdepthbuf_pars_fragment:TEe,logdepthbuf_pars_vertex:kEe,logdepthbuf_vertex:AEe,map_fragment:MEe,map_pars_fragment:IEe,map_particle_fragment:OEe,map_particle_pars_fragment:REe,metalnessmap_fragment:DEe,metalnessmap_pars_fragment:PEe,morphinstance_vertex:NEe,morphcolor_vertex:$Ee,morphnormal_vertex:LEe,morphtarget_pars_vertex:FEe,morphtarget_vertex:BEe,normal_fragment_begin:UEe,normal_fragment_maps:zEe,normal_pars_fragment:jEe,normal_pars_vertex:WEe,normal_vertex:VEe,normalmap_pars_fragment:HEe,clearcoat_normal_fragment_begin:GEe,clearcoat_normal_fragment_maps:qEe,clearcoat_pars_fragment:XEe,iridescence_pars_fragment:KEe,opaque_fragment:YEe,packing:QEe,premultiplied_alpha_fragment:ZEe,project_vertex:JEe,dithering_fragment:eTe,dithering_pars_fragment:tTe,roughnessmap_fragment:nTe,roughnessmap_pars_fragment:rTe,shadowmap_pars_fragment:iTe,shadowmap_pars_vertex:oTe,shadowmap_vertex:sTe,shadowmask_pars_fragment:aTe,skinbase_vertex:lTe,skinning_pars_vertex:cTe,skinning_vertex:uTe,skinnormal_vertex:dTe,specularmap_fragment:fTe,specularmap_pars_fragment:hTe,tonemapping_fragment:pTe,tonemapping_pars_fragment:mTe,transmission_fragment:gTe,transmission_pars_fragment:vTe,uv_pars_fragment:yTe,uv_pars_vertex:bTe,uv_vertex:xTe,worldpos_vertex:wTe,background_vert:_Te,background_frag:STe,backgroundCube_vert:CTe,backgroundCube_frag:ETe,cube_vert:TTe,cube_frag:kTe,depth_vert:ATe,depth_frag:MTe,distanceRGBA_vert:ITe,distanceRGBA_frag:OTe,equirect_vert:RTe,equirect_frag:DTe,linedashed_vert:PTe,linedashed_frag:NTe,meshbasic_vert:$Te,meshbasic_frag:LTe,meshlambert_vert:FTe,meshlambert_frag:BTe,meshmatcap_vert:UTe,meshmatcap_frag:zTe,meshnormal_vert:jTe,meshnormal_frag:WTe,meshphong_vert:VTe,meshphong_frag:HTe,meshphysical_vert:GTe,meshphysical_frag:qTe,meshtoon_vert:XTe,meshtoon_frag:KTe,points_vert:YTe,points_frag:QTe,shadow_vert:ZTe,shadow_frag:JTe,sprite_vert:eke,sprite_frag:tke},it={common:{diffuse:{value:new An(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Wt},alphaMap:{value:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Wt}},envmap:{envMap:{value:null},envMapRotation:{value:new Wt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Wt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Wt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Wt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Wt},normalScale:{value:new fn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Wt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Wt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Wt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Wt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new An(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new An(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0},uvTransform:{value:new Wt}},sprite:{diffuse:{value:new An(16777215)},opacity:{value:1},center:{value:new fn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Wt},alphaMap:{value:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0}}},Wl={basic:{uniforms:xo([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.fog]),vertexShader:jt.meshbasic_vert,fragmentShader:jt.meshbasic_frag},lambert:{uniforms:xo([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.fog,it.lights,{emissive:{value:new An(0)}}]),vertexShader:jt.meshlambert_vert,fragmentShader:jt.meshlambert_frag},phong:{uniforms:xo([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.fog,it.lights,{emissive:{value:new An(0)},specular:{value:new An(1118481)},shininess:{value:30}}]),vertexShader:jt.meshphong_vert,fragmentShader:jt.meshphong_frag},standard:{uniforms:xo([it.common,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.roughnessmap,it.metalnessmap,it.fog,it.lights,{emissive:{value:new An(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:jt.meshphysical_vert,fragmentShader:jt.meshphysical_frag},toon:{uniforms:xo([it.common,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.gradientmap,it.fog,it.lights,{emissive:{value:new An(0)}}]),vertexShader:jt.meshtoon_vert,fragmentShader:jt.meshtoon_frag},matcap:{uniforms:xo([it.common,it.bumpmap,it.normalmap,it.displacementmap,it.fog,{matcap:{value:null}}]),vertexShader:jt.meshmatcap_vert,fragmentShader:jt.meshmatcap_frag},points:{uniforms:xo([it.points,it.fog]),vertexShader:jt.points_vert,fragmentShader:jt.points_frag},dashed:{uniforms:xo([it.common,it.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:jt.linedashed_vert,fragmentShader:jt.linedashed_frag},depth:{uniforms:xo([it.common,it.displacementmap]),vertexShader:jt.depth_vert,fragmentShader:jt.depth_frag},normal:{uniforms:xo([it.common,it.bumpmap,it.normalmap,it.displacementmap,{opacity:{value:1}}]),vertexShader:jt.meshnormal_vert,fragmentShader:jt.meshnormal_frag},sprite:{uniforms:xo([it.sprite,it.fog]),vertexShader:jt.sprite_vert,fragmentShader:jt.sprite_frag},background:{uniforms:{uvTransform:{value:new Wt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:jt.background_vert,fragmentShader:jt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Wt}},vertexShader:jt.backgroundCube_vert,fragmentShader:jt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:jt.cube_vert,fragmentShader:jt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:jt.equirect_vert,fragmentShader:jt.equirect_frag},distanceRGBA:{uniforms:xo([it.common,it.displacementmap,{referencePosition:{value:new Ae},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:jt.distanceRGBA_vert,fragmentShader:jt.distanceRGBA_frag},shadow:{uniforms:xo([it.lights,it.fog,{color:{value:new An(0)},opacity:{value:1}}]),vertexShader:jt.shadow_vert,fragmentShader:jt.shadow_frag}};Wl.physical={uniforms:xo([Wl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Wt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Wt},clearcoatNormalScale:{value:new fn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Wt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Wt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Wt},sheen:{value:0},sheenColor:{value:new An(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Wt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Wt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Wt},transmissionSamplerSize:{value:new fn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Wt},attenuationDistance:{value:0},attenuationColor:{value:new An(0)},specularColor:{value:new An(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Wt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Wt},anisotropyVector:{value:new fn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Wt}}]),vertexShader:jt.meshphysical_vert,fragmentShader:jt.meshphysical_frag};const sC={r:0,b:0,g:0},nh=new Pu,nke=new Nr;function rke(t,e,n,r,i,o,s){const a=new An(0);let l=o===!0?0:1,c,u,d=null,f=0,h=null;function g(_){let w=_.isScene===!0?_.background:null;return w&&w.isTexture&&(w=(_.backgroundBlurriness>0?n:e).get(w)),w}function p(_){let w=!1;const y=g(_);y===null?v(a,l):y&&y.isColor&&(v(y,1),w=!0);const b=t.xr.getEnvironmentBlendMode();b==="additive"?r.buffers.color.setClear(0,0,0,1,s):b==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,s),(t.autoClear||w)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function m(_,w){const y=g(w);y&&(y.isCubeTexture||y.mapping===OM)?(u===void 0&&(u=new ba(new y_(1,1,1),new gf({name:"BackgroundCubeMaterial",uniforms:Ev(Wl.backgroundCube.uniforms),vertexShader:Wl.backgroundCube.vertexShader,fragmentShader:Wl.backgroundCube.fragmentShader,side:rs,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(b,x,S){this.matrixWorld.copyPosition(S.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),nh.copy(w.backgroundRotation),nh.x*=-1,nh.y*=-1,nh.z*=-1,y.isCubeTexture&&y.isRenderTargetTexture===!1&&(nh.y*=-1,nh.z*=-1),u.material.uniforms.envMap.value=y,u.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=w.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(nke.makeRotationFromEuler(nh)),u.material.toneMapped=Cn.getTransfer(y.colorSpace)!==Qn,(d!==y||f!==y.version||h!==t.toneMapping)&&(u.material.needsUpdate=!0,d=y,f=y.version,h=t.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null)):y&&y.isTexture&&(c===void 0&&(c=new ba(new PM(2,2),new gf({name:"BackgroundMaterial",uniforms:Ev(Wl.background.uniforms),vertexShader:Wl.background.vertexShader,fragmentShader:Wl.background.fragmentShader,side:mf,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=y,c.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,c.material.toneMapped=Cn.getTransfer(y.colorSpace)!==Qn,y.matrixAutoUpdate===!0&&y.updateMatrix(),c.material.uniforms.uvTransform.value.copy(y.matrix),(d!==y||f!==y.version||h!==t.toneMapping)&&(c.material.needsUpdate=!0,d=y,f=y.version,h=t.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}function v(_,w){_.getRGB(sC,Gne(t)),r.buffers.color.setClear(sC.r,sC.g,sC.b,w,s)}return{getClearColor:function(){return a},setClearColor:function(_,w=1){a.set(_),l=w,v(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,v(a,l)},render:p,addToRenderList:m}}function ike(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r={},i=f(null);let o=i,s=!1;function a(E,k,A,O,D){let P=!1;const N=d(O,A,k);o!==N&&(o=N,c(o.object)),P=h(E,O,A,D),P&&g(E,O,A,D),D!==null&&e.update(D,t.ELEMENT_ARRAY_BUFFER),(P||s)&&(s=!1,y(E,k,A,O),D!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(D).buffer))}function l(){return t.createVertexArray()}function c(E){return t.bindVertexArray(E)}function u(E){return t.deleteVertexArray(E)}function d(E,k,A){const O=A.wireframe===!0;let D=r[E.id];D===void 0&&(D={},r[E.id]=D);let P=D[k.id];P===void 0&&(P={},D[k.id]=P);let N=P[O];return N===void 0&&(N=f(l()),P[O]=N),N}function f(E){const k=[],A=[],O=[];for(let D=0;D<n;D++)k[D]=0,A[D]=0,O[D]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:k,enabledAttributes:A,attributeDivisors:O,object:E,attributes:{},index:null}}function h(E,k,A,O){const D=o.attributes,P=k.attributes;let N=0;const U=A.getAttributes();for(const L in U)if(U[L].location>=0){const G=D[L];let Q=P[L];if(Q===void 0&&(L==="instanceMatrix"&&E.instanceMatrix&&(Q=E.instanceMatrix),L==="instanceColor"&&E.instanceColor&&(Q=E.instanceColor)),G===void 0||G.attribute!==Q||Q&&G.data!==Q.data)return!0;N++}return o.attributesNum!==N||o.index!==O}function g(E,k,A,O){const D={},P=k.attributes;let N=0;const U=A.getAttributes();for(const L in U)if(U[L].location>=0){let G=P[L];G===void 0&&(L==="instanceMatrix"&&E.instanceMatrix&&(G=E.instanceMatrix),L==="instanceColor"&&E.instanceColor&&(G=E.instanceColor));const Q={};Q.attribute=G,G&&G.data&&(Q.data=G.data),D[L]=Q,N++}o.attributes=D,o.attributesNum=N,o.index=O}function p(){const E=o.newAttributes;for(let k=0,A=E.length;k<A;k++)E[k]=0}function m(E){v(E,0)}function v(E,k){const A=o.newAttributes,O=o.enabledAttributes,D=o.attributeDivisors;A[E]=1,O[E]===0&&(t.enableVertexAttribArray(E),O[E]=1),D[E]!==k&&(t.vertexAttribDivisor(E,k),D[E]=k)}function _(){const E=o.newAttributes,k=o.enabledAttributes;for(let A=0,O=k.length;A<O;A++)k[A]!==E[A]&&(t.disableVertexAttribArray(A),k[A]=0)}function w(E,k,A,O,D,P,N){N===!0?t.vertexAttribIPointer(E,k,A,D,P):t.vertexAttribPointer(E,k,A,O,D,P)}function y(E,k,A,O){p();const D=O.attributes,P=A.getAttributes(),N=k.defaultAttributeValues;for(const U in P){const L=P[U];if(L.location>=0){let V=D[U];if(V===void 0&&(U==="instanceMatrix"&&E.instanceMatrix&&(V=E.instanceMatrix),U==="instanceColor"&&E.instanceColor&&(V=E.instanceColor)),V!==void 0){const G=V.normalized,Q=V.itemSize,te=e.get(V);if(te===void 0)continue;const ne=te.buffer,ee=te.type,re=te.bytesPerElement,se=ee===t.INT||ee===t.UNSIGNED_INT||V.gpuType===GU;if(V.isInterleavedBufferAttribute){const me=V.data,Me=me.stride,de=V.offset;if(me.isInstancedInterleavedBuffer){for(let Ce=0;Ce<L.locationSize;Ce++)v(L.location+Ce,me.meshPerAttribute);E.isInstancedMesh!==!0&&O._maxInstanceCount===void 0&&(O._maxInstanceCount=me.meshPerAttribute*me.count)}else for(let Ce=0;Ce<L.locationSize;Ce++)m(L.location+Ce);t.bindBuffer(t.ARRAY_BUFFER,ne);for(let Ce=0;Ce<L.locationSize;Ce++)w(L.location+Ce,Q/L.locationSize,ee,G,Me*re,(de+Q/L.locationSize*Ce)*re,se)}else{if(V.isInstancedBufferAttribute){for(let me=0;me<L.locationSize;me++)v(L.location+me,V.meshPerAttribute);E.isInstancedMesh!==!0&&O._maxInstanceCount===void 0&&(O._maxInstanceCount=V.meshPerAttribute*V.count)}else for(let me=0;me<L.locationSize;me++)m(L.location+me);t.bindBuffer(t.ARRAY_BUFFER,ne);for(let me=0;me<L.locationSize;me++)w(L.location+me,Q/L.locationSize,ee,G,Q*re,Q/L.locationSize*me*re,se)}}else if(N!==void 0){const G=N[U];if(G!==void 0)switch(G.length){case 2:t.vertexAttrib2fv(L.location,G);break;case 3:t.vertexAttrib3fv(L.location,G);break;case 4:t.vertexAttrib4fv(L.location,G);break;default:t.vertexAttrib1fv(L.location,G)}}}}_()}function b(){C();for(const E in r){const k=r[E];for(const A in k){const O=k[A];for(const D in O)u(O[D].object),delete O[D];delete k[A]}delete r[E]}}function x(E){if(r[E.id]===void 0)return;const k=r[E.id];for(const A in k){const O=k[A];for(const D in O)u(O[D].object),delete O[D];delete k[A]}delete r[E.id]}function S(E){for(const k in r){const A=r[k];if(A[E.id]===void 0)continue;const O=A[E.id];for(const D in O)u(O[D].object),delete O[D];delete A[E.id]}}function C(){T(),s=!0,o!==i&&(o=i,c(o.object))}function T(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:C,resetDefaultState:T,dispose:b,releaseStatesOfGeometry:x,releaseStatesOfProgram:S,initAttributes:p,enableAttribute:m,disableUnusedAttributes:_}}function oke(t,e,n){let r;function i(c){r=c}function o(c,u){t.drawArrays(r,c,u),n.update(u,r,1)}function s(c,u,d){d!==0&&(t.drawArraysInstanced(r,c,u,d),n.update(u,r,d))}function a(c,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,c,0,u,0,d);let h=0;for(let g=0;g<d;g++)h+=u[g];n.update(h,r,1)}function l(c,u,d,f){if(d===0)return;const h=e.get("WEBGL_multi_draw");if(h===null)for(let g=0;g<c.length;g++)s(c[g],u[g],f[g]);else{h.multiDrawArraysInstancedWEBGL(r,c,0,u,0,f,0,d);let g=0;for(let p=0;p<d;p++)g+=u[p];for(let p=0;p<f.length;p++)n.update(g,r,f[p])}}this.setMode=i,this.render=o,this.renderInstances=s,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function ske(t,e,n,r){let i;function o(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const x=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(x.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(x){return!(x!==ul&&r.convert(x)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(x){const S=x===h_&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(x!==Du&&r.convert(x)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&x!==pu&&!S)}function l(x){if(x==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";x="mediump"}return x==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=n.precision!==void 0?n.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const d=n.logarithmicDepthBuffer===!0,f=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),g=t.getParameter(t.MAX_TEXTURE_SIZE),p=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),m=t.getParameter(t.MAX_VERTEX_ATTRIBS),v=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),_=t.getParameter(t.MAX_VARYING_VECTORS),w=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),y=h>0,b=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:l,textureFormatReadable:s,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:d,maxTextures:f,maxVertexTextures:h,maxTextureSize:g,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:v,maxVaryings:_,maxFragmentUniforms:w,vertexTextures:y,maxSamples:b}}function ake(t){const e=this;let n=null,r=0,i=!1,o=!1;const s=new hh,a=new Wt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f){const h=d.length!==0||f||r!==0||i;return i=f,r=d.length,h},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(d,f){n=u(d,f,0)},this.setState=function(d,f,h){const g=d.clippingPlanes,p=d.clipIntersection,m=d.clipShadows,v=t.get(d);if(!i||g===null||g.length===0||o&&!m)o?u(null):c();else{const _=o?0:r,w=_*4;let y=v.clippingState||null;l.value=y,y=u(g,f,w,h);for(let b=0;b!==w;++b)y[b]=n[b];v.clippingState=y,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=_}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,f,h,g){const p=d!==null?d.length:0;let m=null;if(p!==0){if(m=l.value,g!==!0||m===null){const v=h+p*4,_=f.matrixWorldInverse;a.getNormalMatrix(_),(m===null||m.length<v)&&(m=new Float32Array(v));for(let w=0,y=h;w!==p;++w,y+=4)s.copy(d[w]).applyMatrix4(_,a),s.normal.toArray(m,y),m[y+3]=s.constant}l.value=m,l.needsUpdate=!0}return e.numPlanes=p,e.numIntersection=0,m}}function lke(t){let e=new WeakMap;function n(s,a){return a===g$?s.mapping=wv:a===v$&&(s.mapping=_v),s}function r(s){if(s&&s.isTexture){const a=s.mapping;if(a===g$||a===v$)if(e.has(s)){const l=e.get(s).texture;return n(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const c=new bCe(l.height);return c.fromEquirectangularTexture(t,s),e.set(s,c),s.addEventListener("dispose",i),n(c.texture,s.mapping)}else return null}}return s}function i(s){const a=s.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}class Yne extends qne{constructor(e=-1,n=1,r=1,i=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=r-e,s=r+e,a=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=c*this.view.offsetX,s=o+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Og=4,N6=[.125,.215,.35,.446,.526,.582],Ch=20,lD=new Yne,$6=new An;let cD=null,uD=0,dD=0,fD=!1;const ph=(1+Math.sqrt(5))/2,Um=1/ph,L6=[new Ae(-ph,Um,0),new Ae(ph,Um,0),new Ae(-Um,0,ph),new Ae(Um,0,ph),new Ae(0,ph,-Um),new Ae(0,ph,Um),new Ae(-1,1,-1),new Ae(1,1,-1),new Ae(-1,1,1),new Ae(1,1,1)];class F6{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){cD=this._renderer.getRenderTarget(),uD=this._renderer.getActiveCubeFace(),dD=this._renderer.getActiveMipmapLevel(),fD=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,r,i,o),n>0&&this._blur(o,0,0,n),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=z6(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=U6(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(cD,uD,dD),this._renderer.xr.enabled=fD,e.scissorTest=!1,aC(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===wv||e.mapping===_v?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),cD=this._renderer.getRenderTarget(),uD=this._renderer.getActiveCubeFace(),dD=this._renderer.getActiveMipmapLevel(),fD=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:ll,minFilter:ll,generateMipmaps:!1,type:h_,format:ul,colorSpace:Rf,depthBuffer:!1},i=B6(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=B6(e,n,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=cke(o)),this._blurMaterial=uke(o,e,n)}return i}_compileMaterial(e){const n=new ba(this._lodPlanes[0],e);this._renderer.compile(n,lD)}_sceneToCubeUV(e,n,r,i){const a=new Ho(90,1,n,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,f=u.toneMapping;u.getClearColor($6),u.toneMapping=nf,u.autoClear=!1;const h=new v_({name:"PMREM.Background",side:rs,depthWrite:!1,depthTest:!1}),g=new ba(new y_,h);let p=!1;const m=e.background;m?m.isColor&&(h.color.copy(m),e.background=null,p=!0):(h.color.copy($6),p=!0);for(let v=0;v<6;v++){const _=v%3;_===0?(a.up.set(0,l[v],0),a.lookAt(c[v],0,0)):_===1?(a.up.set(0,0,l[v]),a.lookAt(0,c[v],0)):(a.up.set(0,l[v],0),a.lookAt(0,0,c[v]));const w=this._cubeSize;aC(i,_*w,v>2?w:0,w,w),u.setRenderTarget(i),p&&u.render(g,a),u.render(e,a)}g.geometry.dispose(),g.material.dispose(),u.toneMapping=f,u.autoClear=d,e.background=m}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===wv||e.mapping===_v;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=z6()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=U6());const o=i?this._cubemapMaterial:this._equirectMaterial,s=new ba(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=e;const l=this._cubeSize;aC(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(s,lD)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const i=this._lodPlanes.length;for(let o=1;o<i;o++){const s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),a=L6[(i-o-1)%L6.length];this._blur(e,o-1,o,s,a)}n.autoClear=r}_blur(e,n,r,i,o){const s=this._pingPongRenderTarget;this._halfBlur(e,s,n,r,i,"latitudinal",o),this._halfBlur(s,e,r,r,i,"longitudinal",o)}_halfBlur(e,n,r,i,o,s,a){const l=this._renderer,c=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new ba(this._lodPlanes[i],c),f=c.uniforms,h=this._sizeLods[r]-1,g=isFinite(o)?Math.PI/(2*h):2*Math.PI/(2*Ch-1),p=o/g,m=isFinite(o)?1+Math.floor(u*p):Ch;m>Ch&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${Ch}`);const v=[];let _=0;for(let S=0;S<Ch;++S){const C=S/p,T=Math.exp(-C*C/2);v.push(T),S===0?_+=T:S<m&&(_+=2*T)}for(let S=0;S<v.length;S++)v[S]=v[S]/_;f.envMap.value=e.texture,f.samples.value=m,f.weights.value=v,f.latitudinal.value=s==="latitudinal",a&&(f.poleAxis.value=a);const{_lodMax:w}=this;f.dTheta.value=g,f.mipInt.value=w-r;const y=this._sizeLods[i],b=3*y*(i>w-Og?i-w+Og:0),x=4*(this._cubeSize-y);aC(n,b,x,3*y,2*y),l.setRenderTarget(n),l.render(d,lD)}}function cke(t){const e=[],n=[],r=[];let i=t;const o=t-Og+1+N6.length;for(let s=0;s<o;s++){const a=Math.pow(2,i);n.push(a);let l=1/a;s>t-Og?l=N6[s-t+Og-1]:s===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,d=1+c,f=[u,u,d,u,d,d,u,u,d,d,u,d],h=6,g=6,p=3,m=2,v=1,_=new Float32Array(p*g*h),w=new Float32Array(m*g*h),y=new Float32Array(v*g*h);for(let x=0;x<h;x++){const S=x%3*2/3-1,C=x>2?0:-1,T=[S,C,0,S+2/3,C,0,S+2/3,C+1,0,S,C,0,S+2/3,C+1,0,S,C+1,0];_.set(T,p*g*x),w.set(f,m*g*x);const E=[x,x,x,x,x,x];y.set(E,v*g*x)}const b=new Df;b.setAttribute("position",new hc(_,p)),b.setAttribute("uv",new hc(w,m)),b.setAttribute("faceIndex",new hc(y,v)),e.push(b),i>Og&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function B6(t,e,n){const r=new Sp(t,e,n);return r.texture.mapping=OM,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function aC(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function uke(t,e,n){const r=new Float32Array(Ch),i=new Ae(0,1,0);return new gf({name:"SphericalGaussianBlur",defines:{n:Ch,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:tz(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:tf,depthTest:!1,depthWrite:!1})}function U6(){return new gf({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:tz(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:tf,depthTest:!1,depthWrite:!1})}function z6(){return new gf({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:tz(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:tf,depthTest:!1,depthWrite:!1})}function tz(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function dke(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===g$||l===v$,u=l===wv||l===_v;if(c||u){let d=e.get(a);const f=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==f)return n===null&&(n=new F6(t)),d=c?n.fromEquirectangular(a,d):n.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{const h=a.image;return c&&h&&h.height>0||u&&h&&i(h)?(n===null&&(n=new F6(t)),d=c?n.fromEquirectangular(a):n.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",o),d.texture):null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function o(a){const l=a.target;l.removeEventListener("dispose",o);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:s}}function fke(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const i=n(r);return i===null&&zb("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function hke(t,e,n,r){const i={},o=new WeakMap;function s(d){const f=d.target;f.index!==null&&e.remove(f.index);for(const g in f.attributes)e.remove(f.attributes[g]);for(const g in f.morphAttributes){const p=f.morphAttributes[g];for(let m=0,v=p.length;m<v;m++)e.remove(p[m])}f.removeEventListener("dispose",s),delete i[f.id];const h=o.get(f);h&&(e.remove(h),o.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,n.memory.geometries--}function a(d,f){return i[f.id]===!0||(f.addEventListener("dispose",s),i[f.id]=!0,n.memory.geometries++),f}function l(d){const f=d.attributes;for(const g in f)e.update(f[g],t.ARRAY_BUFFER);const h=d.morphAttributes;for(const g in h){const p=h[g];for(let m=0,v=p.length;m<v;m++)e.update(p[m],t.ARRAY_BUFFER)}}function c(d){const f=[],h=d.index,g=d.attributes.position;let p=0;if(h!==null){const _=h.array;p=h.version;for(let w=0,y=_.length;w<y;w+=3){const b=_[w+0],x=_[w+1],S=_[w+2];f.push(b,x,x,S,S,b)}}else if(g!==void 0){const _=g.array;p=g.version;for(let w=0,y=_.length/3-1;w<y;w+=3){const b=w+0,x=w+1,S=w+2;f.push(b,x,x,S,S,b)}}else return;const m=new(Bne(f)?Hne:Vne)(f,1);m.version=p;const v=o.get(d);v&&e.remove(v),o.set(d,m)}function u(d){const f=o.get(d);if(f){const h=d.index;h!==null&&f.version<h.version&&c(d)}else c(d);return o.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function pke(t,e,n){let r;function i(f){r=f}let o,s;function a(f){o=f.type,s=f.bytesPerElement}function l(f,h){t.drawElements(r,h,o,f*s),n.update(h,r,1)}function c(f,h,g){g!==0&&(t.drawElementsInstanced(r,h,o,f*s,g),n.update(h,r,g))}function u(f,h,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,h,0,o,f,0,g);let m=0;for(let v=0;v<g;v++)m+=h[v];n.update(m,r,1)}function d(f,h,g,p){if(g===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let v=0;v<f.length;v++)c(f[v]/s,h[v],p[v]);else{m.multiDrawElementsInstancedWEBGL(r,h,0,o,f,0,p,0,g);let v=0;for(let _=0;_<g;_++)v+=h[_];for(let _=0;_<p.length;_++)n.update(v,r,p[_])}}this.setMode=i,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function mke(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,s,a){switch(n.calls++,s){case t.TRIANGLES:n.triangles+=a*(o/3);break;case t.LINES:n.lines+=a*(o/2);break;case t.LINE_STRIP:n.lines+=a*(o-1);break;case t.LINE_LOOP:n.lines+=a*o;break;case t.POINTS:n.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function gke(t,e,n){const r=new WeakMap,i=new ci;function o(s,a,l){const c=s.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=u!==void 0?u.length:0;let f=r.get(a);if(f===void 0||f.count!==d){let E=function(){C.dispose(),r.delete(a),a.removeEventListener("dispose",E)};var h=E;f!==void 0&&f.texture.dispose();const g=a.morphAttributes.position!==void 0,p=a.morphAttributes.normal!==void 0,m=a.morphAttributes.color!==void 0,v=a.morphAttributes.position||[],_=a.morphAttributes.normal||[],w=a.morphAttributes.color||[];let y=0;g===!0&&(y=1),p===!0&&(y=2),m===!0&&(y=3);let b=a.attributes.position.count*y,x=1;b>e.maxTextureSize&&(x=Math.ceil(b/e.maxTextureSize),b=e.maxTextureSize);const S=new Float32Array(b*x*4*d),C=new zne(S,b,x,d);C.type=pu,C.needsUpdate=!0;const T=y*4;for(let k=0;k<d;k++){const A=v[k],O=_[k],D=w[k],P=b*x*4*k;for(let N=0;N<A.count;N++){const U=N*T;g===!0&&(i.fromBufferAttribute(A,N),S[P+U+0]=i.x,S[P+U+1]=i.y,S[P+U+2]=i.z,S[P+U+3]=0),p===!0&&(i.fromBufferAttribute(O,N),S[P+U+4]=i.x,S[P+U+5]=i.y,S[P+U+6]=i.z,S[P+U+7]=0),m===!0&&(i.fromBufferAttribute(D,N),S[P+U+8]=i.x,S[P+U+9]=i.y,S[P+U+10]=i.z,S[P+U+11]=D.itemSize===4?i.w:1)}}f={count:d,texture:C,size:new fn(b,x)},r.set(a,f),a.addEventListener("dispose",E)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",s.morphTexture,n);else{let g=0;for(let m=0;m<c.length;m++)g+=c[m];const p=a.morphTargetsRelative?1:1-g;l.getUniforms().setValue(t,"morphTargetBaseInfluence",p),l.getUniforms().setValue(t,"morphTargetInfluences",c)}l.getUniforms().setValue(t,"morphTargetsTexture",f.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",f.size)}return{update:o}}function vke(t,e,n,r){let i=new WeakMap;function o(l){const c=r.render.frame,u=l.geometry,d=e.get(l,u);if(i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const f=l.skeleton;i.get(f)!==c&&(f.update(),i.set(f,c))}return d}function s(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:o,dispose:s}}class Qne extends is{constructor(e,n,r,i,o,s,a,l,c,u=Kg){if(u!==Kg&&u!==Cv)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===Kg&&(r=_p),r===void 0&&u===Cv&&(r=Sv),super(null,i,o,s,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:ya,this.minFilter=l!==void 0?l:ya,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const Zne=new is,j6=new Qne(1,1),Jne=new zne,ere=new nCe,tre=new Xne,W6=[],V6=[],H6=new Float32Array(16),G6=new Float32Array(9),q6=new Float32Array(4);function Oy(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=W6[i];if(o===void 0&&(o=new Float32Array(i),W6[i]=o),e!==0){r.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=n,t[s].toArray(o,a)}return o}function mi(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function gi(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function NM(t,e){let n=V6[e];n===void 0&&(n=new Int32Array(e),V6[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function yke(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function bke(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(mi(n,e))return;t.uniform2fv(this.addr,e),gi(n,e)}}function xke(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(mi(n,e))return;t.uniform3fv(this.addr,e),gi(n,e)}}function wke(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(mi(n,e))return;t.uniform4fv(this.addr,e),gi(n,e)}}function _ke(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(mi(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),gi(n,e)}else{if(mi(n,r))return;q6.set(r),t.uniformMatrix2fv(this.addr,!1,q6),gi(n,r)}}function Ske(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(mi(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),gi(n,e)}else{if(mi(n,r))return;G6.set(r),t.uniformMatrix3fv(this.addr,!1,G6),gi(n,r)}}function Cke(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(mi(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),gi(n,e)}else{if(mi(n,r))return;H6.set(r),t.uniformMatrix4fv(this.addr,!1,H6),gi(n,r)}}function Eke(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Tke(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(mi(n,e))return;t.uniform2iv(this.addr,e),gi(n,e)}}function kke(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(mi(n,e))return;t.uniform3iv(this.addr,e),gi(n,e)}}function Ake(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(mi(n,e))return;t.uniform4iv(this.addr,e),gi(n,e)}}function Mke(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Ike(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(mi(n,e))return;t.uniform2uiv(this.addr,e),gi(n,e)}}function Oke(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(mi(n,e))return;t.uniform3uiv(this.addr,e),gi(n,e)}}function Rke(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(mi(n,e))return;t.uniform4uiv(this.addr,e),gi(n,e)}}function Dke(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);let o;this.type===t.SAMPLER_2D_SHADOW?(j6.compareFunction=Fne,o=j6):o=Zne,n.setTexture2D(e||o,i)}function Pke(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||ere,i)}function Nke(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||tre,i)}function $ke(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Jne,i)}function Lke(t){switch(t){case 5126:return yke;case 35664:return bke;case 35665:return xke;case 35666:return wke;case 35674:return _ke;case 35675:return Ske;case 35676:return Cke;case 5124:case 35670:return Eke;case 35667:case 35671:return Tke;case 35668:case 35672:return kke;case 35669:case 35673:return Ake;case 5125:return Mke;case 36294:return Ike;case 36295:return Oke;case 36296:return Rke;case 35678:case 36198:case 36298:case 36306:case 35682:return Dke;case 35679:case 36299:case 36307:return Pke;case 35680:case 36300:case 36308:case 36293:return Nke;case 36289:case 36303:case 36311:case 36292:return $ke}}function Fke(t,e){t.uniform1fv(this.addr,e)}function Bke(t,e){const n=Oy(e,this.size,2);t.uniform2fv(this.addr,n)}function Uke(t,e){const n=Oy(e,this.size,3);t.uniform3fv(this.addr,n)}function zke(t,e){const n=Oy(e,this.size,4);t.uniform4fv(this.addr,n)}function jke(t,e){const n=Oy(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Wke(t,e){const n=Oy(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Vke(t,e){const n=Oy(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Hke(t,e){t.uniform1iv(this.addr,e)}function Gke(t,e){t.uniform2iv(this.addr,e)}function qke(t,e){t.uniform3iv(this.addr,e)}function Xke(t,e){t.uniform4iv(this.addr,e)}function Kke(t,e){t.uniform1uiv(this.addr,e)}function Yke(t,e){t.uniform2uiv(this.addr,e)}function Qke(t,e){t.uniform3uiv(this.addr,e)}function Zke(t,e){t.uniform4uiv(this.addr,e)}function Jke(t,e,n){const r=this.cache,i=e.length,o=NM(n,i);mi(r,o)||(t.uniform1iv(this.addr,o),gi(r,o));for(let s=0;s!==i;++s)n.setTexture2D(e[s]||Zne,o[s])}function eAe(t,e,n){const r=this.cache,i=e.length,o=NM(n,i);mi(r,o)||(t.uniform1iv(this.addr,o),gi(r,o));for(let s=0;s!==i;++s)n.setTexture3D(e[s]||ere,o[s])}function tAe(t,e,n){const r=this.cache,i=e.length,o=NM(n,i);mi(r,o)||(t.uniform1iv(this.addr,o),gi(r,o));for(let s=0;s!==i;++s)n.setTextureCube(e[s]||tre,o[s])}function nAe(t,e,n){const r=this.cache,i=e.length,o=NM(n,i);mi(r,o)||(t.uniform1iv(this.addr,o),gi(r,o));for(let s=0;s!==i;++s)n.setTexture2DArray(e[s]||Jne,o[s])}function rAe(t){switch(t){case 5126:return Fke;case 35664:return Bke;case 35665:return Uke;case 35666:return zke;case 35674:return jke;case 35675:return Wke;case 35676:return Vke;case 5124:case 35670:return Hke;case 35667:case 35671:return Gke;case 35668:case 35672:return qke;case 35669:case 35673:return Xke;case 5125:return Kke;case 36294:return Yke;case 36295:return Qke;case 36296:return Zke;case 35678:case 36198:case 36298:case 36306:case 35682:return Jke;case 35679:case 36299:case 36307:return eAe;case 35680:case 36300:case 36308:case 36293:return tAe;case 36289:case 36303:case 36311:case 36292:return nAe}}class iAe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=Lke(n.type)}}class oAe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=rAe(n.type)}}class sAe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let o=0,s=i.length;o!==s;++o){const a=i[o];a.setValue(e,n[a.id],r)}}}const hD=/(\w+)(\])?(\[|\.)?/g;function X6(t,e){t.seq.push(e),t.map[e.id]=e}function aAe(t,e,n){const r=t.name,i=r.length;for(hD.lastIndex=0;;){const o=hD.exec(r),s=hD.lastIndex;let a=o[1];const l=o[2]==="]",c=o[3];if(l&&(a=a|0),c===void 0||c==="["&&s+2===i){X6(n,c===void 0?new iAe(a,t,e):new oAe(a,t,e));break}else{let d=n.map[a];d===void 0&&(d=new sAe(a),X6(n,d)),n=d}}}class kE{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const o=e.getActiveUniform(n,i),s=e.getUniformLocation(n,o.name);aAe(o,s,this)}}setValue(e,n,r,i){const o=this.map[n];o!==void 0&&o.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let o=0,s=n.length;o!==s;++o){const a=n[o],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,o=e.length;i!==o;++i){const s=e[i];s.id in n&&r.push(s)}return r}}function K6(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const lAe=37297;let cAe=0;function uAe(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let s=i;s<o;s++){const a=s+1;r.push(`${a===e?">":" "} ${a}: ${n[s]}`)}return r.join(`
`)}function dAe(t){const e=Cn.getPrimaries(Cn.workingColorSpace),n=Cn.getPrimaries(t);let r;switch(e===n?r="":e===LT&&n===$T?r="LinearDisplayP3ToLinearSRGB":e===$T&&n===LT&&(r="LinearSRGBToLinearDisplayP3"),t){case Rf:case RM:return[r,"LinearTransferOETF"];case Ul:case ZU:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[r,"LinearTransferOETF"]}}function Y6(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const s=parseInt(o[1]);return n.toUpperCase()+`

`+i+`

`+uAe(t.getShaderSource(e),s)}else return i}function fAe(t,e){const n=dAe(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function hAe(t,e){let n;switch(e){case MSe:n="Linear";break;case ISe:n="Reinhard";break;case OSe:n="OptimizedCineon";break;case RSe:n="ACESFilmic";break;case PSe:n="AgX";break;case NSe:n="Neutral";break;case DSe:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const lC=new Ae;function pAe(){Cn.getLuminanceCoefficients(lC);const t=lC.x.toFixed(4),e=lC.y.toFixed(4),n=lC.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function mAe(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(hb).join(`
`)}function gAe(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function vAe(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const o=t.getActiveAttrib(e,i),s=o.name;let a=1;o.type===t.FLOAT_MAT2&&(a=2),o.type===t.FLOAT_MAT3&&(a=3),o.type===t.FLOAT_MAT4&&(a=4),n[s]={type:o.type,location:t.getAttribLocation(e,s),locationSize:a}}return n}function hb(t){return t!==""}function Q6(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Z6(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const yAe=/^[ \t]*#include +<([\w\d./]+)>/gm;function q$(t){return t.replace(yAe,xAe)}const bAe=new Map;function xAe(t,e){let n=jt[e];if(n===void 0){const r=bAe.get(e);if(r!==void 0)n=jt[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return q$(n)}const wAe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function J6(t){return t.replace(wAe,_Ae)}function _Ae(t,e,n,r){let i="";for(let o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function e8(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function SAe(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===Ene?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===tSe?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===tu&&(e="SHADOWMAP_TYPE_VSM"),e}function CAe(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case wv:case _v:e="ENVMAP_TYPE_CUBE";break;case OM:e="ENVMAP_TYPE_CUBE_UV";break}return e}function EAe(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case _v:e="ENVMAP_MODE_REFRACTION";break}return e}function TAe(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Tne:e="ENVMAP_BLENDING_MULTIPLY";break;case kSe:e="ENVMAP_BLENDING_MIX";break;case ASe:e="ENVMAP_BLENDING_ADD";break}return e}function kAe(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function AAe(t,e,n,r){const i=t.getContext(),o=n.defines;let s=n.vertexShader,a=n.fragmentShader;const l=SAe(n),c=CAe(n),u=EAe(n),d=TAe(n),f=kAe(n),h=mAe(n),g=gAe(o),p=i.createProgram();let m,v,_=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(m=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g].filter(hb).join(`
`),m.length>0&&(m+=`
`),v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g].filter(hb).join(`
`),v.length>0&&(v+=`
`)):(m=[e8(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(hb).join(`
`),v=[e8(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==nf?"#define TONE_MAPPING":"",n.toneMapping!==nf?jt.tonemapping_pars_fragment:"",n.toneMapping!==nf?hAe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",jt.colorspace_pars_fragment,fAe("linearToOutputTexel",n.outputColorSpace),pAe(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(hb).join(`
`)),s=q$(s),s=Q6(s,n),s=Z6(s,n),a=q$(a),a=Q6(a,n),a=Z6(a,n),s=J6(s),a=J6(a),n.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,m=[h,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,v=["#define varying in",n.glslVersion===m6?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===m6?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const w=_+m+s,y=_+v+a,b=K6(i,i.VERTEX_SHADER,w),x=K6(i,i.FRAGMENT_SHADER,y);i.attachShader(p,b),i.attachShader(p,x),n.index0AttributeName!==void 0?i.bindAttribLocation(p,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(p,0,"position"),i.linkProgram(p);function S(k){if(t.debug.checkShaderErrors){const A=i.getProgramInfoLog(p).trim(),O=i.getShaderInfoLog(b).trim(),D=i.getShaderInfoLog(x).trim();let P=!0,N=!0;if(i.getProgramParameter(p,i.LINK_STATUS)===!1)if(P=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,p,b,x);else{const U=Y6(i,b,"vertex"),L=Y6(i,x,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(p,i.VALIDATE_STATUS)+`

Material Name: `+k.name+`
Material Type: `+k.type+`

Program Info Log: `+A+`
`+U+`
`+L)}else A!==""?console.warn("THREE.WebGLProgram: Program Info Log:",A):(O===""||D==="")&&(N=!1);N&&(k.diagnostics={runnable:P,programLog:A,vertexShader:{log:O,prefix:m},fragmentShader:{log:D,prefix:v}})}i.deleteShader(b),i.deleteShader(x),C=new kE(i,p),T=vAe(i,p)}let C;this.getUniforms=function(){return C===void 0&&S(this),C};let T;this.getAttributes=function(){return T===void 0&&S(this),T};let E=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return E===!1&&(E=i.getProgramParameter(p,lAe)),E},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(p),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=cAe++,this.cacheKey=e,this.usedTimes=1,this.program=p,this.vertexShader=b,this.fragmentShader=x,this}let MAe=0;class IAe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),o=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new OAe(e),n.set(e,r)),r}}class OAe{constructor(e){this.id=MAe++,this.code=e,this.usedTimes=0}}function RAe(t,e,n,r,i,o,s){const a=new jne,l=new IAe,c=new Set,u=[],d=i.logarithmicDepthBuffer,f=i.vertexTextures;let h=i.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function p(T){return c.add(T),T===0?"uv":`uv${T}`}function m(T,E,k,A,O){const D=A.fog,P=O.geometry,N=T.isMeshStandardMaterial?A.environment:null,U=(T.isMeshStandardMaterial?n:e).get(T.envMap||N),L=U&&U.mapping===OM?U.image.height:null,V=g[T.type];T.precision!==null&&(h=i.getMaxPrecision(T.precision),h!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",h,"instead."));const G=P.morphAttributes.position||P.morphAttributes.normal||P.morphAttributes.color,Q=G!==void 0?G.length:0;let te=0;P.morphAttributes.position!==void 0&&(te=1),P.morphAttributes.normal!==void 0&&(te=2),P.morphAttributes.color!==void 0&&(te=3);let ne,ee,re,se;if(V){const Kt=Wl[V];ne=Kt.vertexShader,ee=Kt.fragmentShader}else ne=T.vertexShader,ee=T.fragmentShader,l.update(T),re=l.getVertexShaderID(T),se=l.getFragmentShaderID(T);const me=t.getRenderTarget(),Me=O.isInstancedMesh===!0,de=O.isBatchedMesh===!0,Ce=!!T.map,Ee=!!T.matcap,q=!!U,Ve=!!T.aoMap,ze=!!T.lightMap,Fe=!!T.bumpMap,we=!!T.normalMap,Je=!!T.displacementMap,Z=!!T.emissiveMap,ce=!!T.metalnessMap,H=!!T.roughnessMap,j=T.anisotropy>0,ie=T.clearcoat>0,z=T.dispersion>0,K=T.iridescence>0,F=T.sheen>0,W=T.transmission>0,X=j&&!!T.anisotropyMap,ae=ie&&!!T.clearcoatMap,he=ie&&!!T.clearcoatNormalMap,_e=ie&&!!T.clearcoatRoughnessMap,Be=K&&!!T.iridescenceMap,Xe=K&&!!T.iridescenceThicknessMap,lt=F&&!!T.sheenColorMap,tt=F&&!!T.sheenRoughnessMap,ye=!!T.specularMap,Ue=!!T.specularColorMap,ut=!!T.specularIntensityMap,le=W&&!!T.transmissionMap,je=W&&!!T.thicknessMap,Ne=!!T.gradientMap,$e=!!T.alphaMap,qe=T.alphaTest>0,ct=!!T.alphaHash,It=!!T.extensions;let Ft=nf;T.toneMapped&&(me===null||me.isXRRenderTarget===!0)&&(Ft=t.toneMapping);const Xn={shaderID:V,shaderType:T.type,shaderName:T.name,vertexShader:ne,fragmentShader:ee,defines:T.defines,customVertexShaderID:re,customFragmentShaderID:se,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:h,batching:de,batchingColor:de&&O._colorsTexture!==null,instancing:Me,instancingColor:Me&&O.instanceColor!==null,instancingMorph:Me&&O.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:me===null?t.outputColorSpace:me.isXRRenderTarget===!0?me.texture.colorSpace:Rf,alphaToCoverage:!!T.alphaToCoverage,map:Ce,matcap:Ee,envMap:q,envMapMode:q&&U.mapping,envMapCubeUVHeight:L,aoMap:Ve,lightMap:ze,bumpMap:Fe,normalMap:we,displacementMap:f&&Je,emissiveMap:Z,normalMapObjectSpace:we&&T.normalMapType===USe,normalMapTangentSpace:we&&T.normalMapType===BSe,metalnessMap:ce,roughnessMap:H,anisotropy:j,anisotropyMap:X,clearcoat:ie,clearcoatMap:ae,clearcoatNormalMap:he,clearcoatRoughnessMap:_e,dispersion:z,iridescence:K,iridescenceMap:Be,iridescenceThicknessMap:Xe,sheen:F,sheenColorMap:lt,sheenRoughnessMap:tt,specularMap:ye,specularColorMap:Ue,specularIntensityMap:ut,transmission:W,transmissionMap:le,thicknessMap:je,gradientMap:Ne,opaque:T.transparent===!1&&T.blending===Xg&&T.alphaToCoverage===!1,alphaMap:$e,alphaTest:qe,alphaHash:ct,combine:T.combine,mapUv:Ce&&p(T.map.channel),aoMapUv:Ve&&p(T.aoMap.channel),lightMapUv:ze&&p(T.lightMap.channel),bumpMapUv:Fe&&p(T.bumpMap.channel),normalMapUv:we&&p(T.normalMap.channel),displacementMapUv:Je&&p(T.displacementMap.channel),emissiveMapUv:Z&&p(T.emissiveMap.channel),metalnessMapUv:ce&&p(T.metalnessMap.channel),roughnessMapUv:H&&p(T.roughnessMap.channel),anisotropyMapUv:X&&p(T.anisotropyMap.channel),clearcoatMapUv:ae&&p(T.clearcoatMap.channel),clearcoatNormalMapUv:he&&p(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:_e&&p(T.clearcoatRoughnessMap.channel),iridescenceMapUv:Be&&p(T.iridescenceMap.channel),iridescenceThicknessMapUv:Xe&&p(T.iridescenceThicknessMap.channel),sheenColorMapUv:lt&&p(T.sheenColorMap.channel),sheenRoughnessMapUv:tt&&p(T.sheenRoughnessMap.channel),specularMapUv:ye&&p(T.specularMap.channel),specularColorMapUv:Ue&&p(T.specularColorMap.channel),specularIntensityMapUv:ut&&p(T.specularIntensityMap.channel),transmissionMapUv:le&&p(T.transmissionMap.channel),thicknessMapUv:je&&p(T.thicknessMap.channel),alphaMapUv:$e&&p(T.alphaMap.channel),vertexTangents:!!P.attributes.tangent&&(we||j),vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!P.attributes.color&&P.attributes.color.itemSize===4,pointsUvs:O.isPoints===!0&&!!P.attributes.uv&&(Ce||$e),fog:!!D,useFog:T.fog===!0,fogExp2:!!D&&D.isFogExp2,flatShading:T.flatShading===!0,sizeAttenuation:T.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:O.isSkinnedMesh===!0,morphTargets:P.morphAttributes.position!==void 0,morphNormals:P.morphAttributes.normal!==void 0,morphColors:P.morphAttributes.color!==void 0,morphTargetsCount:Q,morphTextureStride:te,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numSpotLightMaps:E.spotLightMap.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numSpotLightShadowsWithMaps:E.numSpotLightShadowsWithMaps,numLightProbes:E.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:T.dithering,shadowMapEnabled:t.shadowMap.enabled&&k.length>0,shadowMapType:t.shadowMap.type,toneMapping:Ft,decodeVideoTexture:Ce&&T.map.isVideoTexture===!0&&Cn.getTransfer(T.map.colorSpace)===Qn,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===lu,flipSided:T.side===rs,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionClipCullDistance:It&&T.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(It&&T.extensions.multiDraw===!0||de)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:T.customProgramCacheKey()};return Xn.vertexUv1s=c.has(1),Xn.vertexUv2s=c.has(2),Xn.vertexUv3s=c.has(3),c.clear(),Xn}function v(T){const E=[];if(T.shaderID?E.push(T.shaderID):(E.push(T.customVertexShaderID),E.push(T.customFragmentShaderID)),T.defines!==void 0)for(const k in T.defines)E.push(k),E.push(T.defines[k]);return T.isRawShaderMaterial===!1&&(_(E,T),w(E,T),E.push(t.outputColorSpace)),E.push(T.customProgramCacheKey),E.join()}function _(T,E){T.push(E.precision),T.push(E.outputColorSpace),T.push(E.envMapMode),T.push(E.envMapCubeUVHeight),T.push(E.mapUv),T.push(E.alphaMapUv),T.push(E.lightMapUv),T.push(E.aoMapUv),T.push(E.bumpMapUv),T.push(E.normalMapUv),T.push(E.displacementMapUv),T.push(E.emissiveMapUv),T.push(E.metalnessMapUv),T.push(E.roughnessMapUv),T.push(E.anisotropyMapUv),T.push(E.clearcoatMapUv),T.push(E.clearcoatNormalMapUv),T.push(E.clearcoatRoughnessMapUv),T.push(E.iridescenceMapUv),T.push(E.iridescenceThicknessMapUv),T.push(E.sheenColorMapUv),T.push(E.sheenRoughnessMapUv),T.push(E.specularMapUv),T.push(E.specularColorMapUv),T.push(E.specularIntensityMapUv),T.push(E.transmissionMapUv),T.push(E.thicknessMapUv),T.push(E.combine),T.push(E.fogExp2),T.push(E.sizeAttenuation),T.push(E.morphTargetsCount),T.push(E.morphAttributeCount),T.push(E.numDirLights),T.push(E.numPointLights),T.push(E.numSpotLights),T.push(E.numSpotLightMaps),T.push(E.numHemiLights),T.push(E.numRectAreaLights),T.push(E.numDirLightShadows),T.push(E.numPointLightShadows),T.push(E.numSpotLightShadows),T.push(E.numSpotLightShadowsWithMaps),T.push(E.numLightProbes),T.push(E.shadowMapType),T.push(E.toneMapping),T.push(E.numClippingPlanes),T.push(E.numClipIntersection),T.push(E.depthPacking)}function w(T,E){a.disableAll(),E.supportsVertexTextures&&a.enable(0),E.instancing&&a.enable(1),E.instancingColor&&a.enable(2),E.instancingMorph&&a.enable(3),E.matcap&&a.enable(4),E.envMap&&a.enable(5),E.normalMapObjectSpace&&a.enable(6),E.normalMapTangentSpace&&a.enable(7),E.clearcoat&&a.enable(8),E.iridescence&&a.enable(9),E.alphaTest&&a.enable(10),E.vertexColors&&a.enable(11),E.vertexAlphas&&a.enable(12),E.vertexUv1s&&a.enable(13),E.vertexUv2s&&a.enable(14),E.vertexUv3s&&a.enable(15),E.vertexTangents&&a.enable(16),E.anisotropy&&a.enable(17),E.alphaHash&&a.enable(18),E.batching&&a.enable(19),E.dispersion&&a.enable(20),E.batchingColor&&a.enable(21),T.push(a.mask),a.disableAll(),E.fog&&a.enable(0),E.useFog&&a.enable(1),E.flatShading&&a.enable(2),E.logarithmicDepthBuffer&&a.enable(3),E.skinning&&a.enable(4),E.morphTargets&&a.enable(5),E.morphNormals&&a.enable(6),E.morphColors&&a.enable(7),E.premultipliedAlpha&&a.enable(8),E.shadowMapEnabled&&a.enable(9),E.doubleSided&&a.enable(10),E.flipSided&&a.enable(11),E.useDepthPacking&&a.enable(12),E.dithering&&a.enable(13),E.transmission&&a.enable(14),E.sheen&&a.enable(15),E.opaque&&a.enable(16),E.pointsUvs&&a.enable(17),E.decodeVideoTexture&&a.enable(18),E.alphaToCoverage&&a.enable(19),T.push(a.mask)}function y(T){const E=g[T.type];let k;if(E){const A=Wl[E];k=mCe.clone(A.uniforms)}else k=T.uniforms;return k}function b(T,E){let k;for(let A=0,O=u.length;A<O;A++){const D=u[A];if(D.cacheKey===E){k=D,++k.usedTimes;break}}return k===void 0&&(k=new AAe(t,E,T,o),u.push(k)),k}function x(T){if(--T.usedTimes===0){const E=u.indexOf(T);u[E]=u[u.length-1],u.pop(),T.destroy()}}function S(T){l.remove(T)}function C(){l.dispose()}return{getParameters:m,getProgramCacheKey:v,getUniforms:y,acquireProgram:b,releaseProgram:x,releaseShaderCache:S,programs:u,dispose:C}}function DAe(){let t=new WeakMap;function e(o){let s=t.get(o);return s===void 0&&(s={},t.set(o,s)),s}function n(o){t.delete(o)}function r(o,s,a){t.get(o)[s]=a}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function PAe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function t8(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function n8(){const t=[];let e=0;const n=[],r=[],i=[];function o(){e=0,n.length=0,r.length=0,i.length=0}function s(d,f,h,g,p,m){let v=t[e];return v===void 0?(v={id:d.id,object:d,geometry:f,material:h,groupOrder:g,renderOrder:d.renderOrder,z:p,group:m},t[e]=v):(v.id=d.id,v.object=d,v.geometry=f,v.material=h,v.groupOrder=g,v.renderOrder=d.renderOrder,v.z=p,v.group=m),e++,v}function a(d,f,h,g,p,m){const v=s(d,f,h,g,p,m);h.transmission>0?r.push(v):h.transparent===!0?i.push(v):n.push(v)}function l(d,f,h,g,p,m){const v=s(d,f,h,g,p,m);h.transmission>0?r.unshift(v):h.transparent===!0?i.unshift(v):n.unshift(v)}function c(d,f){n.length>1&&n.sort(d||PAe),r.length>1&&r.sort(f||t8),i.length>1&&i.sort(f||t8)}function u(){for(let d=e,f=t.length;d<f;d++){const h=t[d];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:n,transmissive:r,transparent:i,init:o,push:a,unshift:l,finish:u,sort:c}}function NAe(){let t=new WeakMap;function e(r,i){const o=t.get(r);let s;return o===void 0?(s=new n8,t.set(r,[s])):i>=o.length?(s=new n8,o.push(s)):s=o[i],s}function n(){t=new WeakMap}return{get:e,dispose:n}}function $Ae(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Ae,color:new An};break;case"SpotLight":n={position:new Ae,direction:new Ae,color:new An,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Ae,color:new An,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Ae,skyColor:new An,groundColor:new An};break;case"RectAreaLight":n={color:new An,position:new Ae,halfWidth:new Ae,halfHeight:new Ae};break}return t[e.id]=n,n}}}function LAe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new fn};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new fn};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new fn,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let FAe=0;function BAe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function UAe(t){const e=new $Ae,n=LAe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new Ae);const i=new Ae,o=new Nr,s=new Nr;function a(c){let u=0,d=0,f=0;for(let T=0;T<9;T++)r.probe[T].set(0,0,0);let h=0,g=0,p=0,m=0,v=0,_=0,w=0,y=0,b=0,x=0,S=0;c.sort(BAe);for(let T=0,E=c.length;T<E;T++){const k=c[T],A=k.color,O=k.intensity,D=k.distance,P=k.shadow&&k.shadow.map?k.shadow.map.texture:null;if(k.isAmbientLight)u+=A.r*O,d+=A.g*O,f+=A.b*O;else if(k.isLightProbe){for(let N=0;N<9;N++)r.probe[N].addScaledVector(k.sh.coefficients[N],O);S++}else if(k.isDirectionalLight){const N=e.get(k);if(N.color.copy(k.color).multiplyScalar(k.intensity),k.castShadow){const U=k.shadow,L=n.get(k);L.shadowIntensity=U.intensity,L.shadowBias=U.bias,L.shadowNormalBias=U.normalBias,L.shadowRadius=U.radius,L.shadowMapSize=U.mapSize,r.directionalShadow[h]=L,r.directionalShadowMap[h]=P,r.directionalShadowMatrix[h]=k.shadow.matrix,_++}r.directional[h]=N,h++}else if(k.isSpotLight){const N=e.get(k);N.position.setFromMatrixPosition(k.matrixWorld),N.color.copy(A).multiplyScalar(O),N.distance=D,N.coneCos=Math.cos(k.angle),N.penumbraCos=Math.cos(k.angle*(1-k.penumbra)),N.decay=k.decay,r.spot[p]=N;const U=k.shadow;if(k.map&&(r.spotLightMap[b]=k.map,b++,U.updateMatrices(k),k.castShadow&&x++),r.spotLightMatrix[p]=U.matrix,k.castShadow){const L=n.get(k);L.shadowIntensity=U.intensity,L.shadowBias=U.bias,L.shadowNormalBias=U.normalBias,L.shadowRadius=U.radius,L.shadowMapSize=U.mapSize,r.spotShadow[p]=L,r.spotShadowMap[p]=P,y++}p++}else if(k.isRectAreaLight){const N=e.get(k);N.color.copy(A).multiplyScalar(O),N.halfWidth.set(k.width*.5,0,0),N.halfHeight.set(0,k.height*.5,0),r.rectArea[m]=N,m++}else if(k.isPointLight){const N=e.get(k);if(N.color.copy(k.color).multiplyScalar(k.intensity),N.distance=k.distance,N.decay=k.decay,k.castShadow){const U=k.shadow,L=n.get(k);L.shadowIntensity=U.intensity,L.shadowBias=U.bias,L.shadowNormalBias=U.normalBias,L.shadowRadius=U.radius,L.shadowMapSize=U.mapSize,L.shadowCameraNear=U.camera.near,L.shadowCameraFar=U.camera.far,r.pointShadow[g]=L,r.pointShadowMap[g]=P,r.pointShadowMatrix[g]=k.shadow.matrix,w++}r.point[g]=N,g++}else if(k.isHemisphereLight){const N=e.get(k);N.skyColor.copy(k.color).multiplyScalar(O),N.groundColor.copy(k.groundColor).multiplyScalar(O),r.hemi[v]=N,v++}}m>0&&(t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=it.LTC_FLOAT_1,r.rectAreaLTC2=it.LTC_FLOAT_2):(r.rectAreaLTC1=it.LTC_HALF_1,r.rectAreaLTC2=it.LTC_HALF_2)),r.ambient[0]=u,r.ambient[1]=d,r.ambient[2]=f;const C=r.hash;(C.directionalLength!==h||C.pointLength!==g||C.spotLength!==p||C.rectAreaLength!==m||C.hemiLength!==v||C.numDirectionalShadows!==_||C.numPointShadows!==w||C.numSpotShadows!==y||C.numSpotMaps!==b||C.numLightProbes!==S)&&(r.directional.length=h,r.spot.length=p,r.rectArea.length=m,r.point.length=g,r.hemi.length=v,r.directionalShadow.length=_,r.directionalShadowMap.length=_,r.pointShadow.length=w,r.pointShadowMap.length=w,r.spotShadow.length=y,r.spotShadowMap.length=y,r.directionalShadowMatrix.length=_,r.pointShadowMatrix.length=w,r.spotLightMatrix.length=y+b-x,r.spotLightMap.length=b,r.numSpotLightShadowsWithMaps=x,r.numLightProbes=S,C.directionalLength=h,C.pointLength=g,C.spotLength=p,C.rectAreaLength=m,C.hemiLength=v,C.numDirectionalShadows=_,C.numPointShadows=w,C.numSpotShadows=y,C.numSpotMaps=b,C.numLightProbes=S,r.version=FAe++)}function l(c,u){let d=0,f=0,h=0,g=0,p=0;const m=u.matrixWorldInverse;for(let v=0,_=c.length;v<_;v++){const w=c[v];if(w.isDirectionalLight){const y=r.directional[d];y.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),y.direction.sub(i),y.direction.transformDirection(m),d++}else if(w.isSpotLight){const y=r.spot[h];y.position.setFromMatrixPosition(w.matrixWorld),y.position.applyMatrix4(m),y.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),y.direction.sub(i),y.direction.transformDirection(m),h++}else if(w.isRectAreaLight){const y=r.rectArea[g];y.position.setFromMatrixPosition(w.matrixWorld),y.position.applyMatrix4(m),s.identity(),o.copy(w.matrixWorld),o.premultiply(m),s.extractRotation(o),y.halfWidth.set(w.width*.5,0,0),y.halfHeight.set(0,w.height*.5,0),y.halfWidth.applyMatrix4(s),y.halfHeight.applyMatrix4(s),g++}else if(w.isPointLight){const y=r.point[f];y.position.setFromMatrixPosition(w.matrixWorld),y.position.applyMatrix4(m),f++}else if(w.isHemisphereLight){const y=r.hemi[p];y.direction.setFromMatrixPosition(w.matrixWorld),y.direction.transformDirection(m),p++}}}return{setup:a,setupView:l,state:r}}function r8(t){const e=new UAe(t),n=[],r=[];function i(u){c.camera=u,n.length=0,r.length=0}function o(u){n.push(u)}function s(u){r.push(u)}function a(){e.setup(n)}function l(u){e.setupView(n,u)}const c={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:c,setupLights:a,setupLightsView:l,pushLight:o,pushShadow:s}}function zAe(t){let e=new WeakMap;function n(i,o=0){const s=e.get(i);let a;return s===void 0?(a=new r8(t),e.set(i,[a])):o>=s.length?(a=new r8(t),s.push(a)):a=s[o],a}function r(){e=new WeakMap}return{get:n,dispose:r}}class jAe extends DM{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=LSe,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class WAe extends DM{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const VAe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,HAe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function GAe(t,e,n){let r=new ez;const i=new fn,o=new fn,s=new ci,a=new jAe({depthPacking:FSe}),l=new WAe,c={},u=n.maxTextureSize,d={[mf]:rs,[rs]:mf,[lu]:lu},f=new gf({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new fn},radius:{value:4}},vertexShader:VAe,fragmentShader:HAe}),h=f.clone();h.defines.HORIZONTAL_PASS=1;const g=new Df;g.setAttribute("position",new hc(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const p=new ba(g,f),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Ene;let v=this.type;this.render=function(x,S,C){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||x.length===0)return;const T=t.getRenderTarget(),E=t.getActiveCubeFace(),k=t.getActiveMipmapLevel(),A=t.state;A.setBlending(tf),A.buffers.color.setClear(1,1,1,1),A.buffers.depth.setTest(!0),A.setScissorTest(!1);const O=v!==tu&&this.type===tu,D=v===tu&&this.type!==tu;for(let P=0,N=x.length;P<N;P++){const U=x[P],L=U.shadow;if(L===void 0){console.warn("THREE.WebGLShadowMap:",U,"has no shadow.");continue}if(L.autoUpdate===!1&&L.needsUpdate===!1)continue;i.copy(L.mapSize);const V=L.getFrameExtents();if(i.multiply(V),o.copy(L.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(o.x=Math.floor(u/V.x),i.x=o.x*V.x,L.mapSize.x=o.x),i.y>u&&(o.y=Math.floor(u/V.y),i.y=o.y*V.y,L.mapSize.y=o.y)),L.map===null||O===!0||D===!0){const Q=this.type!==tu?{minFilter:ya,magFilter:ya}:{};L.map!==null&&L.map.dispose(),L.map=new Sp(i.x,i.y,Q),L.map.texture.name=U.name+".shadowMap",L.camera.updateProjectionMatrix()}t.setRenderTarget(L.map),t.clear();const G=L.getViewportCount();for(let Q=0;Q<G;Q++){const te=L.getViewport(Q);s.set(o.x*te.x,o.y*te.y,o.x*te.z,o.y*te.w),A.viewport(s),L.updateMatrices(U,Q),r=L.getFrustum(),y(S,C,L.camera,U,this.type)}L.isPointLightShadow!==!0&&this.type===tu&&_(L,C),L.needsUpdate=!1}v=this.type,m.needsUpdate=!1,t.setRenderTarget(T,E,k)};function _(x,S){const C=e.update(p);f.defines.VSM_SAMPLES!==x.blurSamples&&(f.defines.VSM_SAMPLES=x.blurSamples,h.defines.VSM_SAMPLES=x.blurSamples,f.needsUpdate=!0,h.needsUpdate=!0),x.mapPass===null&&(x.mapPass=new Sp(i.x,i.y)),f.uniforms.shadow_pass.value=x.map.texture,f.uniforms.resolution.value=x.mapSize,f.uniforms.radius.value=x.radius,t.setRenderTarget(x.mapPass),t.clear(),t.renderBufferDirect(S,null,C,f,p,null),h.uniforms.shadow_pass.value=x.mapPass.texture,h.uniforms.resolution.value=x.mapSize,h.uniforms.radius.value=x.radius,t.setRenderTarget(x.map),t.clear(),t.renderBufferDirect(S,null,C,h,p,null)}function w(x,S,C,T){let E=null;const k=C.isPointLight===!0?x.customDistanceMaterial:x.customDepthMaterial;if(k!==void 0)E=k;else if(E=C.isPointLight===!0?l:a,t.localClippingEnabled&&S.clipShadows===!0&&Array.isArray(S.clippingPlanes)&&S.clippingPlanes.length!==0||S.displacementMap&&S.displacementScale!==0||S.alphaMap&&S.alphaTest>0||S.map&&S.alphaTest>0){const A=E.uuid,O=S.uuid;let D=c[A];D===void 0&&(D={},c[A]=D);let P=D[O];P===void 0&&(P=E.clone(),D[O]=P,S.addEventListener("dispose",b)),E=P}if(E.visible=S.visible,E.wireframe=S.wireframe,T===tu?E.side=S.shadowSide!==null?S.shadowSide:S.side:E.side=S.shadowSide!==null?S.shadowSide:d[S.side],E.alphaMap=S.alphaMap,E.alphaTest=S.alphaTest,E.map=S.map,E.clipShadows=S.clipShadows,E.clippingPlanes=S.clippingPlanes,E.clipIntersection=S.clipIntersection,E.displacementMap=S.displacementMap,E.displacementScale=S.displacementScale,E.displacementBias=S.displacementBias,E.wireframeLinewidth=S.wireframeLinewidth,E.linewidth=S.linewidth,C.isPointLight===!0&&E.isMeshDistanceMaterial===!0){const A=t.properties.get(E);A.light=C}return E}function y(x,S,C,T,E){if(x.visible===!1)return;if(x.layers.test(S.layers)&&(x.isMesh||x.isLine||x.isPoints)&&(x.castShadow||x.receiveShadow&&E===tu)&&(!x.frustumCulled||r.intersectsObject(x))){x.modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,x.matrixWorld);const O=e.update(x),D=x.material;if(Array.isArray(D)){const P=O.groups;for(let N=0,U=P.length;N<U;N++){const L=P[N],V=D[L.materialIndex];if(V&&V.visible){const G=w(x,V,T,E);x.onBeforeShadow(t,x,S,C,O,G,L),t.renderBufferDirect(C,null,O,G,x,L),x.onAfterShadow(t,x,S,C,O,G,L)}}}else if(D.visible){const P=w(x,D,T,E);x.onBeforeShadow(t,x,S,C,O,P,null),t.renderBufferDirect(C,null,O,P,x,null),x.onAfterShadow(t,x,S,C,O,P,null)}}const A=x.children;for(let O=0,D=A.length;O<D;O++)y(A[O],S,C,T,E)}function b(x){x.target.removeEventListener("dispose",b);for(const C in c){const T=c[C],E=x.target.uuid;E in T&&(T[E].dispose(),delete T[E])}}}function qAe(t){function e(){let le=!1;const je=new ci;let Ne=null;const $e=new ci(0,0,0,0);return{setMask:function(qe){Ne!==qe&&!le&&(t.colorMask(qe,qe,qe,qe),Ne=qe)},setLocked:function(qe){le=qe},setClear:function(qe,ct,It,Ft,Xn){Xn===!0&&(qe*=Ft,ct*=Ft,It*=Ft),je.set(qe,ct,It,Ft),$e.equals(je)===!1&&(t.clearColor(qe,ct,It,Ft),$e.copy(je))},reset:function(){le=!1,Ne=null,$e.set(-1,0,0,0)}}}function n(){let le=!1,je=null,Ne=null,$e=null;return{setTest:function(qe){qe?se(t.DEPTH_TEST):me(t.DEPTH_TEST)},setMask:function(qe){je!==qe&&!le&&(t.depthMask(qe),je=qe)},setFunc:function(qe){if(Ne!==qe){switch(qe){case xSe:t.depthFunc(t.NEVER);break;case wSe:t.depthFunc(t.ALWAYS);break;case _Se:t.depthFunc(t.LESS);break;case PT:t.depthFunc(t.LEQUAL);break;case SSe:t.depthFunc(t.EQUAL);break;case CSe:t.depthFunc(t.GEQUAL);break;case ESe:t.depthFunc(t.GREATER);break;case TSe:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Ne=qe}},setLocked:function(qe){le=qe},setClear:function(qe){$e!==qe&&(t.clearDepth(qe),$e=qe)},reset:function(){le=!1,je=null,Ne=null,$e=null}}}function r(){let le=!1,je=null,Ne=null,$e=null,qe=null,ct=null,It=null,Ft=null,Xn=null;return{setTest:function(Kt){le||(Kt?se(t.STENCIL_TEST):me(t.STENCIL_TEST))},setMask:function(Kt){je!==Kt&&!le&&(t.stencilMask(Kt),je=Kt)},setFunc:function(Kt,ei,Br){(Ne!==Kt||$e!==ei||qe!==Br)&&(t.stencilFunc(Kt,ei,Br),Ne=Kt,$e=ei,qe=Br)},setOp:function(Kt,ei,Br){(ct!==Kt||It!==ei||Ft!==Br)&&(t.stencilOp(Kt,ei,Br),ct=Kt,It=ei,Ft=Br)},setLocked:function(Kt){le=Kt},setClear:function(Kt){Xn!==Kt&&(t.clearStencil(Kt),Xn=Kt)},reset:function(){le=!1,je=null,Ne=null,$e=null,qe=null,ct=null,It=null,Ft=null,Xn=null}}}const i=new e,o=new n,s=new r,a=new WeakMap,l=new WeakMap;let c={},u={},d=new WeakMap,f=[],h=null,g=!1,p=null,m=null,v=null,_=null,w=null,y=null,b=null,x=new An(0,0,0),S=0,C=!1,T=null,E=null,k=null,A=null,O=null;const D=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let P=!1,N=0;const U=t.getParameter(t.VERSION);U.indexOf("WebGL")!==-1?(N=parseFloat(/^WebGL (\d)/.exec(U)[1]),P=N>=1):U.indexOf("OpenGL ES")!==-1&&(N=parseFloat(/^OpenGL ES (\d)/.exec(U)[1]),P=N>=2);let L=null,V={};const G=t.getParameter(t.SCISSOR_BOX),Q=t.getParameter(t.VIEWPORT),te=new ci().fromArray(G),ne=new ci().fromArray(Q);function ee(le,je,Ne,$e){const qe=new Uint8Array(4),ct=t.createTexture();t.bindTexture(le,ct),t.texParameteri(le,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(le,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let It=0;It<Ne;It++)le===t.TEXTURE_3D||le===t.TEXTURE_2D_ARRAY?t.texImage3D(je,0,t.RGBA,1,1,$e,0,t.RGBA,t.UNSIGNED_BYTE,qe):t.texImage2D(je+It,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,qe);return ct}const re={};re[t.TEXTURE_2D]=ee(t.TEXTURE_2D,t.TEXTURE_2D,1),re[t.TEXTURE_CUBE_MAP]=ee(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),re[t.TEXTURE_2D_ARRAY]=ee(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),re[t.TEXTURE_3D]=ee(t.TEXTURE_3D,t.TEXTURE_3D,1,1),i.setClear(0,0,0,1),o.setClear(1),s.setClear(0),se(t.DEPTH_TEST),o.setFunc(PT),Fe(!1),we(c6),se(t.CULL_FACE),Ve(tf);function se(le){c[le]!==!0&&(t.enable(le),c[le]=!0)}function me(le){c[le]!==!1&&(t.disable(le),c[le]=!1)}function Me(le,je){return u[le]!==je?(t.bindFramebuffer(le,je),u[le]=je,le===t.DRAW_FRAMEBUFFER&&(u[t.FRAMEBUFFER]=je),le===t.FRAMEBUFFER&&(u[t.DRAW_FRAMEBUFFER]=je),!0):!1}function de(le,je){let Ne=f,$e=!1;if(le){Ne=d.get(je),Ne===void 0&&(Ne=[],d.set(je,Ne));const qe=le.textures;if(Ne.length!==qe.length||Ne[0]!==t.COLOR_ATTACHMENT0){for(let ct=0,It=qe.length;ct<It;ct++)Ne[ct]=t.COLOR_ATTACHMENT0+ct;Ne.length=qe.length,$e=!0}}else Ne[0]!==t.BACK&&(Ne[0]=t.BACK,$e=!0);$e&&t.drawBuffers(Ne)}function Ce(le){return h!==le?(t.useProgram(le),h=le,!0):!1}const Ee={[Sh]:t.FUNC_ADD,[rSe]:t.FUNC_SUBTRACT,[iSe]:t.FUNC_REVERSE_SUBTRACT};Ee[oSe]=t.MIN,Ee[sSe]=t.MAX;const q={[aSe]:t.ZERO,[lSe]:t.ONE,[cSe]:t.SRC_COLOR,[p$]:t.SRC_ALPHA,[mSe]:t.SRC_ALPHA_SATURATE,[hSe]:t.DST_COLOR,[dSe]:t.DST_ALPHA,[uSe]:t.ONE_MINUS_SRC_COLOR,[m$]:t.ONE_MINUS_SRC_ALPHA,[pSe]:t.ONE_MINUS_DST_COLOR,[fSe]:t.ONE_MINUS_DST_ALPHA,[gSe]:t.CONSTANT_COLOR,[vSe]:t.ONE_MINUS_CONSTANT_COLOR,[ySe]:t.CONSTANT_ALPHA,[bSe]:t.ONE_MINUS_CONSTANT_ALPHA};function Ve(le,je,Ne,$e,qe,ct,It,Ft,Xn,Kt){if(le===tf){g===!0&&(me(t.BLEND),g=!1);return}if(g===!1&&(se(t.BLEND),g=!0),le!==nSe){if(le!==p||Kt!==C){if((m!==Sh||w!==Sh)&&(t.blendEquation(t.FUNC_ADD),m=Sh,w=Sh),Kt)switch(le){case Xg:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case u6:t.blendFunc(t.ONE,t.ONE);break;case d6:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case f6:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",le);break}else switch(le){case Xg:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case u6:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case d6:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case f6:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",le);break}v=null,_=null,y=null,b=null,x.set(0,0,0),S=0,p=le,C=Kt}return}qe=qe||je,ct=ct||Ne,It=It||$e,(je!==m||qe!==w)&&(t.blendEquationSeparate(Ee[je],Ee[qe]),m=je,w=qe),(Ne!==v||$e!==_||ct!==y||It!==b)&&(t.blendFuncSeparate(q[Ne],q[$e],q[ct],q[It]),v=Ne,_=$e,y=ct,b=It),(Ft.equals(x)===!1||Xn!==S)&&(t.blendColor(Ft.r,Ft.g,Ft.b,Xn),x.copy(Ft),S=Xn),p=le,C=!1}function ze(le,je){le.side===lu?me(t.CULL_FACE):se(t.CULL_FACE);let Ne=le.side===rs;je&&(Ne=!Ne),Fe(Ne),le.blending===Xg&&le.transparent===!1?Ve(tf):Ve(le.blending,le.blendEquation,le.blendSrc,le.blendDst,le.blendEquationAlpha,le.blendSrcAlpha,le.blendDstAlpha,le.blendColor,le.blendAlpha,le.premultipliedAlpha),o.setFunc(le.depthFunc),o.setTest(le.depthTest),o.setMask(le.depthWrite),i.setMask(le.colorWrite);const $e=le.stencilWrite;s.setTest($e),$e&&(s.setMask(le.stencilWriteMask),s.setFunc(le.stencilFunc,le.stencilRef,le.stencilFuncMask),s.setOp(le.stencilFail,le.stencilZFail,le.stencilZPass)),Z(le.polygonOffset,le.polygonOffsetFactor,le.polygonOffsetUnits),le.alphaToCoverage===!0?se(t.SAMPLE_ALPHA_TO_COVERAGE):me(t.SAMPLE_ALPHA_TO_COVERAGE)}function Fe(le){T!==le&&(le?t.frontFace(t.CW):t.frontFace(t.CCW),T=le)}function we(le){le!==J1e?(se(t.CULL_FACE),le!==E&&(le===c6?t.cullFace(t.BACK):le===eSe?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):me(t.CULL_FACE),E=le}function Je(le){le!==k&&(P&&t.lineWidth(le),k=le)}function Z(le,je,Ne){le?(se(t.POLYGON_OFFSET_FILL),(A!==je||O!==Ne)&&(t.polygonOffset(je,Ne),A=je,O=Ne)):me(t.POLYGON_OFFSET_FILL)}function ce(le){le?se(t.SCISSOR_TEST):me(t.SCISSOR_TEST)}function H(le){le===void 0&&(le=t.TEXTURE0+D-1),L!==le&&(t.activeTexture(le),L=le)}function j(le,je,Ne){Ne===void 0&&(L===null?Ne=t.TEXTURE0+D-1:Ne=L);let $e=V[Ne];$e===void 0&&($e={type:void 0,texture:void 0},V[Ne]=$e),($e.type!==le||$e.texture!==je)&&(L!==Ne&&(t.activeTexture(Ne),L=Ne),t.bindTexture(le,je||re[le]),$e.type=le,$e.texture=je)}function ie(){const le=V[L];le!==void 0&&le.type!==void 0&&(t.bindTexture(le.type,null),le.type=void 0,le.texture=void 0)}function z(){try{t.compressedTexImage2D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function K(){try{t.compressedTexImage3D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function F(){try{t.texSubImage2D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function W(){try{t.texSubImage3D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function X(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function ae(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function he(){try{t.texStorage2D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function _e(){try{t.texStorage3D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Be(){try{t.texImage2D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Xe(){try{t.texImage3D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function lt(le){te.equals(le)===!1&&(t.scissor(le.x,le.y,le.z,le.w),te.copy(le))}function tt(le){ne.equals(le)===!1&&(t.viewport(le.x,le.y,le.z,le.w),ne.copy(le))}function ye(le,je){let Ne=l.get(je);Ne===void 0&&(Ne=new WeakMap,l.set(je,Ne));let $e=Ne.get(le);$e===void 0&&($e=t.getUniformBlockIndex(je,le.name),Ne.set(le,$e))}function Ue(le,je){const $e=l.get(je).get(le);a.get(je)!==$e&&(t.uniformBlockBinding(je,$e,le.__bindingPointIndex),a.set(je,$e))}function ut(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),c={},L=null,V={},u={},d=new WeakMap,f=[],h=null,g=!1,p=null,m=null,v=null,_=null,w=null,y=null,b=null,x=new An(0,0,0),S=0,C=!1,T=null,E=null,k=null,A=null,O=null,te.set(0,0,t.canvas.width,t.canvas.height),ne.set(0,0,t.canvas.width,t.canvas.height),i.reset(),o.reset(),s.reset()}return{buffers:{color:i,depth:o,stencil:s},enable:se,disable:me,bindFramebuffer:Me,drawBuffers:de,useProgram:Ce,setBlending:Ve,setMaterial:ze,setFlipSided:Fe,setCullFace:we,setLineWidth:Je,setPolygonOffset:Z,setScissorTest:ce,activeTexture:H,bindTexture:j,unbindTexture:ie,compressedTexImage2D:z,compressedTexImage3D:K,texImage2D:Be,texImage3D:Xe,updateUBOMapping:ye,uniformBlockBinding:Ue,texStorage2D:he,texStorage3D:_e,texSubImage2D:F,texSubImage3D:W,compressedTexSubImage2D:X,compressedTexSubImage3D:ae,scissor:lt,viewport:tt,reset:ut}}function i8(t,e,n,r){const i=XAe(r);switch(n){case One:return t*e;case Dne:return t*e;case Pne:return t*e*2;case Nne:return t*e/i.components*i.byteLength;case KU:return t*e/i.components*i.byteLength;case $ne:return t*e*2/i.components*i.byteLength;case YU:return t*e*2/i.components*i.byteLength;case Rne:return t*e*3/i.components*i.byteLength;case ul:return t*e*4/i.components*i.byteLength;case QU:return t*e*4/i.components*i.byteLength;case _E:case SE:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case CE:case EE:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case w$:case S$:return Math.max(t,16)*Math.max(e,8)/4;case x$:case _$:return Math.max(t,8)*Math.max(e,8)/2;case C$:case E$:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case T$:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case k$:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case A$:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case M$:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case I$:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case O$:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case R$:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case D$:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case P$:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case N$:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case $$:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case L$:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case F$:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case B$:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case U$:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case TE:case z$:case j$:return Math.ceil(t/4)*Math.ceil(e/4)*16;case Lne:case W$:return Math.ceil(t/4)*Math.ceil(e/4)*8;case V$:case H$:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function XAe(t){switch(t){case Du:case Ane:return{byteLength:1,components:1};case Rx:case Mne:case h_:return{byteLength:2,components:1};case qU:case XU:return{byteLength:2,components:4};case _p:case GU:case pu:return{byteLength:4,components:1};case Ine:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}function KAe(t,e,n,r,i,o,s){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new fn,u=new WeakMap;let d;const f=new WeakMap;let h=!1;try{h=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(H,j){return h?new OffscreenCanvas(H,j):BT("canvas")}function p(H,j,ie){let z=1;const K=ce(H);if((K.width>ie||K.height>ie)&&(z=ie/Math.max(K.width,K.height)),z<1)if(typeof HTMLImageElement<"u"&&H instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&H instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&H instanceof ImageBitmap||typeof VideoFrame<"u"&&H instanceof VideoFrame){const F=Math.floor(z*K.width),W=Math.floor(z*K.height);d===void 0&&(d=g(F,W));const X=j?g(F,W):d;return X.width=F,X.height=W,X.getContext("2d").drawImage(H,0,0,F,W),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+K.width+"x"+K.height+") to ("+F+"x"+W+")."),X}else return"data"in H&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+K.width+"x"+K.height+")."),H;return H}function m(H){return H.generateMipmaps&&H.minFilter!==ya&&H.minFilter!==ll}function v(H){t.generateMipmap(H)}function _(H,j,ie,z,K=!1){if(H!==null){if(t[H]!==void 0)return t[H];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+H+"'")}let F=j;if(j===t.RED&&(ie===t.FLOAT&&(F=t.R32F),ie===t.HALF_FLOAT&&(F=t.R16F),ie===t.UNSIGNED_BYTE&&(F=t.R8)),j===t.RED_INTEGER&&(ie===t.UNSIGNED_BYTE&&(F=t.R8UI),ie===t.UNSIGNED_SHORT&&(F=t.R16UI),ie===t.UNSIGNED_INT&&(F=t.R32UI),ie===t.BYTE&&(F=t.R8I),ie===t.SHORT&&(F=t.R16I),ie===t.INT&&(F=t.R32I)),j===t.RG&&(ie===t.FLOAT&&(F=t.RG32F),ie===t.HALF_FLOAT&&(F=t.RG16F),ie===t.UNSIGNED_BYTE&&(F=t.RG8)),j===t.RG_INTEGER&&(ie===t.UNSIGNED_BYTE&&(F=t.RG8UI),ie===t.UNSIGNED_SHORT&&(F=t.RG16UI),ie===t.UNSIGNED_INT&&(F=t.RG32UI),ie===t.BYTE&&(F=t.RG8I),ie===t.SHORT&&(F=t.RG16I),ie===t.INT&&(F=t.RG32I)),j===t.RGB&&ie===t.UNSIGNED_INT_5_9_9_9_REV&&(F=t.RGB9_E5),j===t.RGBA){const W=K?NT:Cn.getTransfer(z);ie===t.FLOAT&&(F=t.RGBA32F),ie===t.HALF_FLOAT&&(F=t.RGBA16F),ie===t.UNSIGNED_BYTE&&(F=W===Qn?t.SRGB8_ALPHA8:t.RGBA8),ie===t.UNSIGNED_SHORT_4_4_4_4&&(F=t.RGBA4),ie===t.UNSIGNED_SHORT_5_5_5_1&&(F=t.RGB5_A1)}return(F===t.R16F||F===t.R32F||F===t.RG16F||F===t.RG32F||F===t.RGBA16F||F===t.RGBA32F)&&e.get("EXT_color_buffer_float"),F}function w(H,j){let ie;return H?j===null||j===_p||j===Sv?ie=t.DEPTH24_STENCIL8:j===pu?ie=t.DEPTH32F_STENCIL8:j===Rx&&(ie=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):j===null||j===_p||j===Sv?ie=t.DEPTH_COMPONENT24:j===pu?ie=t.DEPTH_COMPONENT32F:j===Rx&&(ie=t.DEPTH_COMPONENT16),ie}function y(H,j){return m(H)===!0||H.isFramebufferTexture&&H.minFilter!==ya&&H.minFilter!==ll?Math.log2(Math.max(j.width,j.height))+1:H.mipmaps!==void 0&&H.mipmaps.length>0?H.mipmaps.length:H.isCompressedTexture&&Array.isArray(H.image)?j.mipmaps.length:1}function b(H){const j=H.target;j.removeEventListener("dispose",b),S(j),j.isVideoTexture&&u.delete(j)}function x(H){const j=H.target;j.removeEventListener("dispose",x),T(j)}function S(H){const j=r.get(H);if(j.__webglInit===void 0)return;const ie=H.source,z=f.get(ie);if(z){const K=z[j.__cacheKey];K.usedTimes--,K.usedTimes===0&&C(H),Object.keys(z).length===0&&f.delete(ie)}r.remove(H)}function C(H){const j=r.get(H);t.deleteTexture(j.__webglTexture);const ie=H.source,z=f.get(ie);delete z[j.__cacheKey],s.memory.textures--}function T(H){const j=r.get(H);if(H.depthTexture&&H.depthTexture.dispose(),H.isWebGLCubeRenderTarget)for(let z=0;z<6;z++){if(Array.isArray(j.__webglFramebuffer[z]))for(let K=0;K<j.__webglFramebuffer[z].length;K++)t.deleteFramebuffer(j.__webglFramebuffer[z][K]);else t.deleteFramebuffer(j.__webglFramebuffer[z]);j.__webglDepthbuffer&&t.deleteRenderbuffer(j.__webglDepthbuffer[z])}else{if(Array.isArray(j.__webglFramebuffer))for(let z=0;z<j.__webglFramebuffer.length;z++)t.deleteFramebuffer(j.__webglFramebuffer[z]);else t.deleteFramebuffer(j.__webglFramebuffer);if(j.__webglDepthbuffer&&t.deleteRenderbuffer(j.__webglDepthbuffer),j.__webglMultisampledFramebuffer&&t.deleteFramebuffer(j.__webglMultisampledFramebuffer),j.__webglColorRenderbuffer)for(let z=0;z<j.__webglColorRenderbuffer.length;z++)j.__webglColorRenderbuffer[z]&&t.deleteRenderbuffer(j.__webglColorRenderbuffer[z]);j.__webglDepthRenderbuffer&&t.deleteRenderbuffer(j.__webglDepthRenderbuffer)}const ie=H.textures;for(let z=0,K=ie.length;z<K;z++){const F=r.get(ie[z]);F.__webglTexture&&(t.deleteTexture(F.__webglTexture),s.memory.textures--),r.remove(ie[z])}r.remove(H)}let E=0;function k(){E=0}function A(){const H=E;return H>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+H+" texture units while this GPU supports only "+i.maxTextures),E+=1,H}function O(H){const j=[];return j.push(H.wrapS),j.push(H.wrapT),j.push(H.wrapR||0),j.push(H.magFilter),j.push(H.minFilter),j.push(H.anisotropy),j.push(H.internalFormat),j.push(H.format),j.push(H.type),j.push(H.generateMipmaps),j.push(H.premultiplyAlpha),j.push(H.flipY),j.push(H.unpackAlignment),j.push(H.colorSpace),j.join()}function D(H,j){const ie=r.get(H);if(H.isVideoTexture&&Je(H),H.isRenderTargetTexture===!1&&H.version>0&&ie.__version!==H.version){const z=H.image;if(z===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(z.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ne(ie,H,j);return}}n.bindTexture(t.TEXTURE_2D,ie.__webglTexture,t.TEXTURE0+j)}function P(H,j){const ie=r.get(H);if(H.version>0&&ie.__version!==H.version){ne(ie,H,j);return}n.bindTexture(t.TEXTURE_2D_ARRAY,ie.__webglTexture,t.TEXTURE0+j)}function N(H,j){const ie=r.get(H);if(H.version>0&&ie.__version!==H.version){ne(ie,H,j);return}n.bindTexture(t.TEXTURE_3D,ie.__webglTexture,t.TEXTURE0+j)}function U(H,j){const ie=r.get(H);if(H.version>0&&ie.__version!==H.version){ee(ie,H,j);return}n.bindTexture(t.TEXTURE_CUBE_MAP,ie.__webglTexture,t.TEXTURE0+j)}const L={[y$]:t.REPEAT,[$h]:t.CLAMP_TO_EDGE,[b$]:t.MIRRORED_REPEAT},V={[ya]:t.NEAREST,[$Se]:t.NEAREST_MIPMAP_NEAREST,[zS]:t.NEAREST_MIPMAP_LINEAR,[ll]:t.LINEAR,[zR]:t.LINEAR_MIPMAP_NEAREST,[Lh]:t.LINEAR_MIPMAP_LINEAR},G={[zSe]:t.NEVER,[qSe]:t.ALWAYS,[jSe]:t.LESS,[Fne]:t.LEQUAL,[WSe]:t.EQUAL,[GSe]:t.GEQUAL,[VSe]:t.GREATER,[HSe]:t.NOTEQUAL};function Q(H,j){if(j.type===pu&&e.has("OES_texture_float_linear")===!1&&(j.magFilter===ll||j.magFilter===zR||j.magFilter===zS||j.magFilter===Lh||j.minFilter===ll||j.minFilter===zR||j.minFilter===zS||j.minFilter===Lh)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(H,t.TEXTURE_WRAP_S,L[j.wrapS]),t.texParameteri(H,t.TEXTURE_WRAP_T,L[j.wrapT]),(H===t.TEXTURE_3D||H===t.TEXTURE_2D_ARRAY)&&t.texParameteri(H,t.TEXTURE_WRAP_R,L[j.wrapR]),t.texParameteri(H,t.TEXTURE_MAG_FILTER,V[j.magFilter]),t.texParameteri(H,t.TEXTURE_MIN_FILTER,V[j.minFilter]),j.compareFunction&&(t.texParameteri(H,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(H,t.TEXTURE_COMPARE_FUNC,G[j.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(j.magFilter===ya||j.minFilter!==zS&&j.minFilter!==Lh||j.type===pu&&e.has("OES_texture_float_linear")===!1)return;if(j.anisotropy>1||r.get(j).__currentAnisotropy){const ie=e.get("EXT_texture_filter_anisotropic");t.texParameterf(H,ie.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(j.anisotropy,i.getMaxAnisotropy())),r.get(j).__currentAnisotropy=j.anisotropy}}}function te(H,j){let ie=!1;H.__webglInit===void 0&&(H.__webglInit=!0,j.addEventListener("dispose",b));const z=j.source;let K=f.get(z);K===void 0&&(K={},f.set(z,K));const F=O(j);if(F!==H.__cacheKey){K[F]===void 0&&(K[F]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,ie=!0),K[F].usedTimes++;const W=K[H.__cacheKey];W!==void 0&&(K[H.__cacheKey].usedTimes--,W.usedTimes===0&&C(j)),H.__cacheKey=F,H.__webglTexture=K[F].texture}return ie}function ne(H,j,ie){let z=t.TEXTURE_2D;(j.isDataArrayTexture||j.isCompressedArrayTexture)&&(z=t.TEXTURE_2D_ARRAY),j.isData3DTexture&&(z=t.TEXTURE_3D);const K=te(H,j),F=j.source;n.bindTexture(z,H.__webglTexture,t.TEXTURE0+ie);const W=r.get(F);if(F.version!==W.__version||K===!0){n.activeTexture(t.TEXTURE0+ie);const X=Cn.getPrimaries(Cn.workingColorSpace),ae=j.colorSpace===Md?null:Cn.getPrimaries(j.colorSpace),he=j.colorSpace===Md||X===ae?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,j.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,j.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,he);let _e=p(j.image,!1,i.maxTextureSize);_e=Z(j,_e);const Be=o.convert(j.format,j.colorSpace),Xe=o.convert(j.type);let lt=_(j.internalFormat,Be,Xe,j.colorSpace,j.isVideoTexture);Q(z,j);let tt;const ye=j.mipmaps,Ue=j.isVideoTexture!==!0,ut=W.__version===void 0||K===!0,le=F.dataReady,je=y(j,_e);if(j.isDepthTexture)lt=w(j.format===Cv,j.type),ut&&(Ue?n.texStorage2D(t.TEXTURE_2D,1,lt,_e.width,_e.height):n.texImage2D(t.TEXTURE_2D,0,lt,_e.width,_e.height,0,Be,Xe,null));else if(j.isDataTexture)if(ye.length>0){Ue&&ut&&n.texStorage2D(t.TEXTURE_2D,je,lt,ye[0].width,ye[0].height);for(let Ne=0,$e=ye.length;Ne<$e;Ne++)tt=ye[Ne],Ue?le&&n.texSubImage2D(t.TEXTURE_2D,Ne,0,0,tt.width,tt.height,Be,Xe,tt.data):n.texImage2D(t.TEXTURE_2D,Ne,lt,tt.width,tt.height,0,Be,Xe,tt.data);j.generateMipmaps=!1}else Ue?(ut&&n.texStorage2D(t.TEXTURE_2D,je,lt,_e.width,_e.height),le&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,_e.width,_e.height,Be,Xe,_e.data)):n.texImage2D(t.TEXTURE_2D,0,lt,_e.width,_e.height,0,Be,Xe,_e.data);else if(j.isCompressedTexture)if(j.isCompressedArrayTexture){Ue&&ut&&n.texStorage3D(t.TEXTURE_2D_ARRAY,je,lt,ye[0].width,ye[0].height,_e.depth);for(let Ne=0,$e=ye.length;Ne<$e;Ne++)if(tt=ye[Ne],j.format!==ul)if(Be!==null)if(Ue){if(le)if(j.layerUpdates.size>0){const qe=i8(tt.width,tt.height,j.format,j.type);for(const ct of j.layerUpdates){const It=tt.data.subarray(ct*qe/tt.data.BYTES_PER_ELEMENT,(ct+1)*qe/tt.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Ne,0,0,ct,tt.width,tt.height,1,Be,It,0,0)}j.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Ne,0,0,0,tt.width,tt.height,_e.depth,Be,tt.data,0,0)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,Ne,lt,tt.width,tt.height,_e.depth,0,tt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ue?le&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,Ne,0,0,0,tt.width,tt.height,_e.depth,Be,Xe,tt.data):n.texImage3D(t.TEXTURE_2D_ARRAY,Ne,lt,tt.width,tt.height,_e.depth,0,Be,Xe,tt.data)}else{Ue&&ut&&n.texStorage2D(t.TEXTURE_2D,je,lt,ye[0].width,ye[0].height);for(let Ne=0,$e=ye.length;Ne<$e;Ne++)tt=ye[Ne],j.format!==ul?Be!==null?Ue?le&&n.compressedTexSubImage2D(t.TEXTURE_2D,Ne,0,0,tt.width,tt.height,Be,tt.data):n.compressedTexImage2D(t.TEXTURE_2D,Ne,lt,tt.width,tt.height,0,tt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ue?le&&n.texSubImage2D(t.TEXTURE_2D,Ne,0,0,tt.width,tt.height,Be,Xe,tt.data):n.texImage2D(t.TEXTURE_2D,Ne,lt,tt.width,tt.height,0,Be,Xe,tt.data)}else if(j.isDataArrayTexture)if(Ue){if(ut&&n.texStorage3D(t.TEXTURE_2D_ARRAY,je,lt,_e.width,_e.height,_e.depth),le)if(j.layerUpdates.size>0){const Ne=i8(_e.width,_e.height,j.format,j.type);for(const $e of j.layerUpdates){const qe=_e.data.subarray($e*Ne/_e.data.BYTES_PER_ELEMENT,($e+1)*Ne/_e.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,$e,_e.width,_e.height,1,Be,Xe,qe)}j.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,_e.width,_e.height,_e.depth,Be,Xe,_e.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,lt,_e.width,_e.height,_e.depth,0,Be,Xe,_e.data);else if(j.isData3DTexture)Ue?(ut&&n.texStorage3D(t.TEXTURE_3D,je,lt,_e.width,_e.height,_e.depth),le&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,_e.width,_e.height,_e.depth,Be,Xe,_e.data)):n.texImage3D(t.TEXTURE_3D,0,lt,_e.width,_e.height,_e.depth,0,Be,Xe,_e.data);else if(j.isFramebufferTexture){if(ut)if(Ue)n.texStorage2D(t.TEXTURE_2D,je,lt,_e.width,_e.height);else{let Ne=_e.width,$e=_e.height;for(let qe=0;qe<je;qe++)n.texImage2D(t.TEXTURE_2D,qe,lt,Ne,$e,0,Be,Xe,null),Ne>>=1,$e>>=1}}else if(ye.length>0){if(Ue&&ut){const Ne=ce(ye[0]);n.texStorage2D(t.TEXTURE_2D,je,lt,Ne.width,Ne.height)}for(let Ne=0,$e=ye.length;Ne<$e;Ne++)tt=ye[Ne],Ue?le&&n.texSubImage2D(t.TEXTURE_2D,Ne,0,0,Be,Xe,tt):n.texImage2D(t.TEXTURE_2D,Ne,lt,Be,Xe,tt);j.generateMipmaps=!1}else if(Ue){if(ut){const Ne=ce(_e);n.texStorage2D(t.TEXTURE_2D,je,lt,Ne.width,Ne.height)}le&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Be,Xe,_e)}else n.texImage2D(t.TEXTURE_2D,0,lt,Be,Xe,_e);m(j)&&v(z),W.__version=F.version,j.onUpdate&&j.onUpdate(j)}H.__version=j.version}function ee(H,j,ie){if(j.image.length!==6)return;const z=te(H,j),K=j.source;n.bindTexture(t.TEXTURE_CUBE_MAP,H.__webglTexture,t.TEXTURE0+ie);const F=r.get(K);if(K.version!==F.__version||z===!0){n.activeTexture(t.TEXTURE0+ie);const W=Cn.getPrimaries(Cn.workingColorSpace),X=j.colorSpace===Md?null:Cn.getPrimaries(j.colorSpace),ae=j.colorSpace===Md||W===X?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,j.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,j.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,ae);const he=j.isCompressedTexture||j.image[0].isCompressedTexture,_e=j.image[0]&&j.image[0].isDataTexture,Be=[];for(let $e=0;$e<6;$e++)!he&&!_e?Be[$e]=p(j.image[$e],!0,i.maxCubemapSize):Be[$e]=_e?j.image[$e].image:j.image[$e],Be[$e]=Z(j,Be[$e]);const Xe=Be[0],lt=o.convert(j.format,j.colorSpace),tt=o.convert(j.type),ye=_(j.internalFormat,lt,tt,j.colorSpace),Ue=j.isVideoTexture!==!0,ut=F.__version===void 0||z===!0,le=K.dataReady;let je=y(j,Xe);Q(t.TEXTURE_CUBE_MAP,j);let Ne;if(he){Ue&&ut&&n.texStorage2D(t.TEXTURE_CUBE_MAP,je,ye,Xe.width,Xe.height);for(let $e=0;$e<6;$e++){Ne=Be[$e].mipmaps;for(let qe=0;qe<Ne.length;qe++){const ct=Ne[qe];j.format!==ul?lt!==null?Ue?le&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+$e,qe,0,0,ct.width,ct.height,lt,ct.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+$e,qe,ye,ct.width,ct.height,0,ct.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ue?le&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+$e,qe,0,0,ct.width,ct.height,lt,tt,ct.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+$e,qe,ye,ct.width,ct.height,0,lt,tt,ct.data)}}}else{if(Ne=j.mipmaps,Ue&&ut){Ne.length>0&&je++;const $e=ce(Be[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,je,ye,$e.width,$e.height)}for(let $e=0;$e<6;$e++)if(_e){Ue?le&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0,0,0,Be[$e].width,Be[$e].height,lt,tt,Be[$e].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0,ye,Be[$e].width,Be[$e].height,0,lt,tt,Be[$e].data);for(let qe=0;qe<Ne.length;qe++){const It=Ne[qe].image[$e].image;Ue?le&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+$e,qe+1,0,0,It.width,It.height,lt,tt,It.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+$e,qe+1,ye,It.width,It.height,0,lt,tt,It.data)}}else{Ue?le&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0,0,0,lt,tt,Be[$e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0,ye,lt,tt,Be[$e]);for(let qe=0;qe<Ne.length;qe++){const ct=Ne[qe];Ue?le&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+$e,qe+1,0,0,lt,tt,ct.image[$e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+$e,qe+1,ye,lt,tt,ct.image[$e])}}}m(j)&&v(t.TEXTURE_CUBE_MAP),F.__version=K.version,j.onUpdate&&j.onUpdate(j)}H.__version=j.version}function re(H,j,ie,z,K,F){const W=o.convert(ie.format,ie.colorSpace),X=o.convert(ie.type),ae=_(ie.internalFormat,W,X,ie.colorSpace);if(!r.get(j).__hasExternalTextures){const _e=Math.max(1,j.width>>F),Be=Math.max(1,j.height>>F);K===t.TEXTURE_3D||K===t.TEXTURE_2D_ARRAY?n.texImage3D(K,F,ae,_e,Be,j.depth,0,W,X,null):n.texImage2D(K,F,ae,_e,Be,0,W,X,null)}n.bindFramebuffer(t.FRAMEBUFFER,H),we(j)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,z,K,r.get(ie).__webglTexture,0,Fe(j)):(K===t.TEXTURE_2D||K>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&K<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,z,K,r.get(ie).__webglTexture,F),n.bindFramebuffer(t.FRAMEBUFFER,null)}function se(H,j,ie){if(t.bindRenderbuffer(t.RENDERBUFFER,H),j.depthBuffer){const z=j.depthTexture,K=z&&z.isDepthTexture?z.type:null,F=w(j.stencilBuffer,K),W=j.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,X=Fe(j);we(j)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,X,F,j.width,j.height):ie?t.renderbufferStorageMultisample(t.RENDERBUFFER,X,F,j.width,j.height):t.renderbufferStorage(t.RENDERBUFFER,F,j.width,j.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,W,t.RENDERBUFFER,H)}else{const z=j.textures;for(let K=0;K<z.length;K++){const F=z[K],W=o.convert(F.format,F.colorSpace),X=o.convert(F.type),ae=_(F.internalFormat,W,X,F.colorSpace),he=Fe(j);ie&&we(j)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,he,ae,j.width,j.height):we(j)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,he,ae,j.width,j.height):t.renderbufferStorage(t.RENDERBUFFER,ae,j.width,j.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function me(H,j){if(j&&j.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,H),!(j.depthTexture&&j.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(j.depthTexture).__webglTexture||j.depthTexture.image.width!==j.width||j.depthTexture.image.height!==j.height)&&(j.depthTexture.image.width=j.width,j.depthTexture.image.height=j.height,j.depthTexture.needsUpdate=!0),D(j.depthTexture,0);const z=r.get(j.depthTexture).__webglTexture,K=Fe(j);if(j.depthTexture.format===Kg)we(j)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,z,0,K):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,z,0);else if(j.depthTexture.format===Cv)we(j)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,z,0,K):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,z,0);else throw new Error("Unknown depthTexture format")}function Me(H){const j=r.get(H),ie=H.isWebGLCubeRenderTarget===!0;if(H.depthTexture&&!j.__autoAllocateDepthBuffer){if(ie)throw new Error("target.depthTexture not supported in Cube render targets");me(j.__webglFramebuffer,H)}else if(ie){j.__webglDepthbuffer=[];for(let z=0;z<6;z++)n.bindFramebuffer(t.FRAMEBUFFER,j.__webglFramebuffer[z]),j.__webglDepthbuffer[z]=t.createRenderbuffer(),se(j.__webglDepthbuffer[z],H,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,j.__webglFramebuffer),j.__webglDepthbuffer=t.createRenderbuffer(),se(j.__webglDepthbuffer,H,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function de(H,j,ie){const z=r.get(H);j!==void 0&&re(z.__webglFramebuffer,H,H.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),ie!==void 0&&Me(H)}function Ce(H){const j=H.texture,ie=r.get(H),z=r.get(j);H.addEventListener("dispose",x);const K=H.textures,F=H.isWebGLCubeRenderTarget===!0,W=K.length>1;if(W||(z.__webglTexture===void 0&&(z.__webglTexture=t.createTexture()),z.__version=j.version,s.memory.textures++),F){ie.__webglFramebuffer=[];for(let X=0;X<6;X++)if(j.mipmaps&&j.mipmaps.length>0){ie.__webglFramebuffer[X]=[];for(let ae=0;ae<j.mipmaps.length;ae++)ie.__webglFramebuffer[X][ae]=t.createFramebuffer()}else ie.__webglFramebuffer[X]=t.createFramebuffer()}else{if(j.mipmaps&&j.mipmaps.length>0){ie.__webglFramebuffer=[];for(let X=0;X<j.mipmaps.length;X++)ie.__webglFramebuffer[X]=t.createFramebuffer()}else ie.__webglFramebuffer=t.createFramebuffer();if(W)for(let X=0,ae=K.length;X<ae;X++){const he=r.get(K[X]);he.__webglTexture===void 0&&(he.__webglTexture=t.createTexture(),s.memory.textures++)}if(H.samples>0&&we(H)===!1){ie.__webglMultisampledFramebuffer=t.createFramebuffer(),ie.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,ie.__webglMultisampledFramebuffer);for(let X=0;X<K.length;X++){const ae=K[X];ie.__webglColorRenderbuffer[X]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,ie.__webglColorRenderbuffer[X]);const he=o.convert(ae.format,ae.colorSpace),_e=o.convert(ae.type),Be=_(ae.internalFormat,he,_e,ae.colorSpace,H.isXRRenderTarget===!0),Xe=Fe(H);t.renderbufferStorageMultisample(t.RENDERBUFFER,Xe,Be,H.width,H.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+X,t.RENDERBUFFER,ie.__webglColorRenderbuffer[X])}t.bindRenderbuffer(t.RENDERBUFFER,null),H.depthBuffer&&(ie.__webglDepthRenderbuffer=t.createRenderbuffer(),se(ie.__webglDepthRenderbuffer,H,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(F){n.bindTexture(t.TEXTURE_CUBE_MAP,z.__webglTexture),Q(t.TEXTURE_CUBE_MAP,j);for(let X=0;X<6;X++)if(j.mipmaps&&j.mipmaps.length>0)for(let ae=0;ae<j.mipmaps.length;ae++)re(ie.__webglFramebuffer[X][ae],H,j,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+X,ae);else re(ie.__webglFramebuffer[X],H,j,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+X,0);m(j)&&v(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(W){for(let X=0,ae=K.length;X<ae;X++){const he=K[X],_e=r.get(he);n.bindTexture(t.TEXTURE_2D,_e.__webglTexture),Q(t.TEXTURE_2D,he),re(ie.__webglFramebuffer,H,he,t.COLOR_ATTACHMENT0+X,t.TEXTURE_2D,0),m(he)&&v(t.TEXTURE_2D)}n.unbindTexture()}else{let X=t.TEXTURE_2D;if((H.isWebGL3DRenderTarget||H.isWebGLArrayRenderTarget)&&(X=H.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(X,z.__webglTexture),Q(X,j),j.mipmaps&&j.mipmaps.length>0)for(let ae=0;ae<j.mipmaps.length;ae++)re(ie.__webglFramebuffer[ae],H,j,t.COLOR_ATTACHMENT0,X,ae);else re(ie.__webglFramebuffer,H,j,t.COLOR_ATTACHMENT0,X,0);m(j)&&v(X),n.unbindTexture()}H.depthBuffer&&Me(H)}function Ee(H){const j=H.textures;for(let ie=0,z=j.length;ie<z;ie++){const K=j[ie];if(m(K)){const F=H.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,W=r.get(K).__webglTexture;n.bindTexture(F,W),v(F),n.unbindTexture()}}}const q=[],Ve=[];function ze(H){if(H.samples>0){if(we(H)===!1){const j=H.textures,ie=H.width,z=H.height;let K=t.COLOR_BUFFER_BIT;const F=H.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,W=r.get(H),X=j.length>1;if(X)for(let ae=0;ae<j.length;ae++)n.bindFramebuffer(t.FRAMEBUFFER,W.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ae,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,W.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+ae,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,W.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,W.__webglFramebuffer);for(let ae=0;ae<j.length;ae++){if(H.resolveDepthBuffer&&(H.depthBuffer&&(K|=t.DEPTH_BUFFER_BIT),H.stencilBuffer&&H.resolveStencilBuffer&&(K|=t.STENCIL_BUFFER_BIT)),X){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,W.__webglColorRenderbuffer[ae]);const he=r.get(j[ae]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,he,0)}t.blitFramebuffer(0,0,ie,z,0,0,ie,z,K,t.NEAREST),l===!0&&(q.length=0,Ve.length=0,q.push(t.COLOR_ATTACHMENT0+ae),H.depthBuffer&&H.resolveDepthBuffer===!1&&(q.push(F),Ve.push(F),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,Ve)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,q))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),X)for(let ae=0;ae<j.length;ae++){n.bindFramebuffer(t.FRAMEBUFFER,W.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ae,t.RENDERBUFFER,W.__webglColorRenderbuffer[ae]);const he=r.get(j[ae]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,W.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+ae,t.TEXTURE_2D,he,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,W.__webglMultisampledFramebuffer)}else if(H.depthBuffer&&H.resolveDepthBuffer===!1&&l){const j=H.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[j])}}}function Fe(H){return Math.min(i.maxSamples,H.samples)}function we(H){const j=r.get(H);return H.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&j.__useRenderToTexture!==!1}function Je(H){const j=s.render.frame;u.get(H)!==j&&(u.set(H,j),H.update())}function Z(H,j){const ie=H.colorSpace,z=H.format,K=H.type;return H.isCompressedTexture===!0||H.isVideoTexture===!0||ie!==Rf&&ie!==Md&&(Cn.getTransfer(ie)===Qn?(z!==ul||K!==Du)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ie)),j}function ce(H){return typeof HTMLImageElement<"u"&&H instanceof HTMLImageElement?(c.width=H.naturalWidth||H.width,c.height=H.naturalHeight||H.height):typeof VideoFrame<"u"&&H instanceof VideoFrame?(c.width=H.displayWidth,c.height=H.displayHeight):(c.width=H.width,c.height=H.height),c}this.allocateTextureUnit=A,this.resetTextureUnits=k,this.setTexture2D=D,this.setTexture2DArray=P,this.setTexture3D=N,this.setTextureCube=U,this.rebindTextures=de,this.setupRenderTarget=Ce,this.updateRenderTargetMipmap=Ee,this.updateMultisampleRenderTarget=ze,this.setupDepthRenderbuffer=Me,this.setupFrameBufferTexture=re,this.useMultisampledRTT=we}function YAe(t,e){function n(r,i=Md){let o;const s=Cn.getTransfer(i);if(r===Du)return t.UNSIGNED_BYTE;if(r===qU)return t.UNSIGNED_SHORT_4_4_4_4;if(r===XU)return t.UNSIGNED_SHORT_5_5_5_1;if(r===Ine)return t.UNSIGNED_INT_5_9_9_9_REV;if(r===Ane)return t.BYTE;if(r===Mne)return t.SHORT;if(r===Rx)return t.UNSIGNED_SHORT;if(r===GU)return t.INT;if(r===_p)return t.UNSIGNED_INT;if(r===pu)return t.FLOAT;if(r===h_)return t.HALF_FLOAT;if(r===One)return t.ALPHA;if(r===Rne)return t.RGB;if(r===ul)return t.RGBA;if(r===Dne)return t.LUMINANCE;if(r===Pne)return t.LUMINANCE_ALPHA;if(r===Kg)return t.DEPTH_COMPONENT;if(r===Cv)return t.DEPTH_STENCIL;if(r===Nne)return t.RED;if(r===KU)return t.RED_INTEGER;if(r===$ne)return t.RG;if(r===YU)return t.RG_INTEGER;if(r===QU)return t.RGBA_INTEGER;if(r===_E||r===SE||r===CE||r===EE)if(s===Qn)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(r===_E)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===SE)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===CE)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===EE)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(r===_E)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===SE)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===CE)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===EE)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===x$||r===w$||r===_$||r===S$)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(r===x$)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===w$)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===_$)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===S$)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===C$||r===E$||r===T$)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(r===C$||r===E$)return s===Qn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(r===T$)return s===Qn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===k$||r===A$||r===M$||r===I$||r===O$||r===R$||r===D$||r===P$||r===N$||r===$$||r===L$||r===F$||r===B$||r===U$)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(r===k$)return s===Qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===A$)return s===Qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===M$)return s===Qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===I$)return s===Qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===O$)return s===Qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===R$)return s===Qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===D$)return s===Qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===P$)return s===Qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===N$)return s===Qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===$$)return s===Qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===L$)return s===Qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===F$)return s===Qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===B$)return s===Qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===U$)return s===Qn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===TE||r===z$||r===j$)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(r===TE)return s===Qn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===z$)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===j$)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===Lne||r===W$||r===V$||r===H$)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(r===TE)return o.COMPRESSED_RED_RGTC1_EXT;if(r===W$)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===V$)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===H$)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Sv?t.UNSIGNED_INT_24_8:t[r]!==void 0?t[r]:null}return{convert:n}}class QAe extends Ho{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Fh extends fo{constructor(){super(),this.isGroup=!0,this.type="Group"}}const ZAe={type:"move"};class pD{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Fh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Fh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ae,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ae),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Fh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ae,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ae),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,o=null,s=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){s=!0;for(const p of e.hand.values()){const m=n.getJointPose(p,r),v=this._getHandJoint(c,p);m!==null&&(v.matrix.fromArray(m.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=m.radius),v.visible=m!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],f=u.position.distanceTo(d.position),h=.02,g=.005;c.inputState.pinching&&f>h+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=h-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(o=n.getPose(e.gripSpace,r),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&o!==null&&(i=o),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(ZAe)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=o!==null),c!==null&&(c.visible=s!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new Fh;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}const JAe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,eMe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class tMe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,r){if(this.texture===null){const i=new is,o=e.properties.get(i);o.__webglTexture=n.texture,(n.depthNear!=r.depthNear||n.depthFar!=r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,r=new gf({vertexShader:JAe,fragmentShader:eMe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new ba(new PM(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class nMe extends Iy{constructor(e,n){super();const r=this;let i=null,o=1,s=null,a="local-floor",l=1,c=null,u=null,d=null,f=null,h=null,g=null;const p=new tMe,m=n.getContextAttributes();let v=null,_=null;const w=[],y=[],b=new fn;let x=null;const S=new Ho;S.layers.enable(1),S.viewport=new ci;const C=new Ho;C.layers.enable(2),C.viewport=new ci;const T=[S,C],E=new QAe;E.layers.enable(1),E.layers.enable(2);let k=null,A=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ee){let re=w[ee];return re===void 0&&(re=new pD,w[ee]=re),re.getTargetRaySpace()},this.getControllerGrip=function(ee){let re=w[ee];return re===void 0&&(re=new pD,w[ee]=re),re.getGripSpace()},this.getHand=function(ee){let re=w[ee];return re===void 0&&(re=new pD,w[ee]=re),re.getHandSpace()};function O(ee){const re=y.indexOf(ee.inputSource);if(re===-1)return;const se=w[re];se!==void 0&&(se.update(ee.inputSource,ee.frame,c||s),se.dispatchEvent({type:ee.type,data:ee.inputSource}))}function D(){i.removeEventListener("select",O),i.removeEventListener("selectstart",O),i.removeEventListener("selectend",O),i.removeEventListener("squeeze",O),i.removeEventListener("squeezestart",O),i.removeEventListener("squeezeend",O),i.removeEventListener("end",D),i.removeEventListener("inputsourceschange",P);for(let ee=0;ee<w.length;ee++){const re=y[ee];re!==null&&(y[ee]=null,w[ee].disconnect(re))}k=null,A=null,p.reset(),e.setRenderTarget(v),h=null,f=null,d=null,i=null,_=null,ne.stop(),r.isPresenting=!1,e.setPixelRatio(x),e.setSize(b.width,b.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ee){o=ee,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ee){a=ee,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||s},this.setReferenceSpace=function(ee){c=ee},this.getBaseLayer=function(){return f!==null?f:h},this.getBinding=function(){return d},this.getFrame=function(){return g},this.getSession=function(){return i},this.setSession=async function(ee){if(i=ee,i!==null){if(v=e.getRenderTarget(),i.addEventListener("select",O),i.addEventListener("selectstart",O),i.addEventListener("selectend",O),i.addEventListener("squeeze",O),i.addEventListener("squeezestart",O),i.addEventListener("squeezeend",O),i.addEventListener("end",D),i.addEventListener("inputsourceschange",P),m.xrCompatible!==!0&&await n.makeXRCompatible(),x=e.getPixelRatio(),e.getSize(b),i.renderState.layers===void 0){const re={antialias:m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:o};h=new XRWebGLLayer(i,n,re),i.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),_=new Sp(h.framebufferWidth,h.framebufferHeight,{format:ul,type:Du,colorSpace:e.outputColorSpace,stencilBuffer:m.stencil})}else{let re=null,se=null,me=null;m.depth&&(me=m.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,re=m.stencil?Cv:Kg,se=m.stencil?Sv:_p);const Me={colorFormat:n.RGBA8,depthFormat:me,scaleFactor:o};d=new XRWebGLBinding(i,n),f=d.createProjectionLayer(Me),i.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),_=new Sp(f.textureWidth,f.textureHeight,{format:ul,type:Du,depthTexture:new Qne(f.textureWidth,f.textureHeight,se,void 0,void 0,void 0,void 0,void 0,void 0,re),stencilBuffer:m.stencil,colorSpace:e.outputColorSpace,samples:m.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1})}_.isXRRenderTarget=!0,this.setFoveation(l),c=null,s=await i.requestReferenceSpace(a),ne.setContext(i),ne.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return p.getDepthTexture()};function P(ee){for(let re=0;re<ee.removed.length;re++){const se=ee.removed[re],me=y.indexOf(se);me>=0&&(y[me]=null,w[me].disconnect(se))}for(let re=0;re<ee.added.length;re++){const se=ee.added[re];let me=y.indexOf(se);if(me===-1){for(let de=0;de<w.length;de++)if(de>=y.length){y.push(se),me=de;break}else if(y[de]===null){y[de]=se,me=de;break}if(me===-1)break}const Me=w[me];Me&&Me.connect(se)}}const N=new Ae,U=new Ae;function L(ee,re,se){N.setFromMatrixPosition(re.matrixWorld),U.setFromMatrixPosition(se.matrixWorld);const me=N.distanceTo(U),Me=re.projectionMatrix.elements,de=se.projectionMatrix.elements,Ce=Me[14]/(Me[10]-1),Ee=Me[14]/(Me[10]+1),q=(Me[9]+1)/Me[5],Ve=(Me[9]-1)/Me[5],ze=(Me[8]-1)/Me[0],Fe=(de[8]+1)/de[0],we=Ce*ze,Je=Ce*Fe,Z=me/(-ze+Fe),ce=Z*-ze;re.matrixWorld.decompose(ee.position,ee.quaternion,ee.scale),ee.translateX(ce),ee.translateZ(Z),ee.matrixWorld.compose(ee.position,ee.quaternion,ee.scale),ee.matrixWorldInverse.copy(ee.matrixWorld).invert();const H=Ce+Z,j=Ee+Z,ie=we-ce,z=Je+(me-ce),K=q*Ee/j*H,F=Ve*Ee/j*H;ee.projectionMatrix.makePerspective(ie,z,K,F,H,j),ee.projectionMatrixInverse.copy(ee.projectionMatrix).invert()}function V(ee,re){re===null?ee.matrixWorld.copy(ee.matrix):ee.matrixWorld.multiplyMatrices(re.matrixWorld,ee.matrix),ee.matrixWorldInverse.copy(ee.matrixWorld).invert()}this.updateCamera=function(ee){if(i===null)return;p.texture!==null&&(ee.near=p.depthNear,ee.far=p.depthFar),E.near=C.near=S.near=ee.near,E.far=C.far=S.far=ee.far,(k!==E.near||A!==E.far)&&(i.updateRenderState({depthNear:E.near,depthFar:E.far}),k=E.near,A=E.far,S.near=k,S.far=A,C.near=k,C.far=A,S.updateProjectionMatrix(),C.updateProjectionMatrix(),ee.updateProjectionMatrix());const re=ee.parent,se=E.cameras;V(E,re);for(let me=0;me<se.length;me++)V(se[me],re);se.length===2?L(E,S,C):E.projectionMatrix.copy(S.projectionMatrix),G(ee,E,re)};function G(ee,re,se){se===null?ee.matrix.copy(re.matrixWorld):(ee.matrix.copy(se.matrixWorld),ee.matrix.invert(),ee.matrix.multiply(re.matrixWorld)),ee.matrix.decompose(ee.position,ee.quaternion,ee.scale),ee.updateMatrixWorld(!0),ee.projectionMatrix.copy(re.projectionMatrix),ee.projectionMatrixInverse.copy(re.projectionMatrixInverse),ee.isPerspectiveCamera&&(ee.fov=G$*2*Math.atan(1/ee.projectionMatrix.elements[5]),ee.zoom=1)}this.getCamera=function(){return E},this.getFoveation=function(){if(!(f===null&&h===null))return l},this.setFoveation=function(ee){l=ee,f!==null&&(f.fixedFoveation=ee),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=ee)},this.hasDepthSensing=function(){return p.texture!==null},this.getDepthSensingMesh=function(){return p.getMesh(E)};let Q=null;function te(ee,re){if(u=re.getViewerPose(c||s),g=re,u!==null){const se=u.views;h!==null&&(e.setRenderTargetFramebuffer(_,h.framebuffer),e.setRenderTarget(_));let me=!1;se.length!==E.cameras.length&&(E.cameras.length=0,me=!0);for(let de=0;de<se.length;de++){const Ce=se[de];let Ee=null;if(h!==null)Ee=h.getViewport(Ce);else{const Ve=d.getViewSubImage(f,Ce);Ee=Ve.viewport,de===0&&(e.setRenderTargetTextures(_,Ve.colorTexture,f.ignoreDepthValues?void 0:Ve.depthStencilTexture),e.setRenderTarget(_))}let q=T[de];q===void 0&&(q=new Ho,q.layers.enable(de),q.viewport=new ci,T[de]=q),q.matrix.fromArray(Ce.transform.matrix),q.matrix.decompose(q.position,q.quaternion,q.scale),q.projectionMatrix.fromArray(Ce.projectionMatrix),q.projectionMatrixInverse.copy(q.projectionMatrix).invert(),q.viewport.set(Ee.x,Ee.y,Ee.width,Ee.height),de===0&&(E.matrix.copy(q.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),me===!0&&E.cameras.push(q)}const Me=i.enabledFeatures;if(Me&&Me.includes("depth-sensing")){const de=d.getDepthInformation(se[0]);de&&de.isValid&&de.texture&&p.init(e,de,i.renderState)}}for(let se=0;se<w.length;se++){const me=y[se],Me=w[se];me!==null&&Me!==void 0&&Me.update(me,re,c||s)}Q&&Q(ee,re),re.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:re}),g=null}const ne=new Kne;ne.setAnimationLoop(te),this.setAnimationLoop=function(ee){Q=ee},this.dispose=function(){}}}const rh=new Pu,rMe=new Nr;function iMe(t,e){function n(m,v){m.matrixAutoUpdate===!0&&m.updateMatrix(),v.value.copy(m.matrix)}function r(m,v){v.color.getRGB(m.fogColor.value,Gne(t)),v.isFog?(m.fogNear.value=v.near,m.fogFar.value=v.far):v.isFogExp2&&(m.fogDensity.value=v.density)}function i(m,v,_,w,y){v.isMeshBasicMaterial||v.isMeshLambertMaterial?o(m,v):v.isMeshToonMaterial?(o(m,v),d(m,v)):v.isMeshPhongMaterial?(o(m,v),u(m,v)):v.isMeshStandardMaterial?(o(m,v),f(m,v),v.isMeshPhysicalMaterial&&h(m,v,y)):v.isMeshMatcapMaterial?(o(m,v),g(m,v)):v.isMeshDepthMaterial?o(m,v):v.isMeshDistanceMaterial?(o(m,v),p(m,v)):v.isMeshNormalMaterial?o(m,v):v.isLineBasicMaterial?(s(m,v),v.isLineDashedMaterial&&a(m,v)):v.isPointsMaterial?l(m,v,_,w):v.isSpriteMaterial?c(m,v):v.isShadowMaterial?(m.color.value.copy(v.color),m.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function o(m,v){m.opacity.value=v.opacity,v.color&&m.diffuse.value.copy(v.color),v.emissive&&m.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(m.map.value=v.map,n(v.map,m.mapTransform)),v.alphaMap&&(m.alphaMap.value=v.alphaMap,n(v.alphaMap,m.alphaMapTransform)),v.bumpMap&&(m.bumpMap.value=v.bumpMap,n(v.bumpMap,m.bumpMapTransform),m.bumpScale.value=v.bumpScale,v.side===rs&&(m.bumpScale.value*=-1)),v.normalMap&&(m.normalMap.value=v.normalMap,n(v.normalMap,m.normalMapTransform),m.normalScale.value.copy(v.normalScale),v.side===rs&&m.normalScale.value.negate()),v.displacementMap&&(m.displacementMap.value=v.displacementMap,n(v.displacementMap,m.displacementMapTransform),m.displacementScale.value=v.displacementScale,m.displacementBias.value=v.displacementBias),v.emissiveMap&&(m.emissiveMap.value=v.emissiveMap,n(v.emissiveMap,m.emissiveMapTransform)),v.specularMap&&(m.specularMap.value=v.specularMap,n(v.specularMap,m.specularMapTransform)),v.alphaTest>0&&(m.alphaTest.value=v.alphaTest);const _=e.get(v),w=_.envMap,y=_.envMapRotation;w&&(m.envMap.value=w,rh.copy(y),rh.x*=-1,rh.y*=-1,rh.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(rh.y*=-1,rh.z*=-1),m.envMapRotation.value.setFromMatrix4(rMe.makeRotationFromEuler(rh)),m.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=v.reflectivity,m.ior.value=v.ior,m.refractionRatio.value=v.refractionRatio),v.lightMap&&(m.lightMap.value=v.lightMap,m.lightMapIntensity.value=v.lightMapIntensity,n(v.lightMap,m.lightMapTransform)),v.aoMap&&(m.aoMap.value=v.aoMap,m.aoMapIntensity.value=v.aoMapIntensity,n(v.aoMap,m.aoMapTransform))}function s(m,v){m.diffuse.value.copy(v.color),m.opacity.value=v.opacity,v.map&&(m.map.value=v.map,n(v.map,m.mapTransform))}function a(m,v){m.dashSize.value=v.dashSize,m.totalSize.value=v.dashSize+v.gapSize,m.scale.value=v.scale}function l(m,v,_,w){m.diffuse.value.copy(v.color),m.opacity.value=v.opacity,m.size.value=v.size*_,m.scale.value=w*.5,v.map&&(m.map.value=v.map,n(v.map,m.uvTransform)),v.alphaMap&&(m.alphaMap.value=v.alphaMap,n(v.alphaMap,m.alphaMapTransform)),v.alphaTest>0&&(m.alphaTest.value=v.alphaTest)}function c(m,v){m.diffuse.value.copy(v.color),m.opacity.value=v.opacity,m.rotation.value=v.rotation,v.map&&(m.map.value=v.map,n(v.map,m.mapTransform)),v.alphaMap&&(m.alphaMap.value=v.alphaMap,n(v.alphaMap,m.alphaMapTransform)),v.alphaTest>0&&(m.alphaTest.value=v.alphaTest)}function u(m,v){m.specular.value.copy(v.specular),m.shininess.value=Math.max(v.shininess,1e-4)}function d(m,v){v.gradientMap&&(m.gradientMap.value=v.gradientMap)}function f(m,v){m.metalness.value=v.metalness,v.metalnessMap&&(m.metalnessMap.value=v.metalnessMap,n(v.metalnessMap,m.metalnessMapTransform)),m.roughness.value=v.roughness,v.roughnessMap&&(m.roughnessMap.value=v.roughnessMap,n(v.roughnessMap,m.roughnessMapTransform)),v.envMap&&(m.envMapIntensity.value=v.envMapIntensity)}function h(m,v,_){m.ior.value=v.ior,v.sheen>0&&(m.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),m.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(m.sheenColorMap.value=v.sheenColorMap,n(v.sheenColorMap,m.sheenColorMapTransform)),v.sheenRoughnessMap&&(m.sheenRoughnessMap.value=v.sheenRoughnessMap,n(v.sheenRoughnessMap,m.sheenRoughnessMapTransform))),v.clearcoat>0&&(m.clearcoat.value=v.clearcoat,m.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(m.clearcoatMap.value=v.clearcoatMap,n(v.clearcoatMap,m.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,n(v.clearcoatRoughnessMap,m.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(m.clearcoatNormalMap.value=v.clearcoatNormalMap,n(v.clearcoatNormalMap,m.clearcoatNormalMapTransform),m.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===rs&&m.clearcoatNormalScale.value.negate())),v.dispersion>0&&(m.dispersion.value=v.dispersion),v.iridescence>0&&(m.iridescence.value=v.iridescence,m.iridescenceIOR.value=v.iridescenceIOR,m.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(m.iridescenceMap.value=v.iridescenceMap,n(v.iridescenceMap,m.iridescenceMapTransform)),v.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=v.iridescenceThicknessMap,n(v.iridescenceThicknessMap,m.iridescenceThicknessMapTransform))),v.transmission>0&&(m.transmission.value=v.transmission,m.transmissionSamplerMap.value=_.texture,m.transmissionSamplerSize.value.set(_.width,_.height),v.transmissionMap&&(m.transmissionMap.value=v.transmissionMap,n(v.transmissionMap,m.transmissionMapTransform)),m.thickness.value=v.thickness,v.thicknessMap&&(m.thicknessMap.value=v.thicknessMap,n(v.thicknessMap,m.thicknessMapTransform)),m.attenuationDistance.value=v.attenuationDistance,m.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(m.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(m.anisotropyMap.value=v.anisotropyMap,n(v.anisotropyMap,m.anisotropyMapTransform))),m.specularIntensity.value=v.specularIntensity,m.specularColor.value.copy(v.specularColor),v.specularColorMap&&(m.specularColorMap.value=v.specularColorMap,n(v.specularColorMap,m.specularColorMapTransform)),v.specularIntensityMap&&(m.specularIntensityMap.value=v.specularIntensityMap,n(v.specularIntensityMap,m.specularIntensityMapTransform))}function g(m,v){v.matcap&&(m.matcap.value=v.matcap)}function p(m,v){const _=e.get(v).light;m.referencePosition.value.setFromMatrixPosition(_.matrixWorld),m.nearDistance.value=_.shadow.camera.near,m.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function oMe(t,e,n,r){let i={},o={},s=[];const a=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(_,w){const y=w.program;r.uniformBlockBinding(_,y)}function c(_,w){let y=i[_.id];y===void 0&&(g(_),y=u(_),i[_.id]=y,_.addEventListener("dispose",m));const b=w.program;r.updateUBOMapping(_,b);const x=e.render.frame;o[_.id]!==x&&(f(_),o[_.id]=x)}function u(_){const w=d();_.__bindingPointIndex=w;const y=t.createBuffer(),b=_.__size,x=_.usage;return t.bindBuffer(t.UNIFORM_BUFFER,y),t.bufferData(t.UNIFORM_BUFFER,b,x),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,w,y),y}function d(){for(let _=0;_<a;_++)if(s.indexOf(_)===-1)return s.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(_){const w=i[_.id],y=_.uniforms,b=_.__cache;t.bindBuffer(t.UNIFORM_BUFFER,w);for(let x=0,S=y.length;x<S;x++){const C=Array.isArray(y[x])?y[x]:[y[x]];for(let T=0,E=C.length;T<E;T++){const k=C[T];if(h(k,x,T,b)===!0){const A=k.__offset,O=Array.isArray(k.value)?k.value:[k.value];let D=0;for(let P=0;P<O.length;P++){const N=O[P],U=p(N);typeof N=="number"||typeof N=="boolean"?(k.__data[0]=N,t.bufferSubData(t.UNIFORM_BUFFER,A+D,k.__data)):N.isMatrix3?(k.__data[0]=N.elements[0],k.__data[1]=N.elements[1],k.__data[2]=N.elements[2],k.__data[3]=0,k.__data[4]=N.elements[3],k.__data[5]=N.elements[4],k.__data[6]=N.elements[5],k.__data[7]=0,k.__data[8]=N.elements[6],k.__data[9]=N.elements[7],k.__data[10]=N.elements[8],k.__data[11]=0):(N.toArray(k.__data,D),D+=U.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,A,k.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function h(_,w,y,b){const x=_.value,S=w+"_"+y;if(b[S]===void 0)return typeof x=="number"||typeof x=="boolean"?b[S]=x:b[S]=x.clone(),!0;{const C=b[S];if(typeof x=="number"||typeof x=="boolean"){if(C!==x)return b[S]=x,!0}else if(C.equals(x)===!1)return C.copy(x),!0}return!1}function g(_){const w=_.uniforms;let y=0;const b=16;for(let S=0,C=w.length;S<C;S++){const T=Array.isArray(w[S])?w[S]:[w[S]];for(let E=0,k=T.length;E<k;E++){const A=T[E],O=Array.isArray(A.value)?A.value:[A.value];for(let D=0,P=O.length;D<P;D++){const N=O[D],U=p(N),L=y%b,V=L%U.boundary,G=L+V;y+=V,G!==0&&b-G<U.storage&&(y+=b-G),A.__data=new Float32Array(U.storage/Float32Array.BYTES_PER_ELEMENT),A.__offset=y,y+=U.storage}}}const x=y%b;return x>0&&(y+=b-x),_.__size=y,_.__cache={},this}function p(_){const w={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(w.boundary=4,w.storage=4):_.isVector2?(w.boundary=8,w.storage=8):_.isVector3||_.isColor?(w.boundary=16,w.storage=12):_.isVector4?(w.boundary=16,w.storage=16):_.isMatrix3?(w.boundary=48,w.storage=48):_.isMatrix4?(w.boundary=64,w.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),w}function m(_){const w=_.target;w.removeEventListener("dispose",m);const y=s.indexOf(w.__bindingPointIndex);s.splice(y,1),t.deleteBuffer(i[w.id]),delete i[w.id],delete o[w.id]}function v(){for(const _ in i)t.deleteBuffer(i[_]);s=[],i={},o={}}return{bind:l,update:c,dispose:v}}class nz{constructor(e={}){const{canvas:n=KSe(),context:r=null,depth:i=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let f;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");f=r.getContextAttributes().alpha}else f=s;const h=new Uint32Array(4),g=new Int32Array(4);let p=null,m=null;const v=[],_=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ul,this.toneMapping=nf,this.toneMappingExposure=1;const w=this;let y=!1,b=0,x=0,S=null,C=-1,T=null;const E=new ci,k=new ci;let A=null;const O=new An(0);let D=0,P=n.width,N=n.height,U=1,L=null,V=null;const G=new ci(0,0,P,N),Q=new ci(0,0,P,N);let te=!1;const ne=new ez;let ee=!1,re=!1;const se=new Nr,me=new Ae,Me=new ci,de={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ce=!1;function Ee(){return S===null?U:1}let q=r;function Ve(J,be){return n.getContext(J,be)}try{const J={alpha:!0,depth:i,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${HU}`),n.addEventListener("webglcontextlost",Ne,!1),n.addEventListener("webglcontextrestored",$e,!1),n.addEventListener("webglcontextcreationerror",qe,!1),q===null){const be="webgl2";if(q=Ve(be,J),q===null)throw Ve(be)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(J){throw console.error("THREE.WebGLRenderer: "+J.message),J}let ze,Fe,we,Je,Z,ce,H,j,ie,z,K,F,W,X,ae,he,_e,Be,Xe,lt,tt,ye,Ue,ut;function le(){ze=new fke(q),ze.init(),ye=new YAe(q,ze),Fe=new ske(q,ze,e,ye),we=new qAe(q),Je=new mke(q),Z=new DAe,ce=new KAe(q,ze,we,Z,Fe,ye,Je),H=new lke(w),j=new dke(w),ie=new _Ce(q),Ue=new ike(q,ie),z=new hke(q,ie,Je,Ue),K=new vke(q,z,ie,Je),Xe=new gke(q,Fe,ce),he=new ake(Z),F=new RAe(w,H,j,ze,Fe,Ue,he),W=new iMe(w,Z),X=new NAe,ae=new zAe(ze),Be=new rke(w,H,j,we,K,f,l),_e=new GAe(w,K,Fe),ut=new oMe(q,Je,Fe,we),lt=new oke(q,ze,Je),tt=new pke(q,ze,Je),Je.programs=F.programs,w.capabilities=Fe,w.extensions=ze,w.properties=Z,w.renderLists=X,w.shadowMap=_e,w.state=we,w.info=Je}le();const je=new nMe(w,q);this.xr=je,this.getContext=function(){return q},this.getContextAttributes=function(){return q.getContextAttributes()},this.forceContextLoss=function(){const J=ze.get("WEBGL_lose_context");J&&J.loseContext()},this.forceContextRestore=function(){const J=ze.get("WEBGL_lose_context");J&&J.restoreContext()},this.getPixelRatio=function(){return U},this.setPixelRatio=function(J){J!==void 0&&(U=J,this.setSize(P,N,!1))},this.getSize=function(J){return J.set(P,N)},this.setSize=function(J,be,ke=!0){if(je.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}P=J,N=be,n.width=Math.floor(J*U),n.height=Math.floor(be*U),ke===!0&&(n.style.width=J+"px",n.style.height=be+"px"),this.setViewport(0,0,J,be)},this.getDrawingBufferSize=function(J){return J.set(P*U,N*U).floor()},this.setDrawingBufferSize=function(J,be,ke){P=J,N=be,U=ke,n.width=Math.floor(J*ke),n.height=Math.floor(be*ke),this.setViewport(0,0,J,be)},this.getCurrentViewport=function(J){return J.copy(E)},this.getViewport=function(J){return J.copy(G)},this.setViewport=function(J,be,ke,Ie){J.isVector4?G.set(J.x,J.y,J.z,J.w):G.set(J,be,ke,Ie),we.viewport(E.copy(G).multiplyScalar(U).round())},this.getScissor=function(J){return J.copy(Q)},this.setScissor=function(J,be,ke,Ie){J.isVector4?Q.set(J.x,J.y,J.z,J.w):Q.set(J,be,ke,Ie),we.scissor(k.copy(Q).multiplyScalar(U).round())},this.getScissorTest=function(){return te},this.setScissorTest=function(J){we.setScissorTest(te=J)},this.setOpaqueSort=function(J){L=J},this.setTransparentSort=function(J){V=J},this.getClearColor=function(J){return J.copy(Be.getClearColor())},this.setClearColor=function(){Be.setClearColor.apply(Be,arguments)},this.getClearAlpha=function(){return Be.getClearAlpha()},this.setClearAlpha=function(){Be.setClearAlpha.apply(Be,arguments)},this.clear=function(J=!0,be=!0,ke=!0){let Ie=0;if(J){let xe=!1;if(S!==null){const et=S.texture.format;xe=et===QU||et===YU||et===KU}if(xe){const et=S.texture.type,dt=et===Du||et===_p||et===Rx||et===Sv||et===qU||et===XU,bt=Be.getClearColor(),xt=Be.getClearAlpha(),Dt=bt.r,Pt=bt.g,kt=bt.b;dt?(h[0]=Dt,h[1]=Pt,h[2]=kt,h[3]=xt,q.clearBufferuiv(q.COLOR,0,h)):(g[0]=Dt,g[1]=Pt,g[2]=kt,g[3]=xt,q.clearBufferiv(q.COLOR,0,g))}else Ie|=q.COLOR_BUFFER_BIT}be&&(Ie|=q.DEPTH_BUFFER_BIT),ke&&(Ie|=q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),q.clear(Ie)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Ne,!1),n.removeEventListener("webglcontextrestored",$e,!1),n.removeEventListener("webglcontextcreationerror",qe,!1),X.dispose(),ae.dispose(),Z.dispose(),H.dispose(),j.dispose(),K.dispose(),Ue.dispose(),ut.dispose(),F.dispose(),je.dispose(),je.removeEventListener("sessionstart",Br),je.removeEventListener("sessionend",v0),yo.stop()};function Ne(J){J.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function $e(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const J=Je.autoReset,be=_e.enabled,ke=_e.autoUpdate,Ie=_e.needsUpdate,xe=_e.type;le(),Je.autoReset=J,_e.enabled=be,_e.autoUpdate=ke,_e.needsUpdate=Ie,_e.type=xe}function qe(J){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",J.statusMessage)}function ct(J){const be=J.target;be.removeEventListener("dispose",ct),It(be)}function It(J){Ft(J),Z.remove(J)}function Ft(J){const be=Z.get(J).programs;be!==void 0&&(be.forEach(function(ke){F.releaseProgram(ke)}),J.isShaderMaterial&&F.releaseShaderCache(J))}this.renderBufferDirect=function(J,be,ke,Ie,xe,et){be===null&&(be=de);const dt=xe.isMesh&&xe.matrixWorld.determinant()<0,bt=Tve(J,be,ke,Ie,xe);we.setMaterial(Ie,dt);let xt=ke.index,Dt=1;if(Ie.wireframe===!0){if(xt=z.getWireframeAttribute(ke),xt===void 0)return;Dt=2}const Pt=ke.drawRange,kt=ke.attributes.position;let xn=Pt.start*Dt,gr=(Pt.start+Pt.count)*Dt;et!==null&&(xn=Math.max(xn,et.start*Dt),gr=Math.min(gr,(et.start+et.count)*Dt)),xt!==null?(xn=Math.max(xn,0),gr=Math.min(gr,xt.count)):kt!=null&&(xn=Math.max(xn,0),gr=Math.min(gr,kt.count));const vr=gr-xn;if(vr<0||vr===1/0)return;Ue.setup(xe,Ie,bt,ke,xt);let ps,wn=lt;if(xt!==null&&(ps=ie.get(xt),wn=tt,wn.setIndex(ps)),xe.isMesh)Ie.wireframe===!0?(we.setLineWidth(Ie.wireframeLinewidth*Ee()),wn.setMode(q.LINES)):wn.setMode(q.TRIANGLES);else if(xe.isLine){let Ct=Ie.linewidth;Ct===void 0&&(Ct=1),we.setLineWidth(Ct*Ee()),xe.isLineSegments?wn.setMode(q.LINES):xe.isLineLoop?wn.setMode(q.LINE_LOOP):wn.setMode(q.LINE_STRIP)}else xe.isPoints?wn.setMode(q.POINTS):xe.isSprite&&wn.setMode(q.TRIANGLES);if(xe.isBatchedMesh)if(xe._multiDrawInstances!==null)wn.renderMultiDrawInstances(xe._multiDrawStarts,xe._multiDrawCounts,xe._multiDrawCount,xe._multiDrawInstances);else if(ze.get("WEBGL_multi_draw"))wn.renderMultiDraw(xe._multiDrawStarts,xe._multiDrawCounts,xe._multiDrawCount);else{const Ct=xe._multiDrawStarts,$i=xe._multiDrawCounts,_n=xe._multiDrawCount,Ha=xt?ie.get(xt).bytesPerElement:1,bm=Z.get(Ie).currentProgram.getUniforms();for(let ms=0;ms<_n;ms++)bm.setValue(q,"_gl_DrawID",ms),wn.render(Ct[ms]/Ha,$i[ms])}else if(xe.isInstancedMesh)wn.renderInstances(xn,vr,xe.count);else if(ke.isInstancedBufferGeometry){const Ct=ke._maxInstanceCount!==void 0?ke._maxInstanceCount:1/0,$i=Math.min(ke.instanceCount,Ct);wn.renderInstances(xn,vr,$i)}else wn.render(xn,vr)};function Xn(J,be,ke){J.transparent===!0&&J.side===lu&&J.forceSinglePass===!1?(J.side=rs,J.needsUpdate=!0,bS(J,be,ke),J.side=mf,J.needsUpdate=!0,bS(J,be,ke),J.side=lu):bS(J,be,ke)}this.compile=function(J,be,ke=null){ke===null&&(ke=J),m=ae.get(ke),m.init(be),_.push(m),ke.traverseVisible(function(xe){xe.isLight&&xe.layers.test(be.layers)&&(m.pushLight(xe),xe.castShadow&&m.pushShadow(xe))}),J!==ke&&J.traverseVisible(function(xe){xe.isLight&&xe.layers.test(be.layers)&&(m.pushLight(xe),xe.castShadow&&m.pushShadow(xe))}),m.setupLights();const Ie=new Set;return J.traverse(function(xe){const et=xe.material;if(et)if(Array.isArray(et))for(let dt=0;dt<et.length;dt++){const bt=et[dt];Xn(bt,ke,xe),Ie.add(bt)}else Xn(et,ke,xe),Ie.add(et)}),_.pop(),m=null,Ie},this.compileAsync=function(J,be,ke=null){const Ie=this.compile(J,be,ke);return new Promise(xe=>{function et(){if(Ie.forEach(function(dt){Z.get(dt).currentProgram.isReady()&&Ie.delete(dt)}),Ie.size===0){xe(J);return}setTimeout(et,10)}ze.get("KHR_parallel_shader_compile")!==null?et():setTimeout(et,10)})};let Kt=null;function ei(J){Kt&&Kt(J)}function Br(){yo.stop()}function v0(){yo.start()}const yo=new Kne;yo.setAnimationLoop(ei),typeof self<"u"&&yo.setContext(self),this.setAnimationLoop=function(J){Kt=J,je.setAnimationLoop(J),J===null?yo.stop():yo.start()},je.addEventListener("sessionstart",Br),je.addEventListener("sessionend",v0),this.render=function(J,be){if(be!==void 0&&be.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(y===!0)return;if(J.matrixWorldAutoUpdate===!0&&J.updateMatrixWorld(),be.parent===null&&be.matrixWorldAutoUpdate===!0&&be.updateMatrixWorld(),je.enabled===!0&&je.isPresenting===!0&&(je.cameraAutoUpdate===!0&&je.updateCamera(be),be=je.getCamera()),J.isScene===!0&&J.onBeforeRender(w,J,be,S),m=ae.get(J,_.length),m.init(be),_.push(m),se.multiplyMatrices(be.projectionMatrix,be.matrixWorldInverse),ne.setFromProjectionMatrix(se),re=this.localClippingEnabled,ee=he.init(this.clippingPlanes,re),p=X.get(J,v.length),p.init(),v.push(p),je.enabled===!0&&je.isPresenting===!0){const et=w.xr.getDepthSensingMesh();et!==null&&y0(et,be,-1/0,w.sortObjects)}y0(J,be,0,w.sortObjects),p.finish(),w.sortObjects===!0&&p.sort(L,V),Ce=je.enabled===!1||je.isPresenting===!1||je.hasDepthSensing()===!1,Ce&&Be.addToRenderList(p,J),this.info.render.frame++,ee===!0&&he.beginShadows();const ke=m.state.shadowsArray;_e.render(ke,J,be),ee===!0&&he.endShadows(),this.info.autoReset===!0&&this.info.reset();const Ie=p.opaque,xe=p.transmissive;if(m.setupLights(),be.isArrayCamera){const et=be.cameras;if(xe.length>0)for(let dt=0,bt=et.length;dt<bt;dt++){const xt=et[dt];JH(Ie,xe,J,xt)}Ce&&Be.render(J);for(let dt=0,bt=et.length;dt<bt;dt++){const xt=et[dt];ZH(p,J,xt,xt.viewport)}}else xe.length>0&&JH(Ie,xe,J,be),Ce&&Be.render(J),ZH(p,J,be);S!==null&&(ce.updateMultisampleRenderTarget(S),ce.updateRenderTargetMipmap(S)),J.isScene===!0&&J.onAfterRender(w,J,be),Ue.resetDefaultState(),C=-1,T=null,_.pop(),_.length>0?(m=_[_.length-1],ee===!0&&he.setGlobalState(w.clippingPlanes,m.state.camera)):m=null,v.pop(),v.length>0?p=v[v.length-1]:p=null};function y0(J,be,ke,Ie){if(J.visible===!1)return;if(J.layers.test(be.layers)){if(J.isGroup)ke=J.renderOrder;else if(J.isLOD)J.autoUpdate===!0&&J.update(be);else if(J.isLight)m.pushLight(J),J.castShadow&&m.pushShadow(J);else if(J.isSprite){if(!J.frustumCulled||ne.intersectsSprite(J)){Ie&&Me.setFromMatrixPosition(J.matrixWorld).applyMatrix4(se);const dt=K.update(J),bt=J.material;bt.visible&&p.push(J,dt,bt,ke,Me.z,null)}}else if((J.isMesh||J.isLine||J.isPoints)&&(!J.frustumCulled||ne.intersectsObject(J))){const dt=K.update(J),bt=J.material;if(Ie&&(J.boundingSphere!==void 0?(J.boundingSphere===null&&J.computeBoundingSphere(),Me.copy(J.boundingSphere.center)):(dt.boundingSphere===null&&dt.computeBoundingSphere(),Me.copy(dt.boundingSphere.center)),Me.applyMatrix4(J.matrixWorld).applyMatrix4(se)),Array.isArray(bt)){const xt=dt.groups;for(let Dt=0,Pt=xt.length;Dt<Pt;Dt++){const kt=xt[Dt],xn=bt[kt.materialIndex];xn&&xn.visible&&p.push(J,dt,xn,ke,Me.z,kt)}}else bt.visible&&p.push(J,dt,bt,ke,Me.z,null)}}const et=J.children;for(let dt=0,bt=et.length;dt<bt;dt++)y0(et[dt],be,ke,Ie)}function ZH(J,be,ke,Ie){const xe=J.opaque,et=J.transmissive,dt=J.transparent;m.setupLightsView(ke),ee===!0&&he.setGlobalState(w.clippingPlanes,ke),Ie&&we.viewport(E.copy(Ie)),xe.length>0&&yS(xe,be,ke),et.length>0&&yS(et,be,ke),dt.length>0&&yS(dt,be,ke),we.buffers.depth.setTest(!0),we.buffers.depth.setMask(!0),we.buffers.color.setMask(!0),we.setPolygonOffset(!1)}function JH(J,be,ke,Ie){if((ke.isScene===!0?ke.overrideMaterial:null)!==null)return;m.state.transmissionRenderTarget[Ie.id]===void 0&&(m.state.transmissionRenderTarget[Ie.id]=new Sp(1,1,{generateMipmaps:!0,type:ze.has("EXT_color_buffer_half_float")||ze.has("EXT_color_buffer_float")?h_:Du,minFilter:Lh,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Cn.workingColorSpace}));const et=m.state.transmissionRenderTarget[Ie.id],dt=Ie.viewport||E;et.setSize(dt.z,dt.w);const bt=w.getRenderTarget();w.setRenderTarget(et),w.getClearColor(O),D=w.getClearAlpha(),D<1&&w.setClearColor(16777215,.5),w.clear(),Ce&&Be.render(ke);const xt=w.toneMapping;w.toneMapping=nf;const Dt=Ie.viewport;if(Ie.viewport!==void 0&&(Ie.viewport=void 0),m.setupLightsView(Ie),ee===!0&&he.setGlobalState(w.clippingPlanes,Ie),yS(J,ke,Ie),ce.updateMultisampleRenderTarget(et),ce.updateRenderTargetMipmap(et),ze.has("WEBGL_multisampled_render_to_texture")===!1){let Pt=!1;for(let kt=0,xn=be.length;kt<xn;kt++){const gr=be[kt],vr=gr.object,ps=gr.geometry,wn=gr.material,Ct=gr.group;if(wn.side===lu&&vr.layers.test(Ie.layers)){const $i=wn.side;wn.side=rs,wn.needsUpdate=!0,e5(vr,ke,Ie,ps,wn,Ct),wn.side=$i,wn.needsUpdate=!0,Pt=!0}}Pt===!0&&(ce.updateMultisampleRenderTarget(et),ce.updateRenderTargetMipmap(et))}w.setRenderTarget(bt),w.setClearColor(O,D),Dt!==void 0&&(Ie.viewport=Dt),w.toneMapping=xt}function yS(J,be,ke){const Ie=be.isScene===!0?be.overrideMaterial:null;for(let xe=0,et=J.length;xe<et;xe++){const dt=J[xe],bt=dt.object,xt=dt.geometry,Dt=Ie===null?dt.material:Ie,Pt=dt.group;bt.layers.test(ke.layers)&&e5(bt,be,ke,xt,Dt,Pt)}}function e5(J,be,ke,Ie,xe,et){J.onBeforeRender(w,be,ke,Ie,xe,et),J.modelViewMatrix.multiplyMatrices(ke.matrixWorldInverse,J.matrixWorld),J.normalMatrix.getNormalMatrix(J.modelViewMatrix),xe.transparent===!0&&xe.side===lu&&xe.forceSinglePass===!1?(xe.side=rs,xe.needsUpdate=!0,w.renderBufferDirect(ke,be,Ie,xe,J,et),xe.side=mf,xe.needsUpdate=!0,w.renderBufferDirect(ke,be,Ie,xe,J,et),xe.side=lu):w.renderBufferDirect(ke,be,Ie,xe,J,et),J.onAfterRender(w,be,ke,Ie,xe,et)}function bS(J,be,ke){be.isScene!==!0&&(be=de);const Ie=Z.get(J),xe=m.state.lights,et=m.state.shadowsArray,dt=xe.state.version,bt=F.getParameters(J,xe.state,et,be,ke),xt=F.getProgramCacheKey(bt);let Dt=Ie.programs;Ie.environment=J.isMeshStandardMaterial?be.environment:null,Ie.fog=be.fog,Ie.envMap=(J.isMeshStandardMaterial?j:H).get(J.envMap||Ie.environment),Ie.envMapRotation=Ie.environment!==null&&J.envMap===null?be.environmentRotation:J.envMapRotation,Dt===void 0&&(J.addEventListener("dispose",ct),Dt=new Map,Ie.programs=Dt);let Pt=Dt.get(xt);if(Pt!==void 0){if(Ie.currentProgram===Pt&&Ie.lightsStateVersion===dt)return n5(J,bt),Pt}else bt.uniforms=F.getUniforms(J),J.onBeforeCompile(bt,w),Pt=F.acquireProgram(bt,xt),Dt.set(xt,Pt),Ie.uniforms=bt.uniforms;const kt=Ie.uniforms;return(!J.isShaderMaterial&&!J.isRawShaderMaterial||J.clipping===!0)&&(kt.clippingPlanes=he.uniform),n5(J,bt),Ie.needsLights=Ave(J),Ie.lightsStateVersion=dt,Ie.needsLights&&(kt.ambientLightColor.value=xe.state.ambient,kt.lightProbe.value=xe.state.probe,kt.directionalLights.value=xe.state.directional,kt.directionalLightShadows.value=xe.state.directionalShadow,kt.spotLights.value=xe.state.spot,kt.spotLightShadows.value=xe.state.spotShadow,kt.rectAreaLights.value=xe.state.rectArea,kt.ltc_1.value=xe.state.rectAreaLTC1,kt.ltc_2.value=xe.state.rectAreaLTC2,kt.pointLights.value=xe.state.point,kt.pointLightShadows.value=xe.state.pointShadow,kt.hemisphereLights.value=xe.state.hemi,kt.directionalShadowMap.value=xe.state.directionalShadowMap,kt.directionalShadowMatrix.value=xe.state.directionalShadowMatrix,kt.spotShadowMap.value=xe.state.spotShadowMap,kt.spotLightMatrix.value=xe.state.spotLightMatrix,kt.spotLightMap.value=xe.state.spotLightMap,kt.pointShadowMap.value=xe.state.pointShadowMap,kt.pointShadowMatrix.value=xe.state.pointShadowMatrix),Ie.currentProgram=Pt,Ie.uniformsList=null,Pt}function t5(J){if(J.uniformsList===null){const be=J.currentProgram.getUniforms();J.uniformsList=kE.seqWithValue(be.seq,J.uniforms)}return J.uniformsList}function n5(J,be){const ke=Z.get(J);ke.outputColorSpace=be.outputColorSpace,ke.batching=be.batching,ke.batchingColor=be.batchingColor,ke.instancing=be.instancing,ke.instancingColor=be.instancingColor,ke.instancingMorph=be.instancingMorph,ke.skinning=be.skinning,ke.morphTargets=be.morphTargets,ke.morphNormals=be.morphNormals,ke.morphColors=be.morphColors,ke.morphTargetsCount=be.morphTargetsCount,ke.numClippingPlanes=be.numClippingPlanes,ke.numIntersection=be.numClipIntersection,ke.vertexAlphas=be.vertexAlphas,ke.vertexTangents=be.vertexTangents,ke.toneMapping=be.toneMapping}function Tve(J,be,ke,Ie,xe){be.isScene!==!0&&(be=de),ce.resetTextureUnits();const et=be.fog,dt=Ie.isMeshStandardMaterial?be.environment:null,bt=S===null?w.outputColorSpace:S.isXRRenderTarget===!0?S.texture.colorSpace:Rf,xt=(Ie.isMeshStandardMaterial?j:H).get(Ie.envMap||dt),Dt=Ie.vertexColors===!0&&!!ke.attributes.color&&ke.attributes.color.itemSize===4,Pt=!!ke.attributes.tangent&&(!!Ie.normalMap||Ie.anisotropy>0),kt=!!ke.morphAttributes.position,xn=!!ke.morphAttributes.normal,gr=!!ke.morphAttributes.color;let vr=nf;Ie.toneMapped&&(S===null||S.isXRRenderTarget===!0)&&(vr=w.toneMapping);const ps=ke.morphAttributes.position||ke.morphAttributes.normal||ke.morphAttributes.color,wn=ps!==void 0?ps.length:0,Ct=Z.get(Ie),$i=m.state.lights;if(ee===!0&&(re===!0||J!==T)){const Zs=J===T&&Ie.id===C;he.setState(Ie,J,Zs)}let _n=!1;Ie.version===Ct.__version?(Ct.needsLights&&Ct.lightsStateVersion!==$i.state.version||Ct.outputColorSpace!==bt||xe.isBatchedMesh&&Ct.batching===!1||!xe.isBatchedMesh&&Ct.batching===!0||xe.isBatchedMesh&&Ct.batchingColor===!0&&xe.colorTexture===null||xe.isBatchedMesh&&Ct.batchingColor===!1&&xe.colorTexture!==null||xe.isInstancedMesh&&Ct.instancing===!1||!xe.isInstancedMesh&&Ct.instancing===!0||xe.isSkinnedMesh&&Ct.skinning===!1||!xe.isSkinnedMesh&&Ct.skinning===!0||xe.isInstancedMesh&&Ct.instancingColor===!0&&xe.instanceColor===null||xe.isInstancedMesh&&Ct.instancingColor===!1&&xe.instanceColor!==null||xe.isInstancedMesh&&Ct.instancingMorph===!0&&xe.morphTexture===null||xe.isInstancedMesh&&Ct.instancingMorph===!1&&xe.morphTexture!==null||Ct.envMap!==xt||Ie.fog===!0&&Ct.fog!==et||Ct.numClippingPlanes!==void 0&&(Ct.numClippingPlanes!==he.numPlanes||Ct.numIntersection!==he.numIntersection)||Ct.vertexAlphas!==Dt||Ct.vertexTangents!==Pt||Ct.morphTargets!==kt||Ct.morphNormals!==xn||Ct.morphColors!==gr||Ct.toneMapping!==vr||Ct.morphTargetsCount!==wn)&&(_n=!0):(_n=!0,Ct.__version=Ie.version);let Ha=Ct.currentProgram;_n===!0&&(Ha=bS(Ie,be,xe));let bm=!1,ms=!1,J2=!1;const Ur=Ha.getUniforms(),ad=Ct.uniforms;if(we.useProgram(Ha.program)&&(bm=!0,ms=!0,J2=!0),Ie.id!==C&&(C=Ie.id,ms=!0),bm||T!==J){Ur.setValue(q,"projectionMatrix",J.projectionMatrix),Ur.setValue(q,"viewMatrix",J.matrixWorldInverse);const Zs=Ur.map.cameraPosition;Zs!==void 0&&Zs.setValue(q,me.setFromMatrixPosition(J.matrixWorld)),Fe.logarithmicDepthBuffer&&Ur.setValue(q,"logDepthBufFC",2/(Math.log(J.far+1)/Math.LN2)),(Ie.isMeshPhongMaterial||Ie.isMeshToonMaterial||Ie.isMeshLambertMaterial||Ie.isMeshBasicMaterial||Ie.isMeshStandardMaterial||Ie.isShaderMaterial)&&Ur.setValue(q,"isOrthographic",J.isOrthographicCamera===!0),T!==J&&(T=J,ms=!0,J2=!0)}if(xe.isSkinnedMesh){Ur.setOptional(q,xe,"bindMatrix"),Ur.setOptional(q,xe,"bindMatrixInverse");const Zs=xe.skeleton;Zs&&(Zs.boneTexture===null&&Zs.computeBoneTexture(),Ur.setValue(q,"boneTexture",Zs.boneTexture,ce))}xe.isBatchedMesh&&(Ur.setOptional(q,xe,"batchingTexture"),Ur.setValue(q,"batchingTexture",xe._matricesTexture,ce),Ur.setOptional(q,xe,"batchingIdTexture"),Ur.setValue(q,"batchingIdTexture",xe._indirectTexture,ce),Ur.setOptional(q,xe,"batchingColorTexture"),xe._colorsTexture!==null&&Ur.setValue(q,"batchingColorTexture",xe._colorsTexture,ce));const eR=ke.morphAttributes;if((eR.position!==void 0||eR.normal!==void 0||eR.color!==void 0)&&Xe.update(xe,ke,Ha),(ms||Ct.receiveShadow!==xe.receiveShadow)&&(Ct.receiveShadow=xe.receiveShadow,Ur.setValue(q,"receiveShadow",xe.receiveShadow)),Ie.isMeshGouraudMaterial&&Ie.envMap!==null&&(ad.envMap.value=xt,ad.flipEnvMap.value=xt.isCubeTexture&&xt.isRenderTargetTexture===!1?-1:1),Ie.isMeshStandardMaterial&&Ie.envMap===null&&be.environment!==null&&(ad.envMapIntensity.value=be.environmentIntensity),ms&&(Ur.setValue(q,"toneMappingExposure",w.toneMappingExposure),Ct.needsLights&&kve(ad,J2),et&&Ie.fog===!0&&W.refreshFogUniforms(ad,et),W.refreshMaterialUniforms(ad,Ie,U,N,m.state.transmissionRenderTarget[J.id]),kE.upload(q,t5(Ct),ad,ce)),Ie.isShaderMaterial&&Ie.uniformsNeedUpdate===!0&&(kE.upload(q,t5(Ct),ad,ce),Ie.uniformsNeedUpdate=!1),Ie.isSpriteMaterial&&Ur.setValue(q,"center",xe.center),Ur.setValue(q,"modelViewMatrix",xe.modelViewMatrix),Ur.setValue(q,"normalMatrix",xe.normalMatrix),Ur.setValue(q,"modelMatrix",xe.matrixWorld),Ie.isShaderMaterial||Ie.isRawShaderMaterial){const Zs=Ie.uniformsGroups;for(let tR=0,Mve=Zs.length;tR<Mve;tR++){const r5=Zs[tR];ut.update(r5,Ha),ut.bind(r5,Ha)}}return Ha}function kve(J,be){J.ambientLightColor.needsUpdate=be,J.lightProbe.needsUpdate=be,J.directionalLights.needsUpdate=be,J.directionalLightShadows.needsUpdate=be,J.pointLights.needsUpdate=be,J.pointLightShadows.needsUpdate=be,J.spotLights.needsUpdate=be,J.spotLightShadows.needsUpdate=be,J.rectAreaLights.needsUpdate=be,J.hemisphereLights.needsUpdate=be}function Ave(J){return J.isMeshLambertMaterial||J.isMeshToonMaterial||J.isMeshPhongMaterial||J.isMeshStandardMaterial||J.isShadowMaterial||J.isShaderMaterial&&J.lights===!0}this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return S},this.setRenderTargetTextures=function(J,be,ke){Z.get(J.texture).__webglTexture=be,Z.get(J.depthTexture).__webglTexture=ke;const Ie=Z.get(J);Ie.__hasExternalTextures=!0,Ie.__autoAllocateDepthBuffer=ke===void 0,Ie.__autoAllocateDepthBuffer||ze.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ie.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(J,be){const ke=Z.get(J);ke.__webglFramebuffer=be,ke.__useDefaultFramebuffer=be===void 0},this.setRenderTarget=function(J,be=0,ke=0){S=J,b=be,x=ke;let Ie=!0,xe=null,et=!1,dt=!1;if(J){const xt=Z.get(J);xt.__useDefaultFramebuffer!==void 0?(we.bindFramebuffer(q.FRAMEBUFFER,null),Ie=!1):xt.__webglFramebuffer===void 0?ce.setupRenderTarget(J):xt.__hasExternalTextures&&ce.rebindTextures(J,Z.get(J.texture).__webglTexture,Z.get(J.depthTexture).__webglTexture);const Dt=J.texture;(Dt.isData3DTexture||Dt.isDataArrayTexture||Dt.isCompressedArrayTexture)&&(dt=!0);const Pt=Z.get(J).__webglFramebuffer;J.isWebGLCubeRenderTarget?(Array.isArray(Pt[be])?xe=Pt[be][ke]:xe=Pt[be],et=!0):J.samples>0&&ce.useMultisampledRTT(J)===!1?xe=Z.get(J).__webglMultisampledFramebuffer:Array.isArray(Pt)?xe=Pt[ke]:xe=Pt,E.copy(J.viewport),k.copy(J.scissor),A=J.scissorTest}else E.copy(G).multiplyScalar(U).floor(),k.copy(Q).multiplyScalar(U).floor(),A=te;if(we.bindFramebuffer(q.FRAMEBUFFER,xe)&&Ie&&we.drawBuffers(J,xe),we.viewport(E),we.scissor(k),we.setScissorTest(A),et){const xt=Z.get(J.texture);q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_CUBE_MAP_POSITIVE_X+be,xt.__webglTexture,ke)}else if(dt){const xt=Z.get(J.texture),Dt=be||0;q.framebufferTextureLayer(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,xt.__webglTexture,ke||0,Dt)}C=-1},this.readRenderTargetPixels=function(J,be,ke,Ie,xe,et,dt){if(!(J&&J.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let bt=Z.get(J).__webglFramebuffer;if(J.isWebGLCubeRenderTarget&&dt!==void 0&&(bt=bt[dt]),bt){we.bindFramebuffer(q.FRAMEBUFFER,bt);try{const xt=J.texture,Dt=xt.format,Pt=xt.type;if(!Fe.textureFormatReadable(Dt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Fe.textureTypeReadable(Pt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}be>=0&&be<=J.width-Ie&&ke>=0&&ke<=J.height-xe&&q.readPixels(be,ke,Ie,xe,ye.convert(Dt),ye.convert(Pt),et)}finally{const xt=S!==null?Z.get(S).__webglFramebuffer:null;we.bindFramebuffer(q.FRAMEBUFFER,xt)}}},this.readRenderTargetPixelsAsync=async function(J,be,ke,Ie,xe,et,dt){if(!(J&&J.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let bt=Z.get(J).__webglFramebuffer;if(J.isWebGLCubeRenderTarget&&dt!==void 0&&(bt=bt[dt]),bt){we.bindFramebuffer(q.FRAMEBUFFER,bt);try{const xt=J.texture,Dt=xt.format,Pt=xt.type;if(!Fe.textureFormatReadable(Dt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Fe.textureTypeReadable(Pt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(be>=0&&be<=J.width-Ie&&ke>=0&&ke<=J.height-xe){const kt=q.createBuffer();q.bindBuffer(q.PIXEL_PACK_BUFFER,kt),q.bufferData(q.PIXEL_PACK_BUFFER,et.byteLength,q.STREAM_READ),q.readPixels(be,ke,Ie,xe,ye.convert(Dt),ye.convert(Pt),0),q.flush();const xn=q.fenceSync(q.SYNC_GPU_COMMANDS_COMPLETE,0);await YSe(q,xn,4);try{q.bindBuffer(q.PIXEL_PACK_BUFFER,kt),q.getBufferSubData(q.PIXEL_PACK_BUFFER,0,et)}finally{q.deleteBuffer(kt),q.deleteSync(xn)}return et}}finally{const xt=S!==null?Z.get(S).__webglFramebuffer:null;we.bindFramebuffer(q.FRAMEBUFFER,xt)}}},this.copyFramebufferToTexture=function(J,be=null,ke=0){J.isTexture!==!0&&(zb("WebGLRenderer: copyFramebufferToTexture function signature has changed."),be=arguments[0]||null,J=arguments[1]);const Ie=Math.pow(2,-ke),xe=Math.floor(J.image.width*Ie),et=Math.floor(J.image.height*Ie),dt=be!==null?be.x:0,bt=be!==null?be.y:0;ce.setTexture2D(J,0),q.copyTexSubImage2D(q.TEXTURE_2D,ke,0,0,dt,bt,xe,et),we.unbindTexture()},this.copyTextureToTexture=function(J,be,ke=null,Ie=null,xe=0){J.isTexture!==!0&&(zb("WebGLRenderer: copyTextureToTexture function signature has changed."),Ie=arguments[0]||null,J=arguments[1],be=arguments[2],xe=arguments[3]||0,ke=null);let et,dt,bt,xt,Dt,Pt;ke!==null?(et=ke.max.x-ke.min.x,dt=ke.max.y-ke.min.y,bt=ke.min.x,xt=ke.min.y):(et=J.image.width,dt=J.image.height,bt=0,xt=0),Ie!==null?(Dt=Ie.x,Pt=Ie.y):(Dt=0,Pt=0);const kt=ye.convert(be.format),xn=ye.convert(be.type);ce.setTexture2D(be,0),q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,be.flipY),q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,be.premultiplyAlpha),q.pixelStorei(q.UNPACK_ALIGNMENT,be.unpackAlignment);const gr=q.getParameter(q.UNPACK_ROW_LENGTH),vr=q.getParameter(q.UNPACK_IMAGE_HEIGHT),ps=q.getParameter(q.UNPACK_SKIP_PIXELS),wn=q.getParameter(q.UNPACK_SKIP_ROWS),Ct=q.getParameter(q.UNPACK_SKIP_IMAGES),$i=J.isCompressedTexture?J.mipmaps[xe]:J.image;q.pixelStorei(q.UNPACK_ROW_LENGTH,$i.width),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,$i.height),q.pixelStorei(q.UNPACK_SKIP_PIXELS,bt),q.pixelStorei(q.UNPACK_SKIP_ROWS,xt),J.isDataTexture?q.texSubImage2D(q.TEXTURE_2D,xe,Dt,Pt,et,dt,kt,xn,$i.data):J.isCompressedTexture?q.compressedTexSubImage2D(q.TEXTURE_2D,xe,Dt,Pt,$i.width,$i.height,kt,$i.data):q.texSubImage2D(q.TEXTURE_2D,xe,Dt,Pt,et,dt,kt,xn,$i),q.pixelStorei(q.UNPACK_ROW_LENGTH,gr),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,vr),q.pixelStorei(q.UNPACK_SKIP_PIXELS,ps),q.pixelStorei(q.UNPACK_SKIP_ROWS,wn),q.pixelStorei(q.UNPACK_SKIP_IMAGES,Ct),xe===0&&be.generateMipmaps&&q.generateMipmap(q.TEXTURE_2D),we.unbindTexture()},this.copyTextureToTexture3D=function(J,be,ke=null,Ie=null,xe=0){J.isTexture!==!0&&(zb("WebGLRenderer: copyTextureToTexture3D function signature has changed."),ke=arguments[0]||null,Ie=arguments[1]||null,J=arguments[2],be=arguments[3],xe=arguments[4]||0);let et,dt,bt,xt,Dt,Pt,kt,xn,gr;const vr=J.isCompressedTexture?J.mipmaps[xe]:J.image;ke!==null?(et=ke.max.x-ke.min.x,dt=ke.max.y-ke.min.y,bt=ke.max.z-ke.min.z,xt=ke.min.x,Dt=ke.min.y,Pt=ke.min.z):(et=vr.width,dt=vr.height,bt=vr.depth,xt=0,Dt=0,Pt=0),Ie!==null?(kt=Ie.x,xn=Ie.y,gr=Ie.z):(kt=0,xn=0,gr=0);const ps=ye.convert(be.format),wn=ye.convert(be.type);let Ct;if(be.isData3DTexture)ce.setTexture3D(be,0),Ct=q.TEXTURE_3D;else if(be.isDataArrayTexture||be.isCompressedArrayTexture)ce.setTexture2DArray(be,0),Ct=q.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,be.flipY),q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,be.premultiplyAlpha),q.pixelStorei(q.UNPACK_ALIGNMENT,be.unpackAlignment);const $i=q.getParameter(q.UNPACK_ROW_LENGTH),_n=q.getParameter(q.UNPACK_IMAGE_HEIGHT),Ha=q.getParameter(q.UNPACK_SKIP_PIXELS),bm=q.getParameter(q.UNPACK_SKIP_ROWS),ms=q.getParameter(q.UNPACK_SKIP_IMAGES);q.pixelStorei(q.UNPACK_ROW_LENGTH,vr.width),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,vr.height),q.pixelStorei(q.UNPACK_SKIP_PIXELS,xt),q.pixelStorei(q.UNPACK_SKIP_ROWS,Dt),q.pixelStorei(q.UNPACK_SKIP_IMAGES,Pt),J.isDataTexture||J.isData3DTexture?q.texSubImage3D(Ct,xe,kt,xn,gr,et,dt,bt,ps,wn,vr.data):be.isCompressedArrayTexture?q.compressedTexSubImage3D(Ct,xe,kt,xn,gr,et,dt,bt,ps,vr.data):q.texSubImage3D(Ct,xe,kt,xn,gr,et,dt,bt,ps,wn,vr),q.pixelStorei(q.UNPACK_ROW_LENGTH,$i),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,_n),q.pixelStorei(q.UNPACK_SKIP_PIXELS,Ha),q.pixelStorei(q.UNPACK_SKIP_ROWS,bm),q.pixelStorei(q.UNPACK_SKIP_IMAGES,ms),xe===0&&be.generateMipmaps&&q.generateMipmap(Ct),we.unbindTexture()},this.initRenderTarget=function(J){Z.get(J).__webglFramebuffer===void 0&&ce.setupRenderTarget(J)},this.initTexture=function(J){J.isCubeTexture?ce.setTextureCube(J,0):J.isData3DTexture?ce.setTexture3D(J,0):J.isDataArrayTexture||J.isCompressedArrayTexture?ce.setTexture2DArray(J,0):ce.setTexture2D(J,0),we.unbindTexture()},this.resetState=function(){b=0,x=0,S=null,we.reset(),Ue.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return mu}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===ZU?"display-p3":"srgb",n.unpackColorSpace=Cn.workingColorSpace===RM?"display-p3":"srgb"}}class rz extends fo{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Pu,this.environmentIntensity=1,this.environmentRotation=new Pu,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class b_ extends Df{constructor(e=1,n=.4,r=12,i=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:o},r=Math.floor(r),i=Math.floor(i);const s=[],a=[],l=[],c=[],u=new Ae,d=new Ae,f=new Ae;for(let h=0;h<=r;h++)for(let g=0;g<=i;g++){const p=g/i*o,m=h/r*Math.PI*2;d.x=(e+n*Math.cos(m))*Math.cos(p),d.y=(e+n*Math.cos(m))*Math.sin(p),d.z=n*Math.sin(m),a.push(d.x,d.y,d.z),u.x=e*Math.cos(p),u.y=e*Math.sin(p),f.subVectors(d,u).normalize(),l.push(f.x,f.y,f.z),c.push(g/i),c.push(h/r)}for(let h=1;h<=r;h++)for(let g=1;g<=i;g++){const p=(i+1)*h+g-1,m=(i+1)*(h-1)+g-1,v=(i+1)*(h-1)+g,_=(i+1)*h+g;s.push(p,m,_),s.push(m,v,_)}this.setIndex(s),this.setAttribute("position",new pc(a,3)),this.setAttribute("normal",new pc(l,3)),this.setAttribute("uv",new pc(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new b_(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class nre extends fo{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new An(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}const mD=new Nr,o8=new Ae,s8=new Ae;class sMe{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new fn(512,512),this.map=null,this.mapPass=null,this.matrix=new Nr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ez,this._frameExtents=new fn(1,1),this._viewportCount=1,this._viewports=[new ci(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;o8.setFromMatrixPosition(e.matrixWorld),n.position.copy(o8),s8.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(s8),n.updateMatrixWorld(),mD.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(mD),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(mD)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class aMe extends sMe{constructor(){super(new Yne(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class iz extends nre{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(fo.DEFAULT_UP),this.updateMatrix(),this.target=new fo,this.shadow=new aMe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class oz extends nre{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:HU}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=HU);function rre(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=rre(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ze(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=rre(t))&&(r&&(r+=" "),r+=e);return r}var lMe=Array.isArray,fs=lMe,cMe=typeof co=="object"&&co&&co.Object===Object&&co,ire=cMe,uMe=ire,dMe=typeof self=="object"&&self&&self.Object===Object&&self,fMe=uMe||dMe||Function("return this")(),Wc=fMe,hMe=Wc,pMe=hMe.Symbol,x_=pMe,a8=x_,ore=Object.prototype,mMe=ore.hasOwnProperty,gMe=ore.toString,$0=a8?a8.toStringTag:void 0;function vMe(t){var e=mMe.call(t,$0),n=t[$0];try{t[$0]=void 0;var r=!0}catch{}var i=gMe.call(t);return r&&(e?t[$0]=n:delete t[$0]),i}var yMe=vMe,bMe=Object.prototype,xMe=bMe.toString;function wMe(t){return xMe.call(t)}var _Me=wMe,l8=x_,SMe=yMe,CMe=_Me,EMe="[object Null]",TMe="[object Undefined]",c8=l8?l8.toStringTag:void 0;function kMe(t){return t==null?t===void 0?TMe:EMe:c8&&c8 in Object(t)?SMe(t):CMe(t)}var Zu=kMe;function AMe(t){return t!=null&&typeof t=="object"}var Ju=AMe,MMe=Zu,IMe=Ju,OMe="[object Symbol]";function RMe(t){return typeof t=="symbol"||IMe(t)&&MMe(t)==OMe}var Ry=RMe,DMe=fs,PMe=Ry,NMe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$Me=/^\w*$/;function LMe(t,e){if(DMe(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||PMe(t)?!0:$Me.test(t)||!NMe.test(t)||e!=null&&t in Object(e)}var sz=LMe;function FMe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Pf=FMe;const Dy=cn(Pf);var BMe=Zu,UMe=Pf,zMe="[object AsyncFunction]",jMe="[object Function]",WMe="[object GeneratorFunction]",VMe="[object Proxy]";function HMe(t){if(!UMe(t))return!1;var e=BMe(t);return e==jMe||e==WMe||e==zMe||e==VMe}var az=HMe;const Rt=cn(az);var GMe=Wc,qMe=GMe["__core-js_shared__"],XMe=qMe,gD=XMe,u8=function(){var t=/[^.]+$/.exec(gD&&gD.keys&&gD.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function KMe(t){return!!u8&&u8 in t}var YMe=KMe,QMe=Function.prototype,ZMe=QMe.toString;function JMe(t){if(t!=null){try{return ZMe.call(t)}catch{}try{return t+""}catch{}}return""}var sre=JMe,eIe=az,tIe=YMe,nIe=Pf,rIe=sre,iIe=/[\\^$.*+?()[\]{}|]/g,oIe=/^\[object .+?Constructor\]$/,sIe=Function.prototype,aIe=Object.prototype,lIe=sIe.toString,cIe=aIe.hasOwnProperty,uIe=RegExp("^"+lIe.call(cIe).replace(iIe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function dIe(t){if(!nIe(t)||tIe(t))return!1;var e=eIe(t)?uIe:oIe;return e.test(rIe(t))}var fIe=dIe;function hIe(t,e){return t==null?void 0:t[e]}var pIe=hIe,mIe=fIe,gIe=pIe;function vIe(t,e){var n=gIe(t,e);return mIe(n)?n:void 0}var Jp=vIe,yIe=Jp,bIe=yIe(Object,"create"),$M=bIe,d8=$M;function xIe(){this.__data__=d8?d8(null):{},this.size=0}var wIe=xIe;function _Ie(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var SIe=_Ie,CIe=$M,EIe="__lodash_hash_undefined__",TIe=Object.prototype,kIe=TIe.hasOwnProperty;function AIe(t){var e=this.__data__;if(CIe){var n=e[t];return n===EIe?void 0:n}return kIe.call(e,t)?e[t]:void 0}var MIe=AIe,IIe=$M,OIe=Object.prototype,RIe=OIe.hasOwnProperty;function DIe(t){var e=this.__data__;return IIe?e[t]!==void 0:RIe.call(e,t)}var PIe=DIe,NIe=$M,$Ie="__lodash_hash_undefined__";function LIe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=NIe&&e===void 0?$Ie:e,this}var FIe=LIe,BIe=wIe,UIe=SIe,zIe=MIe,jIe=PIe,WIe=FIe;function Py(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Py.prototype.clear=BIe;Py.prototype.delete=UIe;Py.prototype.get=zIe;Py.prototype.has=jIe;Py.prototype.set=WIe;var VIe=Py;function HIe(){this.__data__=[],this.size=0}var GIe=HIe;function qIe(t,e){return t===e||t!==t&&e!==e}var lz=qIe,XIe=lz;function KIe(t,e){for(var n=t.length;n--;)if(XIe(t[n][0],e))return n;return-1}var LM=KIe,YIe=LM,QIe=Array.prototype,ZIe=QIe.splice;function JIe(t){var e=this.__data__,n=YIe(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():ZIe.call(e,n,1),--this.size,!0}var eOe=JIe,tOe=LM;function nOe(t){var e=this.__data__,n=tOe(e,t);return n<0?void 0:e[n][1]}var rOe=nOe,iOe=LM;function oOe(t){return iOe(this.__data__,t)>-1}var sOe=oOe,aOe=LM;function lOe(t,e){var n=this.__data__,r=aOe(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var cOe=lOe,uOe=GIe,dOe=eOe,fOe=rOe,hOe=sOe,pOe=cOe;function Ny(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ny.prototype.clear=uOe;Ny.prototype.delete=dOe;Ny.prototype.get=fOe;Ny.prototype.has=hOe;Ny.prototype.set=pOe;var FM=Ny,mOe=Jp,gOe=Wc,vOe=mOe(gOe,"Map"),cz=vOe,f8=VIe,yOe=FM,bOe=cz;function xOe(){this.size=0,this.__data__={hash:new f8,map:new(bOe||yOe),string:new f8}}var wOe=xOe;function _Oe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var SOe=_Oe,COe=SOe;function EOe(t,e){var n=t.__data__;return COe(e)?n[typeof e=="string"?"string":"hash"]:n.map}var BM=EOe,TOe=BM;function kOe(t){var e=TOe(this,t).delete(t);return this.size-=e?1:0,e}var AOe=kOe,MOe=BM;function IOe(t){return MOe(this,t).get(t)}var OOe=IOe,ROe=BM;function DOe(t){return ROe(this,t).has(t)}var POe=DOe,NOe=BM;function $Oe(t,e){var n=NOe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var LOe=$Oe,FOe=wOe,BOe=AOe,UOe=OOe,zOe=POe,jOe=LOe;function $y(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}$y.prototype.clear=FOe;$y.prototype.delete=BOe;$y.prototype.get=UOe;$y.prototype.has=zOe;$y.prototype.set=jOe;var uz=$y,are=uz,WOe="Expected a function";function dz(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(WOe);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(dz.Cache||are),n}dz.Cache=are;var lre=dz;const VOe=cn(lre);var HOe=lre,GOe=500;function qOe(t){var e=HOe(t,function(r){return n.size===GOe&&n.clear(),r}),n=e.cache;return e}var XOe=qOe,KOe=XOe,YOe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,QOe=/\\(\\)?/g,ZOe=KOe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(YOe,function(n,r,i,o){e.push(i?o.replace(QOe,"$1"):r||n)}),e}),JOe=ZOe;function e2e(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var fz=e2e,h8=x_,t2e=fz,n2e=fs,r2e=Ry,i2e=1/0,p8=h8?h8.prototype:void 0,m8=p8?p8.toString:void 0;function cre(t){if(typeof t=="string")return t;if(n2e(t))return t2e(t,cre)+"";if(r2e(t))return m8?m8.call(t):"";var e=t+"";return e=="0"&&1/t==-i2e?"-0":e}var o2e=cre,s2e=o2e;function a2e(t){return t==null?"":s2e(t)}var ure=a2e,l2e=fs,c2e=sz,u2e=JOe,d2e=ure;function f2e(t,e){return l2e(t)?t:c2e(t,e)?[t]:u2e(d2e(t))}var dre=f2e,h2e=Ry,p2e=1/0;function m2e(t){if(typeof t=="string"||h2e(t))return t;var e=t+"";return e=="0"&&1/t==-p2e?"-0":e}var UM=m2e,g2e=dre,v2e=UM;function y2e(t,e){e=g2e(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[v2e(e[n++])];return n&&n==r?t:void 0}var hz=y2e,b2e=hz;function x2e(t,e,n){var r=t==null?void 0:b2e(t,e);return r===void 0?n:r}var fre=x2e;const Ps=cn(fre);function w2e(t){return t==null}var _2e=w2e;const Nt=cn(_2e);var S2e=Zu,C2e=fs,E2e=Ju,T2e="[object String]";function k2e(t){return typeof t=="string"||!C2e(t)&&E2e(t)&&S2e(t)==T2e}var A2e=k2e;const w_=cn(A2e);var hre={exports:{}},Rn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mi=typeof Symbol=="function"&&Symbol.for,pz=Mi?Symbol.for("react.element"):60103,mz=Mi?Symbol.for("react.portal"):60106,zM=Mi?Symbol.for("react.fragment"):60107,jM=Mi?Symbol.for("react.strict_mode"):60108,WM=Mi?Symbol.for("react.profiler"):60114,VM=Mi?Symbol.for("react.provider"):60109,HM=Mi?Symbol.for("react.context"):60110,gz=Mi?Symbol.for("react.async_mode"):60111,GM=Mi?Symbol.for("react.concurrent_mode"):60111,qM=Mi?Symbol.for("react.forward_ref"):60112,XM=Mi?Symbol.for("react.suspense"):60113,M2e=Mi?Symbol.for("react.suspense_list"):60120,KM=Mi?Symbol.for("react.memo"):60115,YM=Mi?Symbol.for("react.lazy"):60116,I2e=Mi?Symbol.for("react.block"):60121,O2e=Mi?Symbol.for("react.fundamental"):60117,R2e=Mi?Symbol.for("react.responder"):60118,D2e=Mi?Symbol.for("react.scope"):60119;function Gs(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case pz:switch(t=t.type,t){case gz:case GM:case zM:case WM:case jM:case XM:return t;default:switch(t=t&&t.$$typeof,t){case HM:case qM:case YM:case KM:case VM:return t;default:return e}}case mz:return e}}}function pre(t){return Gs(t)===GM}Rn.AsyncMode=gz;Rn.ConcurrentMode=GM;Rn.ContextConsumer=HM;Rn.ContextProvider=VM;Rn.Element=pz;Rn.ForwardRef=qM;Rn.Fragment=zM;Rn.Lazy=YM;Rn.Memo=KM;Rn.Portal=mz;Rn.Profiler=WM;Rn.StrictMode=jM;Rn.Suspense=XM;Rn.isAsyncMode=function(t){return pre(t)||Gs(t)===gz};Rn.isConcurrentMode=pre;Rn.isContextConsumer=function(t){return Gs(t)===HM};Rn.isContextProvider=function(t){return Gs(t)===VM};Rn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===pz};Rn.isForwardRef=function(t){return Gs(t)===qM};Rn.isFragment=function(t){return Gs(t)===zM};Rn.isLazy=function(t){return Gs(t)===YM};Rn.isMemo=function(t){return Gs(t)===KM};Rn.isPortal=function(t){return Gs(t)===mz};Rn.isProfiler=function(t){return Gs(t)===WM};Rn.isStrictMode=function(t){return Gs(t)===jM};Rn.isSuspense=function(t){return Gs(t)===XM};Rn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===zM||t===GM||t===WM||t===jM||t===XM||t===M2e||typeof t=="object"&&t!==null&&(t.$$typeof===YM||t.$$typeof===KM||t.$$typeof===VM||t.$$typeof===HM||t.$$typeof===qM||t.$$typeof===O2e||t.$$typeof===R2e||t.$$typeof===D2e||t.$$typeof===I2e)};Rn.typeOf=Gs;hre.exports=Rn;var X$=hre.exports,P2e=Zu,N2e=Ju,$2e="[object Number]";function L2e(t){return typeof t=="number"||N2e(t)&&P2e(t)==$2e}var mre=L2e;const F2e=cn(mre);var B2e=mre;function U2e(t){return B2e(t)&&t!=+t}var z2e=U2e;const Ly=cn(z2e);var ko=function(e){return e===0?0:e>0?1:-1},Bh=function(e){return w_(e)&&e.indexOf("%")===e.length-1},Qe=function(e){return F2e(e)&&!Ly(e)},fi=function(e){return Qe(e)||w_(e)},j2e=0,em=function(e){var n=++j2e;return"".concat(e||"").concat(n)},Ao=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Qe(e)&&!w_(e))return r;var o;if(Bh(e)){var s=e.indexOf("%");o=n*parseFloat(e.slice(0,s))/100}else o=+e;return Ly(o)&&(o=r),i&&o>n&&(o=n),o},Id=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},W2e=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},ai=function(e,n){return Qe(e)&&Qe(n)?function(r){return e+r*(n-e)}:function(){return n}};function UT(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Ps(r,e))===n})}function Qg(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function K$(t){"@babel/helpers - typeof";return K$=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K$(t)}var V2e=["viewBox","children"],H2e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],g8=["points","pathLength"],vD={svg:V2e,polygon:g8,polyline:g8},vz=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],zT=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(R.isValidElement(e)&&(r=e.props),!Dy(r))return null;var i={};return Object.keys(r).forEach(function(o){vz.includes(o)&&(i[o]=n||function(s){return r[o](r,s)})}),i},G2e=function(e,n,r){return function(i){return e(n,r,i),null}},Cp=function(e,n,r){if(!Dy(e)||K$(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(o){var s=e[o];vz.includes(o)&&typeof s=="function"&&(i||(i={}),i[o]=G2e(s,n,r))}),i},q2e=["children"],X2e=["children"];function v8(t,e){if(t==null)return{};var n=K2e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function K2e(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Y$(t){"@babel/helpers - typeof";return Y$=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y$(t)}var y8={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},Su=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},b8=null,yD=null,yz=function t(e){if(e===b8&&Array.isArray(yD))return yD;var n=[];return R.Children.forEach(e,function(r){Nt(r)||(X$.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),yD=n,b8=e,n};function Ns(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Su(i)}):r=[Su(e)],yz(t).forEach(function(i){var o=Ps(i,"type.displayName")||Ps(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}function ws(t,e){var n=Ns(t,e);return n&&n[0]}var x8=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!Qe(r)||r<=0||!Qe(i)||i<=0)},Y2e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Q2e=function(e){return e&&e.type&&w_(e.type)&&Y2e.indexOf(e.type)>=0},gre=function(e){return e&&Y$(e)==="object"&&"cx"in e&&"cy"in e&&"r"in e},Z2e=function(e,n,r,i){var o,s=(o=vD==null?void 0:vD[i])!==null&&o!==void 0?o:[];return!Rt(e)&&(i&&s.includes(n)||H2e.includes(n))||r&&vz.includes(n)},wt=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(R.isValidElement(e)&&(i=e.props),!Dy(i))return null;var o={};return Object.keys(i).forEach(function(s){var a;Z2e((a=i)===null||a===void 0?void 0:a[s],s,n,r)&&(o[s]=i[s])}),o},Q$=function t(e,n){if(e===n)return!0;var r=R.Children.count(e);if(r!==R.Children.count(n))return!1;if(r===0)return!0;if(r===1)return w8(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var o=e[i],s=n[i];if(Array.isArray(o)||Array.isArray(s)){if(!t(o,s))return!1}else if(!w8(o,s))return!1}return!0},w8=function(e,n){if(Nt(e)&&Nt(n))return!0;if(!Nt(e)&&!Nt(n)){var r=e.props||{},i=r.children,o=v8(r,q2e),s=n.props||{},a=s.children,l=v8(s,X2e);return i&&a?Qg(o,l)&&Q$(i,a):!i&&!a?Qg(o,l):!1}return!1},_8=function(e,n){var r=[],i={};return yz(e).forEach(function(o,s){if(Q2e(o))r.push(o);else if(o){var a=Su(o.type),l=n[a]||{},c=l.handler,u=l.once;if(c&&(!u||!i[a])){var d=c(o,a,s);r.push(d),i[a]=!0}}}),r},J2e=function(e){var n=e&&e.type;return n&&y8[n]?y8[n]:null},eRe=function(e,n){return yz(n).indexOf(e)},tRe=["children","width","height","viewBox","className","style","title","desc"];function Z$(){return Z$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Z$.apply(this,arguments)}function nRe(t,e){if(t==null)return{};var n=rRe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rRe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function J$(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,o=t.className,s=t.style,a=t.title,l=t.desc,c=nRe(t,tRe),u=i||{width:n,height:r,x:0,y:0},d=Ze("recharts-surface",o);return B.createElement("svg",Z$({},wt(c,!0,"svg"),{className:d,width:n,height:r,style:s,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),B.createElement("title",null,a),B.createElement("desc",null,l),e)}var iRe=["children","className"];function eL(){return eL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eL.apply(this,arguments)}function oRe(t,e){if(t==null)return{};var n=sRe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function sRe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Yt=B.forwardRef(function(t,e){var n=t.children,r=t.className,i=oRe(t,iRe),o=Ze("recharts-layer",r);return B.createElement("g",eL({className:o},wt(i,!0),{ref:e}),n)}),yl=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function aRe(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}var lRe=aRe,cRe=lRe;function uRe(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:cRe(t,e,n)}var dRe=uRe,fRe="\\ud800-\\udfff",hRe="\\u0300-\\u036f",pRe="\\ufe20-\\ufe2f",mRe="\\u20d0-\\u20ff",gRe=hRe+pRe+mRe,vRe="\\ufe0e\\ufe0f",yRe="\\u200d",bRe=RegExp("["+yRe+fRe+gRe+vRe+"]");function xRe(t){return bRe.test(t)}var vre=xRe;function wRe(t){return t.split("")}var _Re=wRe,yre="\\ud800-\\udfff",SRe="\\u0300-\\u036f",CRe="\\ufe20-\\ufe2f",ERe="\\u20d0-\\u20ff",TRe=SRe+CRe+ERe,kRe="\\ufe0e\\ufe0f",ARe="["+yre+"]",tL="["+TRe+"]",nL="\\ud83c[\\udffb-\\udfff]",MRe="(?:"+tL+"|"+nL+")",bre="[^"+yre+"]",xre="(?:\\ud83c[\\udde6-\\uddff]){2}",wre="[\\ud800-\\udbff][\\udc00-\\udfff]",IRe="\\u200d",_re=MRe+"?",Sre="["+kRe+"]?",ORe="(?:"+IRe+"(?:"+[bre,xre,wre].join("|")+")"+Sre+_re+")*",RRe=Sre+_re+ORe,DRe="(?:"+[bre+tL+"?",tL,xre,wre,ARe].join("|")+")",PRe=RegExp(nL+"(?="+nL+")|"+DRe+RRe,"g");function NRe(t){return t.match(PRe)||[]}var $Re=NRe,LRe=_Re,FRe=vre,BRe=$Re;function URe(t){return FRe(t)?BRe(t):LRe(t)}var zRe=URe,jRe=dRe,WRe=vre,VRe=zRe,HRe=ure;function GRe(t){return function(e){e=HRe(e);var n=WRe(e)?VRe(e):void 0,r=n?n[0]:e.charAt(0),i=n?jRe(n,1).join(""):e.slice(1);return r[t]()+i}}var qRe=GRe,XRe=qRe,KRe=XRe("toUpperCase"),YRe=KRe;const QM=cn(YRe);function zn(t){return function(){return t}}const Cre=Math.cos,jT=Math.sin,Rl=Math.sqrt,WT=Math.PI,ZM=2*WT,rL=Math.PI,iL=2*rL,mh=1e-6,QRe=iL-mh;function Ere(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function ZRe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Ere;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class JRe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Ere:ZRe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=r-e,c=i-n,u=s-e,d=a-n,f=u*u+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>mh)if(!(Math.abs(d*l-c*u)>mh)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let h=r-s,g=i-a,p=l*l+c*c,m=h*h+g*g,v=Math.sqrt(p),_=Math.sqrt(f),w=o*Math.tan((rL-Math.acos((p+f-m)/(2*v*_)))/2),y=w/_,b=w/v;Math.abs(y-1)>mh&&this._append`L${e+y*u},${n+y*d}`,this._append`A${o},${o},0,0,${+(d*h>u*g)},${this._x1=e+b*l},${this._y1=n+b*c}`}}arc(e,n,r,i,o,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),c=e+a,u=n+l,d=1^s,f=s?i-o:o-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>mh||Math.abs(this._y1-u)>mh)&&this._append`L${c},${u}`,r&&(f<0&&(f=f%iL+iL),f>QRe?this._append`A${r},${r},0,1,${d},${e-a},${n-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=u}`:f>mh&&this._append`A${r},${r},0,${+(f>=rL)},${d},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function bz(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new JRe(e)}function xz(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Tre(t){this._context=t}Tre.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function JM(t){return new Tre(t)}function kre(t){return t[0]}function Are(t){return t[1]}function Mre(t,e){var n=zn(!0),r=null,i=JM,o=null,s=bz(a);t=typeof t=="function"?t:t===void 0?kre:zn(t),e=typeof e=="function"?e:e===void 0?Are:zn(e);function a(l){var c,u=(l=xz(l)).length,d,f=!1,h;for(r==null&&(o=i(h=s())),c=0;c<=u;++c)!(c<u&&n(d=l[c],c,l))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(d,c,l),+e(d,c,l));if(h)return o=null,h+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:zn(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:zn(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:zn(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),a):r},a}function cC(t,e,n){var r=null,i=zn(!0),o=null,s=JM,a=null,l=bz(c);t=typeof t=="function"?t:t===void 0?kre:zn(+t),e=typeof e=="function"?e:zn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Are:zn(+n);function c(d){var f,h,g,p=(d=xz(d)).length,m,v=!1,_,w=new Array(p),y=new Array(p);for(o==null&&(a=s(_=l())),f=0;f<=p;++f){if(!(f<p&&i(m=d[f],f,d))===v)if(v=!v)h=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),g=f-1;g>=h;--g)a.point(w[g],y[g]);a.lineEnd(),a.areaEnd()}v&&(w[f]=+t(m,f,d),y[f]=+e(m,f,d),a.point(r?+r(m,f,d):w[f],n?+n(m,f,d):y[f]))}if(_)return a=null,_+""||null}function u(){return Mre().defined(i).curve(s).context(o)}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:zn(+d),r=null,c):t},c.x0=function(d){return arguments.length?(t=typeof d=="function"?d:zn(+d),c):t},c.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:zn(+d),c):r},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:zn(+d),n=null,c):e},c.y0=function(d){return arguments.length?(e=typeof d=="function"?d:zn(+d),c):e},c.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:zn(+d),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:zn(!!d),c):i},c.curve=function(d){return arguments.length?(s=d,o!=null&&(a=s(o)),c):s},c.context=function(d){return arguments.length?(d==null?o=a=null:a=s(o=d),c):o},c}class Ire{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function eDe(t){return new Ire(t,!0)}function tDe(t){return new Ire(t,!1)}const wz={draw(t,e){const n=Rl(e/WT);t.moveTo(n,0),t.arc(0,0,n,0,ZM)}},nDe={draw(t,e){const n=Rl(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Ore=Rl(1/3),rDe=Ore*2,iDe={draw(t,e){const n=Rl(e/rDe),r=n*Ore;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},oDe={draw(t,e){const n=Rl(e),r=-n/2;t.rect(r,r,n,n)}},sDe=.8908130915292852,Rre=jT(WT/10)/jT(7*WT/10),aDe=jT(ZM/10)*Rre,lDe=-Cre(ZM/10)*Rre,cDe={draw(t,e){const n=Rl(e*sDe),r=aDe*n,i=lDe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const s=ZM*o/5,a=Cre(s),l=jT(s);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*i,l*r+a*i)}t.closePath()}},bD=Rl(3),uDe={draw(t,e){const n=-Rl(e/(bD*3));t.moveTo(0,n*2),t.lineTo(-bD*n,-n),t.lineTo(bD*n,-n),t.closePath()}},ea=-.5,ta=Rl(3)/2,oL=1/Rl(12),dDe=(oL/2+1)*3,fDe={draw(t,e){const n=Rl(e/dDe),r=n/2,i=n*oL,o=r,s=n*oL+n,a=-o,l=s;t.moveTo(r,i),t.lineTo(o,s),t.lineTo(a,l),t.lineTo(ea*r-ta*i,ta*r+ea*i),t.lineTo(ea*o-ta*s,ta*o+ea*s),t.lineTo(ea*a-ta*l,ta*a+ea*l),t.lineTo(ea*r+ta*i,ea*i-ta*r),t.lineTo(ea*o+ta*s,ea*s-ta*o),t.lineTo(ea*a+ta*l,ea*l-ta*a),t.closePath()}};function hDe(t,e){let n=null,r=bz(i);t=typeof t=="function"?t:zn(t||wz),e=typeof e=="function"?e:zn(e===void 0?64:+e);function i(){let o;if(n||(n=o=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:zn(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:zn(+o),i):e},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function VT(){}function HT(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Dre(t){this._context=t}Dre.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:HT(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:HT(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function pDe(t){return new Dre(t)}function Pre(t){this._context=t}Pre.prototype={areaStart:VT,areaEnd:VT,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:HT(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function mDe(t){return new Pre(t)}function Nre(t){this._context=t}Nre.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:HT(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function gDe(t){return new Nre(t)}function $re(t){this._context=t}$re.prototype={areaStart:VT,areaEnd:VT,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function vDe(t){return new $re(t)}function S8(t){return t<0?-1:1}function C8(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(S8(o)+S8(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function E8(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function xD(t,e,n){var r=t._x0,i=t._y0,o=t._x1,s=t._y1,a=(o-r)/3;t._context.bezierCurveTo(r+a,i+a*e,o-a,s-a*n,o,s)}function GT(t){this._context=t}GT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:xD(this,this._t0,E8(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,xD(this,E8(this,n=C8(this,t,e)),n);break;default:xD(this,this._t0,n=C8(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Lre(t){this._context=new Fre(t)}(Lre.prototype=Object.create(GT.prototype)).point=function(t,e){GT.prototype.point.call(this,e,t)};function Fre(t){this._context=t}Fre.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function yDe(t){return new GT(t)}function bDe(t){return new Lre(t)}function Bre(t){this._context=t}Bre.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=T8(t),i=T8(e),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function T8(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function xDe(t){return new Bre(t)}function eI(t,e){this._context=t,this._t=e}eI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function wDe(t){return new eI(t,.5)}function _De(t){return new eI(t,0)}function SDe(t){return new eI(t,1)}function Tv(t,e){if((s=t.length)>1)for(var n=1,r,i,o=t[e[0]],s,a=o.length;n<s;++n)for(i=o,o=t[e[n]],r=0;r<a;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function sL(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function CDe(t,e){return t[e]}function EDe(t){const e=[];return e.key=t,e}function TDe(){var t=zn([]),e=sL,n=Tv,r=CDe;function i(o){var s=Array.from(t.apply(this,arguments),EDe),a,l=s.length,c=-1,u;for(const d of o)for(a=0,++c;a<l;++a)(s[a][c]=[0,+r(d,s[a].key,c,o)]).data=d;for(a=0,u=xz(e(s));a<l;++a)s[u[a]].index=a;return n(s,u),s}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:zn(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:zn(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?sL:typeof o=="function"?o:zn(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??Tv,i):n},i}function kDe(t,e){if((r=t.length)>0){for(var n,r,i=0,o=t[0].length,s;i<o;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}Tv(t,e)}}function ADe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,o=r.length;n<o;++n){for(var s=0,a=0;s<i;++s)a+=t[s][n][1]||0;r[n][1]+=r[n][0]=-a/2}Tv(t,e)}}function MDe(t,e){if(!(!((s=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,o,s;r<o;++r){for(var a=0,l=0,c=0;a<s;++a){for(var u=t[e[a]],d=u[r][1]||0,f=u[r-1][1]||0,h=(d-f)/2,g=0;g<a;++g){var p=t[e[g]],m=p[r][1]||0,v=p[r-1][1]||0;h+=m-v}l+=d,c+=h*d}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,Tv(t,e)}}function Dx(t){"@babel/helpers - typeof";return Dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dx(t)}var IDe=["type","size","sizeType"];function aL(){return aL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aL.apply(this,arguments)}function k8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function A8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k8(Object(n),!0).forEach(function(r){ODe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ODe(t,e,n){return e=RDe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RDe(t){var e=DDe(t,"string");return Dx(e)=="symbol"?e:String(e)}function DDe(t,e){if(Dx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Dx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function PDe(t,e){if(t==null)return{};var n=NDe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function NDe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Ure={symbolCircle:wz,symbolCross:nDe,symbolDiamond:iDe,symbolSquare:oDe,symbolStar:cDe,symbolTriangle:uDe,symbolWye:fDe},$De=Math.PI/180,LDe=function(e){var n="symbol".concat(QM(e));return Ure[n]||wz},FDe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*$De;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},BDe=function(e,n){Ure["symbol".concat(QM(e))]=n},_z=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,o=i===void 0?64:i,s=e.sizeType,a=s===void 0?"area":s,l=PDe(e,IDe),c=A8(A8({},l),{},{type:r,size:o,sizeType:a}),u=function(){var m=LDe(r),v=hDe().type(m).size(FDe(o,a,r));return v()},d=c.className,f=c.cx,h=c.cy,g=wt(c,!0);return f===+f&&h===+h&&o===+o?B.createElement("path",aL({},g,{className:Ze("recharts-symbols",d),transform:"translate(".concat(f,", ").concat(h,")"),d:u()})):null};_z.registerSymbol=BDe;function kv(t){"@babel/helpers - typeof";return kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kv(t)}function lL(){return lL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lL.apply(this,arguments)}function M8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UDe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M8(Object(n),!0).forEach(function(r){Px(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zDe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jDe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jre(r.key),r)}}function WDe(t,e,n){return e&&jDe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function VDe(t,e,n){return e=qT(e),HDe(t,zre()?Reflect.construct(e,n||[],qT(t).constructor):e.apply(t,n))}function HDe(t,e){if(e&&(kv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GDe(t)}function GDe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zre(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zre=function(){return!!t})()}function qT(t){return qT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qT(t)}function qDe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cL(t,e)}function cL(t,e){return cL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},cL(t,e)}function Px(t,e,n){return e=jre(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jre(t){var e=XDe(t,"string");return kv(e)=="symbol"?e:String(e)}function XDe(t,e){if(kv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(kv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var na=32,Sz=function(t){qDe(e,t);function e(){return zDe(this,e),VDe(this,e,arguments)}return WDe(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,o=na/2,s=na/6,a=na/3,l=r.inactive?i:r.color;if(r.type==="plainline")return B.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:o,x2:na,y2:o,className:"recharts-legend-icon"});if(r.type==="line")return B.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(o,"h").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*a,",").concat(o,`
            H`).concat(na,"M").concat(2*a,",").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(a,",").concat(o),className:"recharts-legend-icon"});if(r.type==="rect")return B.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(na/8,"h").concat(na,"v").concat(na*3/4,"h").concat(-na,"z"),className:"recharts-legend-icon"});if(B.isValidElement(r.legendIcon)){var c=UDe({},r);return delete c.legendIcon,B.cloneElement(r.legendIcon,c)}return B.createElement(_z,{fill:l,cx:o,cy:o,size:na,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,o=i.payload,s=i.iconSize,a=i.layout,l=i.formatter,c=i.inactiveColor,u={x:0,y:0,width:na,height:na},d={display:a==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(h,g){var p=h.formatter||l,m=Ze(Px(Px({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",h.inactive));if(h.type==="none")return null;var v=Rt(h.value)?null:h.value;yl(!Rt(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var _=h.inactive?c:h.color;return B.createElement("li",lL({className:m,style:d,key:"legend-item-".concat(g)},Cp(r.props,h,g)),B.createElement(J$,{width:s,height:s,viewBox:u,style:f},r.renderIcon(h)),B.createElement("span",{className:"recharts-legend-item-text",style:{color:_}},p?p(v,h,g):v))})}},{key:"render",value:function(){var r=this.props,i=r.payload,o=r.layout,s=r.align;if(!i||!i.length)return null;var a={padding:0,margin:0,textAlign:o==="horizontal"?s:"left"};return B.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}]),e}(R.PureComponent);Px(Sz,"displayName","Legend");Px(Sz,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var KDe=FM;function YDe(){this.__data__=new KDe,this.size=0}var QDe=YDe;function ZDe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var JDe=ZDe;function ePe(t){return this.__data__.get(t)}var tPe=ePe;function nPe(t){return this.__data__.has(t)}var rPe=nPe,iPe=FM,oPe=cz,sPe=uz,aPe=200;function lPe(t,e){var n=this.__data__;if(n instanceof iPe){var r=n.__data__;if(!oPe||r.length<aPe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new sPe(r)}return n.set(t,e),this.size=n.size,this}var cPe=lPe,uPe=FM,dPe=QDe,fPe=JDe,hPe=tPe,pPe=rPe,mPe=cPe;function Fy(t){var e=this.__data__=new uPe(t);this.size=e.size}Fy.prototype.clear=dPe;Fy.prototype.delete=fPe;Fy.prototype.get=hPe;Fy.prototype.has=pPe;Fy.prototype.set=mPe;var Wre=Fy,gPe="__lodash_hash_undefined__";function vPe(t){return this.__data__.set(t,gPe),this}var yPe=vPe;function bPe(t){return this.__data__.has(t)}var xPe=bPe,wPe=uz,_Pe=yPe,SPe=xPe;function XT(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new wPe;++e<n;)this.add(t[e])}XT.prototype.add=XT.prototype.push=_Pe;XT.prototype.has=SPe;var Vre=XT;function CPe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Hre=CPe;function EPe(t,e){return t.has(e)}var Gre=EPe,TPe=Vre,kPe=Hre,APe=Gre,MPe=1,IPe=2;function OPe(t,e,n,r,i,o){var s=n&MPe,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(t),u=o.get(e);if(c&&u)return c==e&&u==t;var d=-1,f=!0,h=n&IPe?new TPe:void 0;for(o.set(t,e),o.set(e,t);++d<a;){var g=t[d],p=e[d];if(r)var m=s?r(p,g,d,e,t,o):r(g,p,d,t,e,o);if(m!==void 0){if(m)continue;f=!1;break}if(h){if(!kPe(e,function(v,_){if(!APe(h,_)&&(g===v||i(g,v,n,r,o)))return h.push(_)})){f=!1;break}}else if(!(g===p||i(g,p,n,r,o))){f=!1;break}}return o.delete(t),o.delete(e),f}var qre=OPe,RPe=Wc,DPe=RPe.Uint8Array,PPe=DPe;function NPe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var $Pe=NPe;function LPe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var Cz=LPe,I8=x_,O8=PPe,FPe=lz,BPe=qre,UPe=$Pe,zPe=Cz,jPe=1,WPe=2,VPe="[object Boolean]",HPe="[object Date]",GPe="[object Error]",qPe="[object Map]",XPe="[object Number]",KPe="[object RegExp]",YPe="[object Set]",QPe="[object String]",ZPe="[object Symbol]",JPe="[object ArrayBuffer]",eNe="[object DataView]",R8=I8?I8.prototype:void 0,wD=R8?R8.valueOf:void 0;function tNe(t,e,n,r,i,o,s){switch(n){case eNe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case JPe:return!(t.byteLength!=e.byteLength||!o(new O8(t),new O8(e)));case VPe:case HPe:case XPe:return FPe(+t,+e);case GPe:return t.name==e.name&&t.message==e.message;case KPe:case QPe:return t==e+"";case qPe:var a=UPe;case YPe:var l=r&jPe;if(a||(a=zPe),t.size!=e.size&&!l)return!1;var c=s.get(t);if(c)return c==e;r|=WPe,s.set(t,e);var u=BPe(a(t),a(e),r,i,o,s);return s.delete(t),u;case ZPe:if(wD)return wD.call(t)==wD.call(e)}return!1}var nNe=tNe;function rNe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var Xre=rNe,iNe=Xre,oNe=fs;function sNe(t,e,n){var r=e(t);return oNe(t)?r:iNe(r,n(t))}var aNe=sNe;function lNe(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}var cNe=lNe;function uNe(){return[]}var dNe=uNe,fNe=cNe,hNe=dNe,pNe=Object.prototype,mNe=pNe.propertyIsEnumerable,D8=Object.getOwnPropertySymbols,gNe=D8?function(t){return t==null?[]:(t=Object(t),fNe(D8(t),function(e){return mNe.call(t,e)}))}:hNe,vNe=gNe;function yNe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var bNe=yNe,xNe=Zu,wNe=Ju,_Ne="[object Arguments]";function SNe(t){return wNe(t)&&xNe(t)==_Ne}var CNe=SNe,P8=CNe,ENe=Ju,Kre=Object.prototype,TNe=Kre.hasOwnProperty,kNe=Kre.propertyIsEnumerable,ANe=P8(function(){return arguments}())?P8:function(t){return ENe(t)&&TNe.call(t,"callee")&&!kNe.call(t,"callee")},Ez=ANe,KT={exports:{}};function MNe(){return!1}var INe=MNe;KT.exports;(function(t,e){var n=Wc,r=INe,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,s=o&&o.exports===i,a=s?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||r;t.exports=c})(KT,KT.exports);var Yre=KT.exports,ONe=9007199254740991,RNe=/^(?:0|[1-9]\d*)$/;function DNe(t,e){var n=typeof t;return e=e??ONe,!!e&&(n=="number"||n!="symbol"&&RNe.test(t))&&t>-1&&t%1==0&&t<e}var Tz=DNe,PNe=9007199254740991;function NNe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=PNe}var kz=NNe,$Ne=Zu,LNe=kz,FNe=Ju,BNe="[object Arguments]",UNe="[object Array]",zNe="[object Boolean]",jNe="[object Date]",WNe="[object Error]",VNe="[object Function]",HNe="[object Map]",GNe="[object Number]",qNe="[object Object]",XNe="[object RegExp]",KNe="[object Set]",YNe="[object String]",QNe="[object WeakMap]",ZNe="[object ArrayBuffer]",JNe="[object DataView]",e$e="[object Float32Array]",t$e="[object Float64Array]",n$e="[object Int8Array]",r$e="[object Int16Array]",i$e="[object Int32Array]",o$e="[object Uint8Array]",s$e="[object Uint8ClampedArray]",a$e="[object Uint16Array]",l$e="[object Uint32Array]",Zn={};Zn[e$e]=Zn[t$e]=Zn[n$e]=Zn[r$e]=Zn[i$e]=Zn[o$e]=Zn[s$e]=Zn[a$e]=Zn[l$e]=!0;Zn[BNe]=Zn[UNe]=Zn[ZNe]=Zn[zNe]=Zn[JNe]=Zn[jNe]=Zn[WNe]=Zn[VNe]=Zn[HNe]=Zn[GNe]=Zn[qNe]=Zn[XNe]=Zn[KNe]=Zn[YNe]=Zn[QNe]=!1;function c$e(t){return FNe(t)&&LNe(t.length)&&!!Zn[$Ne(t)]}var u$e=c$e;function d$e(t){return function(e){return t(e)}}var Qre=d$e,YT={exports:{}};YT.exports;(function(t,e){var n=ire,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,s=o&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();t.exports=a})(YT,YT.exports);var f$e=YT.exports,h$e=u$e,p$e=Qre,N8=f$e,$8=N8&&N8.isTypedArray,m$e=$8?p$e($8):h$e,Zre=m$e,g$e=bNe,v$e=Ez,y$e=fs,b$e=Yre,x$e=Tz,w$e=Zre,_$e=Object.prototype,S$e=_$e.hasOwnProperty;function C$e(t,e){var n=y$e(t),r=!n&&v$e(t),i=!n&&!r&&b$e(t),o=!n&&!r&&!i&&w$e(t),s=n||r||i||o,a=s?g$e(t.length,String):[],l=a.length;for(var c in t)(e||S$e.call(t,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||x$e(c,l)))&&a.push(c);return a}var E$e=C$e,T$e=Object.prototype;function k$e(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||T$e;return t===n}var A$e=k$e;function M$e(t,e){return function(n){return t(e(n))}}var Jre=M$e,I$e=Jre,O$e=I$e(Object.keys,Object),R$e=O$e,D$e=A$e,P$e=R$e,N$e=Object.prototype,$$e=N$e.hasOwnProperty;function L$e(t){if(!D$e(t))return P$e(t);var e=[];for(var n in Object(t))$$e.call(t,n)&&n!="constructor"&&e.push(n);return e}var F$e=L$e,B$e=az,U$e=kz;function z$e(t){return t!=null&&U$e(t.length)&&!B$e(t)}var __=z$e,j$e=E$e,W$e=F$e,V$e=__;function H$e(t){return V$e(t)?j$e(t):W$e(t)}var tI=H$e,G$e=aNe,q$e=vNe,X$e=tI;function K$e(t){return G$e(t,X$e,q$e)}var Y$e=K$e,L8=Y$e,Q$e=1,Z$e=Object.prototype,J$e=Z$e.hasOwnProperty;function eLe(t,e,n,r,i,o){var s=n&Q$e,a=L8(t),l=a.length,c=L8(e),u=c.length;if(l!=u&&!s)return!1;for(var d=l;d--;){var f=a[d];if(!(s?f in e:J$e.call(e,f)))return!1}var h=o.get(t),g=o.get(e);if(h&&g)return h==e&&g==t;var p=!0;o.set(t,e),o.set(e,t);for(var m=s;++d<l;){f=a[d];var v=t[f],_=e[f];if(r)var w=s?r(_,v,f,e,t,o):r(v,_,f,t,e,o);if(!(w===void 0?v===_||i(v,_,n,r,o):w)){p=!1;break}m||(m=f=="constructor")}if(p&&!m){var y=t.constructor,b=e.constructor;y!=b&&"constructor"in t&&"constructor"in e&&!(typeof y=="function"&&y instanceof y&&typeof b=="function"&&b instanceof b)&&(p=!1)}return o.delete(t),o.delete(e),p}var tLe=eLe,nLe=Jp,rLe=Wc,iLe=nLe(rLe,"DataView"),oLe=iLe,sLe=Jp,aLe=Wc,lLe=sLe(aLe,"Promise"),cLe=lLe,uLe=Jp,dLe=Wc,fLe=uLe(dLe,"Set"),eie=fLe,hLe=Jp,pLe=Wc,mLe=hLe(pLe,"WeakMap"),gLe=mLe,uL=oLe,dL=cz,fL=cLe,hL=eie,pL=gLe,tie=Zu,By=sre,F8="[object Map]",vLe="[object Object]",B8="[object Promise]",U8="[object Set]",z8="[object WeakMap]",j8="[object DataView]",yLe=By(uL),bLe=By(dL),xLe=By(fL),wLe=By(hL),_Le=By(pL),gh=tie;(uL&&gh(new uL(new ArrayBuffer(1)))!=j8||dL&&gh(new dL)!=F8||fL&&gh(fL.resolve())!=B8||hL&&gh(new hL)!=U8||pL&&gh(new pL)!=z8)&&(gh=function(t){var e=tie(t),n=e==vLe?t.constructor:void 0,r=n?By(n):"";if(r)switch(r){case yLe:return j8;case bLe:return F8;case xLe:return B8;case wLe:return U8;case _Le:return z8}return e});var SLe=gh,_D=Wre,CLe=qre,ELe=nNe,TLe=tLe,W8=SLe,V8=fs,H8=Yre,kLe=Zre,ALe=1,G8="[object Arguments]",q8="[object Array]",uC="[object Object]",MLe=Object.prototype,X8=MLe.hasOwnProperty;function ILe(t,e,n,r,i,o){var s=V8(t),a=V8(e),l=s?q8:W8(t),c=a?q8:W8(e);l=l==G8?uC:l,c=c==G8?uC:c;var u=l==uC,d=c==uC,f=l==c;if(f&&H8(t)){if(!H8(e))return!1;s=!0,u=!1}if(f&&!u)return o||(o=new _D),s||kLe(t)?CLe(t,e,n,r,i,o):ELe(t,e,l,n,r,i,o);if(!(n&ALe)){var h=u&&X8.call(t,"__wrapped__"),g=d&&X8.call(e,"__wrapped__");if(h||g){var p=h?t.value():t,m=g?e.value():e;return o||(o=new _D),i(p,m,n,r,o)}}return f?(o||(o=new _D),TLe(t,e,n,r,i,o)):!1}var OLe=ILe,RLe=OLe,K8=Ju;function nie(t,e,n,r,i){return t===e?!0:t==null||e==null||!K8(t)&&!K8(e)?t!==t&&e!==e:RLe(t,e,n,r,nie,i)}var Az=nie,DLe=Wre,PLe=Az,NLe=1,$Le=2;function LLe(t,e,n,r){var i=n.length,o=i,s=!r;if(t==null)return!o;for(t=Object(t);i--;){var a=n[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){a=n[i];var l=a[0],c=t[l],u=a[1];if(s&&a[2]){if(c===void 0&&!(l in t))return!1}else{var d=new DLe;if(r)var f=r(c,u,l,t,e,d);if(!(f===void 0?PLe(u,c,NLe|$Le,r,d):f))return!1}}return!0}var FLe=LLe,BLe=Pf;function ULe(t){return t===t&&!BLe(t)}var rie=ULe,zLe=rie,jLe=tI;function WLe(t){for(var e=jLe(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,zLe(i)]}return e}var VLe=WLe;function HLe(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var iie=HLe,GLe=FLe,qLe=VLe,XLe=iie;function KLe(t){var e=qLe(t);return e.length==1&&e[0][2]?XLe(e[0][0],e[0][1]):function(n){return n===t||GLe(n,t,e)}}var YLe=KLe;function QLe(t,e){return t!=null&&e in Object(t)}var ZLe=QLe,JLe=dre,eFe=Ez,tFe=fs,nFe=Tz,rFe=kz,iFe=UM;function oFe(t,e,n){e=JLe(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var s=iFe(e[r]);if(!(o=t!=null&&n(t,s)))break;t=t[s]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&rFe(i)&&nFe(s,i)&&(tFe(t)||eFe(t)))}var sFe=oFe,aFe=ZLe,lFe=sFe;function cFe(t,e){return t!=null&&lFe(t,e,aFe)}var uFe=cFe,dFe=Az,fFe=fre,hFe=uFe,pFe=sz,mFe=rie,gFe=iie,vFe=UM,yFe=1,bFe=2;function xFe(t,e){return pFe(t)&&mFe(e)?gFe(vFe(t),e):function(n){var r=fFe(n,t);return r===void 0&&r===e?hFe(n,t):dFe(e,r,yFe|bFe)}}var wFe=xFe;function _Fe(t){return t}var Uy=_Fe;function SFe(t){return function(e){return e==null?void 0:e[t]}}var CFe=SFe,EFe=hz;function TFe(t){return function(e){return EFe(e,t)}}var kFe=TFe,AFe=CFe,MFe=kFe,IFe=sz,OFe=UM;function RFe(t){return IFe(t)?AFe(OFe(t)):MFe(t)}var DFe=RFe,PFe=YLe,NFe=wFe,$Fe=Uy,LFe=fs,FFe=DFe;function BFe(t){return typeof t=="function"?t:t==null?$Fe:typeof t=="object"?LFe(t)?NFe(t[0],t[1]):PFe(t):FFe(t)}var Vc=BFe;function UFe(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var oie=UFe;function zFe(t){return t!==t}var jFe=zFe;function WFe(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var VFe=WFe,HFe=oie,GFe=jFe,qFe=VFe;function XFe(t,e,n){return e===e?qFe(t,e,n):HFe(t,GFe,n)}var KFe=XFe,YFe=KFe;function QFe(t,e){var n=t==null?0:t.length;return!!n&&YFe(t,e,0)>-1}var ZFe=QFe;function JFe(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var e3e=JFe;function t3e(){}var n3e=t3e,SD=eie,r3e=n3e,i3e=Cz,o3e=1/0,s3e=SD&&1/i3e(new SD([,-0]))[1]==o3e?function(t){return new SD(t)}:r3e,a3e=s3e,l3e=Vre,c3e=ZFe,u3e=e3e,d3e=Gre,f3e=a3e,h3e=Cz,p3e=200;function m3e(t,e,n){var r=-1,i=c3e,o=t.length,s=!0,a=[],l=a;if(n)s=!1,i=u3e;else if(o>=p3e){var c=e?null:f3e(t);if(c)return h3e(c);s=!1,i=d3e,l=new l3e}else l=e?[]:a;e:for(;++r<o;){var u=t[r],d=e?e(u):u;if(u=n||u!==0?u:0,s&&d===d){for(var f=l.length;f--;)if(l[f]===d)continue e;e&&l.push(d),a.push(u)}else i(l,d,n)||(l!==a&&l.push(d),a.push(u))}return a}var g3e=m3e,v3e=Vc,y3e=g3e;function b3e(t,e){return t&&t.length?y3e(t,v3e(e)):[]}var x3e=b3e;const Y8=cn(x3e);function sie(t,e,n){return e===!0?Y8(t,n):Rt(e)?Y8(t,e):t}function Av(t){"@babel/helpers - typeof";return Av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Av(t)}var w3e=["ref"];function Q8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ih(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q8(Object(n),!0).forEach(function(r){nI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z8(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cie(r.key),r)}}function S3e(t,e,n){return e&&Z8(t.prototype,e),n&&Z8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function C3e(t,e,n){return e=QT(e),E3e(t,aie()?Reflect.construct(e,n||[],QT(t).constructor):e.apply(t,n))}function E3e(t,e){if(e&&(Av(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lie(t)}function aie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aie=function(){return!!t})()}function QT(t){return QT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},QT(t)}function lie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mL(t,e)}function mL(t,e){return mL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},mL(t,e)}function nI(t,e,n){return e=cie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cie(t){var e=k3e(t,"string");return Av(e)=="symbol"?e:String(e)}function k3e(t,e){if(Av(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Av(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function A3e(t,e){if(t==null)return{};var n=M3e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function M3e(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function I3e(t){return t.value}function O3e(t,e){if(B.isValidElement(t))return B.cloneElement(t,e);if(typeof t=="function")return B.createElement(t,e);e.ref;var n=A3e(e,w3e);return B.createElement(Sz,n)}var J8=1,Nu=function(t){T3e(e,t);function e(){var n;_3e(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=C3e(this,e,[].concat(i)),nI(lie(n),"lastBoundingBox",{width:-1,height:-1}),n}return S3e(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>J8||Math.abs(i.height-this.lastBoundingBox.height)>J8)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ih({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,o=i.layout,s=i.align,a=i.verticalAlign,l=i.margin,c=i.chartWidth,u=i.chartHeight,d,f;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&o==="vertical"){var h=this.getBBoxSnapshot();d={left:((c||0)-h.width)/2}}else d=s==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(a==="middle"){var g=this.getBBoxSnapshot();f={top:((u||0)-g.height)/2}}else f=a==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return ih(ih({},d),f)}},{key:"render",value:function(){var r=this,i=this.props,o=i.content,s=i.width,a=i.height,l=i.wrapperStyle,c=i.payloadUniqBy,u=i.payload,d=ih(ih({position:"absolute",width:s||"auto",height:a||"auto"},this.getDefaultPosition(l)),l);return B.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(h){r.wrapperNode=h}},O3e(o,ih(ih({},this.props),{},{payload:sie(u,c,I3e)})))}}],[{key:"getWithHeight",value:function(r,i){var o=r.props.layout;return o==="vertical"&&Qe(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||i}:null}}]),e}(R.PureComponent);nI(Nu,"displayName","Legend");nI(Nu,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var eq=x_,R3e=Ez,D3e=fs,tq=eq?eq.isConcatSpreadable:void 0;function P3e(t){return D3e(t)||R3e(t)||!!(tq&&t&&t[tq])}var N3e=P3e,$3e=Xre,L3e=N3e;function uie(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=L3e),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?uie(a,e-1,n,r,i):$3e(i,a):r||(i[i.length]=a)}return i}var die=uie;function F3e(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var l=s[t?a:++i];if(n(o[l],l,o)===!1)break}return e}}var B3e=F3e,U3e=B3e,z3e=U3e(),j3e=z3e,W3e=j3e,V3e=tI;function H3e(t,e){return t&&W3e(t,e,V3e)}var fie=H3e,G3e=__;function q3e(t,e){return function(n,r){if(n==null)return n;if(!G3e(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=Object(n);(e?o--:++o<i)&&r(s[o],o,s)!==!1;);return n}}var X3e=q3e,K3e=fie,Y3e=X3e,Q3e=Y3e(K3e),Mz=Q3e,Z3e=Mz,J3e=__;function eBe(t,e){var n=-1,r=J3e(t)?Array(t.length):[];return Z3e(t,function(i,o,s){r[++n]=e(i,o,s)}),r}var hie=eBe;function tBe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var nBe=tBe,nq=Ry;function rBe(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,o=nq(t),s=e!==void 0,a=e===null,l=e===e,c=nq(e);if(!a&&!c&&!o&&t>e||o&&s&&l&&!a&&!c||r&&s&&l||!n&&l||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!l)return-1}return 0}var iBe=rBe,oBe=iBe;function sBe(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;++r<s;){var l=oBe(i[r],o[r]);if(l){if(r>=a)return l;var c=n[r];return l*(c=="desc"?-1:1)}}return t.index-e.index}var aBe=sBe,CD=fz,lBe=hz,cBe=Vc,uBe=hie,dBe=nBe,fBe=Qre,hBe=aBe,pBe=Uy,mBe=fs;function gBe(t,e,n){e.length?e=CD(e,function(o){return mBe(o)?function(s){return lBe(s,o.length===1?o[0]:o)}:o}):e=[pBe];var r=-1;e=CD(e,fBe(cBe));var i=uBe(t,function(o,s,a){var l=CD(e,function(c){return c(o)});return{criteria:l,index:++r,value:o}});return dBe(i,function(o,s){return hBe(o,s,n)})}var vBe=gBe;function yBe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var bBe=yBe,xBe=bBe,rq=Math.max;function wBe(t,e,n){return e=rq(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=rq(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(s),xBe(t,this,a)}}var _Be=wBe;function SBe(t){return function(){return t}}var CBe=SBe,EBe=Jp,TBe=function(){try{var t=EBe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),pie=TBe,kBe=CBe,iq=pie,ABe=Uy,MBe=iq?function(t,e){return iq(t,"toString",{configurable:!0,enumerable:!1,value:kBe(e),writable:!0})}:ABe,IBe=MBe,OBe=800,RBe=16,DBe=Date.now;function PBe(t){var e=0,n=0;return function(){var r=DBe(),i=RBe-(r-n);if(n=r,i>0){if(++e>=OBe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var NBe=PBe,$Be=IBe,LBe=NBe,FBe=LBe($Be),BBe=FBe,UBe=Uy,zBe=_Be,jBe=BBe;function WBe(t,e){return jBe(zBe(t,e,UBe),t+"")}var VBe=WBe,HBe=lz,GBe=__,qBe=Tz,XBe=Pf;function KBe(t,e,n){if(!XBe(n))return!1;var r=typeof e;return(r=="number"?GBe(n)&&qBe(e,n.length):r=="string"&&e in n)?HBe(n[e],t):!1}var rI=KBe,YBe=die,QBe=vBe,ZBe=VBe,oq=rI,JBe=ZBe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&oq(t,e[0],e[1])?e=[]:n>2&&oq(e[0],e[1],e[2])&&(e=[e[0]]),QBe(t,YBe(e,1),[])}),eUe=JBe;const Iz=cn(eUe);function Nx(t){"@babel/helpers - typeof";return Nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nx(t)}function gL(){return gL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gL.apply(this,arguments)}function tUe(t,e){return oUe(t)||iUe(t,e)||rUe(t,e)||nUe()}function nUe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rUe(t,e){if(t){if(typeof t=="string")return sq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sq(t,e)}}function sq(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function iUe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function oUe(t){if(Array.isArray(t))return t}function aq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ED(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aq(Object(n),!0).forEach(function(r){sUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sUe(t,e,n){return e=aUe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aUe(t){var e=lUe(t,"string");return Nx(e)=="symbol"?e:String(e)}function lUe(t,e){if(Nx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Nx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cUe(t){return Array.isArray(t)&&fi(t[0])&&fi(t[1])?t.join(" ~ "):t}var uUe=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,o=i===void 0?{}:i,s=e.itemStyle,a=s===void 0?{}:s,l=e.labelStyle,c=l===void 0?{}:l,u=e.payload,d=e.formatter,f=e.itemSorter,h=e.wrapperClassName,g=e.labelClassName,p=e.label,m=e.labelFormatter,v=e.accessibilityLayer,_=v===void 0?!1:v,w=function(){if(u&&u.length){var A={padding:0,margin:0},O=(f?Iz(u,f):u).map(function(D,P){if(D.type==="none")return null;var N=ED({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},a),U=D.formatter||d||cUe,L=D.value,V=D.name,G=L,Q=V;if(U&&G!=null&&Q!=null){var te=U(L,V,D,P,u);if(Array.isArray(te)){var ne=tUe(te,2);G=ne[0],Q=ne[1]}else G=te}return B.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(P),style:N},fi(Q)?B.createElement("span",{className:"recharts-tooltip-item-name"},Q):null,fi(Q)?B.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,B.createElement("span",{className:"recharts-tooltip-item-value"},G),B.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return B.createElement("ul",{className:"recharts-tooltip-item-list",style:A},O)}return null},y=ED({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),b=ED({margin:0},c),x=!Nt(p),S=x?p:"",C=Ze("recharts-default-tooltip",h),T=Ze("recharts-tooltip-label",g);x&&m&&u!==void 0&&u!==null&&(S=m(p,u));var E=_?{role:"status","aria-live":"assertive"}:{};return B.createElement("div",gL({className:C,style:y},E),B.createElement("p",{className:T,style:b},B.isValidElement(S)?S:"".concat(S)),w())};function $x(t){"@babel/helpers - typeof";return $x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$x(t)}function dC(t,e,n){return e=dUe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dUe(t){var e=fUe(t,"string");return $x(e)=="symbol"?e:String(e)}function fUe(t,e){if($x(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if($x(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var L0="recharts-tooltip-wrapper",hUe={visibility:"hidden"};function pUe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return Ze(L0,dC(dC(dC(dC({},"".concat(L0,"-right"),Qe(n)&&e&&Qe(e.x)&&n>=e.x),"".concat(L0,"-left"),Qe(n)&&e&&Qe(e.x)&&n<e.x),"".concat(L0,"-bottom"),Qe(r)&&e&&Qe(e.y)&&r>=e.y),"".concat(L0,"-top"),Qe(r)&&e&&Qe(e.y)&&r<e.y))}function lq(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,o=t.position,s=t.reverseDirection,a=t.tooltipDimension,l=t.viewBox,c=t.viewBoxDimension;if(o&&Qe(o[r]))return o[r];var u=n[r]-a-i,d=n[r]+i;if(e[r])return s[r]?u:d;if(s[r]){var f=u,h=l[r];return f<h?Math.max(d,l[r]):Math.max(u,l[r])}var g=d+a,p=l[r]+c;return g>p?Math.max(u,l[r]):Math.max(d,l[r])}function mUe(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function gUe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,o=t.reverseDirection,s=t.tooltipBox,a=t.useTranslate3d,l=t.viewBox,c,u,d;return s.height>0&&s.width>0&&n?(u=lq({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),d=lq({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),c=mUe({translateX:u,translateY:d,useTranslate3d:a})):c=hUe,{cssProperties:c,cssClasses:pUe({translateX:u,translateY:d,coordinate:n})}}function Mv(t){"@babel/helpers - typeof";return Mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mv(t)}function cq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cq(Object(n),!0).forEach(function(r){bL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vUe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yUe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gie(r.key),r)}}function bUe(t,e,n){return e&&yUe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xUe(t,e,n){return e=ZT(e),wUe(t,mie()?Reflect.construct(e,n||[],ZT(t).constructor):e.apply(t,n))}function wUe(t,e){if(e&&(Mv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vL(t)}function mie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mie=function(){return!!t})()}function ZT(t){return ZT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ZT(t)}function vL(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _Ue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yL(t,e)}function yL(t,e){return yL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},yL(t,e)}function bL(t,e,n){return e=gie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gie(t){var e=SUe(t,"string");return Mv(e)=="symbol"?e:String(e)}function SUe(t,e){if(Mv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Mv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dq=1,CUe=function(t){_Ue(e,t);function e(){var n;vUe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=xUe(this,e,[].concat(i)),bL(vL(n),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),bL(vL(n),"handleKeyDown",function(s){if(s.key==="Escape"){var a,l,c,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&a!==void 0?a:0,y:(c=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&c!==void 0?c:0}})}}),n}return bUe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>dq||Math.abs(r.height-this.state.lastBoundingBox.height)>dq)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,o=i.active,s=i.allowEscapeViewBox,a=i.animationDuration,l=i.animationEasing,c=i.children,u=i.coordinate,d=i.hasPayload,f=i.isAnimationActive,h=i.offset,g=i.position,p=i.reverseDirection,m=i.useTranslate3d,v=i.viewBox,_=i.wrapperStyle,w=gUe({allowEscapeViewBox:s,coordinate:u,offsetTopLeft:h,position:g,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:m,viewBox:v}),y=w.cssClasses,b=w.cssProperties,x=uq(uq({transition:f&&o?"transform ".concat(a,"ms ").concat(l):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&d?"visible":"hidden",position:"absolute",top:0,left:0},_);return B.createElement("div",{tabIndex:-1,className:y,style:x,ref:function(C){r.wrapperNode=C}},c)}}]),e}(R.PureComponent),EUe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},bl={isSsr:EUe(),get:function(e){return bl[e]},set:function(e,n){if(typeof e=="string")bl[e]=n;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(i){bl[i]=e[i]})}}};function Iv(t){"@babel/helpers - typeof";return Iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iv(t)}function fq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fq(Object(n),!0).forEach(function(r){Oz(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TUe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kUe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yie(r.key),r)}}function AUe(t,e,n){return e&&kUe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function MUe(t,e,n){return e=JT(e),IUe(t,vie()?Reflect.construct(e,n||[],JT(t).constructor):e.apply(t,n))}function IUe(t,e){if(e&&(Iv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OUe(t)}function OUe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vie=function(){return!!t})()}function JT(t){return JT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},JT(t)}function RUe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xL(t,e)}function xL(t,e){return xL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},xL(t,e)}function Oz(t,e,n){return e=yie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yie(t){var e=DUe(t,"string");return Iv(e)=="symbol"?e:String(e)}function DUe(t,e){if(Iv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Iv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function PUe(t){return t.dataKey}function NUe(t,e){return B.isValidElement(t)?B.cloneElement(t,e):typeof t=="function"?B.createElement(t,e):B.createElement(uUe,e)}var si=function(t){RUe(e,t);function e(){return TUe(this,e),MUe(this,e,arguments)}return AUe(e,[{key:"render",value:function(){var r=this,i=this.props,o=i.active,s=i.allowEscapeViewBox,a=i.animationDuration,l=i.animationEasing,c=i.content,u=i.coordinate,d=i.filterNull,f=i.isAnimationActive,h=i.offset,g=i.payload,p=i.payloadUniqBy,m=i.position,v=i.reverseDirection,_=i.useTranslate3d,w=i.viewBox,y=i.wrapperStyle,b=g??[];d&&b.length&&(b=sie(g.filter(function(S){return S.value!=null&&(S.hide!==!0||r.props.includeHidden)}),p,PUe));var x=b.length>0;return B.createElement(CUe,{allowEscapeViewBox:s,animationDuration:a,animationEasing:l,isAnimationActive:f,active:o,coordinate:u,hasPayload:x,offset:h,position:m,reverseDirection:v,useTranslate3d:_,viewBox:w,wrapperStyle:y},NUe(c,hq(hq({},this.props),{},{payload:b})))}}]),e}(R.PureComponent);Oz(si,"displayName","Tooltip");Oz(si,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!bl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var $Ue=Wc,LUe=function(){return $Ue.Date.now()},FUe=LUe,BUe=/\s/;function UUe(t){for(var e=t.length;e--&&BUe.test(t.charAt(e)););return e}var zUe=UUe,jUe=zUe,WUe=/^\s+/;function VUe(t){return t&&t.slice(0,jUe(t)+1).replace(WUe,"")}var HUe=VUe,GUe=HUe,pq=Pf,qUe=Ry,mq=NaN,XUe=/^[-+]0x[0-9a-f]+$/i,KUe=/^0b[01]+$/i,YUe=/^0o[0-7]+$/i,QUe=parseInt;function ZUe(t){if(typeof t=="number")return t;if(qUe(t))return mq;if(pq(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=pq(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=GUe(t);var n=KUe.test(t);return n||YUe.test(t)?QUe(t.slice(2),n?2:8):XUe.test(t)?mq:+t}var bie=ZUe,JUe=Pf,TD=FUe,gq=bie,eze="Expected a function",tze=Math.max,nze=Math.min;function rze(t,e,n){var r,i,o,s,a,l,c=0,u=!1,d=!1,f=!0;if(typeof t!="function")throw new TypeError(eze);e=gq(e)||0,JUe(n)&&(u=!!n.leading,d="maxWait"in n,o=d?tze(gq(n.maxWait)||0,e):o,f="trailing"in n?!!n.trailing:f);function h(x){var S=r,C=i;return r=i=void 0,c=x,s=t.apply(C,S),s}function g(x){return c=x,a=setTimeout(v,e),u?h(x):s}function p(x){var S=x-l,C=x-c,T=e-S;return d?nze(T,o-C):T}function m(x){var S=x-l,C=x-c;return l===void 0||S>=e||S<0||d&&C>=o}function v(){var x=TD();if(m(x))return _(x);a=setTimeout(v,p(x))}function _(x){return a=void 0,f&&r?h(x):(r=i=void 0,s)}function w(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function y(){return a===void 0?s:_(TD())}function b(){var x=TD(),S=m(x);if(r=arguments,i=this,l=x,S){if(a===void 0)return g(l);if(d)return clearTimeout(a),a=setTimeout(v,e),h(l)}return a===void 0&&(a=setTimeout(v,e)),s}return b.cancel=w,b.flush=y,b}var ize=rze,oze=ize,sze=Pf,aze="Expected a function";function lze(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(aze);return sze(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),oze(t,e,{leading:r,maxWait:e,trailing:i})}var cze=lze;const xie=cn(cze);function Lx(t){"@babel/helpers - typeof";return Lx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lx(t)}function vq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vq(Object(n),!0).forEach(function(r){uze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uze(t,e,n){return e=dze(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dze(t){var e=fze(t,"string");return Lx(e)=="symbol"?e:String(e)}function fze(t,e){if(Lx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Lx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hze(t,e){return vze(t)||gze(t,e)||mze(t,e)||pze()}function pze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mze(t,e){if(t){if(typeof t=="string")return yq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yq(t,e)}}function yq(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gze(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function vze(t){if(Array.isArray(t))return t}var As=R.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,o=t.width,s=o===void 0?"100%":o,a=t.height,l=a===void 0?"100%":a,c=t.minWidth,u=c===void 0?0:c,d=t.minHeight,f=t.maxHeight,h=t.children,g=t.debounce,p=g===void 0?0:g,m=t.id,v=t.className,_=t.onResize,w=t.style,y=w===void 0?{}:w,b=R.useRef(null),x=R.useRef();x.current=_,R.useImperativeHandle(e,function(){return Object.defineProperty(b.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),b.current},configurable:!0})});var S=R.useState({containerWidth:i.width,containerHeight:i.height}),C=hze(S,2),T=C[0],E=C[1],k=R.useCallback(function(O,D){E(function(P){var N=Math.round(O),U=Math.round(D);return P.containerWidth===N&&P.containerHeight===U?P:{containerWidth:N,containerHeight:U}})},[]);R.useEffect(function(){var O=function(V){var G,Q=V[0].contentRect,te=Q.width,ne=Q.height;k(te,ne),(G=x.current)===null||G===void 0||G.call(x,te,ne)};p>0&&(O=xie(O,p,{trailing:!0,leading:!1}));var D=new ResizeObserver(O),P=b.current.getBoundingClientRect(),N=P.width,U=P.height;return k(N,U),D.observe(b.current),function(){D.disconnect()}},[k,p]);var A=R.useMemo(function(){var O=T.containerWidth,D=T.containerHeight;if(O<0||D<0)return null;yl(Bh(s)||Bh(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,l),yl(!n||n>0,"The aspect(%s) must be greater than zero.",n);var P=Bh(s)?O:s,N=Bh(l)?D:l;n&&n>0&&(P?N=P/n:N&&(P=N*n),f&&N>f&&(N=f)),yl(P>0||N>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,N,s,l,u,d,n);var U=!Array.isArray(h)&&X$.isElement(h)&&Su(h.type).endsWith("Chart");return B.Children.map(h,function(L){return X$.isElement(L)?R.cloneElement(L,fC({width:P,height:N},U?{style:fC({height:"100%",width:"100%",maxHeight:N,maxWidth:P},L.props.style)}:{})):L})},[n,h,l,f,d,u,T,s]);return B.createElement("div",{id:m?"".concat(m):void 0,className:Ze("recharts-responsive-container",v),style:fC(fC({},y),{},{width:s,height:l,minWidth:u,minHeight:d,maxHeight:f}),ref:b},A)}),Rz=function(e){return null};Rz.displayName="Cell";function Fx(t){"@babel/helpers - typeof";return Fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fx(t)}function bq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bq(Object(n),!0).forEach(function(r){yze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yze(t,e,n){return e=bze(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bze(t){var e=xze(t,"string");return Fx(e)=="symbol"?e:String(e)}function xze(t,e){if(Fx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Fx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zm={widthCache:{},cacheCount:0},wze=2e3,_ze={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},xq="recharts_measurement_span";function Sze(t){var e=wL({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var jb=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||bl.isSsr)return{width:0,height:0};var r=Sze(n),i=JSON.stringify({text:e,copyStyle:r});if(zm.widthCache[i])return zm.widthCache[i];try{var o=document.getElementById(xq);o||(o=document.createElement("span"),o.setAttribute("id",xq),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var s=wL(wL({},_ze),r);Object.assign(o.style,s),o.textContent="".concat(e);var a=o.getBoundingClientRect(),l={width:a.width,height:a.height};return zm.widthCache[i]=l,++zm.cacheCount>wze&&(zm.cacheCount=0,zm.widthCache={}),l}catch{return{width:0,height:0}}},Cze=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Bx(t){"@babel/helpers - typeof";return Bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bx(t)}function ek(t,e){return Aze(t)||kze(t,e)||Tze(t,e)||Eze()}function Eze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tze(t,e){if(t){if(typeof t=="string")return wq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wq(t,e)}}function wq(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kze(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function Aze(t){if(Array.isArray(t))return t}function Mze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Oze(r.key),r)}}function Ize(t,e,n){return e&&_q(t.prototype,e),n&&_q(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Oze(t){var e=Rze(t,"string");return Bx(e)=="symbol"?e:String(e)}function Rze(t,e){if(Bx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Sq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Cq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Dze=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Pze=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,wie={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Nze=Object.keys(wie),Rg="NaN";function $ze(t,e){return t*wie[e]}var hC=function(){function t(e,n){Mze(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!Dze.test(n)&&(this.num=NaN,this.unit=""),Nze.includes(n)&&(this.num=$ze(e,n),this.unit="px")}return Ize(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=Pze.exec(n))!==null&&r!==void 0?r:[],o=ek(i,3),s=o[1],a=o[2];return new t(parseFloat(s),a??"")}}]),t}();function _ie(t){if(t.includes(Rg))return Rg;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=Sq.exec(e))!==null&&n!==void 0?n:[],i=ek(r,4),o=i[1],s=i[2],a=i[3],l=hC.parse(o??""),c=hC.parse(a??""),u=s==="*"?l.multiply(c):l.divide(c);if(u.isNaN())return Rg;e=e.replace(Sq,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,f=(d=Cq.exec(e))!==null&&d!==void 0?d:[],h=ek(f,4),g=h[1],p=h[2],m=h[3],v=hC.parse(g??""),_=hC.parse(m??""),w=p==="+"?v.add(_):v.subtract(_);if(w.isNaN())return Rg;e=e.replace(Cq,w.toString())}return e}var Eq=/\(([^()]*)\)/;function Lze(t){for(var e=t;e.includes("(");){var n=Eq.exec(e),r=ek(n,2),i=r[1];e=e.replace(Eq,_ie(i))}return e}function Fze(t){var e=t.replace(/\s+/g,"");return e=Lze(e),e=_ie(e),e}function Bze(t){try{return Fze(t)}catch{return Rg}}function kD(t){var e=Bze(t.slice(5,-1));return e===Rg?"":e}var Uze=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],zze=["dx","dy","angle","className","breakAll"];function _L(){return _L=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_L.apply(this,arguments)}function Tq(t,e){if(t==null)return{};var n=jze(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jze(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function kq(t,e){return Gze(t)||Hze(t,e)||Vze(t,e)||Wze()}function Wze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vze(t,e){if(t){if(typeof t=="string")return Aq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Aq(t,e)}}function Aq(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hze(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function Gze(t){if(Array.isArray(t))return t}var Sie=/[ \f\n\r\t\v\u2028\u2029]+/,Cie=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var o=[];Nt(n)||(r?o=n.toString().split(""):o=n.toString().split(Sie));var s=o.map(function(l){return{word:l,width:jb(l,i).width}}),a=r?0:jb(" ",i).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}},qze=function(e,n,r,i,o){var s=e.maxLines,a=e.children,l=e.style,c=e.breakAll,u=Qe(s),d=a,f=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P.reduce(function(N,U){var L=U.word,V=U.width,G=N[N.length-1];if(G&&(i==null||o||G.width+V+r<Number(i)))G.words.push(L),G.width+=V+r;else{var Q={words:[L],width:V};N.push(Q)}return N},[])},h=f(n),g=function(P){return P.reduce(function(N,U){return N.width>U.width?N:U})};if(!u)return h;for(var p="…",m=function(P){var N=d.slice(0,P),U=Cie({breakAll:c,style:l,children:N+p}).wordsWithComputedWidth,L=f(U),V=L.length>s||g(L).width>Number(i);return[V,L]},v=0,_=d.length-1,w=0,y;v<=_&&w<=d.length-1;){var b=Math.floor((v+_)/2),x=b-1,S=m(x),C=kq(S,2),T=C[0],E=C[1],k=m(b),A=kq(k,1),O=A[0];if(!T&&!O&&(v=b+1),T&&O&&(_=b-1),!T&&O){y=E;break}w++}return y||h},Mq=function(e){var n=Nt(e)?[]:e.toString().split(Sie);return[{words:n}]},Xze=function(e){var n=e.width,r=e.scaleToFit,i=e.children,o=e.style,s=e.breakAll,a=e.maxLines;if((n||r)&&!bl.isSsr){var l,c,u=Cie({breakAll:s,children:i,style:o});if(u){var d=u.wordsWithComputedWidth,f=u.spaceWidth;l=d,c=f}else return Mq(i);return qze({breakAll:s,children:i,maxLines:a,style:o},l,c,n,r)}return Mq(i)},Iq="#808080",Ep=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,s=e.lineHeight,a=s===void 0?"1em":s,l=e.capHeight,c=l===void 0?"0.71em":l,u=e.scaleToFit,d=u===void 0?!1:u,f=e.textAnchor,h=f===void 0?"start":f,g=e.verticalAnchor,p=g===void 0?"end":g,m=e.fill,v=m===void 0?Iq:m,_=Tq(e,Uze),w=R.useMemo(function(){return Xze({breakAll:_.breakAll,children:_.children,maxLines:_.maxLines,scaleToFit:d,style:_.style,width:_.width})},[_.breakAll,_.children,_.maxLines,d,_.style,_.width]),y=_.dx,b=_.dy,x=_.angle,S=_.className,C=_.breakAll,T=Tq(_,zze);if(!fi(r)||!fi(o))return null;var E=r+(Qe(y)?y:0),k=o+(Qe(b)?b:0),A;switch(p){case"start":A=kD("calc(".concat(c,")"));break;case"middle":A=kD("calc(".concat((w.length-1)/2," * -").concat(a," + (").concat(c," / 2))"));break;default:A=kD("calc(".concat(w.length-1," * -").concat(a,")"));break}var O=[];if(d){var D=w[0].width,P=_.width;O.push("scale(".concat((Qe(P)?P/D:1)/D,")"))}return x&&O.push("rotate(".concat(x,", ").concat(E,", ").concat(k,")")),O.length&&(T.transform=O.join(" ")),B.createElement("text",_L({},wt(T,!0),{x:E,y:k,className:Ze("recharts-text",S),textAnchor:h,fill:v.includes("url")?Iq:v}),w.map(function(N,U){var L=N.words.join(C?"":" ");return B.createElement("tspan",{x:E,dy:U===0?A:a,key:L},L)}))};function rf(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Kze(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Dz(t){let e,n,r;t.length!==2?(e=rf,n=(a,l)=>rf(t(a),l),r=(a,l)=>t(a)-l):(e=t===rf||t===Kze?t:Yze,n=t,r=t);function i(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(a[d],l)<0?c=d+1:u=d}while(c<u)}return c}function o(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(a[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function s(a,l,c=0,u=a.length){const d=i(a,l,c,u-1);return d>c&&r(a[d-1],l)>-r(a[d],l)?d-1:d}return{left:i,center:s,right:o}}function Yze(){return 0}function Eie(t){return t===null?NaN:+t}function*Qze(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Zze=Dz(rf),S_=Zze.right;Dz(Eie).center;class Oq extends Map{constructor(e,n=tje){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Rq(this,e))}has(e){return super.has(Rq(this,e))}set(e,n){return super.set(Jze(this,e),n)}delete(e){return super.delete(eje(this,e))}}function Rq({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Jze({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function eje({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(n),t.delete(r)),n}function tje(t){return t!==null&&typeof t=="object"?t.valueOf():t}function nje(t=rf){if(t===rf)return Tie;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Tie(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const rje=Math.sqrt(50),ije=Math.sqrt(10),oje=Math.sqrt(2);function tk(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=rje?10:o>=ije?5:o>=oje?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/s,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*s,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?tk(t,e,n*2):[a,l,c]}function SL(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,s]=r?tk(e,t,n):tk(t,e,n);if(!(o>=i))return[];const a=o-i+1,l=new Array(a);if(r)if(s<0)for(let c=0;c<a;++c)l[c]=(o-c)/-s;else for(let c=0;c<a;++c)l[c]=(o-c)*s;else if(s<0)for(let c=0;c<a;++c)l[c]=(i+c)/-s;else for(let c=0;c<a;++c)l[c]=(i+c)*s;return l}function CL(t,e,n){return e=+e,t=+t,n=+n,tk(t,e,n)[2]}function EL(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?CL(e,t,n):CL(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Dq(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function Pq(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function kie(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?Tie:nje(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),d=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*d*(l-d)/l)*(c-l/2<0?-1:1),h=Math.max(n,Math.floor(e-c*d/l+f)),g=Math.min(r,Math.floor(e+(l-c)*d/l+f));kie(t,e,h,g,i)}const o=t[e];let s=n,a=r;for(F0(t,n,e),i(t[r],o)>0&&F0(t,n,r);s<a;){for(F0(t,s,a),++s,--a;i(t[s],o)<0;)++s;for(;i(t[a],o)>0;)--a}i(t[n],o)===0?F0(t,n,a):(++a,F0(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function F0(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function sje(t,e,n){if(t=Float64Array.from(Qze(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Pq(t);if(e>=1)return Dq(t);var r,i=(r-1)*e,o=Math.floor(i),s=Dq(kie(t,o).subarray(0,o+1)),a=Pq(t.subarray(o+1));return s+(a-s)*(i-o)}}function aje(t,e,n=Eie){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),s=+n(t[o],o,t),a=+n(t[o+1],o+1,t);return s+(a-s)*(i-o)}}function lje(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function Fa(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ed(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const TL=Symbol("implicit");function Pz(){var t=new Oq,e=[],n=[],r=TL;function i(o){let s=t.get(o);if(s===void 0){if(r!==TL)return r;t.set(o,s=e.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new Oq;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Pz(e,n).unknown(r)},Fa.apply(i,arguments),i}function Ux(){var t=Pz().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,s,a=!1,l=0,c=0,u=.5;delete t.unknown;function d(){var f=e().length,h=i<r,g=h?i:r,p=h?r:i;o=(p-g)/Math.max(1,f-l+c*2),a&&(o=Math.floor(o)),g+=(p-g-o*(f-l))*u,s=o*(1-l),a&&(g=Math.round(g),s=Math.round(s));var m=lje(f).map(function(v){return g+o*v});return n(h?m.reverse():m)}return t.domain=function(f){return arguments.length?(e(f),d()):e()},t.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,a=!0,d()},t.bandwidth=function(){return s},t.step=function(){return o},t.round=function(f){return arguments.length?(a=!!f,d()):a},t.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),d()):l},t.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),d()):l},t.paddingOuter=function(f){return arguments.length?(c=+f,d()):c},t.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),d()):u},t.copy=function(){return Ux(e(),[r,i]).round(a).paddingInner(l).paddingOuter(c).align(u)},Fa.apply(d(),arguments)}function Aie(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Aie(e())},t}function Wb(){return Aie(Ux.apply(null,arguments).paddingInner(1))}function Nz(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Mie(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function C_(){}var zx=.7,nk=1/zx,Zg="\\s*([+-]?\\d+)\\s*",jx="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",mc="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cje=/^#([0-9a-f]{3,8})$/,uje=new RegExp("^rgb\\("+[Zg,Zg,Zg]+"\\)$"),dje=new RegExp("^rgb\\("+[mc,mc,mc]+"\\)$"),fje=new RegExp("^rgba\\("+[Zg,Zg,Zg,jx]+"\\)$"),hje=new RegExp("^rgba\\("+[mc,mc,mc,jx]+"\\)$"),pje=new RegExp("^hsl\\("+[jx,mc,mc]+"\\)$"),mje=new RegExp("^hsla\\("+[jx,mc,mc,jx]+"\\)$"),Nq={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Nz(C_,Wx,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:$q,formatHex:$q,formatHsl:gje,formatRgb:Lq,toString:Lq});function $q(){return this.rgb().formatHex()}function gje(){return Iie(this).formatHsl()}function Lq(){return this.rgb().formatRgb()}function Wx(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=cje.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Fq(e):n===3?new Ms(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?pC(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?pC(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=uje.exec(t))?new Ms(e[1],e[2],e[3],1):(e=dje.exec(t))?new Ms(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=fje.exec(t))?pC(e[1],e[2],e[3],e[4]):(e=hje.exec(t))?pC(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=pje.exec(t))?zq(e[1],e[2]/100,e[3]/100,1):(e=mje.exec(t))?zq(e[1],e[2]/100,e[3]/100,e[4]):Nq.hasOwnProperty(t)?Fq(Nq[t]):t==="transparent"?new Ms(NaN,NaN,NaN,0):null}function Fq(t){return new Ms(t>>16&255,t>>8&255,t&255,1)}function pC(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ms(t,e,n,r)}function vje(t){return t instanceof C_||(t=Wx(t)),t?(t=t.rgb(),new Ms(t.r,t.g,t.b,t.opacity)):new Ms}function kL(t,e,n,r){return arguments.length===1?vje(t):new Ms(t,e,n,r??1)}function Ms(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Nz(Ms,kL,Mie(C_,{brighter:function(t){return t=t==null?nk:Math.pow(nk,t),new Ms(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?zx:Math.pow(zx,t),new Ms(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Bq,formatHex:Bq,formatRgb:Uq,toString:Uq}));function Bq(){return"#"+AD(this.r)+AD(this.g)+AD(this.b)}function Uq(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function AD(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function zq(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ec(t,e,n,r)}function Iie(t){if(t instanceof ec)return new ec(t.h,t.s,t.l,t.opacity);if(t instanceof C_||(t=Wx(t)),!t)return new ec;if(t instanceof ec)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new ec(s,a,l,t.opacity)}function yje(t,e,n,r){return arguments.length===1?Iie(t):new ec(t,e,n,r??1)}function ec(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Nz(ec,yje,Mie(C_,{brighter:function(t){return t=t==null?nk:Math.pow(nk,t),new ec(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?zx:Math.pow(zx,t),new ec(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ms(MD(t>=240?t-240:t+120,i,r),MD(t,i,r),MD(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function MD(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const $z=t=>()=>t;function bje(t,e){return function(n){return t+n*e}}function xje(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function wje(t){return(t=+t)==1?Oie:function(e,n){return n-e?xje(e,n,t):$z(isNaN(e)?n:e)}}function Oie(t,e){var n=e-t;return n?bje(t,n):$z(isNaN(t)?e:t)}const jq=function t(e){var n=wje(e);function r(i,o){var s=n((i=kL(i)).r,(o=kL(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),c=Oie(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function _je(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function Sje(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Cje(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=zy(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function Eje(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function rk(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Tje(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=zy(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var AL=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ID=new RegExp(AL.source,"g");function kje(t){return function(){return t}}function Aje(t){return function(e){return t(e)+""}}function Mje(t,e){var n=AL.lastIndex=ID.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(t=t+"",e=e+"";(r=AL.exec(t))&&(i=ID.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:rk(r,i)})),n=ID.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?Aje(l[0].x):kje(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function zy(t,e){var n=typeof e,r;return e==null||n==="boolean"?$z(e):(n==="number"?rk:n==="string"?(r=Wx(e))?(e=r,jq):Mje:e instanceof Wx?jq:e instanceof Date?Eje:Sje(e)?_je:Array.isArray(e)?Cje:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Tje:rk)(t,e)}function Lz(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Ije(t,e){e===void 0&&(e=t,t=zy);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function Oje(t){return function(){return t}}function ik(t){return+t}var Wq=[0,1];function Mo(t){return t}function ML(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Oje(isNaN(e)?NaN:.5)}function Rje(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Dje(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=ML(i,r),o=n(s,o)):(r=ML(r,i),o=n(o,s)),function(a){return o(r(a))}}function Pje(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=ML(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(a){var l=S_(t,a,1,r)-1;return o[l](i[l](a))}}function E_(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function iI(){var t=Wq,e=Wq,n=zy,r,i,o,s=Mo,a,l,c;function u(){var f=Math.min(t.length,e.length);return s!==Mo&&(s=Rje(t[0],t[f-1])),a=f>2?Pje:Dje,l=c=null,d}function d(f){return f==null||isNaN(f=+f)?o:(l||(l=a(t.map(r),e,n)))(r(s(f)))}return d.invert=function(f){return s(i((c||(c=a(e,t.map(r),rk)))(f)))},d.domain=function(f){return arguments.length?(t=Array.from(f,ik),u()):t.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),n=Lz,u()},d.clamp=function(f){return arguments.length?(s=f?!0:Mo,u()):s!==Mo},d.interpolate=function(f){return arguments.length?(n=f,u()):n},d.unknown=function(f){return arguments.length?(o=f,d):o},function(f,h){return r=f,i=h,u()}}function Fz(){return iI()(Mo,Mo)}function ok(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Ov(t){return t=ok(Math.abs(t)),t?t[1]:NaN}function Nje(t,e){return function(n,r){for(var i=n.length,o=[],s=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}function $je(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Lje=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Vx(t){return new Bz(t)}Vx.prototype=Bz.prototype;function Bz(t){if(!(e=Lje.exec(t)))throw new Error("invalid format: "+t);var e;this.fill=e[1]||" ",this.align=e[2]||">",this.sign=e[3]||"-",this.symbol=e[4]||"",this.zero=!!e[5],this.width=e[6]&&+e[6],this.comma=!!e[7],this.precision=e[8]&&+e[8].slice(1),this.trim=!!e[9],this.type=e[10]||""}Bz.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Fje(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(r>0){if(!+t[n])break e;r=0}break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Rie;function Bje(t,e){var n=ok(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Rie=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+ok(t,Math.max(0,e+o-1))[0]}function Vq(t,e){var n=ok(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Hq={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Vq(t*100,e)},r:Vq,s:Bje,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Gq(t){return t}var qq=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Uje(t){var e=t.grouping&&t.thousands?Nje(t.grouping,t.thousands):Gq,n=t.currency,r=t.decimal,i=t.numerals?$je(t.numerals):Gq,o=t.percent||"%";function s(l){l=Vx(l);var c=l.fill,u=l.align,d=l.sign,f=l.symbol,h=l.zero,g=l.width,p=l.comma,m=l.precision,v=l.trim,_=l.type;_==="n"?(p=!0,_="g"):Hq[_]||(m==null&&(m=12),v=!0,_="g"),(h||c==="0"&&u==="=")&&(h=!0,c="0",u="=");var w=f==="$"?n[0]:f==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",y=f==="$"?n[1]:/[%p]/.test(_)?o:"",b=Hq[_],x=/[defgprs%]/.test(_);m=m==null?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m));function S(C){var T=w,E=y,k,A,O;if(_==="c")E=b(C)+E,C="";else{C=+C;var D=C<0;if(C=b(Math.abs(C),m),v&&(C=Fje(C)),D&&+C==0&&(D=!1),T=(D?d==="("?d:"-":d==="-"||d==="("?"":d)+T,E=(_==="s"?qq[8+Rie/3]:"")+E+(D&&d==="("?")":""),x){for(k=-1,A=C.length;++k<A;)if(O=C.charCodeAt(k),48>O||O>57){E=(O===46?r+C.slice(k+1):C.slice(k))+E,C=C.slice(0,k);break}}}p&&!h&&(C=e(C,1/0));var P=T.length+C.length+E.length,N=P<g?new Array(g-P+1).join(c):"";switch(p&&h&&(C=e(N+C,N.length?g-E.length:1/0),N=""),u){case"<":C=T+C+E+N;break;case"=":C=T+N+C+E;break;case"^":C=N.slice(0,P=N.length>>1)+T+C+E+N.slice(P);break;default:C=N+T+C+E;break}return i(C)}return S.toString=function(){return l+""},S}function a(l,c){var u=s((l=Vx(l),l.type="f",l)),d=Math.max(-8,Math.min(8,Math.floor(Ov(c)/3)))*3,f=Math.pow(10,-d),h=qq[8+d/3];return function(g){return u(f*g)+h}}return{format:s,formatPrefix:a}}var mC,Uz,Die;zje({decimal:".",thousands:",",grouping:[3],currency:["$",""]});function zje(t){return mC=Uje(t),Uz=mC.format,Die=mC.formatPrefix,mC}function jje(t){return Math.max(0,-Ov(Math.abs(t)))}function Wje(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ov(e)/3)))*3-Ov(Math.abs(t)))}function Vje(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ov(e)-Ov(t))+1}function Pie(t,e,n,r){var i=EL(t,e,n),o;switch(r=Vx(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=Wje(i,s))&&(r.precision=o),Die(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Vje(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=jje(i))&&(r.precision=o-(r.type==="%")*2);break}}return Uz(r)}function Nf(t){var e=t.domain;return t.ticks=function(n){var r=e();return SL(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Pie(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,s=r[i],a=r[o],l,c,u=10;for(a<s&&(c=s,s=a,a=c,c=i,i=o,o=c);u-- >0;){if(c=CL(s,a,n),c===l)return r[i]=s,r[o]=a,e(r);if(c>0)s=Math.floor(s/c)*c,a=Math.ceil(a/c)*c;else if(c<0)s=Math.ceil(s*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function sk(){var t=Fz();return t.copy=function(){return E_(t,sk())},Fa.apply(t,arguments),Nf(t)}function Nie(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,ik),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return Nie(t).unknown(e)},t=arguments.length?Array.from(t,ik):[0,1],Nf(n)}function $ie(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),t[n]=e.floor(i),t[r]=e.ceil(o),t}function Xq(t){return Math.log(t)}function Kq(t){return Math.exp(t)}function Hje(t){return-Math.log(-t)}function Gje(t){return-Math.exp(-t)}function qje(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Xje(t){return t===10?qje:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Kje(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function Yq(t){return(e,n)=>-t(-e,n)}function zz(t){const e=t(Xq,Kq),n=e.domain;let r=10,i,o;function s(){return i=Kje(r),o=Xje(r),n()[0]<0?(i=Yq(i),o=Yq(o),t(Hje,Gje)):t(Xq,Kq),e}return e.base=function(a){return arguments.length?(r=+a,s()):r},e.domain=function(a){return arguments.length?(n(a),s()):n()},e.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const d=u<c;d&&([c,u]=[u,c]);let f=i(c),h=i(u),g,p;const m=a==null?10:+a;let v=[];if(!(r%1)&&h-f<m){if(f=Math.floor(f),h=Math.ceil(h),c>0){for(;f<=h;++f)for(g=1;g<r;++g)if(p=f<0?g/o(-f):g*o(f),!(p<c)){if(p>u)break;v.push(p)}}else for(;f<=h;++f)for(g=r-1;g>=1;--g)if(p=f>0?g/o(-f):g*o(f),!(p<c)){if(p>u)break;v.push(p)}v.length*2<m&&(v=SL(c,u,m))}else v=SL(f,h,Math.min(h-f,m)).map(o);return d?v.reverse():v},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Vx(l)).precision==null&&(l.trim=!0),l=Uz(l)),a===1/0)return l;const c=Math.max(1,r*a/e.ticks().length);return u=>{let d=u/o(Math.round(i(u)));return d*r<r-.5&&(d*=r),d<=c?l(u):""}},e.nice=()=>n($ie(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),e}function Lie(){const t=zz(iI()).domain([1,10]);return t.copy=()=>E_(t,Lie()).base(t.base()),Fa.apply(t,arguments),t}function Qq(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Zq(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function jz(t){var e=1,n=t(Qq(e),Zq(e));return n.constant=function(r){return arguments.length?t(Qq(e=+r),Zq(e)):e},Nf(n)}function Fie(){var t=jz(iI());return t.copy=function(){return E_(t,Fie()).constant(t.constant())},Fa.apply(t,arguments)}function Jq(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Yje(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Qje(t){return t<0?-t*t:t*t}function Wz(t){var e=t(Mo,Mo),n=1;function r(){return n===1?t(Mo,Mo):n===.5?t(Yje,Qje):t(Jq(n),Jq(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Nf(e)}function Vz(){var t=Wz(iI());return t.copy=function(){return E_(t,Vz()).exponent(t.exponent())},Fa.apply(t,arguments),t}function Zje(){return Vz.apply(null,arguments).exponent(.5)}function e9(t){return Math.sign(t)*t*t}function Jje(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Bie(){var t=Fz(),e=[0,1],n=!1,r;function i(o){var s=Jje(t(o));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(o){return t.invert(e9(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,ik)).map(e9)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Bie(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Fa.apply(i,arguments),Nf(i)}function Uie(){var t=[],e=[],n=[],r;function i(){var s=0,a=Math.max(1,e.length);for(n=new Array(a-1);++s<a;)n[s-1]=aje(t,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:e[S_(n,s)]}return o.invertExtent=function(s){var a=e.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},o.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let a of s)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(rf),i()},o.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return Uie().domain(t).range(e).unknown(r)},Fa.apply(o,arguments)}function zie(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function s(l){return l!=null&&l<=l?i[S_(r,l,0,n)]:o}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return s}return s.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},s.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return zie().domain([t,e]).range(i).unknown(o)},Fa.apply(Nf(s),arguments)}function jie(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[S_(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var s=e.indexOf(o);return[t[s-1],t[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return jie().domain(t).range(e).unknown(n)},Fa.apply(i,arguments)}const OD=new Date,RD=new Date;function yi(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(e(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const l=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;let c;do l.push(c=new Date(+o)),e(o,a),t(o);while(c<o&&o<s);return l},i.filter=o=>yi(s=>{if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;e(s,-1),!o(s););else for(;--a>=0;)for(;e(s,1),!o(s););}),n&&(i.count=(o,s)=>(OD.setTime(+o),RD.setTime(+s),t(OD),t(RD),Math.floor(n(OD,RD))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const ak=yi(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);ak.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?yi(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):ak);ak.range;const gu=1e3,xa=gu*60,vu=xa*60,$u=vu*24,Hz=$u*7,t9=$u*30,DD=$u*365,Uh=yi(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*gu)},(t,e)=>(e-t)/gu,t=>t.getUTCSeconds());Uh.range;const Gz=yi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*gu)},(t,e)=>{t.setTime(+t+e*xa)},(t,e)=>(e-t)/xa,t=>t.getMinutes());Gz.range;const qz=yi(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*xa)},(t,e)=>(e-t)/xa,t=>t.getUTCMinutes());qz.range;const Xz=yi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*gu-t.getMinutes()*xa)},(t,e)=>{t.setTime(+t+e*vu)},(t,e)=>(e-t)/vu,t=>t.getHours());Xz.range;const Kz=yi(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*vu)},(t,e)=>(e-t)/vu,t=>t.getUTCHours());Kz.range;const Yz=yi(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*xa)/$u,t=>t.getDate()-1);Yz.range;const Wie=yi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/$u,t=>t.getUTCDate()-1);Wie.range;const Vie=yi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/$u,t=>Math.floor(t/$u));Vie.range;function tm(t){return yi(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*xa)/Hz)}const Qz=tm(0),e4e=tm(1),t4e=tm(2),n4e=tm(3),r4e=tm(4),i4e=tm(5),o4e=tm(6);Qz.range;e4e.range;t4e.range;n4e.range;r4e.range;i4e.range;o4e.range;function nm(t){return yi(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Hz)}const Zz=nm(0),s4e=nm(1),a4e=nm(2),l4e=nm(3),c4e=nm(4),u4e=nm(5),d4e=nm(6);Zz.range;s4e.range;a4e.range;l4e.range;c4e.range;u4e.range;d4e.range;const Jz=yi(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Jz.range;const ej=yi(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());ej.range;const oI=yi(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());oI.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:yi(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});oI.range;const sI=yi(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());sI.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:yi(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});sI.range;function Hie(t,e,n,r,i,o){const s=[[Uh,1,gu],[Uh,5,5*gu],[Uh,15,15*gu],[Uh,30,30*gu],[o,1,xa],[o,5,5*xa],[o,15,15*xa],[o,30,30*xa],[i,1,vu],[i,3,3*vu],[i,6,6*vu],[i,12,12*vu],[r,1,$u],[r,2,2*$u],[n,1,Hz],[e,1,t9],[e,3,3*t9],[t,1,DD]];function a(c,u,d){const f=u<c;f&&([c,u]=[u,c]);const h=d&&typeof d.range=="function"?d:l(c,u,d),g=h?h.range(c,+u+1):[];return f?g.reverse():g}function l(c,u,d){const f=Math.abs(u-c)/d,h=Dz(([,,m])=>m).right(s,f);if(h===s.length)return t.every(EL(c/DD,u/DD,d));if(h===0)return ak.every(Math.max(EL(c,u,d),1));const[g,p]=s[f/s[h-1][2]<s[h][2]/f?h-1:h];return g.every(p)}return[a,l]}const[f4e,h4e]=Hie(sI,ej,Zz,Vie,Kz,qz),[p4e,m4e]=Hie(oI,Jz,Qz,Yz,Xz,Gz);var PD=new Date,ND=new Date;function td(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=function(o){return t(o=new Date(+o)),o},i.ceil=function(o){return t(o=new Date(o-1)),e(o,1),t(o),o},i.round=function(o){var s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=function(o,s){return e(o=new Date(+o),s==null?1:Math.floor(s)),o},i.range=function(o,s,a){var l=[],c;if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;do l.push(c=new Date(+o)),e(o,a),t(o);while(c<o&&o<s);return l},i.filter=function(o){return td(function(s){if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},function(s,a){if(s>=s)if(a<0)for(;++a<=0;)for(;e(s,-1),!o(s););else for(;--a>=0;)for(;e(s,1),!o(s););})},n&&(i.count=function(o,s){return PD.setTime(+o),ND.setTime(+s),t(PD),t(ND),Math.floor(n(PD,ND))},i.every=function(o){return o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?function(s){return r(s)%o===0}:function(s){return i.count(0,s)%o===0}):i}),i}const g4e=1e3,tj=g4e*60,v4e=tj*60,nj=v4e*24,Gie=nj*7;var rj=td(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*tj)/nj,t=>t.getDate()-1);rj.range;function rm(t){return td(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*tj)/Gie})}var qie=rm(0),lk=rm(1),y4e=rm(2),b4e=rm(3),Rv=rm(4),x4e=rm(5),w4e=rm(6);qie.range;lk.range;y4e.range;b4e.range;Rv.range;x4e.range;w4e.range;var Tp=td(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Tp.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:td(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};Tp.range;var ij=td(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/nj},function(t){return t.getUTCDate()-1});ij.range;function im(t){return td(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/Gie})}var Xie=im(0),ck=im(1),_4e=im(2),S4e=im(3),Dv=im(4),C4e=im(5),E4e=im(6);Xie.range;ck.range;_4e.range;S4e.range;Dv.range;C4e.range;E4e.range;var kp=td(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});kp.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:td(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};kp.range;function $D(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function LD(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function B0(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function T4e(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,s=t.shortDays,a=t.months,l=t.shortMonths,c=U0(i),u=z0(i),d=U0(o),f=z0(o),h=U0(s),g=z0(s),p=U0(a),m=z0(a),v=U0(l),_=z0(l),w={a:U,A:L,b:V,B:G,c:null,d:a9,e:a9,f:K4e,g:oWe,G:aWe,H:G4e,I:q4e,j:X4e,L:Kie,m:Y4e,M:Q4e,p:Q,q:te,Q:u9,s:d9,S:Z4e,u:J4e,U:eWe,V:tWe,w:nWe,W:rWe,x:null,X:null,y:iWe,Y:sWe,Z:lWe,"%":c9},y={a:ne,A:ee,b:re,B:se,c:null,d:l9,e:l9,f:fWe,g:_We,G:CWe,H:cWe,I:uWe,j:dWe,L:Qie,m:hWe,M:pWe,p:me,q:Me,Q:u9,s:d9,S:mWe,u:gWe,U:vWe,V:yWe,w:bWe,W:xWe,x:null,X:null,y:wWe,Y:SWe,Z:EWe,"%":c9},b={a:E,A:k,b:A,B:O,c:D,d:o9,e:o9,f:j4e,g:i9,G:r9,H:s9,I:s9,j:F4e,L:z4e,m:L4e,M:B4e,p:T,q:$4e,Q:V4e,s:H4e,S:U4e,u:O4e,U:R4e,V:D4e,w:I4e,W:P4e,x:P,X:N,y:i9,Y:r9,Z:N4e,"%":W4e};w.x=x(n,w),w.X=x(r,w),w.c=x(e,w),y.x=x(n,y),y.X=x(r,y),y.c=x(e,y);function x(de,Ce){return function(Ee){var q=[],Ve=-1,ze=0,Fe=de.length,we,Je,Z;for(Ee instanceof Date||(Ee=new Date(+Ee));++Ve<Fe;)de.charCodeAt(Ve)===37&&(q.push(de.slice(ze,Ve)),(Je=n9[we=de.charAt(++Ve)])!=null?we=de.charAt(++Ve):Je=we==="e"?" ":"0",(Z=Ce[we])&&(we=Z(Ee,Je)),q.push(we),ze=Ve+1);return q.push(de.slice(ze,Ve)),q.join("")}}function S(de,Ce){return function(Ee){var q=B0(1900,void 0,1),Ve=C(q,de,Ee+="",0),ze,Fe;if(Ve!=Ee.length)return null;if("Q"in q)return new Date(q.Q);if("s"in q)return new Date(q.s*1e3+("L"in q?q.L:0));if(Ce&&!("Z"in q)&&(q.Z=0),"p"in q&&(q.H=q.H%12+q.p*12),q.m===void 0&&(q.m="q"in q?q.q:0),"V"in q){if(q.V<1||q.V>53)return null;"w"in q||(q.w=1),"Z"in q?(ze=LD(B0(q.y,0,1)),Fe=ze.getUTCDay(),ze=Fe>4||Fe===0?ck.ceil(ze):ck(ze),ze=ij.offset(ze,(q.V-1)*7),q.y=ze.getUTCFullYear(),q.m=ze.getUTCMonth(),q.d=ze.getUTCDate()+(q.w+6)%7):(ze=$D(B0(q.y,0,1)),Fe=ze.getDay(),ze=Fe>4||Fe===0?lk.ceil(ze):lk(ze),ze=rj.offset(ze,(q.V-1)*7),q.y=ze.getFullYear(),q.m=ze.getMonth(),q.d=ze.getDate()+(q.w+6)%7)}else("W"in q||"U"in q)&&("w"in q||(q.w="u"in q?q.u%7:"W"in q?1:0),Fe="Z"in q?LD(B0(q.y,0,1)).getUTCDay():$D(B0(q.y,0,1)).getDay(),q.m=0,q.d="W"in q?(q.w+6)%7+q.W*7-(Fe+5)%7:q.w+q.U*7-(Fe+6)%7);return"Z"in q?(q.H+=q.Z/100|0,q.M+=q.Z%100,LD(q)):$D(q)}}function C(de,Ce,Ee,q){for(var Ve=0,ze=Ce.length,Fe=Ee.length,we,Je;Ve<ze;){if(q>=Fe)return-1;if(we=Ce.charCodeAt(Ve++),we===37){if(we=Ce.charAt(Ve++),Je=b[we in n9?Ce.charAt(Ve++):we],!Je||(q=Je(de,Ee,q))<0)return-1}else if(we!=Ee.charCodeAt(q++))return-1}return q}function T(de,Ce,Ee){var q=c.exec(Ce.slice(Ee));return q?(de.p=u.get(q[0].toLowerCase()),Ee+q[0].length):-1}function E(de,Ce,Ee){var q=h.exec(Ce.slice(Ee));return q?(de.w=g.get(q[0].toLowerCase()),Ee+q[0].length):-1}function k(de,Ce,Ee){var q=d.exec(Ce.slice(Ee));return q?(de.w=f.get(q[0].toLowerCase()),Ee+q[0].length):-1}function A(de,Ce,Ee){var q=v.exec(Ce.slice(Ee));return q?(de.m=_.get(q[0].toLowerCase()),Ee+q[0].length):-1}function O(de,Ce,Ee){var q=p.exec(Ce.slice(Ee));return q?(de.m=m.get(q[0].toLowerCase()),Ee+q[0].length):-1}function D(de,Ce,Ee){return C(de,e,Ce,Ee)}function P(de,Ce,Ee){return C(de,n,Ce,Ee)}function N(de,Ce,Ee){return C(de,r,Ce,Ee)}function U(de){return s[de.getDay()]}function L(de){return o[de.getDay()]}function V(de){return l[de.getMonth()]}function G(de){return a[de.getMonth()]}function Q(de){return i[+(de.getHours()>=12)]}function te(de){return 1+~~(de.getMonth()/3)}function ne(de){return s[de.getUTCDay()]}function ee(de){return o[de.getUTCDay()]}function re(de){return l[de.getUTCMonth()]}function se(de){return a[de.getUTCMonth()]}function me(de){return i[+(de.getUTCHours()>=12)]}function Me(de){return 1+~~(de.getUTCMonth()/3)}return{format:function(de){var Ce=x(de+="",w);return Ce.toString=function(){return de},Ce},parse:function(de){var Ce=S(de+="",!1);return Ce.toString=function(){return de},Ce},utcFormat:function(de){var Ce=x(de+="",y);return Ce.toString=function(){return de},Ce},utcParse:function(de){var Ce=S(de+="",!0);return Ce.toString=function(){return de},Ce}}}var n9={"-":"",_:" ",0:"0"},Ii=/^\s*\d+/,k4e=/^%/,A4e=/[\\^$*+?|[\]().{}]/g;function hn(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function M4e(t){return t.replace(A4e,"\\$&")}function U0(t){return new RegExp("^(?:"+t.map(M4e).join("|")+")","i")}function z0(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function I4e(t,e,n){var r=Ii.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function O4e(t,e,n){var r=Ii.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function R4e(t,e,n){var r=Ii.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function D4e(t,e,n){var r=Ii.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function P4e(t,e,n){var r=Ii.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function r9(t,e,n){var r=Ii.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function i9(t,e,n){var r=Ii.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function N4e(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function $4e(t,e,n){var r=Ii.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function L4e(t,e,n){var r=Ii.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function o9(t,e,n){var r=Ii.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function F4e(t,e,n){var r=Ii.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function s9(t,e,n){var r=Ii.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function B4e(t,e,n){var r=Ii.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function U4e(t,e,n){var r=Ii.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function z4e(t,e,n){var r=Ii.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function j4e(t,e,n){var r=Ii.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function W4e(t,e,n){var r=k4e.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function V4e(t,e,n){var r=Ii.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function H4e(t,e,n){var r=Ii.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function a9(t,e){return hn(t.getDate(),e,2)}function G4e(t,e){return hn(t.getHours(),e,2)}function q4e(t,e){return hn(t.getHours()%12||12,e,2)}function X4e(t,e){return hn(1+rj.count(Tp(t),t),e,3)}function Kie(t,e){return hn(t.getMilliseconds(),e,3)}function K4e(t,e){return Kie(t,e)+"000"}function Y4e(t,e){return hn(t.getMonth()+1,e,2)}function Q4e(t,e){return hn(t.getMinutes(),e,2)}function Z4e(t,e){return hn(t.getSeconds(),e,2)}function J4e(t){var e=t.getDay();return e===0?7:e}function eWe(t,e){return hn(qie.count(Tp(t)-1,t),e,2)}function Yie(t){var e=t.getDay();return e>=4||e===0?Rv(t):Rv.ceil(t)}function tWe(t,e){return t=Yie(t),hn(Rv.count(Tp(t),t)+(Tp(t).getDay()===4),e,2)}function nWe(t){return t.getDay()}function rWe(t,e){return hn(lk.count(Tp(t)-1,t),e,2)}function iWe(t,e){return hn(t.getFullYear()%100,e,2)}function oWe(t,e){return t=Yie(t),hn(t.getFullYear()%100,e,2)}function sWe(t,e){return hn(t.getFullYear()%1e4,e,4)}function aWe(t,e){var n=t.getDay();return t=n>=4||n===0?Rv(t):Rv.ceil(t),hn(t.getFullYear()%1e4,e,4)}function lWe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+hn(e/60|0,"0",2)+hn(e%60,"0",2)}function l9(t,e){return hn(t.getUTCDate(),e,2)}function cWe(t,e){return hn(t.getUTCHours(),e,2)}function uWe(t,e){return hn(t.getUTCHours()%12||12,e,2)}function dWe(t,e){return hn(1+ij.count(kp(t),t),e,3)}function Qie(t,e){return hn(t.getUTCMilliseconds(),e,3)}function fWe(t,e){return Qie(t,e)+"000"}function hWe(t,e){return hn(t.getUTCMonth()+1,e,2)}function pWe(t,e){return hn(t.getUTCMinutes(),e,2)}function mWe(t,e){return hn(t.getUTCSeconds(),e,2)}function gWe(t){var e=t.getUTCDay();return e===0?7:e}function vWe(t,e){return hn(Xie.count(kp(t)-1,t),e,2)}function Zie(t){var e=t.getUTCDay();return e>=4||e===0?Dv(t):Dv.ceil(t)}function yWe(t,e){return t=Zie(t),hn(Dv.count(kp(t),t)+(kp(t).getUTCDay()===4),e,2)}function bWe(t){return t.getUTCDay()}function xWe(t,e){return hn(ck.count(kp(t)-1,t),e,2)}function wWe(t,e){return hn(t.getUTCFullYear()%100,e,2)}function _We(t,e){return t=Zie(t),hn(t.getUTCFullYear()%100,e,2)}function SWe(t,e){return hn(t.getUTCFullYear()%1e4,e,4)}function CWe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Dv(t):Dv.ceil(t),hn(t.getUTCFullYear()%1e4,e,4)}function EWe(){return"+0000"}function c9(){return"%"}function u9(t){return+t}function d9(t){return Math.floor(+t/1e3)}var jm,Jie,eoe;TWe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function TWe(t){return jm=T4e(t),Jie=jm.format,jm.parse,eoe=jm.utcFormat,jm.utcParse,jm}function kWe(t){return new Date(t)}function AWe(t){return t instanceof Date?+t:+new Date(+t)}function oj(t,e,n,r,i,o,s,a,l,c){var u=Fz(),d=u.invert,f=u.domain,h=c(".%L"),g=c(":%S"),p=c("%I:%M"),m=c("%I %p"),v=c("%a %d"),_=c("%b %d"),w=c("%B"),y=c("%Y");function b(x){return(l(x)<x?h:a(x)<x?g:s(x)<x?p:o(x)<x?m:r(x)<x?i(x)<x?v:_:n(x)<x?w:y)(x)}return u.invert=function(x){return new Date(d(x))},u.domain=function(x){return arguments.length?f(Array.from(x,AWe)):f().map(kWe)},u.ticks=function(x){var S=f();return t(S[0],S[S.length-1],x??10)},u.tickFormat=function(x,S){return S==null?b:c(S)},u.nice=function(x){var S=f();return(!x||typeof x.range!="function")&&(x=e(S[0],S[S.length-1],x??10)),x?f($ie(S,x)):u},u.copy=function(){return E_(u,oj(t,e,n,r,i,o,s,a,l,c))},u}function MWe(){return Fa.apply(oj(p4e,m4e,oI,Jz,Qz,Yz,Xz,Gz,Uh,Jie).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function IWe(){return Fa.apply(oj(f4e,h4e,sI,ej,Zz,Wie,Kz,qz,Uh,eoe).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function aI(){var t=0,e=1,n,r,i,o,s=Mo,a=!1,l;function c(d){return d==null||isNaN(d=+d)?l:s(i===0?.5:(d=(o(d)-n)*i,a?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,e]=d,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(d){return arguments.length?(a=!!d,c):a},c.interpolator=function(d){return arguments.length?(s=d,c):s};function u(d){return function(f){var h,g;return arguments.length?([h,g]=f,s=d(h,g),c):[s(0),s(1)]}}return c.range=u(zy),c.rangeRound=u(Lz),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return o=d,n=d(t),r=d(e),i=n===r?0:1/(r-n),c}}function $f(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function toe(){var t=Nf(aI()(Mo));return t.copy=function(){return $f(t,toe())},ed.apply(t,arguments)}function noe(){var t=zz(aI()).domain([1,10]);return t.copy=function(){return $f(t,noe()).base(t.base())},ed.apply(t,arguments)}function roe(){var t=jz(aI());return t.copy=function(){return $f(t,roe()).constant(t.constant())},ed.apply(t,arguments)}function sj(){var t=Wz(aI());return t.copy=function(){return $f(t,sj()).exponent(t.exponent())},ed.apply(t,arguments)}function OWe(){return sj.apply(null,arguments).exponent(.5)}function ioe(){var t=[],e=Mo;function n(r){if(r!=null&&!isNaN(r=+r))return e((S_(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(rf),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>sje(t,o/r))},n.copy=function(){return ioe(e).domain(t)},ed.apply(n,arguments)}function lI(){var t=0,e=.5,n=1,r=1,i,o,s,a,l,c=Mo,u,d=!1,f;function h(p){return isNaN(p=+p)?f:(p=.5+((p=+u(p))-o)*(r*p<r*o?a:l),c(d?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([t,e,n]=p,i=u(t=+t),o=u(e=+e),s=u(n=+n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,h):[t,e,n]},h.clamp=function(p){return arguments.length?(d=!!p,h):d},h.interpolator=function(p){return arguments.length?(c=p,h):c};function g(p){return function(m){var v,_,w;return arguments.length?([v,_,w]=m,c=Ije(p,[v,_,w]),h):[c(0),c(.5),c(1)]}}return h.range=g(zy),h.rangeRound=g(Lz),h.unknown=function(p){return arguments.length?(f=p,h):f},function(p){return u=p,i=p(t),o=p(e),s=p(n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,h}}function ooe(){var t=Nf(lI()(Mo));return t.copy=function(){return $f(t,ooe())},ed.apply(t,arguments)}function soe(){var t=zz(lI()).domain([.1,1,10]);return t.copy=function(){return $f(t,soe()).base(t.base())},ed.apply(t,arguments)}function aoe(){var t=jz(lI());return t.copy=function(){return $f(t,aoe()).constant(t.constant())},ed.apply(t,arguments)}function aj(){var t=Wz(lI());return t.copy=function(){return $f(t,aj()).exponent(t.exponent())},ed.apply(t,arguments)}function RWe(){return aj.apply(null,arguments).exponent(.5)}const f9=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ux,scaleDiverging:ooe,scaleDivergingLog:soe,scaleDivergingPow:aj,scaleDivergingSqrt:RWe,scaleDivergingSymlog:aoe,scaleIdentity:Nie,scaleImplicit:TL,scaleLinear:sk,scaleLog:Lie,scaleOrdinal:Pz,scalePoint:Wb,scalePow:Vz,scaleQuantile:Uie,scaleQuantize:zie,scaleRadial:Bie,scaleSequential:toe,scaleSequentialLog:noe,scaleSequentialPow:sj,scaleSequentialQuantile:ioe,scaleSequentialSqrt:OWe,scaleSequentialSymlog:roe,scaleSqrt:Zje,scaleSymlog:Fie,scaleThreshold:jie,scaleTime:MWe,scaleUtc:IWe,tickFormat:Pie},Symbol.toStringTag,{value:"Module"}));var DWe=Ry;function PWe(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],s=e(o);if(s!=null&&(a===void 0?s===s&&!DWe(s):n(s,a)))var a=s,l=o}return l}var cI=PWe;function NWe(t,e){return t>e}var loe=NWe,$We=cI,LWe=loe,FWe=Uy;function BWe(t){return t&&t.length?$We(t,FWe,LWe):void 0}var UWe=BWe;const $d=cn(UWe);function zWe(t,e){return t<e}var coe=zWe,jWe=cI,WWe=coe,VWe=Uy;function HWe(t){return t&&t.length?jWe(t,VWe,WWe):void 0}var GWe=HWe;const uI=cn(GWe);var qWe=fz,XWe=Vc,KWe=hie,YWe=fs;function QWe(t,e){var n=YWe(t)?qWe:KWe;return n(t,XWe(e))}var ZWe=QWe,JWe=die,eVe=ZWe;function tVe(t,e){return JWe(eVe(t,e),1)}var nVe=tVe;const rVe=cn(nVe);var iVe=Az;function oVe(t,e){return iVe(t,e)}var sVe=oVe;const Ap=cn(sVe);var jy=1e9,aVe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},cj,ar=!0,Oa="[DecimalError] ",tp=Oa+"Invalid argument: ",lj=Oa+"Exponent out of range: ",Wy=Math.floor,vh=Math.pow,lVe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ss,Si=1e7,Jn=7,uoe=9007199254740991,uk=Wy(uoe/Jn),pt={};pt.absoluteValue=pt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};pt.comparedTo=pt.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(r=o.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};pt.decimalPlaces=pt.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Jn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};pt.dividedBy=pt.div=function(t){return Cu(this,new this.constructor(t))};pt.dividedToIntegerBy=pt.idiv=function(t){var e=this,n=e.constructor;return Bn(Cu(e,new n(t),0,1),n.precision)};pt.equals=pt.eq=function(t){return!this.cmp(t)};pt.exponent=function(){return Kr(this)};pt.greaterThan=pt.gt=function(t){return this.cmp(t)>0};pt.greaterThanOrEqualTo=pt.gte=function(t){return this.cmp(t)>=0};pt.isInteger=pt.isint=function(){return this.e>this.d.length-2};pt.isNegative=pt.isneg=function(){return this.s<0};pt.isPositive=pt.ispos=function(){return this.s>0};pt.isZero=function(){return this.s===0};pt.lessThan=pt.lt=function(t){return this.cmp(t)<0};pt.lessThanOrEqualTo=pt.lte=function(t){return this.cmp(t)<1};pt.logarithm=pt.log=function(t){var e,n=this,r=n.constructor,i=r.precision,o=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Ss))throw Error(Oa+"NaN");if(n.s<1)throw Error(Oa+(n.s?"NaN":"-Infinity"));return n.eq(Ss)?new r(0):(ar=!1,e=Cu(Hx(n,o),Hx(t,o),o),ar=!0,Bn(e,i))};pt.minus=pt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?hoe(e,t):doe(e,(t.s=-t.s,t))};pt.modulo=pt.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Oa+"NaN");return n.s?(ar=!1,e=Cu(n,t,0,1).times(t),ar=!0,n.minus(e)):Bn(new r(n),i)};pt.naturalExponential=pt.exp=function(){return foe(this)};pt.naturalLogarithm=pt.ln=function(){return Hx(this)};pt.negated=pt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};pt.plus=pt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?doe(e,t):hoe(e,(t.s=-t.s,t))};pt.precision=pt.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(tp+t);if(e=Kr(i)+1,r=i.d.length-1,n=r*Jn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};pt.squareRoot=pt.sqrt=function(){var t,e,n,r,i,o,s,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(Oa+"NaN")}for(t=Kr(a),ar=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=rc(a.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Wy((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=s=n+3;;)if(o=r,r=o.plus(Cu(a,o,s+2)).times(.5),rc(o.d).slice(0,s)===(e=rc(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(Bn(o,n+1,0),o.times(o).eq(a)){r=o;break}}else if(e!="9999")break;s+=4}return ar=!0,Bn(r,n)};pt.times=pt.mul=function(t){var e,n,r,i,o,s,a,l,c,u=this,d=u.constructor,f=u.d,h=(t=new d(t)).d;if(!u.s||!t.s)return new d(0);for(t.s*=u.s,n=u.e+t.e,l=f.length,c=h.length,l<c&&(o=f,f=h,h=o,s=l,l=c,c=s),o=[],s=l+c,r=s;r--;)o.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)a=o[i]+h[r]*f[i-r-1]+e,o[i--]=a%Si|0,e=a/Si|0;o[i]=(o[i]+e)%Si|0}for(;!o[--s];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,ar?Bn(t,d.precision):t};pt.toDecimalPlaces=pt.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Rc(t,0,jy),e===void 0?e=r.rounding:Rc(e,0,8),Bn(n,t+Kr(n)+1,e))};pt.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Mp(r,!0):(Rc(t,0,jy),e===void 0?e=i.rounding:Rc(e,0,8),r=Bn(new i(r),t+1,e),n=Mp(r,!0,t+1)),n};pt.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?Mp(i):(Rc(t,0,jy),e===void 0?e=o.rounding:Rc(e,0,8),r=Bn(new o(i),t+Kr(i)+1,e),n=Mp(r.abs(),!1,t+Kr(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};pt.toInteger=pt.toint=function(){var t=this,e=t.constructor;return Bn(new e(t),Kr(t)+1,e.rounding)};pt.toNumber=function(){return+this};pt.toPower=pt.pow=function(t){var e,n,r,i,o,s,a=this,l=a.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(Ss);if(a=new l(a),!a.s){if(t.s<1)throw Error(Oa+"Infinity");return a}if(a.eq(Ss))return a;if(r=l.precision,t.eq(Ss))return Bn(a,r);if(e=t.e,n=t.d.length-1,s=e>=n,o=a.s,s){if((n=u<0?-u:u)<=uoe){for(i=new l(Ss),e=Math.ceil(r/Jn+4),ar=!1;n%2&&(i=i.times(a),p9(i.d,e)),n=Wy(n/2),n!==0;)a=a.times(a),p9(a.d,e);return ar=!0,t.s<0?new l(Ss).div(i):Bn(i,r)}}else if(o<0)throw Error(Oa+"NaN");return o=o<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,ar=!1,i=t.times(Hx(a,r+c)),ar=!0,i=foe(i),i.s=o,i};pt.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?(n=Kr(i),r=Mp(i,n<=o.toExpNeg||n>=o.toExpPos)):(Rc(t,1,jy),e===void 0?e=o.rounding:Rc(e,0,8),i=Bn(new o(i),t,e),n=Kr(i),r=Mp(i,t<=n||n<=o.toExpNeg,t)),r};pt.toSignificantDigits=pt.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Rc(t,1,jy),e===void 0?e=r.rounding:Rc(e,0,8)),Bn(new r(n),t,e)};pt.toString=pt.valueOf=pt.val=pt.toJSON=pt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Kr(t),n=t.constructor;return Mp(t,e<=n.toExpNeg||e>=n.toExpPos)};function doe(t,e){var n,r,i,o,s,a,l,c,u=t.constructor,d=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),ar?Bn(e,d):e;if(l=t.d,c=e.d,s=t.e,i=e.e,l=l.slice(),o=s-i,o){for(o<0?(r=l,o=-o,a=c.length):(r=c,i=s,a=l.length),s=Math.ceil(d/Jn),a=s>a?s+1:a+1,o>a&&(o=a,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(a=l.length,o=c.length,a-o<0&&(o=a,r=c,c=l,l=r),n=0;o;)n=(l[--o]=l[o]+c[o]+n)/Si|0,l[o]%=Si;for(n&&(l.unshift(n),++i),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=i,ar?Bn(e,d):e}function Rc(t,e,n){if(t!==~~t||t<e||t>n)throw Error(tp+t)}function rc(t){var e,n,r,i=t.length-1,o="",s=t[0];if(i>0){for(o+=s,e=1;e<i;e++)r=t[e]+"",n=Jn-r.length,n&&(o+=Ed(n)),o+=r;s=t[e],r=s+"",n=Jn-r.length,n&&(o+=Ed(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}var Cu=function(){function t(r,i){var o,s=0,a=r.length;for(r=r.slice();a--;)o=r[a]*i+s,r[a]=o%Si|0,s=o/Si|0;return s&&r.unshift(s),r}function e(r,i,o,s){var a,l;if(o!=s)l=o>s?1:-1;else for(a=l=0;a<o;a++)if(r[a]!=i[a]){l=r[a]>i[a]?1:-1;break}return l}function n(r,i,o){for(var s=0;o--;)r[o]-=s,s=r[o]<i[o]?1:0,r[o]=s*Si+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,s){var a,l,c,u,d,f,h,g,p,m,v,_,w,y,b,x,S,C,T=r.constructor,E=r.s==i.s?1:-1,k=r.d,A=i.d;if(!r.s)return new T(r);if(!i.s)throw Error(Oa+"Division by zero");for(l=r.e-i.e,S=A.length,b=k.length,h=new T(E),g=h.d=[],c=0;A[c]==(k[c]||0);)++c;if(A[c]>(k[c]||0)&&--l,o==null?_=o=T.precision:s?_=o+(Kr(r)-Kr(i))+1:_=o,_<0)return new T(0);if(_=_/Jn+2|0,c=0,S==1)for(u=0,A=A[0],_++;(c<b||u)&&_--;c++)w=u*Si+(k[c]||0),g[c]=w/A|0,u=w%A|0;else{for(u=Si/(A[0]+1)|0,u>1&&(A=t(A,u),k=t(k,u),S=A.length,b=k.length),y=S,p=k.slice(0,S),m=p.length;m<S;)p[m++]=0;C=A.slice(),C.unshift(0),x=A[0],A[1]>=Si/2&&++x;do u=0,a=e(A,p,S,m),a<0?(v=p[0],S!=m&&(v=v*Si+(p[1]||0)),u=v/x|0,u>1?(u>=Si&&(u=Si-1),d=t(A,u),f=d.length,m=p.length,a=e(d,p,f,m),a==1&&(u--,n(d,S<f?C:A,f))):(u==0&&(a=u=1),d=A.slice()),f=d.length,f<m&&d.unshift(0),n(p,d,m),a==-1&&(m=p.length,a=e(A,p,S,m),a<1&&(u++,n(p,S<m?C:A,m))),m=p.length):a===0&&(u++,p=[0]),g[c++]=u,a&&p[0]?p[m++]=k[y]||0:(p=[k[y]],m=1);while((y++<b||p[0]!==void 0)&&_--)}return g[0]||g.shift(),h.e=l,Bn(h,s?o+Kr(h)+1:o)}}();function foe(t,e){var n,r,i,o,s,a,l=0,c=0,u=t.constructor,d=u.precision;if(Kr(t)>16)throw Error(lj+Kr(t));if(!t.s)return new u(Ss);for(e==null?(ar=!1,a=d):a=e,s=new u(.03125);t.abs().gte(.1);)t=t.times(s),c+=5;for(r=Math.log(vh(2,c))/Math.LN10*2+5|0,a+=r,n=i=o=new u(Ss),u.precision=a;;){if(i=Bn(i.times(t),a),n=n.times(++l),s=o.plus(Cu(i,n,a)),rc(s.d).slice(0,a)===rc(o.d).slice(0,a)){for(;c--;)o=Bn(o.times(o),a);return u.precision=d,e==null?(ar=!0,Bn(o,d)):o}o=s}}function Kr(t){for(var e=t.e*Jn,n=t.d[0];n>=10;n/=10)e++;return e}function FD(t,e,n){if(e>t.LN10.sd())throw ar=!0,n&&(t.precision=n),Error(Oa+"LN10 precision limit exceeded");return Bn(new t(t.LN10),e)}function Ed(t){for(var e="";t--;)e+="0";return e}function Hx(t,e){var n,r,i,o,s,a,l,c,u,d=1,f=10,h=t,g=h.d,p=h.constructor,m=p.precision;if(h.s<1)throw Error(Oa+(h.s?"NaN":"-Infinity"));if(h.eq(Ss))return new p(0);if(e==null?(ar=!1,c=m):c=e,h.eq(10))return e==null&&(ar=!0),FD(p,c);if(c+=f,p.precision=c,n=rc(g),r=n.charAt(0),o=Kr(h),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)h=h.times(t),n=rc(h.d),r=n.charAt(0),d++;o=Kr(h),r>1?(h=new p("0."+n),o++):h=new p(r+"."+n.slice(1))}else return l=FD(p,c+2,m).times(o+""),h=Hx(new p(r+"."+n.slice(1)),c-f).plus(l),p.precision=m,e==null?(ar=!0,Bn(h,m)):h;for(a=s=h=Cu(h.minus(Ss),h.plus(Ss),c),u=Bn(h.times(h),c),i=3;;){if(s=Bn(s.times(u),c),l=a.plus(Cu(s,new p(i),c)),rc(l.d).slice(0,c)===rc(a.d).slice(0,c))return a=a.times(2),o!==0&&(a=a.plus(FD(p,c+2,m).times(o+""))),a=Cu(a,new p(d),c),p.precision=m,e==null?(ar=!0,Bn(a,m)):a;a=l,i+=2}}function h9(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Wy(n/Jn),t.d=[],r=(n+1)%Jn,n<0&&(r+=Jn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Jn;r<i;)t.d.push(+e.slice(r,r+=Jn));e=e.slice(r),r=Jn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),ar&&(t.e>uk||t.e<-uk))throw Error(lj+n)}else t.s=0,t.e=0,t.d=[0];return t}function Bn(t,e,n){var r,i,o,s,a,l,c,u,d=t.d;for(s=1,o=d[0];o>=10;o/=10)s++;if(r=e-s,r<0)r+=Jn,i=e,c=d[u=0];else{if(u=Math.ceil((r+1)/Jn),o=d.length,u>=o)return t;for(c=o=d[u],s=1;o>=10;o/=10)s++;r%=Jn,i=r-Jn+s}if(n!==void 0&&(o=vh(10,s-i-1),a=c/o%10|0,l=e<0||d[u+1]!==void 0||c%o,l=n<4?(a||l)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||l||n==6&&(r>0?i>0?c/vh(10,s-i):0:d[u-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return l?(o=Kr(t),d.length=1,e=e-o-1,d[0]=vh(10,(Jn-e%Jn)%Jn),t.e=Wy(-e/Jn)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=u,o=1,u--):(d.length=u+1,o=vh(10,Jn-r),d[u]=i>0?(c/vh(10,s-i)%vh(10,i)|0)*o:0),l)for(;;)if(u==0){(d[0]+=o)==Si&&(d[0]=1,++t.e);break}else{if(d[u]+=o,d[u]!=Si)break;d[u--]=0,o=1}for(r=d.length;d[--r]===0;)d.pop();if(ar&&(t.e>uk||t.e<-uk))throw Error(lj+Kr(t));return t}function hoe(t,e){var n,r,i,o,s,a,l,c,u,d,f=t.constructor,h=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),ar?Bn(e,h):e;if(l=t.d,d=e.d,r=e.e,c=t.e,l=l.slice(),s=c-r,s){for(u=s<0,u?(n=l,s=-s,a=d.length):(n=d,r=c,a=l.length),i=Math.max(Math.ceil(h/Jn),a)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=l.length,a=d.length,u=i<a,u&&(a=i),i=0;i<a;i++)if(l[i]!=d[i]){u=l[i]<d[i];break}s=0}for(u&&(n=l,l=d,d=n,e.s=-e.s),a=l.length,i=d.length-a;i>0;--i)l[a++]=0;for(i=d.length;i>s;){if(l[--i]<d[i]){for(o=i;o&&l[--o]===0;)l[o]=Si-1;--l[o],l[i]+=Si}l[i]-=d[i]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,ar?Bn(e,h):e):new f(0)}function Mp(t,e,n){var r,i=Kr(t),o=rc(t.d),s=o.length;return e?(n&&(r=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+Ed(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+Ed(-i-1)+o,n&&(r=n-s)>0&&(o+=Ed(r))):i>=s?(o+=Ed(i+1-s),n&&(r=n-i-1)>0&&(o=o+"."+Ed(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(o+="."),o+=Ed(r))),t.s<0?"-"+o:o}function p9(t,e){if(t.length>e)return t.length=e,!0}function poe(t){var e,n,r;function i(o){var s=this;if(!(s instanceof i))return new i(o);if(s.constructor=i,o instanceof i){s.s=o.s,s.e=o.e,s.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(tp+o);if(o>0)s.s=1;else if(o<0)o=-o,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(o===~~o&&o<1e7){s.e=0,s.d=[o];return}return h9(s,o.toString())}else if(typeof o!="string")throw Error(tp+o);if(o.charCodeAt(0)===45?(o=o.slice(1),s.s=-1):s.s=1,lVe.test(o))h9(s,o);else throw Error(tp+o)}if(i.prototype=pt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=poe,i.config=i.set=cVe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function cVe(t){if(!t||typeof t!="object")throw Error(Oa+"Object expected");var e,n,r,i=["precision",1,jy,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Wy(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(tp+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(tp+n+": "+r);return this}var cj=poe(aVe);Ss=new cj(1);const Nn=cj;function uVe(t){return pVe(t)||hVe(t)||fVe(t)||dVe()}function dVe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fVe(t,e){if(t){if(typeof t=="string")return IL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IL(t,e)}}function hVe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function pVe(t){if(Array.isArray(t))return IL(t)}function IL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var mVe=function(e){return e},moe={"@@functional/placeholder":!0},goe=function(e){return e===moe},m9=function(e){return function n(){return arguments.length===0||arguments.length===1&&goe(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},gVe=function t(e,n){return e===1?n:m9(function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var s=i.filter(function(a){return a!==moe}).length;return s>=e?n.apply(void 0,i):t(e-s,m9(function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];var u=i.map(function(d){return goe(d)?l.shift():d});return n.apply(void 0,uVe(u).concat(l))}))})},dI=function(e){return gVe(e.length,e)},OL=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},vVe=dI(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),yVe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return mVe;var i=n.reverse(),o=i[0],s=i.slice(1);return function(){return s.reduce(function(a,l){return l(a)},o.apply(void 0,arguments))}},RL=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},voe=function(e){var n=null,r=null;return function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n&&o.every(function(a,l){return a===n[l]})||(n=o,r=e.apply(void 0,o)),r}};function bVe(t){var e;return t===0?e=1:e=Math.floor(new Nn(t).abs().log(10).toNumber())+1,e}function xVe(t,e,n){for(var r=new Nn(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}var wVe=dI(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),_Ve=dI(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),SVe=dI(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const fI={rangeStep:xVe,getDigitCount:bVe,interpolateNumber:wVe,uninterpolateNumber:_Ve,uninterpolateTruncation:SVe};function DL(t){return TVe(t)||EVe(t)||yoe(t)||CVe()}function CVe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EVe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function TVe(t){if(Array.isArray(t))return PL(t)}function Gx(t,e){return MVe(t)||AVe(t,e)||yoe(t,e)||kVe()}function kVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yoe(t,e){if(t){if(typeof t=="string")return PL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PL(t,e)}}function PL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function AVe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,o=void 0;try{for(var s=t[Symbol.iterator](),a;!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw o}}return n}}function MVe(t){if(Array.isArray(t))return t}function boe(t){var e=Gx(t,2),n=e[0],r=e[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function xoe(t,e,n){if(t.lte(0))return new Nn(0);var r=fI.getDigitCount(t.toNumber()),i=new Nn(10).pow(r),o=t.div(i),s=r!==1?.05:.1,a=new Nn(Math.ceil(o.div(s).toNumber())).add(n).mul(s),l=a.mul(i);return e?l:new Nn(Math.ceil(l))}function IVe(t,e,n){var r=1,i=new Nn(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new Nn(10).pow(fI.getDigitCount(t)-1),i=new Nn(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new Nn(Math.floor(t)))}else t===0?i=new Nn(Math.floor((e-1)/2)):n||(i=new Nn(Math.floor(t)));var s=Math.floor((e-1)/2),a=yVe(vVe(function(l){return i.add(new Nn(l-s).mul(r)).toNumber()}),OL);return a(0,e)}function woe(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Nn(0),tickMin:new Nn(0),tickMax:new Nn(0)};var o=xoe(new Nn(e).sub(t).div(n-1),r,i),s;t<=0&&e>=0?s=new Nn(0):(s=new Nn(t).add(e).div(2),s=s.sub(new Nn(s).mod(o)));var a=Math.ceil(s.sub(t).div(o).toNumber()),l=Math.ceil(new Nn(e).sub(s).div(o).toNumber()),c=a+l+1;return c>n?woe(t,e,n,r,i+1):(c<n&&(l=e>0?l+(n-c):l,a=e>0?a:a+(n-c)),{step:o,tickMin:s.sub(new Nn(a).mul(o)),tickMax:s.add(new Nn(l).mul(o))})}function OVe(t){var e=Gx(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),a=boe([n,r]),l=Gx(a,2),c=l[0],u=l[1];if(c===-1/0||u===1/0){var d=u===1/0?[c].concat(DL(OL(0,i-1).map(function(){return 1/0}))):[].concat(DL(OL(0,i-1).map(function(){return-1/0})),[u]);return n>r?RL(d):d}if(c===u)return IVe(c,i,o);var f=woe(c,u,s,o),h=f.step,g=f.tickMin,p=f.tickMax,m=fI.rangeStep(g,p.add(new Nn(.1).mul(h)),h);return n>r?RL(m):m}function RVe(t,e){var n=Gx(t,2),r=n[0],i=n[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=boe([r,i]),a=Gx(s,2),l=a[0],c=a[1];if(l===-1/0||c===1/0)return[r,i];if(l===c)return[l];var u=Math.max(e,2),d=xoe(new Nn(c).sub(l).div(u-1),o,0),f=[].concat(DL(fI.rangeStep(new Nn(l),new Nn(c).sub(new Nn(.99).mul(d)),d)),[c]);return r>i?RL(f):f}var DVe=voe(OVe),PVe=voe(RVe),NVe="Invariant failed";function Ip(t,e){throw new Error(NVe)}var $Ve=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function dk(){return dk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dk.apply(this,arguments)}function LVe(t,e){return zVe(t)||UVe(t,e)||BVe(t,e)||FVe()}function FVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BVe(t,e){if(t){if(typeof t=="string")return g9(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g9(t,e)}}function g9(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function UVe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function zVe(t){if(Array.isArray(t))return t}function jVe(t,e){if(t==null)return{};var n=WVe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function WVe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function T_(t){var e=t.offset,n=t.layout,r=t.width,i=t.dataKey,o=t.data,s=t.dataPointFormatter,a=t.xAxis,l=t.yAxis,c=jVe(t,$Ve),u=wt(c,!1);t.direction==="x"&&a.type!=="number"&&Ip();var d=o.map(function(f){var h=s(f,i),g=h.x,p=h.y,m=h.value,v=h.errorVal;if(!v)return null;var _=[],w,y;if(Array.isArray(v)){var b=LVe(v,2);w=b[0],y=b[1]}else w=y=v;if(n==="vertical"){var x=a.scale,S=p+e,C=S+r,T=S-r,E=x(m-w),k=x(m+y);_.push({x1:k,y1:C,x2:k,y2:T}),_.push({x1:E,y1:S,x2:k,y2:S}),_.push({x1:E,y1:C,x2:E,y2:T})}else if(n==="horizontal"){var A=l.scale,O=g+e,D=O-r,P=O+r,N=A(m-w),U=A(m+y);_.push({x1:D,y1:U,x2:P,y2:U}),_.push({x1:O,y1:N,x2:O,y2:U}),_.push({x1:D,y1:N,x2:P,y2:N})}return B.createElement(Yt,dk({className:"recharts-errorBar",key:"bar-".concat(_.map(function(L){return"".concat(L.x1,"-").concat(L.x2,"-").concat(L.y1,"-").concat(L.y2)}))},u),_.map(function(L){return B.createElement("line",dk({},L,{key:"line-".concat(L.x1,"-").concat(L.x2,"-").concat(L.y1,"-").concat(L.y2)}))}))});return B.createElement(Yt,{className:"recharts-errorBars"},d)}T_.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"};T_.displayName="ErrorBar";function qx(t){"@babel/helpers - typeof";return qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qx(t)}function v9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function BD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v9(Object(n),!0).forEach(function(r){VVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VVe(t,e,n){return e=HVe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HVe(t){var e=GVe(t,"string");return qx(e)=="symbol"?e:String(e)}function GVe(t,e){if(qx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _oe=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,s=ws(n,Nu);if(!s)return null;var a;return s.props&&s.props.payload?a=s.props&&s.props.payload:o==="children"?a=(r||[]).reduce(function(l,c){var u=c.item,d=c.props,f=d.sectors||d.data||[];return l.concat(f.map(function(h){return{type:s.props.iconType||u.props.legendType,value:h.name,color:h.fill,payload:h}}))},[]):a=(r||[]).map(function(l){var c=l.item,u=c.props,d=u.dataKey,f=u.name,h=u.legendType,g=u.hide;return{inactive:g,dataKey:d,type:s.props.iconType||h||"square",color:uj(c),value:f||d,payload:c.props}}),BD(BD(BD({},s.props),Nu.getWithHeight(s,i)),{},{payload:a,item:s})};function Xx(t){"@babel/helpers - typeof";return Xx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xx(t)}function y9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y9(Object(n),!0).forEach(function(r){Jg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jg(t,e,n){return e=qVe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qVe(t){var e=XVe(t,"string");return Xx(e)=="symbol"?e:String(e)}function XVe(t,e){if(Xx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Xx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function b9(t){return ZVe(t)||QVe(t)||YVe(t)||KVe()}function KVe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YVe(t,e){if(t){if(typeof t=="string")return NL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NL(t,e)}}function QVe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ZVe(t){if(Array.isArray(t))return NL(t)}function NL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Or(t,e,n){return Nt(t)||Nt(e)?n:fi(e)?Ps(t,e,n):Rt(e)?e(t):n}function Vb(t,e,n,r){var i=rVe(t,function(a){return Or(a,e)});if(n==="number"){var o=i.filter(function(a){return Qe(a)||parseFloat(a)});return o.length?[uI(o),$d(o)]:[1/0,-1/0]}var s=r?i.filter(function(a){return!Nt(a)}):i;return s.map(function(a){return fi(a)||a instanceof Date?a:""})}var JVe=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=-1,a=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(a<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var l=o.range,c=0;c<a;c++){var u=c>0?i[c-1].coordinate:i[a-1].coordinate,d=i[c].coordinate,f=c>=a-1?i[0].coordinate:i[c+1].coordinate,h=void 0;if(ko(d-u)!==ko(f-d)){var g=[];if(ko(f-d)===ko(l[1]-l[0])){h=f;var p=d+l[1]-l[0];g[0]=Math.min(p,(p+u)/2),g[1]=Math.max(p,(p+u)/2)}else{h=u;var m=f+l[1]-l[0];g[0]=Math.min(d,(m+d)/2),g[1]=Math.max(d,(m+d)/2)}var v=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>v[0]&&e<=v[1]||e>=g[0]&&e<=g[1]){s=i[c].index;break}}else{var _=Math.min(u,f),w=Math.max(u,f);if(e>(_+d)/2&&e<=(w+d)/2){s=i[c].index;break}}}else for(var y=0;y<a;y++)if(y===0&&e<=(r[y].coordinate+r[y+1].coordinate)/2||y>0&&y<a-1&&e>(r[y].coordinate+r[y-1].coordinate)/2&&e<=(r[y].coordinate+r[y+1].coordinate)/2||y===a-1&&e>(r[y].coordinate+r[y-1].coordinate)/2){s=r[y].index;break}return s},uj=function(e){var n=e,r=n.type.displayName,i=e.props,o=i.stroke,s=i.fill,a;switch(r){case"Line":a=o;break;case"Area":case"Radar":a=o&&o!=="none"?o:s;break;default:a=s;break}return a},eHe=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,o=i===void 0?{}:i;if(!o)return{};for(var s={},a=Object.keys(o),l=0,c=a.length;l<c;l++)for(var u=o[a[l]].stackGroups,d=Object.keys(u),f=0,h=d.length;f<h;f++){var g=u[d[f]],p=g.items,m=g.cateAxisId,v=p.filter(function(b){return Su(b.type).indexOf("Bar")>=0});if(v&&v.length){var _=v[0].props.barSize,w=v[0].props[m];s[w]||(s[w]=[]);var y=Nt(_)?n:_;s[w].push({item:v[0],stackList:v.slice(1),barSize:Nt(y)?void 0:Ao(y,r,0)})}}return s},tHe=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,o=e.sizeList,s=o===void 0?[]:o,a=e.maxBarSize,l=s.length;if(l<1)return null;var c=Ao(n,i,0,!0),u,d=[];if(s[0].barSize===+s[0].barSize){var f=!1,h=i/l,g=s.reduce(function(y,b){return y+b.barSize||0},0);g+=(l-1)*c,g>=i&&(g-=(l-1)*c,c=0),g>=i&&h>0&&(f=!0,h*=.9,g=l*h);var p=(i-g)/2>>0,m={offset:p-c,size:0};u=s.reduce(function(y,b){var x={item:b.item,position:{offset:m.offset+m.size+c,size:f?h:b.barSize}},S=[].concat(b9(y),[x]);return m=S[S.length-1].position,b.stackList&&b.stackList.length&&b.stackList.forEach(function(C){S.push({item:C,position:m})}),S},d)}else{var v=Ao(r,i,0,!0);i-2*v-(l-1)*c<=0&&(c=0);var _=(i-2*v-(l-1)*c)/l;_>1&&(_>>=0);var w=a===+a?Math.min(_,a):_;u=s.reduce(function(y,b,x){var S=[].concat(b9(y),[{item:b.item,position:{offset:v+(_+c)*x+(_-w)/2,size:w}}]);return b.stackList&&b.stackList.length&&b.stackList.forEach(function(C){S.push({item:C,position:S[S.length-1].position})}),S},d)}return u},nHe=function(e,n,r,i){var o=r.children,s=r.width,a=r.margin,l=s-(a.left||0)-(a.right||0),c=_oe({children:o,legendWidth:l});if(c){var u=i||{},d=u.width,f=u.height,h=c.align,g=c.verticalAlign,p=c.layout;if((p==="vertical"||p==="horizontal"&&g==="middle")&&h!=="center"&&Qe(e[h]))return fa(fa({},e),{},Jg({},h,e[h]+(d||0)));if((p==="horizontal"||p==="vertical"&&h==="center")&&g!=="middle"&&Qe(e[g]))return fa(fa({},e),{},Jg({},g,e[g]+(f||0)))}return e},rHe=function(e,n,r){return Nt(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},Soe=function(e,n,r,i,o){var s=n.props.children,a=Ns(s,T_).filter(function(c){return rHe(i,o,c.props.direction)});if(a&&a.length){var l=a.map(function(c){return c.props.dataKey});return e.reduce(function(c,u){var d=Or(u,r);if(Nt(d))return c;var f=Array.isArray(d)?[uI(d),$d(d)]:[d,d],h=l.reduce(function(g,p){var m=Or(u,p,0),v=f[0]-Math.abs(Array.isArray(m)?m[0]:m),_=f[1]+Math.abs(Array.isArray(m)?m[1]:m);return[Math.min(v,g[0]),Math.max(_,g[1])]},[1/0,-1/0]);return[Math.min(h[0],c[0]),Math.max(h[1],c[1])]},[1/0,-1/0])}return null},iHe=function(e,n,r,i,o){var s=n.map(function(a){return Soe(e,a,r,o,i)}).filter(function(a){return!Nt(a)});return s&&s.length?s.reduce(function(a,l){return[Math.min(a[0],l[0]),Math.max(a[1],l[1])]},[1/0,-1/0]):null},Coe=function(e,n,r,i,o){var s=n.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&Soe(e,l,c,i)||Vb(e,c,r,o)});if(r==="number")return s.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var a={};return s.reduce(function(l,c){for(var u=0,d=c.length;u<d;u++)a[c[u]]||(a[c[u]]=!0,l.push(c[u]));return l},[])},Eoe=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},Toe=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var o,s,a=e.map(function(l){return l.coordinate===n&&(o=!0),l.coordinate===r&&(s=!0),l.coordinate});return o||a.push(n),s||a.push(r),a},yu=function(e,n,r){if(!e)return null;var i=e.scale,o=e.duplicateDomain,s=e.type,a=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(n||r)&&s==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?ko(a[0]-a[1])*2*c:c,n&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(d){var f=o?o.indexOf(d):d;return{coordinate:i(f)+c,value:d,offset:c}});return u.filter(function(d){return!Ly(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,f){return{coordinate:i(d)+c,value:d,index:f,offset:c}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(d){return{coordinate:i(d)+c,value:d,offset:c}}):i.domain().map(function(d,f){return{coordinate:i(d)+c,value:o?o[d]:d,index:f,offset:c}})},UD=new WeakMap,gC=function(e,n){if(typeof n!="function")return e;UD.has(e)||UD.set(e,new WeakMap);var r=UD.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},koe=function(e,n,r){var i=e.scale,o=e.type,s=e.layout,a=e.axisType;if(i==="auto")return s==="radial"&&a==="radiusAxis"?{scale:Ux(),realScaleType:"band"}:s==="radial"&&a==="angleAxis"?{scale:sk(),realScaleType:"linear"}:o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Wb(),realScaleType:"point"}:o==="category"?{scale:Ux(),realScaleType:"band"}:{scale:sk(),realScaleType:"linear"};if(w_(i)){var l="scale".concat(QM(i));return{scale:(f9[l]||Wb)(),realScaleType:f9[l]?l:"point"}}return Rt(i)?{scale:i}:{scale:Wb(),realScaleType:"point"}},x9=1e-4,Aoe=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),o=Math.min(i[0],i[1])-x9,s=Math.max(i[0],i[1])+x9,a=e(n[0]),l=e(n[r-1]);(a<o||a>s||l<o||l>s)&&e.domain([n[0],n[r-1]])}},oHe=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},sHe=function(e,n){if(!n||n.length!==2||!Qe(n[0])||!Qe(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),o=[e[0],e[1]];return(!Qe(e[0])||e[0]<r)&&(o[0]=r),(!Qe(e[1])||e[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<r&&(o[1]=r),o},aHe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,s=0,a=0;a<n;++a){var l=Ly(e[a][r][1])?e[a][r][0]:e[a][r][1];l>=0?(e[a][r][0]=o,e[a][r][1]=o+l,o=e[a][r][1]):(e[a][r][0]=s,e[a][r][1]=s+l,s=e[a][r][1])}},lHe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,s=0;s<n;++s){var a=Ly(e[s][r][1])?e[s][r][0]:e[s][r][1];a>=0?(e[s][r][0]=o,e[s][r][1]=o+a,o=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},cHe={sign:aHe,expand:kDe,none:Tv,silhouette:ADe,wiggle:MDe,positive:lHe},uHe=function(e,n,r){var i=n.map(function(a){return a.props.dataKey}),o=cHe[r],s=TDe().keys(i).value(function(a,l){return+Or(a,l,0)}).order(sL).offset(o);return s(e)},dHe=function(e,n,r,i,o,s){if(!e)return null;var a=s?n.reverse():n,l={},c=a.reduce(function(d,f){var h=f.props,g=h.stackId,p=h.hide;if(p)return d;var m=f.props[r],v=d[m]||{hasStack:!1,stackGroups:{}};if(fi(g)){var _=v.stackGroups[g]||{numericAxisId:r,cateAxisId:i,items:[]};_.items.push(f),v.hasStack=!0,v.stackGroups[g]=_}else v.stackGroups[em("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[f]};return fa(fa({},d),{},Jg({},m,v))},l),u={};return Object.keys(c).reduce(function(d,f){var h=c[f];if(h.hasStack){var g={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(p,m){var v=h.stackGroups[m];return fa(fa({},p),{},Jg({},m,{numericAxisId:r,cateAxisId:i,items:v.items,stackedData:uHe(e,v.items,o)}))},g)}return fa(fa({},d),{},Jg({},f,h))},u)},Moe=function(e,n){var r=n.realScaleType,i=n.type,o=n.tickCount,s=n.originalDomain,a=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(o&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var c=e.domain();if(!c.length)return null;var u=DVe(c,o,a);return e.domain([uI(u),$d(u)]),{niceTicks:u}}if(o&&i==="number"){var d=e.domain(),f=PVe(d,o,a);return{niceTicks:f}}return null};function fk(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,o=t.index,s=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Nt(i[e.dataKey])){var a=UT(n,"value",i[e.dataKey]);if(a)return a.coordinate+r/2}return n[o]?n[o].coordinate+r/2:null}var l=Or(i,Nt(s)?e.dataKey:s);return Nt(l)?null:e.scale(l)}var w9=function(e){var n=e.axis,r=e.ticks,i=e.offset,o=e.bandSize,s=e.entry,a=e.index;if(n.type==="category")return r[a]?r[a].coordinate+i:null;var l=Or(s,n.dataKey,n.domain[a]);return Nt(l)?null:n.scale(l)-o/2+i},fHe=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);return i<=0&&o>=0?0:o<0?o:i}return r[0]},hHe=function(e,n){var r=e.props.stackId;if(fi(r)){var i=n[r];if(i){var o=i.items.indexOf(e);return o>=0?i.stackedData[o]:null}}return null},pHe=function(e){return e.reduce(function(n,r){return[uI(r.concat([n[0]]).filter(Qe)),$d(r.concat([n[1]]).filter(Qe))]},[1/0,-1/0])},Ioe=function(e,n,r){return Object.keys(e).reduce(function(i,o){var s=e[o],a=s.stackedData,l=a.reduce(function(c,u){var d=pHe(u.slice(n,r+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},_9=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,S9=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,$L=function(e,n,r){if(Rt(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(Qe(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(_9.test(e[0])){var o=+_9.exec(e[0])[1];i[0]=n[0]-o}else Rt(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(Qe(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(S9.test(e[1])){var s=+S9.exec(e[1])[1];i[1]=n[1]+s}else Rt(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},hk=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var o=Iz(n,function(d){return d.coordinate}),s=1/0,a=1,l=o.length;a<l;a++){var c=o[a],u=o[a-1];s=Math.min((c.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},C9=function(e,n,r){return!e||!e.length||Ap(e,Ps(r,"type.defaultProps.domain"))?n:e},Ooe=function(e,n){var r=e.props,i=r.dataKey,o=r.name,s=r.unit,a=r.formatter,l=r.tooltipType,c=r.chartType,u=r.hide;return fa(fa({},wt(e,!1)),{},{dataKey:i,unit:s,formatter:a,name:o||i,color:uj(e),value:Or(n,i),type:l,payload:n,chartType:c,hide:u})};function Kx(t){"@babel/helpers - typeof";return Kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kx(t)}function E9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ru(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E9(Object(n),!0).forEach(function(r){Roe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Roe(t,e,n){return e=mHe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mHe(t){var e=gHe(t,"string");return Kx(e)=="symbol"?e:String(e)}function gHe(t,e){if(Kx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Kx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vHe(t,e){return wHe(t)||xHe(t,e)||bHe(t,e)||yHe()}function yHe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bHe(t,e){if(t){if(typeof t=="string")return T9(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T9(t,e)}}function T9(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xHe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function wHe(t){if(Array.isArray(t))return t}var pk=Math.PI/180,_He=function(e){return e*180/Math.PI},Wn=function(e,n,r,i){return{x:e+Math.cos(-pk*i)*r,y:n+Math.sin(-pk*i)*r}},Doe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},SHe=function(e,n,r,i,o){var s=e.width,a=e.height,l=e.startAngle,c=e.endAngle,u=Ao(e.cx,s,s/2),d=Ao(e.cy,a,a/2),f=Doe(s,a,r),h=Ao(e.innerRadius,f,0),g=Ao(e.outerRadius,f,f*.8),p=Object.keys(n);return p.reduce(function(m,v){var _=n[v],w=_.domain,y=_.reversed,b;if(Nt(_.range))i==="angleAxis"?b=[l,c]:i==="radiusAxis"&&(b=[h,g]),y&&(b=[b[1],b[0]]);else{b=_.range;var x=b,S=vHe(x,2);l=S[0],c=S[1]}var C=koe(_,o),T=C.realScaleType,E=C.scale;E.domain(w).range(b),Aoe(E);var k=Moe(E,ru(ru({},_),{},{realScaleType:T})),A=ru(ru(ru({},_),k),{},{range:b,radius:g,realScaleType:T,scale:E,cx:u,cy:d,innerRadius:h,outerRadius:g,startAngle:l,endAngle:c});return ru(ru({},m),{},Roe({},v,A))},{})},CHe=function(e,n){var r=e.x,i=e.y,o=n.x,s=n.y;return Math.sqrt(Math.pow(r-o,2)+Math.pow(i-s,2))},EHe=function(e,n){var r=e.x,i=e.y,o=n.cx,s=n.cy,a=CHe({x:r,y:i},{x:o,y:s});if(a<=0)return{radius:a};var l=(r-o)/a,c=Math.acos(l);return i>s&&(c=2*Math.PI-c),{radius:a,angle:_He(c),angleInRadian:c}},THe=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),o=Math.floor(r/360),s=Math.min(i,o);return{startAngle:n-s*360,endAngle:r-s*360}},kHe=function(e,n){var r=n.startAngle,i=n.endAngle,o=Math.floor(r/360),s=Math.floor(i/360),a=Math.min(o,s);return e+a*360},k9=function(e,n){var r=e.x,i=e.y,o=EHe({x:r,y:i},n),s=o.radius,a=o.angle,l=n.innerRadius,c=n.outerRadius;if(s<l||s>c)return!1;if(s===0)return!0;var u=THe(n),d=u.startAngle,f=u.endAngle,h=a,g;if(d<=f){for(;h>f;)h-=360;for(;h<d;)h+=360;g=h>=d&&h<=f}else{for(;h>d;)h-=360;for(;h<f;)h+=360;g=h>=f&&h<=d}return g?ru(ru({},n),{},{radius:s,angle:kHe(h,n)}):null},Poe=function(e){return!R.isValidElement(e)&&!Rt(e)&&typeof e!="boolean"?e.className:""};function Yx(t){"@babel/helpers - typeof";return Yx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yx(t)}var AHe=["offset"];function MHe(t){return DHe(t)||RHe(t)||OHe(t)||IHe()}function IHe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OHe(t,e){if(t){if(typeof t=="string")return LL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LL(t,e)}}function RHe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function DHe(t){if(Array.isArray(t))return LL(t)}function LL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function PHe(t,e){if(t==null)return{};var n=NHe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function NHe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function A9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ni(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A9(Object(n),!0).forEach(function(r){$He(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $He(t,e,n){return e=LHe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LHe(t){var e=FHe(t,"string");return Yx(e)=="symbol"?e:String(e)}function FHe(t,e){if(Yx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Yx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qx(){return Qx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qx.apply(this,arguments)}var BHe=function(e){var n=e.value,r=e.formatter,i=Nt(e.children)?n:e.children;return Rt(r)?r(i):i},UHe=function(e,n){var r=ko(n-e),i=Math.min(Math.abs(n-e),360);return r*i},zHe=function(e,n,r){var i=e.position,o=e.viewBox,s=e.offset,a=e.className,l=o,c=l.cx,u=l.cy,d=l.innerRadius,f=l.outerRadius,h=l.startAngle,g=l.endAngle,p=l.clockWise,m=(d+f)/2,v=UHe(h,g),_=v>=0?1:-1,w,y;i==="insideStart"?(w=h+_*s,y=p):i==="insideEnd"?(w=g-_*s,y=!p):i==="end"&&(w=g+_*s,y=p),y=v<=0?y:!y;var b=Wn(c,u,m,w),x=Wn(c,u,m,w+(y?1:-1)*359),S="M".concat(b.x,",").concat(b.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(y?0:1,`,
    `).concat(x.x,",").concat(x.y),C=Nt(e.id)?em("recharts-radial-line-"):e.id;return B.createElement("text",Qx({},r,{dominantBaseline:"central",className:Ze("recharts-radial-bar-label",a)}),B.createElement("defs",null,B.createElement("path",{id:C,d:S})),B.createElement("textPath",{xlinkHref:"#".concat(C)},n))},jHe=function(e){var n=e.viewBox,r=e.offset,i=e.position,o=n,s=o.cx,a=o.cy,l=o.innerRadius,c=o.outerRadius,u=o.startAngle,d=o.endAngle,f=(u+d)/2;if(i==="outside"){var h=Wn(s,a,c+r,f),g=h.x,p=h.y;return{x:g,y:p,textAnchor:g>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"end"};var m=(l+c)/2,v=Wn(s,a,m,f),_=v.x,w=v.y;return{x:_,y:w,textAnchor:"middle",verticalAnchor:"middle"}},WHe=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,o=e.position,s=n,a=s.x,l=s.y,c=s.width,u=s.height,d=u>=0?1:-1,f=d*i,h=d>0?"end":"start",g=d>0?"start":"end",p=c>=0?1:-1,m=p*i,v=p>0?"end":"start",_=p>0?"start":"end";if(o==="top"){var w={x:a+c/2,y:l-d*i,textAnchor:"middle",verticalAnchor:h};return ni(ni({},w),r?{height:Math.max(l-r.y,0),width:c}:{})}if(o==="bottom"){var y={x:a+c/2,y:l+u+f,textAnchor:"middle",verticalAnchor:g};return ni(ni({},y),r?{height:Math.max(r.y+r.height-(l+u),0),width:c}:{})}if(o==="left"){var b={x:a-m,y:l+u/2,textAnchor:v,verticalAnchor:"middle"};return ni(ni({},b),r?{width:Math.max(b.x-r.x,0),height:u}:{})}if(o==="right"){var x={x:a+c+m,y:l+u/2,textAnchor:_,verticalAnchor:"middle"};return ni(ni({},x),r?{width:Math.max(r.x+r.width-x.x,0),height:u}:{})}var S=r?{width:c,height:u}:{};return o==="insideLeft"?ni({x:a+m,y:l+u/2,textAnchor:_,verticalAnchor:"middle"},S):o==="insideRight"?ni({x:a+c-m,y:l+u/2,textAnchor:v,verticalAnchor:"middle"},S):o==="insideTop"?ni({x:a+c/2,y:l+f,textAnchor:"middle",verticalAnchor:g},S):o==="insideBottom"?ni({x:a+c/2,y:l+u-f,textAnchor:"middle",verticalAnchor:h},S):o==="insideTopLeft"?ni({x:a+m,y:l+f,textAnchor:_,verticalAnchor:g},S):o==="insideTopRight"?ni({x:a+c-m,y:l+f,textAnchor:v,verticalAnchor:g},S):o==="insideBottomLeft"?ni({x:a+m,y:l+u-f,textAnchor:_,verticalAnchor:h},S):o==="insideBottomRight"?ni({x:a+c-m,y:l+u-f,textAnchor:v,verticalAnchor:h},S):Dy(o)&&(Qe(o.x)||Bh(o.x))&&(Qe(o.y)||Bh(o.y))?ni({x:a+Ao(o.x,c),y:l+Ao(o.y,u),textAnchor:"end",verticalAnchor:"end"},S):ni({x:a+c/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},S)},VHe=function(e){return"cx"in e&&Qe(e.cx)};function Ei(t){var e=t.offset,n=e===void 0?5:e,r=PHe(t,AHe),i=ni({offset:n},r),o=i.viewBox,s=i.position,a=i.value,l=i.children,c=i.content,u=i.className,d=u===void 0?"":u,f=i.textBreakAll;if(!o||Nt(a)&&Nt(l)&&!R.isValidElement(c)&&!Rt(c))return null;if(R.isValidElement(c))return R.cloneElement(c,i);var h;if(Rt(c)){if(h=R.createElement(c,i),R.isValidElement(h))return h}else h=BHe(i);var g=VHe(o),p=wt(i,!0);if(g&&(s==="insideStart"||s==="insideEnd"||s==="end"))return zHe(i,h,p);var m=g?jHe(i):WHe(i);return B.createElement(Ep,Qx({className:Ze("recharts-label",d)},p,m,{breakAll:f}),h)}Ei.displayName="Label";var Noe=function(e){var n=e.cx,r=e.cy,i=e.angle,o=e.startAngle,s=e.endAngle,a=e.r,l=e.radius,c=e.innerRadius,u=e.outerRadius,d=e.x,f=e.y,h=e.top,g=e.left,p=e.width,m=e.height,v=e.clockWise,_=e.labelViewBox;if(_)return _;if(Qe(p)&&Qe(m)){if(Qe(d)&&Qe(f))return{x:d,y:f,width:p,height:m};if(Qe(h)&&Qe(g))return{x:h,y:g,width:p,height:m}}return Qe(d)&&Qe(f)?{x:d,y:f,width:0,height:0}:Qe(n)&&Qe(r)?{cx:n,cy:r,startAngle:o||i||0,endAngle:s||i||0,innerRadius:c||0,outerRadius:u||l||a||0,clockWise:v}:e.viewBox?e.viewBox:{}},HHe=function(e,n){return e?e===!0?B.createElement(Ei,{key:"label-implicit",viewBox:n}):fi(e)?B.createElement(Ei,{key:"label-implicit",viewBox:n,value:e}):R.isValidElement(e)?e.type===Ei?R.cloneElement(e,{key:"label-implicit",viewBox:n}):B.createElement(Ei,{key:"label-implicit",content:e,viewBox:n}):Rt(e)?B.createElement(Ei,{key:"label-implicit",content:e,viewBox:n}):Dy(e)?B.createElement(Ei,Qx({viewBox:n},e,{key:"label-implicit"})):null:null},GHe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,o=Noe(e),s=Ns(i,Ei).map(function(l,c){return R.cloneElement(l,{viewBox:n||o,key:"label-".concat(c)})});if(!r)return s;var a=HHe(e.label,n||o);return[a].concat(MHe(s))};Ei.parseViewBox=Noe;Ei.renderCallByParent=GHe;function qHe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var XHe=qHe;const KHe=cn(XHe);function Zx(t){"@babel/helpers - typeof";return Zx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zx(t)}var YHe=["valueAccessor"],QHe=["data","dataKey","clockWise","id","textBreakAll"];function ZHe(t){return n5e(t)||t5e(t)||e5e(t)||JHe()}function JHe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e5e(t,e){if(t){if(typeof t=="string")return FL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FL(t,e)}}function t5e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function n5e(t){if(Array.isArray(t))return FL(t)}function FL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mk(){return mk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mk.apply(this,arguments)}function M9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function I9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M9(Object(n),!0).forEach(function(r){r5e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function r5e(t,e,n){return e=i5e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i5e(t){var e=o5e(t,"string");return Zx(e)=="symbol"?e:String(e)}function o5e(t,e){if(Zx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Zx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function O9(t,e){if(t==null)return{};var n=s5e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function s5e(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var a5e=function(e){return Array.isArray(e.value)?KHe(e.value):e.value};function gc(t){var e=t.valueAccessor,n=e===void 0?a5e:e,r=O9(t,YHe),i=r.data,o=r.dataKey,s=r.clockWise,a=r.id,l=r.textBreakAll,c=O9(r,QHe);return!i||!i.length?null:B.createElement(Yt,{className:"recharts-label-list"},i.map(function(u,d){var f=Nt(o)?n(u,d):Or(u&&u.payload,o),h=Nt(a)?{}:{id:"".concat(a,"-").concat(d)};return B.createElement(Ei,mk({},wt(u,!0),c,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:l,viewBox:Ei.parseViewBox(Nt(s)?u:I9(I9({},u),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}gc.displayName="LabelList";function l5e(t,e){return t?t===!0?B.createElement(gc,{key:"labelList-implicit",data:e}):B.isValidElement(t)||Rt(t)?B.createElement(gc,{key:"labelList-implicit",data:e,content:t}):Dy(t)?B.createElement(gc,mk({data:e},t,{key:"labelList-implicit"})):null:null}function c5e(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=Ns(r,gc).map(function(s,a){return R.cloneElement(s,{data:e,key:"labelList-".concat(a)})});if(!n)return i;var o=l5e(t.label,e);return[o].concat(ZHe(i))}gc.renderCallByParent=c5e;function Jx(t){"@babel/helpers - typeof";return Jx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jx(t)}function BL(){return BL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BL.apply(this,arguments)}function R9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function D9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R9(Object(n),!0).forEach(function(r){u5e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function u5e(t,e,n){return e=d5e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d5e(t){var e=f5e(t,"string");return Jx(e)=="symbol"?e:String(e)}function f5e(t,e){if(Jx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Jx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var h5e=function(e,n){var r=ko(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},vC=function(e){var n=e.cx,r=e.cy,i=e.radius,o=e.angle,s=e.sign,a=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,u=l*(a?1:-1)+i,d=Math.asin(l/u)/pk,f=c?o:o+s*d,h=Wn(n,r,u,f),g=Wn(n,r,i,f),p=c?o-s*d:o,m=Wn(n,r,u*Math.cos(d*pk),p);return{center:h,circleTangency:g,lineTangency:m,theta:d}},$oe=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,s=e.startAngle,a=e.endAngle,l=h5e(s,a),c=s+l,u=Wn(n,r,o,s),d=Wn(n,r,o,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var h=Wn(n,r,i,s),g=Wn(n,r,i,c);f+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(n,",").concat(r," Z");return f},p5e=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,s=e.cornerRadius,a=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,u=e.endAngle,d=ko(u-c),f=vC({cx:n,cy:r,radius:o,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),h=f.circleTangency,g=f.lineTangency,p=f.theta,m=vC({cx:n,cy:r,radius:o,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:l}),v=m.circleTangency,_=m.lineTangency,w=m.theta,y=l?Math.abs(c-u):Math.abs(c-u)-p-w;if(y<0)return a?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):$oe({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:c,endAngle:u});var b="M ".concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(_.x,",").concat(_.y,`
  `);if(i>0){var x=vC({cx:n,cy:r,radius:i,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),S=x.circleTangency,C=x.lineTangency,T=x.theta,E=vC({cx:n,cy:r,radius:i,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),k=E.circleTangency,A=E.lineTangency,O=E.theta,D=l?Math.abs(c-u):Math.abs(c-u)-T-O;if(D<0&&s===0)return"".concat(b,"L").concat(n,",").concat(r,"Z");b+="L".concat(A.x,",").concat(A.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(k.x,",").concat(k.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(D>180),",").concat(+(d>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(C.x,",").concat(C.y,"Z")}else b+="L".concat(n,",").concat(r,"Z");return b},m5e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},vf=function(e){var n=D9(D9({},m5e),e),r=n.cx,i=n.cy,o=n.innerRadius,s=n.outerRadius,a=n.cornerRadius,l=n.forceCornerRadius,c=n.cornerIsExternal,u=n.startAngle,d=n.endAngle,f=n.className;if(s<o||u===d)return null;var h=Ze("recharts-sector",f),g=s-o,p=Ao(a,g,0,!0),m;return p>0&&Math.abs(u-d)<360?m=p5e({cx:r,cy:i,innerRadius:o,outerRadius:s,cornerRadius:Math.min(p,g/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):m=$oe({cx:r,cy:i,innerRadius:o,outerRadius:s,startAngle:u,endAngle:d}),B.createElement("path",BL({},wt(n,!0),{className:h,d:m,role:"img"}))};function ew(t){"@babel/helpers - typeof";return ew=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ew(t)}function UL(){return UL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UL.apply(this,arguments)}function P9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function N9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P9(Object(n),!0).forEach(function(r){g5e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function g5e(t,e,n){return e=v5e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v5e(t){var e=y5e(t,"string");return ew(e)=="symbol"?e:String(e)}function y5e(t,e){if(ew(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ew(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $9={curveBasisClosed:mDe,curveBasisOpen:gDe,curveBasis:pDe,curveBumpX:eDe,curveBumpY:tDe,curveLinearClosed:vDe,curveLinear:JM,curveMonotoneX:yDe,curveMonotoneY:bDe,curveNatural:xDe,curveStep:wDe,curveStepAfter:SDe,curveStepBefore:_De},yC=function(e){return e.x===+e.x&&e.y===+e.y},j0=function(e){return e.x},W0=function(e){return e.y},b5e=function(e,n){if(Rt(e))return e;var r="curve".concat(QM(e));return(r==="curveMonotone"||r==="curveBump")&&n?$9["".concat(r).concat(n==="vertical"?"Y":"X")]:$9[r]||JM},x5e=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,o=i===void 0?[]:i,s=e.baseLine,a=e.layout,l=e.connectNulls,c=l===void 0?!1:l,u=b5e(r,a),d=c?o.filter(function(p){return yC(p)}):o,f;if(Array.isArray(s)){var h=c?s.filter(function(p){return yC(p)}):s,g=d.map(function(p,m){return N9(N9({},p),{},{base:h[m]})});return a==="vertical"?f=cC().y(W0).x1(j0).x0(function(p){return p.base.x}):f=cC().x(j0).y1(W0).y0(function(p){return p.base.y}),f.defined(yC).curve(u),f(g)}return a==="vertical"&&Qe(s)?f=cC().y(W0).x1(j0).x0(s):Qe(s)?f=cC().x(j0).y1(W0).y0(s):f=Mre().x(j0).y(W0),f.defined(yC).curve(u),f(d)},np=function(e){var n=e.className,r=e.points,i=e.path,o=e.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?x5e(e):i;return B.createElement("path",UL({},wt(e,!1),zT(e),{className:Ze("recharts-curve",n),d:s,ref:o}))},Loe={exports:{}},w5e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",_5e=w5e,S5e=_5e;function Foe(){}function Boe(){}Boe.resetWarningCache=Foe;var C5e=function(){function t(r,i,o,s,a,l){if(l!==S5e){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Boe,resetWarningCache:Foe};return n.PropTypes=n,n};Loe.exports=C5e();var E5e=Loe.exports;const De=cn(E5e);var T5e=Object.getOwnPropertyNames,k5e=Object.getOwnPropertySymbols,A5e=Object.prototype.hasOwnProperty;function L9(t,e){return function(r,i,o){return t(r,i,o)&&e(r,i,o)}}function bC(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var o=i.cache,s=o.get(n),a=o.get(r);if(s&&a)return s===r&&a===n;o.set(n,r),o.set(r,n);var l=t(n,r,i);return o.delete(n),o.delete(r),l}}function F9(t){return T5e(t).concat(k5e(t))}var Uoe=Object.hasOwn||function(t,e){return A5e.call(t,e)};function Vy(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var zoe="_owner",B9=Object.getOwnPropertyDescriptor,U9=Object.keys;function M5e(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function I5e(t,e){return Vy(t.getTime(),e.getTime())}function z9(t,e,n){if(t.size!==e.size)return!1;for(var r={},i=t.entries(),o=0,s,a;(s=i.next())&&!s.done;){for(var l=e.entries(),c=!1,u=0;(a=l.next())&&!a.done;){var d=s.value,f=d[0],h=d[1],g=a.value,p=g[0],m=g[1];!c&&!r[u]&&(c=n.equals(f,p,o,u,t,e,n)&&n.equals(h,m,f,p,t,e,n))&&(r[u]=!0),u++}if(!c)return!1;o++}return!0}function O5e(t,e,n){var r=U9(t),i=r.length;if(U9(e).length!==i)return!1;for(var o;i-- >0;)if(o=r[i],o===zoe&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!Uoe(e,o)||!n.equals(t[o],e[o],o,o,t,e,n))return!1;return!0}function V0(t,e,n){var r=F9(t),i=r.length;if(F9(e).length!==i)return!1;for(var o,s,a;i-- >0;)if(o=r[i],o===zoe&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!Uoe(e,o)||!n.equals(t[o],e[o],o,o,t,e,n)||(s=B9(t,o),a=B9(e,o),(s||a)&&(!s||!a||s.configurable!==a.configurable||s.enumerable!==a.enumerable||s.writable!==a.writable)))return!1;return!0}function R5e(t,e){return Vy(t.valueOf(),e.valueOf())}function D5e(t,e){return t.source===e.source&&t.flags===e.flags}function j9(t,e,n){if(t.size!==e.size)return!1;for(var r={},i=t.values(),o,s;(o=i.next())&&!o.done;){for(var a=e.values(),l=!1,c=0;(s=a.next())&&!s.done;)!l&&!r[c]&&(l=n.equals(o.value,s.value,o.value,s.value,t,e,n))&&(r[c]=!0),c++;if(!l)return!1}return!0}function P5e(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}var N5e="[object Arguments]",$5e="[object Boolean]",L5e="[object Date]",F5e="[object Map]",B5e="[object Number]",U5e="[object Object]",z5e="[object RegExp]",j5e="[object Set]",W5e="[object String]",V5e=Array.isArray,W9=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,V9=Object.assign,H5e=Object.prototype.toString.call.bind(Object.prototype.toString);function G5e(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areMapsEqual,i=t.areObjectsEqual,o=t.arePrimitiveWrappersEqual,s=t.areRegExpsEqual,a=t.areSetsEqual,l=t.areTypedArraysEqual;return function(u,d,f){if(u===d)return!0;if(u==null||d==null||typeof u!="object"||typeof d!="object")return u!==u&&d!==d;var h=u.constructor;if(h!==d.constructor)return!1;if(h===Object)return i(u,d,f);if(V5e(u))return e(u,d,f);if(W9!=null&&W9(u))return l(u,d,f);if(h===Date)return n(u,d,f);if(h===RegExp)return s(u,d,f);if(h===Map)return r(u,d,f);if(h===Set)return a(u,d,f);var g=H5e(u);return g===L5e?n(u,d,f):g===z5e?s(u,d,f):g===F5e?r(u,d,f):g===j5e?a(u,d,f):g===U5e?typeof u.then!="function"&&typeof d.then!="function"&&i(u,d,f):g===N5e?i(u,d,f):g===$5e||g===B5e||g===W5e?o(u,d,f):!1}}function q5e(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?V0:M5e,areDatesEqual:I5e,areMapsEqual:r?L9(z9,V0):z9,areObjectsEqual:r?V0:O5e,arePrimitiveWrappersEqual:R5e,areRegExpsEqual:D5e,areSetsEqual:r?L9(j9,V0):j9,areTypedArraysEqual:r?V0:P5e};if(n&&(i=V9({},i,n(i))),e){var o=bC(i.areArraysEqual),s=bC(i.areMapsEqual),a=bC(i.areObjectsEqual),l=bC(i.areSetsEqual);i=V9({},i,{areArraysEqual:o,areMapsEqual:s,areObjectsEqual:a,areSetsEqual:l})}return i}function X5e(t){return function(e,n,r,i,o,s,a){return t(e,n,a)}}function K5e(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,o=t.strict;if(r)return function(l,c){var u=r(),d=u.cache,f=d===void 0?e?new WeakMap:void 0:d,h=u.meta;return n(l,c,{cache:f,equals:i,meta:h,strict:o})};if(e)return function(l,c){return n(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var s={cache:void 0,equals:i,meta:void 0,strict:o};return function(l,c){return n(l,c,s)}}var Y5e=Lf();Lf({strict:!0});Lf({circular:!0});Lf({circular:!0,strict:!0});Lf({createInternalComparator:function(){return Vy}});Lf({strict:!0,createInternalComparator:function(){return Vy}});Lf({circular:!0,createInternalComparator:function(){return Vy}});Lf({circular:!0,createInternalComparator:function(){return Vy},strict:!0});function Lf(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,o=t.strict,s=o===void 0?!1:o,a=q5e(t),l=G5e(a),c=r?r(l):X5e(l);return K5e({circular:n,comparator:l,createState:i,equals:c,strict:s})}function Q5e(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function H9(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(o){n<0&&(n=o),o-n>e?(t(o),n=-1):Q5e(i)};requestAnimationFrame(r)}function zL(t){"@babel/helpers - typeof";return zL=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zL(t)}function Z5e(t){return nGe(t)||tGe(t)||eGe(t)||J5e()}function J5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eGe(t,e){if(t){if(typeof t=="string")return G9(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G9(t,e)}}function G9(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function tGe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nGe(t){if(Array.isArray(t))return t}function rGe(){var t={},e=function(){return null},n=!1,r=function i(o){if(!n){if(Array.isArray(o)){if(!o.length)return;var s=o,a=Z5e(s),l=a[0],c=a.slice(1);if(typeof l=="number"){H9(i.bind(null,c),l);return}i(l),H9(i.bind(null,c));return}zL(o)==="object"&&(t=o,e(t)),typeof o=="function"&&o()}};return{stop:function(){n=!0},start:function(o){n=!1,r(o)},subscribe:function(o){return e=o,function(){e=function(){return null}}}}}function tw(t){"@babel/helpers - typeof";return tw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tw(t)}function q9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function X9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q9(Object(n),!0).forEach(function(r){joe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function joe(t,e,n){return e=iGe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iGe(t){var e=oGe(t,"string");return tw(e)==="symbol"?e:String(e)}function oGe(t,e){if(tw(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(tw(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sGe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(o){return i.includes(o)})})},aGe=function(e){return e},lGe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Hb=function(e,n){return Object.keys(n).reduce(function(r,i){return X9(X9({},r),{},joe({},i,e(i,n[i])))},{})},K9=function(e,n,r){return e.map(function(i){return"".concat(lGe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function cGe(t,e){return fGe(t)||dGe(t,e)||Woe(t,e)||uGe()}function uGe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dGe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function fGe(t){if(Array.isArray(t))return t}function hGe(t){return gGe(t)||mGe(t)||Woe(t)||pGe()}function pGe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Woe(t,e){if(t){if(typeof t=="string")return jL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jL(t,e)}}function mGe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gGe(t){if(Array.isArray(t))return jL(t)}function jL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var gk=1e-4,Voe=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},Hoe=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},Y9=function(e,n){return function(r){var i=Voe(e,n);return Hoe(i,r)}},vGe=function(e,n){return function(r){var i=Voe(e,n),o=[].concat(hGe(i.map(function(s,a){return s*a}).slice(1)),[0]);return Hoe(o,r)}},Q9=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],o=n[1],s=n[2],a=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,o=0,s=1,a=1;break;case"ease":i=.25,o=.1,s=.25,a=1;break;case"ease-in":i=.42,o=0,s=1,a=1;break;case"ease-out":i=.42,o=0,s=.58,a=1;break;case"ease-in-out":i=0,o=0,s=.58,a=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(m){return parseFloat(m)}),u=cGe(c,4);i=u[0],o=u[1],s=u[2],a=u[3]}}}var d=Y9(i,s),f=Y9(o,a),h=vGe(i,s),g=function(v){return v>1?1:v<0?0:v},p=function(v){for(var _=v>1?1:v,w=_,y=0;y<8;++y){var b=d(w)-_,x=h(w);if(Math.abs(b-_)<gk||x<gk)return f(w);w=g(w-b/x)}return f(w)};return p.isStepper=!1,p},yGe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,o=i===void 0?8:i,s=e.dt,a=s===void 0?17:s,l=function(u,d,f){var h=-(u-d)*r,g=f*o,p=f+(h-g)*a/1e3,m=f*a/1e3+u;return Math.abs(m-d)<gk&&Math.abs(p)<gk?[d,0]:[m,p]};return l.isStepper=!0,l.dt=a,l},bGe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Q9(i);case"spring":return yGe();default:if(i.split("(")[0]==="cubic-bezier")return Q9(i)}return typeof i=="function"?i:null};function nw(t){"@babel/helpers - typeof";return nw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nw(t)}function Z9(t){return _Ge(t)||wGe(t)||Goe(t)||xGe()}function xGe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wGe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _Ge(t){if(Array.isArray(t))return VL(t)}function J9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J9(Object(n),!0).forEach(function(r){WL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WL(t,e,n){return e=SGe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SGe(t){var e=CGe(t,"string");return nw(e)==="symbol"?e:String(e)}function CGe(t,e){if(nw(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(nw(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function EGe(t,e){return AGe(t)||kGe(t,e)||Goe(t,e)||TGe()}function TGe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Goe(t,e){if(t){if(typeof t=="string")return VL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VL(t,e)}}function VL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kGe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function AGe(t){if(Array.isArray(t))return t}var vk=function(e,n,r){return e+(n-e)*r},HL=function(e){var n=e.from,r=e.to;return n!==r},MGe=function t(e,n,r){var i=Hb(function(o,s){if(HL(s)){var a=e(s.from,s.to,s.velocity),l=EGe(a,2),c=l[0],u=l[1];return Fi(Fi({},s),{},{from:c,velocity:u})}return s},n);return r<1?Hb(function(o,s){return HL(s)?Fi(Fi({},s),{},{velocity:vk(s.velocity,i[o].velocity,r),from:vk(s.from,i[o].from,r)}):s},n):t(e,i,r-1)};const IGe=function(t,e,n,r,i){var o=sGe(t,e),s=o.reduce(function(m,v){return Fi(Fi({},m),{},WL({},v,[t[v],e[v]]))},{}),a=o.reduce(function(m,v){return Fi(Fi({},m),{},WL({},v,{from:t[v],velocity:0,to:e[v]}))},{}),l=-1,c,u,d=function(){return null},f=function(){return Hb(function(v,_){return _.from},a)},h=function(){return!Object.values(a).filter(HL).length},g=function(v){c||(c=v);var _=v-c,w=_/n.dt;a=MGe(n,a,w),i(Fi(Fi(Fi({},t),e),f())),c=v,h()||(l=requestAnimationFrame(d))},p=function(v){u||(u=v);var _=(v-u)/r,w=Hb(function(b,x){return vk.apply(void 0,Z9(x).concat([n(_)]))},s);if(i(Fi(Fi(Fi({},t),e),w)),_<1)l=requestAnimationFrame(d);else{var y=Hb(function(b,x){return vk.apply(void 0,Z9(x).concat([n(1)]))},s);i(Fi(Fi(Fi({},t),e),y))}};return d=n.isStepper?g:p,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function Pv(t){"@babel/helpers - typeof";return Pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pv(t)}var OGe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function RGe(t,e){if(t==null)return{};var n=DGe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function DGe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function zD(t){return LGe(t)||$Ge(t)||NGe(t)||PGe()}function PGe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NGe(t,e){if(t){if(typeof t=="string")return GL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GL(t,e)}}function $Ge(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function LGe(t){if(Array.isArray(t))return GL(t)}function GL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function eX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ya(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eX(Object(n),!0).forEach(function(r){pb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pb(t,e,n){return e=qoe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BGe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qoe(r.key),r)}}function UGe(t,e,n){return e&&BGe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qoe(t){var e=zGe(t,"string");return Pv(e)==="symbol"?e:String(e)}function zGe(t,e){if(Pv(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Pv(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jGe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qL(t,e)}function qL(t,e){return qL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},qL(t,e)}function WGe(t){var e=VGe();return function(){var r=yk(t),i;if(e){var o=yk(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return XL(this,i)}}function XL(t,e){if(e&&(Pv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KL(t)}function KL(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VGe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function yk(t){return yk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yk(t)}var El=function(t){jGe(n,t);var e=WGe(n);function n(r,i){var o;FGe(this,n),o=e.call(this,r,i);var s=o.props,a=s.isActive,l=s.attributeName,c=s.from,u=s.to,d=s.steps,f=s.children,h=s.duration;if(o.handleStyleChange=o.handleStyleChange.bind(KL(o)),o.changeStyle=o.changeStyle.bind(KL(o)),!a||h<=0)return o.state={style:{}},typeof f=="function"&&(o.state={style:u}),XL(o);if(d&&d.length)o.state={style:d[0].style};else if(c){if(typeof f=="function")return o.state={style:c},XL(o);o.state={style:l?pb({},l,c):c}}else o.state={style:{}};return o}return UGe(n,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,s=i.canBegin;this.mounted=!0,!(!o||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,s=o.isActive,a=o.canBegin,l=o.attributeName,c=o.shouldReAnimate,u=o.to,d=o.from,f=this.state.style;if(a){if(!s){var h={style:l?pb({},l,u):u};this.state&&f&&(l&&f[l]!==u||!l&&f!==u)&&this.setState(h);return}if(!(Y5e(i.to,u)&&i.canBegin&&i.isActive)){var g=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=g||c?d:i.to;if(this.state&&f){var m={style:l?pb({},l,p):p};(l&&f[l]!==p||!l&&f!==p)&&this.setState(m)}this.runAnimation(Ya(Ya({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,s=i.from,a=i.to,l=i.duration,c=i.easing,u=i.begin,d=i.onAnimationEnd,f=i.onAnimationStart,h=IGe(s,a,bGe(c),l,this.changeStyle),g=function(){o.stopJSAnimation=h()};this.manager.start([f,u,g,l,d])}},{key:"runStepAnimation",value:function(i){var o=this,s=i.steps,a=i.begin,l=i.onAnimationStart,c=s[0],u=c.style,d=c.duration,f=d===void 0?0:d,h=function(p,m,v){if(v===0)return p;var _=m.duration,w=m.easing,y=w===void 0?"ease":w,b=m.style,x=m.properties,S=m.onAnimationEnd,C=v>0?s[v-1]:m,T=x||Object.keys(b);if(typeof y=="function"||y==="spring")return[].concat(zD(p),[o.runJSAnimation.bind(o,{from:C.style,to:b,duration:_,easing:y}),_]);var E=K9(T,_,y),k=Ya(Ya(Ya({},C.style),b),{},{transition:E});return[].concat(zD(p),[k,_,S]).filter(aGe)};return this.manager.start([l].concat(zD(s.reduce(h,[u,Math.max(f,a)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=rGe());var o=i.begin,s=i.duration,a=i.attributeName,l=i.to,c=i.easing,u=i.onAnimationStart,d=i.onAnimationEnd,f=i.steps,h=i.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof c=="function"||typeof h=="function"||c==="spring"){this.runJSAnimation(i);return}if(f.length>1){this.runStepAnimation(i);return}var p=a?pb({},a,l):l,m=K9(Object.keys(p),s,c);g.start([u,o,Ya(Ya({},p),{},{transition:m}),s,d])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var a=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=RGe(i,OGe),c=R.Children.count(o),u=this.state.style;if(typeof o=="function")return o(u);if(!a||c===0||s<=0)return o;var d=function(h){var g=h.props,p=g.style,m=p===void 0?{}:p,v=g.className,_=R.cloneElement(h,Ya(Ya({},l),{},{style:Ya(Ya({},m),u),className:v}));return _};return c===1?d(R.Children.only(o)):B.createElement("div",null,R.Children.map(o,function(f){return d(f)}))}}]),n}(R.PureComponent);El.displayName="Animate";El.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};El.propTypes={from:De.oneOfType([De.object,De.string]),to:De.oneOfType([De.object,De.string]),attributeName:De.string,duration:De.number,begin:De.number,easing:De.oneOfType([De.string,De.func]),steps:De.arrayOf(De.shape({duration:De.number.isRequired,style:De.object.isRequired,easing:De.oneOfType([De.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),De.func]),properties:De.arrayOf("string"),onAnimationEnd:De.func})),children:De.oneOfType([De.node,De.func]),isActive:De.bool,canBegin:De.bool,onAnimationEnd:De.func,shouldReAnimate:De.bool,onAnimationStart:De.func,onAnimationReStart:De.func};function Le(){return Le=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Le.apply(null,arguments)}function pn(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function YL(t,e){return YL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},YL(t,e)}function Xoe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,YL(t,e)}function HGe(t,e){return t.classList?t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function GGe(t,e){t.classList?t.classList.add(e):HGe(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function tX(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function qGe(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=tX(t.className,e):t.setAttribute("class",tX(t.className&&t.className.baseVal||"",e))}const nX={disabled:!1},bk=B.createContext(null);var XGe=function(e){return e.scrollTop},mb="unmounted",yh="exited",Vl="entering",Od="entered",xk="exiting",Hc=function(t){Xoe(e,t);function e(r,i){var o;o=t.call(this,r,i)||this;var s=i,a=s&&!s.isMounting?r.enter:r.appear,l;return o.appearStatus=null,r.in?a?(l=yh,o.appearStatus=Vl):l=Od:r.unmountOnExit||r.mountOnEnter?l=mb:l=yh,o.state={status:l},o.nextCallback=null,o}e.getDerivedStateFromProps=function(i,o){var s=i.in;return s&&o.status===mb?{status:yh}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var o=null;if(i!==this.props){var s=this.state.status;this.props.in?s!==Vl&&s!==Od&&(o=Vl):(s===Vl||s===Od)&&(o=xk)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,o,s,a;return o=s=a=i,i!=null&&typeof i!="number"&&(o=i.exit,s=i.enter,a=i.appear!==void 0?i.appear:s),{exit:o,enter:s,appear:a}},n.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null)if(this.cancelNextCallback(),o===Vl){if(this.props.unmountOnExit||this.props.mountOnEnter){var s=this.props.nodeRef?this.props.nodeRef.current:Dh.findDOMNode(this);s&&XGe(s)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===yh&&this.setState({status:mb})},n.performEnter=function(i){var o=this,s=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[Dh.findDOMNode(this),a],c=l[0],u=l[1],d=this.getTimeouts(),f=a?d.appear:d.enter;if(!i&&!s||nX.disabled){this.safeSetState({status:Od},function(){o.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:Vl},function(){o.props.onEntering(c,u),o.onTransitionEnd(f,function(){o.safeSetState({status:Od},function(){o.props.onEntered(c,u)})})})},n.performExit=function(){var i=this,o=this.props.exit,s=this.getTimeouts(),a=this.props.nodeRef?void 0:Dh.findDOMNode(this);if(!o||nX.disabled){this.safeSetState({status:yh},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:xk},function(){i.props.onExiting(a),i.onTransitionEnd(s.exit,function(){i.safeSetState({status:yh},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},n.setNextCallback=function(i){var o=this,s=!0;return this.nextCallback=function(a){s&&(s=!1,o.nextCallback=null,i(a))},this.nextCallback.cancel=function(){s=!1},this.nextCallback},n.onTransitionEnd=function(i,o){this.setNextCallback(o);var s=this.props.nodeRef?this.props.nodeRef.current:Dh.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!s||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[s,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===mb)return null;var o=this.props,s=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var a=pn(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return B.createElement(bk.Provider,{value:null},typeof s=="function"?s(i,a):B.cloneElement(B.Children.only(s),a))},e}(B.Component);Hc.contextType=bk;Hc.propTypes={};function Wm(){}Hc.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Wm,onEntering:Wm,onEntered:Wm,onExit:Wm,onExiting:Wm,onExited:Wm};Hc.UNMOUNTED=mb;Hc.EXITED=yh;Hc.ENTERING=Vl;Hc.ENTERED=Od;Hc.EXITING=xk;function KGe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dj(t,e){var n=function(o){return e&&R.isValidElement(o)?e(o):o},r=Object.create(null);return t&&R.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function YGe(t,e){t=t||{},e=e||{};function n(u){return u in e?e[u]:t[u]}var r=Object.create(null),i=[];for(var o in t)o in e?i.length&&(r[o]=i,i=[]):i.push(o);var s,a={};for(var l in e){if(r[l])for(s=0;s<r[l].length;s++){var c=r[l][s];a[r[l][s]]=n(c)}a[l]=n(l)}for(s=0;s<i.length;s++)a[i[s]]=n(i[s]);return a}function zh(t,e,n){return n[e]!=null?n[e]:t.props[e]}function QGe(t,e){return dj(t.children,function(n){return R.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:zh(n,"appear",t),enter:zh(n,"enter",t),exit:zh(n,"exit",t)})})}function ZGe(t,e,n){var r=dj(t.children),i=YGe(e,r);return Object.keys(i).forEach(function(o){var s=i[o];if(R.isValidElement(s)){var a=o in e,l=o in r,c=e[o],u=R.isValidElement(c)&&!c.props.in;l&&(!a||u)?i[o]=R.cloneElement(s,{onExited:n.bind(null,s),in:!0,exit:zh(s,"exit",t),enter:zh(s,"enter",t)}):!l&&a&&!u?i[o]=R.cloneElement(s,{in:!1}):l&&a&&R.isValidElement(c)&&(i[o]=R.cloneElement(s,{onExited:n.bind(null,s),in:c.props.in,exit:zh(s,"exit",t),enter:zh(s,"enter",t)}))}}),i}var JGe=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},e6e={component:"div",childFactory:function(e){return e}},fj=function(t){Xoe(e,t);function e(r,i){var o;o=t.call(this,r,i)||this;var s=o.handleExited.bind(KGe(o));return o.state={contextValue:{isMounting:!0},handleExited:s,firstRender:!0},o}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,o){var s=o.children,a=o.handleExited,l=o.firstRender;return{children:l?QGe(i,a):ZGe(i,s,a),firstRender:!1}},n.handleExited=function(i,o){var s=dj(this.props.children);i.key in s||(i.props.onExited&&i.props.onExited(o),this.mounted&&this.setState(function(a){var l=Le({},a.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,o=i.component,s=i.childFactory,a=pn(i,["component","childFactory"]),l=this.state.contextValue,c=JGe(this.state.children).map(s);return delete a.appear,delete a.enter,delete a.exit,o===null?B.createElement(bk.Provider,{value:l},c):B.createElement(bk.Provider,{value:l},B.createElement(o,a,c))},e}(B.Component);fj.propTypes={};fj.defaultProps=e6e;De.object,De.object,De.object,De.element;De.object,De.object,De.object,De.oneOfType([De.array,De.element]),De.any;function rw(t){"@babel/helpers - typeof";return rw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rw(t)}function wk(){return wk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wk.apply(this,arguments)}function t6e(t,e){return o6e(t)||i6e(t,e)||r6e(t,e)||n6e()}function n6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r6e(t,e){if(t){if(typeof t=="string")return rX(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rX(t,e)}}function rX(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i6e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function o6e(t){if(Array.isArray(t))return t}function iX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iX(Object(n),!0).forEach(function(r){s6e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function s6e(t,e,n){return e=a6e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a6e(t){var e=l6e(t,"string");return rw(e)=="symbol"?e:String(e)}function l6e(t,e){if(rw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(rw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sX=function(e,n,r,i,o){var s=Math.min(Math.abs(r)/2,Math.abs(i)/2),a=i>=0?1:-1,l=r>=0?1:-1,c=i>=0&&r>=0||i<0&&r<0?1:0,u;if(s>0&&o instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=o[f]>s?s:o[f];u="M".concat(e,",").concat(n+a*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(n)),u+="L ".concat(e+r-l*d[1],",").concat(n),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(n+a*d[1])),u+="L ".concat(e+r,",").concat(n+i-a*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(n+i)),u+="L ".concat(e+l*d[3],",").concat(n+i),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(n+i-a*d[3])),u+="Z"}else if(s>0&&o===+o&&o>0){var g=Math.min(s,o);u="M ".concat(e,",").concat(n+a*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+l*g,",").concat(n,`
            L `).concat(e+r-l*g,",").concat(n,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+r,",").concat(n+a*g,`
            L `).concat(e+r,",").concat(n+i-a*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+r-l*g,",").concat(n+i,`
            L `).concat(e+l*g,",").concat(n+i,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e,",").concat(n+i-a*g," Z")}else u="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return u},c6e=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,o=n.x,s=n.y,a=n.width,l=n.height;if(Math.abs(a)>0&&Math.abs(l)>0){var c=Math.min(o,o+a),u=Math.max(o,o+a),d=Math.min(s,s+l),f=Math.max(s,s+l);return r>=c&&r<=u&&i>=d&&i<=f}return!1},u6e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},hj=function(e){var n=oX(oX({},u6e),e),r=R.useRef(),i=R.useState(-1),o=t6e(i,2),s=o[0],a=o[1];R.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&a(y)}catch{}},[]);var l=n.x,c=n.y,u=n.width,d=n.height,f=n.radius,h=n.className,g=n.animationEasing,p=n.animationDuration,m=n.animationBegin,v=n.isAnimationActive,_=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||u===0||d===0)return null;var w=Ze("recharts-rectangle",h);return _?B.createElement(El,{canBegin:s>0,from:{width:u,height:d,x:l,y:c},to:{width:u,height:d,x:l,y:c},duration:p,animationEasing:g,isActive:_},function(y){var b=y.width,x=y.height,S=y.x,C=y.y;return B.createElement(El,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:p,isActive:v,easing:g},B.createElement("path",wk({},wt(n,!0),{className:w,d:sX(S,C,b,x,f),ref:r})))}):B.createElement("path",wk({},wt(n,!0),{className:w,d:sX(l,c,u,d,f)}))},d6e=["points","className","baseLinePoints","connectNulls"];function Dg(){return Dg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dg.apply(this,arguments)}function f6e(t,e){if(t==null)return{};var n=h6e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function h6e(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function aX(t){return v6e(t)||g6e(t)||m6e(t)||p6e()}function p6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m6e(t,e){if(t){if(typeof t=="string")return QL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QL(t,e)}}function g6e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function v6e(t){if(Array.isArray(t))return QL(t)}function QL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var lX=function(e){return e&&e.x===+e.x&&e.y===+e.y},y6e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){lX(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),lX(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Gb=function(e,n){var r=y6e(e);n&&(r=[r.reduce(function(o,s){return[].concat(aX(o),aX(s))},[])]);var i=r.map(function(o){return o.reduce(function(s,a,l){return"".concat(s).concat(l===0?"M":"L").concat(a.x,",").concat(a.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},b6e=function(e,n,r){var i=Gb(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Gb(n.reverse(),r).slice(1))},x6e=function(e){var n=e.points,r=e.className,i=e.baseLinePoints,o=e.connectNulls,s=f6e(e,d6e);if(!n||!n.length)return null;var a=Ze("recharts-polygon",r);if(i&&i.length){var l=s.stroke&&s.stroke!=="none",c=b6e(n,i,o);return B.createElement("g",{className:a},B.createElement("path",Dg({},wt(s,!0),{fill:c.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:c})),l?B.createElement("path",Dg({},wt(s,!0),{fill:"none",d:Gb(n,o)})):null,l?B.createElement("path",Dg({},wt(s,!0),{fill:"none",d:Gb(i,o)})):null)}var u=Gb(n,o);return B.createElement("path",Dg({},wt(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",className:a,d:u}))};function ZL(){return ZL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZL.apply(this,arguments)}var k_=function(e){var n=e.cx,r=e.cy,i=e.r,o=e.className,s=Ze("recharts-dot",o);return n===+n&&r===+r&&i===+i?B.createElement("circle",ZL({},wt(e,!1),zT(e),{className:s,cx:n,cy:r,r:i})):null};function iw(t){"@babel/helpers - typeof";return iw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iw(t)}var w6e=["x","y","top","left","width","height","className"];function JL(){return JL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JL.apply(this,arguments)}function cX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _6e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cX(Object(n),!0).forEach(function(r){S6e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function S6e(t,e,n){return e=C6e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C6e(t){var e=E6e(t,"string");return iw(e)=="symbol"?e:String(e)}function E6e(t,e){if(iw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(iw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T6e(t,e){if(t==null)return{};var n=k6e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function k6e(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var A6e=function(e,n,r,i,o,s){return"M".concat(e,",").concat(o,"v").concat(i,"M").concat(s,",").concat(n,"h").concat(r)},M6e=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,s=e.top,a=s===void 0?0:s,l=e.left,c=l===void 0?0:l,u=e.width,d=u===void 0?0:u,f=e.height,h=f===void 0?0:f,g=e.className,p=T6e(e,w6e),m=_6e({x:r,y:o,top:a,left:c,width:d,height:h},p);return!Qe(r)||!Qe(o)||!Qe(d)||!Qe(h)||!Qe(a)||!Qe(c)?null:B.createElement("path",JL({},wt(m,!0),{className:Ze("recharts-cross",g),d:A6e(r,o,d,h,a,c)}))},I6e=cI,O6e=loe,R6e=Vc;function D6e(t,e){return t&&t.length?I6e(t,R6e(e),O6e):void 0}var P6e=D6e;const N6e=cn(P6e);var $6e=cI,L6e=Vc,F6e=coe;function B6e(t,e){return t&&t.length?$6e(t,L6e(e),F6e):void 0}var U6e=B6e;const z6e=cn(U6e);var j6e=["cx","cy","angle","ticks","axisLine"],W6e=["ticks","tick","angle","tickFormatter","stroke"];function Nv(t){"@babel/helpers - typeof";return Nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nv(t)}function qb(){return qb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qb.apply(this,arguments)}function uX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uX(Object(n),!0).forEach(function(r){hI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dX(t,e){if(t==null)return{};var n=V6e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function V6e(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function H6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Yoe(r.key),r)}}function G6e(t,e,n){return e&&fX(t.prototype,e),n&&fX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function q6e(t,e,n){return e=_k(e),X6e(t,Koe()?Reflect.construct(e,n||[],_k(t).constructor):e.apply(t,n))}function X6e(t,e){if(e&&(Nv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return K6e(t)}function K6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Koe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Koe=function(){return!!t})()}function _k(t){return _k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_k(t)}function Y6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eF(t,e)}function eF(t,e){return eF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},eF(t,e)}function hI(t,e,n){return e=Yoe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yoe(t){var e=Q6e(t,"string");return Nv(e)=="symbol"?e:String(e)}function Q6e(t,e){if(Nv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Nv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pI=function(t){Y6e(e,t);function e(){return H6e(this,e),q6e(this,e,arguments)}return G6e(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,o=this.props,s=o.angle,a=o.cx,l=o.cy;return Wn(a,l,i,s)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,o=r.cy,s=r.angle,a=r.ticks,l=N6e(a,function(u){return u.coordinate||0}),c=z6e(a,function(u){return u.coordinate||0});return{cx:i,cy:o,startAngle:s,endAngle:s,innerRadius:c.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,o=r.cy,s=r.angle,a=r.ticks,l=r.axisLine,c=dX(r,j6e),u=a.reduce(function(g,p){return[Math.min(g[0],p.coordinate),Math.max(g[1],p.coordinate)]},[1/0,-1/0]),d=Wn(i,o,u[0],s),f=Wn(i,o,u[1],s),h=oh(oh(oh({},wt(c,!1)),{},{fill:"none"},wt(l,!1)),{},{x1:d.x,y1:d.y,x2:f.x,y2:f.y});return B.createElement("line",qb({className:"recharts-polar-radius-axis-line"},h))}},{key:"renderTicks",value:function(){var r=this,i=this.props,o=i.ticks,s=i.tick,a=i.angle,l=i.tickFormatter,c=i.stroke,u=dX(i,W6e),d=this.getTickTextAnchor(),f=wt(u,!1),h=wt(s,!1),g=o.map(function(p,m){var v=r.getTickValueCoord(p),_=oh(oh(oh(oh({textAnchor:d,transform:"rotate(".concat(90-a,", ").concat(v.x,", ").concat(v.y,")")},f),{},{stroke:"none",fill:c},h),{},{index:m},v),{},{payload:p});return B.createElement(Yt,qb({className:Ze("recharts-polar-radius-axis-tick",Poe(s)),key:"tick-".concat(p.coordinate)},Cp(r.props,p,m)),e.renderTickItem(s,_,l?l(p.value,m):p.value))});return B.createElement(Yt,{className:"recharts-polar-radius-axis-ticks"},g)}},{key:"render",value:function(){var r=this.props,i=r.ticks,o=r.axisLine,s=r.tick;return!i||!i.length?null:B.createElement(Yt,{className:Ze("recharts-polar-radius-axis",this.props.className)},o&&this.renderAxisLine(),s&&this.renderTicks(),Ei.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,o){var s;return B.isValidElement(r)?s=B.cloneElement(r,i):Rt(r)?s=r(i):s=B.createElement(Ep,qb({},i,{className:"recharts-polar-radius-axis-tick-value"}),o),s}}]),e}(R.PureComponent);hI(pI,"displayName","PolarRadiusAxis");hI(pI,"axisType","radiusAxis");hI(pI,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function $v(t){"@babel/helpers - typeof";return $v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$v(t)}function Eh(){return Eh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Eh.apply(this,arguments)}function hX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hX(Object(n),!0).forEach(function(r){mI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Z6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Zoe(r.key),r)}}function J6e(t,e,n){return e&&pX(t.prototype,e),n&&pX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function e8e(t,e,n){return e=Sk(e),t8e(t,Qoe()?Reflect.construct(e,n||[],Sk(t).constructor):e.apply(t,n))}function t8e(t,e){if(e&&($v(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n8e(t)}function n8e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qoe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qoe=function(){return!!t})()}function Sk(t){return Sk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Sk(t)}function r8e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tF(t,e)}function tF(t,e){return tF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},tF(t,e)}function mI(t,e,n){return e=Zoe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zoe(t){var e=i8e(t,"string");return $v(e)=="symbol"?e:String(e)}function i8e(t,e){if($v(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if($v(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var o8e=Math.PI/180,mX=1e-5,gI=function(t){r8e(e,t);function e(){return Z6e(this,e),e8e(this,e,arguments)}return J6e(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.cx,s=i.cy,a=i.radius,l=i.orientation,c=i.tickSize,u=c||8,d=Wn(o,s,a,r.coordinate),f=Wn(o,s,a+(l==="inner"?-1:1)*u,r.coordinate);return{x1:d.x,y1:d.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,o=Math.cos(-r.coordinate*o8e),s;return o>mX?s=i==="outer"?"start":"end":o<-mX?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,o=r.cy,s=r.radius,a=r.axisLine,l=r.axisLineType,c=sh(sh({},wt(this.props,!1)),{},{fill:"none"},wt(a,!1));if(l==="circle")return B.createElement(k_,Eh({className:"recharts-polar-angle-axis-line"},c,{cx:i,cy:o,r:s}));var u=this.props.ticks,d=u.map(function(f){return Wn(i,o,s,f.coordinate)});return B.createElement(x6e,Eh({className:"recharts-polar-angle-axis-line"},c,{points:d}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,o=i.ticks,s=i.tick,a=i.tickLine,l=i.tickFormatter,c=i.stroke,u=wt(this.props,!1),d=wt(s,!1),f=sh(sh({},u),{},{fill:"none"},wt(a,!1)),h=o.map(function(g,p){var m=r.getTickLineCoord(g),v=r.getTickTextAnchor(g),_=sh(sh(sh({textAnchor:v},u),{},{stroke:"none",fill:c},d),{},{index:p,payload:g,x:m.x2,y:m.y2});return B.createElement(Yt,Eh({className:Ze("recharts-polar-angle-axis-tick",Poe(s)),key:"tick-".concat(g.coordinate)},Cp(r.props,g,p)),a&&B.createElement("line",Eh({className:"recharts-polar-angle-axis-tick-line"},f,m)),s&&e.renderTickItem(s,_,l?l(g.value,p):g.value))});return B.createElement(Yt,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var r=this.props,i=r.ticks,o=r.radius,s=r.axisLine;return o<=0||!i||!i.length?null:B.createElement(Yt,{className:Ze("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,o){var s;return B.isValidElement(r)?s=B.cloneElement(r,i):Rt(r)?s=r(i):s=B.createElement(Ep,Eh({},i,{className:"recharts-polar-angle-axis-tick-value"}),o),s}}]),e}(R.PureComponent);mI(gI,"displayName","PolarAngleAxis");mI(gI,"axisType","angleAxis");mI(gI,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var s8e=Jre,a8e=s8e(Object.getPrototypeOf,Object),l8e=a8e,c8e=Zu,u8e=l8e,d8e=Ju,f8e="[object Object]",h8e=Function.prototype,p8e=Object.prototype,Joe=h8e.toString,m8e=p8e.hasOwnProperty,g8e=Joe.call(Object);function v8e(t){if(!d8e(t)||c8e(t)!=f8e)return!1;var e=u8e(t);if(e===null)return!0;var n=m8e.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Joe.call(n)==g8e}var y8e=v8e;const b8e=cn(y8e);var x8e=Zu,w8e=Ju,_8e="[object Boolean]";function S8e(t){return t===!0||t===!1||w8e(t)&&x8e(t)==_8e}var C8e=S8e;const E8e=cn(C8e);function ow(t){"@babel/helpers - typeof";return ow=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ow(t)}function Ck(){return Ck=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ck.apply(this,arguments)}function T8e(t,e){return I8e(t)||M8e(t,e)||A8e(t,e)||k8e()}function k8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A8e(t,e){if(t){if(typeof t=="string")return gX(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gX(t,e)}}function gX(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function M8e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function I8e(t){if(Array.isArray(t))return t}function vX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vX(Object(n),!0).forEach(function(r){O8e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function O8e(t,e,n){return e=R8e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R8e(t){var e=D8e(t,"string");return ow(e)=="symbol"?e:String(e)}function D8e(t,e){if(ow(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ow(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bX=function(e,n,r,i,o){var s=r-i,a;return a="M ".concat(e,",").concat(n),a+="L ".concat(e+r,",").concat(n),a+="L ".concat(e+r-s/2,",").concat(n+o),a+="L ".concat(e+r-s/2-i,",").concat(n+o),a+="L ".concat(e,",").concat(n," Z"),a},P8e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},N8e=function(e){var n=yX(yX({},P8e),e),r=R.useRef(),i=R.useState(-1),o=T8e(i,2),s=o[0],a=o[1];R.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var w=r.current.getTotalLength();w&&a(w)}catch{}},[]);var l=n.x,c=n.y,u=n.upperWidth,d=n.lowerWidth,f=n.height,h=n.className,g=n.animationEasing,p=n.animationDuration,m=n.animationBegin,v=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||f!==+f||u===0&&d===0||f===0)return null;var _=Ze("recharts-trapezoid",h);return v?B.createElement(El,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:f,x:l,y:c},to:{upperWidth:u,lowerWidth:d,height:f,x:l,y:c},duration:p,animationEasing:g,isActive:v},function(w){var y=w.upperWidth,b=w.lowerWidth,x=w.height,S=w.x,C=w.y;return B.createElement(El,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:p,easing:g},B.createElement("path",Ck({},wt(n,!0),{className:_,d:bX(S,C,y,b,x),ref:r})))}):B.createElement("g",null,B.createElement("path",Ck({},wt(n,!0),{className:_,d:bX(l,c,u,d,f)})))},$8e=["option","shapeType","propTransformer","activeClassName","isActive"];function sw(t){"@babel/helpers - typeof";return sw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sw(t)}function L8e(t,e){if(t==null)return{};var n=F8e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function F8e(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function xX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ek(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xX(Object(n),!0).forEach(function(r){B8e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function B8e(t,e,n){return e=U8e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U8e(t){var e=z8e(t,"string");return sw(e)=="symbol"?e:String(e)}function z8e(t,e){if(sw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(sw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function j8e(t,e){return Ek(Ek({},e),t)}function W8e(t,e){return t==="symbols"}function wX(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return B.createElement(hj,n);case"trapezoid":return B.createElement(N8e,n);case"sector":return B.createElement(vf,n);case"symbols":if(W8e(e))return B.createElement(_z,n);break;default:return null}}function V8e(t){return R.isValidElement(t)?t.props:t}function ese(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?j8e:r,o=t.activeClassName,s=o===void 0?"recharts-active-shape":o,a=t.isActive,l=L8e(t,$8e),c;if(R.isValidElement(e))c=R.cloneElement(e,Ek(Ek({},l),V8e(e)));else if(Rt(e))c=e(l);else if(b8e(e)&&!E8e(e)){var u=i(e,l);c=B.createElement(wX,{shapeType:n,elementProps:u})}else{var d=l;c=B.createElement(wX,{shapeType:n,elementProps:d})}return a?B.createElement(Yt,{className:s},c):c}function vI(t,e){return e!=null&&"trapezoids"in t.props}function yI(t,e){return e!=null&&"sectors"in t.props}function aw(t,e){return e!=null&&"points"in t.props}function H8e(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,o=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&o}function G8e(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function q8e(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function X8e(t,e){var n;return vI(t,e)?n=H8e:yI(t,e)?n=G8e:aw(t,e)&&(n=q8e),n}function K8e(t,e){var n;return vI(t,e)?n="trapezoids":yI(t,e)?n="sectors":aw(t,e)&&(n="points"),n}function Y8e(t,e){if(vI(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(yI(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return aw(t,e)?e.payload:{}}function Q8e(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=K8e(n,e),o=Y8e(n,e),s=r.filter(function(l,c){var u=Ap(o,l),d=n.props[i].filter(function(g){var p=X8e(n,e);return p(g,e)}),f=n.props[i].indexOf(d[d.length-1]),h=c===f;return u&&h}),a=r.indexOf(s[s.length-1]);return a}var AE;function Lv(t){"@babel/helpers - typeof";return Lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lv(t)}function Pg(){return Pg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pg.apply(this,arguments)}function _X(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function or(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_X(Object(n),!0).forEach(function(r){ma(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_X(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Z8e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nse(r.key),r)}}function J8e(t,e,n){return e&&SX(t.prototype,e),n&&SX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function eqe(t,e,n){return e=Tk(e),tqe(t,tse()?Reflect.construct(e,n||[],Tk(t).constructor):e.apply(t,n))}function tqe(t,e){if(e&&(Lv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ug(t)}function tse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tse=function(){return!!t})()}function Tk(t){return Tk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tk(t)}function ug(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nqe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nF(t,e)}function nF(t,e){return nF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},nF(t,e)}function ma(t,e,n){return e=nse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nse(t){var e=rqe(t,"string");return Lv(e)=="symbol"?e:String(e)}function rqe(t,e){if(Lv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Lv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Dl=function(t){nqe(e,t);function e(n){var r;return Z8e(this,e),r=eqe(this,e,[n]),ma(ug(r),"pieRef",null),ma(ug(r),"sectorRefs",[]),ma(ug(r),"id",em("recharts-pie-")),ma(ug(r),"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Rt(i)&&i()}),ma(ug(r),"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Rt(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return J8e(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var o=this.props,s=o.label,a=o.labelLine,l=o.dataKey,c=o.valueKey,u=wt(this.props,!1),d=wt(s,!1),f=wt(a,!1),h=s&&s.offsetRadius||20,g=r.map(function(p,m){var v=(p.startAngle+p.endAngle)/2,_=Wn(p.cx,p.cy,p.outerRadius+h,v),w=or(or(or(or({},u),p),{},{stroke:"none"},d),{},{index:m,textAnchor:e.getTextAnchor(_.x,p.cx)},_),y=or(or(or(or({},u),p),{},{fill:"none",stroke:p.fill},f),{},{index:m,points:[Wn(p.cx,p.cy,p.outerRadius,v),_],key:"line"}),b=l;return Nt(l)&&Nt(c)?b="value":Nt(l)&&(b=c),B.createElement(Yt,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(m)},a&&e.renderLabelLineItem(a,y),e.renderLabelItem(s,w,Or(p,b)))});return B.createElement(Yt,{className:"recharts-pie-labels"},g)}},{key:"renderSectorsStatically",value:function(r){var i=this,o=this.props,s=o.activeShape,a=o.blendStroke,l=o.inactiveShape;return r.map(function(c,u){if((c==null?void 0:c.startAngle)===0&&(c==null?void 0:c.endAngle)===0&&r.length!==1)return null;var d=i.isActiveIndex(u),f=l&&i.hasActiveIndex()?l:null,h=d?s:f,g=or(or({},c),{},{stroke:a?c.fill:c.stroke,tabIndex:-1});return B.createElement(Yt,Pg({ref:function(m){m&&!i.sectorRefs.includes(m)&&i.sectorRefs.push(m)},tabIndex:-1,className:"recharts-pie-sector"},Cp(i.props,c,u),{key:"sector-".concat(c==null?void 0:c.startAngle,"-").concat(c==null?void 0:c.endAngle,"-").concat(c.midAngle,"-").concat(u)}),B.createElement(ese,Pg({option:h,isActive:d,shapeType:"sector"},g)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,o=i.sectors,s=i.isAnimationActive,a=i.animationBegin,l=i.animationDuration,c=i.animationEasing,u=i.animationId,d=this.state,f=d.prevSectors,h=d.prevIsAnimationActive;return B.createElement(El,{begin:a,duration:l,isActive:s,easing:c,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(h),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(g){var p=g.t,m=[],v=o&&o[0],_=v.startAngle;return o.forEach(function(w,y){var b=f&&f[y],x=y>0?Ps(w,"paddingAngle",0):0;if(b){var S=ai(b.endAngle-b.startAngle,w.endAngle-w.startAngle),C=or(or({},w),{},{startAngle:_+x,endAngle:_+S(p)+x});m.push(C),_=C.endAngle}else{var T=w.endAngle,E=w.startAngle,k=ai(0,T-E),A=k(p),O=or(or({},w),{},{startAngle:_+x,endAngle:_+A+x});m.push(O),_=O.endAngle}}),B.createElement(Yt,null,r.renderSectorsStatically(m))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(o){if(!o.altKey)switch(o.key){case"ArrowLeft":{var s=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"ArrowRight":{var a=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[a].focus(),i.setState({sectorToFocus:a});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,o=r.isAnimationActive,s=this.state.prevSectors;return o&&i&&i.length&&(!s||!Ap(s,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,o=i.hide,s=i.sectors,a=i.className,l=i.label,c=i.cx,u=i.cy,d=i.innerRadius,f=i.outerRadius,h=i.isAnimationActive,g=this.state.isAnimationFinished;if(o||!s||!s.length||!Qe(c)||!Qe(u)||!Qe(d)||!Qe(f))return null;var p=Ze("recharts-pie",a);return B.createElement(Yt,{tabIndex:this.props.rootTabIndex,className:p,ref:function(v){r.pieRef=v}},this.renderSectors(),l&&this.renderLabels(s),Ei.renderCallByParent(this.props,null,!1),(!h||g)&&gc.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i){if(B.isValidElement(r))return B.cloneElement(r,i);if(Rt(r))return r(i);var o=Ze("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return B.createElement(np,Pg({},i,{type:"linear",className:o}))}},{key:"renderLabelItem",value:function(r,i,o){if(B.isValidElement(r))return B.cloneElement(r,i);var s=o;if(Rt(r)&&(s=r(i),B.isValidElement(s)))return s;var a=Ze("recharts-pie-label-text",typeof r!="boolean"&&!Rt(r)?r.className:"");return B.createElement(Ep,Pg({},i,{alignmentBaseline:"middle",className:a}),s)}}]),e}(R.PureComponent);AE=Dl;ma(Dl,"displayName","Pie");ma(Dl,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!bl.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ma(Dl,"parseDeltaAngle",function(t,e){var n=ko(e-t),r=Math.min(Math.abs(e-t),360);return n*r});ma(Dl,"getRealPieData",function(t){var e=t.props,n=e.data,r=e.children,i=wt(t.props,!1),o=Ns(r,Rz);return n&&n.length?n.map(function(s,a){return or(or(or({payload:s},i),s),o&&o[a]&&o[a].props)}):o&&o.length?o.map(function(s){return or(or({},i),s.props)}):[]});ma(Dl,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,i=e.width,o=e.height,s=Doe(i,o),a=r+Ao(t.props.cx,i,i/2),l=n+Ao(t.props.cy,o,o/2),c=Ao(t.props.innerRadius,s,0),u=Ao(t.props.outerRadius,s,s*.8),d=t.props.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:a,cy:l,innerRadius:c,outerRadius:u,maxRadius:d}});ma(Dl,"getComposedData",function(t){var e=t.item,n=t.offset,r=AE.getRealPieData(e);if(!r||!r.length)return null;var i=e.props,o=i.cornerRadius,s=i.startAngle,a=i.endAngle,l=i.paddingAngle,c=i.dataKey,u=i.nameKey,d=i.valueKey,f=i.tooltipType,h=Math.abs(e.props.minAngle),g=AE.parseCoordinateOfPie(e,n),p=AE.parseDeltaAngle(s,a),m=Math.abs(p),v=c;Nt(c)&&Nt(d)?(yl(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v="value"):Nt(c)&&(yl(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v=d);var _=r.filter(function(C){return Or(C,v,0)!==0}).length,w=(m>=360?_:_-1)*l,y=m-_*h-w,b=r.reduce(function(C,T){var E=Or(T,v,0);return C+(Qe(E)?E:0)},0),x;if(b>0){var S;x=r.map(function(C,T){var E=Or(C,v,0),k=Or(C,u,T),A=(Qe(E)?E:0)/b,O;T?O=S.endAngle+ko(p)*l*(E!==0?1:0):O=s;var D=O+ko(p)*((E!==0?h:0)+A*y),P=(O+D)/2,N=(g.innerRadius+g.outerRadius)/2,U=[{name:k,value:E,payload:C,dataKey:v,type:f}],L=Wn(g.cx,g.cy,N,P);return S=or(or(or({percent:A,cornerRadius:o,name:k,tooltipPayload:U,midAngle:P,middleRadius:N,tooltipPosition:L},C),g),{},{value:Or(C,v),startAngle:O,endAngle:D,payload:C,paddingAngle:ko(p)*l}),S})}return or(or({},g),{},{sectors:x,data:r})});var iqe=Math.ceil,oqe=Math.max;function sqe(t,e,n,r){for(var i=-1,o=oqe(iqe((e-t)/(n||1)),0),s=Array(o);o--;)s[r?o:++i]=t,t+=n;return s}var aqe=sqe,lqe=bie,CX=1/0,cqe=17976931348623157e292;function uqe(t){if(!t)return t===0?t:0;if(t=lqe(t),t===CX||t===-CX){var e=t<0?-1:1;return e*cqe}return t===t?t:0}var rse=uqe,dqe=aqe,fqe=rI,jD=rse;function hqe(t){return function(e,n,r){return r&&typeof r!="number"&&fqe(e,n,r)&&(n=r=void 0),e=jD(e),n===void 0?(n=e,e=0):n=jD(n),r=r===void 0?e<n?1:-1:jD(r),dqe(e,n,r,t)}}var pqe=hqe,mqe=pqe,gqe=mqe(),vqe=gqe;const kk=cn(vqe);function lw(t){"@babel/helpers - typeof";return lw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lw(t)}function EX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function TX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EX(Object(n),!0).forEach(function(r){ise(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ise(t,e,n){return e=yqe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yqe(t){var e=bqe(t,"string");return lw(e)=="symbol"?e:String(e)}function bqe(t,e){if(lw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(lw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xqe=["Webkit","Moz","O","ms"],wqe=function(e,n){var r=e.replace(/(\w)/,function(o){return o.toUpperCase()}),i=xqe.reduce(function(o,s){return TX(TX({},o),{},ise({},s+r,n))},{});return i[e]=n,i};function Fv(t){"@babel/helpers - typeof";return Fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fv(t)}function Ak(){return Ak=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ak.apply(this,arguments)}function kX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function WD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kX(Object(n),!0).forEach(function(r){bs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _qe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function AX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sse(r.key),r)}}function Sqe(t,e,n){return e&&AX(t.prototype,e),n&&AX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cqe(t,e,n){return e=Mk(e),Eqe(t,ose()?Reflect.construct(e,n||[],Mk(t).constructor):e.apply(t,n))}function Eqe(t,e){if(e&&(Fv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ll(t)}function ose(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ose=function(){return!!t})()}function Mk(t){return Mk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Mk(t)}function Ll(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tqe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rF(t,e)}function rF(t,e){return rF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},rF(t,e)}function bs(t,e,n){return e=sse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sse(t){var e=kqe(t,"string");return Fv(e)=="symbol"?e:String(e)}function kqe(t,e){if(Fv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Fv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Aqe=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,o=e.x,s=e.width,a=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,c=Wb().domain(kk(0,l)).range([o,o+s-a]),u=c.domain().map(function(d){return c(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(i),scale:c,scaleValues:u}},MX=function(e){return e.changedTouches&&!!e.changedTouches.length},Bv=function(t){Tqe(e,t);function e(n){var r;return _qe(this,e),r=Cqe(this,e,[n]),bs(Ll(r),"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),bs(Ll(r),"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),bs(Ll(r),"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,o=i.endIndex,s=i.onDragEnd,a=i.startIndex;s==null||s({endIndex:o,startIndex:a})}),r.detachDragEndListener()}),bs(Ll(r),"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),bs(Ll(r),"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),bs(Ll(r),"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),bs(Ll(r),"handleSlideDragStart",function(i){var o=MX(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(Ll(r),"startX"),endX:r.handleTravellerDragStart.bind(Ll(r),"endX")},r.state={},r}return Sqe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,o=r.endX,s=this.state.scaleValues,a=this.props,l=a.gap,c=a.data,u=c.length-1,d=Math.min(i,o),f=Math.max(i,o),h=e.getIndexInRange(s,d),g=e.getIndexInRange(s,f);return{startIndex:h-h%l,endIndex:g===u?u:g-g%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,o=i.data,s=i.tickFormatter,a=i.dataKey,l=Or(o[r],a,r);return Rt(s)?s(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,o=i.slideMoveStartX,s=i.startX,a=i.endX,l=this.props,c=l.x,u=l.width,d=l.travellerWidth,f=l.startIndex,h=l.endIndex,g=l.onChange,p=r.pageX-o;p>0?p=Math.min(p,c+u-d-a,c+u-d-s):p<0&&(p=Math.max(p,c-s,c-a));var m=this.getIndex({startX:s+p,endX:a+p});(m.startIndex!==f||m.endIndex!==h)&&g&&g(m),this.setState({startX:s+p,endX:a+p,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var o=MX(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,o=i.brushMoveStartX,s=i.movingTravellerId,a=i.endX,l=i.startX,c=this.state[s],u=this.props,d=u.x,f=u.width,h=u.travellerWidth,g=u.onChange,p=u.gap,m=u.data,v={startX:this.state.startX,endX:this.state.endX},_=r.pageX-o;_>0?_=Math.min(_,d+f-h-c):_<0&&(_=Math.max(_,d-c)),v[s]=c+_;var w=this.getIndex(v),y=w.startIndex,b=w.endIndex,x=function(){var C=m.length-1;return s==="startX"&&(a>l?y%p===0:b%p===0)||a<l&&b===C||s==="endX"&&(a>l?b%p===0:y%p===0)||a>l&&b===C};this.setState(bs(bs({},s,c+_),"brushMoveStartX",r.pageX),function(){g&&x()&&g(w)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var o=this,s=this.state,a=s.scaleValues,l=s.startX,c=s.endX,u=this.state[i],d=a.indexOf(u);if(d!==-1){var f=d+r;if(!(f===-1||f>=a.length)){var h=a[f];i==="startX"&&h>=c||i==="endX"&&h<=l||this.setState(bs({},i,h),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,o=r.y,s=r.width,a=r.height,l=r.fill,c=r.stroke;return B.createElement("rect",{stroke:c,fill:l,x:i,y:o,width:s,height:a})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,o=r.y,s=r.width,a=r.height,l=r.data,c=r.children,u=r.padding,d=R.Children.only(c);return d?B.cloneElement(d,{x:i,y:o,width:s,height:a,margin:u,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var o,s,a=this,l=this.props,c=l.y,u=l.travellerWidth,d=l.height,f=l.traveller,h=l.ariaLabel,g=l.data,p=l.startIndex,m=l.endIndex,v=Math.max(r,this.props.x),_=WD(WD({},wt(this.props,!1)),{},{x:v,y:c,width:u,height:d}),w=h||"Min value: ".concat((o=g[p])===null||o===void 0?void 0:o.name,", Max value: ").concat((s=g[m])===null||s===void 0?void 0:s.name);return B.createElement(Yt,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(b){["ArrowLeft","ArrowRight"].includes(b.key)&&(b.preventDefault(),b.stopPropagation(),a.handleTravellerMoveKeyboard(b.key==="ArrowRight"?1:-1,i))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,_))}},{key:"renderSlide",value:function(r,i){var o=this.props,s=o.y,a=o.height,l=o.stroke,c=o.travellerWidth,u=Math.min(r,i)+c,d=Math.max(Math.abs(i-r)-c,0);return B.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:u,y:s,width:d,height:a})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,o=r.endIndex,s=r.y,a=r.height,l=r.travellerWidth,c=r.stroke,u=this.state,d=u.startX,f=u.endX,h=5,g={pointerEvents:"none",fill:c};return B.createElement(Yt,{className:"recharts-brush-texts"},B.createElement(Ep,Ak({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,f)-h,y:s+a/2},g),this.getTextOfTick(i)),B.createElement(Ep,Ak({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,f)+l+h,y:s+a/2},g),this.getTextOfTick(o)))}},{key:"render",value:function(){var r=this.props,i=r.data,o=r.className,s=r.children,a=r.x,l=r.y,c=r.width,u=r.height,d=r.alwaysShowText,f=this.state,h=f.startX,g=f.endX,p=f.isTextActive,m=f.isSlideMoving,v=f.isTravellerMoving,_=f.isTravellerFocused;if(!i||!i.length||!Qe(a)||!Qe(l)||!Qe(c)||!Qe(u)||c<=0||u<=0)return null;var w=Ze("recharts-brush",o),y=B.Children.count(s)===1,b=wqe("userSelect","none");return B.createElement(Yt,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:b},this.renderBackground(),y&&this.renderPanorama(),this.renderSlide(h,g),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(g,"endX"),(p||m||v||_||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,o=r.y,s=r.width,a=r.height,l=r.stroke,c=Math.floor(o+a/2)-1;return B.createElement(B.Fragment,null,B.createElement("rect",{x:i,y:o,width:s,height:a,fill:l,stroke:"none"}),B.createElement("line",{x1:i+1,y1:c,x2:i+s-1,y2:c,fill:"none",stroke:"#fff"}),B.createElement("line",{x1:i+1,y1:c+2,x2:i+s-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var o;return B.isValidElement(r)?o=B.cloneElement(r,i):Rt(r)?o=r(i):o=e.renderDefaultTraveller(i),o}},{key:"getDerivedStateFromProps",value:function(r,i){var o=r.data,s=r.width,a=r.x,l=r.travellerWidth,c=r.updateId,u=r.startIndex,d=r.endIndex;if(o!==i.prevData||c!==i.prevUpdateId)return WD({prevData:o,prevTravellerWidth:l,prevUpdateId:c,prevX:a,prevWidth:s},o&&o.length?Aqe({data:o,width:s,x:a,travellerWidth:l,startIndex:u,endIndex:d}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||a!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([a,a+s-l]);var f=i.scale.domain().map(function(h){return i.scale(h)});return{prevData:o,prevTravellerWidth:l,prevUpdateId:c,prevX:a,prevWidth:s,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(r,i){for(var o=r.length,s=0,a=o-1;a-s>1;){var l=Math.floor((s+a)/2);r[l]>i?a=l:s=l}return i>=r[a]?a:s}}]),e}(R.PureComponent);bs(Bv,"displayName","Brush");bs(Bv,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Mqe=Mz;function Iqe(t,e){var n;return Mqe(t,function(r,i,o){return n=e(r,i,o),!n}),!!n}var Oqe=Iqe,Rqe=Hre,Dqe=Vc,Pqe=Oqe,Nqe=fs,$qe=rI;function Lqe(t,e,n){var r=Nqe(t)?Rqe:Pqe;return n&&$qe(t,e,n)&&(e=void 0),r(t,Dqe(e))}var Fqe=Lqe;const Bqe=cn(Fqe);var vc=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},IX=pie;function Uqe(t,e,n){e=="__proto__"&&IX?IX(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var zqe=Uqe,jqe=zqe,Wqe=fie,Vqe=Vc;function Hqe(t,e){var n={};return e=Vqe(e),Wqe(t,function(r,i,o){jqe(n,i,e(r,i,o))}),n}var Gqe=Hqe;const qqe=cn(Gqe);function Xqe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var Kqe=Xqe,Yqe=Mz;function Qqe(t,e){var n=!0;return Yqe(t,function(r,i,o){return n=!!e(r,i,o),n}),n}var Zqe=Qqe,Jqe=Kqe,e9e=Zqe,t9e=Vc,n9e=fs,r9e=rI;function i9e(t,e,n){var r=n9e(t)?Jqe:e9e;return n&&r9e(t,e,n)&&(e=void 0),r(t,t9e(e))}var o9e=i9e;const ase=cn(o9e);var s9e=["x","y"];function cw(t){"@babel/helpers - typeof";return cw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cw(t)}function iF(){return iF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iF.apply(this,arguments)}function OX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function H0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OX(Object(n),!0).forEach(function(r){a9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function a9e(t,e,n){return e=l9e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l9e(t){var e=c9e(t,"string");return cw(e)=="symbol"?e:String(e)}function c9e(t,e){if(cw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(cw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function u9e(t,e){if(t==null)return{};var n=d9e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function d9e(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function f9e(t,e){var n=t.x,r=t.y,i=u9e(t,s9e),o="".concat(n),s=parseInt(o,10),a="".concat(r),l=parseInt(a,10),c="".concat(e.height||i.height),u=parseInt(c,10),d="".concat(e.width||i.width),f=parseInt(d,10);return H0(H0(H0(H0(H0({},e),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:u,width:f,name:e.name,radius:e.radius})}function RX(t){return B.createElement(ese,iF({shapeType:"rectangle",propTransformer:f9e,activeClassName:"recharts-active-bar"},t))}var h9e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var o=typeof r=="number";return o?e(r,i):(o||Ip(),n)}},p9e=["value","background"],lse;function Uv(t){"@babel/helpers - typeof";return Uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uv(t)}function m9e(t,e){if(t==null)return{};var n=g9e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function g9e(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Ik(){return Ik=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ik.apply(this,arguments)}function DX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DX(Object(n),!0).forEach(function(r){Ld(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function v9e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,use(r.key),r)}}function y9e(t,e,n){return e&&PX(t.prototype,e),n&&PX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function b9e(t,e,n){return e=Ok(e),x9e(t,cse()?Reflect.construct(e,n||[],Ok(t).constructor):e.apply(t,n))}function x9e(t,e){if(e&&(Uv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gb(t)}function cse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cse=function(){return!!t})()}function Ok(t){return Ok=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ok(t)}function gb(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w9e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oF(t,e)}function oF(t,e){return oF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},oF(t,e)}function Ld(t,e,n){return e=use(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function use(t){var e=_9e(t,"string");return Uv(e)=="symbol"?e:String(e)}function _9e(t,e){if(Uv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Uv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var A_=function(t){w9e(e,t);function e(){var n;v9e(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=b9e(this,e,[].concat(i)),Ld(gb(n),"state",{isAnimationFinished:!1}),Ld(gb(n),"id",em("recharts-bar-")),Ld(gb(n),"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),s&&s()}),Ld(gb(n),"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),s&&s()}),n}return y9e(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,o=this.props,s=o.shape,a=o.dataKey,l=o.activeIndex,c=o.activeBar,u=wt(this.props,!1);return r&&r.map(function(d,f){var h=f===l,g=h?c:s,p=wi(wi(wi({},u),d),{},{isActive:h,option:g,index:f,dataKey:a,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return B.createElement(Yt,Ik({className:"recharts-bar-rectangle"},Cp(i.props,d,f),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value)}),B.createElement(RX,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,o=i.data,s=i.layout,a=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,d=i.animationId,f=this.state.prevData;return B.createElement(El,{begin:l,duration:c,isActive:a,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var g=h.t,p=o.map(function(m,v){var _=f&&f[v];if(_){var w=ai(_.x,m.x),y=ai(_.y,m.y),b=ai(_.width,m.width),x=ai(_.height,m.height);return wi(wi({},m),{},{x:w(g),y:y(g),width:b(g),height:x(g)})}if(s==="horizontal"){var S=ai(0,m.height),C=S(g);return wi(wi({},m),{},{y:m.y+m.height-C,height:C})}var T=ai(0,m.width),E=T(g);return wi(wi({},m),{},{width:E})});return B.createElement(Yt,null,r.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,o=r.isAnimationActive,s=this.state.prevData;return o&&i&&i.length&&(!s||!Ap(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,o=i.data,s=i.dataKey,a=i.activeIndex,l=wt(this.props.background,!1);return o.map(function(c,u){c.value;var d=c.background,f=m9e(c,p9e);if(!d)return null;var h=wi(wi(wi(wi(wi({},f),{},{fill:"#eee"},d),l),Cp(r.props,c,u)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:u,key:"background-bar-".concat(u),className:"recharts-bar-background-rectangle"});return B.createElement(RX,Ik({option:r.props.background,isActive:u===a},h))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,s=o.data,a=o.xAxis,l=o.yAxis,c=o.layout,u=o.children,d=Ns(u,T_);if(!d)return null;var f=c==="vertical"?s[0].height/2:s[0].width/2,h=function(m,v){var _=Array.isArray(m.value)?m.value[1]:m.value;return{x:m.x,y:m.y,value:_,errorVal:Or(m,v)}},g={clipPath:r?"url(#clipPath-".concat(i,")"):null};return B.createElement(Yt,g,d.map(function(p){return B.cloneElement(p,{key:"error-bar-".concat(i,"-").concat(p.props.dataKey),data:s,xAxis:a,yAxis:l,layout:c,offset:f,dataPointFormatter:h})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,o=r.data,s=r.className,a=r.xAxis,l=r.yAxis,c=r.left,u=r.top,d=r.width,f=r.height,h=r.isAnimationActive,g=r.background,p=r.id;if(i||!o||!o.length)return null;var m=this.state.isAnimationFinished,v=Ze("recharts-bar",s),_=a&&a.allowDataOverflow,w=l&&l.allowDataOverflow,y=_||w,b=Nt(p)?this.id:p;return B.createElement(Yt,{className:v},_||w?B.createElement("defs",null,B.createElement("clipPath",{id:"clipPath-".concat(b)},B.createElement("rect",{x:_?c:c-d/2,y:w?u:u-f/2,width:_?d:d*2,height:w?f:f*2}))):null,B.createElement(Yt,{className:"recharts-bar-rectangles",clipPath:y?"url(#clipPath-".concat(b,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(y,b),(!h||m)&&gc.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}]),e}(R.PureComponent);lse=A_;Ld(A_,"displayName","Bar");Ld(A_,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!bl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Ld(A_,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,o=t.xAxis,s=t.yAxis,a=t.xAxisTicks,l=t.yAxisTicks,c=t.stackedData,u=t.dataStartIndex,d=t.displayedData,f=t.offset,h=oHe(r,n);if(!h)return null;var g=e.layout,p=n.props,m=p.dataKey,v=p.children,_=p.minPointSize,w=g==="horizontal"?s:o,y=c?w.scale.domain():null,b=fHe({numericAxis:w}),x=Ns(v,Rz),S=d.map(function(C,T){var E,k,A,O,D,P;c?E=sHe(c[u+T],y):(E=Or(C,m),Array.isArray(E)||(E=[b,E]));var N=h9e(_,lse.defaultProps.minPointSize)(E[1],T);if(g==="horizontal"){var U,L=[s.scale(E[0]),s.scale(E[1])],V=L[0],G=L[1];k=w9({axis:o,ticks:a,bandSize:i,offset:h.offset,entry:C,index:T}),A=(U=G??V)!==null&&U!==void 0?U:void 0,O=h.size;var Q=V-G;if(D=Number.isNaN(Q)?0:Q,P={x:k,y:s.y,width:O,height:s.height},Math.abs(N)>0&&Math.abs(D)<Math.abs(N)){var te=ko(D||N)*(Math.abs(N)-Math.abs(D));A-=te,D+=te}}else{var ne=[o.scale(E[0]),o.scale(E[1])],ee=ne[0],re=ne[1];if(k=ee,A=w9({axis:s,ticks:l,bandSize:i,offset:h.offset,entry:C,index:T}),O=re-ee,D=h.size,P={x:o.x,y:A,width:o.width,height:D},Math.abs(N)>0&&Math.abs(O)<Math.abs(N)){var se=ko(O||N)*(Math.abs(N)-Math.abs(O));O+=se}}return wi(wi(wi({},C),{},{x:k,y:A,width:O,height:D,value:c?E:E[1],payload:C,background:P},x&&x[T]&&x[T].props),{},{tooltipPayload:[Ooe(n,C)],tooltipPosition:{x:k+O/2,y:A+D/2}})});return wi({data:S,layout:g},f)});function uw(t){"@babel/helpers - typeof";return uw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uw(t)}function S9e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dse(r.key),r)}}function C9e(t,e,n){return e&&NX(t.prototype,e),n&&NX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function $X(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$X(Object(n),!0).forEach(function(r){bI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$X(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bI(t,e,n){return e=dse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dse(t){var e=E9e(t,"string");return uw(e)=="symbol"?e:String(e)}function E9e(t,e){if(uw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(uw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fse=function(e,n,r,i,o){var s=e.width,a=e.height,l=e.layout,c=e.children,u=Object.keys(n),d={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:a-r.bottom,bottomMirror:a-r.bottom},f=!!ws(c,A_);return u.reduce(function(h,g){var p=n[g],m=p.orientation,v=p.domain,_=p.padding,w=_===void 0?{}:_,y=p.mirror,b=p.reversed,x="".concat(m).concat(y?"Mirror":""),S,C,T,E,k;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var A=v[1]-v[0],O=1/0,D=p.categoricalDomain.sort();if(D.forEach(function(ee,re){re>0&&(O=Math.min((ee||0)-(D[re-1]||0),O))}),Number.isFinite(O)){var P=O/A,N=p.layout==="vertical"?r.height:r.width;if(p.padding==="gap"&&(S=P*N/2),p.padding==="no-gap"){var U=Ao(e.barCategoryGap,P*N),L=P*N/2;S=L-U-(L-U)/N*U}}}i==="xAxis"?C=[r.left+(w.left||0)+(S||0),r.left+r.width-(w.right||0)-(S||0)]:i==="yAxis"?C=l==="horizontal"?[r.top+r.height-(w.bottom||0),r.top+(w.top||0)]:[r.top+(w.top||0)+(S||0),r.top+r.height-(w.bottom||0)-(S||0)]:C=p.range,b&&(C=[C[1],C[0]]);var V=koe(p,o,f),G=V.scale,Q=V.realScaleType;G.domain(v).range(C),Aoe(G);var te=Moe(G,nl(nl({},p),{},{realScaleType:Q}));i==="xAxis"?(k=m==="top"&&!y||m==="bottom"&&y,T=r.left,E=d[x]-k*p.height):i==="yAxis"&&(k=m==="left"&&!y||m==="right"&&y,T=d[x]-k*p.width,E=r.top);var ne=nl(nl(nl({},p),te),{},{realScaleType:Q,x:T,y:E,scale:G,width:i==="xAxis"?r.width:p.width,height:i==="yAxis"?r.height:p.height});return ne.bandSize=hk(ne,te),!p.hide&&i==="xAxis"?d[x]+=(k?-1:1)*ne.height:p.hide||(d[x]+=(k?-1:1)*ne.width),nl(nl({},h),{},bI({},g,ne))},{})},hse=function(e,n){var r=e.x,i=e.y,o=n.x,s=n.y;return{x:Math.min(r,o),y:Math.min(i,s),width:Math.abs(o-r),height:Math.abs(s-i)}},T9e=function(e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2;return hse({x:n,y:r},{x:i,y:o})},pse=function(){function t(e){S9e(this,t),this.scale=e}return C9e(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,o=r.position;if(n!==void 0){if(o)switch(o){case"start":return this.scale(n);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+s}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(n)+a}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],o=r[r.length-1];return i<=o?n>=i&&n<=o:n>=o&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}]),t}();bI(pse,"EPS",1e-4);var pj=function(e){var n=Object.keys(e).reduce(function(r,i){return nl(nl({},r),{},bI({},i,pse.create(e[i])))},{});return nl(nl({},n),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=o.bandAware,a=o.position;return qqe(i,function(l,c){return n[c].apply(l,{bandAware:s,position:a})})},isInRange:function(i){return ase(i,function(o,s){return n[s].isInRange(o)})}})};function k9e(t){return(t%180+180)%180}var A9e=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=k9e(i),s=o*Math.PI/180,a=Math.atan(r/n),l=s>a&&s<Math.PI-a?r/Math.sin(s):n/Math.cos(s);return Math.abs(l)},M9e=Vc,I9e=__,O9e=tI;function R9e(t){return function(e,n,r){var i=Object(e);if(!I9e(e)){var o=M9e(n);e=O9e(e),n=function(a){return o(i[a],a,i)}}var s=t(e,n,r);return s>-1?i[o?e[s]:s]:void 0}}var D9e=R9e,P9e=rse;function N9e(t){var e=P9e(t),n=e%1;return e===e?n?e-n:e:0}var $9e=N9e,L9e=oie,F9e=Vc,B9e=$9e,U9e=Math.max;function z9e(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:B9e(n);return i<0&&(i=U9e(r+i,0)),L9e(t,F9e(e),i)}var j9e=z9e,W9e=D9e,V9e=j9e,H9e=W9e(V9e),G9e=H9e;const q9e=cn(G9e);var X9e=VOe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),mj=R.createContext(void 0),gj=R.createContext(void 0),mse=R.createContext(void 0),gse=R.createContext({}),vse=R.createContext(void 0),yse=R.createContext(0),bse=R.createContext(0),LX=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,o=n.offset,s=e.clipPathId,a=e.children,l=e.width,c=e.height,u=X9e(o);return B.createElement(mj.Provider,{value:r},B.createElement(gj.Provider,{value:i},B.createElement(gse.Provider,{value:o},B.createElement(mse.Provider,{value:u},B.createElement(vse.Provider,{value:s},B.createElement(yse.Provider,{value:c},B.createElement(bse.Provider,{value:l},a)))))))},K9e=function(){return R.useContext(vse)},xse=function(e){var n=R.useContext(mj);n==null&&Ip();var r=n[e];return r==null&&Ip(),r},Y9e=function(){var e=R.useContext(mj);return Id(e)},Q9e=function(){var e=R.useContext(gj),n=q9e(e,function(r){return ase(r.domain,Number.isFinite)});return n||Id(e)},wse=function(e){var n=R.useContext(gj);n==null&&Ip();var r=n[e];return r==null&&Ip(),r},Z9e=function(){var e=R.useContext(mse);return e},J9e=function(){return R.useContext(gse)},vj=function(){return R.useContext(bse)},yj=function(){return R.useContext(yse)};function dw(t){"@babel/helpers - typeof";return dw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dw(t)}function FX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function BX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FX(Object(n),!0).forEach(function(r){eXe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eXe(t,e,n){return e=tXe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tXe(t){var e=nXe(t,"string");return dw(e)=="symbol"?e:String(e)}function nXe(t,e){if(dw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(dw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rXe(t,e){return aXe(t)||sXe(t,e)||oXe(t,e)||iXe()}function iXe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oXe(t,e){if(t){if(typeof t=="string")return UX(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UX(t,e)}}function UX(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function sXe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function aXe(t){if(Array.isArray(t))return t}function sF(){return sF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sF.apply(this,arguments)}var lXe=function(e,n){var r;return B.isValidElement(e)?r=B.cloneElement(e,n):Rt(e)?r=e(n):r=B.createElement("line",sF({},n,{className:"recharts-reference-line-line"})),r},cXe=function(e,n,r,i,o,s,a,l,c){var u=o.x,d=o.y,f=o.width,h=o.height;if(r){var g=c.y,p=e.y.apply(g,{position:s});if(vc(c,"discard")&&!e.y.isInRange(p))return null;var m=[{x:u+f,y:p},{x:u,y:p}];return l==="left"?m.reverse():m}if(n){var v=c.x,_=e.x.apply(v,{position:s});if(vc(c,"discard")&&!e.x.isInRange(_))return null;var w=[{x:_,y:d+h},{x:_,y:d}];return a==="top"?w.reverse():w}if(i){var y=c.segment,b=y.map(function(x){return e.apply(x,{position:s})});return vc(c,"discard")&&Bqe(b,function(x){return!e.isInRange(x)})?null:b}return null};function bj(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,o=t.yAxisId,s=t.shape,a=t.className,l=t.alwaysShow,c=K9e(),u=xse(i),d=wse(o),f=Z9e();if(!c||!f)return null;yl(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=pj({x:u.scale,y:d.scale}),g=fi(e),p=fi(n),m=r&&r.length===2,v=cXe(h,g,p,m,f,t.position,u.orientation,d.orientation,t);if(!v)return null;var _=rXe(v,2),w=_[0],y=w.x,b=w.y,x=_[1],S=x.x,C=x.y,T=vc(t,"hidden")?"url(#".concat(c,")"):void 0,E=BX(BX({clipPath:T},wt(t,!0)),{},{x1:y,y1:b,x2:S,y2:C});return B.createElement(Yt,{className:Ze("recharts-reference-line",a)},lXe(s,E),Ei.renderCallByParent(t,T9e({x1:y,y1:b,x2:S,y2:C})))}bj.displayName="ReferenceLine";bj.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"};function fw(t){"@babel/helpers - typeof";return fw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fw(t)}function aF(){return aF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aF.apply(this,arguments)}function zX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zX(Object(n),!0).forEach(function(r){uXe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uXe(t,e,n){return e=dXe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dXe(t){var e=fXe(t,"string");return fw(e)=="symbol"?e:String(e)}function fXe(t,e){if(fw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(fw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hXe=function(e){var n=e.x,r=e.y,i=e.xAxis,o=e.yAxis,s=pj({x:i.scale,y:o.scale}),a=s.apply({x:n,y:r},{bandAware:!0});return vc(e,"discard")&&!s.isInRange(a)?null:a};function M_(t){var e=t.x,n=t.y,r=t.r,i=t.alwaysShow,o=t.clipPathId,s=fi(e),a=fi(n);if(yl(i===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!s||!a)return null;var l=hXe(t);if(!l)return null;var c=l.x,u=l.y,d=t.shape,f=t.className,h=vc(t,"hidden")?"url(#".concat(o,")"):void 0,g=jX(jX({clipPath:h},wt(t,!0)),{},{cx:c,cy:u});return B.createElement(Yt,{className:Ze("recharts-reference-dot",f)},M_.renderDot(d,g),Ei.renderCallByParent(t,{x:c-r,y:u-r,width:2*r,height:2*r}))}M_.displayName="ReferenceDot";M_.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1};M_.renderDot=function(t,e){var n;return B.isValidElement(t)?n=B.cloneElement(t,e):Rt(t)?n=t(e):n=B.createElement(k_,aF({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n};function hw(t){"@babel/helpers - typeof";return hw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hw(t)}function lF(){return lF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lF.apply(this,arguments)}function WX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function VX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WX(Object(n),!0).forEach(function(r){pXe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pXe(t,e,n){return e=mXe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mXe(t){var e=gXe(t,"string");return hw(e)=="symbol"?e:String(e)}function gXe(t,e){if(hw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(hw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vXe=function(e,n,r,i,o){var s=o.x1,a=o.x2,l=o.y1,c=o.y2,u=o.xAxis,d=o.yAxis;if(!u||!d)return null;var f=pj({x:u.scale,y:d.scale}),h={x:e?f.x.apply(s,{position:"start"}):f.x.rangeMin,y:r?f.y.apply(l,{position:"start"}):f.y.rangeMin},g={x:n?f.x.apply(a,{position:"end"}):f.x.rangeMax,y:i?f.y.apply(c,{position:"end"}):f.y.rangeMax};return vc(o,"discard")&&(!f.isInRange(h)||!f.isInRange(g))?null:hse(h,g)};function I_(t){var e=t.x1,n=t.x2,r=t.y1,i=t.y2,o=t.className,s=t.alwaysShow,a=t.clipPathId;yl(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var l=fi(e),c=fi(n),u=fi(r),d=fi(i),f=t.shape;if(!l&&!c&&!u&&!d&&!f)return null;var h=vXe(l,c,u,d,t);if(!h&&!f)return null;var g=vc(t,"hidden")?"url(#".concat(a,")"):void 0;return B.createElement(Yt,{className:Ze("recharts-reference-area",o)},I_.renderRect(f,VX(VX({clipPath:g},wt(t,!0)),h)),Ei.renderCallByParent(t,h))}I_.displayName="ReferenceArea";I_.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1};I_.renderRect=function(t,e){var n;return B.isValidElement(t)?n=B.cloneElement(t,e):Rt(t)?n=t(e):n=B.createElement(hj,lF({},e,{className:"recharts-reference-area-rect"})),n};function _se(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function yXe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return A9e(r,n)}function bXe(t,e,n){var r=n==="width",i=t.x,o=t.y,s=t.width,a=t.height;return e===1?{start:r?i:o,end:r?i+s:o+a}:{start:r?i+s:o+a,end:r?i:o}}function Rk(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function xXe(t,e){return _se(t,e+1)}function wXe(t,e,n,r,i){for(var o=(r||[]).slice(),s=e.start,a=e.end,l=0,c=1,u=s,d=function(){var g=r==null?void 0:r[l];if(g===void 0)return{v:_se(r,c)};var p=l,m,v=function(){return m===void 0&&(m=n(g,p)),m},_=g.coordinate,w=l===0||Rk(t,_,v,u,a);w||(l=0,u=s,c+=1),w&&(u=_+t*(v()/2+i),l+=c)},f;c<=o.length;)if(f=d(),f)return f.v;return[]}function pw(t){"@babel/helpers - typeof";return pw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pw(t)}function HX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ro(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HX(Object(n),!0).forEach(function(r){_Xe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _Xe(t,e,n){return e=SXe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SXe(t){var e=CXe(t,"string");return pw(e)=="symbol"?e:String(e)}function CXe(t,e){if(pw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(pw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function EXe(t,e,n,r,i){for(var o=(r||[]).slice(),s=o.length,a=e.start,l=e.end,c=function(f){var h=o[f],g,p=function(){return g===void 0&&(g=n(h,f)),g};if(f===s-1){var m=t*(h.coordinate+t*p()/2-l);o[f]=h=ro(ro({},h),{},{tickCoord:m>0?h.coordinate-m*t:h.coordinate})}else o[f]=h=ro(ro({},h),{},{tickCoord:h.coordinate});var v=Rk(t,h.tickCoord,p,a,l);v&&(l=h.tickCoord-t*(p()/2+i),o[f]=ro(ro({},h),{},{isShow:!0}))},u=s-1;u>=0;u--)c(u);return o}function TXe(t,e,n,r,i,o){var s=(r||[]).slice(),a=s.length,l=e.start,c=e.end;if(o){var u=r[a-1],d=n(u,a-1),f=t*(u.coordinate+t*d/2-c);s[a-1]=u=ro(ro({},u),{},{tickCoord:f>0?u.coordinate-f*t:u.coordinate});var h=Rk(t,u.tickCoord,function(){return d},l,c);h&&(c=u.tickCoord-t*(d/2+i),s[a-1]=ro(ro({},u),{},{isShow:!0}))}for(var g=o?a-1:a,p=function(_){var w=s[_],y,b=function(){return y===void 0&&(y=n(w,_)),y};if(_===0){var x=t*(w.coordinate-t*b()/2-l);s[_]=w=ro(ro({},w),{},{tickCoord:x<0?w.coordinate-x*t:w.coordinate})}else s[_]=w=ro(ro({},w),{},{tickCoord:w.coordinate});var S=Rk(t,w.tickCoord,b,l,c);S&&(l=w.tickCoord+t*(b()/2+i),s[_]=ro(ro({},w),{},{isShow:!0}))},m=0;m<g;m++)p(m);return s}function xj(t,e,n){var r=t.tick,i=t.ticks,o=t.viewBox,s=t.minTickGap,a=t.orientation,l=t.interval,c=t.tickFormatter,u=t.unit,d=t.angle;if(!i||!i.length||!r)return[];if(Qe(l)||bl.isSsr)return xXe(i,typeof l=="number"&&Qe(l)?l:0);var f=[],h=a==="top"||a==="bottom"?"width":"height",g=u&&h==="width"?jb(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},p=function(w,y){var b=Rt(c)?c(w.value,y):w.value;return h==="width"?yXe(jb(b,{fontSize:e,letterSpacing:n}),g,d):jb(b,{fontSize:e,letterSpacing:n})[h]},m=i.length>=2?ko(i[1].coordinate-i[0].coordinate):1,v=bXe(o,m,h);return l==="equidistantPreserveStart"?wXe(m,v,p,i,s):(l==="preserveStart"||l==="preserveStartEnd"?f=TXe(m,v,p,i,s,l==="preserveStartEnd"):f=EXe(m,v,p,i,s),f.filter(function(_){return _.isShow}))}var kXe=["viewBox"],AXe=["viewBox"],MXe=["ticks"];function zv(t){"@babel/helpers - typeof";return zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zv(t)}function Ng(){return Ng=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ng.apply(this,arguments)}function GX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GX(Object(n),!0).forEach(function(r){wj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VD(t,e){if(t==null)return{};var n=IXe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function IXe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function OXe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Cse(r.key),r)}}function RXe(t,e,n){return e&&qX(t.prototype,e),n&&qX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function DXe(t,e,n){return e=Dk(e),PXe(t,Sse()?Reflect.construct(e,n||[],Dk(t).constructor):e.apply(t,n))}function PXe(t,e){if(e&&(zv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NXe(t)}function NXe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Sse=function(){return!!t})()}function Dk(t){return Dk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dk(t)}function $Xe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cF(t,e)}function cF(t,e){return cF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},cF(t,e)}function wj(t,e,n){return e=Cse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cse(t){var e=LXe(t,"string");return zv(e)=="symbol"?e:String(e)}function LXe(t,e){if(zv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(zv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hy=function(t){$Xe(e,t);function e(n){var r;return OXe(this,e),r=DXe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return RXe(e,[{key:"shouldComponentUpdate",value:function(r,i){var o=r.viewBox,s=VD(r,kXe),a=this.props,l=a.viewBox,c=VD(a,AXe);return!Qg(o,l)||!Qg(s,c)||!Qg(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.x,s=i.y,a=i.width,l=i.height,c=i.orientation,u=i.tickSize,d=i.mirror,f=i.tickMargin,h,g,p,m,v,_,w=d?-1:1,y=r.tickSize||u,b=Qe(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":h=g=r.coordinate,m=s+ +!d*l,p=m-w*y,_=p-w*f,v=b;break;case"left":p=m=r.coordinate,g=o+ +!d*a,h=g-w*y,v=h-w*f,_=b;break;case"right":p=m=r.coordinate,g=o+ +d*a,h=g+w*y,v=h+w*f,_=b;break;default:h=g=r.coordinate,m=s+ +d*l,p=m+w*y,_=p+w*f,v=b;break}return{line:{x1:h,y1:p,x2:g,y2:m},tick:{x:v,y:_}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,s;switch(i){case"left":s=o?"start":"end";break;case"right":s=o?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=o?"start":"end";break;default:s=o?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,o=r.y,s=r.width,a=r.height,l=r.orientation,c=r.mirror,u=r.axisLine,d=bo(bo(bo({},wt(this.props,!1)),wt(u,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var f=+(l==="top"&&!c||l==="bottom"&&c);d=bo(bo({},d),{},{x1:i,y1:o+f*a,x2:i+s,y2:o+f*a})}else{var h=+(l==="left"&&!c||l==="right"&&c);d=bo(bo({},d),{},{x1:i+h*s,y1:o,x2:i+h*s,y2:o+a})}return B.createElement("line",Ng({},d,{className:Ze("recharts-cartesian-axis-line",Ps(u,"className"))}))}},{key:"renderTicks",value:function(r,i,o){var s=this,a=this.props,l=a.tickLine,c=a.stroke,u=a.tick,d=a.tickFormatter,f=a.unit,h=xj(bo(bo({},this.props),{},{ticks:r}),i,o),g=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),m=wt(this.props,!1),v=wt(u,!1),_=bo(bo({},m),{},{fill:"none"},wt(l,!1)),w=h.map(function(y,b){var x=s.getTickLineCoord(y),S=x.line,C=x.tick,T=bo(bo(bo(bo({textAnchor:g,verticalAnchor:p},m),{},{stroke:"none",fill:c},v),C),{},{index:b,payload:y,visibleTicksCount:h.length,tickFormatter:d});return B.createElement(Yt,Ng({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},Cp(s.props,y,b)),l&&B.createElement("line",Ng({},_,S,{className:Ze("recharts-cartesian-axis-tick-line",Ps(l,"className"))})),u&&e.renderTickItem(u,T,"".concat(Rt(d)?d(y.value,b):y.value).concat(f||"")))});return B.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var r=this,i=this.props,o=i.axisLine,s=i.width,a=i.height,l=i.ticksGenerator,c=i.className,u=i.hide;if(u)return null;var d=this.props,f=d.ticks,h=VD(d,MXe),g=f;return Rt(l)&&(g=f&&f.length>0?l(this.props):l(h)),s<=0||a<=0||!g||!g.length?null:B.createElement(Yt,{className:Ze("recharts-cartesian-axis",c),ref:function(m){r.layerReference=m}},o&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),Ei.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,o){var s;return B.isValidElement(r)?s=B.cloneElement(r,i):Rt(r)?s=r(i):s=B.createElement(Ep,Ng({},i,{className:"recharts-cartesian-axis-tick-value"}),o),s}}]),e}(R.Component);wj(Hy,"displayName","CartesianAxis");wj(Hy,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var FXe=["x1","y1","x2","y2","key"],BXe=["offset"];function Op(t){"@babel/helpers - typeof";return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Op(t)}function XX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ao(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XX(Object(n),!0).forEach(function(r){UXe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UXe(t,e,n){return e=zXe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zXe(t){var e=jXe(t,"string");return Op(e)=="symbol"?e:String(e)}function jXe(t,e){if(Op(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Op(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jh(){return jh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jh.apply(this,arguments)}function KX(t,e){if(t==null)return{};var n=WXe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function WXe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var VXe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,o=e.y,s=e.width,a=e.height;return B.createElement("rect",{x:i,y:o,width:s,height:a,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Ese(t,e){var n;if(B.isValidElement(t))n=B.cloneElement(t,e);else if(Rt(t))n=t(e);else{var r=e.x1,i=e.y1,o=e.x2,s=e.y2,a=e.key,l=KX(e,FXe),c=wt(l,!1);c.offset;var u=KX(c,BXe);n=B.createElement("line",jh({},u,{x1:r,y1:i,x2:o,y2:s,fill:"none",key:a}))}return n}function HXe(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,o=t.horizontalPoints;if(!i||!o||!o.length)return null;var s=o.map(function(a,l){var c=ao(ao({},t),{},{x1:e,y1:a,x2:e+n,y2:a,key:"line-".concat(l),index:l});return Ese(i,c)});return B.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function GXe(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,o=t.verticalPoints;if(!i||!o||!o.length)return null;var s=o.map(function(a,l){var c=ao(ao({},t),{},{x1:a,y1:e,x2:a,y2:e+n,key:"line-".concat(l),index:l});return Ese(i,c)});return B.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function qXe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,o=t.width,s=t.height,a=t.horizontalPoints,l=t.horizontal,c=l===void 0?!0:l;if(!c||!e||!e.length)return null;var u=a.map(function(f){return Math.round(f+i-i)}).sort(function(f,h){return f-h});i!==u[0]&&u.unshift(0);var d=u.map(function(f,h){var g=!u[h+1],p=g?i+s-f:u[h+1]-f;if(p<=0)return null;var m=h%e.length;return B.createElement("rect",{key:"react-".concat(h),y:f,x:r,height:p,width:o,stroke:"none",fill:e[m],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return B.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function XXe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,o=t.x,s=t.y,a=t.width,l=t.height,c=t.verticalPoints;if(!n||!r||!r.length)return null;var u=c.map(function(f){return Math.round(f+o-o)}).sort(function(f,h){return f-h});o!==u[0]&&u.unshift(0);var d=u.map(function(f,h){var g=!u[h+1],p=g?o+a-f:u[h+1]-f;if(p<=0)return null;var m=h%r.length;return B.createElement("rect",{key:"react-".concat(h),x:f,y:s,width:p,height:l,stroke:"none",fill:r[m],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return B.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var KXe=function(e,n){var r=e.xAxis,i=e.width,o=e.height,s=e.offset;return Toe(xj(ao(ao(ao({},Hy.defaultProps),r),{},{ticks:yu(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),s.left,s.left+s.width,n)},YXe=function(e,n){var r=e.yAxis,i=e.width,o=e.height,s=e.offset;return Toe(xj(ao(ao(ao({},Hy.defaultProps),r),{},{ticks:yu(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),s.top,s.top+s.height,n)},Vm={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function dl(t){var e,n,r,i,o,s,a=vj(),l=yj(),c=J9e(),u=ao(ao({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Vm.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Vm.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Vm.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Vm.horizontalFill,vertical:(o=t.vertical)!==null&&o!==void 0?o:Vm.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:Vm.verticalFill,x:Qe(t.x)?t.x:c.left,y:Qe(t.y)?t.y:c.top,width:Qe(t.width)?t.width:c.width,height:Qe(t.height)?t.height:c.height}),d=u.x,f=u.y,h=u.width,g=u.height,p=u.syncWithTicks,m=u.horizontalValues,v=u.verticalValues,_=Y9e(),w=Q9e();if(!Qe(h)||h<=0||!Qe(g)||g<=0||!Qe(d)||d!==+d||!Qe(f)||f!==+f)return null;var y=u.verticalCoordinatesGenerator||KXe,b=u.horizontalCoordinatesGenerator||YXe,x=u.horizontalPoints,S=u.verticalPoints;if((!x||!x.length)&&Rt(b)){var C=m&&m.length,T=b({yAxis:w?ao(ao({},w),{},{ticks:C?m:w.ticks}):void 0,width:a,height:l,offset:c},C?!0:p);yl(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Op(T),"]")),Array.isArray(T)&&(x=T)}if((!S||!S.length)&&Rt(y)){var E=v&&v.length,k=y({xAxis:_?ao(ao({},_),{},{ticks:E?v:_.ticks}):void 0,width:a,height:l,offset:c},E?!0:p);yl(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Op(k),"]")),Array.isArray(k)&&(S=k)}return B.createElement("g",{className:"recharts-cartesian-grid"},B.createElement(VXe,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height}),B.createElement(HXe,jh({},u,{offset:c,horizontalPoints:x,xAxis:_,yAxis:w})),B.createElement(GXe,jh({},u,{offset:c,verticalPoints:S,xAxis:_,yAxis:w})),B.createElement(qXe,jh({},u,{horizontalPoints:x})),B.createElement(XXe,jh({},u,{verticalPoints:S})))}dl.displayName="CartesianGrid";var QXe=["type","layout","connectNulls","ref"];function jv(t){"@babel/helpers - typeof";return jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jv(t)}function ZXe(t,e){if(t==null)return{};var n=JXe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function JXe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Xb(){return Xb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xb.apply(this,arguments)}function YX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ys(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YX(Object(n),!0).forEach(function(r){rl(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hm(t){return rKe(t)||nKe(t)||tKe(t)||eKe()}function eKe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tKe(t,e){if(t){if(typeof t=="string")return uF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uF(t,e)}}function nKe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rKe(t){if(Array.isArray(t))return uF(t)}function uF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function iKe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kse(r.key),r)}}function oKe(t,e,n){return e&&QX(t.prototype,e),n&&QX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function sKe(t,e,n){return e=Pk(e),aKe(t,Tse()?Reflect.construct(e,n||[],Pk(t).constructor):e.apply(t,n))}function aKe(t,e){if(e&&(jv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xd(t)}function Tse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tse=function(){return!!t})()}function Pk(t){return Pk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Pk(t)}function xd(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lKe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dF(t,e)}function dF(t,e){return dF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},dF(t,e)}function rl(t,e,n){return e=kse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kse(t){var e=cKe(t,"string");return jv(e)=="symbol"?e:String(e)}function cKe(t,e){if(jv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(jv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wv=function(t){lKe(e,t);function e(){var n;iKe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=sKe(this,e,[].concat(i)),rl(xd(n),"state",{isAnimationFinished:!0,totalLength:0}),rl(xd(n),"generateSimpleStrokeDasharray",function(s,a){return"".concat(a,"px ").concat(s-a,"px")}),rl(xd(n),"getStrokeDasharray",function(s,a,l){var c=l.reduce(function(v,_){return v+_});if(!c)return n.generateSimpleStrokeDasharray(a,s);for(var u=Math.floor(s/c),d=s%c,f=a-s,h=[],g=0,p=0;g<l.length;p+=l[g],++g)if(p+l[g]>d){h=[].concat(Hm(l.slice(0,g)),[d-p]);break}var m=h.length%2===0?[0,f]:[f];return[].concat(Hm(e.repeat(l,u)),Hm(h),m).map(function(v){return"".concat(v,"px")}).join(", ")}),rl(xd(n),"id",em("recharts-line-")),rl(xd(n),"pathRef",function(s){n.mainCurve=s}),rl(xd(n),"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),rl(xd(n),"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return oKe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,s=o.points,a=o.xAxis,l=o.yAxis,c=o.layout,u=o.children,d=Ns(u,T_);if(!d)return null;var f=function(p,m){return{x:p.x,y:p.y,value:p.value,errorVal:Or(p.payload,m)}},h={clipPath:r?"url(#clipPath-".concat(i,")"):null};return B.createElement(Yt,h,d.map(function(g){return B.cloneElement(g,{key:"bar-".concat(g.props.dataKey),data:s,xAxis:a,yAxis:l,layout:c,dataPointFormatter:f})}))}},{key:"renderDots",value:function(r,i,o){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var a=this.props,l=a.dot,c=a.points,u=a.dataKey,d=wt(this.props,!1),f=wt(l,!0),h=c.map(function(p,m){var v=ys(ys(ys({key:"dot-".concat(m),r:3},d),f),{},{value:p.value,dataKey:u,cx:p.x,cy:p.y,index:m,payload:p.payload});return e.renderDotItem(l,v)}),g={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return B.createElement(Yt,Xb({className:"recharts-line-dots",key:"dots"},g),h)}},{key:"renderCurveStatically",value:function(r,i,o,s){var a=this.props,l=a.type,c=a.layout,u=a.connectNulls;a.ref;var d=ZXe(a,QXe),f=ys(ys(ys({},wt(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(o,")"):null,points:r},s),{},{type:l,layout:c,connectNulls:u});return B.createElement(np,Xb({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var o=this,s=this.props,a=s.points,l=s.strokeDasharray,c=s.isAnimationActive,u=s.animationBegin,d=s.animationDuration,f=s.animationEasing,h=s.animationId,g=s.animateNewValues,p=s.width,m=s.height,v=this.state,_=v.prevPoints,w=v.totalLength;return B.createElement(El,{begin:u,duration:d,isActive:c,easing:f,from:{t:0},to:{t:1},key:"line-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var b=y.t;if(_){var x=_.length/a.length,S=a.map(function(A,O){var D=Math.floor(O*x);if(_[D]){var P=_[D],N=ai(P.x,A.x),U=ai(P.y,A.y);return ys(ys({},A),{},{x:N(b),y:U(b)})}if(g){var L=ai(p*2,A.x),V=ai(m/2,A.y);return ys(ys({},A),{},{x:L(b),y:V(b)})}return ys(ys({},A),{},{x:A.x,y:A.y})});return o.renderCurveStatically(S,r,i)}var C=ai(0,w),T=C(b),E;if(l){var k="".concat(l).split(/[,\s]+/gim).map(function(A){return parseFloat(A)});E=o.getStrokeDasharray(T,w,k)}else E=o.generateSimpleStrokeDasharray(w,T);return o.renderCurveStatically(a,r,i,{strokeDasharray:E})})}},{key:"renderCurve",value:function(r,i){var o=this.props,s=o.points,a=o.isAnimationActive,l=this.state,c=l.prevPoints,u=l.totalLength;return a&&s&&s.length&&(!c&&u>0||!Ap(c,s))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(s,r,i)}},{key:"render",value:function(){var r,i=this.props,o=i.hide,s=i.dot,a=i.points,l=i.className,c=i.xAxis,u=i.yAxis,d=i.top,f=i.left,h=i.width,g=i.height,p=i.isAnimationActive,m=i.id;if(o||!a||!a.length)return null;var v=this.state.isAnimationFinished,_=a.length===1,w=Ze("recharts-line",l),y=c&&c.allowDataOverflow,b=u&&u.allowDataOverflow,x=y||b,S=Nt(m)?this.id:m,C=(r=wt(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},T=C.r,E=T===void 0?3:T,k=C.strokeWidth,A=k===void 0?2:k,O=gre(s)?s:{},D=O.clipDot,P=D===void 0?!0:D,N=E*2+A;return B.createElement(Yt,{className:w},y||b?B.createElement("defs",null,B.createElement("clipPath",{id:"clipPath-".concat(S)},B.createElement("rect",{x:y?f:f-h/2,y:b?d:d-g/2,width:y?h:h*2,height:b?g:g*2})),!P&&B.createElement("clipPath",{id:"clipPath-dots-".concat(S)},B.createElement("rect",{x:f-N/2,y:d-N/2,width:h+N,height:g+N}))):null,!_&&this.renderCurve(x,S),this.renderErrorBar(x,S),(_||s)&&this.renderDots(x,P,S),(!p||v)&&gc.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var o=r.length%2!==0?[].concat(Hm(r),[0]):r,s=[],a=0;a<i;++a)s=[].concat(Hm(s),Hm(o));return s}},{key:"renderDotItem",value:function(r,i){var o;if(B.isValidElement(r))o=B.cloneElement(r,i);else if(Rt(r))o=r(i);else{var s=Ze("recharts-line-dot",typeof r!="boolean"?r.className:"");o=B.createElement(k_,Xb({},i,{className:s}))}return o}}]),e}(R.PureComponent);rl(Wv,"displayName","Line");rl(Wv,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!bl.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});rl(Wv,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,s=t.dataKey,a=t.bandSize,l=t.displayedData,c=t.offset,u=e.layout,d=l.map(function(f,h){var g=Or(f,s);return u==="horizontal"?{x:fk({axis:n,ticks:i,bandSize:a,entry:f,index:h}),y:Nt(g)?null:r.scale(g),value:g,payload:f}:{x:Nt(g)?null:n.scale(g),y:fk({axis:r,ticks:o,bandSize:a,entry:f,index:h}),value:g,payload:f}});return ys({points:d,layout:u},c)});var uKe=["layout","type","stroke","connectNulls","isRange","ref"],Ase;function Vv(t){"@babel/helpers - typeof";return Vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vv(t)}function dKe(t,e){if(t==null)return{};var n=fKe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fKe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Wh(){return Wh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wh.apply(this,arguments)}function ZX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZX(Object(n),!0).forEach(function(r){ic(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hKe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function JX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ise(r.key),r)}}function pKe(t,e,n){return e&&JX(t.prototype,e),n&&JX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function mKe(t,e,n){return e=Nk(e),gKe(t,Mse()?Reflect.construct(e,n||[],Nk(t).constructor):e.apply(t,n))}function gKe(t,e){if(e&&(Vv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vb(t)}function Mse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mse=function(){return!!t})()}function Nk(t){return Nk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Nk(t)}function vb(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vKe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fF(t,e)}function fF(t,e){return fF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},fF(t,e)}function ic(t,e,n){return e=Ise(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ise(t){var e=yKe(t,"string");return Vv(e)=="symbol"?e:String(e)}function yKe(t,e){if(Vv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Vv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Mr=function(t){vKe(e,t);function e(){var n;hKe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=mKe(this,e,[].concat(i)),ic(vb(n),"state",{isAnimationFinished:!0}),ic(vb(n),"id",em("recharts-area-")),ic(vb(n),"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Rt(s)&&s()}),ic(vb(n),"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Rt(s)&&s()}),n}return pKe(e,[{key:"renderDots",value:function(r,i,o){var s=this.props.isAnimationActive,a=this.state.isAnimationFinished;if(s&&!a)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,f=wt(this.props,!1),h=wt(c,!0),g=u.map(function(m,v){var _=wd(wd(wd({key:"dot-".concat(v),r:3},f),h),{},{index:v,cx:m.x,cy:m.y,dataKey:d,value:m.value,payload:m.payload,points:u});return e.renderDotItem(c,_)}),p={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return B.createElement(Yt,Wh({className:"recharts-area-dots"},p),g)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,o=i.baseLine,s=i.points,a=i.strokeWidth,l=s[0].x,c=s[s.length-1].x,u=r*Math.abs(l-c),d=$d(s.map(function(f){return f.y||0}));return Qe(o)&&typeof o=="number"?d=Math.max(o,d):o&&Array.isArray(o)&&o.length&&(d=Math.max($d(o.map(function(f){return f.y||0})),d)),Qe(d)?B.createElement("rect",{x:l<c?l:l-u,y:0,width:u,height:Math.floor(d+(a?parseInt("".concat(a),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,o=i.baseLine,s=i.points,a=i.strokeWidth,l=s[0].y,c=s[s.length-1].y,u=r*Math.abs(l-c),d=$d(s.map(function(f){return f.x||0}));return Qe(o)&&typeof o=="number"?d=Math.max(o,d):o&&Array.isArray(o)&&o.length&&(d=Math.max($d(o.map(function(f){return f.x||0})),d)),Qe(d)?B.createElement("rect",{x:0,y:l<c?l:l-u,width:d+(a?parseInt("".concat(a),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,o,s){var a=this.props,l=a.layout,c=a.type,u=a.stroke,d=a.connectNulls,f=a.isRange;a.ref;var h=dKe(a,uKe);return B.createElement(Yt,{clipPath:o?"url(#clipPath-".concat(s,")"):null},B.createElement(np,Wh({},wt(h,!0),{points:r,connectNulls:d,type:c,baseLine:i,layout:l,stroke:"none",className:"recharts-area-area"})),u!=="none"&&B.createElement(np,Wh({},wt(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:r})),u!=="none"&&f&&B.createElement(np,Wh({},wt(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var o=this,s=this.props,a=s.points,l=s.baseLine,c=s.isAnimationActive,u=s.animationBegin,d=s.animationDuration,f=s.animationEasing,h=s.animationId,g=this.state,p=g.prevPoints,m=g.prevBaseLine;return B.createElement(El,{begin:u,duration:d,isActive:c,easing:f,from:{t:0},to:{t:1},key:"area-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var _=v.t;if(p){var w=p.length/a.length,y=a.map(function(C,T){var E=Math.floor(T*w);if(p[E]){var k=p[E],A=ai(k.x,C.x),O=ai(k.y,C.y);return wd(wd({},C),{},{x:A(_),y:O(_)})}return C}),b;if(Qe(l)&&typeof l=="number"){var x=ai(m,l);b=x(_)}else if(Nt(l)||Ly(l)){var S=ai(m,0);b=S(_)}else b=l.map(function(C,T){var E=Math.floor(T*w);if(m[E]){var k=m[E],A=ai(k.x,C.x),O=ai(k.y,C.y);return wd(wd({},C),{},{x:A(_),y:O(_)})}return C});return o.renderAreaStatically(y,b,r,i)}return B.createElement(Yt,null,B.createElement("defs",null,B.createElement("clipPath",{id:"animationClipPath-".concat(i)},o.renderClipRect(_))),B.createElement(Yt,{clipPath:"url(#animationClipPath-".concat(i,")")},o.renderAreaStatically(a,l,r,i)))})}},{key:"renderArea",value:function(r,i){var o=this.props,s=o.points,a=o.baseLine,l=o.isAnimationActive,c=this.state,u=c.prevPoints,d=c.prevBaseLine,f=c.totalLength;return l&&s&&s.length&&(!u&&f>0||!Ap(u,s)||!Ap(d,a))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(s,a,r,i)}},{key:"render",value:function(){var r,i=this.props,o=i.hide,s=i.dot,a=i.points,l=i.className,c=i.top,u=i.left,d=i.xAxis,f=i.yAxis,h=i.width,g=i.height,p=i.isAnimationActive,m=i.id;if(o||!a||!a.length)return null;var v=this.state.isAnimationFinished,_=a.length===1,w=Ze("recharts-area",l),y=d&&d.allowDataOverflow,b=f&&f.allowDataOverflow,x=y||b,S=Nt(m)?this.id:m,C=(r=wt(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},T=C.r,E=T===void 0?3:T,k=C.strokeWidth,A=k===void 0?2:k,O=gre(s)?s:{},D=O.clipDot,P=D===void 0?!0:D,N=E*2+A;return B.createElement(Yt,{className:w},y||b?B.createElement("defs",null,B.createElement("clipPath",{id:"clipPath-".concat(S)},B.createElement("rect",{x:y?u:u-h/2,y:b?c:c-g/2,width:y?h:h*2,height:b?g:g*2})),!P&&B.createElement("clipPath",{id:"clipPath-dots-".concat(S)},B.createElement("rect",{x:u-N/2,y:c-N/2,width:h+N,height:g+N}))):null,_?null:this.renderArea(x,S),(s||_)&&this.renderDots(x,P,S),(!p||v)&&gc.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}]),e}(R.PureComponent);Ase=Mr;ic(Mr,"displayName","Area");ic(Mr,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!bl.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ic(Mr,"getBaseValue",function(t,e,n,r){var i=t.layout,o=t.baseValue,s=e.props.baseValue,a=s??o;if(Qe(a)&&typeof a=="number")return a;var l=i==="horizontal"?r:n,c=l.scale.domain();if(l.type==="number"){var u=Math.max(c[0],c[1]),d=Math.min(c[0],c[1]);return a==="dataMin"?d:a==="dataMax"||u<0?u:Math.max(Math.min(c[0],c[1]),0)}return a==="dataMin"?c[0]:a==="dataMax"?c[1]:c[0]});ic(Mr,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,o=t.xAxisTicks,s=t.yAxisTicks,a=t.bandSize,l=t.dataKey,c=t.stackedData,u=t.dataStartIndex,d=t.displayedData,f=t.offset,h=e.layout,g=c&&c.length,p=Ase.getBaseValue(e,n,r,i),m=h==="horizontal",v=!1,_=d.map(function(y,b){var x;g?x=c[u+b]:(x=Or(y,l),Array.isArray(x)?v=!0:x=[p,x]);var S=x[1]==null||g&&Or(y,l)==null;return m?{x:fk({axis:r,ticks:o,bandSize:a,entry:y,index:b}),y:S?null:i.scale(x[1]),value:x,payload:y}:{x:S?null:r.scale(x[1]),y:fk({axis:i,ticks:s,bandSize:a,entry:y,index:b}),value:x,payload:y}}),w;return g||v?w=_.map(function(y){var b=Array.isArray(y.value)?y.value[0]:null;return m?{x:y.x,y:b!=null&&y.y!=null?i.scale(b):null}:{x:b!=null?r.scale(b):null,y:y.y}}):w=m?i.scale(p):r.scale(p),wd({points:_,baseLine:w,layout:h,isRange:v},f)});ic(Mr,"renderDotItem",function(t,e){var n;if(B.isValidElement(t))n=B.cloneElement(t,e);else if(Rt(t))n=t(e);else{var r=Ze("recharts-area-dot",typeof t!="boolean"?t.className:"");n=B.createElement(k_,Wh({},e,{className:r}))}return n});function hF(){return hF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hF.apply(this,arguments)}var Ko=function(e){var n=e.xAxisId,r=vj(),i=yj(),o=xse(n);return o==null?null:B.createElement(Hy,hF({},o,{className:Ze("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(a){return yu(a,!0)}}))};Ko.displayName="XAxis";Ko.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0};function pF(){return pF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pF.apply(this,arguments)}var Yo=function(e){var n=e.yAxisId,r=vj(),i=yj(),o=wse(n);return o==null?null:B.createElement(Hy,pF({},o,{className:Ze("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(a){return yu(a,!0)}}))};Yo.displayName="YAxis";Yo.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1};function eK(t){return _Ke(t)||wKe(t)||xKe(t)||bKe()}function bKe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xKe(t,e){if(t){if(typeof t=="string")return mF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mF(t,e)}}function wKe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _Ke(t){if(Array.isArray(t))return mF(t)}function mF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var gF=function(e,n,r,i,o){var s=Ns(e,bj),a=Ns(e,M_),l=[].concat(eK(s),eK(a)),c=Ns(e,I_),u="".concat(i,"Id"),d=i[0],f=n;if(l.length&&(f=l.reduce(function(p,m){if(m.props[u]===r&&vc(m.props,"extendDomain")&&Qe(m.props[d])){var v=m.props[d];return[Math.min(p[0],v),Math.max(p[1],v)]}return p},f)),c.length){var h="".concat(d,"1"),g="".concat(d,"2");f=c.reduce(function(p,m){if(m.props[u]===r&&vc(m.props,"extendDomain")&&Qe(m.props[h])&&Qe(m.props[g])){var v=m.props[h],_=m.props[g];return[Math.min(p[0],v,_),Math.max(p[1],v,_)]}return p},f)}return o&&o.length&&(f=o.reduce(function(p,m){return Qe(m)?[Math.min(p[0],m),Math.max(p[1],m)]:p},f)),f},Ose={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function o(l,c,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new i(u,d||l,f),g=n?n+c:c;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],h]:l._events[g].push(h):(l._events[g]=h,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,h=d.length,g=new Array(h);f<h;f++)g[f]=d[f].fn;return g},a.prototype.listenerCount=function(c){var u=n?n+c:c,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(c,u,d,f,h,g){var p=n?n+c:c;if(!this._events[p])return!1;var m=this._events[p],v=arguments.length,_,w;if(m.fn){switch(m.once&&this.removeListener(c,m.fn,void 0,!0),v){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,u),!0;case 3:return m.fn.call(m.context,u,d),!0;case 4:return m.fn.call(m.context,u,d,f),!0;case 5:return m.fn.call(m.context,u,d,f,h),!0;case 6:return m.fn.call(m.context,u,d,f,h,g),!0}for(w=1,_=new Array(v-1);w<v;w++)_[w-1]=arguments[w];m.fn.apply(m.context,_)}else{var y=m.length,b;for(w=0;w<y;w++)switch(m[w].once&&this.removeListener(c,m[w].fn,void 0,!0),v){case 1:m[w].fn.call(m[w].context);break;case 2:m[w].fn.call(m[w].context,u);break;case 3:m[w].fn.call(m[w].context,u,d);break;case 4:m[w].fn.call(m[w].context,u,d,f);break;default:if(!_)for(b=1,_=new Array(v-1);b<v;b++)_[b-1]=arguments[b];m[w].fn.apply(m[w].context,_)}}return!0},a.prototype.on=function(c,u,d){return o(this,c,u,d,!1)},a.prototype.once=function(c,u,d){return o(this,c,u,d,!0)},a.prototype.removeListener=function(c,u,d,f){var h=n?n+c:c;if(!this._events[h])return this;if(!u)return s(this,h),this;var g=this._events[h];if(g.fn)g.fn===u&&(!f||g.once)&&(!d||g.context===d)&&s(this,h);else{for(var p=0,m=[],v=g.length;p<v;p++)(g[p].fn!==u||f&&!g[p].once||d&&g[p].context!==d)&&m.push(g[p]);m.length?this._events[h]=m.length===1?m[0]:m:s(this,h)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&s(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(Ose);var SKe=Ose.exports;const CKe=cn(SKe);var HD=new CKe,GD="recharts.syncMouseEvents";function mw(t){"@babel/helpers - typeof";return mw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mw(t)}function EKe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TKe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Rse(r.key),r)}}function kKe(t,e,n){return e&&TKe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qD(t,e,n){return e=Rse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rse(t){var e=AKe(t,"string");return mw(e)=="symbol"?e:String(e)}function AKe(t,e){if(mw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MKe=function(){function t(){EKe(this,t),qD(this,"activeIndex",0),qD(this,"coordinateList",[]),qD(this,"layout","horizontal")}return kKe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,o=i===void 0?null:i,s=n.container,a=s===void 0?null:s,l=n.layout,c=l===void 0?null:l,u=n.offset,d=u===void 0?null:u,f=n.mouseHandlerCallback,h=f===void 0?null:f;this.coordinateList=(r=o??this.coordinateList)!==null&&r!==void 0?r:[],this.container=a??this.container,this.layout=c??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,s=i.y,a=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((n=window)===null||n===void 0?void 0:n.scrollX)||0,u=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=o+l+c,f=s+this.offset.top+a/2+u;this.mouseHandlerCallback({pageX:d,pageY:f})}}}]),t}();function IKe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&Qe(r)&&Qe(i))return!0}return!1}function OKe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function Dse(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,o=t.endAngle,s=Wn(e,n,r,i),a=Wn(e,n,r,o);return{points:[s,a],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}function RKe(t,e,n){var r,i,o,s;if(t==="horizontal")r=e.x,o=r,i=n.top,s=n.top+n.height;else if(t==="vertical")i=e.y,s=i,r=n.left,o=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var a=e.cx,l=e.cy,c=e.innerRadius,u=e.outerRadius,d=e.angle,f=Wn(a,l,c,d),h=Wn(a,l,u,d);r=f.x,i=f.y,o=h.x,s=h.y}else return Dse(e);return[{x:r,y:i},{x:o,y:s}]}function gw(t){"@babel/helpers - typeof";return gw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gw(t)}function tK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tK(Object(n),!0).forEach(function(r){DKe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DKe(t,e,n){return e=PKe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PKe(t){var e=NKe(t,"string");return gw(e)=="symbol"?e:String(e)}function NKe(t,e){if(gw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(gw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Ke(t){var e=t.element,n=t.tooltipEventType,r=t.isActive,i=t.activeCoordinate,o=t.activePayload,s=t.offset,a=t.activeTooltipIndex,l=t.tooltipAxisBandSize,c=t.layout,u=t.chartName;if(!e||!e.props.cursor||!r||!i||u!=="ScatterChart"&&n!=="axis")return null;var d,f=np;if(u==="ScatterChart")d=i,f=M6e;else if(u==="BarChart")d=OKe(c,i,s,l),f=hj;else if(c==="radial"){var h=Dse(i),g=h.cx,p=h.cy,m=h.radius,v=h.startAngle,_=h.endAngle;d={cx:g,cy:p,startAngle:v,endAngle:_,innerRadius:m,outerRadius:m},f=vf}else d={points:RKe(c,i,s)},f=np;var w=xC(xC(xC(xC({stroke:"#ccc",pointerEvents:"none"},s),d),wt(e.props.cursor,!1)),{},{payload:o,payloadIndex:a,className:Ze("recharts-tooltip-cursor",e.props.cursor.className)});return R.isValidElement(e.props.cursor)?R.cloneElement(e.props.cursor,w):R.createElement(f,w)}var LKe=["item"],FKe=["children","className","width","height","style","compact","title","desc"];function Hv(t){"@babel/helpers - typeof";return Hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hv(t)}function Kb(){return Kb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kb.apply(this,arguments)}function nK(t,e){return zKe(t)||UKe(t,e)||Nse(t,e)||BKe()}function BKe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UKe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function zKe(t){if(Array.isArray(t))return t}function rK(t,e){if(t==null)return{};var n=jKe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jKe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function WKe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VKe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$se(r.key),r)}}function HKe(t,e,n){return e&&VKe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function GKe(t,e,n){return e=$k(e),qKe(t,Pse()?Reflect.construct(e,n||[],$k(t).constructor):e.apply(t,n))}function qKe(t,e){if(e&&(Hv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return on(t)}function Pse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Pse=function(){return!!t})()}function $k(t){return $k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$k(t)}function on(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XKe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vF(t,e)}function vF(t,e){return vF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},vF(t,e)}function Gv(t){return QKe(t)||YKe(t)||Nse(t)||KKe()}function KKe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nse(t,e){if(t){if(typeof t=="string")return yF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yF(t,e)}}function YKe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function QKe(t){if(Array.isArray(t))return yF(t)}function yF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function iK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function We(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iK(Object(n),!0).forEach(function(r){Ot(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ot(t,e,n){return e=$se(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $se(t){var e=ZKe(t,"string");return Hv(e)=="symbol"?e:String(e)}function ZKe(t,e){if(Hv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Hv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var JKe={xAxis:["bottom","top"],yAxis:["left","right"]},eYe={width:"100%",height:"100%"},Lse={x:0,y:0};function wC(t){return t}var tYe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},nYe=function(e,n,r,i){var o=n.find(function(u){return u&&u.index===r});if(o){if(e==="horizontal")return{x:o.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:o.coordinate};if(e==="centric"){var s=o.coordinate,a=i.radius;return We(We(We({},i),Wn(i.cx,i.cy,a,s)),{},{angle:s,radius:a})}var l=o.coordinate,c=i.angle;return We(We(We({},i),Wn(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return Lse},xI=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,o=n.dataEndIndex,s=(r??[]).reduce(function(a,l){var c=l.props.data;return c&&c.length?[].concat(Gv(a),Gv(c)):a},[]);return s.length>0?s:e&&e.length&&Qe(i)&&Qe(o)?e.slice(i,o+1):[]};function Fse(t){return t==="number"?[0,"auto"]:void 0}var bF=function(e,n,r,i){var o=e.graphicalItems,s=e.tooltipAxis,a=xI(n,e);return r<0||!o||!o.length||r>=a.length?null:o.reduce(function(l,c){var u,d=(u=c.props.data)!==null&&u!==void 0?u:n;d&&e.dataStartIndex+e.dataEndIndex!==0&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(s.dataKey&&!s.allowDuplicatedCategory){var h=d===void 0?a:d;f=UT(h,s.dataKey,i)}else f=d&&d[r]||a[r];return f?[].concat(Gv(l),[Ooe(c,f)]):l},[])},oK=function(e,n,r,i){var o=i||{x:e.chartX,y:e.chartY},s=tYe(o,r),a=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,u=JVe(s,a,c,l);if(u>=0&&c){var d=c[u]&&c[u].value,f=bF(e,n,u,d),h=nYe(r,a,u,o);return{activeTooltipIndex:u,activeLabel:d,activePayload:f,activeCoordinate:h}}return null},rYe=function(e,n){var r=n.axes,i=n.graphicalItems,o=n.axisType,s=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,d=e.children,f=e.stackOffset,h=Eoe(u,o);return r.reduce(function(g,p){var m,v=p.props,_=v.type,w=v.dataKey,y=v.allowDataOverflow,b=v.allowDuplicatedCategory,x=v.scale,S=v.ticks,C=v.includeHidden,T=p.props[s];if(g[T])return g;var E=xI(e.data,{graphicalItems:i.filter(function(te){return te.props[s]===T}),dataStartIndex:l,dataEndIndex:c}),k=E.length,A,O,D;IKe(p.props.domain,y,_)&&(A=$L(p.props.domain,null,y),h&&(_==="number"||x!=="auto")&&(D=Vb(E,w,"category")));var P=Fse(_);if(!A||A.length===0){var N,U=(N=p.props.domain)!==null&&N!==void 0?N:P;if(w){if(A=Vb(E,w,_),_==="category"&&h){var L=W2e(A);b&&L?(O=A,A=kk(0,k)):b||(A=C9(U,A,p).reduce(function(te,ne){return te.indexOf(ne)>=0?te:[].concat(Gv(te),[ne])},[]))}else if(_==="category")b?A=A.filter(function(te){return te!==""&&!Nt(te)}):A=C9(U,A,p).reduce(function(te,ne){return te.indexOf(ne)>=0||ne===""||Nt(ne)?te:[].concat(Gv(te),[ne])},[]);else if(_==="number"){var V=iHe(E,i.filter(function(te){return te.props[s]===T&&(C||!te.props.hide)}),w,o,u);V&&(A=V)}h&&(_==="number"||x!=="auto")&&(D=Vb(E,w,"category"))}else h?A=kk(0,k):a&&a[T]&&a[T].hasStack&&_==="number"?A=f==="expand"?[0,1]:Ioe(a[T].stackGroups,l,c):A=Coe(E,i.filter(function(te){return te.props[s]===T&&(C||!te.props.hide)}),_,u,!0);if(_==="number")A=gF(d,A,T,o,S),U&&(A=$L(U,A,y));else if(_==="category"&&U){var G=U,Q=A.every(function(te){return G.indexOf(te)>=0});Q&&(A=G)}}return We(We({},g),{},Ot({},T,We(We({},p.props),{},{axisType:o,domain:A,categoricalDomain:D,duplicateDomain:O,originalDomain:(m=p.props.domain)!==null&&m!==void 0?m:P,isCategorical:h,layout:u})))},{})},iYe=function(e,n){var r=n.graphicalItems,i=n.Axis,o=n.axisType,s=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,d=e.children,f=xI(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),h=f.length,g=Eoe(u,o),p=-1;return r.reduce(function(m,v){var _=v.props[s],w=Fse("number");if(!m[_]){p++;var y;return g?y=kk(0,h):a&&a[_]&&a[_].hasStack?(y=Ioe(a[_].stackGroups,l,c),y=gF(d,y,_,o)):(y=$L(w,Coe(f,r.filter(function(b){return b.props[s]===_&&!b.props.hide}),"number",u),i.defaultProps.allowDataOverflow),y=gF(d,y,_,o)),We(We({},m),{},Ot({},_,We(We({axisType:o},i.defaultProps),{},{hide:!0,orientation:Ps(JKe,"".concat(o,".").concat(p%2),null),domain:y,originalDomain:w,isCategorical:g,layout:u})))}return m},{})},oYe=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,o=n.AxisComp,s=n.graphicalItems,a=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.children,d="".concat(i,"Id"),f=Ns(u,o),h={};return f&&f.length?h=rYe(e,{axes:f,graphicalItems:s,axisType:i,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:c}):s&&s.length&&(h=iYe(e,{Axis:o,graphicalItems:s,axisType:i,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:c})),h},sYe=function(e){var n=Id(e),r=yu(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:Iz(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:hk(n,r)}},sK=function(e){var n=e.children,r=e.defaultShowTooltip,i=ws(n,Bv),o=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},aYe=function(e){return!e||!e.length?!1:e.some(function(n){var r=Su(n&&n.type);return r&&r.indexOf("Bar")>=0})},aK=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},lYe=function(e,n){var r=e.props,i=e.graphicalItems,o=e.xAxisMap,s=o===void 0?{}:o,a=e.yAxisMap,l=a===void 0?{}:a,c=r.width,u=r.height,d=r.children,f=r.margin||{},h=ws(d,Bv),g=ws(d,Nu),p=Object.keys(l).reduce(function(b,x){var S=l[x],C=S.orientation;return!S.mirror&&!S.hide?We(We({},b),{},Ot({},C,b[C]+S.width)):b},{left:f.left||0,right:f.right||0}),m=Object.keys(s).reduce(function(b,x){var S=s[x],C=S.orientation;return!S.mirror&&!S.hide?We(We({},b),{},Ot({},C,Ps(b,"".concat(C))+S.height)):b},{top:f.top||0,bottom:f.bottom||0}),v=We(We({},m),p),_=v.bottom;h&&(v.bottom+=h.props.height||Bv.defaultProps.height),g&&n&&(v=nHe(v,i,r,n));var w=c-v.left-v.right,y=u-v.top-v.bottom;return We(We({brushBottom:_},v),{},{width:Math.max(w,0),height:Math.max(y,0)})},cYe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},_j=function(e){var n,r=e.chartName,i=e.GraphicalChild,o=e.defaultTooltipEventType,s=o===void 0?"axis":o,a=e.validateTooltipEventTypes,l=a===void 0?["axis"]:a,c=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,f=e.defaultProps,h=function(m,v){var _=v.graphicalItems,w=v.stackGroups,y=v.offset,b=v.updateId,x=v.dataStartIndex,S=v.dataEndIndex,C=m.barSize,T=m.layout,E=m.barGap,k=m.barCategoryGap,A=m.maxBarSize,O=aK(T),D=O.numericAxisName,P=O.cateAxisName,N=aYe(_),U=[];return _.forEach(function(L,V){var G=xI(m.data,{graphicalItems:[L],dataStartIndex:x,dataEndIndex:S}),Q=L.props,te=Q.dataKey,ne=Q.maxBarSize,ee=L.props["".concat(D,"Id")],re=L.props["".concat(P,"Id")],se={},me=c.reduce(function(H,j){var ie=v["".concat(j.axisType,"Map")],z=L.props["".concat(j.axisType,"Id")];ie&&ie[z]||j.axisType==="zAxis"||Ip();var K=ie[z];return We(We({},H),{},Ot(Ot({},j.axisType,K),"".concat(j.axisType,"Ticks"),yu(K)))},se),Me=me[P],de=me["".concat(P,"Ticks")],Ce=w&&w[ee]&&w[ee].hasStack&&hHe(L,w[ee].stackGroups),Ee=Su(L.type).indexOf("Bar")>=0,q=hk(Me,de),Ve=[],ze=N&&eHe({barSize:C,stackGroups:w,totalSize:cYe(me,P)});if(Ee){var Fe,we,Je=Nt(ne)?A:ne,Z=(Fe=(we=hk(Me,de,!0))!==null&&we!==void 0?we:Je)!==null&&Fe!==void 0?Fe:0;Ve=tHe({barGap:E,barCategoryGap:k,bandSize:Z!==q?Z:q,sizeList:ze[re],maxBarSize:Je}),Z!==q&&(Ve=Ve.map(function(H){return We(We({},H),{},{position:We(We({},H.position),{},{offset:H.position.offset-Z/2})})}))}var ce=L&&L.type&&L.type.getComposedData;ce&&U.push({props:We(We({},ce(We(We({},me),{},{displayedData:G,props:m,dataKey:te,item:L,bandSize:q,barPosition:Ve,offset:y,stackedData:Ce,layout:T,dataStartIndex:x,dataEndIndex:S}))),{},Ot(Ot(Ot({key:L.key||"item-".concat(V)},D,me[D]),P,me[P]),"animationId",b)),childIndex:eRe(L,m.children),item:L})}),U},g=function(m,v){var _=m.props,w=m.dataStartIndex,y=m.dataEndIndex,b=m.updateId;if(!x8({props:_}))return null;var x=_.children,S=_.layout,C=_.stackOffset,T=_.data,E=_.reverseStackOrder,k=aK(S),A=k.numericAxisName,O=k.cateAxisName,D=Ns(x,i),P=dHe(T,D,"".concat(A,"Id"),"".concat(O,"Id"),C,E),N=c.reduce(function(Q,te){var ne="".concat(te.axisType,"Map");return We(We({},Q),{},Ot({},ne,oYe(_,We(We({},te),{},{graphicalItems:D,stackGroups:te.axisType===A&&P,dataStartIndex:w,dataEndIndex:y}))))},{}),U=lYe(We(We({},N),{},{props:_,graphicalItems:D}),v==null?void 0:v.legendBBox);Object.keys(N).forEach(function(Q){N[Q]=d(_,N[Q],U,Q.replace("Map",""),r)});var L=N["".concat(O,"Map")],V=sYe(L),G=h(_,We(We({},N),{},{dataStartIndex:w,dataEndIndex:y,updateId:b,graphicalItems:D,stackGroups:P,offset:U}));return We(We({formattedGraphicalItems:G,graphicalItems:D,offset:U,stackGroups:P},V),N)};return n=function(p){XKe(m,p);function m(v){var _,w,y;return WKe(this,m),y=GKe(this,m,[v]),Ot(on(y),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ot(on(y),"accessibilityManager",new MKe),Ot(on(y),"handleLegendBBoxUpdate",function(b){if(b){var x=y.state,S=x.dataStartIndex,C=x.dataEndIndex,T=x.updateId;y.setState(We({legendBBox:b},g({props:y.props,dataStartIndex:S,dataEndIndex:C,updateId:T},We(We({},y.state),{},{legendBBox:b}))))}}),Ot(on(y),"handleReceiveSyncEvent",function(b,x,S){if(y.props.syncId===b){if(S===y.eventEmitterSymbol&&typeof y.props.syncMethod!="function")return;y.applySyncEvent(x)}}),Ot(on(y),"handleBrushChange",function(b){var x=b.startIndex,S=b.endIndex;if(x!==y.state.dataStartIndex||S!==y.state.dataEndIndex){var C=y.state.updateId;y.setState(function(){return We({dataStartIndex:x,dataEndIndex:S},g({props:y.props,dataStartIndex:x,dataEndIndex:S,updateId:C},y.state))}),y.triggerSyncEvent({dataStartIndex:x,dataEndIndex:S})}}),Ot(on(y),"handleMouseEnter",function(b){var x=y.getMouseInfo(b);if(x){var S=We(We({},x),{},{isTooltipActive:!0});y.setState(S),y.triggerSyncEvent(S);var C=y.props.onMouseEnter;Rt(C)&&C(S,b)}}),Ot(on(y),"triggeredAfterMouseMove",function(b){var x=y.getMouseInfo(b),S=x?We(We({},x),{},{isTooltipActive:!0}):{isTooltipActive:!1};y.setState(S),y.triggerSyncEvent(S);var C=y.props.onMouseMove;Rt(C)&&C(S,b)}),Ot(on(y),"handleItemMouseEnter",function(b){y.setState(function(){return{isTooltipActive:!0,activeItem:b,activePayload:b.tooltipPayload,activeCoordinate:b.tooltipPosition||{x:b.cx,y:b.cy}}})}),Ot(on(y),"handleItemMouseLeave",function(){y.setState(function(){return{isTooltipActive:!1}})}),Ot(on(y),"handleMouseMove",function(b){b.persist(),y.throttleTriggeredAfterMouseMove(b)}),Ot(on(y),"handleMouseLeave",function(b){y.throttleTriggeredAfterMouseMove.cancel();var x={isTooltipActive:!1};y.setState(x),y.triggerSyncEvent(x);var S=y.props.onMouseLeave;Rt(S)&&S(x,b)}),Ot(on(y),"handleOuterEvent",function(b){var x=J2e(b),S=Ps(y.props,"".concat(x));if(x&&Rt(S)){var C,T;/.*touch.*/i.test(x)?T=y.getMouseInfo(b.changedTouches[0]):T=y.getMouseInfo(b),S((C=T)!==null&&C!==void 0?C:{},b)}}),Ot(on(y),"handleClick",function(b){var x=y.getMouseInfo(b);if(x){var S=We(We({},x),{},{isTooltipActive:!0});y.setState(S),y.triggerSyncEvent(S);var C=y.props.onClick;Rt(C)&&C(S,b)}}),Ot(on(y),"handleMouseDown",function(b){var x=y.props.onMouseDown;if(Rt(x)){var S=y.getMouseInfo(b);x(S,b)}}),Ot(on(y),"handleMouseUp",function(b){var x=y.props.onMouseUp;if(Rt(x)){var S=y.getMouseInfo(b);x(S,b)}}),Ot(on(y),"handleTouchMove",function(b){b.changedTouches!=null&&b.changedTouches.length>0&&y.throttleTriggeredAfterMouseMove(b.changedTouches[0])}),Ot(on(y),"handleTouchStart",function(b){b.changedTouches!=null&&b.changedTouches.length>0&&y.handleMouseDown(b.changedTouches[0])}),Ot(on(y),"handleTouchEnd",function(b){b.changedTouches!=null&&b.changedTouches.length>0&&y.handleMouseUp(b.changedTouches[0])}),Ot(on(y),"triggerSyncEvent",function(b){y.props.syncId!==void 0&&HD.emit(GD,y.props.syncId,b,y.eventEmitterSymbol)}),Ot(on(y),"applySyncEvent",function(b){var x=y.props,S=x.layout,C=x.syncMethod,T=y.state.updateId,E=b.dataStartIndex,k=b.dataEndIndex;if(b.dataStartIndex!==void 0||b.dataEndIndex!==void 0)y.setState(We({dataStartIndex:E,dataEndIndex:k},g({props:y.props,dataStartIndex:E,dataEndIndex:k,updateId:T},y.state)));else if(b.activeTooltipIndex!==void 0){var A=b.chartX,O=b.chartY,D=b.activeTooltipIndex,P=y.state,N=P.offset,U=P.tooltipTicks;if(!N)return;if(typeof C=="function")D=C(U,b);else if(C==="value"){D=-1;for(var L=0;L<U.length;L++)if(U[L].value===b.activeLabel){D=L;break}}var V=We(We({},N),{},{x:N.left,y:N.top}),G=Math.min(A,V.x+V.width),Q=Math.min(O,V.y+V.height),te=U[D]&&U[D].value,ne=bF(y.state,y.props.data,D),ee=U[D]?{x:S==="horizontal"?U[D].coordinate:G,y:S==="horizontal"?Q:U[D].coordinate}:Lse;y.setState(We(We({},b),{},{activeLabel:te,activeCoordinate:ee,activePayload:ne,activeTooltipIndex:D}))}else y.setState(b)}),Ot(on(y),"renderCursor",function(b){var x,S=y.state,C=S.isTooltipActive,T=S.activeCoordinate,E=S.activePayload,k=S.offset,A=S.activeTooltipIndex,O=S.tooltipAxisBandSize,D=y.getTooltipEventType(),P=(x=b.props.active)!==null&&x!==void 0?x:C,N=y.props.layout,U=b.key||"_recharts-cursor";return B.createElement($Ke,{key:U,activeCoordinate:T,activePayload:E,activeTooltipIndex:A,chartName:r,element:b,isActive:P,layout:N,offset:k,tooltipAxisBandSize:O,tooltipEventType:D})}),Ot(on(y),"renderPolarAxis",function(b,x,S){var C=Ps(b,"type.axisType"),T=Ps(y.state,"".concat(C,"Map")),E=T&&T[b.props["".concat(C,"Id")]];return R.cloneElement(b,We(We({},E),{},{className:Ze(C,E.className),key:b.key||"".concat(x,"-").concat(S),ticks:yu(E,!0)}))}),Ot(on(y),"renderPolarGrid",function(b){var x=b.props,S=x.radialLines,C=x.polarAngles,T=x.polarRadius,E=y.state,k=E.radiusAxisMap,A=E.angleAxisMap,O=Id(k),D=Id(A),P=D.cx,N=D.cy,U=D.innerRadius,L=D.outerRadius;return R.cloneElement(b,{polarAngles:Array.isArray(C)?C:yu(D,!0).map(function(V){return V.coordinate}),polarRadius:Array.isArray(T)?T:yu(O,!0).map(function(V){return V.coordinate}),cx:P,cy:N,innerRadius:U,outerRadius:L,key:b.key||"polar-grid",radialLines:S})}),Ot(on(y),"renderLegend",function(){var b=y.state.formattedGraphicalItems,x=y.props,S=x.children,C=x.width,T=x.height,E=y.props.margin||{},k=C-(E.left||0)-(E.right||0),A=_oe({children:S,formattedGraphicalItems:b,legendWidth:k,legendContent:u});if(!A)return null;var O=A.item,D=rK(A,LKe);return R.cloneElement(O,We(We({},D),{},{chartWidth:C,chartHeight:T,margin:E,onBBoxUpdate:y.handleLegendBBoxUpdate}))}),Ot(on(y),"renderTooltip",function(){var b,x=y.props,S=x.children,C=x.accessibilityLayer,T=ws(S,si);if(!T)return null;var E=y.state,k=E.isTooltipActive,A=E.activeCoordinate,O=E.activePayload,D=E.activeLabel,P=E.offset,N=(b=T.props.active)!==null&&b!==void 0?b:k;return R.cloneElement(T,{viewBox:We(We({},P),{},{x:P.left,y:P.top}),active:N,label:D,payload:N?O:[],coordinate:A,accessibilityLayer:C})}),Ot(on(y),"renderBrush",function(b){var x=y.props,S=x.margin,C=x.data,T=y.state,E=T.offset,k=T.dataStartIndex,A=T.dataEndIndex,O=T.updateId;return R.cloneElement(b,{key:b.key||"_recharts-brush",onChange:gC(y.handleBrushChange,b.props.onChange),data:C,x:Qe(b.props.x)?b.props.x:E.left,y:Qe(b.props.y)?b.props.y:E.top+E.height+E.brushBottom-(S.bottom||0),width:Qe(b.props.width)?b.props.width:E.width,startIndex:k,endIndex:A,updateId:"brush-".concat(O)})}),Ot(on(y),"renderReferenceElement",function(b,x,S){if(!b)return null;var C=on(y),T=C.clipPathId,E=y.state,k=E.xAxisMap,A=E.yAxisMap,O=E.offset,D=b.props,P=D.xAxisId,N=D.yAxisId;return R.cloneElement(b,{key:b.key||"".concat(x,"-").concat(S),xAxis:k[P],yAxis:A[N],viewBox:{x:O.left,y:O.top,width:O.width,height:O.height},clipPathId:T})}),Ot(on(y),"renderActivePoints",function(b){var x=b.item,S=b.activePoint,C=b.basePoint,T=b.childIndex,E=b.isRange,k=[],A=x.props.key,O=x.item.props,D=O.activeDot,P=O.dataKey,N=We(We({index:T,dataKey:P,cx:S.x,cy:S.y,r:4,fill:uj(x.item),strokeWidth:2,stroke:"#fff",payload:S.payload,value:S.value,key:"".concat(A,"-activePoint-").concat(T)},wt(D,!1)),zT(D));return k.push(m.renderActiveDot(D,N)),C?k.push(m.renderActiveDot(D,We(We({},N),{},{cx:C.x,cy:C.y,key:"".concat(A,"-basePoint-").concat(T)}))):E&&k.push(null),k}),Ot(on(y),"renderGraphicChild",function(b,x,S){var C=y.filterFormatItem(b,x,S);if(!C)return null;var T=y.getTooltipEventType(),E=y.state,k=E.isTooltipActive,A=E.tooltipAxis,O=E.activeTooltipIndex,D=E.activeLabel,P=y.props.children,N=ws(P,si),U=C.props,L=U.points,V=U.isRange,G=U.baseLine,Q=C.item.props,te=Q.activeDot,ne=Q.hide,ee=Q.activeBar,re=Q.activeShape,se=!!(!ne&&k&&N&&(te||ee||re)),me={};T!=="axis"&&N&&N.props.trigger==="click"?me={onClick:gC(y.handleItemMouseEnter,b.props.onClick)}:T!=="axis"&&(me={onMouseLeave:gC(y.handleItemMouseLeave,b.props.onMouseLeave),onMouseEnter:gC(y.handleItemMouseEnter,b.props.onMouseEnter)});var Me=R.cloneElement(b,We(We({},C.props),me));function de(j){return typeof A.dataKey=="function"?A.dataKey(j.payload):null}if(se)if(O>=0){var Ce,Ee;if(A.dataKey&&!A.allowDuplicatedCategory){var q=typeof A.dataKey=="function"?de:"payload.".concat(A.dataKey.toString());Ce=UT(L,q,D),Ee=V&&G&&UT(G,q,D)}else Ce=L==null?void 0:L[O],Ee=V&&G&&G[O];if(re||ee){var Ve=b.props.activeIndex!==void 0?b.props.activeIndex:O;return[R.cloneElement(b,We(We(We({},C.props),me),{},{activeIndex:Ve})),null,null]}if(!Nt(Ce))return[Me].concat(Gv(y.renderActivePoints({item:C,activePoint:Ce,basePoint:Ee,childIndex:O,isRange:V})))}else{var ze,Fe=(ze=y.getItemByXY(y.state.activeCoordinate))!==null&&ze!==void 0?ze:{graphicalItem:Me},we=Fe.graphicalItem,Je=we.item,Z=Je===void 0?b:Je,ce=we.childIndex,H=We(We(We({},C.props),me),{},{activeIndex:ce});return[R.cloneElement(Z,H),null,null]}return V?[Me,null,null]:[Me,null]}),Ot(on(y),"renderCustomized",function(b,x,S){return R.cloneElement(b,We(We({key:"recharts-customized-".concat(S)},y.props),y.state))}),Ot(on(y),"renderMap",{CartesianGrid:{handler:wC,once:!0},ReferenceArea:{handler:y.renderReferenceElement},ReferenceLine:{handler:wC},ReferenceDot:{handler:y.renderReferenceElement},XAxis:{handler:wC},YAxis:{handler:wC},Brush:{handler:y.renderBrush,once:!0},Bar:{handler:y.renderGraphicChild},Line:{handler:y.renderGraphicChild},Area:{handler:y.renderGraphicChild},Radar:{handler:y.renderGraphicChild},RadialBar:{handler:y.renderGraphicChild},Scatter:{handler:y.renderGraphicChild},Pie:{handler:y.renderGraphicChild},Funnel:{handler:y.renderGraphicChild},Tooltip:{handler:y.renderCursor,once:!0},PolarGrid:{handler:y.renderPolarGrid,once:!0},PolarAngleAxis:{handler:y.renderPolarAxis},PolarRadiusAxis:{handler:y.renderPolarAxis},Customized:{handler:y.renderCustomized}}),y.clipPathId="".concat((_=v.id)!==null&&_!==void 0?_:em("recharts"),"-clip"),y.throttleTriggeredAfterMouseMove=xie(y.triggeredAfterMouseMove,(w=v.throttleDelay)!==null&&w!==void 0?w:1e3/60),y.state={},y}return HKe(m,[{key:"componentDidMount",value:function(){var _,w;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var _=this.props,w=_.children,y=_.data,b=_.height,x=_.layout,S=ws(w,si);if(S){var C=S.props.defaultIndex;if(!(typeof C!="number"||C<0||C>this.state.tooltipTicks.length)){var T=this.state.tooltipTicks[C]&&this.state.tooltipTicks[C].value,E=bF(this.state,y,C,T),k=this.state.tooltipTicks[C].coordinate,A=(this.state.offset.top+b)/2,O=x==="horizontal",D=O?{x:k,y:A}:{y:k,x:A},P=this.state.formattedGraphicalItems.find(function(U){var L=U.item;return L.type.name==="Scatter"});P&&(D=We(We({},D),P.props.points[C].tooltipPosition),E=P.props.points[C].tooltipPayload);var N={activeTooltipIndex:C,isTooltipActive:!0,activeLabel:T,activePayload:E,activeCoordinate:D};this.setState(N),this.renderCursor(S),this.accessibilityManager.setIndex(C)}}}},{key:"getSnapshotBeforeUpdate",value:function(_,w){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==w.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==_.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==_.margin){var y,b;this.accessibilityManager.setDetails({offset:{left:(y=this.props.margin.left)!==null&&y!==void 0?y:0,top:(b=this.props.margin.top)!==null&&b!==void 0?b:0}})}return null}},{key:"componentDidUpdate",value:function(_){Q$([ws(_.children,si)],[ws(this.props.children,si)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var _=ws(this.props.children,si);if(_&&typeof _.props.shared=="boolean"){var w=_.props.shared?"axis":"item";return l.indexOf(w)>=0?w:s}return s}},{key:"getMouseInfo",value:function(_){if(!this.container)return null;var w=this.container,y=w.getBoundingClientRect(),b=Cze(y),x={chartX:Math.round(_.pageX-b.left),chartY:Math.round(_.pageY-b.top)},S=y.width/w.offsetWidth||1,C=this.inRange(x.chartX,x.chartY,S);if(!C)return null;var T=this.state,E=T.xAxisMap,k=T.yAxisMap,A=this.getTooltipEventType();if(A!=="axis"&&E&&k){var O=Id(E).scale,D=Id(k).scale,P=O&&O.invert?O.invert(x.chartX):null,N=D&&D.invert?D.invert(x.chartY):null;return We(We({},x),{},{xValue:P,yValue:N})}var U=oK(this.state,this.props.data,this.props.layout,C);return U?We(We({},x),U):null}},{key:"inRange",value:function(_,w){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,b=this.props.layout,x=_/y,S=w/y;if(b==="horizontal"||b==="vertical"){var C=this.state.offset,T=x>=C.left&&x<=C.left+C.width&&S>=C.top&&S<=C.top+C.height;return T?{x,y:S}:null}var E=this.state,k=E.angleAxisMap,A=E.radiusAxisMap;if(k&&A){var O=Id(k);return k9({x,y:S},O)}return null}},{key:"parseEventsOfWrapper",value:function(){var _=this.props.children,w=this.getTooltipEventType(),y=ws(_,si),b={};y&&w==="axis"&&(y.props.trigger==="click"?b={onClick:this.handleClick}:b={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var x=zT(this.props,this.handleOuterEvent);return We(We({},x),b)}},{key:"addListener",value:function(){HD.on(GD,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){HD.removeListener(GD,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(_,w,y){for(var b=this.state.formattedGraphicalItems,x=0,S=b.length;x<S;x++){var C=b[x];if(C.item===_||C.props.key===_.key||w===Su(C.item.type)&&y===C.childIndex)return C}return null}},{key:"renderClipPath",value:function(){var _=this.clipPathId,w=this.state.offset,y=w.left,b=w.top,x=w.height,S=w.width;return B.createElement("defs",null,B.createElement("clipPath",{id:_},B.createElement("rect",{x:y,y:b,height:x,width:S})))}},{key:"getXScales",value:function(){var _=this.state.xAxisMap;return _?Object.entries(_).reduce(function(w,y){var b=nK(y,2),x=b[0],S=b[1];return We(We({},w),{},Ot({},x,S.scale))},{}):null}},{key:"getYScales",value:function(){var _=this.state.yAxisMap;return _?Object.entries(_).reduce(function(w,y){var b=nK(y,2),x=b[0],S=b[1];return We(We({},w),{},Ot({},x,S.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(_){var w;return(w=this.state.xAxisMap)===null||w===void 0||(w=w[_])===null||w===void 0?void 0:w.scale}},{key:"getYScaleByAxisId",value:function(_){var w;return(w=this.state.yAxisMap)===null||w===void 0||(w=w[_])===null||w===void 0?void 0:w.scale}},{key:"getItemByXY",value:function(_){var w=this.state,y=w.formattedGraphicalItems,b=w.activeItem;if(y&&y.length)for(var x=0,S=y.length;x<S;x++){var C=y[x],T=C.props,E=C.item,k=Su(E.type);if(k==="Bar"){var A=(T.data||[]).find(function(N){return c6e(_,N)});if(A)return{graphicalItem:C,payload:A}}else if(k==="RadialBar"){var O=(T.data||[]).find(function(N){return k9(_,N)});if(O)return{graphicalItem:C,payload:O}}else if(vI(C,b)||yI(C,b)||aw(C,b)){var D=Q8e({graphicalItem:C,activeTooltipItem:b,itemData:E.props.data}),P=E.props.activeIndex===void 0?D:E.props.activeIndex;return{graphicalItem:We(We({},C),{},{childIndex:P}),payload:aw(C,b)?E.props.data[D]:C.props.data[D]}}}return null}},{key:"render",value:function(){var _=this;if(!x8(this))return null;var w=this.props,y=w.children,b=w.className,x=w.width,S=w.height,C=w.style,T=w.compact,E=w.title,k=w.desc,A=rK(w,FKe),O=wt(A,!1);if(T)return B.createElement(LX,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},B.createElement(J$,Kb({},O,{width:x,height:S,title:E,desc:k}),this.renderClipPath(),_8(y,this.renderMap)));if(this.props.accessibilityLayer){var D,P;O.tabIndex=(D=this.props.tabIndex)!==null&&D!==void 0?D:0,O.role=(P=this.props.role)!==null&&P!==void 0?P:"application",O.onKeyDown=function(U){_.accessibilityManager.keyboardEvent(U)},O.onFocus=function(){_.accessibilityManager.focus()}}var N=this.parseEventsOfWrapper();return B.createElement(LX,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},B.createElement("div",Kb({className:Ze("recharts-wrapper",b),style:We({position:"relative",cursor:"default",width:x,height:S},C)},N,{ref:function(L){_.container=L}}),B.createElement(J$,Kb({},O,{width:x,height:S,title:E,desc:k,style:eYe}),this.renderClipPath(),_8(y,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}]),m}(R.Component),Ot(n,"displayName",r),Ot(n,"defaultProps",We({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Ot(n,"getDerivedStateFromProps",function(p,m){var v=p.dataKey,_=p.data,w=p.children,y=p.width,b=p.height,x=p.layout,S=p.stackOffset,C=p.margin,T=m.dataStartIndex,E=m.dataEndIndex;if(m.updateId===void 0){var k=sK(p);return We(We(We({},k),{},{updateId:0},g(We(We({props:p},k),{},{updateId:0}),m)),{},{prevDataKey:v,prevData:_,prevWidth:y,prevHeight:b,prevLayout:x,prevStackOffset:S,prevMargin:C,prevChildren:w})}if(v!==m.prevDataKey||_!==m.prevData||y!==m.prevWidth||b!==m.prevHeight||x!==m.prevLayout||S!==m.prevStackOffset||!Qg(C,m.prevMargin)){var A=sK(p),O={chartX:m.chartX,chartY:m.chartY,isTooltipActive:m.isTooltipActive},D=We(We({},oK(m,_,x)),{},{updateId:m.updateId+1}),P=We(We(We({},A),O),D);return We(We(We({},P),g(We({props:p},P),m)),{},{prevDataKey:v,prevData:_,prevWidth:y,prevHeight:b,prevLayout:x,prevStackOffset:S,prevMargin:C,prevChildren:w})}if(!Q$(w,m.prevChildren)){var N,U,L,V,G=ws(w,Bv),Q=G&&(N=(U=G.props)===null||U===void 0?void 0:U.startIndex)!==null&&N!==void 0?N:T,te=G&&(L=(V=G.props)===null||V===void 0?void 0:V.endIndex)!==null&&L!==void 0?L:E,ne=Q!==T||te!==E,ee=!Nt(_),re=ee&&!ne?m.updateId:m.updateId+1;return We(We({updateId:re},g(We(We({props:p},m),{},{updateId:re,dataStartIndex:Q,dataEndIndex:te}),m)),{},{prevChildren:w,dataStartIndex:Q,dataEndIndex:te})}return null}),Ot(n,"renderActiveDot",function(p,m){var v;return R.isValidElement(p)?v=R.cloneElement(p,m):Rt(p)?v=p(m):v=B.createElement(k_,m),B.createElement(Yt,{className:"recharts-active-dot",key:m.key},v)}),n},uYe=_j({chartName:"LineChart",GraphicalChild:Wv,axisComponents:[{axisType:"xAxis",AxisComp:Ko},{axisType:"yAxis",AxisComp:Yo}],formatAxisMap:fse}),Sj=_j({chartName:"PieChart",GraphicalChild:Dl,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:gI},{axisType:"radiusAxis",AxisComp:pI}],formatAxisMap:SHe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),bu=_j({chartName:"AreaChart",GraphicalChild:Mr,axisComponents:[{axisType:"xAxis",AxisComp:Ko},{axisType:"yAxis",AxisComp:Yo}],formatAxisMap:fse});const dYe=[{name:"3030-Base",endpoint:"http://localhost:3030"},{name:"Server-Health",endpoint:"http://localhost:3030/health"},{name:"Price/volume",endpoint:"http://localhost:3030/api1/rune-names"},{name:"ServerLogs",endpoint:"http://localhost:3030api1/log-data"},{name:"RuneNames",endpoint:"http://localhost:3030/api1/rune-names"},{name:"Forecasts",endpoint:"http://localhost:3030/api1/forecast"},{name:"3055-Base",endpoint:"http://localhost:3055/health"},{name:"3055Status",endpoint:"http://localhost:3055/api4/forecastingstatus"},{name:"3055FP",endpoint:"http://localhost:3055/api4/forecastplot"},{name:"BDC-4650",endpoint:"http://localhost:4650/api5/predictions"},{name:"4650H",endpoint:"http://localhost:4650/health"},{name:"5100-T",endpoint:"http://localhost:5100/health"}];class fYe extends R.Component{constructor(n){super(n);He(this,"checkEndpoints",async()=>{const{data:n}=this.state;for(let r=0;r<n.length;r++)try{await Ht.get(n[r].endpoint),this.updateEndpointStatus(r,!0)}catch{this.updateEndpointStatus(r,!1)}});He(this,"updateEndpointStatus",(n,r)=>{this.setState(i=>{const o=[...i.data];return o[n].color=r?"#00C49F":"red",{data:o}},this.updateChart)});He(this,"initThree",()=>{const n=this.mount.current.clientWidth,r=this.mount.current.clientHeight;this.scene=new rz,this.camera=new Ho(55,n/r,.1,1e3),this.camera.position.set(4,0,15),this.camera.lookAt(0,0,5),this.renderer=new nz({antialias:!0}),this.renderer.setSize(n,r),this.mount.current.appendChild(this.renderer.domElement),this.chartGroup=new Fh,this.scene.add(this.chartGroup);const i=new oz(16777215,.5);this.scene.add(i);const o=new iz(16777215,1);o.position.set(5,5,5).normalize(),this.scene.add(o),this.createChart(),this.handleResize=this.handleResize.bind(this),window.addEventListener("resize",this.handleResize),this.animate()});He(this,"handleResize",()=>{const n=this.mount.current.clientWidth,r=this.mount.current.clientHeight;this.renderer.setSize(n,r),this.camera.aspect=n/r,this.camera.updateProjectionMatrix()});He(this,"createChart",()=>{const{data:s}=this.state,a=s.reduce((c,u)=>c+u.value,0);let l=0;s.forEach(c=>{const u=c.value/a*Math.PI*2,d=new b_(5,1.5,8,64,u),f=new v_({color:c.color}),h=new ba(d,f);h.rotation.x=Math.PI/2,h.position.set(0,0,0),h.rotation.y=l,this.chartGroup.add(h),l+=u})});He(this,"updateChart",()=>{for(;this.chartGroup.children.length;)this.chartGroup.remove(this.chartGroup.children[0]);this.createChart()});He(this,"animate",()=>{this.frameId=requestAnimationFrame(this.animate),this.chartGroup.rotation.x-=0,this.chartGroup.rotation.y+=0,this.chartGroup.rotation.z-=.001,this.renderer.render(this.scene,this.camera)});this.state={data:dYe.map((r,i)=>({name:r.name,value:1,color:"#0088ff",endpoint:r.endpoint,key:i}))},this.mount=B.createRef()}componentDidMount(){this.initThree(),this.checkEndpoints(),this.interval=setInterval(this.checkEndpoints,15e3)}componentWillUnmount(){clearInterval(this.interval),window.removeEventListener("resize",this.handleResize),cancelAnimationFrame(this.frameId),this.mount.current.removeChild(this.renderer.domElement)}render(){return I.jsx(I.Fragment,{children:I.jsx("div",{ref:this.mount,style:{width:"1111px",height:"675px"}})})}}const hYe=[{name:"3055-Base",endpoint:"http://localhost:3055/health"},{name:"3055ForecastStatus",endpoint:"http://localhost:3055/api4/forecastingstatus"},{name:"3055FPLOT",endpoint:"http://localhost:3055/api4/forecastplot"},{name:"BDC-4650",endpoint:"http://localhost:4560/api5/predictions"},{name:"RuneForecastGeneratior",endpoint:"http://localhost:4650/health"},{name:"NeuralNetTraining",endpoint:"http://localhost:5100/health"}];class pYe extends R.Component{constructor(n){super(n);He(this,"checkEndpoints",async()=>{const{data:n}=this.state;for(let r=0;r<n.length;r++)try{await Ht.get(n[r].endpoint),this.updateEndpointStatus(r,!0)}catch{this.updateEndpointStatus(r,!1)}});He(this,"updateEndpointStatus",(n,r)=>{this.setState(i=>{const o=[...i.data];return o[n].color=r?"#00C49F":"#FF8042",{data:o}},this.updateChart)});He(this,"initThree",()=>{const n=this.mount.current.clientWidth,r=this.mount.current.clientHeight;this.scene=new rz,this.camera=new Ho(75,n/r,.1,1e3),this.camera.position.set(0,0,20),this.camera.lookAt(0,0,0),this.renderer=new nz({antialias:!0}),this.renderer.setSize(n,r),this.mount.current.appendChild(this.renderer.domElement),this.chartGroup=new Fh,this.scene.add(this.chartGroup);const i=new oz(16777215,.5);this.scene.add(i);const o=new iz(16777215,1);o.position.set(5,5,5).normalize(),this.scene.add(o),this.createChart(),this.handleResize=this.handleResize.bind(this),window.addEventListener("resize",this.handleResize),this.animate()});He(this,"handleResize",()=>{const n=this.mount.current.clientWidth,r=this.mount.current.clientHeight;this.renderer.setSize(n,r),this.camera.aspect=n/r,this.camera.updateProjectionMatrix()});He(this,"createChart",()=>{const{data:s}=this.state,a=s.reduce((c,u)=>c+u.value,0);let l=0;s.forEach(c=>{const u=c.value/a*Math.PI*2,d=new b_(5,1.5,8,64,u),f=new v_({color:c.color}),h=new ba(d,f);h.rotation.x=Math.PI/2,h.position.set(0,0,0),h.rotation.y=l,this.chartGroup.add(h),l+=u})});He(this,"updateChart",()=>{for(;this.chartGroup.children.length;)this.chartGroup.remove(this.chartGroup.children[0]);this.createChart()});He(this,"animate",()=>{this.frameId=requestAnimationFrame(this.animate),this.chartGroup.rotation.z+=.001,this.renderer.render(this.scene,this.camera)});this.state={data:hYe.map((r,i)=>({name:r.name,value:1,color:"#8884d8",endpoint:r.endpoint,key:i}))},this.mount=B.createRef()}componentDidMount(){this.initThree(),this.checkEndpoints(),this.interval=setInterval(this.checkEndpoints,15e3)}componentWillUnmount(){clearInterval(this.interval),window.removeEventListener("resize",this.handleResize),cancelAnimationFrame(this.frameId),this.mount.current.removeChild(this.renderer.domElement)}render(){return I.jsx(I.Fragment,{children:I.jsx("div",{className:"treechart",children:I.jsx("div",{ref:this.mount,style:{width:"320px",height:"400px"}})})})}}const mYe=[{name:"5080-Base",endpoint:"http://localhost:5080/health"},{name:"3055-Base",endpoint:"http://localhost:3055/health"},{name:"3055Status",endpoint:"http://localhost:3055/api4/forecastingstatus"},{name:"3055FP",endpoint:"http://localhost:3055/api4/forecastplot"},{name:"BDC-4650",endpoint:"http://localhost:4650/api5/predictions"},{name:"4650H",endpoint:"http://localhost:4650/health"},{name:"5100-Training",endpoint:"http://localhost:5100/health"}],gYe=t=>{const e=Math.PI/180,{cx:n,cy:r,midAngle:i,innerRadius:o,outerRadius:s,startAngle:a,endAngle:l,fill:c,payload:u,percent:d,value:f}=t,h=Math.sin(-e*i),g=Math.cos(-e*i),p=n+(s+10)*g,m=r+(s+10)*h,v=n+(s+30)*g,_=r+(s+30)*h,w=v+(g>=0?1:-1)*22,y=_,b=g>=0?"start":"end";return I.jsx(I.Fragment,{children:I.jsxs("g",{children:[I.jsx("text",{x:n,y:r,dy:8,textAnchor:"middle",fill:c,children:u.name}),I.jsx(vf,{cx:n,cy:r,innerRadius:o,outerRadius:s,startAngle:a,endAngle:l,fill:c}),I.jsx(vf,{cx:n,cy:r,startAngle:a,endAngle:l,innerRadius:s+6,outerRadius:s+10,fill:c}),I.jsx("path",{d:`M${p},${m}L${v},${_}L${w},${y}`,stroke:c,fill:"none"}),I.jsx("circle",{cx:w,cy:y,r:2,fill:c,stroke:"none"}),I.jsx("text",{x:w+(g>=0?1:-1)*12,y,textAnchor:b,fill:"#333",children:`PV ${f}`}),I.jsx("text",{x:w+(g>=0?1:-1)*12,y,dy:18,textAnchor:b,fill:"#999",children:`(Rate ${(d*100).toFixed(2)}%)`})]})})};class wI extends R.PureComponent{constructor(){super(...arguments);He(this,"state",{activeIndex:0,data:mYe.map((n,r)=>({name:n.name,value:1,fill:"#8884d8",endpoint:n.endpoint,key:r}))});He(this,"checkEndpoints",async()=>{const{data:n}=this.state;for(let r=0;r<n.length;r++)try{await Ht.get(n[r].endpoint),this.updateEndpointStatus(r,!0)}catch{this.updateEndpointStatus(r,!1)}});He(this,"updateEndpointStatus",(n,r)=>{this.setState(i=>{const o=[...i.data];return o[n].fill=r?"#00C49F":"#FF8042",{data:o}})});He(this,"onPieEnter",(n,r)=>{this.setState({activeIndex:r})})}componentDidMount(){this.checkEndpoints(),this.interval=setInterval(this.checkEndpoints,15e3)}componentWillUnmount(){clearInterval(this.interval)}render(){return I.jsx(I.Fragment,{children:I.jsx(As,{width:"100%",height:"100%",children:I.jsx(Sj,{width:200,height:200,children:I.jsx(Dl,{activeIndex:this.state.activeIndex,activeShape:gYe,data:this.state.data,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,fill:"#8884d8",dataKey:"value",onMouseEnter:this.onPieEnter})})})})}}He(wI,"demoUrl","https://codesandbox.io/s/pie-chart-with-customized-active-shape-y93si");const vYe=[{name:"3030-Base",endpoint:"http://localhost:3030"},{name:"Server-Health",endpoint:"http://localhost:3030/health"},{name:"Price/volume",endpoint:"http://localhost:3030/api1/rune-names"},{name:"ServerLogs",endpoint:"http://localhost:3030api1/log-data"},{name:"RuneNames",endpoint:"http://localhost:3030/api1/rune-names"},{name:"Forecasts",endpoint:"http://localhost:3030/api1/forecast"}],yYe=t=>{const e=Math.PI/180,{cx:n,cy:r,midAngle:i,innerRadius:o,outerRadius:s,startAngle:a,endAngle:l,fill:c,payload:u,percent:d,value:f}=t,h=Math.sin(-e*i),g=Math.cos(-e*i),p=n+(s+10)*g,m=r+(s+10)*h,v=n+(s+30)*g,_=r+(s+30)*h,w=v+(g>=0?1:-1)*22,y=_,b=g>=0?"start":"end";return I.jsx(I.Fragment,{children:I.jsxs("g",{children:[I.jsx("text",{x:n,y:r,dy:8,textAnchor:"middle",fill:c,children:u.name}),I.jsx(vf,{cx:n,cy:r,innerRadius:o,outerRadius:s,startAngle:a,endAngle:l,fill:c}),I.jsx(vf,{cx:n,cy:r,startAngle:a,endAngle:l,innerRadius:s+6,outerRadius:s+10,fill:c}),I.jsx("path",{d:`M${p},${m}L${v},${_}L${w},${y}`,stroke:c,fill:"none"}),I.jsx("circle",{cx:w,cy:y,r:2,fill:c,stroke:"none"}),I.jsx("text",{x:w+(g>=0?1:-1)*12,y,textAnchor:b,fill:"#333",children:`PV ${f}`}),I.jsx("text",{x:w+(g>=0?1:-1)*12,y,dy:18,textAnchor:b,fill:"#999",children:`(Rate ${(d*100).toFixed(2)}%)`})]})})};class _I extends R.PureComponent{constructor(){super(...arguments);He(this,"state",{activeIndex:0,data:vYe.map((n,r)=>({name:n.name,value:1,fill:"#8884d8",endpoint:n.endpoint,key:r}))});He(this,"checkEndpoints",async()=>{const{data:n}=this.state;for(let r=0;r<n.length;r++)try{await Ht.head(n[r].endpoint),this.updateEndpointStatus(r,!0)}catch{this.updateEndpointStatus(r,!1)}});He(this,"updateEndpointStatus",(n,r)=>{this.setState(i=>{const o=[...i.data];return o[n].fill=r?"#00C49F":"red",{data:o}})});He(this,"onPieEnter",(n,r)=>{this.setState({activeIndex:r})})}componentDidMount(){this.checkEndpoints(),this.interval=setInterval(this.checkEndpoints,15e3)}componentWillUnmount(){clearInterval(this.interval)}render(){return I.jsx(I.Fragment,{children:I.jsx(As,{width:"100%",height:"100%",children:I.jsx(Sj,{width:200,height:200,children:I.jsx(Dl,{activeIndex:this.state.activeIndex,activeShape:yYe,data:this.state.data,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,fill:"#8884d8",dataKey:"value",onMouseEnter:this.onPieEnter})})})})}}He(_I,"demoUrl","https://codesandbox.io/s/pie-chart-with-customized-active-shape-y93si");function vw(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}const bYe=Object.freeze(Object.defineProperty({__proto__:null,default:vw},Symbol.toStringTag,{value:"Module"}));function Bse(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var xYe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,wYe=Bse(function(t){return xYe.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),_Ye=!1;function SYe(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function CYe(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var EYe=function(){function t(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!_Ye:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(CYe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=SYe(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t}(),no="-ms-",Lk="-moz-",gn="-webkit-",Use="comm",Cj="rule",Ej="decl",TYe="@import",zse="@keyframes",kYe="@layer",AYe=Math.abs,SI=String.fromCharCode,MYe=Object.assign;function IYe(t,e){return zi(t,0)^45?(((e<<2^zi(t,0))<<2^zi(t,1))<<2^zi(t,2))<<2^zi(t,3):0}function jse(t){return t.trim()}function OYe(t,e){return(t=e.exec(t))?t[0]:t}function vn(t,e,n){return t.replace(e,n)}function xF(t,e){return t.indexOf(e)}function zi(t,e){return t.charCodeAt(e)|0}function yw(t,e,n){return t.slice(e,n)}function Hl(t){return t.length}function Tj(t){return t.length}function _C(t,e){return e.push(t),t}function RYe(t,e){return t.map(e).join("")}var CI=1,qv=1,Wse=0,ls=0,Wr=0,Gy="";function EI(t,e,n,r,i,o,s){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:CI,column:qv,length:s,return:""}}function G0(t,e){return MYe(EI("",null,null,"",null,null,0),t,{length:-t.length},e)}function DYe(){return Wr}function PYe(){return Wr=ls>0?zi(Gy,--ls):0,qv--,Wr===10&&(qv=1,CI--),Wr}function $s(){return Wr=ls<Wse?zi(Gy,ls++):0,qv++,Wr===10&&(qv=1,CI++),Wr}function yc(){return zi(Gy,ls)}function ME(){return ls}function O_(t,e){return yw(Gy,t,e)}function bw(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Vse(t){return CI=qv=1,Wse=Hl(Gy=t),ls=0,[]}function Hse(t){return Gy="",t}function IE(t){return jse(O_(ls-1,wF(t===91?t+2:t===40?t+1:t)))}function NYe(t){for(;(Wr=yc())&&Wr<33;)$s();return bw(t)>2||bw(Wr)>3?"":" "}function $Ye(t,e){for(;--e&&$s()&&!(Wr<48||Wr>102||Wr>57&&Wr<65||Wr>70&&Wr<97););return O_(t,ME()+(e<6&&yc()==32&&$s()==32))}function wF(t){for(;$s();)switch(Wr){case t:return ls;case 34:case 39:t!==34&&t!==39&&wF(Wr);break;case 40:t===41&&wF(t);break;case 92:$s();break}return ls}function LYe(t,e){for(;$s()&&t+Wr!==57;)if(t+Wr===84&&yc()===47)break;return"/*"+O_(e,ls-1)+"*"+SI(t===47?t:$s())}function FYe(t){for(;!bw(yc());)$s();return O_(t,ls)}function BYe(t){return Hse(OE("",null,null,null,[""],t=Vse(t),0,[0],t))}function OE(t,e,n,r,i,o,s,a,l){for(var c=0,u=0,d=s,f=0,h=0,g=0,p=1,m=1,v=1,_=0,w="",y=i,b=o,x=r,S=w;m;)switch(g=_,_=$s()){case 40:if(g!=108&&zi(S,d-1)==58){xF(S+=vn(IE(_),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:S+=IE(_);break;case 9:case 10:case 13:case 32:S+=NYe(g);break;case 92:S+=$Ye(ME()-1,7);continue;case 47:switch(yc()){case 42:case 47:_C(UYe(LYe($s(),ME()),e,n),l);break;default:S+="/"}break;case 123*p:a[c++]=Hl(S)*v;case 125*p:case 59:case 0:switch(_){case 0:case 125:m=0;case 59+u:v==-1&&(S=vn(S,/\f/g,"")),h>0&&Hl(S)-d&&_C(h>32?cK(S+";",r,n,d-1):cK(vn(S," ","")+";",r,n,d-2),l);break;case 59:S+=";";default:if(_C(x=lK(S,e,n,c,u,i,a,w,y=[],b=[],d),o),_===123)if(u===0)OE(S,e,x,x,y,o,d,a,b);else switch(f===99&&zi(S,3)===110?100:f){case 100:case 108:case 109:case 115:OE(t,x,x,r&&_C(lK(t,x,x,0,0,i,a,w,i,y=[],d),b),i,b,d,a,r?y:b);break;default:OE(S,x,x,x,[""],b,0,a,b)}}c=u=h=0,p=v=1,w=S="",d=s;break;case 58:d=1+Hl(S),h=g;default:if(p<1){if(_==123)--p;else if(_==125&&p++==0&&PYe()==125)continue}switch(S+=SI(_),_*p){case 38:v=u>0?1:(S+="\f",-1);break;case 44:a[c++]=(Hl(S)-1)*v,v=1;break;case 64:yc()===45&&(S+=IE($s())),f=yc(),u=d=Hl(w=S+=FYe(ME())),_++;break;case 45:g===45&&Hl(S)==2&&(p=0)}}return o}function lK(t,e,n,r,i,o,s,a,l,c,u){for(var d=i-1,f=i===0?o:[""],h=Tj(f),g=0,p=0,m=0;g<r;++g)for(var v=0,_=yw(t,d+1,d=AYe(p=s[g])),w=t;v<h;++v)(w=jse(p>0?f[v]+" "+_:vn(_,/&\f/g,f[v])))&&(l[m++]=w);return EI(t,e,n,i===0?Cj:a,l,c,u)}function UYe(t,e,n){return EI(t,e,n,Use,SI(DYe()),yw(t,2,-2),0)}function cK(t,e,n,r){return EI(t,e,n,Ej,yw(t,0,r),yw(t,r+1,-1),r)}function ev(t,e){for(var n="",r=Tj(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function zYe(t,e,n,r){switch(t.type){case kYe:if(t.children.length)break;case TYe:case Ej:return t.return=t.return||t.value;case Use:return"";case zse:return t.return=t.value+"{"+ev(t.children,r)+"}";case Cj:t.value=t.props.join(",")}return Hl(n=ev(t.children,r))?t.return=t.value+"{"+n+"}":""}function jYe(t){var e=Tj(t);return function(n,r,i,o){for(var s="",a=0;a<e;a++)s+=t[a](n,r,i,o)||"";return s}}function WYe(t){return function(e){e.root||(e=e.return)&&t(e)}}var VYe=function(e,n,r){for(var i=0,o=0;i=o,o=yc(),i===38&&o===12&&(n[r]=1),!bw(o);)$s();return O_(e,ls)},HYe=function(e,n){var r=-1,i=44;do switch(bw(i)){case 0:i===38&&yc()===12&&(n[r]=1),e[r]+=VYe(ls-1,n,r);break;case 2:e[r]+=IE(i);break;case 4:if(i===44){e[++r]=yc()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=SI(i)}while(i=$s());return e},GYe=function(e,n){return Hse(HYe(Vse(e),n))},uK=new WeakMap,qYe=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!uK.get(r))&&!i){uK.set(e,!0);for(var o=[],s=GYe(n,o),a=r.props,l=0,c=0;l<s.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=o[l]?s[l].replace(/&\f/g,a[u]):a[u]+" "+s[l]}}},XYe=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function Gse(t,e){switch(IYe(t,e)){case 5103:return gn+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return gn+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return gn+t+Lk+t+no+t+t;case 6828:case 4268:return gn+t+no+t+t;case 6165:return gn+t+no+"flex-"+t+t;case 5187:return gn+t+vn(t,/(\w+).+(:[^]+)/,gn+"box-$1$2"+no+"flex-$1$2")+t;case 5443:return gn+t+no+"flex-item-"+vn(t,/flex-|-self/,"")+t;case 4675:return gn+t+no+"flex-line-pack"+vn(t,/align-content|flex-|-self/,"")+t;case 5548:return gn+t+no+vn(t,"shrink","negative")+t;case 5292:return gn+t+no+vn(t,"basis","preferred-size")+t;case 6060:return gn+"box-"+vn(t,"-grow","")+gn+t+no+vn(t,"grow","positive")+t;case 4554:return gn+vn(t,/([^-])(transform)/g,"$1"+gn+"$2")+t;case 6187:return vn(vn(vn(t,/(zoom-|grab)/,gn+"$1"),/(image-set)/,gn+"$1"),t,"")+t;case 5495:case 3959:return vn(t,/(image-set\([^]*)/,gn+"$1$`$1");case 4968:return vn(vn(t,/(.+:)(flex-)?(.*)/,gn+"box-pack:$3"+no+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+gn+t+t;case 4095:case 3583:case 4068:case 2532:return vn(t,/(.+)-inline(.+)/,gn+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Hl(t)-1-e>6)switch(zi(t,e+1)){case 109:if(zi(t,e+4)!==45)break;case 102:return vn(t,/(.+:)(.+)-([^]+)/,"$1"+gn+"$2-$3$1"+Lk+(zi(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~xF(t,"stretch")?Gse(vn(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(zi(t,e+1)!==115)break;case 6444:switch(zi(t,Hl(t)-3-(~xF(t,"!important")&&10))){case 107:return vn(t,":",":"+gn)+t;case 101:return vn(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+gn+(zi(t,14)===45?"inline-":"")+"box$3$1"+gn+"$2$3$1"+no+"$2box$3")+t}break;case 5936:switch(zi(t,e+11)){case 114:return gn+t+no+vn(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return gn+t+no+vn(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return gn+t+no+vn(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return gn+t+no+t+t}return t}var KYe=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case Ej:e.return=Gse(e.value,e.length);break;case zse:return ev([G0(e,{value:vn(e.value,"@","@"+gn)})],i);case Cj:if(e.length)return RYe(e.props,function(o){switch(OYe(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ev([G0(e,{props:[vn(o,/:(read-\w+)/,":"+Lk+"$1")]})],i);case"::placeholder":return ev([G0(e,{props:[vn(o,/:(plac\w+)/,":"+gn+"input-$1")]}),G0(e,{props:[vn(o,/:(plac\w+)/,":"+Lk+"$1")]}),G0(e,{props:[vn(o,/:(plac\w+)/,no+"input-$1")]})],i)}return""})}},YYe=[KYe],qse=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(p){var m=p.getAttribute("data-emotion");m.indexOf(" ")!==-1&&(document.head.appendChild(p),p.setAttribute("data-s",""))})}var i=e.stylisPlugins||YYe,o={},s,a=[];s=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(p){for(var m=p.getAttribute("data-emotion").split(" "),v=1;v<m.length;v++)o[m[v]]=!0;a.push(p)});var l,c=[qYe,XYe];{var u,d=[zYe,WYe(function(p){u.insert(p)})],f=jYe(c.concat(i,d)),h=function(m){return ev(BYe(m),f)};l=function(m,v,_,w){u=_,h(m?m+"{"+v.styles+"}":v.styles),w&&(g.inserted[v.name]=!0)}}var g={key:n,sheet:new EYe({key:n,container:s,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:l};return g.sheet.hydrate(a),g},Xse={exports:{}},Dn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oi=typeof Symbol=="function"&&Symbol.for,kj=Oi?Symbol.for("react.element"):60103,Aj=Oi?Symbol.for("react.portal"):60106,TI=Oi?Symbol.for("react.fragment"):60107,kI=Oi?Symbol.for("react.strict_mode"):60108,AI=Oi?Symbol.for("react.profiler"):60114,MI=Oi?Symbol.for("react.provider"):60109,II=Oi?Symbol.for("react.context"):60110,Mj=Oi?Symbol.for("react.async_mode"):60111,OI=Oi?Symbol.for("react.concurrent_mode"):60111,RI=Oi?Symbol.for("react.forward_ref"):60112,DI=Oi?Symbol.for("react.suspense"):60113,QYe=Oi?Symbol.for("react.suspense_list"):60120,PI=Oi?Symbol.for("react.memo"):60115,NI=Oi?Symbol.for("react.lazy"):60116,ZYe=Oi?Symbol.for("react.block"):60121,JYe=Oi?Symbol.for("react.fundamental"):60117,e7e=Oi?Symbol.for("react.responder"):60118,t7e=Oi?Symbol.for("react.scope"):60119;function qs(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case kj:switch(t=t.type,t){case Mj:case OI:case TI:case AI:case kI:case DI:return t;default:switch(t=t&&t.$$typeof,t){case II:case RI:case NI:case PI:case MI:return t;default:return e}}case Aj:return e}}}function Kse(t){return qs(t)===OI}Dn.AsyncMode=Mj;Dn.ConcurrentMode=OI;Dn.ContextConsumer=II;Dn.ContextProvider=MI;Dn.Element=kj;Dn.ForwardRef=RI;Dn.Fragment=TI;Dn.Lazy=NI;Dn.Memo=PI;Dn.Portal=Aj;Dn.Profiler=AI;Dn.StrictMode=kI;Dn.Suspense=DI;Dn.isAsyncMode=function(t){return Kse(t)||qs(t)===Mj};Dn.isConcurrentMode=Kse;Dn.isContextConsumer=function(t){return qs(t)===II};Dn.isContextProvider=function(t){return qs(t)===MI};Dn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===kj};Dn.isForwardRef=function(t){return qs(t)===RI};Dn.isFragment=function(t){return qs(t)===TI};Dn.isLazy=function(t){return qs(t)===NI};Dn.isMemo=function(t){return qs(t)===PI};Dn.isPortal=function(t){return qs(t)===Aj};Dn.isProfiler=function(t){return qs(t)===AI};Dn.isStrictMode=function(t){return qs(t)===kI};Dn.isSuspense=function(t){return qs(t)===DI};Dn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===TI||t===OI||t===AI||t===kI||t===DI||t===QYe||typeof t=="object"&&t!==null&&(t.$$typeof===NI||t.$$typeof===PI||t.$$typeof===MI||t.$$typeof===II||t.$$typeof===RI||t.$$typeof===JYe||t.$$typeof===e7e||t.$$typeof===t7e||t.$$typeof===ZYe)};Dn.typeOf=qs;Xse.exports=Dn;var n7e=Xse.exports,Yse=n7e,r7e={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i7e={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Qse={};Qse[Yse.ForwardRef]=r7e;Qse[Yse.Memo]=i7e;var o7e=!0;function s7e(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):r+=i+" "}),r}var Zse=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||o7e===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},Jse=function(e,n,r){Zse(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var o=n;do e.insert(n===o?"."+i:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function a7e(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var l7e={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},c7e=!1,u7e=/[A-Z]|^ms/g,d7e=/_EMO_([^_]+?)_([^]*?)_EMO_/g,eae=function(e){return e.charCodeAt(1)===45},dK=function(e){return e!=null&&typeof e!="boolean"},XD=Bse(function(t){return eae(t)?t:t.replace(u7e,"-$&").toLowerCase()}),fK=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(d7e,function(r,i,o){return Gl={name:i,styles:o,next:Gl},i})}return l7e[e]!==1&&!eae(e)&&typeof n=="number"&&n!==0?n+"px":n},f7e="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function xw(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Gl={name:i.name,styles:i.styles,next:Gl},i.name;var o=n;if(o.styles!==void 0){var s=o.next;if(s!==void 0)for(;s!==void 0;)Gl={name:s.name,styles:s.styles,next:Gl},s=s.next;var a=o.styles+";";return a}return h7e(t,e,n)}case"function":{if(t!==void 0){var l=Gl,c=n(t);return Gl=l,xw(t,e,c)}break}}var u=n;if(e==null)return u;var d=e[u];return d!==void 0?d:u}function h7e(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=xw(t,e,n[i])+";";else for(var o in n){var s=n[o];if(typeof s!="object"){var a=s;e!=null&&e[a]!==void 0?r+=o+"{"+e[a]+"}":dK(a)&&(r+=XD(o)+":"+fK(o,a)+";")}else{if(o==="NO_COMPONENT_SELECTOR"&&c7e)throw new Error(f7e);if(Array.isArray(s)&&typeof s[0]=="string"&&(e==null||e[s[0]]===void 0))for(var l=0;l<s.length;l++)dK(s[l])&&(r+=XD(o)+":"+fK(o,s[l])+";");else{var c=xw(t,e,s);switch(o){case"animation":case"animationName":{r+=XD(o)+":"+c+";";break}default:r+=o+"{"+c+"}"}}}}return r}var hK=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Gl;function Ij(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";Gl=void 0;var o=t[0];if(o==null||o.raw===void 0)r=!1,i+=xw(n,e,o);else{var s=o;i+=s[0]}for(var a=1;a<t.length;a++)if(i+=xw(n,e,t[a]),r){var l=o;i+=l[a]}hK.lastIndex=0;for(var c="",u;(u=hK.exec(i))!==null;)c+="-"+u[1];var d=a7e(i)+c;return{name:d,styles:i,next:Gl}}var p7e=function(e){return e()},tae=fp.useInsertionEffect?fp.useInsertionEffect:!1,m7e=tae||p7e,pK=tae||R.useLayoutEffect,nae=R.createContext(typeof HTMLElement<"u"?qse({key:"css"}):null),g7e=nae.Provider,rae=function(e){return R.forwardRef(function(n,r){var i=R.useContext(nae);return e(n,i,r)})},$I=R.createContext({}),KD={exports:{}},mK;function iae(){return mK||(mK=1,function(t){function e(){return t.exports=e=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var o in i)({}).hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(null,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(KD)),KD.exports}iae();var v7e=rae(function(t,e){var n=t.styles,r=Ij([n],void 0,R.useContext($I)),i=R.useRef();return pK(function(){var o=e.key+"-global",s=new e.sheet.constructor({key:o,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+o+" "+r.name+'"]');return e.sheet.tags.length&&(s.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",o),s.hydrate([l])),i.current=[s,a],function(){s.flush()}},[e]),pK(function(){var o=i.current,s=o[0],a=o[1];if(a){o[1]=!1;return}if(r.next!==void 0&&Jse(e,r.next,!0),s.tags.length){var l=s.tags[s.tags.length-1].nextElementSibling;s.before=l,s.flush()}e.insert("",r,s,!1)},[e,r.name]),null});function oae(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Ij(e)}var LI=function(){var e=oae.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},y7e=wYe,b7e=function(e){return e!=="theme"},gK=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?y7e:b7e},vK=function(e,n,r){var i;if(n){var o=n.shouldForwardProp;i=e.__emotion_forwardProp&&o?function(s){return e.__emotion_forwardProp(s)&&o(s)}:o}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},x7e=!1,w7e=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return Zse(n,r,i),m7e(function(){return Jse(n,r,i)}),null},_7e=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,o,s;n!==void 0&&(o=n.label,s=n.target);var a=vK(e,n,r),l=a||gK(i),c=!l("as");return function(){var u=arguments,d=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&d.push("label:"+o+";"),u[0]==null||u[0].raw===void 0)d.push.apply(d,u);else{d.push(u[0][0]);for(var f=u.length,h=1;h<f;h++)d.push(u[h],u[0][h])}var g=rae(function(p,m,v){var _=c&&p.as||i,w="",y=[],b=p;if(p.theme==null){b={};for(var x in p)b[x]=p[x];b.theme=R.useContext($I)}typeof p.className=="string"?w=s7e(m.registered,y,p.className):p.className!=null&&(w=p.className+" ");var S=Ij(d.concat(y),m.registered,b);w+=m.key+"-"+S.name,s!==void 0&&(w+=" "+s);var C=c&&a===void 0?gK(_):l,T={};for(var E in p)c&&E==="as"||C(E)&&(T[E]=p[E]);return T.className=w,v&&(T.ref=v),R.createElement(R.Fragment,null,R.createElement(w7e,{cache:m,serialized:S,isStringTag:typeof _=="string"}),R.createElement(_,T))});return g.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",g.defaultProps=e.defaultProps,g.__emotion_real=g,g.__emotion_base=i,g.__emotion_styles=d,g.__emotion_forwardProp=a,Object.defineProperty(g,"toString",{value:function(){return s===void 0&&x7e?"NO_COMPONENT_SELECTOR":"."+s}}),g.withComponent=function(p,m){return t(p,Le({},n,m,{shouldForwardProp:vK(g,m,!0)})).apply(void 0,d)},g}},S7e=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],_F=_7e.bind();S7e.forEach(function(t){_F[t]=_F(t)});let SF;typeof document=="object"&&(SF=qse({key:"css",prepend:!0}));function C7e(t){const{injectFirst:e,children:n}=t;return e&&SF?I.jsx(g7e,{value:SF,children:n}):n}function E7e(t){return t==null||Object.keys(t).length===0}function T7e(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(E7e(i)?n:i):e;return I.jsx(v7e,{styles:r})}function Oj(t,e){return _F(t,e)}const sae=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))},k7e=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:T7e,StyledEngineProvider:C7e,ThemeContext:$I,css:oae,default:Oj,internal_processStyles:sae,keyframes:LI},Symbol.toStringTag,{value:"Module"}));function cu(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function aae(t){if(!cu(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=aae(t[n])}),e}function bc(t,e,n={clone:!0}){const r=n.clone?Le({},t):t;return cu(t)&&cu(e)&&Object.keys(e).forEach(i=>{cu(e[i])&&Object.prototype.hasOwnProperty.call(t,i)&&cu(t[i])?r[i]=bc(t[i],e[i],n):n.clone?r[i]=cu(e[i])?aae(e[i]):e[i]:r[i]=e[i]}),r}const A7e=Object.freeze(Object.defineProperty({__proto__:null,default:bc,isPlainObject:cu},Symbol.toStringTag,{value:"Module"})),M7e=["values","unit","step"],I7e=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>Le({},n,{[r.key]:r.val}),{})};function lae(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=t,i=pn(t,M7e),o=I7e(e),s=Object.keys(o);function a(f){return`@media (min-width:${typeof e[f]=="number"?e[f]:f}${n})`}function l(f){return`@media (max-width:${(typeof e[f]=="number"?e[f]:f)-r/100}${n})`}function c(f,h){const g=s.indexOf(h);return`@media (min-width:${typeof e[f]=="number"?e[f]:f}${n}) and (max-width:${(g!==-1&&typeof e[s[g]]=="number"?e[s[g]]:h)-r/100}${n})`}function u(f){return s.indexOf(f)+1<s.length?c(f,s[s.indexOf(f)+1]):a(f)}function d(f){const h=s.indexOf(f);return h===0?a(s[1]):h===s.length-1?l(s[h]):c(f,s[s.indexOf(f)+1]).replace("@media","@media not all and")}return Le({keys:s,values:o,up:a,down:l,between:c,only:u,not:d,unit:n},i)}const O7e={borderRadius:4};function Yb(t,e){return e?bc(t,e,{clone:!1}):t}const Rj={xs:0,sm:600,md:900,lg:1200,xl:1536},yK={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${Rj[t]}px)`};function Lu(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const o=r.breakpoints||yK;return e.reduce((s,a,l)=>(s[o.up(o.keys[l])]=n(e[l]),s),{})}if(typeof e=="object"){const o=r.breakpoints||yK;return Object.keys(e).reduce((s,a)=>{if(Object.keys(o.values||Rj).indexOf(a)!==-1){const l=o.up(a);s[l]=n(e[a],a)}else{const l=a;s[l]=e[l]}return s},{})}return n(e)}function R7e(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((r,i)=>{const o=t.up(i);return r[o]={},r},{}))||{}}function D7e(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function an(t){if(typeof t!="string")throw new Error(vw(7));return t.charAt(0).toUpperCase()+t.slice(1)}const P7e=Object.freeze(Object.defineProperty({__proto__:null,default:an},Symbol.toStringTag,{value:"Module"}));function FI(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function Fk(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=FI(t,n)||r,e&&(i=e(i,r,t)),i}function Lr(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,o=s=>{if(s[e]==null)return null;const a=s[e],l=s.theme,c=FI(l,r)||{};return Lu(s,a,d=>{let f=Fk(c,i,d);return d===f&&typeof d=="string"&&(f=Fk(c,i,`${e}${d==="default"?"":an(d)}`,d)),n===!1?f:{[n]:f}})};return o.propTypes={},o.filterProps=[e],o}function N7e(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const $7e={m:"margin",p:"padding"},L7e={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},bK={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},F7e=N7e(t=>{if(t.length>2)if(bK[t])t=bK[t];else return[t];const[e,n]=t.split(""),r=$7e[e],i=L7e[n]||"";return Array.isArray(i)?i.map(o=>r+o):[r+i]}),Dj=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Pj=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Dj,...Pj];function R_(t,e,n,r){var i;const o=(i=FI(t,e,!1))!=null?i:n;return typeof o=="number"?s=>typeof s=="string"?s:o*s:Array.isArray(o)?s=>typeof s=="string"?s:o[s]:typeof o=="function"?o:()=>{}}function cae(t){return R_(t,"spacing",8)}function D_(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),r=t(n);return e>=0?r:typeof r=="number"?-r:`-${r}`}function B7e(t,e){return n=>t.reduce((r,i)=>(r[i]=D_(e,n),r),{})}function U7e(t,e,n,r){if(e.indexOf(n)===-1)return null;const i=F7e(n),o=B7e(i,r),s=t[n];return Lu(t,s,o)}function uae(t,e){const n=cae(t.theme);return Object.keys(t).map(r=>U7e(t,e,r,n)).reduce(Yb,{})}function yr(t){return uae(t,Dj)}yr.propTypes={};yr.filterProps=Dj;function br(t){return uae(t,Pj)}br.propTypes={};br.filterProps=Pj;function z7e(t=8){if(t.mui)return t;const e=cae({spacing:t}),n=(...r)=>(r.length===0?[1]:r).map(o=>{const s=e(o);return typeof s=="number"?`${s}px`:s}).join(" ");return n.mui=!0,n}function BI(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(o=>{r[o]=i}),r),{}),n=r=>Object.keys(r).reduce((i,o)=>e[o]?Yb(i,e[o](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function ha(t){return typeof t!="number"?t:`${t}px solid`}function Ba(t,e){return Lr({prop:t,themeKey:"borders",transform:e})}const j7e=Ba("border",ha),W7e=Ba("borderTop",ha),V7e=Ba("borderRight",ha),H7e=Ba("borderBottom",ha),G7e=Ba("borderLeft",ha),q7e=Ba("borderColor"),X7e=Ba("borderTopColor"),K7e=Ba("borderRightColor"),Y7e=Ba("borderBottomColor"),Q7e=Ba("borderLeftColor"),Z7e=Ba("outline",ha),J7e=Ba("outlineColor"),UI=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=R_(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:D_(e,r)});return Lu(t,t.borderRadius,n)}return null};UI.propTypes={};UI.filterProps=["borderRadius"];BI(j7e,W7e,V7e,H7e,G7e,q7e,X7e,K7e,Y7e,Q7e,UI,Z7e,J7e);const zI=t=>{if(t.gap!==void 0&&t.gap!==null){const e=R_(t.theme,"spacing",8),n=r=>({gap:D_(e,r)});return Lu(t,t.gap,n)}return null};zI.propTypes={};zI.filterProps=["gap"];const jI=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=R_(t.theme,"spacing",8),n=r=>({columnGap:D_(e,r)});return Lu(t,t.columnGap,n)}return null};jI.propTypes={};jI.filterProps=["columnGap"];const WI=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=R_(t.theme,"spacing",8),n=r=>({rowGap:D_(e,r)});return Lu(t,t.rowGap,n)}return null};WI.propTypes={};WI.filterProps=["rowGap"];const eQe=Lr({prop:"gridColumn"}),tQe=Lr({prop:"gridRow"}),nQe=Lr({prop:"gridAutoFlow"}),rQe=Lr({prop:"gridAutoColumns"}),iQe=Lr({prop:"gridAutoRows"}),oQe=Lr({prop:"gridTemplateColumns"}),sQe=Lr({prop:"gridTemplateRows"}),aQe=Lr({prop:"gridTemplateAreas"}),lQe=Lr({prop:"gridArea"});BI(zI,jI,WI,eQe,tQe,nQe,rQe,iQe,oQe,sQe,aQe,lQe);function tv(t,e){return e==="grey"?e:t}const cQe=Lr({prop:"color",themeKey:"palette",transform:tv}),uQe=Lr({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:tv}),dQe=Lr({prop:"backgroundColor",themeKey:"palette",transform:tv});BI(cQe,uQe,dQe);function Cs(t){return t<=1&&t!==0?`${t*100}%`:t}const fQe=Lr({prop:"width",transform:Cs}),Nj=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,i;const o=((r=t.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||Rj[n];return o?((i=t.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${o}${t.theme.breakpoints.unit}`}:{maxWidth:o}:{maxWidth:Cs(n)}};return Lu(t,t.maxWidth,e)}return null};Nj.filterProps=["maxWidth"];const hQe=Lr({prop:"minWidth",transform:Cs}),pQe=Lr({prop:"height",transform:Cs}),mQe=Lr({prop:"maxHeight",transform:Cs}),gQe=Lr({prop:"minHeight",transform:Cs});Lr({prop:"size",cssProperty:"width",transform:Cs});Lr({prop:"size",cssProperty:"height",transform:Cs});const vQe=Lr({prop:"boxSizing"});BI(fQe,Nj,hQe,pQe,mQe,gQe,vQe);const yQe={border:{themeKey:"borders",transform:ha},borderTop:{themeKey:"borders",transform:ha},borderRight:{themeKey:"borders",transform:ha},borderBottom:{themeKey:"borders",transform:ha},borderLeft:{themeKey:"borders",transform:ha},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ha},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:UI},color:{themeKey:"palette",transform:tv},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:tv},backgroundColor:{themeKey:"palette",transform:tv},p:{style:br},pt:{style:br},pr:{style:br},pb:{style:br},pl:{style:br},px:{style:br},py:{style:br},padding:{style:br},paddingTop:{style:br},paddingRight:{style:br},paddingBottom:{style:br},paddingLeft:{style:br},paddingX:{style:br},paddingY:{style:br},paddingInline:{style:br},paddingInlineStart:{style:br},paddingInlineEnd:{style:br},paddingBlock:{style:br},paddingBlockStart:{style:br},paddingBlockEnd:{style:br},m:{style:yr},mt:{style:yr},mr:{style:yr},mb:{style:yr},ml:{style:yr},mx:{style:yr},my:{style:yr},margin:{style:yr},marginTop:{style:yr},marginRight:{style:yr},marginBottom:{style:yr},marginLeft:{style:yr},marginX:{style:yr},marginY:{style:yr},marginInline:{style:yr},marginInlineStart:{style:yr},marginInlineEnd:{style:yr},marginBlock:{style:yr},marginBlockStart:{style:yr},marginBlockEnd:{style:yr},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:zI},rowGap:{style:WI},columnGap:{style:jI},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Cs},maxWidth:{style:Nj},minWidth:{transform:Cs},height:{transform:Cs},maxHeight:{transform:Cs},minHeight:{transform:Cs},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},P_=yQe;function bQe(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function xQe(t,e){return typeof t=="function"?t(e):t}function dae(){function t(n,r,i,o){const s={[n]:r,theme:i},a=o[n];if(!a)return{[n]:r};const{cssProperty:l=n,themeKey:c,transform:u,style:d}=a;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[n]:r};const f=FI(i,c)||{};return d?d(s):Lu(s,r,g=>{let p=Fk(f,u,g);return g===p&&typeof g=="string"&&(p=Fk(f,u,`${n}${g==="default"?"":an(g)}`,g)),l===!1?p:{[l]:p}})}function e(n){var r;const{sx:i,theme:o={}}=n||{};if(!i)return null;const s=(r=o.unstable_sxConfig)!=null?r:P_;function a(l){let c=l;if(typeof l=="function")c=l(o);else if(typeof l!="object")return l;if(!c)return null;const u=R7e(o.breakpoints),d=Object.keys(u);let f=u;return Object.keys(c).forEach(h=>{const g=xQe(c[h],o);if(g!=null)if(typeof g=="object")if(s[h])f=Yb(f,t(h,g,o,s));else{const p=Lu({theme:o},g,m=>({[h]:m}));bQe(p,g)?f[h]=e({sx:g,theme:o}):f=Yb(f,p)}else f=Yb(f,t(h,g,o,s))}),D7e(d,f)}return Array.isArray(i)?i.map(a):a(i)}return e}const fae=dae();fae.filterProps=["sx"];const N_=fae;function hae(t,e){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(t).replace(/(\[[^\]]+\])/,"*:where($1)")]:e}:n.palette.mode===t?e:{}}const wQe=["breakpoints","palette","spacing","shape"];function $_(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:o={}}=t,s=pn(t,wQe),a=lae(n),l=z7e(i);let c=bc({breakpoints:a,direction:"ltr",components:{},palette:Le({mode:"light"},r),spacing:l,shape:Le({},O7e,o)},s);return c.applyStyles=hae,c=e.reduce((u,d)=>bc(u,d),c),c.unstable_sxConfig=Le({},P_,s==null?void 0:s.unstable_sxConfig),c.unstable_sx=function(d){return N_({sx:d,theme:this})},c}const _Qe=Object.freeze(Object.defineProperty({__proto__:null,default:$_,private_createBreakpoints:lae,unstable_applyStyles:hae},Symbol.toStringTag,{value:"Module"}));function SQe(t){return Object.keys(t).length===0}function CQe(t=null){const e=R.useContext($I);return!e||SQe(e)?t:e}const EQe=$_();function VI(t=EQe){return CQe(t)}const TQe=["sx"],kQe=t=>{var e,n;const r={systemProps:{},otherProps:{}},i=(e=t==null||(n=t.theme)==null?void 0:n.unstable_sxConfig)!=null?e:P_;return Object.keys(t).forEach(o=>{i[o]?r.systemProps[o]=t[o]:r.otherProps[o]=t[o]}),r};function $j(t){const{sx:e}=t,n=pn(t,TQe),{systemProps:r,otherProps:i}=kQe(n);let o;return Array.isArray(e)?o=[r,...e]:typeof e=="function"?o=(...s)=>{const a=e(...s);return cu(a)?Le({},r,a):r}:o=Le({},r,e),Le({},i,{sx:o})}const AQe=Object.freeze(Object.defineProperty({__proto__:null,default:N_,extendSxProp:$j,unstable_createStyleFunctionSx:dae,unstable_defaultSxConfig:P_},Symbol.toStringTag,{value:"Module"})),xK=t=>t,MQe=()=>{let t=xK;return{configure(e){t=e},generate(e){return t(e)},reset(){t=xK}}},Lj=MQe(),IQe=["className","component"];function OQe(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,o=Oj("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(N_);return R.forwardRef(function(l,c){const u=VI(n),d=$j(l),{className:f,component:h="div"}=d,g=pn(d,IQe);return I.jsx(o,Le({as:h,ref:c,className:Ze(f,i?i(r):r),theme:e&&u[e]||u},g))})}const RQe={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Xs(t,e,n="Mui"){const r=RQe[e];return r?`${n}-${r}`:`${Lj.generate(t)}-${e}`}function go(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=Xs(t,i,n)}),r}var pae={exports:{}},Pn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fj=Symbol.for("react.element"),Bj=Symbol.for("react.portal"),HI=Symbol.for("react.fragment"),GI=Symbol.for("react.strict_mode"),qI=Symbol.for("react.profiler"),XI=Symbol.for("react.provider"),KI=Symbol.for("react.context"),DQe=Symbol.for("react.server_context"),YI=Symbol.for("react.forward_ref"),QI=Symbol.for("react.suspense"),ZI=Symbol.for("react.suspense_list"),JI=Symbol.for("react.memo"),eO=Symbol.for("react.lazy"),PQe=Symbol.for("react.offscreen"),mae;mae=Symbol.for("react.module.reference");function Ua(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Fj:switch(t=t.type,t){case HI:case qI:case GI:case QI:case ZI:return t;default:switch(t=t&&t.$$typeof,t){case DQe:case KI:case YI:case eO:case JI:case XI:return t;default:return e}}case Bj:return e}}}Pn.ContextConsumer=KI;Pn.ContextProvider=XI;Pn.Element=Fj;Pn.ForwardRef=YI;Pn.Fragment=HI;Pn.Lazy=eO;Pn.Memo=JI;Pn.Portal=Bj;Pn.Profiler=qI;Pn.StrictMode=GI;Pn.Suspense=QI;Pn.SuspenseList=ZI;Pn.isAsyncMode=function(){return!1};Pn.isConcurrentMode=function(){return!1};Pn.isContextConsumer=function(t){return Ua(t)===KI};Pn.isContextProvider=function(t){return Ua(t)===XI};Pn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fj};Pn.isForwardRef=function(t){return Ua(t)===YI};Pn.isFragment=function(t){return Ua(t)===HI};Pn.isLazy=function(t){return Ua(t)===eO};Pn.isMemo=function(t){return Ua(t)===JI};Pn.isPortal=function(t){return Ua(t)===Bj};Pn.isProfiler=function(t){return Ua(t)===qI};Pn.isStrictMode=function(t){return Ua(t)===GI};Pn.isSuspense=function(t){return Ua(t)===QI};Pn.isSuspenseList=function(t){return Ua(t)===ZI};Pn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===HI||t===qI||t===GI||t===QI||t===ZI||t===PQe||typeof t=="object"&&t!==null&&(t.$$typeof===eO||t.$$typeof===JI||t.$$typeof===XI||t.$$typeof===KI||t.$$typeof===YI||t.$$typeof===mae||t.getModuleId!==void 0)};Pn.typeOf=Ua;pae.exports=Pn;var wK=pae.exports;const NQe=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function gae(t){const e=`${t}`.match(NQe);return e&&e[1]||""}function vae(t,e=""){return t.displayName||t.name||gae(t)||e}function _K(t,e,n){const r=vae(e);return t.displayName||(r!==""?`${n}(${r})`:n)}function $Qe(t){if(t!=null){if(typeof t=="string")return t;if(typeof t=="function")return vae(t,"Component");if(typeof t=="object")switch(t.$$typeof){case wK.ForwardRef:return _K(t,t.render,"ForwardRef");case wK.Memo:return _K(t,t.type,"memo");default:return}}}const LQe=Object.freeze(Object.defineProperty({__proto__:null,default:$Qe,getFunctionName:gae},Symbol.toStringTag,{value:"Module"})),FQe=["ownerState"],BQe=["variants"],UQe=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function zQe(t){return Object.keys(t).length===0}function jQe(t){return typeof t=="string"&&t.charCodeAt(0)>96}function YD(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const WQe=$_(),VQe=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function SC({defaultTheme:t,theme:e,themeId:n}){return zQe(e)?t:e[n]||e}function HQe(t){return t?(e,n)=>n[t]:null}function RE(t,e){let{ownerState:n}=e,r=pn(e,FQe);const i=typeof t=="function"?t(Le({ownerState:n},r)):t;if(Array.isArray(i))return i.flatMap(o=>RE(o,Le({ownerState:n},r)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:o=[]}=i;let a=pn(i,BQe);return o.forEach(l=>{let c=!0;typeof l.props=="function"?c=l.props(Le({ownerState:n},r,n)):Object.keys(l.props).forEach(u=>{(n==null?void 0:n[u])!==l.props[u]&&r[u]!==l.props[u]&&(c=!1)}),c&&(Array.isArray(a)||(a=[a]),a.push(typeof l.style=="function"?l.style(Le({ownerState:n},r,n)):l.style))}),a}return i}function GQe(t={}){const{themeId:e,defaultTheme:n=WQe,rootShouldForwardProp:r=YD,slotShouldForwardProp:i=YD}=t,o=s=>N_(Le({},s,{theme:SC(Le({},s,{defaultTheme:n,themeId:e}))}));return o.__mui_systemSx=!0,(s,a={})=>{sae(s,b=>b.filter(x=>!(x!=null&&x.__mui_systemSx)));const{name:l,slot:c,skipVariantsResolver:u,skipSx:d,overridesResolver:f=HQe(VQe(c))}=a,h=pn(a,UQe),g=u!==void 0?u:c&&c!=="Root"&&c!=="root"||!1,p=d||!1;let m,v=YD;c==="Root"||c==="root"?v=r:c?v=i:jQe(s)&&(v=void 0);const _=Oj(s,Le({shouldForwardProp:v,label:m},h)),w=b=>typeof b=="function"&&b.__emotion_real!==b||cu(b)?x=>RE(b,Le({},x,{theme:SC({theme:x.theme,defaultTheme:n,themeId:e})})):b,y=(b,...x)=>{let S=w(b);const C=x?x.map(w):[];l&&f&&C.push(k=>{const A=SC(Le({},k,{defaultTheme:n,themeId:e}));if(!A.components||!A.components[l]||!A.components[l].styleOverrides)return null;const O=A.components[l].styleOverrides,D={};return Object.entries(O).forEach(([P,N])=>{D[P]=RE(N,Le({},k,{theme:A}))}),f(k,D)}),l&&!g&&C.push(k=>{var A;const O=SC(Le({},k,{defaultTheme:n,themeId:e})),D=O==null||(A=O.components)==null||(A=A[l])==null?void 0:A.variants;return RE({variants:D},Le({},k,{theme:O}))}),p||C.push(o);const T=C.length-x.length;if(Array.isArray(b)&&T>0){const k=new Array(T).fill("");S=[...b,...k],S.raw=[...b.raw,...k]}const E=_(S,...C);return s.muiName&&(E.muiName=s.muiName),E};return _.withConfig&&(y.withConfig=_.withConfig),y}}const qQe=GQe();function ww(t,e){const n=Le({},e);return Object.keys(t).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=Le({},t[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=t[r]||{},o=e[r];n[r]={},!o||!Object.keys(o)?n[r]=i:!i||!Object.keys(i)?n[r]=o:(n[r]=Le({},o),Object.keys(i).forEach(s=>{n[r][s]=ww(i[s],o[s])}))}else n[r]===void 0&&(n[r]=t[r])}),n}function XQe(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:ww(e.components[n].defaultProps,r)}function KQe({props:t,name:e,defaultTheme:n,themeId:r}){let i=VI(n);return r&&(i=i[r]||i),XQe({theme:i,name:e,props:t})}const Fu=typeof window<"u"?R.useLayoutEffect:R.useEffect;function YQe(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}const QQe=Object.freeze(Object.defineProperty({__proto__:null,default:YQe},Symbol.toStringTag,{value:"Module"}));function ZQe(...t){return t.reduce((e,n)=>n==null?e:function(...i){e.apply(this,i),n.apply(this,i)},()=>{})}function Uj(t,e=166){let n;function r(...i){const o=()=>{t.apply(this,i)};clearTimeout(n),n=setTimeout(o,e)}return r.clear=()=>{clearTimeout(n)},r}function JQe(t,e){return()=>null}function yae(t,e){var n,r;return R.isValidElement(t)&&e.indexOf((n=t.type.muiName)!=null?n:(r=t.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function xc(t){return t&&t.ownerDocument||document}function zj(t){return xc(t).defaultView||window}function eZe(t,e){return()=>null}function Bk(t,e){typeof t=="function"?t(e):t&&(t.current=e)}let SK=0;function tZe(t){const[e,n]=R.useState(t),r=t||e;return R.useEffect(()=>{e==null&&(SK+=1,n(`mui-${SK}`))},[e]),r}const CK=fp.useId;function nZe(t){if(CK!==void 0){const e=CK();return t??e}return tZe(t)}function rZe(t,e,n,r,i){return null}function iZe({controlled:t,default:e,name:n,state:r="value"}){const{current:i}=R.useRef(t!==void 0),[o,s]=R.useState(e),a=i?t:o,l=R.useCallback(c=>{i||s(c)},[]);return[a,l]}function xu(t){const e=R.useRef(t);return Fu(()=>{e.current=t}),R.useRef((...n)=>(0,e.current)(...n)).current}function Tl(...t){return R.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{Bk(n,e)})},t)}const EK={};function oZe(t,e){const n=R.useRef(EK);return n.current===EK&&(n.current=t(e)),n}const sZe=[];function aZe(t){R.useEffect(t,sZe)}class tO{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new tO}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}}function bae(){const t=oZe(tO.create).current;return aZe(t.disposeEffect),t}let nO=!0,CF=!1;const lZe=new tO,cZe={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function uZe(t){const{type:e,tagName:n}=t;return!!(n==="INPUT"&&cZe[e]&&!t.readOnly||n==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function dZe(t){t.metaKey||t.altKey||t.ctrlKey||(nO=!0)}function QD(){nO=!1}function fZe(){this.visibilityState==="hidden"&&CF&&(nO=!0)}function hZe(t){t.addEventListener("keydown",dZe,!0),t.addEventListener("mousedown",QD,!0),t.addEventListener("pointerdown",QD,!0),t.addEventListener("touchstart",QD,!0),t.addEventListener("visibilitychange",fZe,!0)}function pZe(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch{}return nO||uZe(e)}function xae(){const t=R.useCallback(i=>{i!=null&&hZe(i.ownerDocument)},[]),e=R.useRef(!1);function n(){return e.current?(CF=!0,lZe.start(100,()=>{CF=!1}),e.current=!1,!0):!1}function r(i){return pZe(i)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:r,onBlur:n,ref:t}}function mZe(t){const e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}let Gm;function wae(){if(Gm)return Gm;const t=document.createElement("div"),e=document.createElement("div");return e.style.width="10px",e.style.height="1px",t.appendChild(e),t.dir="rtl",t.style.fontSize="14px",t.style.width="4px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.overflow="scroll",document.body.appendChild(t),Gm="reverse",t.scrollLeft>0?Gm="default":(t.scrollLeft=1,t.scrollLeft===0&&(Gm="negative")),document.body.removeChild(t),Gm}function gZe(t,e){const n=t.scrollLeft;if(e!=="rtl")return n;switch(wae()){case"negative":return t.scrollWidth-t.clientWidth+n;case"reverse":return t.scrollWidth-t.clientWidth-n;default:return n}}function vZe(t){return R.Children.toArray(t).filter(e=>R.isValidElement(e))}function za(t,e,n=void 0){const r={};return Object.keys(t).forEach(i=>{r[i]=t[i].reduce((o,s)=>{if(s){const a=e(s);a!==""&&o.push(a),n&&n[s]&&o.push(n[s])}return o},[]).join(" ")}),r}function yZe(t){return typeof t=="string"}function bZe(t,e,n){return t===void 0||yZe(t)?e:Le({},e,{ownerState:Le({},e.ownerState,n)})}function xZe(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function TK(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function wZe(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=t;if(!e){const h=Ze(n==null?void 0:n.className,o,i==null?void 0:i.className,r==null?void 0:r.className),g=Le({},n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),p=Le({},n,i,r);return h.length>0&&(p.className=h),Object.keys(g).length>0&&(p.style=g),{props:p,internalRef:void 0}}const s=xZe(Le({},i,r)),a=TK(r),l=TK(i),c=e(s),u=Ze(c==null?void 0:c.className,n==null?void 0:n.className,o,i==null?void 0:i.className,r==null?void 0:r.className),d=Le({},c==null?void 0:c.style,n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),f=Le({},c,n,l,a);return u.length>0&&(f.className=u),Object.keys(d).length>0&&(f.style=d),{props:f,internalRef:c.ref}}function _Ze(t,e,n){return typeof t=="function"?t(e,n):t}const SZe=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function _w(t){var e;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:o=!1}=t,s=pn(t,SZe),a=o?{}:_Ze(r,i),{props:l,internalRef:c}=wZe(Le({},s,{externalSlotProps:a})),u=Tl(c,a==null?void 0:a.ref,(e=t.additionalProps)==null?void 0:e.ref);return bZe(n,Le({},l,{ref:u}),i)}const CZe=R.createContext(),_ae=()=>{const t=R.useContext(CZe);return t??!1},EZe=R.createContext(void 0);function TZe(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const i=e.components[n];return i.defaultProps?ww(i.defaultProps,r):!i.styleOverrides&&!i.variants?ww(i,r):r}function kZe({props:t,name:e}){const n=R.useContext(EZe);return TZe({props:t,name:e,theme:{components:n}})}const AZe=(t,e)=>t.filter(n=>e.includes(n)),qy=(t,e,n)=>{const r=t.keys[0];Array.isArray(e)?e.forEach((i,o)=>{n((s,a)=>{o<=t.keys.length-1&&(o===0?Object.assign(s,a):s[t.up(t.keys[o])]=a)},i)}):e&&typeof e=="object"?(Object.keys(e).length>t.keys.length?t.keys:AZe(t.keys,Object.keys(e))).forEach(o=>{if(t.keys.indexOf(o)!==-1){const s=e[o];s!==void 0&&n((a,l)=>{r===o?Object.assign(a,l):a[t.up(o)]=l},s)}}):(typeof e=="number"||typeof e=="string")&&n((i,o)=>{Object.assign(i,o)},e)};function Bu(t){return t?`Level${t}`:""}function L_(t){return t.unstable_level>0&&t.container}function Sae(t){return function(n){return`var(--Grid-${n}Spacing${Bu(t.unstable_level)})`}}function jj(t){return function(n){return t.unstable_level===0?`var(--Grid-${n}Spacing)`:`var(--Grid-${n}Spacing${Bu(t.unstable_level-1)})`}}function Wj(t){return t.unstable_level===0?"var(--Grid-columns)":`var(--Grid-columns${Bu(t.unstable_level-1)})`}const MZe=({theme:t,ownerState:e})=>{const n=Sae(e),r={};return qy(t.breakpoints,e.gridSize,(i,o)=>{let s={};o===!0&&(s={flexBasis:0,flexGrow:1,maxWidth:"100%"}),o==="auto"&&(s={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof o=="number"&&(s={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${o} / ${Wj(e)}${L_(e)?` + ${n("column")}`:""})`}),i(r,s)}),r},IZe=({theme:t,ownerState:e})=>{const n={};return qy(t.breakpoints,e.gridOffset,(r,i)=>{let o={};i==="auto"&&(o={marginLeft:"auto"}),typeof i=="number"&&(o={marginLeft:i===0?"0px":`calc(100% * ${i} / ${Wj(e)})`}),r(n,o)}),n},OZe=({theme:t,ownerState:e})=>{if(!e.container)return{};const n=L_(e)?{[`--Grid-columns${Bu(e.unstable_level)}`]:Wj(e)}:{"--Grid-columns":12};return qy(t.breakpoints,e.columns,(r,i)=>{r(n,{[`--Grid-columns${Bu(e.unstable_level)}`]:i})}),n},RZe=({theme:t,ownerState:e})=>{if(!e.container)return{};const n=jj(e),r=L_(e)?{[`--Grid-rowSpacing${Bu(e.unstable_level)}`]:n("row")}:{};return qy(t.breakpoints,e.rowSpacing,(i,o)=>{var s;i(r,{[`--Grid-rowSpacing${Bu(e.unstable_level)}`]:typeof o=="string"?o:(s=t.spacing)==null?void 0:s.call(t,o)})}),r},DZe=({theme:t,ownerState:e})=>{if(!e.container)return{};const n=jj(e),r=L_(e)?{[`--Grid-columnSpacing${Bu(e.unstable_level)}`]:n("column")}:{};return qy(t.breakpoints,e.columnSpacing,(i,o)=>{var s;i(r,{[`--Grid-columnSpacing${Bu(e.unstable_level)}`]:typeof o=="string"?o:(s=t.spacing)==null?void 0:s.call(t,o)})}),r},PZe=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={};return qy(t.breakpoints,e.direction,(r,i)=>{r(n,{flexDirection:i})}),n},NZe=({ownerState:t})=>{const e=Sae(t),n=jj(t);return Le({minWidth:0,boxSizing:"border-box"},t.container&&Le({display:"flex",flexWrap:"wrap"},t.wrap&&t.wrap!=="wrap"&&{flexWrap:t.wrap},{margin:`calc(${e("row")} / -2) calc(${e("column")} / -2)`},t.disableEqualOverflow&&{margin:`calc(${e("row")} * -1) 0px 0px calc(${e("column")} * -1)`}),(!t.container||L_(t))&&Le({padding:`calc(${n("row")} / 2) calc(${n("column")} / 2)`},(t.disableEqualOverflow||t.parentDisableEqualOverflow)&&{padding:`${n("row")} 0px 0px ${n("column")}`}))},$Ze=t=>{const e=[];return Object.entries(t).forEach(([n,r])=>{r!==!1&&r!==void 0&&e.push(`grid-${n}-${String(r)}`)}),e},LZe=(t,e="xs")=>{function n(r){return r===void 0?!1:typeof r=="string"&&!Number.isNaN(Number(r))||typeof r=="number"&&r>0}if(n(t))return[`spacing-${e}-${String(t)}`];if(typeof t=="object"&&!Array.isArray(t)){const r=[];return Object.entries(t).forEach(([i,o])=>{n(o)&&r.push(`spacing-${i}-${String(o)}`)}),r}return[]},FZe=t=>t===void 0?[]:typeof t=="object"?Object.entries(t).map(([e,n])=>`direction-${e}-${n}`):[`direction-xs-${String(t)}`],BZe=["className","children","columns","container","component","direction","wrap","spacing","rowSpacing","columnSpacing","disableEqualOverflow","unstable_level"],UZe=$_(),zZe=qQe("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>e.root});function jZe(t){return KQe({props:t,name:"MuiGrid",defaultTheme:UZe})}function WZe(t={}){const{createStyledComponent:e=zZe,useThemeProps:n=jZe,componentName:r="MuiGrid"}=t,i=R.createContext(void 0),o=(l,c)=>{const{container:u,direction:d,spacing:f,wrap:h,gridSize:g}=l,p={root:["root",u&&"container",h!=="wrap"&&`wrap-xs-${String(h)}`,...FZe(d),...$Ze(g),...u?LZe(f,c.breakpoints.keys[0]):[]]};return za(p,m=>Xs(r,m),{})},s=e(OZe,DZe,RZe,MZe,PZe,NZe,IZe),a=R.forwardRef(function(c,u){var d,f,h,g,p,m,v,_;const w=VI(),y=n(c),b=$j(y),x=R.useContext(i),{className:S,children:C,columns:T=12,container:E=!1,component:k="div",direction:A="row",wrap:O="wrap",spacing:D=0,rowSpacing:P=D,columnSpacing:N=D,disableEqualOverflow:U,unstable_level:L=0}=b,V=pn(b,BZe);let G=U;L&&U!==void 0&&(G=c.disableEqualOverflow);const Q={},te={},ne={};Object.entries(V).forEach(([Ee,q])=>{w.breakpoints.values[Ee]!==void 0?Q[Ee]=q:w.breakpoints.values[Ee.replace("Offset","")]!==void 0?te[Ee.replace("Offset","")]=q:ne[Ee]=q});const ee=(d=c.columns)!=null?d:L?void 0:T,re=(f=c.spacing)!=null?f:L?void 0:D,se=(h=(g=c.rowSpacing)!=null?g:c.spacing)!=null?h:L?void 0:P,me=(p=(m=c.columnSpacing)!=null?m:c.spacing)!=null?p:L?void 0:N,Me=Le({},b,{level:L,columns:ee,container:E,direction:A,wrap:O,spacing:re,rowSpacing:se,columnSpacing:me,gridSize:Q,gridOffset:te,disableEqualOverflow:(v=(_=G)!=null?_:x)!=null?v:!1,parentDisableEqualOverflow:x}),de=o(Me,w);let Ce=I.jsx(s,Le({ref:u,as:k,ownerState:Me,className:Ze(de.root,S)},ne,{children:R.Children.map(C,Ee=>{if(R.isValidElement(Ee)&&yae(Ee,["Grid"])){var q;return R.cloneElement(Ee,{unstable_level:(q=Ee.props.unstable_level)!=null?q:L+1})}return Ee})}));return G!==void 0&&G!==(x??!1)&&(Ce=I.jsx(i.Provider,{value:G,children:Ce})),Ce});return a.muiName="Grid",a}const Vj="$$material";function VZe(t,e){return Le({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}var Fr={},Cae={exports:{}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(Cae);var Hj=Cae.exports;const HZe=jc(bYe),GZe=jc(QQe);var Eae=Hj;Object.defineProperty(Fr,"__esModule",{value:!0});var fl=Fr.alpha=Mae;Fr.blend=oJe;Fr.colorChannel=void 0;var qZe=Fr.darken=qj;Fr.decomposeColor=Ra;Fr.emphasize=Iae;var XZe=Fr.getContrastRatio=eJe;Fr.getLuminance=Uk;Fr.hexToRgb=Tae;Fr.hslToRgb=Aae;var KZe=Fr.lighten=Xj;Fr.private_safeAlpha=tJe;Fr.private_safeColorChannel=void 0;Fr.private_safeDarken=nJe;Fr.private_safeEmphasize=iJe;Fr.private_safeLighten=rJe;Fr.recomposeColor=Xy;Fr.rgbToHex=JZe;var kK=Eae(HZe),YZe=Eae(GZe);function Gj(t,e=0,n=1){return(0,YZe.default)(t,e,n)}function Tae(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function QZe(t){const e=t.toString(16);return e.length===1?`0${e}`:e}function Ra(t){if(t.type)return t;if(t.charAt(0)==="#")return Ra(Tae(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error((0,kK.default)(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error((0,kK.default)(10,i))}else r=r.split(",");return r=r.map(o=>parseFloat(o)),{type:n,values:r,colorSpace:i}}const kae=t=>{const e=Ra(t);return e.values.slice(0,3).map((n,r)=>e.type.indexOf("hsl")!==-1&&r!==0?`${n}%`:n).join(" ")};Fr.colorChannel=kae;const ZZe=(t,e)=>{try{return kae(t)}catch{return t}};Fr.private_safeColorChannel=ZZe;function Xy(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.indexOf("rgb")!==-1?r=r.map((i,o)=>o<3?parseInt(i,10):i):e.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function JZe(t){if(t.indexOf("#")===0)return t;const{values:e}=Ra(t);return`#${e.map((n,r)=>QZe(r===3?Math.round(255*n):n)).join("")}`}function Aae(t){t=Ra(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,o=r*Math.min(i,1-i),s=(c,u=(c+n/30)%12)=>i-o*Math.max(Math.min(u-3,9-u,1),-1);let a="rgb";const l=[Math.round(s(0)*255),Math.round(s(8)*255),Math.round(s(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),Xy({type:a,values:l})}function Uk(t){t=Ra(t);let e=t.type==="hsl"||t.type==="hsla"?Ra(Aae(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function eJe(t,e){const n=Uk(t),r=Uk(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function Mae(t,e){return t=Ra(t),e=Gj(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,Xy(t)}function tJe(t,e,n){try{return Mae(t,e)}catch{return t}}function qj(t,e){if(t=Ra(t),e=Gj(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return Xy(t)}function nJe(t,e,n){try{return qj(t,e)}catch{return t}}function Xj(t,e){if(t=Ra(t),e=Gj(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return Xy(t)}function rJe(t,e,n){try{return Xj(t,e)}catch{return t}}function Iae(t,e=.15){return Uk(t)>.5?qj(t,e):Xj(t,e)}function iJe(t,e,n){try{return Iae(t,e)}catch{return t}}function oJe(t,e,n,r=1){const i=(l,c)=>Math.round((l**(1/r)*(1-n)+c**(1/r)*n)**r),o=Ra(t),s=Ra(e),a=[i(o.values[0],s.values[0]),i(o.values[1],s.values[1]),i(o.values[2],s.values[2])];return Xy({type:"rgb",values:a})}const Sw={black:"#000",white:"#fff"},sJe={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},qm={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Xm={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},q0={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Km={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Ym={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Qm={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},aJe=["mode","contrastThreshold","tonalOffset"],AK={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Sw.white,default:Sw.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},ZD={text:{primary:Sw.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Sw.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function MK(t,e,n,r){const i=r.light||r,o=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=KZe(t.main,i):e==="dark"&&(t.dark=qZe(t.main,o)))}function lJe(t="light"){return t==="dark"?{main:Km[200],light:Km[50],dark:Km[400]}:{main:Km[700],light:Km[400],dark:Km[800]}}function cJe(t="light"){return t==="dark"?{main:qm[200],light:qm[50],dark:qm[400]}:{main:qm[500],light:qm[300],dark:qm[700]}}function uJe(t="light"){return t==="dark"?{main:Xm[500],light:Xm[300],dark:Xm[700]}:{main:Xm[700],light:Xm[400],dark:Xm[800]}}function dJe(t="light"){return t==="dark"?{main:Ym[400],light:Ym[300],dark:Ym[700]}:{main:Ym[700],light:Ym[500],dark:Ym[900]}}function fJe(t="light"){return t==="dark"?{main:Qm[400],light:Qm[300],dark:Qm[700]}:{main:Qm[800],light:Qm[500],dark:Qm[900]}}function hJe(t="light"){return t==="dark"?{main:q0[400],light:q0[300],dark:q0[700]}:{main:"#ed6c02",light:q0[500],dark:q0[900]}}function pJe(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2}=t,i=pn(t,aJe),o=t.primary||lJe(e),s=t.secondary||cJe(e),a=t.error||uJe(e),l=t.info||dJe(e),c=t.success||fJe(e),u=t.warning||hJe(e);function d(p){return XZe(p,ZD.text.primary)>=n?ZD.text.primary:AK.text.primary}const f=({color:p,name:m,mainShade:v=500,lightShade:_=300,darkShade:w=700})=>{if(p=Le({},p),!p.main&&p[v]&&(p.main=p[v]),!p.hasOwnProperty("main"))throw new Error(vw(11,m?` (${m})`:"",v));if(typeof p.main!="string")throw new Error(vw(12,m?` (${m})`:"",JSON.stringify(p.main)));return MK(p,"light",_,r),MK(p,"dark",w,r),p.contrastText||(p.contrastText=d(p.main)),p},h={dark:ZD,light:AK};return bc(Le({common:Le({},Sw),mode:e,primary:f({color:o,name:"primary"}),secondary:f({color:s,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:f({color:a,name:"error"}),warning:f({color:u,name:"warning"}),info:f({color:l,name:"info"}),success:f({color:c,name:"success"}),grey:sJe,contrastThreshold:n,getContrastText:d,augmentColor:f,tonalOffset:r},h[e]),i)}const mJe=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function gJe(t){return Math.round(t*1e5)/1e5}const IK={textTransform:"uppercase"},OK='"Roboto", "Helvetica", "Arial", sans-serif';function vJe(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:r=OK,fontSize:i=14,fontWeightLight:o=300,fontWeightRegular:s=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:u,pxToRem:d}=n,f=pn(n,mJe),h=i/14,g=d||(v=>`${v/c*h}rem`),p=(v,_,w,y,b)=>Le({fontFamily:r,fontWeight:v,fontSize:g(_),lineHeight:w},r===OK?{letterSpacing:`${gJe(y/_)}em`}:{},b,u),m={h1:p(o,96,1.167,-1.5),h2:p(o,60,1.2,-.5),h3:p(s,48,1.167,0),h4:p(s,34,1.235,.25),h5:p(s,24,1.334,0),h6:p(a,20,1.6,.15),subtitle1:p(s,16,1.75,.15),subtitle2:p(a,14,1.57,.1),body1:p(s,16,1.5,.15),body2:p(s,14,1.43,.15),button:p(a,14,1.75,.4,IK),caption:p(s,12,1.66,.4),overline:p(s,12,2.66,1,IK),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return bc(Le({htmlFontSize:c,pxToRem:g,fontFamily:r,fontSize:i,fontWeightLight:o,fontWeightRegular:s,fontWeightMedium:a,fontWeightBold:l},m),f,{clone:!1})}const yJe=.2,bJe=.14,xJe=.12;function ir(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${yJe})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${bJe})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${xJe})`].join(",")}const wJe=["none",ir(0,2,1,-1,0,1,1,0,0,1,3,0),ir(0,3,1,-2,0,2,2,0,0,1,5,0),ir(0,3,3,-2,0,3,4,0,0,1,8,0),ir(0,2,4,-1,0,4,5,0,0,1,10,0),ir(0,3,5,-1,0,5,8,0,0,1,14,0),ir(0,3,5,-1,0,6,10,0,0,1,18,0),ir(0,4,5,-2,0,7,10,1,0,2,16,1),ir(0,5,5,-3,0,8,10,1,0,3,14,2),ir(0,5,6,-3,0,9,12,1,0,3,16,2),ir(0,6,6,-3,0,10,14,1,0,4,18,3),ir(0,6,7,-4,0,11,15,1,0,4,20,3),ir(0,7,8,-4,0,12,17,2,0,5,22,4),ir(0,7,8,-4,0,13,19,2,0,5,24,4),ir(0,7,9,-4,0,14,21,2,0,5,26,4),ir(0,8,9,-5,0,15,22,2,0,6,28,5),ir(0,8,10,-5,0,16,24,2,0,6,30,5),ir(0,8,11,-5,0,17,26,2,0,6,32,5),ir(0,9,11,-5,0,18,28,2,0,7,34,6),ir(0,9,12,-6,0,19,29,2,0,7,36,6),ir(0,10,13,-6,0,20,31,3,0,8,38,7),ir(0,10,13,-6,0,21,33,3,0,8,40,7),ir(0,10,14,-6,0,22,35,3,0,8,42,7),ir(0,11,14,-7,0,23,36,3,0,9,44,8),ir(0,11,15,-7,0,24,38,3,0,9,46,8)],_Je=["duration","easing","delay"],SJe={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},CJe={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function RK(t){return`${Math.round(t)}ms`}function EJe(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function TJe(t){const e=Le({},SJe,t.easing),n=Le({},CJe,t.duration);return Le({getAutoHeightDuration:EJe,create:(i=["all"],o={})=>{const{duration:s=n.standard,easing:a=e.easeInOut,delay:l=0}=o;return pn(o,_Je),(Array.isArray(i)?i:[i]).map(c=>`${c} ${typeof s=="string"?s:RK(s)} ${a} ${typeof l=="string"?l:RK(l)}`).join(",")}},t,{easing:e,duration:n})}const kJe={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},AJe=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Oae(t={},...e){const{mixins:n={},palette:r={},transitions:i={},typography:o={}}=t,s=pn(t,AJe);if(t.vars)throw new Error(vw(18));const a=pJe(r),l=$_(t);let c=bc(l,{mixins:VZe(l.breakpoints,n),palette:a,shadows:wJe.slice(),typography:vJe(a,o),transitions:TJe(i),zIndex:Le({},kJe)});return c=bc(c,s),c=e.reduce((u,d)=>bc(u,d),c),c.unstable_sxConfig=Le({},P_,s==null?void 0:s.unstable_sxConfig),c.unstable_sx=function(d){return N_({sx:d,theme:this})},c}const Rae=Oae();function Dae(){const t=VI(Rae);return t[Vj]||t}var F_={},JD={exports:{}},DK;function MJe(){return DK||(DK=1,function(t){function e(n,r){if(n==null)return{};var i={};for(var o in n)if({}.hasOwnProperty.call(n,o)){if(r.includes(o))continue;i[o]=n[o]}return i}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(JD)),JD.exports}const Pae=jc(k7e),IJe=jc(A7e),OJe=jc(P7e),RJe=jc(LQe),DJe=jc(_Qe),PJe=jc(AQe);var Ky=Hj;Object.defineProperty(F_,"__esModule",{value:!0});var NJe=F_.default=XJe;F_.shouldForwardProp=DE;F_.systemDefaultTheme=void 0;var aa=Ky(iae()),EF=Ky(MJe()),PK=jJe(Pae),$Je=IJe;Ky(OJe);Ky(RJe);var LJe=Ky(DJe),FJe=Ky(PJe);const BJe=["ownerState"],UJe=["variants"],zJe=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function Nae(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(Nae=function(r){return r?n:e})(t)}function jJe(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=Nae(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}function WJe(t){return Object.keys(t).length===0}function VJe(t){return typeof t=="string"&&t.charCodeAt(0)>96}function DE(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const HJe=F_.systemDefaultTheme=(0,LJe.default)(),GJe=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function CC({defaultTheme:t,theme:e,themeId:n}){return WJe(e)?t:e[n]||e}function qJe(t){return t?(e,n)=>n[t]:null}function PE(t,e){let{ownerState:n}=e,r=(0,EF.default)(e,BJe);const i=typeof t=="function"?t((0,aa.default)({ownerState:n},r)):t;if(Array.isArray(i))return i.flatMap(o=>PE(o,(0,aa.default)({ownerState:n},r)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:o=[]}=i;let a=(0,EF.default)(i,UJe);return o.forEach(l=>{let c=!0;typeof l.props=="function"?c=l.props((0,aa.default)({ownerState:n},r,n)):Object.keys(l.props).forEach(u=>{(n==null?void 0:n[u])!==l.props[u]&&r[u]!==l.props[u]&&(c=!1)}),c&&(Array.isArray(a)||(a=[a]),a.push(typeof l.style=="function"?l.style((0,aa.default)({ownerState:n},r,n)):l.style))}),a}return i}function XJe(t={}){const{themeId:e,defaultTheme:n=HJe,rootShouldForwardProp:r=DE,slotShouldForwardProp:i=DE}=t,o=s=>(0,FJe.default)((0,aa.default)({},s,{theme:CC((0,aa.default)({},s,{defaultTheme:n,themeId:e}))}));return o.__mui_systemSx=!0,(s,a={})=>{(0,PK.internal_processStyles)(s,b=>b.filter(x=>!(x!=null&&x.__mui_systemSx)));const{name:l,slot:c,skipVariantsResolver:u,skipSx:d,overridesResolver:f=qJe(GJe(c))}=a,h=(0,EF.default)(a,zJe),g=u!==void 0?u:c&&c!=="Root"&&c!=="root"||!1,p=d||!1;let m,v=DE;c==="Root"||c==="root"?v=r:c?v=i:VJe(s)&&(v=void 0);const _=(0,PK.default)(s,(0,aa.default)({shouldForwardProp:v,label:m},h)),w=b=>typeof b=="function"&&b.__emotion_real!==b||(0,$Je.isPlainObject)(b)?x=>PE(b,(0,aa.default)({},x,{theme:CC({theme:x.theme,defaultTheme:n,themeId:e})})):b,y=(b,...x)=>{let S=w(b);const C=x?x.map(w):[];l&&f&&C.push(k=>{const A=CC((0,aa.default)({},k,{defaultTheme:n,themeId:e}));if(!A.components||!A.components[l]||!A.components[l].styleOverrides)return null;const O=A.components[l].styleOverrides,D={};return Object.entries(O).forEach(([P,N])=>{D[P]=PE(N,(0,aa.default)({},k,{theme:A}))}),f(k,D)}),l&&!g&&C.push(k=>{var A;const O=CC((0,aa.default)({},k,{defaultTheme:n,themeId:e})),D=O==null||(A=O.components)==null||(A=A[l])==null?void 0:A.variants;return PE({variants:D},(0,aa.default)({},k,{theme:O}))}),p||C.push(o);const T=C.length-x.length;if(Array.isArray(b)&&T>0){const k=new Array(T).fill("");S=[...b,...k],S.raw=[...b.raw,...k]}const E=_(S,...C);return s.muiName&&(E.muiName=s.muiName),E};return _.withConfig&&(y.withConfig=_.withConfig),y}}function KJe(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const Kj=t=>KJe(t)&&t!=="classes",qn=NJe({themeId:Vj,defaultTheme:Rae,rootShouldForwardProp:Kj}),NK=t=>{let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,(e/100).toFixed(2)},YJe=go("MuiBox",["root"]),QJe=Oae(),Yy=OQe({themeId:Vj,defaultTheme:QJe,defaultClassName:YJe.root,generateClassName:Lj.generate});function Ks(t){return kZe(t)}function ZJe(t){return(1+Math.sin(Math.PI*t-Math.PI/2))/2}function JJe(t,e,n,r={},i=()=>{}){const{ease:o=ZJe,duration:s=300}=r;let a=null;const l=e[t];let c=!1;const u=()=>{c=!0},d=f=>{if(c){i(new Error("Animation cancelled"));return}a===null&&(a=f);const h=Math.min(1,(f-a)/s);if(e[t]=o(h)*(n-l)+l,h>=1){requestAnimationFrame(()=>{i(null)});return}requestAnimationFrame(d)};return l===n?(i(new Error("Element already at target position")),u):(requestAnimationFrame(d),u)}function eet(t){return Xs("MuiSvgIcon",t)}go("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const tet=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],net=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${an(e)}`,`fontSize${an(n)}`]};return za(i,eet,r)},ret=qn("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${an(n.color)}`],e[`fontSize${an(n.fontSize)}`]]}})(({theme:t,ownerState:e})=>{var n,r,i,o,s,a,l,c,u,d,f,h,g;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:e.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=t.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(i=t.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((o=t.typography)==null||(s=o.pxToRem)==null?void 0:s.call(o,20))||"1.25rem",medium:((a=t.typography)==null||(l=a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem",large:((c=t.typography)==null||(u=c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}[e.fontSize],color:(d=(f=(t.vars||t).palette)==null||(f=f[e.color])==null?void 0:f.main)!=null?d:{action:(h=(t.vars||t).palette)==null||(h=h.action)==null?void 0:h.active,disabled:(g=(t.vars||t).palette)==null||(g=g.action)==null?void 0:g.disabled,inherit:void 0}[e.color]}}),TF=R.forwardRef(function(e,n){const r=Ks({props:e,name:"MuiSvgIcon"}),{children:i,className:o,color:s="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:d,viewBox:f="0 0 24 24"}=r,h=pn(r,tet),g=R.isValidElement(i)&&i.type==="svg",p=Le({},r,{color:s,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:f,hasSvgAsChild:g}),m={};u||(m.viewBox=f);const v=net(p);return I.jsxs(ret,Le({as:a,className:Ze(v.root,o),focusable:"false",color:c,"aria-hidden":d?void 0:!0,role:d?"img":void 0,ref:n},m,h,g&&i.props,{ownerState:p,children:[g?i.props.children:i,d?I.jsx("title",{children:d}):null]}))});TF.muiName="SvgIcon";function Yj(t,e){function n(r,i){return I.jsx(TF,Le({"data-testid":`${e}Icon`,ref:i},r,{children:t}))}return n.muiName=TF.muiName,R.memo(R.forwardRef(n))}const iet={configure:t=>{Lj.configure(t)}},oet=Object.freeze(Object.defineProperty({__proto__:null,capitalize:an,createChainedFunction:ZQe,createSvgIcon:Yj,debounce:Uj,deprecatedPropType:JQe,isMuiElement:yae,ownerDocument:xc,ownerWindow:zj,requirePropFactory:eZe,setRef:Bk,unstable_ClassNameGenerator:iet,unstable_useEnhancedEffect:Fu,unstable_useId:nZe,unsupportedProp:rZe,useControlled:iZe,useEventCallback:xu,useForkRef:Tl,useIsFocusVisible:xae},Symbol.toStringTag,{value:"Module"})),set=["onChange"],aet={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function cet(t){const{onChange:e}=t,n=pn(t,set),r=R.useRef(),i=R.useRef(null),o=()=>{r.current=i.current.offsetHeight-i.current.clientHeight};return Fu(()=>{const s=Uj(()=>{const l=r.current;o(),l!==r.current&&e(r.current)}),a=zj(i.current);return a.addEventListener("resize",s),()=>{s.clear(),a.removeEventListener("resize",s)}},[e]),R.useEffect(()=>{o(),e(r.current)},[e]),I.jsx("div",Le({style:aet,ref:i},n))}const uet=Yj(I.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),det=Yj(I.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function fet(t){const{className:e,classes:n,pulsate:r=!1,rippleX:i,rippleY:o,rippleSize:s,in:a,onExited:l,timeout:c}=t,[u,d]=R.useState(!1),f=Ze(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),h={width:s,height:s,top:-(s/2)+o,left:-(s/2)+i},g=Ze(n.child,u&&n.childLeaving,r&&n.childPulsate);return!a&&!u&&d(!0),R.useEffect(()=>{if(!a&&l!=null){const p=setTimeout(l,c);return()=>{clearTimeout(p)}}},[l,a,c]),I.jsx("span",{className:f,style:h,children:I.jsx("span",{className:g})})}const ca=go("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),het=["center","classes","className"];let rO=t=>t,$K,LK,FK,BK;const kF=550,pet=80,met=LI($K||($K=rO`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),get=LI(LK||(LK=rO`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),vet=LI(FK||(FK=rO`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),yet=qn("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),bet=qn(fet,{name:"MuiTouchRipple",slot:"Ripple"})(BK||(BK=rO`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),ca.rippleVisible,met,kF,({theme:t})=>t.transitions.easing.easeInOut,ca.ripplePulsate,({theme:t})=>t.transitions.duration.shorter,ca.child,ca.childLeaving,get,kF,({theme:t})=>t.transitions.easing.easeInOut,ca.childPulsate,vet,({theme:t})=>t.transitions.easing.easeInOut),xet=R.forwardRef(function(e,n){const r=Ks({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:s}=r,a=pn(r,het),[l,c]=R.useState([]),u=R.useRef(0),d=R.useRef(null);R.useEffect(()=>{d.current&&(d.current(),d.current=null)},[l]);const f=R.useRef(!1),h=bae(),g=R.useRef(null),p=R.useRef(null),m=R.useCallback(y=>{const{pulsate:b,rippleX:x,rippleY:S,rippleSize:C,cb:T}=y;c(E=>[...E,I.jsx(bet,{classes:{ripple:Ze(o.ripple,ca.ripple),rippleVisible:Ze(o.rippleVisible,ca.rippleVisible),ripplePulsate:Ze(o.ripplePulsate,ca.ripplePulsate),child:Ze(o.child,ca.child),childLeaving:Ze(o.childLeaving,ca.childLeaving),childPulsate:Ze(o.childPulsate,ca.childPulsate)},timeout:kF,pulsate:b,rippleX:x,rippleY:S,rippleSize:C},u.current)]),u.current+=1,d.current=T},[o]),v=R.useCallback((y={},b={},x=()=>{})=>{const{pulsate:S=!1,center:C=i||b.pulsate,fakeElement:T=!1}=b;if((y==null?void 0:y.type)==="mousedown"&&f.current){f.current=!1;return}(y==null?void 0:y.type)==="touchstart"&&(f.current=!0);const E=T?null:p.current,k=E?E.getBoundingClientRect():{width:0,height:0,left:0,top:0};let A,O,D;if(C||y===void 0||y.clientX===0&&y.clientY===0||!y.clientX&&!y.touches)A=Math.round(k.width/2),O=Math.round(k.height/2);else{const{clientX:P,clientY:N}=y.touches&&y.touches.length>0?y.touches[0]:y;A=Math.round(P-k.left),O=Math.round(N-k.top)}if(C)D=Math.sqrt((2*k.width**2+k.height**2)/3),D%2===0&&(D+=1);else{const P=Math.max(Math.abs((E?E.clientWidth:0)-A),A)*2+2,N=Math.max(Math.abs((E?E.clientHeight:0)-O),O)*2+2;D=Math.sqrt(P**2+N**2)}y!=null&&y.touches?g.current===null&&(g.current=()=>{m({pulsate:S,rippleX:A,rippleY:O,rippleSize:D,cb:x})},h.start(pet,()=>{g.current&&(g.current(),g.current=null)})):m({pulsate:S,rippleX:A,rippleY:O,rippleSize:D,cb:x})},[i,m,h]),_=R.useCallback(()=>{v({},{pulsate:!0})},[v]),w=R.useCallback((y,b)=>{if(h.clear(),(y==null?void 0:y.type)==="touchend"&&g.current){g.current(),g.current=null,h.start(0,()=>{w(y,b)});return}g.current=null,c(x=>x.length>0?x.slice(1):x),d.current=b},[h]);return R.useImperativeHandle(n,()=>({pulsate:_,start:v,stop:w}),[_,v,w]),I.jsx(yet,Le({className:Ze(ca.root,o.root,s),ref:p},a,{children:I.jsx(fj,{component:null,exit:!0,children:l})}))});function wet(t){return Xs("MuiButtonBase",t)}const _et=go("MuiButtonBase",["root","disabled","focusVisible"]),Cet=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Eet=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,s=za({root:["root",e&&"disabled",n&&"focusVisible"]},wet,i);return n&&r&&(s.root+=` ${r}`),s},Tet=qn("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${_et.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),iO=R.forwardRef(function(e,n){const r=Ks({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:s,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:f=!1,LinkComponent:h="a",onBlur:g,onClick:p,onContextMenu:m,onDragLeave:v,onFocus:_,onFocusVisible:w,onKeyDown:y,onKeyUp:b,onMouseDown:x,onMouseLeave:S,onMouseUp:C,onTouchEnd:T,onTouchMove:E,onTouchStart:k,tabIndex:A=0,TouchRippleProps:O,touchRippleRef:D,type:P}=r,N=pn(r,Cet),U=R.useRef(null),L=R.useRef(null),V=Tl(L,D),{isFocusVisibleRef:G,onFocus:Q,onBlur:te,ref:ne}=xae(),[ee,re]=R.useState(!1);c&&ee&&re(!1),R.useImperativeHandle(i,()=>({focusVisible:()=>{re(!0),U.current.focus()}}),[]);const[se,me]=R.useState(!1);R.useEffect(()=>{me(!0)},[]);const Me=se&&!u&&!c;R.useEffect(()=>{ee&&f&&!u&&se&&L.current.pulsate()},[u,f,ee,se]);function de(he,_e,Be=d){return xu(Xe=>(_e&&_e(Xe),!Be&&L.current&&L.current[he](Xe),!0))}const Ce=de("start",x),Ee=de("stop",m),q=de("stop",v),Ve=de("stop",C),ze=de("stop",he=>{ee&&he.preventDefault(),S&&S(he)}),Fe=de("start",k),we=de("stop",T),Je=de("stop",E),Z=de("stop",he=>{te(he),G.current===!1&&re(!1),g&&g(he)},!1),ce=xu(he=>{U.current||(U.current=he.currentTarget),Q(he),G.current===!0&&(re(!0),w&&w(he)),_&&_(he)}),H=()=>{const he=U.current;return l&&l!=="button"&&!(he.tagName==="A"&&he.href)},j=R.useRef(!1),ie=xu(he=>{f&&!j.current&&ee&&L.current&&he.key===" "&&(j.current=!0,L.current.stop(he,()=>{L.current.start(he)})),he.target===he.currentTarget&&H()&&he.key===" "&&he.preventDefault(),y&&y(he),he.target===he.currentTarget&&H()&&he.key==="Enter"&&!c&&(he.preventDefault(),p&&p(he))}),z=xu(he=>{f&&he.key===" "&&L.current&&ee&&!he.defaultPrevented&&(j.current=!1,L.current.stop(he,()=>{L.current.pulsate(he)})),b&&b(he),p&&he.target===he.currentTarget&&H()&&he.key===" "&&!he.defaultPrevented&&p(he)});let K=l;K==="button"&&(N.href||N.to)&&(K=h);const F={};K==="button"?(F.type=P===void 0?"button":P,F.disabled=c):(!N.href&&!N.to&&(F.role="button"),c&&(F["aria-disabled"]=c));const W=Tl(n,ne,U),X=Le({},r,{centerRipple:o,component:l,disabled:c,disableRipple:u,disableTouchRipple:d,focusRipple:f,tabIndex:A,focusVisible:ee}),ae=Eet(X);return I.jsxs(Tet,Le({as:K,className:Ze(ae.root,a),ownerState:X,onBlur:Z,onClick:p,onContextMenu:Ee,onFocus:ce,onKeyDown:ie,onKeyUp:z,onMouseDown:Ce,onMouseLeave:ze,onMouseUp:Ve,onDragLeave:q,onTouchEnd:we,onTouchMove:Je,onTouchStart:Fe,ref:W,tabIndex:c?-1:A,type:P},F,N,{children:[s,Me?I.jsx(xet,Le({ref:V,center:o},O)):null]}))});function ket(t){return Xs("MuiTabScrollButton",t)}const Aet=go("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),Met=["className","slots","slotProps","direction","orientation","disabled"],Iet=t=>{const{classes:e,orientation:n,disabled:r}=t;return za({root:["root",n,r&&"disabled"]},ket,e)},Oet=qn(iO,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.orientation&&e[n.orientation]]}})(({ownerState:t})=>Le({width:40,flexShrink:0,opacity:.8,[`&.${Aet.disabled}`]:{opacity:0}},t.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${t.isRtl?-90:90}deg)`}})),Ret=R.forwardRef(function(e,n){var r,i;const o=Ks({props:e,name:"MuiTabScrollButton"}),{className:s,slots:a={},slotProps:l={},direction:c}=o,u=pn(o,Met),d=_ae(),f=Le({isRtl:d},o),h=Iet(f),g=(r=a.StartScrollButtonIcon)!=null?r:uet,p=(i=a.EndScrollButtonIcon)!=null?i:det,m=_w({elementType:g,externalSlotProps:l.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:f}),v=_w({elementType:p,externalSlotProps:l.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:f});return I.jsx(Oet,Le({component:"div",className:Ze(h.root,s),ref:n,role:null,ownerState:f,tabIndex:null},u,{children:c==="left"?I.jsx(g,Le({},m)):I.jsx(p,Le({},v))}))});function Det(t){return Xs("MuiTabs",t)}const eP=go("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),Pet=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],UK=(t,e)=>t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t.firstChild,zK=(t,e)=>t===e?t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t.lastChild,EC=(t,e,n)=>{let r=!1,i=n(t,e);for(;i;){if(i===t.firstChild){if(r)return;r=!0}const o=i.disabled||i.getAttribute("aria-disabled")==="true";if(!i.hasAttribute("tabindex")||o)i=n(t,i);else{i.focus();return}}},Net=t=>{const{vertical:e,fixed:n,hideScrollbar:r,scrollableX:i,scrollableY:o,centered:s,scrollButtonsHideMobile:a,classes:l}=t;return za({root:["root",e&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",i&&"scrollableX",o&&"scrollableY"],flexContainer:["flexContainer",e&&"flexContainerVertical",s&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",a&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]},Det,l)},$et=qn("div",{name:"MuiTabs",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${eP.scrollButtons}`]:e.scrollButtons},{[`& .${eP.scrollButtons}`]:n.scrollButtonsHideMobile&&e.scrollButtonsHideMobile},e.root,n.vertical&&e.vertical]}})(({ownerState:t,theme:e})=>Le({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},t.vertical&&{flexDirection:"column"},t.scrollButtonsHideMobile&&{[`& .${eP.scrollButtons}`]:{[e.breakpoints.down("sm")]:{display:"none"}}})),Let=qn("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.scroller,n.fixed&&e.fixed,n.hideScrollbar&&e.hideScrollbar,n.scrollableX&&e.scrollableX,n.scrollableY&&e.scrollableY]}})(({ownerState:t})=>Le({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},t.fixed&&{overflowX:"hidden",width:"100%"},t.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},t.scrollableX&&{overflowX:"auto",overflowY:"hidden"},t.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),Fet=qn("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.flexContainer,n.vertical&&e.flexContainerVertical,n.centered&&e.centered]}})(({ownerState:t})=>Le({display:"flex"},t.vertical&&{flexDirection:"column"},t.centered&&{justifyContent:"center"})),Bet=qn("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(t,e)=>e.indicator})(({ownerState:t,theme:e})=>Le({position:"absolute",height:2,bottom:0,width:"100%",transition:e.transitions.create()},t.indicatorColor==="primary"&&{backgroundColor:(e.vars||e).palette.primary.main},t.indicatorColor==="secondary"&&{backgroundColor:(e.vars||e).palette.secondary.main},t.vertical&&{height:"100%",width:2,right:0})),Uet=qn(cet)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),jK={},zet=R.forwardRef(function(e,n){const r=Ks({props:e,name:"MuiTabs"}),i=Dae(),o=_ae(),{"aria-label":s,"aria-labelledby":a,action:l,centered:c=!1,children:u,className:d,component:f="div",allowScrollButtonsMobile:h=!1,indicatorColor:g="primary",onChange:p,orientation:m="horizontal",ScrollButtonComponent:v=Ret,scrollButtons:_="auto",selectionFollowsFocus:w,slots:y={},slotProps:b={},TabIndicatorProps:x={},TabScrollButtonProps:S={},textColor:C="primary",value:T,variant:E="standard",visibleScrollbar:k=!1}=r,A=pn(r,Pet),O=E==="scrollable",D=m==="vertical",P=D?"scrollTop":"scrollLeft",N=D?"top":"left",U=D?"bottom":"right",L=D?"clientHeight":"clientWidth",V=D?"height":"width",G=Le({},r,{component:f,allowScrollButtonsMobile:h,indicatorColor:g,orientation:m,vertical:D,scrollButtons:_,textColor:C,variant:E,visibleScrollbar:k,fixed:!O,hideScrollbar:O&&!k,scrollableX:O&&!D,scrollableY:O&&D,centered:c&&!O,scrollButtonsHideMobile:!h}),Q=Net(G),te=_w({elementType:y.StartScrollButtonIcon,externalSlotProps:b.startScrollButtonIcon,ownerState:G}),ne=_w({elementType:y.EndScrollButtonIcon,externalSlotProps:b.endScrollButtonIcon,ownerState:G}),[ee,re]=R.useState(!1),[se,me]=R.useState(jK),[Me,de]=R.useState(!1),[Ce,Ee]=R.useState(!1),[q,Ve]=R.useState(!1),[ze,Fe]=R.useState({overflow:"hidden",scrollbarWidth:0}),we=new Map,Je=R.useRef(null),Z=R.useRef(null),ce=()=>{const ye=Je.current;let Ue;if(ye){const le=ye.getBoundingClientRect();Ue={clientWidth:ye.clientWidth,scrollLeft:ye.scrollLeft,scrollTop:ye.scrollTop,scrollLeftNormalized:gZe(ye,o?"rtl":"ltr"),scrollWidth:ye.scrollWidth,top:le.top,bottom:le.bottom,left:le.left,right:le.right}}let ut;if(ye&&T!==!1){const le=Z.current.children;if(le.length>0){const je=le[we.get(T)];ut=je?je.getBoundingClientRect():null}}return{tabsMeta:Ue,tabMeta:ut}},H=xu(()=>{const{tabsMeta:ye,tabMeta:Ue}=ce();let ut=0,le;if(D)le="top",Ue&&ye&&(ut=Ue.top-ye.top+ye.scrollTop);else if(le=o?"right":"left",Ue&&ye){const Ne=o?ye.scrollLeftNormalized+ye.clientWidth-ye.scrollWidth:ye.scrollLeft;ut=(o?-1:1)*(Ue[le]-ye[le]+Ne)}const je={[le]:ut,[V]:Ue?Ue[V]:0};if(isNaN(se[le])||isNaN(se[V]))me(je);else{const Ne=Math.abs(se[le]-je[le]),$e=Math.abs(se[V]-je[V]);(Ne>=1||$e>=1)&&me(je)}}),j=(ye,{animation:Ue=!0}={})=>{Ue?JJe(P,Je.current,ye,{duration:i.transitions.duration.standard}):Je.current[P]=ye},ie=ye=>{let Ue=Je.current[P];D?Ue+=ye:(Ue+=ye*(o?-1:1),Ue*=o&&wae()==="reverse"?-1:1),j(Ue)},z=()=>{const ye=Je.current[L];let Ue=0;const ut=Array.from(Z.current.children);for(let le=0;le<ut.length;le+=1){const je=ut[le];if(Ue+je[L]>ye){le===0&&(Ue=ye);break}Ue+=je[L]}return Ue},K=()=>{ie(-1*z())},F=()=>{ie(z())},W=R.useCallback(ye=>{Fe({overflow:null,scrollbarWidth:ye})},[]),X=()=>{const ye={};ye.scrollbarSizeListener=O?I.jsx(Uet,{onChange:W,className:Ze(Q.scrollableX,Q.hideScrollbar)}):null;const ut=O&&(_==="auto"&&(Me||Ce)||_===!0);return ye.scrollButtonStart=ut?I.jsx(v,Le({slots:{StartScrollButtonIcon:y.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:te},orientation:m,direction:o?"right":"left",onClick:K,disabled:!Me},S,{className:Ze(Q.scrollButtons,S.className)})):null,ye.scrollButtonEnd=ut?I.jsx(v,Le({slots:{EndScrollButtonIcon:y.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:ne},orientation:m,direction:o?"left":"right",onClick:F,disabled:!Ce},S,{className:Ze(Q.scrollButtons,S.className)})):null,ye},ae=xu(ye=>{const{tabsMeta:Ue,tabMeta:ut}=ce();if(!(!ut||!Ue)){if(ut[N]<Ue[N]){const le=Ue[P]+(ut[N]-Ue[N]);j(le,{animation:ye})}else if(ut[U]>Ue[U]){const le=Ue[P]+(ut[U]-Ue[U]);j(le,{animation:ye})}}}),he=xu(()=>{O&&_!==!1&&Ve(!q)});R.useEffect(()=>{const ye=Uj(()=>{Je.current&&H()});let Ue;const ut=Ne=>{Ne.forEach($e=>{$e.removedNodes.forEach(qe=>{var ct;(ct=Ue)==null||ct.unobserve(qe)}),$e.addedNodes.forEach(qe=>{var ct;(ct=Ue)==null||ct.observe(qe)})}),ye(),he()},le=zj(Je.current);le.addEventListener("resize",ye);let je;return typeof ResizeObserver<"u"&&(Ue=new ResizeObserver(ye),Array.from(Z.current.children).forEach(Ne=>{Ue.observe(Ne)})),typeof MutationObserver<"u"&&(je=new MutationObserver(ut),je.observe(Z.current,{childList:!0})),()=>{var Ne,$e;ye.clear(),le.removeEventListener("resize",ye),(Ne=je)==null||Ne.disconnect(),($e=Ue)==null||$e.disconnect()}},[H,he]),R.useEffect(()=>{const ye=Array.from(Z.current.children),Ue=ye.length;if(typeof IntersectionObserver<"u"&&Ue>0&&O&&_!==!1){const ut=ye[0],le=ye[Ue-1],je={root:Je.current,threshold:.99},Ne=It=>{de(!It[0].isIntersecting)},$e=new IntersectionObserver(Ne,je);$e.observe(ut);const qe=It=>{Ee(!It[0].isIntersecting)},ct=new IntersectionObserver(qe,je);return ct.observe(le),()=>{$e.disconnect(),ct.disconnect()}}},[O,_,q,u==null?void 0:u.length]),R.useEffect(()=>{re(!0)},[]),R.useEffect(()=>{H()}),R.useEffect(()=>{ae(jK!==se)},[ae,se]),R.useImperativeHandle(l,()=>({updateIndicator:H,updateScrollButtons:he}),[H,he]);const _e=I.jsx(Bet,Le({},x,{className:Ze(Q.indicator,x.className),ownerState:G,style:Le({},se,x.style)}));let Be=0;const Xe=R.Children.map(u,ye=>{if(!R.isValidElement(ye))return null;const Ue=ye.props.value===void 0?Be:ye.props.value;we.set(Ue,Be);const ut=Ue===T;return Be+=1,R.cloneElement(ye,Le({fullWidth:E==="fullWidth",indicator:ut&&!ee&&_e,selected:ut,selectionFollowsFocus:w,onChange:p,textColor:C,value:Ue},Be===1&&T===!1&&!ye.props.tabIndex?{tabIndex:0}:{}))}),lt=ye=>{const Ue=Z.current,ut=xc(Ue).activeElement;if(ut.getAttribute("role")!=="tab")return;let je=m==="horizontal"?"ArrowLeft":"ArrowUp",Ne=m==="horizontal"?"ArrowRight":"ArrowDown";switch(m==="horizontal"&&o&&(je="ArrowRight",Ne="ArrowLeft"),ye.key){case je:ye.preventDefault(),EC(Ue,ut,zK);break;case Ne:ye.preventDefault(),EC(Ue,ut,UK);break;case"Home":ye.preventDefault(),EC(Ue,null,UK);break;case"End":ye.preventDefault(),EC(Ue,null,zK);break}},tt=X();return I.jsxs($et,Le({className:Ze(Q.root,d),ownerState:G,ref:n,as:f},A,{children:[tt.scrollButtonStart,tt.scrollbarSizeListener,I.jsxs(Let,{className:Q.scroller,ownerState:G,style:{overflow:ze.overflow,[D?`margin${o?"Left":"Right"}`:"marginBottom"]:k?void 0:-ze.scrollbarWidth},ref:Je,children:[I.jsx(Fet,{"aria-label":s,"aria-labelledby":a,"aria-orientation":m==="vertical"?"vertical":null,className:Q.flexContainer,ownerState:G,onKeyDown:lt,ref:Z,role:"tablist",children:Xe}),ee&&_e]}),tt.scrollButtonEnd]}))});function jet(t){return Xs("MuiTab",t)}const vd=go("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),Wet=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],Vet=t=>{const{classes:e,textColor:n,fullWidth:r,wrapped:i,icon:o,label:s,selected:a,disabled:l}=t,c={root:["root",o&&s&&"labelIcon",`textColor${an(n)}`,r&&"fullWidth",i&&"wrapped",a&&"selected",l&&"disabled"],iconWrapper:["iconWrapper"]};return za(c,jet,e)},Het=qn(iO,{name:"MuiTab",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.label&&n.icon&&e.labelIcon,e[`textColor${an(n.textColor)}`],n.fullWidth&&e.fullWidth,n.wrapped&&e.wrapped,{[`& .${vd.iconWrapper}`]:e.iconWrapper}]}})(({theme:t,ownerState:e})=>Le({},t.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},e.label&&{flexDirection:e.iconPosition==="top"||e.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},e.icon&&e.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${vd.iconWrapper}`]:Le({},e.iconPosition==="top"&&{marginBottom:6},e.iconPosition==="bottom"&&{marginTop:6},e.iconPosition==="start"&&{marginRight:t.spacing(1)},e.iconPosition==="end"&&{marginLeft:t.spacing(1)})},e.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${vd.selected}`]:{opacity:1},[`&.${vd.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.textColor==="primary"&&{color:(t.vars||t).palette.text.secondary,[`&.${vd.selected}`]:{color:(t.vars||t).palette.primary.main},[`&.${vd.disabled}`]:{color:(t.vars||t).palette.text.disabled}},e.textColor==="secondary"&&{color:(t.vars||t).palette.text.secondary,[`&.${vd.selected}`]:{color:(t.vars||t).palette.secondary.main},[`&.${vd.disabled}`]:{color:(t.vars||t).palette.text.disabled}},e.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},e.wrapped&&{fontSize:t.typography.pxToRem(12)})),tP=R.forwardRef(function(e,n){const r=Ks({props:e,name:"MuiTab"}),{className:i,disabled:o=!1,disableFocusRipple:s=!1,fullWidth:a,icon:l,iconPosition:c="top",indicator:u,label:d,onChange:f,onClick:h,onFocus:g,selected:p,selectionFollowsFocus:m,textColor:v="inherit",value:_,wrapped:w=!1}=r,y=pn(r,Wet),b=Le({},r,{disabled:o,disableFocusRipple:s,selected:p,icon:!!l,iconPosition:c,label:!!d,fullWidth:a,textColor:v,wrapped:w}),x=Vet(b),S=l&&d&&R.isValidElement(l)?R.cloneElement(l,{className:Ze(x.iconWrapper,l.props.className)}):l,C=E=>{!p&&f&&f(E,_),h&&h(E)},T=E=>{m&&!p&&f&&f(E,_),g&&g(E)};return I.jsxs(Het,Le({focusRipple:!s,className:Ze(x.root,i),ref:n,role:"tab","aria-selected":p,disabled:o,onClick:C,onFocus:T,ownerState:b,tabIndex:p?0:-1},y,{children:[c==="top"||c==="start"?I.jsxs(R.Fragment,{children:[S,d]}):I.jsxs(R.Fragment,{children:[d,S]}),u]}))});function oO(){const[t,e]=R.useState(0),n=(r,i)=>{e(i)};return I.jsx(Yy,{sx:{width:"100%",bgcolor:"#1d1d1d"},children:I.jsxs(zet,{value:t,onChange:n,centered:!0,children:[I.jsx(tP,{label:"LandingPage",component:yE,to:"/",sx:{color:"white"}}),I.jsx(tP,{label:"ForeccastPage",component:yE,to:"/forecastpage",sx:{color:"white"}}),I.jsx(tP,{label:"LSTM Training",component:yE,to:"/training",sx:{color:"white"}})]})})}function Get(){return I.jsx(I.Fragment,{children:I.jsx("div",{children:I.jsxs("div",{children:[I.jsxs("div",{className:"mainc",children:[" ",I.jsx(fYe,{})]}),I.jsx(oO,{})]})})})}var B_=t=>t.type==="checkbox",$g=t=>t instanceof Date,_o=t=>t==null;const $ae=t=>typeof t=="object";var vi=t=>!_o(t)&&!Array.isArray(t)&&$ae(t)&&!$g(t),qet=t=>vi(t)&&t.target?B_(t.target)?t.target.checked:t.target.value:t,Xet=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Ket=(t,e)=>t.has(Xet(e)),Yet=t=>{const e=t.constructor&&t.constructor.prototype;return vi(e)&&e.hasOwnProperty("isPrototypeOf")},Qj=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function oa(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(Qj&&(t instanceof Blob||t instanceof FileList))&&(n||vi(t)))if(e=n?[]:{},!n&&!Yet(t))e=t;else for(const r in t)t.hasOwnProperty(r)&&(e[r]=oa(t[r]));else return t;return e}var sO=t=>Array.isArray(t)?t.filter(Boolean):[],Ar=t=>t===void 0,gt=(t,e,n)=>{if(!e||!vi(t))return n;const r=sO(e.split(/[,[\].]+?/)).reduce((i,o)=>_o(i)?i:i[o],t);return Ar(r)||r===t?Ar(t[e])?n:t[e]:r},Rd=t=>typeof t=="boolean",Zj=t=>/^\w*$/.test(t),Lae=t=>sO(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Yn=(t,e,n)=>{let r=-1;const i=Zj(e)?[e]:Lae(e),o=i.length,s=o-1;for(;++r<o;){const a=i[r];let l=n;if(r!==s){const c=t[a];l=vi(c)||Array.isArray(c)?c:isNaN(+i[r+1])?{}:[]}if(a==="__proto__")return;t[a]=l,t=t[a]}return t};const WK={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},cl={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Zc={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};B.createContext(null);var Qet=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const o in t)Object.defineProperty(i,o,{get:()=>{const s=o;return e._proxyFormState[s]!==cl.all&&(e._proxyFormState[s]=!r||cl.all),t[s]}});return i},jo=t=>vi(t)&&!Object.keys(t).length,Zet=(t,e,n,r)=>{n(t);const{name:i,...o}=t;return jo(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(s=>e[s]===cl.all)},NE=t=>Array.isArray(t)?t:[t];function Jet(t){const e=B.useRef(t);e.current=t,B.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}var oc=t=>typeof t=="string",ett=(t,e,n,r,i)=>oc(t)?(r&&e.watch.add(t),gt(n,t,i)):Array.isArray(t)?t.map(o=>(r&&e.watch.add(o),gt(n,o))):(r&&(e.watchAll=!0),n),ttt=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},VK=t=>({isOnSubmit:!t||t===cl.onSubmit,isOnBlur:t===cl.onBlur,isOnChange:t===cl.onChange,isOnAll:t===cl.all,isOnTouch:t===cl.onTouched}),HK=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Qb=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const o=gt(t,i);if(o){const{_f:s,...a}=o;if(s){if(s.refs&&s.refs[0]&&e(s.refs[0],i)&&!r)break;if(s.ref&&e(s.ref,s.name)&&!r)break;Qb(a,e)}else vi(a)&&Qb(a,e)}}};var ntt=(t,e,n)=>{const r=NE(gt(t,n));return Yn(r,"root",e[n]),Yn(t,n,r),t},Jj=t=>t.type==="file",Fd=t=>typeof t=="function",zk=t=>{if(!Qj)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},$E=t=>oc(t),e4=t=>t.type==="radio",jk=t=>t instanceof RegExp;const GK={value:!1,isValid:!1},qK={value:!0,isValid:!0};var Fae=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ar(t[0].attributes.value)?Ar(t[0].value)||t[0].value===""?qK:{value:t[0].value,isValid:!0}:qK:GK}return GK};const XK={isValid:!1,value:null};var Bae=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,XK):XK;function KK(t,e,n="validate"){if($E(t)||Array.isArray(t)&&t.every($E)||Rd(t)&&!t)return{type:n,message:$E(t)?t:"",ref:e}}var Zm=t=>vi(t)&&!jk(t)?t:{value:t,message:""},YK=async(t,e,n,r,i)=>{const{ref:o,refs:s,required:a,maxLength:l,minLength:c,min:u,max:d,pattern:f,validate:h,name:g,valueAsNumber:p,mount:m,disabled:v}=t._f,_=gt(e,g);if(!m||v)return{};const w=s?s[0]:o,y=A=>{r&&w.reportValidity&&(w.setCustomValidity(Rd(A)?"":A||""),w.reportValidity())},b={},x=e4(o),S=B_(o),C=x||S,T=(p||Jj(o))&&Ar(o.value)&&Ar(_)||zk(o)&&o.value===""||_===""||Array.isArray(_)&&!_.length,E=ttt.bind(null,g,n,b),k=(A,O,D,P=Zc.maxLength,N=Zc.minLength)=>{const U=A?O:D;b[g]={type:A?P:N,message:U,ref:o,...E(A?P:N,U)}};if(i?!Array.isArray(_)||!_.length:a&&(!C&&(T||_o(_))||Rd(_)&&!_||S&&!Fae(s).isValid||x&&!Bae(s).isValid)){const{value:A,message:O}=$E(a)?{value:!!a,message:a}:Zm(a);if(A&&(b[g]={type:Zc.required,message:O,ref:w,...E(Zc.required,O)},!n))return y(O),b}if(!T&&(!_o(u)||!_o(d))){let A,O;const D=Zm(d),P=Zm(u);if(!_o(_)&&!isNaN(_)){const N=o.valueAsNumber||_&&+_;_o(D.value)||(A=N>D.value),_o(P.value)||(O=N<P.value)}else{const N=o.valueAsDate||new Date(_),U=G=>new Date(new Date().toDateString()+" "+G),L=o.type=="time",V=o.type=="week";oc(D.value)&&_&&(A=L?U(_)>U(D.value):V?_>D.value:N>new Date(D.value)),oc(P.value)&&_&&(O=L?U(_)<U(P.value):V?_<P.value:N<new Date(P.value))}if((A||O)&&(k(!!A,D.message,P.message,Zc.max,Zc.min),!n))return y(b[g].message),b}if((l||c)&&!T&&(oc(_)||i&&Array.isArray(_))){const A=Zm(l),O=Zm(c),D=!_o(A.value)&&_.length>+A.value,P=!_o(O.value)&&_.length<+O.value;if((D||P)&&(k(D,A.message,O.message),!n))return y(b[g].message),b}if(f&&!T&&oc(_)){const{value:A,message:O}=Zm(f);if(jk(A)&&!_.match(A)&&(b[g]={type:Zc.pattern,message:O,ref:o,...E(Zc.pattern,O)},!n))return y(O),b}if(h){if(Fd(h)){const A=await h(_,e),O=KK(A,w);if(O&&(b[g]={...O,...E(Zc.validate,O.message)},!n))return y(O.message),b}else if(vi(h)){let A={};for(const O in h){if(!jo(A)&&!n)break;const D=KK(await h[O](_,e),w,O);D&&(A={...D,...E(O,D.message)},y(D.message),n&&(b[g]=A))}if(!jo(A)&&(b[g]={ref:w,...A},!n))return b}}return y(!0),b};function rtt(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Ar(t)?r++:t[e[r++]];return t}function itt(t){for(const e in t)if(t.hasOwnProperty(e)&&!Ar(t[e]))return!1;return!0}function ri(t,e){const n=Array.isArray(e)?e:Zj(e)?[e]:Lae(e),r=n.length===1?t:rtt(t,n),i=n.length-1,o=n[i];return r&&delete r[o],i!==0&&(vi(r)&&jo(r)||Array.isArray(r)&&itt(r))&&ri(t,n.slice(0,-1)),t}var nP=()=>{let t=[];return{get observers(){return t},next:i=>{for(const o of t)o.next&&o.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(o=>o!==i)}}),unsubscribe:()=>{t=[]}}},Wk=t=>_o(t)||!$ae(t);function Vh(t,e){if(Wk(t)||Wk(e))return t===e;if($g(t)&&$g(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const o=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const s=e[i];if($g(o)&&$g(s)||vi(o)&&vi(s)||Array.isArray(o)&&Array.isArray(s)?!Vh(o,s):o!==s)return!1}}return!0}var Uae=t=>t.type==="select-multiple",ott=t=>e4(t)||B_(t),rP=t=>zk(t)&&t.isConnected,zae=t=>{for(const e in t)if(Fd(t[e]))return!0;return!1};function Vk(t,e={}){const n=Array.isArray(t);if(vi(t)||n)for(const r in t)Array.isArray(t[r])||vi(t[r])&&!zae(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Vk(t[r],e[r])):_o(t[r])||(e[r]=!0);return e}function jae(t,e,n){const r=Array.isArray(t);if(vi(t)||r)for(const i in t)Array.isArray(t[i])||vi(t[i])&&!zae(t[i])?Ar(e)||Wk(n[i])?n[i]=Array.isArray(t[i])?Vk(t[i],[]):{...Vk(t[i])}:jae(t[i],_o(e)?{}:e[i],n[i]):n[i]=!Vh(t[i],e[i]);return n}var TC=(t,e)=>jae(t,e,Vk(e)),Wae=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Ar(t)?t:e?t===""?NaN:t&&+t:n&&oc(t)?new Date(t):r?r(t):t;function iP(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return Jj(e)?e.files:e4(e)?Bae(t.refs).value:Uae(e)?[...e.selectedOptions].map(({value:n})=>n):B_(e)?Fae(t.refs).value:Wae(Ar(e.value)?t.ref.value:e.value,t)}var stt=(t,e,n,r)=>{const i={};for(const o of t){const s=gt(e,o);s&&Yn(i,o,s._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},X0=t=>Ar(t)?t:jk(t)?t.source:vi(t)?jk(t.value)?t.value.source:t.value:t,att=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function QK(t,e,n){const r=gt(t,n);if(r||Zj(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const o=i.join("."),s=gt(e,o),a=gt(t,o);if(s&&!Array.isArray(s)&&n!==o)return{name:n};if(a&&a.type)return{name:o,error:a};i.pop()}return{name:n}}var ltt=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,ctt=(t,e)=>!sO(gt(t,e)).length&&ri(t,e);const utt={mode:cl.onSubmit,reValidateMode:cl.onChange,shouldFocusError:!0};function dtt(t={}){let e={...utt,...t},n={submitCount:0,isDirty:!1,isLoading:Fd(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=vi(e.defaultValues)||vi(e.values)?oa(e.defaultValues||e.values)||{}:{},o=e.shouldUnregister?{}:oa(i),s={action:!1,mount:!1,watch:!1},a={mount:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},d={values:nP(),array:nP(),state:nP()},f=VK(e.mode),h=VK(e.reValidateMode),g=e.criteriaMode===cl.all,p=Z=>ce=>{clearTimeout(c),c=setTimeout(Z,ce)},m=async Z=>{if(u.isValid||Z){const ce=e.resolver?jo((await C()).errors):await E(r,!0);ce!==n.isValid&&d.state.next({isValid:ce})}},v=(Z,ce)=>{(u.isValidating||u.validatingFields)&&((Z||Array.from(a.mount)).forEach(H=>{H&&(ce?Yn(n.validatingFields,H,ce):ri(n.validatingFields,H))}),d.state.next({validatingFields:n.validatingFields,isValidating:!jo(n.validatingFields)}))},_=(Z,ce=[],H,j,ie=!0,z=!0)=>{if(j&&H){if(s.action=!0,z&&Array.isArray(gt(r,Z))){const K=H(gt(r,Z),j.argA,j.argB);ie&&Yn(r,Z,K)}if(z&&Array.isArray(gt(n.errors,Z))){const K=H(gt(n.errors,Z),j.argA,j.argB);ie&&Yn(n.errors,Z,K),ctt(n.errors,Z)}if(u.touchedFields&&z&&Array.isArray(gt(n.touchedFields,Z))){const K=H(gt(n.touchedFields,Z),j.argA,j.argB);ie&&Yn(n.touchedFields,Z,K)}u.dirtyFields&&(n.dirtyFields=TC(i,o)),d.state.next({name:Z,isDirty:A(Z,ce),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Yn(o,Z,ce)},w=(Z,ce)=>{Yn(n.errors,Z,ce),d.state.next({errors:n.errors})},y=Z=>{n.errors=Z,d.state.next({errors:n.errors,isValid:!1})},b=(Z,ce,H,j)=>{const ie=gt(r,Z);if(ie){const z=gt(o,Z,Ar(H)?gt(i,Z):H);Ar(z)||j&&j.defaultChecked||ce?Yn(o,Z,ce?z:iP(ie._f)):P(Z,z),s.mount&&m()}},x=(Z,ce,H,j,ie)=>{let z=!1,K=!1;const F={name:Z},W=!!(gt(r,Z)&&gt(r,Z)._f&&gt(r,Z)._f.disabled);if(!H||j){u.isDirty&&(K=n.isDirty,n.isDirty=F.isDirty=A(),z=K!==F.isDirty);const X=W||Vh(gt(i,Z),ce);K=!!(!W&&gt(n.dirtyFields,Z)),X||W?ri(n.dirtyFields,Z):Yn(n.dirtyFields,Z,!0),F.dirtyFields=n.dirtyFields,z=z||u.dirtyFields&&K!==!X}if(H){const X=gt(n.touchedFields,Z);X||(Yn(n.touchedFields,Z,H),F.touchedFields=n.touchedFields,z=z||u.touchedFields&&X!==H)}return z&&ie&&d.state.next(F),z?F:{}},S=(Z,ce,H,j)=>{const ie=gt(n.errors,Z),z=u.isValid&&Rd(ce)&&n.isValid!==ce;if(t.delayError&&H?(l=p(()=>w(Z,H)),l(t.delayError)):(clearTimeout(c),l=null,H?Yn(n.errors,Z,H):ri(n.errors,Z)),(H?!Vh(ie,H):ie)||!jo(j)||z){const K={...j,...z&&Rd(ce)?{isValid:ce}:{},errors:n.errors,name:Z};n={...n,...K},d.state.next(K)}},C=async Z=>{v(Z,!0);const ce=await e.resolver(o,e.context,stt(Z||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return v(Z),ce},T=async Z=>{const{errors:ce}=await C(Z);if(Z)for(const H of Z){const j=gt(ce,H);j?Yn(n.errors,H,j):ri(n.errors,H)}else n.errors=ce;return ce},E=async(Z,ce,H={valid:!0})=>{for(const j in Z){const ie=Z[j];if(ie){const{_f:z,...K}=ie;if(z){const F=a.array.has(z.name);v([j],!0);const W=await YK(ie,o,g,e.shouldUseNativeValidation&&!ce,F);if(v([j]),W[z.name]&&(H.valid=!1,ce))break;!ce&&(gt(W,z.name)?F?ntt(n.errors,W,z.name):Yn(n.errors,z.name,W[z.name]):ri(n.errors,z.name))}!jo(K)&&await E(K,ce,H)}}return H.valid},k=()=>{for(const Z of a.unMount){const ce=gt(r,Z);ce&&(ce._f.refs?ce._f.refs.every(H=>!rP(H)):!rP(ce._f.ref))&&se(Z)}a.unMount=new Set},A=(Z,ce)=>(Z&&ce&&Yn(o,Z,ce),!Vh(Q(),i)),O=(Z,ce,H)=>ett(Z,a,{...s.mount?o:Ar(ce)?i:oc(Z)?{[Z]:ce}:ce},H,ce),D=Z=>sO(gt(s.mount?o:i,Z,t.shouldUnregister?gt(i,Z,[]):[])),P=(Z,ce,H={})=>{const j=gt(r,Z);let ie=ce;if(j){const z=j._f;z&&(!z.disabled&&Yn(o,Z,Wae(ce,z)),ie=zk(z.ref)&&_o(ce)?"":ce,Uae(z.ref)?[...z.ref.options].forEach(K=>K.selected=ie.includes(K.value)):z.refs?B_(z.ref)?z.refs.length>1?z.refs.forEach(K=>(!K.defaultChecked||!K.disabled)&&(K.checked=Array.isArray(ie)?!!ie.find(F=>F===K.value):ie===K.value)):z.refs[0]&&(z.refs[0].checked=!!ie):z.refs.forEach(K=>K.checked=K.value===ie):Jj(z.ref)?z.ref.value="":(z.ref.value=ie,z.ref.type||d.values.next({name:Z,values:{...o}})))}(H.shouldDirty||H.shouldTouch)&&x(Z,ie,H.shouldTouch,H.shouldDirty,!0),H.shouldValidate&&G(Z)},N=(Z,ce,H)=>{for(const j in ce){const ie=ce[j],z=`${Z}.${j}`,K=gt(r,z);(a.array.has(Z)||!Wk(ie)||K&&!K._f)&&!$g(ie)?N(z,ie,H):P(z,ie,H)}},U=(Z,ce,H={})=>{const j=gt(r,Z),ie=a.array.has(Z),z=oa(ce);Yn(o,Z,z),ie?(d.array.next({name:Z,values:{...o}}),(u.isDirty||u.dirtyFields)&&H.shouldDirty&&d.state.next({name:Z,dirtyFields:TC(i,o),isDirty:A(Z,z)})):j&&!j._f&&!_o(z)?N(Z,z,H):P(Z,z,H),HK(Z,a)&&d.state.next({...n}),d.values.next({name:s.mount?Z:void 0,values:{...o}})},L=async Z=>{s.mount=!0;const ce=Z.target;let H=ce.name,j=!0;const ie=gt(r,H),z=()=>ce.type?iP(ie._f):qet(Z),K=F=>{j=Number.isNaN(F)||F===gt(o,H,F)};if(ie){let F,W;const X=z(),ae=Z.type===WK.BLUR||Z.type===WK.FOCUS_OUT,he=!att(ie._f)&&!e.resolver&&!gt(n.errors,H)&&!ie._f.deps||ltt(ae,gt(n.touchedFields,H),n.isSubmitted,h,f),_e=HK(H,a,ae);Yn(o,H,X),ae?(ie._f.onBlur&&ie._f.onBlur(Z),l&&l(0)):ie._f.onChange&&ie._f.onChange(Z);const Be=x(H,X,ae,!1),Xe=!jo(Be)||_e;if(!ae&&d.values.next({name:H,type:Z.type,values:{...o}}),he)return u.isValid&&m(),Xe&&d.state.next({name:H,..._e?{}:Be});if(!ae&&_e&&d.state.next({...n}),e.resolver){const{errors:lt}=await C([H]);if(K(X),j){const tt=QK(n.errors,r,H),ye=QK(lt,r,tt.name||H);F=ye.error,H=ye.name,W=jo(lt)}}else v([H],!0),F=(await YK(ie,o,g,e.shouldUseNativeValidation))[H],v([H]),K(X),j&&(F?W=!1:u.isValid&&(W=await E(r,!0)));j&&(ie._f.deps&&G(ie._f.deps),S(H,W,F,Be))}},V=(Z,ce)=>{if(gt(n.errors,ce)&&Z.focus)return Z.focus(),1},G=async(Z,ce={})=>{let H,j;const ie=NE(Z);if(e.resolver){const z=await T(Ar(Z)?Z:ie);H=jo(z),j=Z?!ie.some(K=>gt(z,K)):H}else Z?(j=(await Promise.all(ie.map(async z=>{const K=gt(r,z);return await E(K&&K._f?{[z]:K}:K)}))).every(Boolean),!(!j&&!n.isValid)&&m()):j=H=await E(r);return d.state.next({...!oc(Z)||u.isValid&&H!==n.isValid?{}:{name:Z},...e.resolver||!Z?{isValid:H}:{},errors:n.errors}),ce.shouldFocus&&!j&&Qb(r,V,Z?ie:a.mount),j},Q=Z=>{const ce={...s.mount?o:i};return Ar(Z)?ce:oc(Z)?gt(ce,Z):Z.map(H=>gt(ce,H))},te=(Z,ce)=>({invalid:!!gt((ce||n).errors,Z),isDirty:!!gt((ce||n).dirtyFields,Z),error:gt((ce||n).errors,Z),isValidating:!!gt(n.validatingFields,Z),isTouched:!!gt((ce||n).touchedFields,Z)}),ne=Z=>{Z&&NE(Z).forEach(ce=>ri(n.errors,ce)),d.state.next({errors:Z?n.errors:{}})},ee=(Z,ce,H)=>{const j=(gt(r,Z,{_f:{}})._f||{}).ref,ie=gt(n.errors,Z)||{},{ref:z,message:K,type:F,...W}=ie;Yn(n.errors,Z,{...W,...ce,ref:j}),d.state.next({name:Z,errors:n.errors,isValid:!1}),H&&H.shouldFocus&&j&&j.focus&&j.focus()},re=(Z,ce)=>Fd(Z)?d.values.subscribe({next:H=>Z(O(void 0,ce),H)}):O(Z,ce,!0),se=(Z,ce={})=>{for(const H of Z?NE(Z):a.mount)a.mount.delete(H),a.array.delete(H),ce.keepValue||(ri(r,H),ri(o,H)),!ce.keepError&&ri(n.errors,H),!ce.keepDirty&&ri(n.dirtyFields,H),!ce.keepTouched&&ri(n.touchedFields,H),!ce.keepIsValidating&&ri(n.validatingFields,H),!e.shouldUnregister&&!ce.keepDefaultValue&&ri(i,H);d.values.next({values:{...o}}),d.state.next({...n,...ce.keepDirty?{isDirty:A()}:{}}),!ce.keepIsValid&&m()},me=({disabled:Z,name:ce,field:H,fields:j,value:ie})=>{if(Rd(Z)&&s.mount||Z){const z=Z?void 0:Ar(ie)?iP(H?H._f:gt(j,ce)._f):ie;Yn(o,ce,z),x(ce,z,!1,!1,!0)}},Me=(Z,ce={})=>{let H=gt(r,Z);const j=Rd(ce.disabled);return Yn(r,Z,{...H||{},_f:{...H&&H._f?H._f:{ref:{name:Z}},name:Z,mount:!0,...ce}}),a.mount.add(Z),H?me({field:H,disabled:ce.disabled,name:Z,value:ce.value}):b(Z,!0,ce.value),{...j?{disabled:ce.disabled}:{},...e.progressive?{required:!!ce.required,min:X0(ce.min),max:X0(ce.max),minLength:X0(ce.minLength),maxLength:X0(ce.maxLength),pattern:X0(ce.pattern)}:{},name:Z,onChange:L,onBlur:L,ref:ie=>{if(ie){Me(Z,ce),H=gt(r,Z);const z=Ar(ie.value)&&ie.querySelectorAll&&ie.querySelectorAll("input,select,textarea")[0]||ie,K=ott(z),F=H._f.refs||[];if(K?F.find(W=>W===z):z===H._f.ref)return;Yn(r,Z,{_f:{...H._f,...K?{refs:[...F.filter(rP),z,...Array.isArray(gt(i,Z))?[{}]:[]],ref:{type:z.type,name:Z}}:{ref:z}}}),b(Z,!1,void 0,z)}else H=gt(r,Z,{}),H._f&&(H._f.mount=!1),(e.shouldUnregister||ce.shouldUnregister)&&!(Ket(a.array,Z)&&s.action)&&a.unMount.add(Z)}}},de=()=>e.shouldFocusError&&Qb(r,V,a.mount),Ce=Z=>{Rd(Z)&&(d.state.next({disabled:Z}),Qb(r,(ce,H)=>{const j=gt(r,H);j&&(ce.disabled=j._f.disabled||Z,Array.isArray(j._f.refs)&&j._f.refs.forEach(ie=>{ie.disabled=j._f.disabled||Z}))},0,!1))},Ee=(Z,ce)=>async H=>{let j;H&&(H.preventDefault&&H.preventDefault(),H.persist&&H.persist());let ie=oa(o);if(d.state.next({isSubmitting:!0}),e.resolver){const{errors:z,values:K}=await C();n.errors=z,ie=K}else await E(r);if(ri(n.errors,"root"),jo(n.errors)){d.state.next({errors:{}});try{await Z(ie,H)}catch(z){j=z}}else ce&&await ce({...n.errors},H),de(),setTimeout(de);if(d.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:jo(n.errors)&&!j,submitCount:n.submitCount+1,errors:n.errors}),j)throw j},q=(Z,ce={})=>{gt(r,Z)&&(Ar(ce.defaultValue)?U(Z,oa(gt(i,Z))):(U(Z,ce.defaultValue),Yn(i,Z,oa(ce.defaultValue))),ce.keepTouched||ri(n.touchedFields,Z),ce.keepDirty||(ri(n.dirtyFields,Z),n.isDirty=ce.defaultValue?A(Z,oa(gt(i,Z))):A()),ce.keepError||(ri(n.errors,Z),u.isValid&&m()),d.state.next({...n}))},Ve=(Z,ce={})=>{const H=Z?oa(Z):i,j=oa(H),ie=jo(Z),z=ie?i:j;if(ce.keepDefaultValues||(i=H),!ce.keepValues){if(ce.keepDirtyValues)for(const K of a.mount)gt(n.dirtyFields,K)?Yn(z,K,gt(o,K)):U(K,gt(z,K));else{if(Qj&&Ar(Z))for(const K of a.mount){const F=gt(r,K);if(F&&F._f){const W=Array.isArray(F._f.refs)?F._f.refs[0]:F._f.ref;if(zk(W)){const X=W.closest("form");if(X){X.reset();break}}}}r={}}o=t.shouldUnregister?ce.keepDefaultValues?oa(i):{}:oa(z),d.array.next({values:{...z}}),d.values.next({values:{...z}})}a={mount:ce.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},s.mount=!u.isValid||!!ce.keepIsValid||!!ce.keepDirtyValues,s.watch=!!t.shouldUnregister,d.state.next({submitCount:ce.keepSubmitCount?n.submitCount:0,isDirty:ie?!1:ce.keepDirty?n.isDirty:!!(ce.keepDefaultValues&&!Vh(Z,i)),isSubmitted:ce.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ie?{}:ce.keepDirtyValues?ce.keepDefaultValues&&o?TC(i,o):n.dirtyFields:ce.keepDefaultValues&&Z?TC(i,Z):ce.keepDirty?n.dirtyFields:{},touchedFields:ce.keepTouched?n.touchedFields:{},errors:ce.keepErrors?n.errors:{},isSubmitSuccessful:ce.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},ze=(Z,ce)=>Ve(Fd(Z)?Z(o):Z,ce);return{control:{register:Me,unregister:se,getFieldState:te,handleSubmit:Ee,setError:ee,_executeSchema:C,_getWatch:O,_getDirty:A,_updateValid:m,_removeUnmounted:k,_updateFieldArray:_,_updateDisabledField:me,_getFieldArray:D,_reset:Ve,_resetDefaultValues:()=>Fd(e.defaultValues)&&e.defaultValues().then(Z=>{ze(Z,e.resetOptions),d.state.next({isLoading:!1})}),_updateFormState:Z=>{n={...n,...Z}},_disableForm:Ce,_subjects:d,_proxyFormState:u,_setErrors:y,get _fields(){return r},get _formValues(){return o},get _state(){return s},set _state(Z){s=Z},get _defaultValues(){return i},get _names(){return a},set _names(Z){a=Z},get _formState(){return n},set _formState(Z){n=Z},get _options(){return e},set _options(Z){e={...e,...Z}}},trigger:G,register:Me,handleSubmit:Ee,watch:re,setValue:U,getValues:Q,reset:ze,resetField:q,clearErrors:ne,unregister:se,setError:ee,setFocus:(Z,ce={})=>{const H=gt(r,Z),j=H&&H._f;if(j){const ie=j.refs?j.refs[0]:j.ref;ie.focus&&(ie.focus(),ce.shouldSelect&&ie.select())}},getFieldState:te}}function Vae(t={}){const e=B.useRef(),n=B.useRef(),[r,i]=B.useState({isDirty:!1,isValidating:!1,isLoading:Fd(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Fd(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...dtt(t),formState:r});const o=e.current.control;return o._options=t,Jet({subject:o._subjects.state,next:s=>{Zet(s,o._proxyFormState,o._updateFormState)&&i({...o._formState})}}),B.useEffect(()=>o._disableForm(t.disabled),[o,t.disabled]),B.useEffect(()=>{if(o._proxyFormState.isDirty){const s=o._getDirty();s!==r.isDirty&&o._subjects.state.next({isDirty:s})}},[o,r.isDirty]),B.useEffect(()=>{t.values&&!Vh(t.values,n.current)?(o._reset(t.values,o._options.resetOptions),n.current=t.values,i(s=>({...s}))):o._resetDefaultValues()},[t.values,o]),B.useEffect(()=>{t.errors&&o._setErrors(t.errors)},[t.errors,o]),B.useEffect(()=>{o._state.mount||(o._updateValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),B.useEffect(()=>{t.shouldUnregister&&o._subjects.values.next({values:o._getWatch()})},[t.shouldUnregister,o]),e.current.formState=Qet(r,o),e.current}const AF=({children:t,...e})=>I.jsx("div",{style:{color:"#f23838",textAlign:"center",margin:"0.5rem 0"},...e,children:t}),Hae=()=>I.jsx("div",{className:"spinner","aria-label":"spinner-icon",children:I.jsx("div",{className:"spinner-circle"})}),Uu=R.createContext({}),t4=R.forwardRef(({controlId:t,as:e="div",...n},r)=>{const i=R.useMemo(()=>({controlId:t}),[t]);return I.jsx(Uu.Provider,{value:i,children:I.jsx(e,{...n,ref:r})})});t4.displayName="FormGroup";const Hk=R.forwardRef(({bsPrefix:t,className:e,children:n,controlId:r,label:i,...o},s)=>(t=pi(t,"form-floating"),I.jsxs(t4,{ref:s,className:yt(e,t),controlId:r,...o,children:[n,I.jsx("label",{htmlFor:r,children:i})]})));Hk.displayName="FloatingLabel";const ftt={type:De.string,tooltip:De.bool,as:De.elementType},aO=R.forwardRef(({as:t="div",className:e,type:n="valid",tooltip:r=!1,...i},o)=>I.jsx(t,{...i,ref:o,className:yt(e,`${n}-${r?"tooltip":"feedback"}`)}));aO.displayName="Feedback";aO.propTypes=ftt;const n4=R.forwardRef(({id:t,bsPrefix:e,className:n,type:r="checkbox",isValid:i=!1,isInvalid:o=!1,as:s="input",...a},l)=>{const{controlId:c}=R.useContext(Uu);return e=pi(e,"form-check-input"),I.jsx(s,{...a,ref:l,type:r,id:t||c,className:yt(n,e,i&&"is-valid",o&&"is-invalid")})});n4.displayName="FormCheckInput";const Gk=R.forwardRef(({bsPrefix:t,className:e,htmlFor:n,...r},i)=>{const{controlId:o}=R.useContext(Uu);return t=pi(t,"form-check-label"),I.jsx("label",{...r,ref:i,htmlFor:n||o,className:yt(e,t)})});Gk.displayName="FormCheckLabel";function htt(t,e){let n=0;return R.Children.map(t,r=>R.isValidElement(r)?e(r,n++):r)}function ptt(t,e){return R.Children.toArray(t).some(n=>R.isValidElement(n)&&n.type===e)}const Gae=R.forwardRef(({id:t,bsPrefix:e,bsSwitchPrefix:n,inline:r=!1,reverse:i=!1,disabled:o=!1,isValid:s=!1,isInvalid:a=!1,feedbackTooltip:l=!1,feedback:c,feedbackType:u,className:d,style:f,title:h="",type:g="checkbox",label:p,children:m,as:v="input",..._},w)=>{e=pi(e,"form-check"),n=pi(n,"form-switch");const{controlId:y}=R.useContext(Uu),b=R.useMemo(()=>({controlId:t||y}),[y,t]),x=!m&&p!=null&&p!==!1||ptt(m,Gk),S=I.jsx(n4,{..._,type:g==="switch"?"checkbox":g,ref:w,isValid:s,isInvalid:a,disabled:o,as:v});return I.jsx(Uu.Provider,{value:b,children:I.jsx("div",{style:f,className:yt(d,x&&e,r&&`${e}-inline`,i&&`${e}-reverse`,g==="switch"&&n),children:m||I.jsxs(I.Fragment,{children:[S,x&&I.jsx(Gk,{title:h,children:p}),c&&I.jsx(aO,{type:u,tooltip:l,children:c})]})})})});Gae.displayName="FormCheck";const qk=Object.assign(Gae,{Input:n4,Label:Gk}),qae=R.forwardRef(({bsPrefix:t,type:e,size:n,htmlSize:r,id:i,className:o,isValid:s=!1,isInvalid:a=!1,plaintext:l,readOnly:c,as:u="input",...d},f)=>{const{controlId:h}=R.useContext(Uu);return t=pi(t,"form-control"),I.jsx(u,{...d,type:e,size:r,ref:f,readOnly:c,id:i||h,className:yt(o,l?`${t}-plaintext`:t,n&&`${t}-${n}`,e==="color"&&`${t}-color`,s&&"is-valid",a&&"is-invalid")})});qae.displayName="FormControl";const mtt=Object.assign(qae,{Feedback:aO}),Xae=R.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=pi(e,"form-floating"),I.jsx(n,{ref:i,className:yt(t,e),...r})));Xae.displayName="FormFloating";function gtt({as:t,bsPrefix:e,className:n,...r}){e=pi(e,"col");const i=Y1e(),o=Q1e(),s=[],a=[];return i.forEach(l=>{const c=r[l];delete r[l];let u,d,f;typeof c=="object"&&c!=null?{span:u,offset:d,order:f}=c:u=c;const h=l!==o?`-${l}`:"";u&&s.push(u===!0?`${e}${h}`:`${e}${h}-${u}`),f!=null&&a.push(`order${h}-${f}`),d!=null&&a.push(`offset${h}-${d}`)}),[{...r,className:yt(n,...s,...a)},{as:t,bsPrefix:e,spans:s}]}const Kae=R.forwardRef((t,e)=>{const[{className:n,...r},{as:i="div",bsPrefix:o,spans:s}]=gtt(t);return I.jsx(i,{...r,ref:e,className:yt(n,!s.length&&o)})});Kae.displayName="Col";const Yae=R.forwardRef(({as:t="label",bsPrefix:e,column:n=!1,visuallyHidden:r=!1,className:i,htmlFor:o,...s},a)=>{const{controlId:l}=R.useContext(Uu);e=pi(e,"form-label");let c="col-form-label";typeof n=="string"&&(c=`${c} ${c}-${n}`);const u=yt(i,e,r&&"visually-hidden",n&&c);return o=o||l,n?I.jsx(Kae,{ref:a,as:"label",className:u,htmlFor:o,...s}):I.jsx(t,{ref:a,className:u,htmlFor:o,...s})});Yae.displayName="FormLabel";const Qae=R.forwardRef(({bsPrefix:t,className:e,id:n,...r},i)=>{const{controlId:o}=R.useContext(Uu);return t=pi(t,"form-range"),I.jsx("input",{...r,type:"range",ref:i,className:yt(e,t),id:n||o})});Qae.displayName="FormRange";const Zae=R.forwardRef(({bsPrefix:t,size:e,htmlSize:n,className:r,isValid:i=!1,isInvalid:o=!1,id:s,...a},l)=>{const{controlId:c}=R.useContext(Uu);return t=pi(t,"form-select"),I.jsx("select",{...a,size:n,ref:l,className:yt(r,t,e&&`${t}-${e}`,i&&"is-valid",o&&"is-invalid"),id:s||c})});Zae.displayName="FormSelect";const Jae=R.forwardRef(({bsPrefix:t,className:e,as:n="small",muted:r,...i},o)=>(t=pi(t,"form-text"),I.jsx(n,{...i,ref:o,className:yt(e,t,r&&"text-muted")})));Jae.displayName="FormText";const ele=R.forwardRef((t,e)=>I.jsx(qk,{...t,ref:e,type:"switch"}));ele.displayName="Switch";const vtt=Object.assign(ele,{Input:qk.Input,Label:qk.Label}),ytt={_ref:De.any,validated:De.bool,as:De.elementType},r4=R.forwardRef(({className:t,validated:e,as:n="form",...r},i)=>I.jsx(n,{...r,ref:i,className:yt(t,e&&"was-validated")}));r4.displayName="Form";r4.propTypes=ytt;const oP=Object.assign(r4,{Group:t4,Control:mtt,Floating:Xae,Check:qk,Switch:vtt,Label:Yae,Text:Jae,Range:Qae,Select:Zae,FloatingLabel:Hk});var MF=function(t,e){return MF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},MF(t,e)};function btt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");MF(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var _i=function(){return _i=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_i.apply(this,arguments)};function xtt(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Jm(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,[])).next())})}function eg(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function ql(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}var Th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function i4(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function o4(t,e){return t(e={exports:{}},e.exports),e.exports}var bh=o4(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function r(){var i=this;this.locked=new Map,this.addToLocked=function(o,s){var a=i.locked.get(o);a===void 0?s===void 0?i.locked.set(o,[]):i.locked.set(o,[s]):s!==void 0&&(a.unshift(s),i.locked.set(o,a))},this.isLocked=function(o){return i.locked.has(o)},this.lock=function(o){return new Promise(function(s,a){i.isLocked(o)?i.addToLocked(o,s):(i.addToLocked(o),s())})},this.unlock=function(o){var s=i.locked.get(o);if(s!==void 0&&s.length!==0){var a=s.pop();i.locked.set(o,s),a!==void 0&&setTimeout(a,0)}else i.locked.delete(o)}}return r.getInstance=function(){return r.instance===void 0&&(r.instance=new r),r.instance},r}();e.default=function(){return n.getInstance()}});i4(bh);var wtt=i4(o4(function(t,e){var n=Th&&Th.__awaiter||function(u,d,f,h){return new(f||(f=Promise))(function(g,p){function m(w){try{_(h.next(w))}catch(y){p(y)}}function v(w){try{_(h.throw(w))}catch(y){p(y)}}function _(w){w.done?g(w.value):new f(function(y){y(w.value)}).then(m,v)}_((h=h.apply(u,d||[])).next())})},r=Th&&Th.__generator||function(u,d){var f,h,g,p,m={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return p={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function v(_){return function(w){return function(y){if(f)throw new TypeError("Generator is already executing.");for(;m;)try{if(f=1,h&&(g=2&y[0]?h.return:y[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,y[1])).done)return g;switch(h=0,g&&(y=[2&y[0],g.value]),y[0]){case 0:case 1:g=y;break;case 4:return m.label++,{value:y[1],done:!1};case 5:m.label++,h=y[1],y=[0];continue;case 7:y=m.ops.pop(),m.trys.pop();continue;default:if(g=m.trys,!((g=g.length>0&&g[g.length-1])||y[0]!==6&&y[0]!==2)){m=0;continue}if(y[0]===3&&(!g||y[1]>g[0]&&y[1]<g[3])){m.label=y[1];break}if(y[0]===6&&m.label<g[1]){m.label=g[1],g=y;break}if(g&&m.label<g[2]){m.label=g[2],m.ops.push(y);break}g[2]&&m.ops.pop(),m.trys.pop();continue}y=d.call(u,m)}catch(b){y=[6,b],h=0}finally{f=g=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([_,w])}}},i=Th;Object.defineProperty(e,"__esModule",{value:!0});var o="browser-tabs-lock-key",s={key:function(u){return n(i,void 0,void 0,function(){return r(this,function(d){throw new Error("Unsupported")})})},getItem:function(u){return n(i,void 0,void 0,function(){return r(this,function(d){throw new Error("Unsupported")})})},clear:function(){return n(i,void 0,void 0,function(){return r(this,function(u){return[2,window.localStorage.clear()]})})},removeItem:function(u){return n(i,void 0,void 0,function(){return r(this,function(d){throw new Error("Unsupported")})})},setItem:function(u,d){return n(i,void 0,void 0,function(){return r(this,function(f){throw new Error("Unsupported")})})},keySync:function(u){return window.localStorage.key(u)},getItemSync:function(u){return window.localStorage.getItem(u)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(u){return window.localStorage.removeItem(u)},setItemSync:function(u,d){return window.localStorage.setItem(u,d)}};function a(u){return new Promise(function(d){return setTimeout(d,u)})}function l(u){for(var d="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",f="",h=0;h<u;h++)f+=d[Math.floor(Math.random()*d.length)];return f}var c=function(){function u(d){this.acquiredIatSet=new Set,this.storageHandler=void 0,this.id=Date.now().toString()+l(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),this.storageHandler=d,u.waiters===void 0&&(u.waiters=[])}return u.prototype.acquireLock=function(d,f){return f===void 0&&(f=5e3),n(this,void 0,void 0,function(){var h,g,p,m,v,_,w;return r(this,function(y){switch(y.label){case 0:h=Date.now()+l(4),g=Date.now()+f,p=o+"-"+d,m=this.storageHandler===void 0?s:this.storageHandler,y.label=1;case 1:return Date.now()<g?[4,a(30)]:[3,8];case 2:return y.sent(),m.getItemSync(p)!==null?[3,5]:(v=this.id+"-"+d+"-"+h,[4,a(Math.floor(25*Math.random()))]);case 3:return y.sent(),m.setItemSync(p,JSON.stringify({id:this.id,iat:h,timeoutKey:v,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,a(30)];case 4:return y.sent(),(_=m.getItemSync(p))!==null&&(w=JSON.parse(_)).id===this.id&&w.iat===h?(this.acquiredIatSet.add(h),this.refreshLockWhileAcquired(p,h),[2,!0]):[3,7];case 5:return u.lockCorrector(this.storageHandler===void 0?s:this.storageHandler),[4,this.waitForSomethingToChange(g)];case 6:y.sent(),y.label=7;case 7:return h=Date.now()+l(4),[3,1];case 8:return[2,!1]}})})},u.prototype.refreshLockWhileAcquired=function(d,f){return n(this,void 0,void 0,function(){var h=this;return r(this,function(g){return setTimeout(function(){return n(h,void 0,void 0,function(){var p,m,v;return r(this,function(_){switch(_.label){case 0:return[4,bh.default().lock(f)];case 1:return _.sent(),this.acquiredIatSet.has(f)?(p=this.storageHandler===void 0?s:this.storageHandler,(m=p.getItemSync(d))===null?(bh.default().unlock(f),[2]):((v=JSON.parse(m)).timeRefreshed=Date.now(),p.setItemSync(d,JSON.stringify(v)),bh.default().unlock(f),this.refreshLockWhileAcquired(d,f),[2])):(bh.default().unlock(f),[2])}})})},1e3),[2]})})},u.prototype.waitForSomethingToChange=function(d){return n(this,void 0,void 0,function(){return r(this,function(f){switch(f.label){case 0:return[4,new Promise(function(h){var g=!1,p=Date.now(),m=!1;function v(){if(m||(window.removeEventListener("storage",v),u.removeFromWaiting(v),clearTimeout(_),m=!0),!g){g=!0;var w=50-(Date.now()-p);w>0?setTimeout(h,w):h(null)}}window.addEventListener("storage",v),u.addToWaiting(v);var _=setTimeout(v,Math.max(0,d-Date.now()))})];case 1:return f.sent(),[2]}})})},u.addToWaiting=function(d){this.removeFromWaiting(d),u.waiters!==void 0&&u.waiters.push(d)},u.removeFromWaiting=function(d){u.waiters!==void 0&&(u.waiters=u.waiters.filter(function(f){return f!==d}))},u.notifyWaiters=function(){u.waiters!==void 0&&u.waiters.slice().forEach(function(d){return d()})},u.prototype.releaseLock=function(d){return n(this,void 0,void 0,function(){return r(this,function(f){switch(f.label){case 0:return[4,this.releaseLock__private__(d)];case 1:return[2,f.sent()]}})})},u.prototype.releaseLock__private__=function(d){return n(this,void 0,void 0,function(){var f,h,g,p;return r(this,function(m){switch(m.label){case 0:return f=this.storageHandler===void 0?s:this.storageHandler,h=o+"-"+d,(g=f.getItemSync(h))===null?[2]:(p=JSON.parse(g)).id!==this.id?[3,2]:[4,bh.default().lock(p.iat)];case 1:m.sent(),this.acquiredIatSet.delete(p.iat),f.removeItemSync(h),bh.default().unlock(p.iat),u.notifyWaiters(),m.label=2;case 2:return[2]}})})},u.lockCorrector=function(d){for(var f=Date.now()-5e3,h=d,g=[],p=0;;){var m=h.keySync(p);if(m===null)break;g.push(m),p++}for(var v=!1,_=0;_<g.length;_++){var w=g[_];if(w.includes(o)){var y=h.getItemSync(w);if(y!==null){var b=JSON.parse(y);(b.timeRefreshed===void 0&&b.timeAcquired<f||b.timeRefreshed!==void 0&&b.timeRefreshed<f)&&(h.removeItemSync(w),v=!0)}}}v&&u.notifyWaiters()},u.waiters=void 0,u}();e.default=c}));const _tt={timeoutInSeconds:60},tle={name:"auth0-spa-js",version:"2.1.3"},nle=()=>Date.now();class oo extends Error{constructor(e,n){super(n),this.error=e,this.error_description=n,Object.setPrototypeOf(this,oo.prototype)}static fromPayload({error:e,error_description:n}){return new oo(e,n)}}let Stt=class rle extends oo{constructor(e,n,r,i=null){super(e,n),this.state=r,this.appState=i,Object.setPrototypeOf(this,rle.prototype)}};class Cw extends oo{constructor(){super("timeout","Timeout"),Object.setPrototypeOf(this,Cw.prototype)}}class s4 extends Cw{constructor(e){super(),this.popup=e,Object.setPrototypeOf(this,s4.prototype)}}let Ctt=class ile extends oo{constructor(e){super("cancelled","Popup closed"),this.popup=e,Object.setPrototypeOf(this,ile.prototype)}};class a4 extends oo{constructor(e,n,r){super(e,n),this.mfa_token=r,Object.setPrototypeOf(this,a4.prototype)}}let ole=class sle extends oo{constructor(e,n){super("missing_refresh_token",`Missing Refresh Token (audience: '${ZK(e,["default"])}', scope: '${ZK(n)}')`),this.audience=e,this.scope=n,Object.setPrototypeOf(this,sle.prototype)}};function ZK(t,e=[]){return t&&!e.includes(t)?t:""}const LE=()=>window.crypto,sP=()=>{const t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.";let e="";return Array.from(LE().getRandomValues(new Uint8Array(43))).forEach(n=>e+=t[n%t.length]),e},JK=t=>btoa(t),IF=t=>{var{clientId:e}=t,n=ql(t,["clientId"]);return new URLSearchParams((r=>Object.keys(r).filter(i=>r[i]!==void 0).reduce((i,o)=>Object.assign(Object.assign({},i),{[o]:r[o]}),{}))(Object.assign({client_id:e},n))).toString()},eY=t=>(e=>decodeURIComponent(atob(e).split("").map(n=>"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)).join("")))(t.replace(/_/g,"/").replace(/-/g,"+")),Ett=async(t,e)=>{const n=await fetch(t,e);return{ok:n.ok,json:await n.json()}},Ttt=async(t,e,n)=>{const r=new AbortController;let i;return e.signal=r.signal,Promise.race([Ett(t,e),new Promise((o,s)=>{i=setTimeout(()=>{r.abort(),s(new Error("Timeout when executing 'fetch'"))},n)})]).finally(()=>{clearTimeout(i)})},ktt=async(t,e,n,r,i,o,s)=>{return a={auth:{audience:e,scope:n},timeout:i,fetchUrl:t,fetchOptions:r,useFormData:s},l=o,new Promise(function(c,u){const d=new MessageChannel;d.port1.onmessage=function(f){f.data.error?u(new Error(f.data.error)):c(f.data),d.port1.close()},l.postMessage(a,[d.port2])});var a,l},Att=async(t,e,n,r,i,o,s=1e4)=>i?ktt(t,e,n,r,s,i,o):Ttt(t,r,s);async function Mtt(t,e){var{baseUrl:n,timeout:r,audience:i,scope:o,auth0Client:s,useFormData:a}=t,l=ql(t,["baseUrl","timeout","audience","scope","auth0Client","useFormData"]);const c=a?IF(l):JSON.stringify(l);return await async function(u,d,f,h,g,p,m){let v,_=null;for(let C=0;C<3;C++)try{v=await Att(u,f,h,g,p,m,d),_=null;break}catch(T){_=T}if(_)throw _;const w=v.json,{error:y,error_description:b}=w,x=ql(w,["error","error_description"]),{ok:S}=v;if(!S){const C=b||`HTTP error. Unable to fetch ${u}`;throw y==="mfa_required"?new a4(y,C,x.mfa_token):y==="missing_refresh_token"?new ole(f,h):new oo(y||"request_error",C)}return x}(`${n}/oauth/token`,r,i||"default",o,{method:"POST",body:c,headers:{"Content-Type":a?"application/x-www-form-urlencoded":"application/json","Auth0-Client":btoa(JSON.stringify(s||tle))}},e,a)}const kC=(...t)=>{return(e=t.filter(Boolean).join(" ").trim().split(/\s+/),Array.from(new Set(e))).join(" ");var e};class sc{constructor(e,n="@@auth0spajs@@",r){this.prefix=n,this.suffix=r,this.clientId=e.clientId,this.scope=e.scope,this.audience=e.audience}toKey(){return[this.prefix,this.clientId,this.audience,this.scope,this.suffix].filter(Boolean).join("::")}static fromKey(e){const[n,r,i,o]=e.split("::");return new sc({clientId:r,scope:o,audience:i},n)}static fromCacheEntry(e){const{scope:n,audience:r,client_id:i}=e;return new sc({scope:n,audience:r,clientId:i})}}class Itt{set(e,n){localStorage.setItem(e,JSON.stringify(n))}get(e){const n=window.localStorage.getItem(e);if(n)try{return JSON.parse(n)}catch{return}}remove(e){localStorage.removeItem(e)}allKeys(){return Object.keys(window.localStorage).filter(e=>e.startsWith("@@auth0spajs@@"))}}let ale=class{constructor(){this.enclosedCache=function(){let e={};return{set(n,r){e[n]=r},get(n){const r=e[n];if(r)return r},remove(n){delete e[n]},allKeys:()=>Object.keys(e)}}()}};class Ott{constructor(e,n,r){this.cache=e,this.keyManifest=n,this.nowProvider=r||nle}async setIdToken(e,n,r){var i;const o=this.getIdTokenCacheKey(e);await this.cache.set(o,{id_token:n,decodedToken:r}),await((i=this.keyManifest)===null||i===void 0?void 0:i.add(o))}async getIdToken(e){const n=await this.cache.get(this.getIdTokenCacheKey(e.clientId));if(!n&&e.scope&&e.audience){const r=await this.get(e);return!r||!r.id_token||!r.decodedToken?void 0:{id_token:r.id_token,decodedToken:r.decodedToken}}if(n)return{id_token:n.id_token,decodedToken:n.decodedToken}}async get(e,n=0){var r;let i=await this.cache.get(e.toKey());if(!i){const a=await this.getCacheKeys();if(!a)return;const l=this.matchExistingCacheKey(e,a);l&&(i=await this.cache.get(l))}if(!i)return;const o=await this.nowProvider(),s=Math.floor(o/1e3);return i.expiresAt-n<s?i.body.refresh_token?(i.body={refresh_token:i.body.refresh_token},await this.cache.set(e.toKey(),i),i.body):(await this.cache.remove(e.toKey()),void await((r=this.keyManifest)===null||r===void 0?void 0:r.remove(e.toKey()))):i.body}async set(e){var n;const r=new sc({clientId:e.client_id,scope:e.scope,audience:e.audience}),i=await this.wrapCacheEntry(e);await this.cache.set(r.toKey(),i),await((n=this.keyManifest)===null||n===void 0?void 0:n.add(r.toKey()))}async clear(e){var n;const r=await this.getCacheKeys();r&&(await r.filter(i=>!e||i.includes(e)).reduce(async(i,o)=>{await i,await this.cache.remove(o)},Promise.resolve()),await((n=this.keyManifest)===null||n===void 0?void 0:n.clear()))}async wrapCacheEntry(e){const n=await this.nowProvider();return{body:e,expiresAt:Math.floor(n/1e3)+e.expires_in}}async getCacheKeys(){var e;return this.keyManifest?(e=await this.keyManifest.get())===null||e===void 0?void 0:e.keys:this.cache.allKeys?this.cache.allKeys():void 0}getIdTokenCacheKey(e){return new sc({clientId:e},"@@auth0spajs@@","@@user@@").toKey()}matchExistingCacheKey(e,n){return n.filter(r=>{var i;const o=sc.fromKey(r),s=new Set(o.scope&&o.scope.split(" ")),a=((i=e.scope)===null||i===void 0?void 0:i.split(" "))||[],l=o.scope&&a.reduce((c,u)=>c&&s.has(u),!0);return o.prefix==="@@auth0spajs@@"&&o.clientId===e.clientId&&o.audience===e.audience&&l})[0]}}class Rtt{constructor(e,n,r){this.storage=e,this.clientId=n,this.cookieDomain=r,this.storageKey=`a0.spajs.txs.${this.clientId}`}create(e){this.storage.save(this.storageKey,e,{daysUntilExpire:1,cookieDomain:this.cookieDomain})}get(){return this.storage.get(this.storageKey)}remove(){this.storage.remove(this.storageKey,{cookieDomain:this.cookieDomain})}}const K0=t=>typeof t=="number",Dtt=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"],Ptt=t=>{if(!t.id_token)throw new Error("ID token is required but missing");const e=(o=>{const s=o.split("."),[a,l,c]=s;if(s.length!==3||!a||!l||!c)throw new Error("ID token could not be decoded");const u=JSON.parse(eY(l)),d={__raw:o},f={};return Object.keys(u).forEach(h=>{d[h]=u[h],Dtt.includes(h)||(f[h]=u[h])}),{encoded:{header:a,payload:l,signature:c},header:JSON.parse(eY(a)),claims:d,user:f}})(t.id_token);if(!e.claims.iss)throw new Error("Issuer (iss) claim must be a string present in the ID token");if(e.claims.iss!==t.iss)throw new Error(`Issuer (iss) claim mismatch in the ID token; expected "${t.iss}", found "${e.claims.iss}"`);if(!e.user.sub)throw new Error("Subject (sub) claim must be a string present in the ID token");if(e.header.alg!=="RS256")throw new Error(`Signature algorithm of "${e.header.alg}" is not supported. Expected the ID token to be signed with "RS256".`);if(!e.claims.aud||typeof e.claims.aud!="string"&&!Array.isArray(e.claims.aud))throw new Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(e.claims.aud)){if(!e.claims.aud.includes(t.aud))throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${t.aud}" but was not one of "${e.claims.aud.join(", ")}"`);if(e.claims.aud.length>1){if(!e.claims.azp)throw new Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(e.claims.azp!==t.aud)throw new Error(`Authorized Party (azp) claim mismatch in the ID token; expected "${t.aud}", found "${e.claims.azp}"`)}}else if(e.claims.aud!==t.aud)throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${t.aud}" but found "${e.claims.aud}"`);if(t.nonce){if(!e.claims.nonce)throw new Error("Nonce (nonce) claim must be a string present in the ID token");if(e.claims.nonce!==t.nonce)throw new Error(`Nonce (nonce) claim mismatch in the ID token; expected "${t.nonce}", found "${e.claims.nonce}"`)}if(t.max_age&&!K0(e.claims.auth_time))throw new Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(e.claims.exp==null||!K0(e.claims.exp))throw new Error("Expiration Time (exp) claim must be a number present in the ID token");if(!K0(e.claims.iat))throw new Error("Issued At (iat) claim must be a number present in the ID token");const n=t.leeway||60,r=new Date(t.now||Date.now()),i=new Date(0);if(i.setUTCSeconds(e.claims.exp+n),r>i)throw new Error(`Expiration Time (exp) claim error in the ID token; current time (${r}) is after expiration time (${i})`);if(e.claims.nbf!=null&&K0(e.claims.nbf)){const o=new Date(0);if(o.setUTCSeconds(e.claims.nbf-n),r<o)throw new Error(`Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Current time (${r}) is before ${o}`)}if(e.claims.auth_time!=null&&K0(e.claims.auth_time)){const o=new Date(0);if(o.setUTCSeconds(parseInt(e.claims.auth_time)+t.max_age+n),r>o)throw new Error(`Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Current time (${r}) is after last auth at ${o}`)}if(t.organization){const o=t.organization.trim();if(o.startsWith("org_")){const s=o;if(!e.claims.org_id)throw new Error("Organization ID (org_id) claim must be a string present in the ID token");if(s!==e.claims.org_id)throw new Error(`Organization ID (org_id) claim mismatch in the ID token; expected "${s}", found "${e.claims.org_id}"`)}else{const s=o.toLowerCase();if(!e.claims.org_name)throw new Error("Organization Name (org_name) claim must be a string present in the ID token");if(s!==e.claims.org_name)throw new Error(`Organization Name (org_name) claim mismatch in the ID token; expected "${s}", found "${e.claims.org_name}"`)}}return e};var Hh=o4(function(t,e){var n=Th&&Th.__assign||function(){return n=Object.assign||function(l){for(var c,u=1,d=arguments.length;u<d;u++)for(var f in c=arguments[u])Object.prototype.hasOwnProperty.call(c,f)&&(l[f]=c[f]);return l},n.apply(this,arguments)};function r(l,c){if(!c)return"";var u="; "+l;return c===!0?u:u+"="+c}function i(l,c,u){return encodeURIComponent(l).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(c).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(d){if(typeof d.expires=="number"){var f=new Date;f.setMilliseconds(f.getMilliseconds()+864e5*d.expires),d.expires=f}return r("Expires",d.expires?d.expires.toUTCString():"")+r("Domain",d.domain)+r("Path",d.path)+r("Secure",d.secure)+r("SameSite",d.sameSite)}(u)}function o(l){for(var c={},u=l?l.split("; "):[],d=/(%[\dA-F]{2})+/gi,f=0;f<u.length;f++){var h=u[f].split("="),g=h.slice(1).join("=");g.charAt(0)==='"'&&(g=g.slice(1,-1));try{c[h[0].replace(d,decodeURIComponent)]=g.replace(d,decodeURIComponent)}catch{}}return c}function s(){return o(document.cookie)}function a(l,c,u){document.cookie=i(l,c,n({path:"/"},u))}e.__esModule=!0,e.encode=i,e.parse=o,e.getAll=s,e.get=function(l){return s()[l]},e.set=a,e.remove=function(l,c){a(l,"",n(n({},c),{expires:-1}))}});i4(Hh),Hh.encode,Hh.parse,Hh.getAll;var Ntt=Hh.get,lle=Hh.set,cle=Hh.remove;const dg={get(t){const e=Ntt(t);if(e!==void 0)return JSON.parse(e)},save(t,e,n){let r={};window.location.protocol==="https:"&&(r={secure:!0,sameSite:"none"}),n!=null&&n.daysUntilExpire&&(r.expires=n.daysUntilExpire),n!=null&&n.cookieDomain&&(r.domain=n.cookieDomain),lle(t,JSON.stringify(e),r)},remove(t,e){let n={};e!=null&&e.cookieDomain&&(n.domain=e.cookieDomain),cle(t,n)}},$tt={get(t){return dg.get(t)||dg.get(`_legacy_${t}`)},save(t,e,n){let r={};window.location.protocol==="https:"&&(r={secure:!0}),n!=null&&n.daysUntilExpire&&(r.expires=n.daysUntilExpire),n!=null&&n.cookieDomain&&(r.domain=n.cookieDomain),lle(`_legacy_${t}`,JSON.stringify(e),r),dg.save(t,e,n)},remove(t,e){let n={};e!=null&&e.cookieDomain&&(n.domain=e.cookieDomain),cle(t,n),dg.remove(t,e),dg.remove(`_legacy_${t}`,e)}},Ltt={get(t){if(typeof sessionStorage>"u")return;const e=sessionStorage.getItem(t);return e!=null?JSON.parse(e):void 0},save(t,e){sessionStorage.setItem(t,JSON.stringify(e))},remove(t){sessionStorage.removeItem(t)}};function Ftt(t,e,n){var r=e===void 0?null:e,i=function(l,c){var u=atob(l);if(c){for(var d=new Uint8Array(u.length),f=0,h=u.length;f<h;++f)d[f]=u.charCodeAt(f);return String.fromCharCode.apply(null,new Uint16Array(d.buffer))}return u}(t,n!==void 0&&n),o=i.indexOf(`
`,10)+1,s=i.substring(o)+(r?"//# sourceMappingURL="+r:""),a=new Blob([s],{type:"application/javascript"});return URL.createObjectURL(a)}var tY,nY,rY,aP,Btt=(tY="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y2xhc3MgZSBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQscil7c3VwZXIociksdGhpcy5lcnJvcj10LHRoaXMuZXJyb3JfZGVzY3JpcHRpb249cixPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxlLnByb3RvdHlwZSl9c3RhdGljIGZyb21QYXlsb2FkKHtlcnJvcjp0LGVycm9yX2Rlc2NyaXB0aW9uOnJ9KXtyZXR1cm4gbmV3IGUodCxyKX19Y2xhc3MgdCBleHRlbmRzIGV7Y29uc3RydWN0b3IoZSxzKXtzdXBlcigibWlzc2luZ19yZWZyZXNoX3Rva2VuIixgTWlzc2luZyBSZWZyZXNoIFRva2VuIChhdWRpZW5jZTogJyR7cihlLFsiZGVmYXVsdCJdKX0nLCBzY29wZTogJyR7cihzKX0nKWApLHRoaXMuYXVkaWVuY2U9ZSx0aGlzLnNjb3BlPXMsT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsdC5wcm90b3R5cGUpfX1mdW5jdGlvbiByKGUsdD1bXSl7cmV0dXJuIGUmJiF0LmluY2x1ZGVzKGUpP2U6IiJ9ImZ1bmN0aW9uIj09dHlwZW9mIFN1cHByZXNzZWRFcnJvciYmU3VwcHJlc3NlZEVycm9yO2NvbnN0IHM9ZT0+e3ZhcntjbGllbnRJZDp0fT1lLHI9ZnVuY3Rpb24oZSx0KXt2YXIgcj17fTtmb3IodmFyIHMgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxzKSYmdC5pbmRleE9mKHMpPDAmJihyW3NdPWVbc10pO2lmKG51bGwhPWUmJiJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbz0wO2ZvcihzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7bzxzLmxlbmd0aDtvKyspdC5pbmRleE9mKHNbb10pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLHNbb10pJiYocltzW29dXT1lW3Nbb11dKX1yZXR1cm4gcn0oZSxbImNsaWVudElkIl0pO3JldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKChlPT5PYmplY3Qua2V5cyhlKS5maWx0ZXIoKHQ9PnZvaWQgMCE9PWVbdF0pKS5yZWR1Y2UoKCh0LHIpPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse1tyXTplW3JdfSkpLHt9KSkoT2JqZWN0LmFzc2lnbih7Y2xpZW50X2lkOnR9LHIpKSkudG9TdHJpbmcoKX07bGV0IG89e307Y29uc3Qgbj0oZSx0KT0+YCR7ZX18JHt0fWA7YWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKGFzeW5jKHtkYXRhOnt0aW1lb3V0OmUsYXV0aDpyLGZldGNoVXJsOmksZmV0Y2hPcHRpb25zOmMsdXNlRm9ybURhdGE6YX0scG9ydHM6W3BdfSk9PntsZXQgZjtjb25zdHthdWRpZW5jZTp1LHNjb3BlOmx9PXJ8fHt9O3RyeXtjb25zdCByPWE/KGU9Pntjb25zdCB0PW5ldyBVUkxTZWFyY2hQYXJhbXMoZSkscj17fTtyZXR1cm4gdC5mb3JFYWNoKCgoZSx0KT0+e3JbdF09ZX0pKSxyfSkoYy5ib2R5KTpKU09OLnBhcnNlKGMuYm9keSk7aWYoIXIucmVmcmVzaF90b2tlbiYmInJlZnJlc2hfdG9rZW4iPT09ci5ncmFudF90eXBlKXtjb25zdCBlPSgoZSx0KT0+b1tuKGUsdCldKSh1LGwpO2lmKCFlKXRocm93IG5ldyB0KHUsbCk7Yy5ib2R5PWE/cyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKTpKU09OLnN0cmluZ2lmeShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKX1sZXQgaCxnOyJmdW5jdGlvbiI9PXR5cGVvZiBBYm9ydENvbnRyb2xsZXImJihoPW5ldyBBYm9ydENvbnRyb2xsZXIsYy5zaWduYWw9aC5zaWduYWwpO3RyeXtnPWF3YWl0IFByb21pc2UucmFjZShbKGQ9ZSxuZXcgUHJvbWlzZSgoZT0+c2V0VGltZW91dChlLGQpKSkpLGZldGNoKGksT2JqZWN0LmFzc2lnbih7fSxjKSldKX1jYXRjaChlKXtyZXR1cm4gdm9pZCBwLnBvc3RNZXNzYWdlKHtlcnJvcjplLm1lc3NhZ2V9KX1pZighZylyZXR1cm4gaCYmaC5hYm9ydCgpLHZvaWQgcC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KTtmPWF3YWl0IGcuanNvbigpLGYucmVmcmVzaF90b2tlbj8oKChlLHQscik9PntvW24odCxyKV09ZX0pKGYucmVmcmVzaF90b2tlbix1LGwpLGRlbGV0ZSBmLnJlZnJlc2hfdG9rZW4pOigoZSx0KT0+e2RlbGV0ZSBvW24oZSx0KV19KSh1LGwpLHAucG9zdE1lc3NhZ2Uoe29rOmcub2ssanNvbjpmfSl9Y2F0Y2goZSl7cC5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3I6ZS5lcnJvcixlcnJvcl9kZXNjcmlwdGlvbjplLm1lc3NhZ2V9fSl9dmFyIGR9KSl9KCk7Cgo=",nY=null,rY=!1,function(t){return aP=aP||Ftt(tY,nY,rY),new Worker(aP,t)});const lP={};class Utt{constructor(e,n){this.cache=e,this.clientId=n,this.manifestKey=this.createManifestKeyFrom(this.clientId)}async add(e){var n;const r=new Set(((n=await this.cache.get(this.manifestKey))===null||n===void 0?void 0:n.keys)||[]);r.add(e),await this.cache.set(this.manifestKey,{keys:[...r]})}async remove(e){const n=await this.cache.get(this.manifestKey);if(n){const r=new Set(n.keys);return r.delete(e),r.size>0?await this.cache.set(this.manifestKey,{keys:[...r]}):await this.cache.remove(this.manifestKey)}}get(){return this.cache.get(this.manifestKey)}clear(){return this.cache.remove(this.manifestKey)}createManifestKeyFrom(e){return`@@auth0spajs@@::${e}`}}const ztt={memory:()=>new ale().enclosedCache,localstorage:()=>new Itt},iY=t=>ztt[t],oY=t=>{const{openUrl:e,onRedirect:n}=t,r=ql(t,["openUrl","onRedirect"]);return Object.assign(Object.assign({},r),{openUrl:e===!1||e?e:n})},cP=new wtt;class jtt{constructor(e){let n,r;if(this.userCache=new ale().enclosedCache,this.defaultOptions={authorizationParams:{scope:"openid profile email"},useRefreshTokensFallback:!1,useFormData:!0},this._releaseLockOnPageHide=async()=>{await cP.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)},this.options=Object.assign(Object.assign(Object.assign({},this.defaultOptions),e),{authorizationParams:Object.assign(Object.assign({},this.defaultOptions.authorizationParams),e.authorizationParams)}),typeof window<"u"&&(()=>{if(!LE())throw new Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(LE().subtle===void 0)throw new Error(`
      auth0-spa-js must run on a secure origin. See https://github.com/auth0/auth0-spa-js/blob/main/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin for more information.
    `)})(),e.cache&&e.cacheLocation&&console.warn("Both `cache` and `cacheLocation` options have been specified in the Auth0Client configuration; ignoring `cacheLocation` and using `cache`."),e.cache)r=e.cache;else{if(n=e.cacheLocation||"memory",!iY(n))throw new Error(`Invalid cache location "${n}"`);r=iY(n)()}this.httpTimeoutMs=e.httpTimeoutInSeconds?1e3*e.httpTimeoutInSeconds:1e4,this.cookieStorage=e.legacySameSiteCookie===!1?dg:$tt,this.orgHintCookieName=`auth0.${this.options.clientId}.organization_hint`,this.isAuthenticatedCookieName=(s=>`auth0.${s}.is.authenticated`)(this.options.clientId),this.sessionCheckExpiryDays=e.sessionCheckExpiryDays||1;const i=e.useCookiesForTransactions?this.cookieStorage:Ltt;var o;this.scope=kC("openid",this.options.authorizationParams.scope,this.options.useRefreshTokens?"offline_access":""),this.transactionManager=new Rtt(i,this.options.clientId,this.options.cookieDomain),this.nowProvider=this.options.nowProvider||nle,this.cacheManager=new Ott(r,r.allKeys?void 0:new Utt(r,this.options.clientId),this.nowProvider),this.domainUrl=(o=this.options.domain,/^https?:\/\//.test(o)?o:`https://${o}`),this.tokenIssuer=((s,a)=>s?s.startsWith("https://")?s:`https://${s}/`:`${a}/`)(this.options.issuer,this.domainUrl),typeof window<"u"&&window.Worker&&this.options.useRefreshTokens&&n==="memory"&&(this.options.workerUrl?this.worker=new Worker(this.options.workerUrl):this.worker=new Btt)}_url(e){const n=encodeURIComponent(btoa(JSON.stringify(this.options.auth0Client||tle)));return`${this.domainUrl}${e}&auth0Client=${n}`}_authorizeUrl(e){return this._url(`/authorize?${IF(e)}`)}async _verifyIdToken(e,n,r){const i=await this.nowProvider();return Ptt({iss:this.tokenIssuer,aud:this.options.clientId,id_token:e,nonce:n,organization:r,leeway:this.options.leeway,max_age:(o=this.options.authorizationParams.max_age,typeof o!="string"?o:parseInt(o,10)||void 0),now:i});var o}_processOrgHint(e){e?this.cookieStorage.save(this.orgHintCookieName,e,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}):this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain})}async _prepareAuthorizeUrl(e,n,r){const i=JK(sP()),o=JK(sP()),s=sP(),a=(u=>{const d=new Uint8Array(u);return(f=>{const h={"+":"-","/":"_","=":""};return f.replace(/[+/=]/g,g=>h[g])})(window.btoa(String.fromCharCode(...Array.from(d))))})(await(async u=>await LE().subtle.digest({name:"SHA-256"},new TextEncoder().encode(u)))(s)),l=((u,d,f,h,g,p,m,v)=>Object.assign(Object.assign(Object.assign({client_id:u.clientId},u.authorizationParams),f),{scope:kC(d,f.scope),response_type:"code",response_mode:v||"query",state:h,nonce:g,redirect_uri:m||u.authorizationParams.redirect_uri,code_challenge:p,code_challenge_method:"S256"}))(this.options,this.scope,e,i,o,a,e.redirect_uri||this.options.authorizationParams.redirect_uri||r,n==null?void 0:n.response_mode),c=this._authorizeUrl(l);return{nonce:o,code_verifier:s,scope:l.scope,audience:l.audience||"default",redirect_uri:l.redirect_uri,state:i,url:c}}async loginWithPopup(e,n){var r;if(e=e||{},!(n=n||{}).popup&&(n.popup=(a=>{const l=window.screenX+(window.innerWidth-400)/2,c=window.screenY+(window.innerHeight-600)/2;return window.open(a,"auth0:authorize:popup",`left=${l},top=${c},width=400,height=600,resizable,scrollbars=yes,status=1`)})(""),!n.popup))throw new Error("Unable to open a popup for loginWithPopup - window.open returned `null`");const i=await this._prepareAuthorizeUrl(e.authorizationParams||{},{response_mode:"web_message"},window.location.origin);n.popup.location.href=i.url;const o=await(a=>new Promise((l,c)=>{let u;const d=setInterval(()=>{a.popup&&a.popup.closed&&(clearInterval(d),clearTimeout(f),window.removeEventListener("message",u,!1),c(new Ctt(a.popup)))},1e3),f=setTimeout(()=>{clearInterval(d),c(new s4(a.popup)),window.removeEventListener("message",u,!1)},1e3*(a.timeoutInSeconds||60));u=function(h){if(h.data&&h.data.type==="authorization_response"){if(clearTimeout(f),clearInterval(d),window.removeEventListener("message",u,!1),a.popup.close(),h.data.response.error)return c(oo.fromPayload(h.data.response));l(h.data.response)}},window.addEventListener("message",u)}))(Object.assign(Object.assign({},n),{timeoutInSeconds:n.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}));if(i.state!==o.state)throw new oo("state_mismatch","Invalid state");const s=((r=e.authorizationParams)===null||r===void 0?void 0:r.organization)||this.options.authorizationParams.organization;await this._requestToken({audience:i.audience,scope:i.scope,code_verifier:i.code_verifier,grant_type:"authorization_code",code:o.code,redirect_uri:i.redirect_uri},{nonceIn:i.nonce,organization:s})}async getUser(){var e;const n=await this._getIdTokenFromCache();return(e=n==null?void 0:n.decodedToken)===null||e===void 0?void 0:e.user}async getIdTokenClaims(){var e;const n=await this._getIdTokenFromCache();return(e=n==null?void 0:n.decodedToken)===null||e===void 0?void 0:e.claims}async loginWithRedirect(e={}){var n;const r=oY(e),{openUrl:i,fragment:o,appState:s}=r,a=ql(r,["openUrl","fragment","appState"]),l=((n=a.authorizationParams)===null||n===void 0?void 0:n.organization)||this.options.authorizationParams.organization,c=await this._prepareAuthorizeUrl(a.authorizationParams||{}),{url:u}=c,d=ql(c,["url"]);this.transactionManager.create(Object.assign(Object.assign(Object.assign({},d),{appState:s}),l&&{organization:l}));const f=o?`${u}#${o}`:u;i?await i(f):window.location.assign(f)}async handleRedirectCallback(e=window.location.href){const n=e.split("?").slice(1);if(n.length===0)throw new Error("There are no query params available for parsing.");const{state:r,code:i,error:o,error_description:s}=(d=>{d.indexOf("#")>-1&&(d=d.substring(0,d.indexOf("#")));const f=new URLSearchParams(d);return{state:f.get("state"),code:f.get("code")||void 0,error:f.get("error")||void 0,error_description:f.get("error_description")||void 0}})(n.join("")),a=this.transactionManager.get();if(!a)throw new oo("missing_transaction","Invalid state");if(this.transactionManager.remove(),o)throw new Stt(o,s||o,r,a.appState);if(!a.code_verifier||a.state&&a.state!==r)throw new oo("state_mismatch","Invalid state");const l=a.organization,c=a.nonce,u=a.redirect_uri;return await this._requestToken(Object.assign({audience:a.audience,scope:a.scope,code_verifier:a.code_verifier,grant_type:"authorization_code",code:i},u?{redirect_uri:u}:{}),{nonceIn:c,organization:l}),{appState:a.appState}}async checkSession(e){if(!this.cookieStorage.get(this.isAuthenticatedCookieName)){if(!this.cookieStorage.get("auth0.is.authenticated"))return;this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove("auth0.is.authenticated")}try{await this.getTokenSilently(e)}catch{}}async getTokenSilently(e={}){var n;const r=Object.assign(Object.assign({cacheMode:"on"},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:kC(this.scope,(n=e.authorizationParams)===null||n===void 0?void 0:n.scope)})}),i=await((o,s)=>{let a=lP[s];return a||(a=o().finally(()=>{delete lP[s],a=null}),lP[s]=a),a})(()=>this._getTokenSilently(r),`${this.options.clientId}::${r.authorizationParams.audience}::${r.authorizationParams.scope}`);return e.detailedResponse?i:i==null?void 0:i.access_token}async _getTokenSilently(e){const{cacheMode:n}=e,r=ql(e,["cacheMode"]);if(n!=="off"){const i=await this._getEntryFromCache({scope:r.authorizationParams.scope,audience:r.authorizationParams.audience||"default",clientId:this.options.clientId});if(i)return i}if(n!=="cache-only"){if(!await(async(i,o=3)=>{for(let s=0;s<o;s++)if(await i())return!0;return!1})(()=>cP.acquireLock("auth0.lock.getTokenSilently",5e3),10))throw new Cw;try{if(window.addEventListener("pagehide",this._releaseLockOnPageHide),n!=="off"){const c=await this._getEntryFromCache({scope:r.authorizationParams.scope,audience:r.authorizationParams.audience||"default",clientId:this.options.clientId});if(c)return c}const i=this.options.useRefreshTokens?await this._getTokenUsingRefreshToken(r):await this._getTokenFromIFrame(r),{id_token:o,access_token:s,oauthTokenScope:a,expires_in:l}=i;return Object.assign(Object.assign({id_token:o,access_token:s},a?{scope:a}:null),{expires_in:l})}finally{await cP.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)}}}async getTokenWithPopup(e={},n={}){var r;const i=Object.assign(Object.assign({},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:kC(this.scope,(r=e.authorizationParams)===null||r===void 0?void 0:r.scope)})});return n=Object.assign(Object.assign({},_tt),n),await this.loginWithPopup(i,n),(await this.cacheManager.get(new sc({scope:i.authorizationParams.scope,audience:i.authorizationParams.audience||"default",clientId:this.options.clientId}))).access_token}async isAuthenticated(){return!!await this.getUser()}_buildLogoutUrl(e){e.clientId!==null?e.clientId=e.clientId||this.options.clientId:delete e.clientId;const n=e.logoutParams||{},{federated:r}=n,i=ql(n,["federated"]),o=r?"&federated":"";return this._url(`/v2/logout?${IF(Object.assign({clientId:e.clientId},i))}`)+o}async logout(e={}){const n=oY(e),{openUrl:r}=n,i=ql(n,["openUrl"]);e.clientId===null?await this.cacheManager.clear():await this.cacheManager.clear(e.clientId||this.options.clientId),this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove(this.isAuthenticatedCookieName,{cookieDomain:this.options.cookieDomain}),this.userCache.remove("@@user@@");const o=this._buildLogoutUrl(i);r?await r(o):r!==!1&&window.location.assign(o)}async _getTokenFromIFrame(e){const n=Object.assign(Object.assign({},e.authorizationParams),{prompt:"none"}),r=this.cookieStorage.get(this.orgHintCookieName);r&&!n.organization&&(n.organization=r);const{url:i,state:o,nonce:s,code_verifier:a,redirect_uri:l,scope:c,audience:u}=await this._prepareAuthorizeUrl(n,{response_mode:"web_message"},window.location.origin);try{if(window.crossOriginIsolated)throw new oo("login_required","The application is running in a Cross-Origin Isolated context, silently retrieving a token without refresh token is not possible.");const d=e.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,f=await((g,p,m=60)=>new Promise((v,_)=>{const w=window.document.createElement("iframe");w.setAttribute("width","0"),w.setAttribute("height","0"),w.style.display="none";const y=()=>{window.document.body.contains(w)&&(window.document.body.removeChild(w),window.removeEventListener("message",b,!1))};let b;const x=setTimeout(()=>{_(new Cw),y()},1e3*m);b=function(S){if(S.origin!=p||!S.data||S.data.type!=="authorization_response")return;const C=S.source;C&&C.close(),S.data.response.error?_(oo.fromPayload(S.data.response)):v(S.data.response),clearTimeout(x),window.removeEventListener("message",b,!1),setTimeout(y,2e3)},window.addEventListener("message",b,!1),window.document.body.appendChild(w),w.setAttribute("src",g)}))(i,this.domainUrl,d);if(o!==f.state)throw new oo("state_mismatch","Invalid state");const h=await this._requestToken(Object.assign(Object.assign({},e.authorizationParams),{code_verifier:a,code:f.code,grant_type:"authorization_code",redirect_uri:l,timeout:e.authorizationParams.timeout||this.httpTimeoutMs}),{nonceIn:s,organization:n.organization});return Object.assign(Object.assign({},h),{scope:c,oauthTokenScope:h.scope,audience:u})}catch(d){throw d.error==="login_required"&&this.logout({openUrl:!1}),d}}async _getTokenUsingRefreshToken(e){const n=await this.cacheManager.get(new sc({scope:e.authorizationParams.scope,audience:e.authorizationParams.audience||"default",clientId:this.options.clientId}));if(!(n&&n.refresh_token||this.worker)){if(this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);throw new ole(e.authorizationParams.audience||"default",e.authorizationParams.scope)}const r=e.authorizationParams.redirect_uri||this.options.authorizationParams.redirect_uri||window.location.origin,i=typeof e.timeoutInSeconds=="number"?1e3*e.timeoutInSeconds:null;try{const o=await this._requestToken(Object.assign(Object.assign(Object.assign({},e.authorizationParams),{grant_type:"refresh_token",refresh_token:n&&n.refresh_token,redirect_uri:r}),i&&{timeout:i}));return Object.assign(Object.assign({},o),{scope:e.authorizationParams.scope,oauthTokenScope:o.scope,audience:e.authorizationParams.audience||"default"})}catch(o){if((o.message.indexOf("Missing Refresh Token")>-1||o.message&&o.message.indexOf("invalid refresh token")>-1)&&this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);throw o}}async _saveEntryInCache(e){const{id_token:n,decodedToken:r}=e,i=ql(e,["id_token","decodedToken"]);this.userCache.set("@@user@@",{id_token:n,decodedToken:r}),await this.cacheManager.setIdToken(this.options.clientId,e.id_token,e.decodedToken),await this.cacheManager.set(i)}async _getIdTokenFromCache(){const e=this.options.authorizationParams.audience||"default",n=await this.cacheManager.getIdToken(new sc({clientId:this.options.clientId,audience:e,scope:this.scope})),r=this.userCache.get("@@user@@");return n&&n.id_token===(r==null?void 0:r.id_token)?r:(this.userCache.set("@@user@@",n),n)}async _getEntryFromCache({scope:e,audience:n,clientId:r}){const i=await this.cacheManager.get(new sc({scope:e,audience:n,clientId:r}),60);if(i&&i.access_token){const{access_token:o,oauthTokenScope:s,expires_in:a}=i,l=await this._getIdTokenFromCache();return l&&Object.assign(Object.assign({id_token:l.id_token,access_token:o},s?{scope:s}:null),{expires_in:a})}}async _requestToken(e,n){const{nonceIn:r,organization:i}=n||{},o=await Mtt(Object.assign({baseUrl:this.domainUrl,client_id:this.options.clientId,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs},e),this.worker),s=await this._verifyIdToken(o.id_token,r,i);return await this._saveEntryInCache(Object.assign(Object.assign(Object.assign(Object.assign({},o),{decodedToken:s,scope:e.scope,audience:e.audience||"default"}),o.scope?{oauthTokenScope:o.scope}:null),{client_id:this.options.clientId})),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this._processOrgHint(i||s.claims.org_id),Object.assign(Object.assign({},o),{decodedToken:s})}}var ule={isAuthenticated:!1,isLoading:!0},Jc=function(){throw new Error("You forgot to wrap your component in <Auth0Provider>.")},Wtt=_i(_i({},ule),{buildAuthorizeUrl:Jc,buildLogoutUrl:Jc,getAccessTokenSilently:Jc,getAccessTokenWithPopup:Jc,getIdTokenClaims:Jc,loginWithRedirect:Jc,loginWithPopup:Jc,logout:Jc,handleRedirectCallback:Jc}),dle=R.createContext(Wtt),sY=function(t){btt(e,t);function e(n,r){var i=t.call(this,r||n)||this;return i.error=n,i.error_description=r,Object.setPrototypeOf(i,e.prototype),i}return e}(Error),Vtt=/[?&]code=[^&]+/,Htt=/[?&]state=[^&]+/,Gtt=/[?&]error=[^&]+/,qtt=function(t){return t===void 0&&(t=window.location.search),(Vtt.test(t)||Gtt.test(t))&&Htt.test(t)},fle=function(t){return function(e){return e instanceof Error?e:e!==null&&typeof e=="object"&&"error"in e&&typeof e.error=="string"?"error_description"in e&&typeof e.error_description=="string"?new sY(e.error,e.error_description):new sY(e.error):new Error(t)}},aY=fle("Login failed"),uP=fle("Get access token failed"),hle=function(t){var e;t!=null&&t.redirectUri&&(console.warn("Using `redirectUri` has been deprecated, please use `authorizationParams.redirect_uri` instead as `redirectUri` will be no longer supported in a future version"),t.authorizationParams=t.authorizationParams||{},t.authorizationParams.redirect_uri=t.redirectUri,delete t.redirectUri),!((e=t==null?void 0:t.authorizationParams)===null||e===void 0)&&e.redirectUri&&(console.warn("Using `authorizationParams.redirectUri` has been deprecated, please use `authorizationParams.redirect_uri` instead as `authorizationParams.redirectUri` will be removed in a future version"),t.authorizationParams.redirect_uri=t.authorizationParams.redirectUri,delete t.authorizationParams.redirectUri)},Xtt=function(t,e){switch(e.type){case"LOGIN_POPUP_STARTED":return _i(_i({},t),{isLoading:!0});case"LOGIN_POPUP_COMPLETE":case"INITIALISED":return _i(_i({},t),{isAuthenticated:!!e.user,user:e.user,isLoading:!1,error:void 0});case"HANDLE_REDIRECT_COMPLETE":case"GET_ACCESS_TOKEN_COMPLETE":return t.user===e.user?t:_i(_i({},t),{isAuthenticated:!!e.user,user:e.user});case"LOGOUT":return _i(_i({},t),{isAuthenticated:!1,user:void 0});case"ERROR":return _i(_i({},t),{isLoading:!1,error:e.error})}},Ktt=function(t){return hle(t),_i(_i({},t),{auth0Client:{name:"auth0-react",version:"2.2.4"}})},Ytt=function(t){window.history.replaceState({},document.title,(t==null?void 0:t.returnTo)||window.location.pathname)},Qtt=function(t){var e=t.children,n=t.skipRedirectCallback,r=t.onRedirectCallback,i=r===void 0?Ytt:r,o=t.context,s=o===void 0?dle:o,a=xtt(t,["children","skipRedirectCallback","onRedirectCallback","context"]),l=R.useState(function(){return new jtt(Ktt(a))})[0],c=R.useReducer(Xtt,ule),u=c[0],d=c[1],f=R.useRef(!1);R.useEffect(function(){f.current||(f.current=!0,function(){return Jm(void 0,void 0,void 0,function(){var b,x,S;return eg(this,function(C){switch(C.label){case 0:return C.trys.push([0,7,,8]),b=void 0,qtt()&&!n?[4,l.handleRedirectCallback()]:[3,3];case 1:return x=C.sent().appState,[4,l.getUser()];case 2:return b=C.sent(),i(x,b),[3,6];case 3:return[4,l.checkSession()];case 4:return C.sent(),[4,l.getUser()];case 5:b=C.sent(),C.label=6;case 6:return d({type:"INITIALISED",user:b}),[3,8];case 7:return S=C.sent(),d({type:"ERROR",error:aY(S)}),[3,8];case 8:return[2]}})})}())},[l,i,n]);var h=R.useCallback(function(b){return hle(b),l.loginWithRedirect(b)},[l]),g=R.useCallback(function(b,x){return Jm(void 0,void 0,void 0,function(){var S,C;return eg(this,function(T){switch(T.label){case 0:d({type:"LOGIN_POPUP_STARTED"}),T.label=1;case 1:return T.trys.push([1,3,,4]),[4,l.loginWithPopup(b,x)];case 2:return T.sent(),[3,4];case 3:return S=T.sent(),d({type:"ERROR",error:aY(S)}),[2];case 4:return[4,l.getUser()];case 5:return C=T.sent(),d({type:"LOGIN_POPUP_COMPLETE",user:C}),[2]}})})},[l]),p=R.useCallback(function(b){return b===void 0&&(b={}),Jm(void 0,void 0,void 0,function(){return eg(this,function(x){switch(x.label){case 0:return[4,l.logout(b)];case 1:return x.sent(),(b.openUrl||b.openUrl===!1)&&d({type:"LOGOUT"}),[2]}})})},[l]),m=R.useCallback(function(b){return Jm(void 0,void 0,void 0,function(){var x,S,C,T;return eg(this,function(E){switch(E.label){case 0:return E.trys.push([0,2,3,5]),[4,l.getTokenSilently(b)];case 1:return x=E.sent(),[3,5];case 2:throw S=E.sent(),uP(S);case 3:return C=d,T={type:"GET_ACCESS_TOKEN_COMPLETE"},[4,l.getUser()];case 4:return C.apply(void 0,[(T.user=E.sent(),T)]),[7];case 5:return[2,x]}})})},[l]),v=R.useCallback(function(b,x){return Jm(void 0,void 0,void 0,function(){var S,C,T,E;return eg(this,function(k){switch(k.label){case 0:return k.trys.push([0,2,3,5]),[4,l.getTokenWithPopup(b,x)];case 1:return S=k.sent(),[3,5];case 2:throw C=k.sent(),uP(C);case 3:return T=d,E={type:"GET_ACCESS_TOKEN_COMPLETE"},[4,l.getUser()];case 4:return T.apply(void 0,[(E.user=k.sent(),E)]),[7];case 5:return[2,S]}})})},[l]),_=R.useCallback(function(){return l.getIdTokenClaims()},[l]),w=R.useCallback(function(b){return Jm(void 0,void 0,void 0,function(){var x,S,C;return eg(this,function(T){switch(T.label){case 0:return T.trys.push([0,2,3,5]),[4,l.handleRedirectCallback(b)];case 1:return[2,T.sent()];case 2:throw x=T.sent(),uP(x);case 3:return S=d,C={type:"HANDLE_REDIRECT_COMPLETE"},[4,l.getUser()];case 4:return S.apply(void 0,[(C.user=T.sent(),C)]),[7];case 5:return[2]}})})},[l]),y=R.useMemo(function(){return _i(_i({},u),{getAccessTokenSilently:m,getAccessTokenWithPopup:v,getIdTokenClaims:_,loginWithRedirect:h,loginWithPopup:g,logout:p,handleRedirectCallback:w})},[u,m,v,_,h,g,p,w]);return B.createElement(s.Provider,{value:y},e)},Ztt=function(t){return t===void 0&&(t=dle),R.useContext(t)};function l4(t){return t&&t.ownerDocument||document}function Jtt(t){var e=l4(t);return e&&e.defaultView||window}function ent(t,e){return Jtt(t).getComputedStyle(t,e)}var tnt=/([A-Z])/g;function nnt(t){return t.replace(tnt,"-$1").toLowerCase()}var rnt=/^ms-/;function AC(t){return nnt(t).replace(rnt,"-ms-")}var int=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function ont(t){return!!(t&&int.test(t))}function rp(t,e){var n="",r="";if(typeof e=="string")return t.style.getPropertyValue(AC(e))||ent(t).getPropertyValue(AC(e));Object.keys(e).forEach(function(i){var o=e[i];!o&&o!==0?t.style.removeProperty(AC(i)):ont(i)?r+=i+"("+o+") ":n+=AC(i)+": "+o+";"}),r&&(n+="transform: "+r+";"),t.style.cssText+=";"+n}const lO=!!(typeof window<"u"&&window.document&&window.document.createElement);var OF=!1,RF=!1;try{var dP={get passive(){return OF=!0},get once(){return RF=OF=!0}};lO&&(window.addEventListener("test",dP,dP),window.removeEventListener("test",dP,!0))}catch{}function snt(t,e,n,r){if(r&&typeof r!="boolean"&&!RF){var i=r.once,o=r.capture,s=n;!RF&&i&&(s=n.__once||function a(l){this.removeEventListener(e,a,o),n.call(this,l)},n.__once=s),t.addEventListener(e,s,OF?r:o)}t.addEventListener(e,n,r)}function ant(t,e,n,r){var i=r&&typeof r!="boolean"?r.capture:r;t.removeEventListener(e,n,i),n.__once&&t.removeEventListener(e,n.__once,i)}function Xk(t,e,n,r){return snt(t,e,n,r),function(){ant(t,e,n,r)}}function lnt(t,e,n,r){if(r===void 0&&(r=!0),t){var i=document.createEvent("HTMLEvents");i.initEvent(e,n,r),t.dispatchEvent(i)}}function cnt(t){var e=rp(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function unt(t,e,n){n===void 0&&(n=5);var r=!1,i=setTimeout(function(){r||lnt(t,"transitionend",!0)},e+n),o=Xk(t,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(i),o()}}function dnt(t,e,n,r){n==null&&(n=cnt(t)||0);var i=unt(t,n,r),o=Xk(t,"transitionend",e);return function(){i(),o()}}function lY(t,e){const n=rp(t,e)||"",r=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*r}function ple(t,e){const n=lY(t,"transitionDuration"),r=lY(t,"transitionDelay"),i=dnt(t,o=>{o.target===t&&(i(),e(o))},n+r)}function fnt(t){t.offsetHeight}const cY=t=>!t||typeof t=="function"?t:e=>{t.current=e};function hnt(t,e){const n=cY(t),r=cY(e);return i=>{n&&n(i),r&&r(i)}}function cO(t,e){return R.useMemo(()=>hnt(t,e),[t,e])}function pnt(t){return t&&"setState"in t?Dh.findDOMNode(t):t??null}const mle=B.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:r,onExiting:i,onExited:o,addEndListener:s,children:a,childRef:l,...c},u)=>{const d=R.useRef(null),f=cO(d,l),h=x=>{f(pnt(x))},g=x=>S=>{x&&d.current&&x(d.current,S)},p=R.useCallback(g(t),[t]),m=R.useCallback(g(e),[e]),v=R.useCallback(g(n),[n]),_=R.useCallback(g(r),[r]),w=R.useCallback(g(i),[i]),y=R.useCallback(g(o),[o]),b=R.useCallback(g(s),[s]);return I.jsx(Hc,{ref:u,...c,onEnter:p,onEntered:v,onEntering:m,onExit:_,onExited:y,onExiting:w,addEndListener:b,nodeRef:d,children:typeof a=="function"?(x,S)=>a(x,{...S,ref:h}):B.cloneElement(a,{ref:h})})});function mnt(t){const e=R.useRef(t);return R.useEffect(()=>{e.current=t},[t]),e}function uu(t){const e=mnt(t);return R.useCallback(function(...n){return e.current&&e.current(...n)},[e])}function gnt(){const t=R.useRef(!0),e=R.useRef(()=>t.current);return R.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function vnt(t){const e=R.useRef(null);return R.useEffect(()=>{e.current=t}),e.current}const ynt=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",bnt=typeof document<"u",DF=bnt||ynt?R.useLayoutEffect:R.useEffect,xnt={[Vl]:"show",[Od]:"show"},gle=R.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:r,...i},o)=>{const s={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...i},a=R.useCallback((l,c)=>{fnt(l),r==null||r(l,c)},[r]);return I.jsx(mle,{ref:o,addEndListener:ple,...s,onEnter:a,childRef:e.ref,children:(l,c)=>R.cloneElement(e,{...c,className:yt("fade",t,e.props.className,xnt[l],n[l])})})});gle.displayName="Fade";const wnt={"aria-label":De.string,onClick:De.func,variant:De.oneOf(["white"])},c4=R.forwardRef(({className:t,variant:e,"aria-label":n="Close",...r},i)=>I.jsx("button",{ref:i,type:"button",className:yt("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...r}));c4.displayName="CloseButton";c4.propTypes=wnt;function _nt(t){const e=R.useRef(t);return e.current=t,e}function Snt(t){const e=_nt(t);R.useEffect(()=>()=>e.current(),[])}var Cnt=Function.prototype.bind.call(Function.prototype.call,[].slice);function tg(t,e){return Cnt(t.querySelectorAll(e))}var os="top",Da="bottom",Pa="right",ss="left",u4="auto",U_=[os,Da,Pa,ss],Xv="start",Ew="end",Ent="clippingParents",vle="viewport",Y0="popper",Tnt="reference",uY=U_.reduce(function(t,e){return t.concat([e+"-"+Xv,e+"-"+Ew])},[]),yle=[].concat(U_,[u4]).reduce(function(t,e){return t.concat([e,e+"-"+Xv,e+"-"+Ew])},[]),knt="beforeRead",Ant="read",Mnt="afterRead",Int="beforeMain",Ont="main",Rnt="afterMain",Dnt="beforeWrite",Pnt="write",Nnt="afterWrite",$nt=[knt,Ant,Mnt,Int,Ont,Rnt,Dnt,Pnt,Nnt];function wc(t){return t.split("-")[0]}function js(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Rp(t){var e=js(t).Element;return t instanceof e||t instanceof Element}function ka(t){var e=js(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function d4(t){if(typeof ShadowRoot>"u")return!1;var e=js(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var ip=Math.max,Kk=Math.min,Kv=Math.round;function PF(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function ble(){return!/^((?!chrome|android).)*safari/i.test(PF())}function Yv(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,o=1;e&&ka(t)&&(i=t.offsetWidth>0&&Kv(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Kv(r.height)/t.offsetHeight||1);var s=Rp(t)?js(t):window,a=s.visualViewport,l=!ble()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,u=(r.top+(l&&a?a.offsetTop:0))/o,d=r.width/i,f=r.height/o;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c,x:c,y:u}}function f4(t){var e=Yv(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function xle(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&d4(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Dc(t){return t?(t.nodeName||"").toLowerCase():null}function zu(t){return js(t).getComputedStyle(t)}function Lnt(t){return["table","td","th"].indexOf(Dc(t))>=0}function Ff(t){return((Rp(t)?t.ownerDocument:t.document)||window.document).documentElement}function uO(t){return Dc(t)==="html"?t:t.assignedSlot||t.parentNode||(d4(t)?t.host:null)||Ff(t)}function dY(t){return!ka(t)||zu(t).position==="fixed"?null:t.offsetParent}function Fnt(t){var e=/firefox/i.test(PF()),n=/Trident/i.test(PF());if(n&&ka(t)){var r=zu(t);if(r.position==="fixed")return null}var i=uO(t);for(d4(i)&&(i=i.host);ka(i)&&["html","body"].indexOf(Dc(i))<0;){var o=zu(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function z_(t){for(var e=js(t),n=dY(t);n&&Lnt(n)&&zu(n).position==="static";)n=dY(n);return n&&(Dc(n)==="html"||Dc(n)==="body"&&zu(n).position==="static")?e:n||Fnt(t)||e}function h4(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Zb(t,e,n){return ip(t,Kk(e,n))}function Bnt(t,e,n){var r=Zb(t,e,n);return r>n?n:r}function wle(){return{top:0,right:0,bottom:0,left:0}}function _le(t){return Object.assign({},wle(),t)}function Sle(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var Unt=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,_le(typeof e!="number"?e:Sle(e,U_))};function znt(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=wc(n.placement),l=h4(a),c=[ss,Pa].indexOf(a)>=0,u=c?"height":"width";if(!(!o||!s)){var d=Unt(i.padding,n),f=f4(o),h=l==="y"?os:ss,g=l==="y"?Da:Pa,p=n.rects.reference[u]+n.rects.reference[l]-s[l]-n.rects.popper[u],m=s[l]-n.rects.reference[l],v=z_(o),_=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,w=p/2-m/2,y=d[h],b=_-f[u]-d[g],x=_/2-f[u]/2+w,S=Zb(y,x,b),C=l;n.modifiersData[r]=(e={},e[C]=S,e.centerOffset=S-x,e)}}function jnt(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||xle(e.elements.popper,i)&&(e.elements.arrow=i))}const Wnt={name:"arrow",enabled:!0,phase:"main",fn:znt,effect:jnt,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Qv(t){return t.split("-")[1]}var Vnt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Hnt(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Kv(n*i)/i||0,y:Kv(r*i)/i||0}}function fY(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,s=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,f=s.x,h=f===void 0?0:f,g=s.y,p=g===void 0?0:g,m=typeof u=="function"?u({x:h,y:p}):{x:h,y:p};h=m.x,p=m.y;var v=s.hasOwnProperty("x"),_=s.hasOwnProperty("y"),w=ss,y=os,b=window;if(c){var x=z_(n),S="clientHeight",C="clientWidth";if(x===js(n)&&(x=Ff(n),zu(x).position!=="static"&&a==="absolute"&&(S="scrollHeight",C="scrollWidth")),x=x,i===os||(i===ss||i===Pa)&&o===Ew){y=Da;var T=d&&x===b&&b.visualViewport?b.visualViewport.height:x[S];p-=T-r.height,p*=l?1:-1}if(i===ss||(i===os||i===Da)&&o===Ew){w=Pa;var E=d&&x===b&&b.visualViewport?b.visualViewport.width:x[C];h-=E-r.width,h*=l?1:-1}}var k=Object.assign({position:a},c&&Vnt),A=u===!0?Hnt({x:h,y:p},js(n)):{x:h,y:p};if(h=A.x,p=A.y,l){var O;return Object.assign({},k,(O={},O[y]=_?"0":"",O[w]=v?"0":"",O.transform=(b.devicePixelRatio||1)<=1?"translate("+h+"px, "+p+"px)":"translate3d("+h+"px, "+p+"px, 0)",O))}return Object.assign({},k,(e={},e[y]=_?p+"px":"",e[w]=v?h+"px":"",e.transform="",e))}function Gnt(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,s=o===void 0?!0:o,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:wc(e.placement),variation:Qv(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,fY(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,fY(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const qnt={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Gnt,data:{}};var MC={passive:!0};function Xnt(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=i===void 0?!0:i,s=r.resize,a=s===void 0?!0:s,l=js(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach(function(u){u.addEventListener("scroll",n.update,MC)}),a&&l.addEventListener("resize",n.update,MC),function(){o&&c.forEach(function(u){u.removeEventListener("scroll",n.update,MC)}),a&&l.removeEventListener("resize",n.update,MC)}}const Knt={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Xnt,data:{}};var Ynt={left:"right",right:"left",bottom:"top",top:"bottom"};function FE(t){return t.replace(/left|right|bottom|top/g,function(e){return Ynt[e]})}var Qnt={start:"end",end:"start"};function hY(t){return t.replace(/start|end/g,function(e){return Qnt[e]})}function p4(t){var e=js(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function m4(t){return Yv(Ff(t)).left+p4(t).scrollLeft}function Znt(t,e){var n=js(t),r=Ff(t),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;var c=ble();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a+m4(t),y:l}}function Jnt(t){var e,n=Ff(t),r=p4(t),i=(e=t.ownerDocument)==null?void 0:e.body,o=ip(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=ip(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+m4(t),l=-r.scrollTop;return zu(i||n).direction==="rtl"&&(a+=ip(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}function g4(t){var e=zu(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Cle(t){return["html","body","#document"].indexOf(Dc(t))>=0?t.ownerDocument.body:ka(t)&&g4(t)?t:Cle(uO(t))}function Jb(t,e){var n;e===void 0&&(e=[]);var r=Cle(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),o=js(r),s=i?[o].concat(o.visualViewport||[],g4(r)?r:[]):r,a=e.concat(s);return i?a:a.concat(Jb(uO(s)))}function NF(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function ert(t,e){var n=Yv(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function pY(t,e,n){return e===vle?NF(Znt(t,n)):Rp(e)?ert(e,n):NF(Jnt(Ff(t)))}function trt(t){var e=Jb(uO(t)),n=["absolute","fixed"].indexOf(zu(t).position)>=0,r=n&&ka(t)?z_(t):t;return Rp(r)?e.filter(function(i){return Rp(i)&&xle(i,r)&&Dc(i)!=="body"}):[]}function nrt(t,e,n,r){var i=e==="clippingParents"?trt(t):[].concat(e),o=[].concat(i,[n]),s=o[0],a=o.reduce(function(l,c){var u=pY(t,c,r);return l.top=ip(u.top,l.top),l.right=Kk(u.right,l.right),l.bottom=Kk(u.bottom,l.bottom),l.left=ip(u.left,l.left),l},pY(t,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Ele(t){var e=t.reference,n=t.element,r=t.placement,i=r?wc(r):null,o=r?Qv(r):null,s=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case os:l={x:s,y:e.y-n.height};break;case Da:l={x:s,y:e.y+e.height};break;case Pa:l={x:e.x+e.width,y:a};break;case ss:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?h4(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(o){case Xv:l[c]=l[c]-(e[u]/2-n[u]/2);break;case Ew:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function Tw(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,o=n.strategy,s=o===void 0?t.strategy:o,a=n.boundary,l=a===void 0?Ent:a,c=n.rootBoundary,u=c===void 0?vle:c,d=n.elementContext,f=d===void 0?Y0:d,h=n.altBoundary,g=h===void 0?!1:h,p=n.padding,m=p===void 0?0:p,v=_le(typeof m!="number"?m:Sle(m,U_)),_=f===Y0?Tnt:Y0,w=t.rects.popper,y=t.elements[g?_:f],b=nrt(Rp(y)?y:y.contextElement||Ff(t.elements.popper),l,u,s),x=Yv(t.elements.reference),S=Ele({reference:x,element:w,strategy:"absolute",placement:i}),C=NF(Object.assign({},w,S)),T=f===Y0?C:x,E={top:b.top-T.top+v.top,bottom:T.bottom-b.bottom+v.bottom,left:b.left-T.left+v.left,right:T.right-b.right+v.right},k=t.modifiersData.offset;if(f===Y0&&k){var A=k[i];Object.keys(E).forEach(function(O){var D=[Pa,Da].indexOf(O)>=0?1:-1,P=[os,Da].indexOf(O)>=0?"y":"x";E[O]+=A[P]*D})}return E}function rrt(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?yle:l,u=Qv(r),d=u?a?uY:uY.filter(function(g){return Qv(g)===u}):U_,f=d.filter(function(g){return c.indexOf(g)>=0});f.length===0&&(f=d);var h=f.reduce(function(g,p){return g[p]=Tw(t,{placement:p,boundary:i,rootBoundary:o,padding:s})[wc(p)],g},{});return Object.keys(h).sort(function(g,p){return h[g]-h[p]})}function irt(t){if(wc(t)===u4)return[];var e=FE(t);return[hY(t),e,hY(e)]}function ort(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!0:s,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,g=h===void 0?!0:h,p=n.allowedAutoPlacements,m=e.options.placement,v=wc(m),_=v===m,w=l||(_||!g?[FE(m)]:irt(m)),y=[m].concat(w).reduce(function(ee,re){return ee.concat(wc(re)===u4?rrt(e,{placement:re,boundary:u,rootBoundary:d,padding:c,flipVariations:g,allowedAutoPlacements:p}):re)},[]),b=e.rects.reference,x=e.rects.popper,S=new Map,C=!0,T=y[0],E=0;E<y.length;E++){var k=y[E],A=wc(k),O=Qv(k)===Xv,D=[os,Da].indexOf(A)>=0,P=D?"width":"height",N=Tw(e,{placement:k,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),U=D?O?Pa:ss:O?Da:os;b[P]>x[P]&&(U=FE(U));var L=FE(U),V=[];if(o&&V.push(N[A]<=0),a&&V.push(N[U]<=0,N[L]<=0),V.every(function(ee){return ee})){T=k,C=!1;break}S.set(k,V)}if(C)for(var G=g?3:1,Q=function(re){var se=y.find(function(me){var Me=S.get(me);if(Me)return Me.slice(0,re).every(function(de){return de})});if(se)return T=se,"break"},te=G;te>0;te--){var ne=Q(te);if(ne==="break")break}e.placement!==T&&(e.modifiersData[r]._skip=!0,e.placement=T,e.reset=!0)}}const srt={name:"flip",enabled:!0,phase:"main",fn:ort,requiresIfExists:["offset"],data:{_skip:!1}};function mY(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function gY(t){return[os,Pa,Da,ss].some(function(e){return t[e]>=0})}function art(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=Tw(e,{elementContext:"reference"}),a=Tw(e,{altBoundary:!0}),l=mY(s,r),c=mY(a,i,o),u=gY(l),d=gY(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const lrt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:art};function crt(t,e,n){var r=wc(t),i=[ss,os].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[ss,Pa].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function urt(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=i===void 0?[0,0]:i,s=yle.reduce(function(u,d){return u[d]=crt(d,e.rects,o),u},{}),a=s[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=s}const drt={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:urt};function frt(t){var e=t.state,n=t.name;e.modifiersData[n]=Ele({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const hrt={name:"popperOffsets",enabled:!0,phase:"read",fn:frt,data:{}};function prt(t){return t==="x"?"y":"x"}function mrt(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!1:s,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,f=n.tether,h=f===void 0?!0:f,g=n.tetherOffset,p=g===void 0?0:g,m=Tw(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),v=wc(e.placement),_=Qv(e.placement),w=!_,y=h4(v),b=prt(y),x=e.modifiersData.popperOffsets,S=e.rects.reference,C=e.rects.popper,T=typeof p=="function"?p(Object.assign({},e.rects,{placement:e.placement})):p,E=typeof T=="number"?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),k=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,A={x:0,y:0};if(x){if(o){var O,D=y==="y"?os:ss,P=y==="y"?Da:Pa,N=y==="y"?"height":"width",U=x[y],L=U+m[D],V=U-m[P],G=h?-C[N]/2:0,Q=_===Xv?S[N]:C[N],te=_===Xv?-C[N]:-S[N],ne=e.elements.arrow,ee=h&&ne?f4(ne):{width:0,height:0},re=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:wle(),se=re[D],me=re[P],Me=Zb(0,S[N],ee[N]),de=w?S[N]/2-G-Me-se-E.mainAxis:Q-Me-se-E.mainAxis,Ce=w?-S[N]/2+G+Me+me+E.mainAxis:te+Me+me+E.mainAxis,Ee=e.elements.arrow&&z_(e.elements.arrow),q=Ee?y==="y"?Ee.clientTop||0:Ee.clientLeft||0:0,Ve=(O=k==null?void 0:k[y])!=null?O:0,ze=U+de-Ve-q,Fe=U+Ce-Ve,we=Zb(h?Kk(L,ze):L,U,h?ip(V,Fe):V);x[y]=we,A[y]=we-U}if(a){var Je,Z=y==="x"?os:ss,ce=y==="x"?Da:Pa,H=x[b],j=b==="y"?"height":"width",ie=H+m[Z],z=H-m[ce],K=[os,ss].indexOf(v)!==-1,F=(Je=k==null?void 0:k[b])!=null?Je:0,W=K?ie:H-S[j]-C[j]-F+E.altAxis,X=K?H+S[j]+C[j]-F-E.altAxis:z,ae=h&&K?Bnt(W,H,X):Zb(h?W:ie,H,h?X:z);x[b]=ae,A[b]=ae-H}e.modifiersData[r]=A}}const grt={name:"preventOverflow",enabled:!0,phase:"main",fn:mrt,requiresIfExists:["offset"]};function vrt(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function yrt(t){return t===js(t)||!ka(t)?p4(t):vrt(t)}function brt(t){var e=t.getBoundingClientRect(),n=Kv(e.width)/t.offsetWidth||1,r=Kv(e.height)/t.offsetHeight||1;return n!==1||r!==1}function xrt(t,e,n){n===void 0&&(n=!1);var r=ka(e),i=ka(e)&&brt(e),o=Ff(e),s=Yv(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Dc(e)!=="body"||g4(o))&&(a=yrt(e)),ka(e)?(l=Yv(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=m4(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function wrt(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function i(o){n.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||i(o)}),r}function _rt(t){var e=wrt(t);return $nt.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function Srt(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Crt(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var vY={placement:"bottom",modifiers:[],strategy:"absolute"};function yY(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Ert(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,o=i===void 0?vY:i;return function(a,l,c){c===void 0&&(c=o);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},vY,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,h={state:u,setOptions:function(v){var _=typeof v=="function"?v(u.options):v;p(),u.options=Object.assign({},o,u.options,_),u.scrollParents={reference:Rp(a)?Jb(a):a.contextElement?Jb(a.contextElement):[],popper:Jb(l)};var w=_rt(Crt([].concat(r,u.options.modifiers)));return u.orderedModifiers=w.filter(function(y){return y.enabled}),g(),h.update()},forceUpdate:function(){if(!f){var v=u.elements,_=v.reference,w=v.popper;if(yY(_,w)){u.rects={reference:xrt(_,z_(w),u.options.strategy==="fixed"),popper:f4(w)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(E){return u.modifiersData[E.name]=Object.assign({},E.data)});for(var y=0;y<u.orderedModifiers.length;y++){if(u.reset===!0){u.reset=!1,y=-1;continue}var b=u.orderedModifiers[y],x=b.fn,S=b.options,C=S===void 0?{}:S,T=b.name;typeof x=="function"&&(u=x({state:u,options:C,name:T,instance:h})||u)}}}},update:Srt(function(){return new Promise(function(m){h.forceUpdate(),m(u)})}),destroy:function(){p(),f=!0}};if(!yY(a,l))return h;h.setOptions(c).then(function(m){!f&&c.onFirstUpdate&&c.onFirstUpdate(m)});function g(){u.orderedModifiers.forEach(function(m){var v=m.name,_=m.options,w=_===void 0?{}:_,y=m.effect;if(typeof y=="function"){var b=y({state:u,name:v,instance:h,options:w}),x=function(){};d.push(b||x)}})}function p(){d.forEach(function(m){return m()}),d=[]}return h}}function bY(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}const Trt="data-rr-ui-";function krt(t){return`${Trt}${t}`}const Tle=R.createContext(lO?window:void 0);Tle.Provider;function v4(){return R.useContext(Tle)}const kle=R.createContext(null);kle.displayName="NavbarContext";function fP(t){t===void 0&&(t=l4());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function Art(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const xY=krt("modal-open");class y4{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return Art(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",i=this.getElement();e.style={overflow:i.style.overflow,[r]:i.style[r]},e.scrollBarWidth&&(n[r]=`${parseInt(rp(i,r)||"0",10)+e.scrollBarWidth}px`),i.setAttribute(xY,""),rp(i,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(xY),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const hP=(t,e)=>lO?t==null?(e||l4()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function Mrt(t,e){const n=v4(),[r,i]=R.useState(()=>hP(t,n==null?void 0:n.document));if(!r){const o=hP(t);o&&i(o)}return R.useEffect(()=>{},[e,r]),R.useEffect(()=>{const o=hP(t);o!==r&&i(o)},[t,r]),r}function Irt({children:t,in:e,onExited:n,mountOnEnter:r,unmountOnExit:i}){const o=R.useRef(null),s=R.useRef(e),a=uu(n);R.useEffect(()=>{e?s.current=!0:a(o.current)},[e,a]);const l=cO(o,t.ref),c=R.cloneElement(t,{ref:l});return e?c:i||!s.current&&r?null:c}function Ort(t){return t.code==="Escape"||t.keyCode===27}function Rrt(){const t=R.version.split(".");return{major:+t[0],minor:+t[1],patch:+t[2]}}const Drt=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function Prt(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Nrt(t){let{onEnter:e,onEntering:n,onEntered:r,onExit:i,onExiting:o,onExited:s,addEndListener:a,children:l}=t,c=Prt(t,Drt);const{major:u}=Rrt(),d=u>=19?l.props.ref:l.ref,f=R.useRef(null),h=cO(f,typeof l=="function"?null:d),g=x=>S=>{x&&f.current&&x(f.current,S)},p=R.useCallback(g(e),[e]),m=R.useCallback(g(n),[n]),v=R.useCallback(g(r),[r]),_=R.useCallback(g(i),[i]),w=R.useCallback(g(o),[o]),y=R.useCallback(g(s),[s]),b=R.useCallback(g(a),[a]);return Object.assign({},c,{nodeRef:f},e&&{onEnter:p},n&&{onEntering:m},r&&{onEntered:v},i&&{onExit:_},o&&{onExiting:w},s&&{onExited:y},a&&{addEndListener:b},{children:typeof l=="function"?(x,S)=>l(x,Object.assign({},S,{ref:h})):R.cloneElement(l,{ref:h})})}const $rt=["component"];function Lrt(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}const Frt=R.forwardRef((t,e)=>{let{component:n}=t,r=Lrt(t,$rt);const i=Nrt(r);return I.jsx(n,Object.assign({ref:e},i))});function Brt({in:t,onTransition:e}){const n=R.useRef(null),r=R.useRef(!0),i=uu(e);return DF(()=>{if(!n.current)return;let o=!1;return i({in:t,element:n.current,initial:r.current,isStale:()=>o}),()=>{o=!0}},[t,i]),DF(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function Urt({children:t,in:e,onExited:n,onEntered:r,transition:i}){const[o,s]=R.useState(!e);e&&o&&s(!1);const a=Brt({in:!!e,onTransition:c=>{const u=()=>{c.isStale()||(c.in?r==null||r(c.element,c.initial):(s(!0),n==null||n(c.element)))};Promise.resolve(i(c)).then(u,d=>{throw c.in||s(!0),d})}}),l=cO(a,t.ref);return o&&!e?null:R.cloneElement(t,{ref:l})}function wY(t,e,n){return t?I.jsx(Frt,Object.assign({},n,{component:t})):e?I.jsx(Urt,Object.assign({},n,{transition:e})):I.jsx(Irt,Object.assign({},n))}const zrt=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function jrt(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}let pP;function Wrt(t){return pP||(pP=new y4({ownerDocument:t==null?void 0:t.document})),pP}function Vrt(t){const e=v4(),n=t||Wrt(e),r=R.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:R.useCallback(i=>{r.current.dialog=i},[]),setBackdropRef:R.useCallback(i=>{r.current.backdrop=i},[])})}const Ale=R.forwardRef((t,e)=>{let{show:n=!1,role:r="dialog",className:i,style:o,children:s,backdrop:a=!0,keyboard:l=!0,onBackdropClick:c,onEscapeKeyDown:u,transition:d,runTransition:f,backdropTransition:h,runBackdropTransition:g,autoFocus:p=!0,enforceFocus:m=!0,restoreFocus:v=!0,restoreFocusOptions:_,renderDialog:w,renderBackdrop:y=Fe=>I.jsx("div",Object.assign({},Fe)),manager:b,container:x,onShow:S,onHide:C=()=>{},onExit:T,onExited:E,onExiting:k,onEnter:A,onEntering:O,onEntered:D}=t,P=jrt(t,zrt);const N=v4(),U=Mrt(x),L=Vrt(b),V=gnt(),G=vnt(n),[Q,te]=R.useState(!n),ne=R.useRef(null);R.useImperativeHandle(e,()=>L,[L]),lO&&!G&&n&&(ne.current=fP(N==null?void 0:N.document)),n&&Q&&te(!1);const ee=uu(()=>{if(L.add(),Ce.current=Xk(document,"keydown",Me),de.current=Xk(document,"focus",()=>setTimeout(se),!0),S&&S(),p){var Fe,we;const Je=fP((Fe=(we=L.dialog)==null?void 0:we.ownerDocument)!=null?Fe:N==null?void 0:N.document);L.dialog&&Je&&!bY(L.dialog,Je)&&(ne.current=Je,L.dialog.focus())}}),re=uu(()=>{if(L.remove(),Ce.current==null||Ce.current(),de.current==null||de.current(),v){var Fe;(Fe=ne.current)==null||Fe.focus==null||Fe.focus(_),ne.current=null}});R.useEffect(()=>{!n||!U||ee()},[n,U,ee]),R.useEffect(()=>{Q&&re()},[Q,re]),Snt(()=>{re()});const se=uu(()=>{if(!m||!V()||!L.isTopModal())return;const Fe=fP(N==null?void 0:N.document);L.dialog&&Fe&&!bY(L.dialog,Fe)&&L.dialog.focus()}),me=uu(Fe=>{Fe.target===Fe.currentTarget&&(c==null||c(Fe),a===!0&&C())}),Me=uu(Fe=>{l&&Ort(Fe)&&L.isTopModal()&&(u==null||u(Fe),Fe.defaultPrevented||C())}),de=R.useRef(),Ce=R.useRef(),Ee=(...Fe)=>{te(!0),E==null||E(...Fe)};if(!U)return null;const q=Object.assign({role:r,ref:L.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},P,{style:o,className:i,tabIndex:-1});let Ve=w?w(q):I.jsx("div",Object.assign({},q,{children:R.cloneElement(s,{role:"document"})}));Ve=wY(d,f,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:T,onExiting:k,onExited:Ee,onEnter:A,onEntering:O,onEntered:D,children:Ve});let ze=null;return a&&(ze=y({ref:L.setBackdropRef,onClick:me}),ze=wY(h,g,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:ze})),I.jsx(I.Fragment,{children:Dh.createPortal(I.jsxs(I.Fragment,{children:[ze,Ve]}),U)})});Ale.displayName="Modal";const Hrt=Object.assign(Ale,{Manager:y4}),ng={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class Mle extends y4{adjustAndStore(e,n,r){const i=n.style[e];n.dataset[e]=i,rp(n,{[e]:`${parseFloat(rp(n,e))+r}px`})}restore(e,n){const r=n.dataset[e];r!==void 0&&(delete n.dataset[e],rp(n,{[e]:r}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(GGe(n,"modal-open"),!e.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";tg(n,ng.FIXED_CONTENT).forEach(o=>this.adjustAndStore(r,o,e.scrollBarWidth)),tg(n,ng.STICKY_CONTENT).forEach(o=>this.adjustAndStore(i,o,-e.scrollBarWidth)),tg(n,ng.NAVBAR_TOGGLER).forEach(o=>this.adjustAndStore(i,o,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();qGe(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";tg(n,ng.FIXED_CONTENT).forEach(o=>this.restore(r,o)),tg(n,ng.STICKY_CONTENT).forEach(o=>this.restore(i,o)),tg(n,ng.NAVBAR_TOGGLER).forEach(o=>this.restore(i,o))}}let mP;function Grt(t){return mP||(mP=new Mle(t)),mP}const Ile=R.createContext({onHide(){}}),qrt=R.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:r,children:i,...o},s)=>{const a=R.useContext(Ile),l=uu(()=>{a==null||a.onHide(),r==null||r()});return I.jsxs("div",{ref:s,...o,children:[i,n&&I.jsx(c4,{"aria-label":t,variant:e,onClick:l})]})}),$F=new WeakMap,_Y=(t,e)=>{if(!t||!e)return;const n=$F.get(e)||new Map;$F.set(e,n);let r=n.get(t);return r||(r=e.matchMedia(t),r.refCount=0,n.set(r.media,r)),r};function Xrt(t,e=typeof window>"u"?void 0:window){const n=_Y(t,e),[r,i]=R.useState(()=>n?n.matches:!1);return DF(()=>{let o=_Y(t,e);if(!o)return i(!1);let s=$F.get(e);const a=()=>{i(o.matches)};return o.refCount++,o.addListener(a),a(),()=>{o.removeListener(a),o.refCount--,o.refCount<=0&&(s==null||s.delete(o.media)),o=void 0}},[t]),r}function Krt(t){const e=Object.keys(t);function n(a,l){return a===l?l:a?`${a} and ${l}`:l}function r(a){return e[Math.min(e.indexOf(a)+1,e.length-1)]}function i(a){const l=r(a);let c=t[l];return typeof c=="number"?c=`${c-.2}px`:c=`calc(${c} - 0.2px)`,`(max-width: ${c})`}function o(a){let l=t[a];return typeof l=="number"&&(l=`${l}px`),`(min-width: ${l})`}function s(a,l,c){let u;typeof a=="object"?(u=a,c=l,l=!0):(l=l||!0,u={[a]:l});let d=R.useMemo(()=>Object.entries(u).reduce((f,[h,g])=>((g==="up"||g===!0)&&(f=n(f,o(h))),(g==="down"||g===!0)&&(f=n(f,i(h))),f),""),[JSON.stringify(u)]);return Xrt(d,c)}return s}const Yrt=Krt({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),Ole=R.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=pi(e,"offcanvas-body"),I.jsx(n,{ref:i,className:yt(t,e),...r})));Ole.displayName="OffcanvasBody";const Qrt={[Vl]:"show",[Od]:"show"},Rle=R.forwardRef(({bsPrefix:t,className:e,children:n,in:r=!1,mountOnEnter:i=!1,unmountOnExit:o=!1,appear:s=!1,...a},l)=>(t=pi(t,"offcanvas"),I.jsx(mle,{ref:l,addEndListener:ple,in:r,mountOnEnter:i,unmountOnExit:o,appear:s,...a,childRef:n.ref,children:(c,u)=>R.cloneElement(n,{...u,className:yt(e,n.props.className,(c===Vl||c===xk)&&`${t}-toggling`,Qrt[c])})})));Rle.displayName="OffcanvasToggling";const Dle=R.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:r=!1,...i},o)=>(t=pi(t,"offcanvas-header"),I.jsx(qrt,{ref:o,...i,className:yt(e,t),closeLabel:n,closeButton:r})));Dle.displayName="OffcanvasHeader";const Zrt=Z1e("h5"),Ple=R.forwardRef(({className:t,bsPrefix:e,as:n=Zrt,...r},i)=>(e=pi(e,"offcanvas-title"),I.jsx(n,{ref:i,className:yt(t,e),...r})));Ple.displayName="OffcanvasTitle";function Jrt(t){return I.jsx(Rle,{...t})}function eit(t){return I.jsx(gle,{...t})}const Nle=R.forwardRef(({bsPrefix:t,className:e,children:n,"aria-labelledby":r,placement:i="start",responsive:o,show:s=!1,backdrop:a=!0,keyboard:l=!0,scroll:c=!1,onEscapeKeyDown:u,onShow:d,onHide:f,container:h,autoFocus:g=!0,enforceFocus:p=!0,restoreFocus:m=!0,restoreFocusOptions:v,onEntered:_,onExit:w,onExiting:y,onEnter:b,onEntering:x,onExited:S,backdropClassName:C,manager:T,renderStaticNode:E=!1,...k},A)=>{const O=R.useRef();t=pi(t,"offcanvas");const{onToggle:D}=R.useContext(kle)||{},[P,N]=R.useState(!1),U=Yrt(o||"xs","up");R.useEffect(()=>{N(o?s&&!U:s)},[s,o,U]);const L=uu(()=>{D==null||D(),f==null||f()}),V=R.useMemo(()=>({onHide:L}),[L]);function G(){return T||(c?(O.current||(O.current=new Mle({handleContainerOverflow:!1})),O.current):Grt())}const Q=(re,...se)=>{re&&(re.style.visibility="visible"),b==null||b(re,...se)},te=(re,...se)=>{re&&(re.style.visibility=""),S==null||S(...se)},ne=R.useCallback(re=>I.jsx("div",{...re,className:yt(`${t}-backdrop`,C)}),[C,t]),ee=re=>I.jsx("div",{...re,...k,className:yt(e,o?`${t}-${o}`:t,`${t}-${i}`),"aria-labelledby":r,children:n});return I.jsxs(I.Fragment,{children:[!P&&(o||E)&&ee({}),I.jsx(Ile.Provider,{value:V,children:I.jsx(Hrt,{show:P,ref:A,backdrop:a,container:h,keyboard:l,autoFocus:g,enforceFocus:p&&!c,restoreFocus:m,restoreFocusOptions:v,onEscapeKeyDown:u,onShow:d,onHide:L,onEnter:Q,onEntering:x,onEntered:_,onExit:w,onExiting:y,onExited:te,manager:G(),transition:Jrt,backdropTransition:eit,renderBackdrop:ne,renderDialog:ee})})]})});Nle.displayName="Offcanvas";const IC=Object.assign(Nle,{Body:Ole,Header:Dle,Title:Ple}),SY=1e3;function tit(t,e,n){const r=(t-e)/(n-e)*100;return Math.round(r*SY)/SY}function CY({min:t,now:e,max:n,label:r,visuallyHidden:i,striped:o,animated:s,className:a,style:l,variant:c,bsPrefix:u,...d},f){return I.jsx("div",{ref:f,...d,role:"progressbar",className:yt(a,`${u}-bar`,{[`bg-${c}`]:c,[`${u}-bar-animated`]:s,[`${u}-bar-striped`]:s||o}),style:{width:`${tit(e,t,n)}%`,...l},"aria-valuenow":e,"aria-valuemin":t,"aria-valuemax":n,children:i?I.jsx("span",{className:"visually-hidden",children:r}):r})}const j_=R.forwardRef(({isChild:t=!1,...e},n)=>{const r={min:0,max:100,animated:!1,visuallyHidden:!1,striped:!1,...e};if(r.bsPrefix=pi(r.bsPrefix,"progress"),t)return CY(r,n);const{min:i,now:o,max:s,label:a,visuallyHidden:l,striped:c,animated:u,bsPrefix:d,variant:f,className:h,children:g,...p}=r;return I.jsx("div",{ref:n,...p,className:yt(h,d),children:g?htt(g,m=>R.cloneElement(m,{isChild:!0})):CY({min:i,now:o,max:s,label:a,visuallyHidden:l,striped:c,animated:u,bsPrefix:d,variant:f},n)})});j_.displayName="ProgressBar";const nit=[{name:"3030-Base",endpoint:"http://localhost:3030"},{name:"Server-Health",endpoint:"http://localhost:3030/health"},{name:"Price/volume",endpoint:"http://localhost:3030/api1/rune-names"},{name:"ServerLogs",endpoint:"http://localhost:3030/api1/log-data"},{name:"RuneNames",endpoint:"http://localhost:3030/api1/rune-names"},{name:"Forecasts",endpoint:"http://localhost:3030/api1/forecast"}];class rit extends R.Component{constructor(n){super(n);He(this,"checkEndpoints",async()=>{const{data:n}=this.state;for(let r=0;r<n.length;r++)try{await Ht.get(n[r].endpoint),this.updateEndpointStatus(r,!0)}catch{this.updateEndpointStatus(r,!1)}});He(this,"updateEndpointStatus",(n,r)=>{this.setState(i=>{const o=[...i.data];return o[n].color=r?"#00C49F":"#FF8042",{data:o}},this.updateChart)});He(this,"initThree",()=>{const n=this.mount.current.clientWidth,r=this.mount.current.clientHeight;this.scene=new rz,this.camera=new Ho(75,n/r,.1,1e3),this.camera.position.set(0,0,20),this.camera.lookAt(0,0,0),this.renderer=new nz({antialias:!0}),this.renderer.setSize(n,r),this.mount.current.appendChild(this.renderer.domElement),this.chartGroup=new Fh,this.scene.add(this.chartGroup);const i=new oz(16777215,.5);this.scene.add(i);const o=new iz(16777215,1);o.position.set(5,5,5).normalize(),this.scene.add(o),this.createChart(),this.handleResize=this.handleResize.bind(this),window.addEventListener("resize",this.handleResize),this.animate()});He(this,"handleResize",()=>{const n=this.mount.current.clientWidth,r=this.mount.current.clientHeight;this.renderer.setSize(n,r),this.camera.aspect=n/r,this.camera.updateProjectionMatrix()});He(this,"createChart",()=>{const{data:s}=this.state,a=s.reduce((c,u)=>c+u.value,0);let l=0;s.forEach(c=>{const u=c.value/a*Math.PI*2,d=new b_(5,1.5,8,64,u),f=new v_({color:c.color}),h=new ba(d,f);h.rotation.x=Math.PI/2,h.position.set(0,0,0),h.rotation.y=l,this.chartGroup.add(h),l+=u})});He(this,"updateChart",()=>{for(;this.chartGroup.children.length;)this.chartGroup.remove(this.chartGroup.children[0]);this.createChart()});He(this,"animate",()=>{this.frameId=requestAnimationFrame(this.animate),this.chartGroup.rotation.x+=0,this.chartGroup.rotation.y+=0,this.chartGroup.rotation.z-=.001,this.renderer.render(this.scene,this.camera)});this.state={data:nit.map((r,i)=>({name:r.name,value:1,color:"#8884d8",endpoint:r.endpoint,key:i}))},this.mount=B.createRef()}componentDidMount(){this.initThree(),this.checkEndpoints(),this.interval=setInterval(this.checkEndpoints,15e3)}componentWillUnmount(){clearInterval(this.interval),window.removeEventListener("resize",this.handleResize),cancelAnimationFrame(this.frameId),this.mount.current.removeChild(this.renderer.domElement)}render(){return I.jsx(I.Fragment,{children:I.jsx("div",{className:"treechart",children:I.jsx("div",{ref:this.mount,style:{width:"320px",height:"400px"}})})})}}De.node,De.number.isRequired,De.number.isRequired;function iit(t){return Xs("MuiButton",t)}const OC=go("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),$le=R.createContext({}),Lle=R.createContext(void 0),oit=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],sit=t=>{const{color:e,disableElevation:n,fullWidth:r,size:i,variant:o,classes:s}=t,a={root:["root",o,`${o}${an(e)}`,`size${an(i)}`,`${o}Size${an(i)}`,`color${an(e)}`,n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${an(i)}`],endIcon:["icon","endIcon",`iconSize${an(i)}`]},l=za(a,iit,s);return Le({},s,l)},Fle=t=>Le({},t.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},t.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},t.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),ait=qn(iO,{shouldForwardProp:t=>Kj(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${an(n.color)}`],e[`size${an(n.size)}`],e[`${n.variant}Size${an(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})(({theme:t,ownerState:e})=>{var n,r;const i=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],o=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return Le({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":Le({textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:fl(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:fl(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${(t.vars||t).palette[e.color].main}`,backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:fl(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:o,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}}),"&:active":Le({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[8]}),[`&.${OC.focusVisible}`]:Le({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[6]}),[`&.${OC.disabled}`]:Le({color:(t.vars||t).palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},e.variant==="contained"&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main,border:t.vars?`1px solid rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${fl(t.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:t.vars?t.vars.palette.text.primary:(n=(r=t.palette).getContrastText)==null?void 0:n.call(r,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:i,boxShadow:(t.vars||t).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:t})=>t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${OC.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${OC.disabled}`]:{boxShadow:"none"}}),lit=qn("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,e[`iconSize${an(n.size)}`]]}})(({ownerState:t})=>Le({display:"inherit",marginRight:8,marginLeft:-4},t.size==="small"&&{marginLeft:-2},Fle(t))),cit=qn("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,e[`iconSize${an(n.size)}`]]}})(({ownerState:t})=>Le({display:"inherit",marginRight:-4,marginLeft:8},t.size==="small"&&{marginRight:-2},Fle(t))),EY=R.forwardRef(function(e,n){const r=R.useContext($le),i=R.useContext(Lle),o=ww(r,e),s=Ks({props:o,name:"MuiButton"}),{children:a,color:l="primary",component:c="button",className:u,disabled:d=!1,disableElevation:f=!1,disableFocusRipple:h=!1,endIcon:g,focusVisibleClassName:p,fullWidth:m=!1,size:v="medium",startIcon:_,type:w,variant:y="text"}=s,b=pn(s,oit),x=Le({},s,{color:l,component:c,disabled:d,disableElevation:f,disableFocusRipple:h,fullWidth:m,size:v,type:w,variant:y}),S=sit(x),C=_&&I.jsx(lit,{className:S.startIcon,ownerState:x,children:_}),T=g&&I.jsx(cit,{className:S.endIcon,ownerState:x,children:g}),E=i||"";return I.jsxs(ait,Le({ownerState:x,className:Ze(r.className,S.root,u,E),component:c,disabled:d,focusRipple:!h,focusVisibleClassName:Ze(S.focusVisible,p),ref:n,type:w},b,{classes:S,children:[C,a,T]}))});function uit(t){return Xs("MuiButtonGroup",t)}const Ui=go("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),dit=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],fit=(t,e)=>{const{ownerState:n}=t;return[{[`& .${Ui.grouped}`]:e.grouped},{[`& .${Ui.grouped}`]:e[`grouped${an(n.orientation)}`]},{[`& .${Ui.grouped}`]:e[`grouped${an(n.variant)}`]},{[`& .${Ui.grouped}`]:e[`grouped${an(n.variant)}${an(n.orientation)}`]},{[`& .${Ui.grouped}`]:e[`grouped${an(n.variant)}${an(n.color)}`]},{[`& .${Ui.firstButton}`]:e.firstButton},{[`& .${Ui.lastButton}`]:e.lastButton},{[`& .${Ui.middleButton}`]:e.middleButton},e.root,e[n.variant],n.disableElevation===!0&&e.disableElevation,n.fullWidth&&e.fullWidth,n.orientation==="vertical"&&e.vertical]},hit=t=>{const{classes:e,color:n,disabled:r,disableElevation:i,fullWidth:o,orientation:s,variant:a}=t,l={root:["root",a,s==="vertical"&&"vertical",o&&"fullWidth",i&&"disableElevation"],grouped:["grouped",`grouped${an(s)}`,`grouped${an(a)}`,`grouped${an(a)}${an(s)}`,`grouped${an(a)}${an(n)}`,r&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return za(l,uit,e)},pit=qn("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:fit})(({theme:t,ownerState:e})=>Le({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[2]},e.disableElevation&&{boxShadow:"none"},e.fullWidth&&{width:"100%"},e.orientation==="vertical"&&{flexDirection:"column"},{[`& .${Ui.grouped}`]:Le({minWidth:40,"&:hover":Le({},e.variant==="contained"&&{boxShadow:"none"})},e.variant==="contained"&&{boxShadow:"none"}),[`& .${Ui.firstButton},& .${Ui.middleButton}`]:Le({},e.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},e.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},e.variant==="text"&&e.orientation==="horizontal"&&{borderRight:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Ui.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="text"&&e.orientation==="vertical"&&{borderBottom:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Ui.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="text"&&e.color!=="inherit"&&{borderColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:fl(t.palette[e.color].main,.5)},e.variant==="outlined"&&e.orientation==="horizontal"&&{borderRightColor:"transparent"},e.variant==="outlined"&&e.orientation==="vertical"&&{borderBottomColor:"transparent"},e.variant==="contained"&&e.orientation==="horizontal"&&{borderRight:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${Ui.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="contained"&&e.orientation==="vertical"&&{borderBottom:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${Ui.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="contained"&&e.color!=="inherit"&&{borderColor:(t.vars||t).palette[e.color].dark},{"&:hover":Le({},e.variant==="outlined"&&e.orientation==="horizontal"&&{borderRightColor:"currentColor"},e.variant==="outlined"&&e.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${Ui.lastButton},& .${Ui.middleButton}`]:Le({},e.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},e.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},e.variant==="outlined"&&e.orientation==="horizontal"&&{marginLeft:-1},e.variant==="outlined"&&e.orientation==="vertical"&&{marginTop:-1})})),mit=R.forwardRef(function(e,n){const r=Ks({props:e,name:"MuiButtonGroup"}),{children:i,className:o,color:s="primary",component:a="div",disabled:l=!1,disableElevation:c=!1,disableFocusRipple:u=!1,disableRipple:d=!1,fullWidth:f=!1,orientation:h="horizontal",size:g="medium",variant:p="outlined"}=r,m=pn(r,dit),v=Le({},r,{color:s,component:a,disabled:l,disableElevation:c,disableFocusRipple:u,disableRipple:d,fullWidth:f,orientation:h,size:g,variant:p}),_=hit(v),w=R.useMemo(()=>({className:_.grouped,color:s,disabled:l,disableElevation:c,disableFocusRipple:u,disableRipple:d,fullWidth:f,size:g,variant:p}),[s,l,c,u,d,f,g,p,_.grouped]),y=vZe(i),b=y.length,x=S=>{const C=S===0,T=S===b-1;return C&&T?"":C?_.firstButton:T?_.lastButton:_.middleButton};return I.jsx(pit,Le({as:a,role:"group",className:Ze(_.root,o),ref:n,ownerState:v},m,{children:I.jsx($le.Provider,{value:w,children:y.map((S,C)=>I.jsx(Lle.Provider,{value:x(C),children:S},C))})}))});var b4={},gP={};const git=jc(oet);var TY;function vit(){return TY||(TY=1,function(t){"use client";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=git}(gP)),gP}var yit=Hj;Object.defineProperty(b4,"__esModule",{value:!0});var Ble=b4.default=void 0,bit=yit(vit()),xit=I;Ble=b4.default=(0,bit.default)((0,xit.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");function kY(t){return t.substring(2).toLowerCase()}function wit(t,e){return e.documentElement.clientWidth<t.clientX||e.documentElement.clientHeight<t.clientY}function _it(t){const{children:e,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:i,touchEvent:o="onTouchEnd"}=t,s=R.useRef(!1),a=R.useRef(null),l=R.useRef(!1),c=R.useRef(!1);R.useEffect(()=>(setTimeout(()=>{l.current=!0},0),()=>{l.current=!1}),[]);const u=Tl(e.ref,a),d=xu(g=>{const p=c.current;c.current=!1;const m=xc(a.current);if(!l.current||!a.current||"clientX"in g&&wit(g,m))return;if(s.current){s.current=!1;return}let v;g.composedPath?v=g.composedPath().indexOf(a.current)>-1:v=!m.documentElement.contains(g.target)||a.current.contains(g.target),!v&&(n||!p)&&i(g)}),f=g=>p=>{c.current=!0;const m=e.props[g];m&&m(p)},h={ref:u};return o!==!1&&(h[o]=f(o)),R.useEffect(()=>{if(o!==!1){const g=kY(o),p=xc(a.current),m=()=>{s.current=!0};return p.addEventListener(g,d),p.addEventListener("touchmove",m),()=>{p.removeEventListener(g,d),p.removeEventListener("touchmove",m)}}},[d,o]),r!==!1&&(h[r]=f(r)),R.useEffect(()=>{if(r!==!1){const g=kY(r),p=xc(a.current);return p.addEventListener(g,d),()=>{p.removeEventListener(g,d)}}},[d,r]),I.jsx(R.Fragment,{children:R.cloneElement(e,h)})}const Sit=t=>t.scrollTop;function AY(t,e){var n,r;const{timeout:i,easing:o,style:s={}}=t;return{duration:(n=s.transitionDuration)!=null?n:typeof i=="number"?i:i[e.mode]||0,easing:(r=s.transitionTimingFunction)!=null?r:typeof o=="object"?o[e.mode]:o,delay:s.transitionDelay}}const Cit=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function LF(t){return`scale(${t}, ${t**2})`}const Eit={entering:{opacity:1,transform:LF(1)},entered:{opacity:1,transform:"none"}},vP=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Ule=R.forwardRef(function(e,n){const{addEndListener:r,appear:i=!0,children:o,easing:s,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:d,onExited:f,onExiting:h,style:g,timeout:p="auto",TransitionComponent:m=Hc}=e,v=pn(e,Cit),_=bae(),w=R.useRef(),y=Dae(),b=R.useRef(null),x=Tl(b,o.ref,n),S=P=>N=>{if(P){const U=b.current;N===void 0?P(U):P(U,N)}},C=S(u),T=S((P,N)=>{Sit(P);const{duration:U,delay:L,easing:V}=AY({style:g,timeout:p,easing:s},{mode:"enter"});let G;p==="auto"?(G=y.transitions.getAutoHeightDuration(P.clientHeight),w.current=G):G=U,P.style.transition=[y.transitions.create("opacity",{duration:G,delay:L}),y.transitions.create("transform",{duration:vP?G:G*.666,delay:L,easing:V})].join(","),l&&l(P,N)}),E=S(c),k=S(h),A=S(P=>{const{duration:N,delay:U,easing:L}=AY({style:g,timeout:p,easing:s},{mode:"exit"});let V;p==="auto"?(V=y.transitions.getAutoHeightDuration(P.clientHeight),w.current=V):V=N,P.style.transition=[y.transitions.create("opacity",{duration:V,delay:U}),y.transitions.create("transform",{duration:vP?V:V*.666,delay:vP?U:U||V*.333,easing:L})].join(","),P.style.opacity=0,P.style.transform=LF(.75),d&&d(P)}),O=S(f),D=P=>{p==="auto"&&_.start(w.current||0,P),r&&r(b.current,P)};return I.jsx(m,Le({appear:i,in:a,nodeRef:b,onEnter:T,onEntered:E,onEntering:C,onExit:A,onExited:O,onExiting:k,addEndListener:D,timeout:p==="auto"?null:p},v,{children:(P,N)=>R.cloneElement(o,Le({style:Le({opacity:0,transform:LF(.75),visibility:P==="exited"&&!a?"hidden":void 0},Eit[P],g,o.props.style),ref:x},N))}))});Ule.muiSupportAuto=!0;function Tit(t){return Xs("MuiPaper",t)}go("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const kit=["className","component","elevation","square","variant"],Ait=t=>{const{square:e,elevation:n,variant:r,classes:i}=t,o={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return za(o,Tit,i)},Mit=qn("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(({theme:t,ownerState:e})=>{var n;return Le({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!e.square&&{borderRadius:t.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.divider}`},e.variant==="elevation"&&Le({boxShadow:(t.vars||t).shadows[e.elevation]},!t.vars&&t.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${fl("#fff",NK(e.elevation))}, ${fl("#fff",NK(e.elevation))})`},t.vars&&{backgroundImage:(n=t.vars.overlays)==null?void 0:n[e.elevation]}))}),om=R.forwardRef(function(e,n){const r=Ks({props:e,name:"MuiPaper"}),{className:i,component:o="div",elevation:s=1,square:a=!1,variant:l="elevation"}=r,c=pn(r,kit),u=Le({},r,{component:o,elevation:s,square:a,variant:l}),d=Ait(u);return I.jsx(Mit,Le({as:o,ownerState:u,className:Ze(d.root,i),ref:n},c))});var x4={};Object.defineProperty(x4,"__esModule",{value:!0});var zle=x4.default=void 0,Iit=Rit(R),Oit=Pae;function jle(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(jle=function(r){return r?n:e})(t)}function Rit(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=jle(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}function Dit(t){return Object.keys(t).length===0}function Pit(t=null){const e=Iit.useContext(Oit.ThemeContext);return!e||Dit(e)?t:e}zle=x4.default=Pit;function Nit(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},o=e.elements[n];!ka(o)||!Dc(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var a=i[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function $it(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},s=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=s.reduce(function(l,c){return l[c]="",l},{});!ka(i)||!Dc(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(l){i.removeAttribute(l)}))})}}const Lit={name:"applyStyles",enabled:!0,phase:"write",fn:Nit,effect:$it,requires:["computeStyles"]};var Fit=[Knt,hrt,qnt,Lit,drt,srt,grt,Wnt,lrt],Bit=Ert({defaultModifiers:Fit});function Uit(t){return typeof t=="function"?t():t}const zit=R.forwardRef(function(e,n){const{children:r,container:i,disablePortal:o=!1}=e,[s,a]=R.useState(null),l=Tl(R.isValidElement(r)?r.ref:null,n);if(Fu(()=>{o||a(Uit(i)||document.body)},[i,o]),Fu(()=>{if(s&&!o)return Bk(n,s),()=>{Bk(n,null)}},[n,s,o]),o){if(R.isValidElement(r)){const c={ref:l};return R.cloneElement(r,c)}return I.jsx(R.Fragment,{children:r})}return I.jsx(R.Fragment,{children:s&&o_.createPortal(r,s)})});function jit(t){return Xs("MuiPopper",t)}go("MuiPopper",["root"]);const Wit=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],Vit=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function Hit(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function FF(t){return typeof t=="function"?t():t}function Git(t){return t.nodeType!==void 0}const qit=t=>{const{classes:e}=t;return za({root:["root"]},jit,e)},Xit={},Kit=R.forwardRef(function(e,n){var r;const{anchorEl:i,children:o,direction:s,disablePortal:a,modifiers:l,open:c,placement:u,popperOptions:d,popperRef:f,slotProps:h={},slots:g={},TransitionProps:p}=e,m=pn(e,Wit),v=R.useRef(null),_=Tl(v,n),w=R.useRef(null),y=Tl(w,f),b=R.useRef(y);Fu(()=>{b.current=y},[y]),R.useImperativeHandle(f,()=>w.current,[]);const x=Hit(u,s),[S,C]=R.useState(x),[T,E]=R.useState(FF(i));R.useEffect(()=>{w.current&&w.current.forceUpdate()}),R.useEffect(()=>{i&&E(FF(i))},[i]),Fu(()=>{if(!T||!c)return;const P=L=>{C(L.placement)};let N=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:L})=>{P(L)}}];l!=null&&(N=N.concat(l)),d&&d.modifiers!=null&&(N=N.concat(d.modifiers));const U=Bit(T,v.current,Le({placement:x},d,{modifiers:N}));return b.current(U),()=>{U.destroy(),b.current(null)}},[T,a,l,c,d,x]);const k={placement:S};p!==null&&(k.TransitionProps=p);const A=qit(e),O=(r=g.root)!=null?r:"div",D=_w({elementType:O,externalSlotProps:h.root,externalForwardedProps:m,additionalProps:{role:"tooltip",ref:_},ownerState:e,className:A.root});return I.jsx(O,Le({},D,{children:typeof o=="function"?o(k):o}))}),Yit=R.forwardRef(function(e,n){const{anchorEl:r,children:i,container:o,direction:s="ltr",disablePortal:a=!1,keepMounted:l=!1,modifiers:c,open:u,placement:d="bottom",popperOptions:f=Xit,popperRef:h,style:g,transition:p=!1,slotProps:m={},slots:v={}}=e,_=pn(e,Vit),[w,y]=R.useState(!0),b=()=>{y(!1)},x=()=>{y(!0)};if(!l&&!u&&(!p||w))return null;let S;if(o)S=o;else if(r){const E=FF(r);S=E&&Git(E)?xc(E).body:xc(null).body}const C=!u&&l&&(!p||w)?"none":void 0,T=p?{in:u,onEnter:b,onExited:x}:void 0;return I.jsx(zit,{disablePortal:a,container:S,children:I.jsx(Kit,Le({anchorEl:r,direction:s,disablePortal:a,modifiers:c,ref:n,open:p?!w:u,placement:d,popperOptions:f,popperRef:h,slotProps:m,slots:v},_,{style:Le({position:"fixed",top:0,left:0,display:C},g),TransitionProps:T,children:i}))})}),Qit=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],Zit=qn(Yit,{name:"MuiPopper",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Jit=R.forwardRef(function(e,n){var r;const i=zle(),o=Ks({props:e,name:"MuiPopper"}),{anchorEl:s,component:a,components:l,componentsProps:c,container:u,disablePortal:d,keepMounted:f,modifiers:h,open:g,placement:p,popperOptions:m,popperRef:v,transition:_,slots:w,slotProps:y}=o,b=pn(o,Qit),x=(r=w==null?void 0:w.root)!=null?r:l==null?void 0:l.Root,S=Le({anchorEl:s,container:u,disablePortal:d,keepMounted:f,modifiers:h,open:g,placement:p,popperOptions:m,popperRef:v,transition:_},b);return I.jsx(Zit,Le({as:a,direction:i==null?void 0:i.direction,slots:{root:x},slotProps:y??c},S,{ref:n}))}),BF=R.createContext({}),MY=go("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),IY=go("MuiListItemIcon",["root","alignItemsFlexStart"]),OY=go("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function eot(t){return Xs("MuiMenuItem",t)}const Q0=go("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),tot=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],not=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.divider&&e.divider,!n.disableGutters&&e.gutters]},rot=t=>{const{disabled:e,dense:n,divider:r,disableGutters:i,selected:o,classes:s}=t,l=za({root:["root",n&&"dense",e&&"disabled",!i&&"gutters",r&&"divider",o&&"selected"]},eot,s);return Le({},s,l)},iot=qn(iO,{shouldForwardProp:t=>Kj(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:not})(({theme:t,ownerState:e})=>Le({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Q0.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:fl(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${Q0.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:fl(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${Q0.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:fl(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:fl(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${Q0.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${Q0.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${MY.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${MY.inset}`]:{marginLeft:52},[`& .${OY.root}`]:{marginTop:0,marginBottom:0},[`& .${OY.inset}`]:{paddingLeft:36},[`& .${IY.root}`]:{minWidth:36}},!e.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},e.dense&&Le({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{[`& .${IY.root} svg`]:{fontSize:"1.25rem"}}))),oot=R.forwardRef(function(e,n){const r=Ks({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:o="li",dense:s=!1,divider:a=!1,disableGutters:l=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:d,className:f}=r,h=pn(r,tot),g=R.useContext(BF),p=R.useMemo(()=>({dense:s||g.dense||!1,disableGutters:l}),[g.dense,s,l]),m=R.useRef(null);Fu(()=>{i&&m.current&&m.current.focus()},[i]);const v=Le({},r,{dense:p.dense,divider:a,disableGutters:l}),_=rot(r),w=Tl(m,n);let y;return r.disabled||(y=d!==void 0?d:-1),I.jsx(BF.Provider,{value:p,children:I.jsx(iot,Le({ref:w,role:u,tabIndex:y,component:o,focusVisibleClassName:Ze(_.focusVisible,c),className:Ze(_.root,f)},h,{ownerState:v,classes:_}))})});function sot(t){return Xs("MuiList",t)}go("MuiList",["root","padding","dense","subheader"]);const aot=["children","className","component","dense","disablePadding","subheader"],lot=t=>{const{classes:e,disablePadding:n,dense:r,subheader:i}=t;return za({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},sot,e)},cot=qn("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})(({ownerState:t})=>Le({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})),uot=R.forwardRef(function(e,n){const r=Ks({props:e,name:"MuiList"}),{children:i,className:o,component:s="ul",dense:a=!1,disablePadding:l=!1,subheader:c}=r,u=pn(r,aot),d=R.useMemo(()=>({dense:a}),[a]),f=Le({},r,{component:s,dense:a,disablePadding:l}),h=lot(f);return I.jsx(BF.Provider,{value:d,children:I.jsxs(cot,Le({as:s,className:Ze(h.root,o),ref:n,ownerState:f},u,{children:[c,i]}))})}),dot=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function yP(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function RY(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function Wle(t,e){if(e===void 0)return!0;let n=t.innerText;return n===void 0&&(n=t.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.indexOf(e.keys.join(""))===0}function Z0(t,e,n,r,i,o){let s=!1,a=i(t,e,e?n:!1);for(;a;){if(a===t.firstChild){if(s)return!1;s=!0}const l=r?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!Wle(a,o)||l)a=i(t,a,n);else return a.focus(),!0}return!1}const fot=R.forwardRef(function(e,n){const{actions:r,autoFocus:i=!1,autoFocusItem:o=!1,children:s,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:d="selectedMenu"}=e,f=pn(e,dot),h=R.useRef(null),g=R.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Fu(()=>{i&&h.current.focus()},[i]),R.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(w,{direction:y})=>{const b=!h.current.style.width;if(w.clientHeight<h.current.clientHeight&&b){const x=`${mZe(xc(w))}px`;h.current.style[y==="rtl"?"paddingLeft":"paddingRight"]=x,h.current.style.width=`calc(100% + ${x})`}return h.current}}),[]);const p=w=>{const y=h.current,b=w.key,x=xc(y).activeElement;if(b==="ArrowDown")w.preventDefault(),Z0(y,x,c,l,yP);else if(b==="ArrowUp")w.preventDefault(),Z0(y,x,c,l,RY);else if(b==="Home")w.preventDefault(),Z0(y,null,c,l,yP);else if(b==="End")w.preventDefault(),Z0(y,null,c,l,RY);else if(b.length===1){const S=g.current,C=b.toLowerCase(),T=performance.now();S.keys.length>0&&(T-S.lastTime>500?(S.keys=[],S.repeating=!0,S.previousKeyMatched=!0):S.repeating&&C!==S.keys[0]&&(S.repeating=!1)),S.lastTime=T,S.keys.push(C);const E=x&&!S.repeating&&Wle(x,S);S.previousKeyMatched&&(E||Z0(y,x,!1,l,yP,S))?w.preventDefault():S.previousKeyMatched=!1}u&&u(w)},m=Tl(h,n);let v=-1;R.Children.forEach(s,(w,y)=>{if(!R.isValidElement(w)){v===y&&(v+=1,v>=s.length&&(v=-1));return}w.props.disabled||(d==="selectedMenu"&&w.props.selected||v===-1)&&(v=y),v===y&&(w.props.disabled||w.props.muiSkipListHighlight||w.type.muiSkipListHighlight)&&(v+=1,v>=s.length&&(v=-1))});const _=R.Children.map(s,(w,y)=>{if(y===v){const b={};return o&&(b.autoFocus=!0),w.props.tabIndex===void 0&&d==="selectedMenu"&&(b.tabIndex=0),R.cloneElement(w,b)}return w});return I.jsx(uot,Le({role:"menu",ref:m,className:a,onKeyDown:p,tabIndex:i?0:-1},f,{children:_}))}),bP=["DOG GO TO THE MOON","BANK OF NAKAMOTO DOLLAR","RSIC GENESIS RUNE","PUPS WORLD PEACE","Z Z Z Z Z FEHU Z Z Z Z Z","RSIC GENESIS RUNE","MEMES GO TO THE MOON","RUNI RUNI RUNI RUNI","NIKOLA TESLA GOD"],Vle=()=>{const[t,e]=R.useState(""),[n,r]=R.useState([]),[i,o]=R.useState(""),[s,a]=R.useState(!1),[l,c]=R.useState(null),[u,d]=R.useState(0),[f,h]=R.useState(""),[g,p]=R.useState([0,0]),[m,v]=R.useState(!1),_=R.useRef(null),[w,y]=R.useState(0),b=(A,O)=>{y(O),e(bP[O]),v(!1)},x=()=>{v(A=>!A)},S=A=>{_.current&&_.current.contains(A.target)||v(!1)},C=async A=>{A.preventDefault(),a(!0),d(0),h("Job started..."),r([]),o("");const O=t.toUpperCase().replace(/\s+/g,"•");try{const D=await Ht.post("http://localhost:5600/api4/forecast",{rune_name:O});D.data&&D.data.job_id&&(c(D.data.job_id),T(D.data.job_id))}catch(D){console.error("Error starting forecasting:",D),a(!1)}},T=async A=>{let O=0;const D=setInterval(async()=>{try{const P=await Ht.get(`http://localhost:5600/api4/forecast_status/${A}`);if(console.log("Polling job status:",P.data),P.data&&P.data.status==="completed")if(clearInterval(D),d(100),h("Job completed."),P.data.data){const N=P.data.data.map(G=>({date:G.date,prediction:G.prediction}));console.log("Formatted data for recharts:",N),r(N),o(new Date().toLocaleString()),a(!1);const U=N.map(G=>G.prediction),L=Math.min(...U),V=Math.max(...U);p([L-5,V+5])}else console.error("Error: response.data.data is undefined"),a(!1);else P.data&&P.data.status==="error"?(clearInterval(D),h("Error during forecasting."),console.error("Error during forecasting:",P.data.error),a(!1)):P.data&&P.data.message&&h(P.data.message);u<95&&(O+=1,d(O))}catch(P){clearInterval(D),h("Error polling job status."),console.error("Error polling job status:",P),a(!1)}},5e3)},k=(()=>{const A=Math.max(...n.map(D=>D.prediction)),O=Math.min(...n.map(D=>D.prediction));return A<=0?0:O>=0?1:A/(A-O)})();return R.useEffect(()=>{console.log("Data in state:",n)},[n]),I.jsx(I.Fragment,{children:I.jsxs("div",{className:"grid-column",children:[I.jsx("div",{className:"grid-row",children:I.jsxs(mit,{variant:"contained",ref:_,"aria-label":"Rune selection button group with a nested menu",children:[I.jsx(EY,{onClick:x,children:bP[w]}),I.jsx(EY,{size:"small","aria-controls":m?"split-button-menu":void 0,"aria-expanded":m?"true":void 0,"aria-label":"select rune","aria-haspopup":"menu",onClick:x,children:I.jsx(Ble,{})})]})}),I.jsx(Jit,{sx:{zIndex:1},open:m,anchorEl:_.current,role:void 0,transition:!0,disablePortal:!0,children:({TransitionProps:A,placement:O})=>I.jsx(Ule,{...A,style:{transformOrigin:O==="bottom"?"center top":"center bottom"},children:I.jsx(om,{children:I.jsx(_it,{onClickAway:S,children:I.jsx(fot,{id:"split-button-menu",autoFocusItem:!0,children:bP.map((D,P)=>I.jsx(oot,{selected:P===w,onClick:N=>b(N,P),children:D},D))})})})})}),I.jsx("br",{}),I.jsxs("form",{onSubmit:C,children:[I.jsxs("label",{children:["Rune Name:",I.jsx("input",{type:"text",value:t,onChange:A=>e(A.target.value)})]}),I.jsx("button",{type:"submit",disabled:s,children:s?"Loading...":"Submit"})]}),s&&I.jsxs(I.Fragment,{children:[I.jsx(j_,{animated:!0,now:u}),I.jsx("h3",{children:f})]}),I.jsxs("h3",{children:["Last Updated: ",i]}),I.jsx("div",{style:{width:"100%",height:"400px"},children:I.jsx(As,{width:"100%",height:"100%",children:I.jsxs(bu,{data:n,margin:{top:10,right:30,left:0,bottom:0},children:[I.jsx(dl,{strokeDasharray:"3 3"}),I.jsx(Ko,{dataKey:"date"}),I.jsx(Yo,{domain:g,tickFormatter:A=>A.toFixed(2)}),I.jsx(si,{}),I.jsx("defs",{children:I.jsxs("linearGradient",{id:"splitColor",x1:"0",y1:"0",x2:"0",y2:"1",children:[I.jsx("stop",{offset:k,stopColor:"green",stopOpacity:.6}),I.jsx("stop",{offset:k,stopColor:"red",stopOpacity:.8})]})}),I.jsx(Mr,{type:"monotone",dataKey:"prediction",stroke:"#000",fill:"url(#splitColor)"})]})})})]})})},Yk={x:0,y:0,width:0,height:0,unit:"px"},rg=(t,e,n)=>Math.min(Math.max(t,e),n),hot=(...t)=>t.filter(e=>e&&typeof e=="string").join(" "),DY=(t,e)=>t===e||t.width===e.width&&t.height===e.height&&t.x===e.x&&t.y===e.y&&t.unit===e.unit;function ig(t,e,n){return t.unit==="%"?{...Yk,...t,unit:"%"}:{unit:"%",x:t.x?t.x/e*100:0,y:t.y?t.y/n*100:0,width:t.width?t.width/e*100:0,height:t.height?t.height/n*100:0}}function yd(t,e,n){return t.unit?t.unit==="px"?{...Yk,...t,unit:"px"}:{unit:"px",x:t.x?t.x*e/100:0,y:t.y?t.y*n/100:0,width:t.width?t.width*e/100:0,height:t.height?t.height*n/100:0}:{...Yk,...t,unit:"px"}}function PY(t,e,n,r,i,o=0,s=0,a=r,l=i){const c={...t};let u=Math.min(o,r),d=Math.min(s,i),f=Math.min(a,r),h=Math.min(l,i);e&&(e>1?(u=s?s*e:u,d=u/e,f=a*e):(d=o?o/e:d,u=d*e,h=l/e)),c.y<0&&(c.height=Math.max(c.height+c.y,d),c.y=0),c.x<0&&(c.width=Math.max(c.width+c.x,u),c.x=0);const g=r-(c.x+c.width);g<0&&(c.x=Math.min(c.x,r-u),c.width+=g);const p=i-(c.y+c.height);if(p<0&&(c.y=Math.min(c.y,i-d),c.height+=p),c.width<u&&((n==="sw"||n=="nw")&&(c.x-=u-c.width),c.width=u),c.height<d&&((n==="nw"||n=="ne")&&(c.y-=d-c.height),c.height=d),c.width>f&&((n==="sw"||n=="nw")&&(c.x-=f-c.width),c.width=f),c.height>h&&((n==="nw"||n=="ne")&&(c.y-=h-c.height),c.height=h),e){const m=c.width/c.height;if(m<e){const v=Math.max(c.width/e,d);(n==="nw"||n=="ne")&&(c.y-=v-c.height),c.height=v}else if(m>e){const v=Math.max(c.height*e,u);(n==="sw"||n=="nw")&&(c.x-=v-c.width),c.width=v}}return c}function pot(t,e,n,r){const i={...t};return e==="ArrowLeft"?r==="nw"?(i.x-=n,i.y-=n,i.width+=n,i.height+=n):r==="w"?(i.x-=n,i.width+=n):r==="sw"?(i.x-=n,i.width+=n,i.height+=n):r==="ne"?(i.y+=n,i.width-=n,i.height-=n):r==="e"?i.width-=n:r==="se"&&(i.width-=n,i.height-=n):e==="ArrowRight"&&(r==="nw"?(i.x+=n,i.y+=n,i.width-=n,i.height-=n):r==="w"?(i.x+=n,i.width-=n):r==="sw"?(i.x+=n,i.width-=n,i.height-=n):r==="ne"?(i.y-=n,i.width+=n,i.height+=n):r==="e"?i.width+=n:r==="se"&&(i.width+=n,i.height+=n)),e==="ArrowUp"?r==="nw"?(i.x-=n,i.y-=n,i.width+=n,i.height+=n):r==="n"?(i.y-=n,i.height+=n):r==="ne"?(i.y-=n,i.width+=n,i.height+=n):r==="sw"?(i.x+=n,i.width-=n,i.height-=n):r==="s"?i.height-=n:r==="se"&&(i.width-=n,i.height-=n):e==="ArrowDown"&&(r==="nw"?(i.x+=n,i.y+=n,i.width-=n,i.height-=n):r==="n"?(i.y+=n,i.height-=n):r==="ne"?(i.y+=n,i.width-=n,i.height-=n):r==="sw"?(i.x-=n,i.width+=n,i.height+=n):r==="s"?i.height+=n:r==="se"&&(i.width+=n,i.height+=n)),i}const og={capture:!0,passive:!1};let mot=0;const _d=class Za extends R.PureComponent{constructor(){super(...arguments),this.docMoveBound=!1,this.mouseDownOnCrop=!1,this.dragStarted=!1,this.evData={startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0},this.componentRef=R.createRef(),this.mediaRef=R.createRef(),this.initChangeCalled=!1,this.instanceId=`rc-${mot++}`,this.state={cropIsActive:!1,newCropIsBeingDrawn:!1},this.onCropPointerDown=e=>{const{crop:n,disabled:r}=this.props,i=this.getBox();if(!n)return;const o=yd(n,i.width,i.height);if(r)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const s=e.target.dataset.ord,a=!!s;let l=e.clientX,c=e.clientY,u=o.x,d=o.y;if(s){const f=e.clientX-i.x,h=e.clientY-i.y;let g=0,p=0;s==="ne"||s=="e"?(g=f-(o.x+o.width),p=h-o.y,u=o.x,d=o.y+o.height):s==="se"||s==="s"?(g=f-(o.x+o.width),p=h-(o.y+o.height),u=o.x,d=o.y):s==="sw"||s=="w"?(g=f-o.x,p=h-(o.y+o.height),u=o.x+o.width,d=o.y):(s==="nw"||s=="n")&&(g=f-o.x,p=h-o.y,u=o.x+o.width,d=o.y+o.height),l=u+i.x+g,c=d+i.y+p}this.evData={startClientX:l,startClientY:c,startCropX:u,startCropY:d,clientX:e.clientX,clientY:e.clientY,isResize:a,ord:s},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})},this.onComponentPointerDown=e=>{const{crop:n,disabled:r,locked:i,keepSelection:o,onChange:s}=this.props,a=this.getBox();if(r||i||o&&n)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const l=e.clientX-a.x,c=e.clientY-a.y,u={unit:"px",x:l,y:c,width:0,height:0};this.evData={startClientX:e.clientX,startClientY:e.clientY,startCropX:l,startCropY:c,clientX:e.clientX,clientY:e.clientY,isResize:!0},this.mouseDownOnCrop=!0,s(yd(u,a.width,a.height),ig(u,a.width,a.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})},this.onDocPointerMove=e=>{const{crop:n,disabled:r,onChange:i,onDragStart:o}=this.props,s=this.getBox();if(r||!n||!this.mouseDownOnCrop)return;e.cancelable&&e.preventDefault(),this.dragStarted||(this.dragStarted=!0,o&&o(e));const{evData:a}=this;a.clientX=e.clientX,a.clientY=e.clientY;let l;a.isResize?l=this.resizeCrop():l=this.dragCrop(),DY(n,l)||i(yd(l,s.width,s.height),ig(l,s.width,s.height))},this.onComponentKeyDown=e=>{const{crop:n,disabled:r,onChange:i,onComplete:o}=this.props;if(r)return;const s=e.key;let a=!1;if(!n)return;const l=this.getBox(),c=this.makePixelCrop(l),u=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?Za.nudgeStepLarge:e.shiftKey?Za.nudgeStepMedium:Za.nudgeStep;if(s==="ArrowLeft"?(c.x-=u,a=!0):s==="ArrowRight"?(c.x+=u,a=!0):s==="ArrowUp"?(c.y-=u,a=!0):s==="ArrowDown"&&(c.y+=u,a=!0),a){e.cancelable&&e.preventDefault(),c.x=rg(c.x,0,l.width-c.width),c.y=rg(c.y,0,l.height-c.height);const d=yd(c,l.width,l.height),f=ig(c,l.width,l.height);i(d,f),o&&o(d,f)}},this.onHandlerKeyDown=(e,n)=>{const{aspect:r=0,crop:i,disabled:o,minWidth:s=0,minHeight:a=0,maxWidth:l,maxHeight:c,onChange:u,onComplete:d}=this.props,f=this.getBox();if(o||!i)return;if(e.key==="ArrowUp"||e.key==="ArrowDown"||e.key==="ArrowLeft"||e.key==="ArrowRight")e.stopPropagation(),e.preventDefault();else return;const h=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?Za.nudgeStepLarge:e.shiftKey?Za.nudgeStepMedium:Za.nudgeStep,g=yd(i,f.width,f.height),p=pot(g,e.key,h,n),m=PY(p,r,n,f.width,f.height,s,a,l,c);if(!DY(i,m)){const v=ig(m,f.width,f.height);u(m,v),d&&d(m,v)}},this.onDocPointerDone=e=>{const{crop:n,disabled:r,onComplete:i,onDragEnd:o}=this.props,s=this.getBox();this.unbindDocMove(),!(r||!n)&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,o&&o(e),i&&i(yd(n,s.width,s.height),ig(n,s.width,s.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))},this.onDragFocus=()=>{var e;(e=this.componentRef.current)==null||e.scrollTo(0,0)}}get document(){return document}getBox(){const e=this.mediaRef.current;if(!e)return{x:0,y:0,width:0,height:0};const{x:n,y:r,width:i,height:o}=e.getBoundingClientRect();return{x:n,y:r,width:i,height:o}}componentDidUpdate(e){const{crop:n,onComplete:r}=this.props;if(r&&!e.crop&&n){const{width:i,height:o}=this.getBox();i&&o&&r(yd(n,i,o),ig(n,i,o))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect(),this.unbindDocMove()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,og),this.document.addEventListener("pointerup",this.onDocPointerDone,og),this.document.addEventListener("pointercancel",this.onDocPointerDone,og),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,og),this.document.removeEventListener("pointerup",this.onDocPointerDone,og),this.document.removeEventListener("pointercancel",this.onDocPointerDone,og),this.docMoveBound=!1)}getCropStyle(){const{crop:e}=this.props;if(e)return{top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`}}dragCrop(){const{evData:e}=this,n=this.getBox(),r=this.makePixelCrop(n),i=e.clientX-e.startClientX,o=e.clientY-e.startClientY;return r.x=rg(e.startCropX+i,0,n.width-r.width),r.y=rg(e.startCropY+o,0,n.height-r.height),r}getPointRegion(e,n,r,i){const{evData:o}=this,s=o.clientX-e.x,a=o.clientY-e.y;let l;i&&n?l=n==="nw"||n==="n"||n==="ne":l=a<o.startCropY;let c;return r&&n?c=n==="nw"||n==="w"||n==="sw":c=s<o.startCropX,c?l?"nw":"sw":l?"ne":"se"}resolveMinDimensions(e,n,r=0,i=0){const o=Math.min(r,e.width),s=Math.min(i,e.height);return!n||!o&&!s?[o,s]:n>1?o?[o,o/n]:[s*n,s]:s?[s*n,s]:[o,o/n]}resizeCrop(){const{evData:e}=this,{aspect:n=0,maxWidth:r,maxHeight:i}=this.props,o=this.getBox(),[s,a]=this.resolveMinDimensions(o,n,this.props.minWidth,this.props.minHeight);let l=this.makePixelCrop(o);const c=this.getPointRegion(o,e.ord,s,a),u=e.ord||c;let d=e.clientX-e.startClientX,f=e.clientY-e.startClientY;(s&&u==="nw"||u==="w"||u==="sw")&&(d=Math.min(d,-s)),(a&&u==="nw"||u==="n"||u==="ne")&&(f=Math.min(f,-a));const h={unit:"px",x:0,y:0,width:0,height:0};c==="ne"?(h.x=e.startCropX,h.width=d,n?(h.height=h.width/n,h.y=e.startCropY-h.height):(h.height=Math.abs(f),h.y=e.startCropY-h.height)):c==="se"?(h.x=e.startCropX,h.y=e.startCropY,h.width=d,n?h.height=h.width/n:h.height=f):c==="sw"?(h.x=e.startCropX+d,h.y=e.startCropY,h.width=Math.abs(d),n?h.height=h.width/n:h.height=f):c==="nw"&&(h.x=e.startCropX+d,h.width=Math.abs(d),n?(h.height=h.width/n,h.y=e.startCropY-h.height):(h.height=Math.abs(f),h.y=e.startCropY+f));const g=PY(h,n,c,o.width,o.height,s,a,r,i);return n||Za.xyOrds.indexOf(u)>-1?l=g:Za.xOrds.indexOf(u)>-1?(l.x=g.x,l.width=g.width):Za.yOrds.indexOf(u)>-1&&(l.y=g.y,l.height=g.height),l.x=rg(l.x,0,o.width-l.width),l.y=rg(l.y,0,o.height-l.height),l}renderCropSelection(){const{ariaLabels:e=Za.defaultProps.ariaLabels,disabled:n,locked:r,renderSelectionAddon:i,ruleOfThirds:o,crop:s}=this.props,a=this.getCropStyle();if(s)return B.createElement("div",{style:a,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":e.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!n&&!r&&B.createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},B.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),B.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),B.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),B.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),B.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":e.nwDragHandle,onKeyDown:l=>this.onHandlerKeyDown(l,"nw"),role:"button"}),B.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":e.nDragHandle,onKeyDown:l=>this.onHandlerKeyDown(l,"n"),role:"button"}),B.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":e.neDragHandle,onKeyDown:l=>this.onHandlerKeyDown(l,"ne"),role:"button"}),B.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":e.eDragHandle,onKeyDown:l=>this.onHandlerKeyDown(l,"e"),role:"button"}),B.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":e.seDragHandle,onKeyDown:l=>this.onHandlerKeyDown(l,"se"),role:"button"}),B.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":e.sDragHandle,onKeyDown:l=>this.onHandlerKeyDown(l,"s"),role:"button"}),B.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":e.swDragHandle,onKeyDown:l=>this.onHandlerKeyDown(l,"sw"),role:"button"}),B.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":e.wDragHandle,onKeyDown:l=>this.onHandlerKeyDown(l,"w"),role:"button"})),i&&B.createElement("div",{className:"ReactCrop__selection-addon",onPointerDown:l=>l.stopPropagation()},i(this.state)),o&&B.createElement(B.Fragment,null,B.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),B.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(e){const n={...Yk,...this.props.crop||{}};return yd(n,e.width,e.height)}render(){const{aspect:e,children:n,circularCrop:r,className:i,crop:o,disabled:s,locked:a,style:l,ruleOfThirds:c}=this.props,{cropIsActive:u,newCropIsBeingDrawn:d}=this.state,f=o?this.renderCropSelection():null,h=hot("ReactCrop",i,u&&"ReactCrop--active",s&&"ReactCrop--disabled",a&&"ReactCrop--locked",d&&"ReactCrop--new-crop",o&&e&&"ReactCrop--fixed-aspect",o&&r&&"ReactCrop--circular-crop",o&&c&&"ReactCrop--rule-of-thirds",!this.dragStarted&&o&&!o.width&&!o.height&&"ReactCrop--invisible-crop",r&&"ReactCrop--no-animate");return B.createElement("div",{ref:this.componentRef,className:h,style:l},B.createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},n),o?B.createElement("svg",{className:"ReactCrop__crop-mask",width:"100%",height:"100%"},B.createElement("defs",null,B.createElement("mask",{id:`hole-${this.instanceId}`},B.createElement("rect",{width:"100%",height:"100%",fill:"white"}),r?B.createElement("ellipse",{cx:`${o.x+o.width/2}${o.unit}`,cy:`${o.y+o.height/2}${o.unit}`,rx:`${o.width/2}${o.unit}`,ry:`${o.height/2}${o.unit}`,fill:"black"}):B.createElement("rect",{x:`${o.x}${o.unit}`,y:`${o.y}${o.unit}`,width:`${o.width}${o.unit}`,height:`${o.height}${o.unit}`,fill:"black"}))),B.createElement("rect",{fill:"black",fillOpacity:.5,width:"100%",height:"100%",mask:`url(#hole-${this.instanceId})`})):void 0,f)}};_d.xOrds=["e","w"],_d.yOrds=["n","s"],_d.xyOrds=["nw","ne","se","sw"],_d.nudgeStep=1,_d.nudgeStepMedium=10,_d.nudgeStepLarge=100,_d.defaultProps={ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}};let got=_d;const vot=()=>{const[t,e]=R.useState([]),[n,r]=R.useState(""),[i,o]=R.useState(""),[s,a]=R.useState(""),[l,c]=R.useState({aspect:16/9}),[u,d]=R.useState([0,0]),f=async()=>{try{const p=await Ht.get("https://99.37.183.149:3055/api4/forecastingstatus",{headers:{"Content-Type":"application/json",Accept:"application/json"}});console.log("Response status:",p.status),console.log("Response data:",p.data);const m=p.data;if(m&&m.dates&&m.predictions){const v=m.dates.map((b,x)=>({date:b,prediction:m.predictions[x][0]}));e(v);const _=v.map(b=>b.prediction),w=Math.min(..._),y=Math.max(..._);d([w-5,y+5])}else e([]);r(m.status||"No status available"),o(m.timestamp||"No timestamp available")}catch(p){console.error("Error fetching forecasting status:",p),r("Error fetching status"),o("Error fetching timestamp"),e([])}},h=async()=>{try{const p=await Ht.get("https://99.37.183.149:3055/api4/forecastplot",{responseType:"blob"}),m=URL.createObjectURL(p.data);a(m)}catch(p){console.error("Error fetching image:",p)}};R.useEffect(()=>{f(),h();const p=setInterval(()=>{f(),h()},5*60*1e3);return()=>clearInterval(p)},[]);const g=R.useCallback(p=>{c({unit:"%",width:100,height:50,x:0,y:25})},[]);return I.jsxs("div",{children:[I.jsx("h3",{children:"LSTM FORECASTING ENGINE-REAL TIME"}),I.jsxs("h4",{children:["Status: ",n]}),I.jsxs("h4",{children:["Last Updated: ",i]}),I.jsx(As,{width:"100%",height:400,children:I.jsxs(bu,{data:t,children:[I.jsx(dl,{strokeDasharray:"3 3"}),I.jsx(Ko,{dataKey:"date"}),I.jsx(Yo,{domain:u,tickFormatter:p=>p.toFixed(2)}),I.jsx(si,{}),I.jsx(Nu,{}),I.jsx(Mr,{type:"monotone",dataKey:"prediction",stroke:"green",fill:"#4682B4"})]})}),s&&I.jsx(got,{src:s,crop:l,onImageLoaded:g,onChange:p=>c(p)})]})};function yot(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,UF(t,e)}function UF(t,e){return UF=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},UF(t,e)}function bot(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function NY(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xot(t,e,n){return t===e?!0:t.correspondingElement?t.correspondingElement.classList.contains(n):t.classList.contains(n)}function wot(t,e,n){if(t===e)return!0;for(;t.parentNode||t.host;){if(t.parentNode&&xot(t,e,n))return!0;t=t.parentNode||t.host}return t}function _ot(t){return document.documentElement.clientWidth<=t.clientX||document.documentElement.clientHeight<=t.clientY}var Sot=function(){if(!(typeof window>"u"||typeof window.addEventListener!="function")){var e=!1,n=Object.defineProperty({},"passive",{get:function(){e=!0}}),r=function(){};return window.addEventListener("testPassiveEventSupport",r,n),window.removeEventListener("testPassiveEventSupport",r,n),e}};function Cot(t){return t===void 0&&(t=0),function(){return++t}}var Eot=Cot(),zF,RC={},xP={},Tot=["touchstart","touchmove"],kot="ignore-react-onclickoutside";function $Y(t,e){var n={},r=Tot.indexOf(e)!==-1;return r&&zF&&(n.passive=!t.props.preventDefault),n}function dO(t,e){var n,r,i=t.displayName||t.name||"Component";return r=n=function(o){yot(s,o);function s(l){var c;return c=o.call(this,l)||this,c.__outsideClickHandler=function(u){if(typeof c.__clickOutsideHandlerProp=="function"){c.__clickOutsideHandlerProp(u);return}var d=c.getInstance();if(typeof d.props.handleClickOutside=="function"){d.props.handleClickOutside(u);return}if(typeof d.handleClickOutside=="function"){d.handleClickOutside(u);return}throw new Error("WrappedComponent: "+i+" lacks a handleClickOutside(event) function for processing outside click events.")},c.__getComponentNode=function(){var u=c.getInstance();return typeof u.setClickOutsideRef=="function"?u.setClickOutsideRef():o_.findDOMNode(u)},c.enableOnClickOutside=function(){if(!(typeof document>"u"||xP[c._uid])){typeof zF>"u"&&(zF=Sot()),xP[c._uid]=!0;var u=c.props.eventTypes;u.forEach||(u=[u]),RC[c._uid]=function(d){if(c.componentNode!==null&&!(c.initTimeStamp>d.timeStamp)&&(c.props.preventDefault&&d.preventDefault(),c.props.stopPropagation&&d.stopPropagation(),!(c.props.excludeScrollbar&&_ot(d)))){var f=d.composed&&d.composedPath&&d.composedPath().shift()||d.target;wot(f,c.componentNode,c.props.outsideClickIgnoreClass)===document&&c.__outsideClickHandler(d)}},u.forEach(function(d){document.addEventListener(d,RC[c._uid],$Y(NY(c),d))})}},c.disableOnClickOutside=function(){delete xP[c._uid];var u=RC[c._uid];if(u&&typeof document<"u"){var d=c.props.eventTypes;d.forEach||(d=[d]),d.forEach(function(f){return document.removeEventListener(f,u,$Y(NY(c),f))}),delete RC[c._uid]}},c.getRef=function(u){return c.instanceRef=u},c._uid=Eot(),c.initTimeStamp=performance.now(),c}var a=s.prototype;return a.getInstance=function(){if(t.prototype&&!t.prototype.isReactComponent)return this;var c=this.instanceRef;return c.getInstance?c.getInstance():c},a.componentDidMount=function(){typeof document>"u"||!document.createElement||(this.getInstance(),this.componentNode=this.__getComponentNode(),!this.props.disableOnClickOutside&&this.enableOnClickOutside())},a.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},a.componentWillUnmount=function(){this.disableOnClickOutside()},a.render=function(){var c=this.props;c.excludeScrollbar;var u=bot(c,["excludeScrollbar"]);return t.prototype&&t.prototype.isReactComponent?u.ref=this.getRef:u.wrappedRef=this.getRef,u.disableOnClickOutside=this.disableOnClickOutside,u.enableOnClickOutside=this.enableOnClickOutside,R.createElement(t,u)},s}(R.Component),n.displayName="OnClickOutside("+i+")",n.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:!1,outsideClickIgnoreClass:kot,preventDefault:!1,stopPropagation:!1},n.getClass=function(){return t.getClass?t.getClass():t},r}function ft(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function kn(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Bf(t,e){const n=ft(t);return isNaN(e)?kn(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function w4(t,e){const n=+ft(t);return kn(t,n+e)}const Hle=6048e5,Aot=864e5,fO=6e4,hO=36e5,Mot=1e3;function Iot(t,e){return w4(t,e*hO)}function jF(t,e){return w4(t,e*fO)}function kl(t,e){const n=ft(t);if(isNaN(e))return kn(t,NaN);if(!e)return n;const r=n.getDate(),i=kn(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const o=i.getDate();return r>=o?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}function _4(t,e){const n=e*3;return kl(t,n)}function Oot(t,e){return w4(t,e*1e3)}function Qk(t,e){const n=e*7;return Bf(t,n)}function Eu(t,e){return kl(t,e*12)}function Dp(t){const e=ft(t);return e.setHours(0,0,0,0),e}function Zk(t){const e=ft(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function kw(t,e){const n=Dp(t),r=Dp(e),i=+n-Zk(n),o=+r-Zk(r);return Math.round((i-o)/Aot)}function Jk(t,e){const n=ft(t),r=ft(e),i=n.getFullYear()-r.getFullYear(),o=n.getMonth()-r.getMonth();return i*12+o}function op(t){const e=ft(t);return Math.trunc(e.getMonth()/3)+1}function eA(t,e){const n=ft(t),r=ft(e),i=n.getFullYear()-r.getFullYear(),o=op(n)-op(r);return i*4+o}function tA(t,e){const n=ft(t),r=ft(e);return n.getFullYear()-r.getFullYear()}function Gle(t){const e=ft(t);return e.setHours(23,59,59,999),e}function Rot(t){const e=ft(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}let Dot={};function sm(){return Dot}function Pot(t,e){var a,l;const n=sm(),r=n.weekStartsOn??((l=(a=n.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??0,i=ft(t),o=i.getDay(),s=(o<r?-7:0)+6-(o-r);return i.setDate(i.getDate()+s),i.setHours(23,59,59,999),i}function qle(t){const e=ft(t),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}const Not={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$ot=(t,e,n)=>{let r;const i=Not[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function wP(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Lot={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Fot={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Bot={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Uot={date:wP({formats:Lot,defaultWidth:"full"}),time:wP({formats:Fot,defaultWidth:"full"}),dateTime:wP({formats:Bot,defaultWidth:"full"})},zot={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},jot=(t,e,n,r)=>zot[t];function J0(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):s;i=t.formattingValues[a]||t.formattingValues[s]}else{const s=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[s]}const o=t.argumentCallback?t.argumentCallback(e):e;return i[o]}}const Wot={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Vot={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Hot={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Got={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},qot={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Xot={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Kot=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Yot={ordinalNumber:Kot,era:J0({values:Wot,defaultWidth:"wide"}),quarter:J0({values:Vot,defaultWidth:"wide",argumentCallback:t=>t-1}),month:J0({values:Hot,defaultWidth:"wide"}),day:J0({values:Got,defaultWidth:"wide"}),dayPeriod:J0({values:qot,defaultWidth:"wide",formattingValues:Xot,defaultFormattingWidth:"wide"})};function eb(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(i);if(!o)return null;const s=o[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Zot(a,d=>d.test(s)):Qot(a,d=>d.test(s));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(s.length);return{value:c,rest:u}}}function Qot(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Zot(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Jot(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],o=e.match(t.parsePattern);if(!o)return null;let s=t.valueCallback?t.valueCallback(o[0]):o[0];s=n.valueCallback?n.valueCallback(s):s;const a=e.slice(i.length);return{value:s,rest:a}}}const est=/^(\d+)(th|st|nd|rd)?/i,tst=/\d+/i,nst={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},rst={any:[/^b/i,/^(a|c)/i]},ist={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ost={any:[/1/i,/2/i,/3/i,/4/i]},sst={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ast={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},lst={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},cst={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ust={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},dst={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},fst={ordinalNumber:Jot({matchPattern:est,parsePattern:tst,valueCallback:t=>parseInt(t,10)}),era:eb({matchPatterns:nst,defaultMatchWidth:"wide",parsePatterns:rst,defaultParseWidth:"any"}),quarter:eb({matchPatterns:ist,defaultMatchWidth:"wide",parsePatterns:ost,defaultParseWidth:"any",valueCallback:t=>t+1}),month:eb({matchPatterns:sst,defaultMatchWidth:"wide",parsePatterns:ast,defaultParseWidth:"any"}),day:eb({matchPatterns:lst,defaultMatchWidth:"wide",parsePatterns:cst,defaultParseWidth:"any"}),dayPeriod:eb({matchPatterns:ust,defaultMatchWidth:"any",parsePatterns:dst,defaultParseWidth:"any"})},Xle={code:"en-US",formatDistance:$ot,formatLong:Uot,formatRelative:jot,localize:Yot,match:fst,options:{weekStartsOn:0,firstWeekContainsDate:1}};function pO(t){const e=ft(t),n=kn(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function hst(t){const e=ft(t);return kw(e,pO(e))+1}function ju(t,e){var a,l,c,u;const n=sm(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=ft(t),o=i.getDay(),s=(o<r?7:0)+o-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function Zv(t){return ju(t,{weekStartsOn:1})}function Kle(t){const e=ft(t),n=e.getFullYear(),r=kn(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=Zv(r),o=kn(t,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const s=Zv(o);return e.getTime()>=i.getTime()?n+1:e.getTime()>=s.getTime()?n:n-1}function pst(t){const e=Kle(t),n=kn(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Zv(n)}function S4(t){const e=ft(t),n=+Zv(e)-+pst(e);return Math.round(n/Hle)+1}function C4(t,e){var u,d,f,h;const n=ft(t),r=n.getFullYear(),i=sm(),o=(e==null?void 0:e.firstWeekContainsDate)??((d=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??i.firstWeekContainsDate??((h=(f=i.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,s=kn(t,0);s.setFullYear(r+1,0,o),s.setHours(0,0,0,0);const a=ju(s,e),l=kn(t,0);l.setFullYear(r,0,o),l.setHours(0,0,0,0);const c=ju(l,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function mst(t,e){var a,l,c,u;const n=sm(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,i=C4(t,e),o=kn(t,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),ju(o,e)}function Yle(t,e){const n=ft(t),r=+ju(n,e)-+mst(n,e);return Math.round(r/Hle)+1}function Tn(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const bd={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Tn(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Tn(n+1,2)},d(t,e){return Tn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Tn(t.getHours()%12||12,e.length)},H(t,e){return Tn(t.getHours(),e.length)},m(t,e){return Tn(t.getMinutes(),e.length)},s(t,e){return Tn(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Tn(i,e.length)}},sg={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},LY={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return bd.y(t,e)},Y:function(t,e,n,r){const i=C4(t,r),o=i>0?i:1-i;if(e==="YY"){const s=o%100;return Tn(s,2)}return e==="Yo"?n.ordinalNumber(o,{unit:"year"}):Tn(o,e.length)},R:function(t,e){const n=Kle(t);return Tn(n,e.length)},u:function(t,e){const n=t.getFullYear();return Tn(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Tn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Tn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return bd.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Tn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=Yle(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Tn(i,e.length)},I:function(t,e,n){const r=S4(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Tn(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):bd.d(t,e)},D:function(t,e,n){const r=hst(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Tn(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Tn(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Tn(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Tn(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=sg.noon:r===0?i=sg.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=sg.evening:r>=12?i=sg.afternoon:r>=4?i=sg.morning:i=sg.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return bd.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):bd.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Tn(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Tn(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):bd.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):bd.s(t,e)},S:function(t,e){return bd.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return BY(r);case"XXXX":case"XX":return xh(r);case"XXXXX":case"XXX":default:return xh(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return BY(r);case"xxxx":case"xx":return xh(r);case"xxxxx":case"xxx":default:return xh(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+FY(r,":");case"OOOO":default:return"GMT"+xh(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+FY(r,":");case"zzzz":default:return"GMT"+xh(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Tn(r,e.length)},T:function(t,e,n){const r=t.getTime();return Tn(r,e.length)}};function FY(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),o=r%60;return o===0?n+String(i):n+String(i)+e+Tn(o,2)}function BY(t,e){return t%60===0?(t>0?"-":"+")+Tn(Math.abs(t)/60,2):xh(t,e)}function xh(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Tn(Math.trunc(r/60),2),o=Tn(r%60,2);return n+i+e+o}const UY=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Qle=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},gst=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return UY(t,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",UY(r,e)).replace("{{time}}",Qle(i,e))},nA={p:Qle,P:gst},vst=/^D+$/,yst=/^Y+$/,bst=["D","DD","YY","YYYY"];function Zle(t){return vst.test(t)}function Jle(t){return yst.test(t)}function WF(t,e,n){const r=xst(t,e,n);if(console.warn(r),bst.includes(t))throw new RangeError(r)}function xst(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function Tu(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function rA(t){if(!Tu(t)&&typeof t!="number")return!1;const e=ft(t);return!isNaN(Number(e))}const wst=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_st=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Sst=/^'([^]*?)'?$/,Cst=/''/g,Est=/[a-zA-Z]/;function zY(t,e,n){var u,d,f,h,g,p,m,v;const r=sm(),i=(n==null?void 0:n.locale)??r.locale??Xle,o=(n==null?void 0:n.firstWeekContainsDate)??((d=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((h=(f=r.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,s=(n==null?void 0:n.weekStartsOn)??((p=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:p.weekStartsOn)??r.weekStartsOn??((v=(m=r.locale)==null?void 0:m.options)==null?void 0:v.weekStartsOn)??0,a=ft(t);if(!rA(a))throw new RangeError("Invalid time value");let l=e.match(_st).map(_=>{const w=_[0];if(w==="p"||w==="P"){const y=nA[w];return y(_,i.formatLong)}return _}).join("").match(wst).map(_=>{if(_==="''")return{isToken:!1,value:"'"};const w=_[0];if(w==="'")return{isToken:!1,value:Tst(_)};if(LY[w])return{isToken:!0,value:_};if(w.match(Est))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:_}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:o,weekStartsOn:s,locale:i};return l.map(_=>{if(!_.isToken)return _.value;const w=_.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&Jle(w)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Zle(w))&&WF(w,e,String(t));const y=LY[w[0]];return y(a,w,i.localize,c)}).join("")}function Tst(t){const e=t.match(Sst);return e?e[1].replace(Cst,"'"):t}function jY(t){return ft(t).getDate()}function kst(t){return ft(t).getDay()}function _c(t){return ft(t).getHours()}function Sc(t){return ft(t).getMinutes()}function Io(t){return ft(t).getMonth()}function ku(t){return ft(t).getSeconds()}function VF(t){return ft(t).getTime()}function Xt(t){return ft(t).getFullYear()}function yf(t,e){const n=ft(t),r=ft(e);return n.getTime()>r.getTime()}function Pp(t,e){const n=ft(t),r=ft(e);return+n<+r}function Ast(t,e){const n=ft(t),r=ft(e);return+n==+r}function Mst(t,e){const n=Dp(t),r=Dp(e);return+n==+r}function Ist(t,e){const n=ft(t),r=ft(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function HF(t){const e=ft(t),n=e.getMonth(),r=n-n%3;return e.setMonth(r,1),e.setHours(0,0,0,0),e}function Ost(t,e){const n=HF(t),r=HF(e);return+n==+r}function Rst(t,e){const n=ft(t),r=ft(e);return n.getFullYear()===r.getFullYear()}function Aw(t,e){const n=+ft(t),[r,i]=[+ft(e.start),+ft(e.end)].sort((o,s)=>o-s);return n>=r&&n<=i}function WY(t){let e;return t.forEach(function(n){const r=ft(n);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function VY(t){let e;return t.forEach(n=>{const r=ft(n);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function Dst(){return Object.assign({},sm())}function Pst(t,e){const n=e instanceof Date?kn(e,0):new e(0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}const Nst=10;class ece{constructor(){He(this,"subPriority",0)}validate(e,n){return!0}}class $st extends ece{constructor(e,n,r,i,o){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=i,o&&(this.subPriority=o)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class Lst extends ece{constructor(){super(...arguments);He(this,"priority",Nst);He(this,"subPriority",-1)}set(n,r){return r.timestampIsSet?n:kn(n,Pst(n,Date))}}class bn{run(e,n,r,i){const o=this.parse(e,n,r,i);return o?{setter:new $st(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(e,n,r){return!0}}class Fst extends bn{constructor(){super(...arguments);He(this,"priority",140);He(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}set(n,r,i){return r.era=i,n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}const Dr={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},tc={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Pr(t,e){return t&&{value:e(t.value),rest:t.rest}}function fr(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function nc(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,o=n[3]?parseInt(n[3],10):0,s=n[5]?parseInt(n[5],10):0;return{value:r*(i*hO+o*fO+s*Mot),rest:e.slice(n[0].length)}}function tce(t){return fr(Dr.anyDigitsSigned,t)}function Sr(t,e){switch(t){case 1:return fr(Dr.singleDigit,e);case 2:return fr(Dr.twoDigits,e);case 3:return fr(Dr.threeDigits,e);case 4:return fr(Dr.fourDigits,e);default:return fr(new RegExp("^\\d{1,"+t+"}"),e)}}function iA(t,e){switch(t){case 1:return fr(Dr.singleDigitSigned,e);case 2:return fr(Dr.twoDigitsSigned,e);case 3:return fr(Dr.threeDigitsSigned,e);case 4:return fr(Dr.fourDigitsSigned,e);default:return fr(new RegExp("^-?\\d{1,"+t+"}"),e)}}function E4(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function nce(t,e){const n=e>0,r=n?e:1-e;let i;if(r<=50)i=t||100;else{const o=r+50,s=Math.trunc(o/100)*100,a=t>=o%100;i=t+s-(a?100:0)}return n?i:1-i}function rce(t){return t%400===0||t%4===0&&t%100!==0}class Bst extends bn{constructor(){super(...arguments);He(this,"priority",130);He(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,i){const o=s=>({year:s,isTwoDigitYear:r==="yy"});switch(r){case"y":return Pr(Sr(4,n),o);case"yo":return Pr(i.ordinalNumber(n,{unit:"year"}),o);default:return Pr(Sr(r.length,n),o)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i){const o=n.getFullYear();if(i.isTwoDigitYear){const a=nce(i.year,o);return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const s=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}}class Ust extends bn{constructor(){super(...arguments);He(this,"priority",130);He(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,i){const o=s=>({year:s,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Pr(Sr(4,n),o);case"Yo":return Pr(i.ordinalNumber(n,{unit:"year"}),o);default:return Pr(Sr(r.length,n),o)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i,o){const s=C4(n,o);if(i.isTwoDigitYear){const l=nce(i.year,s);return n.setFullYear(l,0,o.firstWeekContainsDate),n.setHours(0,0,0,0),ju(n,o)}const a=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(a,0,o.firstWeekContainsDate),n.setHours(0,0,0,0),ju(n,o)}}class zst extends bn{constructor(){super(...arguments);He(this,"priority",130);He(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return iA(r==="R"?4:r.length,n)}set(n,r,i){const o=kn(n,0);return o.setFullYear(i,0,4),o.setHours(0,0,0,0),Zv(o)}}class jst extends bn{constructor(){super(...arguments);He(this,"priority",130);He(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return iA(r==="u"?4:r.length,n)}set(n,r,i){return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}class Wst extends bn{constructor(){super(...arguments);He(this,"priority",120);He(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"Q":case"QQ":return Sr(r.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class Vst extends bn{constructor(){super(...arguments);He(this,"priority",120);He(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"q":case"qq":return Sr(r.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class Hst extends bn{constructor(){super(...arguments);He(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);He(this,"priority",110)}parse(n,r,i){const o=s=>s-1;switch(r){case"M":return Pr(fr(Dr.month,n),o);case"MM":return Pr(Sr(2,n),o);case"Mo":return Pr(i.ordinalNumber(n,{unit:"month"}),o);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}class Gst extends bn{constructor(){super(...arguments);He(this,"priority",110);He(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,i){const o=s=>s-1;switch(r){case"L":return Pr(fr(Dr.month,n),o);case"LL":return Pr(Sr(2,n),o);case"Lo":return Pr(i.ordinalNumber(n,{unit:"month"}),o);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}function qst(t,e,n){const r=ft(t),i=Yle(r,n)-e;return r.setDate(r.getDate()-i*7),r}class Xst extends bn{constructor(){super(...arguments);He(this,"priority",100);He(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,i){switch(r){case"w":return fr(Dr.week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return Sr(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i,o){return ju(qst(n,i,o),o)}}function Kst(t,e){const n=ft(t),r=S4(n)-e;return n.setDate(n.getDate()-r*7),n}class Yst extends bn{constructor(){super(...arguments);He(this,"priority",100);He(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,i){switch(r){case"I":return fr(Dr.week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return Sr(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i){return Zv(Kst(n,i))}}const Qst=[31,28,31,30,31,30,31,31,30,31,30,31],Zst=[31,29,31,30,31,30,31,31,30,31,30,31];class Jst extends bn{constructor(){super(...arguments);He(this,"priority",90);He(this,"subPriority",1);He(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"d":return fr(Dr.date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return Sr(r.length,n)}}validate(n,r){const i=n.getFullYear(),o=rce(i),s=n.getMonth();return o?r>=1&&r<=Zst[s]:r>=1&&r<=Qst[s]}set(n,r,i){return n.setDate(i),n.setHours(0,0,0,0),n}}class eat extends bn{constructor(){super(...arguments);He(this,"priority",90);He(this,"subpriority",1);He(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,i){switch(r){case"D":case"DD":return fr(Dr.dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return Sr(r.length,n)}}validate(n,r){const i=n.getFullYear();return rce(i)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,i){return n.setMonth(0,i),n.setHours(0,0,0,0),n}}function T4(t,e,n){var d,f,h,g;const r=sm(),i=(n==null?void 0:n.weekStartsOn)??((f=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??r.weekStartsOn??((g=(h=r.locale)==null?void 0:h.options)==null?void 0:g.weekStartsOn)??0,o=ft(t),s=o.getDay(),l=(e%7+7)%7,c=7-i,u=e<0||e>6?e-(s+c)%7:(l+c)%7-(s+c)%7;return Bf(o,u)}class tat extends bn{constructor(){super(...arguments);He(this,"priority",90);He(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,o){return n=T4(n,i,o),n.setHours(0,0,0,0),n}}class nat extends bn{constructor(){super(...arguments);He(this,"priority",90);He(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,i,o){const s=a=>{const l=Math.floor((a-1)/7)*7;return(a+o.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return Pr(Sr(r.length,n),s);case"eo":return Pr(i.ordinalNumber(n,{unit:"day"}),s);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,o){return n=T4(n,i,o),n.setHours(0,0,0,0),n}}class rat extends bn{constructor(){super(...arguments);He(this,"priority",90);He(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,i,o){const s=a=>{const l=Math.floor((a-1)/7)*7;return(a+o.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return Pr(Sr(r.length,n),s);case"co":return Pr(i.ordinalNumber(n,{unit:"day"}),s);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,o){return n=T4(n,i,o),n.setHours(0,0,0,0),n}}function iat(t){let n=ft(t).getDay();return n===0&&(n=7),n}function oat(t,e){const n=ft(t),r=iat(n),i=e-r;return Bf(n,i)}class sat extends bn{constructor(){super(...arguments);He(this,"priority",90);He(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,i){const o=s=>s===0?7:s;switch(r){case"i":case"ii":return Sr(r.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return Pr(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),o);case"iiiii":return Pr(i.day(n,{width:"narrow",context:"formatting"}),o);case"iiiiii":return Pr(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),o);case"iiii":default:return Pr(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),o)}}validate(n,r){return r>=1&&r<=7}set(n,r,i){return n=oat(n,i),n.setHours(0,0,0,0),n}}class aat extends bn{constructor(){super(...arguments);He(this,"priority",80);He(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(E4(i),0,0,0),n}}class lat extends bn{constructor(){super(...arguments);He(this,"priority",80);He(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(E4(i),0,0,0),n}}class cat extends bn{constructor(){super(...arguments);He(this,"priority",80);He(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(E4(i),0,0,0),n}}class uat extends bn{constructor(){super(...arguments);He(this,"priority",70);He(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,i){switch(r){case"h":return fr(Dr.hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return Sr(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,i){const o=n.getHours()>=12;return o&&i<12?n.setHours(i+12,0,0,0):!o&&i===12?n.setHours(0,0,0,0):n.setHours(i,0,0,0),n}}class dat extends bn{constructor(){super(...arguments);He(this,"priority",70);He(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,i){switch(r){case"H":return fr(Dr.hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return Sr(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,i){return n.setHours(i,0,0,0),n}}class fat extends bn{constructor(){super(...arguments);He(this,"priority",70);He(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,i){switch(r){case"K":return fr(Dr.hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return Sr(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.getHours()>=12&&i<12?n.setHours(i+12,0,0,0):n.setHours(i,0,0,0),n}}class hat extends bn{constructor(){super(...arguments);He(this,"priority",70);He(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,i){switch(r){case"k":return fr(Dr.hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return Sr(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,i){const o=i<=24?i%24:i;return n.setHours(o,0,0,0),n}}class pat extends bn{constructor(){super(...arguments);He(this,"priority",60);He(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"m":return fr(Dr.minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return Sr(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setMinutes(i,0,0),n}}class mat extends bn{constructor(){super(...arguments);He(this,"priority",50);He(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"s":return fr(Dr.second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return Sr(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setSeconds(i,0),n}}class gat extends bn{constructor(){super(...arguments);He(this,"priority",30);He(this,"incompatibleTokens",["t","T"])}parse(n,r){const i=o=>Math.trunc(o*Math.pow(10,-r.length+3));return Pr(Sr(r.length,n),i)}set(n,r,i){return n.setMilliseconds(i),n}}class vat extends bn{constructor(){super(...arguments);He(this,"priority",10);He(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return nc(tc.basicOptionalMinutes,n);case"XX":return nc(tc.basic,n);case"XXXX":return nc(tc.basicOptionalSeconds,n);case"XXXXX":return nc(tc.extendedOptionalSeconds,n);case"XXX":default:return nc(tc.extended,n)}}set(n,r,i){return r.timestampIsSet?n:kn(n,n.getTime()-Zk(n)-i)}}class yat extends bn{constructor(){super(...arguments);He(this,"priority",10);He(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return nc(tc.basicOptionalMinutes,n);case"xx":return nc(tc.basic,n);case"xxxx":return nc(tc.basicOptionalSeconds,n);case"xxxxx":return nc(tc.extendedOptionalSeconds,n);case"xxx":default:return nc(tc.extended,n)}}set(n,r,i){return r.timestampIsSet?n:kn(n,n.getTime()-Zk(n)-i)}}class bat extends bn{constructor(){super(...arguments);He(this,"priority",40);He(this,"incompatibleTokens","*")}parse(n){return tce(n)}set(n,r,i){return[kn(n,i*1e3),{timestampIsSet:!0}]}}class xat extends bn{constructor(){super(...arguments);He(this,"priority",20);He(this,"incompatibleTokens","*")}parse(n){return tce(n)}set(n,r,i){return[kn(n,i),{timestampIsSet:!0}]}}const wat={G:new Fst,y:new Bst,Y:new Ust,R:new zst,u:new jst,Q:new Wst,q:new Vst,M:new Hst,L:new Gst,w:new Xst,I:new Yst,d:new Jst,D:new eat,E:new tat,e:new nat,c:new rat,i:new sat,a:new aat,b:new lat,B:new cat,h:new uat,H:new dat,K:new fat,k:new hat,m:new pat,s:new mat,S:new gat,X:new vat,x:new yat,t:new bat,T:new xat},_at=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Sat=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Cat=/^'([^]*?)'?$/,Eat=/''/g,Tat=/\S/,kat=/[a-zA-Z]/;function _P(t,e,n,r){var p,m,v,_,w,y,b,x;const i=Dst(),o=(r==null?void 0:r.locale)??i.locale??Xle,s=(r==null?void 0:r.firstWeekContainsDate)??((m=(p=r==null?void 0:r.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??i.firstWeekContainsDate??((_=(v=i.locale)==null?void 0:v.options)==null?void 0:_.firstWeekContainsDate)??1,a=(r==null?void 0:r.weekStartsOn)??((y=(w=r==null?void 0:r.locale)==null?void 0:w.options)==null?void 0:y.weekStartsOn)??i.weekStartsOn??((x=(b=i.locale)==null?void 0:b.options)==null?void 0:x.weekStartsOn)??0;if(e==="")return t===""?ft(n):kn(n,NaN);const l={firstWeekContainsDate:s,weekStartsOn:a,locale:o},c=[new Lst],u=e.match(Sat).map(S=>{const C=S[0];if(C in nA){const T=nA[C];return T(S,o.formatLong)}return S}).join("").match(_at),d=[];for(let S of u){!(r!=null&&r.useAdditionalWeekYearTokens)&&Jle(S)&&WF(S,e,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&Zle(S)&&WF(S,e,t);const C=S[0],T=wat[C];if(T){const{incompatibleTokens:E}=T;if(Array.isArray(E)){const A=d.find(O=>E.includes(O.token)||O.token===C);if(A)throw new RangeError(`The format string mustn't contain \`${A.fullToken}\` and \`${S}\` at the same time`)}else if(T.incompatibleTokens==="*"&&d.length>0)throw new RangeError(`The format string mustn't contain \`${S}\` and any other token at the same time`);d.push({token:C,fullToken:S});const k=T.run(t,S,o.match,l);if(!k)return kn(n,NaN);c.push(k.setter),t=k.rest}else{if(C.match(kat))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");if(S==="''"?S="'":C==="'"&&(S=Aat(S)),t.indexOf(S)===0)t=t.slice(S.length);else return kn(n,NaN)}}if(t.length>0&&Tat.test(t))return kn(n,NaN);const f=c.map(S=>S.priority).sort((S,C)=>C-S).filter((S,C,T)=>T.indexOf(S)===C).map(S=>c.filter(C=>C.priority===S).sort((C,T)=>T.subPriority-C.subPriority)).map(S=>S[0]);let h=ft(n);if(isNaN(h.getTime()))return kn(n,NaN);const g={};for(const S of f){if(!S.validate(h,l))return kn(n,NaN);const C=S.set(h,g,l);Array.isArray(C)?(h=C[0],Object.assign(g,C[1])):h=C}return kn(n,h)}function Aat(t){return t.match(Cat)[1].replace(Eat,"'")}function Mat(t,e){const r=Dat(t);let i;if(r.date){const l=Pat(r.date,2);i=Nat(l.restDateString,l.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const o=i.getTime();let s=0,a;if(r.time&&(s=$at(r.time),isNaN(s)))return new Date(NaN);if(r.timezone){if(a=Lat(r.timezone),isNaN(a))return new Date(NaN)}else{const l=new Date(o+s),c=new Date(0);return c.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),c.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),c}return new Date(o+s+a)}const DC={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Iat=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Oat=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Rat=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Dat(t){const e={},n=t.split(DC.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],DC.timeZoneDelimiter.test(e.date)&&(e.date=t.split(DC.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=DC.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function Pat(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:o===null?i:o*100,restDateString:t.slice((r[1]||r[2]).length)}}function Nat(t,e){if(e===null)return new Date(NaN);const n=t.match(Iat);if(!n)return new Date(NaN);const r=!!n[4],i=tb(n[1]),o=tb(n[2])-1,s=tb(n[3]),a=tb(n[4]),l=tb(n[5])-1;if(r)return jat(e,a,l)?Fat(e,a,l):new Date(NaN);{const c=new Date(0);return!Uat(e,o,s)||!zat(e,i)?new Date(NaN):(c.setUTCFullYear(e,o,Math.max(i,s)),c)}}function tb(t){return t?parseInt(t):1}function $at(t){const e=t.match(Oat);if(!e)return NaN;const n=SP(e[1]),r=SP(e[2]),i=SP(e[3]);return Wat(n,r,i)?n*hO+r*fO+i*1e3:NaN}function SP(t){return t&&parseFloat(t.replace(",","."))||0}function Lat(t){if(t==="Z")return 0;const e=t.match(Rat);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return Vat(r,i)?n*(r*hO+i*fO):NaN}function Fat(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,o=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+o),r}const Bat=[31,null,31,30,31,30,31,31,30,31,30,31];function ice(t){return t%400===0||t%4===0&&t%100!==0}function Uat(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(Bat[e]||(ice(t)?29:28))}function zat(t,e){return e>=1&&e<=(ice(t)?366:365)}function jat(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function Wat(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function Vat(t,e){return e>=0&&e<=59}function Hat(t){const e=ft(t),n=e.getFullYear(),r=e.getMonth(),i=kn(t,0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function _s(t,e){const n=ft(t),r=n.getFullYear(),i=n.getDate(),o=kn(t,0);o.setFullYear(r,e,15),o.setHours(0,0,0,0);const s=Hat(o);return n.setMonth(e,Math.min(i,s)),n}function Gat(t,e){let n=ft(t);return isNaN(+n)?kn(t,NaN):(e.year!=null&&n.setFullYear(e.year),e.month!=null&&(n=_s(n,e.month)),e.date!=null&&n.setDate(e.date),e.hours!=null&&n.setHours(e.hours),e.minutes!=null&&n.setMinutes(e.minutes),e.seconds!=null&&n.setSeconds(e.seconds),e.milliseconds!=null&&n.setMilliseconds(e.milliseconds),n)}function BE(t,e){const n=ft(t);return n.setHours(e),n}function UE(t,e){const n=ft(t);return n.setMinutes(e),n}function fg(t,e){const n=ft(t),r=Math.trunc(n.getMonth()/3)+1,i=e-r;return _s(n,n.getMonth()+i*3)}function zE(t,e){const n=ft(t);return n.setSeconds(e),n}function zl(t,e){const n=ft(t);return isNaN(+n)?kn(t,NaN):(n.setFullYear(e),n)}function oce(t){const e=ft(t);return e.setDate(1),e.setHours(0,0,0,0),e}function qat(t,e){return Bf(t,-e)}function Jv(t,e){return kl(t,-e)}function sce(t,e){return _4(t,-e)}function HY(t,e){return Qk(t,-e)}function ey(t,e){return Eu(t,-e)}function Qy(t){return ace(t)?(t.nodeName||"").toLowerCase():"#document"}function Ls(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function nd(t){var e;return(e=(ace(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function ace(t){return t instanceof Node||t instanceof Ls(t).Node}function Oo(t){return t instanceof Element||t instanceof Ls(t).Element}function Pc(t){return t instanceof HTMLElement||t instanceof Ls(t).HTMLElement}function GY(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ls(t).ShadowRoot}function W_(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Na(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function Xat(t){return["table","td","th"].includes(Qy(t))}function mO(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function k4(t){const e=A4(),n=Oo(t)?Na(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Kat(t){let e=bf(t);for(;Pc(e)&&!ty(e);){if(k4(e))return e;if(mO(e))return null;e=bf(e)}return null}function A4(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ty(t){return["html","body","#document"].includes(Qy(t))}function Na(t){return Ls(t).getComputedStyle(t)}function gO(t){return Oo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function bf(t){if(Qy(t)==="html")return t;const e=t.assignedSlot||t.parentNode||GY(t)&&t.host||nd(t);return GY(e)?e.host:e}function lce(t){const e=bf(t);return ty(e)?t.ownerDocument?t.ownerDocument.body:t.body:Pc(e)&&W_(e)?e:lce(e)}function Mw(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=lce(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),s=Ls(i);if(o){const a=GF(s);return e.concat(s,s.visualViewport||[],W_(i)?i:[],a&&n?Mw(a):[])}return e.concat(i,Mw(i,[],n))}function GF(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}const ny=Math.min,sp=Math.max,oA=Math.round,PC=Math.floor,xf=t=>({x:t,y:t}),Yat={left:"right",right:"left",bottom:"top",top:"bottom"},Qat={start:"end",end:"start"};function Zat(t,e,n){return sp(t,ny(e,n))}function vO(t,e){return typeof t=="function"?t(e):t}function ry(t){return t.split("-")[0]}function V_(t){return t.split("-")[1]}function Jat(t){return t==="x"?"y":"x"}function M4(t){return t==="y"?"height":"width"}function Iw(t){return["top","bottom"].includes(ry(t))?"y":"x"}function I4(t){return Jat(Iw(t))}function elt(t,e,n){n===void 0&&(n=!1);const r=V_(t),i=I4(t),o=M4(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(s=sA(s)),[s,sA(s)]}function tlt(t){const e=sA(t);return[qF(t),e,qF(e)]}function qF(t){return t.replace(/start|end/g,e=>Qat[e])}function nlt(t,e,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?o:s;default:return[]}}function rlt(t,e,n,r){const i=V_(t);let o=nlt(ry(t),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),e&&(o=o.concat(o.map(qF)))),o}function sA(t){return t.replace(/left|right|bottom|top/g,e=>Yat[e])}function ilt(t){return{top:0,right:0,bottom:0,left:0,...t}}function cce(t){return typeof t!="number"?ilt(t):{top:t,right:t,bottom:t,left:t}}function aA(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function qY(t,e,n){let{reference:r,floating:i}=t;const o=Iw(e),s=I4(e),a=M4(s),l=ry(e),c=o==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:u,y:r.y-i.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(V_(e)){case"start":h[s]-=f*(n&&c?-1:1);break;case"end":h[s]+=f*(n&&c?-1:1);break}return h}const olt=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let c=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=qY(c,r,l),f=r,h={},g=0;for(let p=0;p<a.length;p++){const{name:m,fn:v}=a[p],{x:_,y:w,data:y,reset:b}=await v({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:c,platform:s,elements:{reference:t,floating:e}});u=_??u,d=w??d,h={...h,[m]:{...h[m],...y}},b&&g<=50&&(g++,typeof b=="object"&&(b.placement&&(f=b.placement),b.rects&&(c=b.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:i}):b.rects),{x:u,y:d}=qY(c,f,l)),p=-1)}return{x:u,y:d,placement:f,strategy:i,middlewareData:h}};async function slt(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=vO(e,t),g=cce(h),m=a[f?d==="floating"?"reference":"floating":d],v=aA(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(m)))==null||n?m:m.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),_=d==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),y=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},b=aA(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:w,strategy:l}):_);return{top:(v.top-b.top+g.top)/y.y,bottom:(b.bottom-v.bottom+g.bottom)/y.y,left:(v.left-b.left+g.left)/y.x,right:(b.right-v.right+g.right)/y.x}}const alt=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:o,platform:s,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=vO(t,e)||{};if(c==null)return{};const d=cce(u),f={x:n,y:r},h=I4(i),g=M4(h),p=await s.getDimensions(c),m=h==="y",v=m?"top":"left",_=m?"bottom":"right",w=m?"clientHeight":"clientWidth",y=o.reference[g]+o.reference[h]-f[h]-o.floating[g],b=f[h]-o.reference[h],x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let S=x?x[w]:0;(!S||!await(s.isElement==null?void 0:s.isElement(x)))&&(S=a.floating[w]||o.floating[g]);const C=y/2-b/2,T=S/2-p[g]/2-1,E=ny(d[v],T),k=ny(d[_],T),A=E,O=S-p[g]-k,D=S/2-p[g]/2+C,P=Zat(A,D,O),N=!l.arrow&&V_(i)!=null&&D!==P&&o.reference[g]/2-(D<A?E:k)-p[g]/2<0,U=N?D<A?D-A:D-O:0;return{[h]:f[h]+U,data:{[h]:P,centerOffset:D-P-U,...N&&{alignmentOffset:U}},reset:N}}}),llt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:p=!0,...m}=vO(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const v=ry(i),_=Iw(a),w=ry(a)===a,y=await(l.isRTL==null?void 0:l.isRTL(c.floating)),b=f||(w||!p?[sA(a)]:tlt(a)),x=g!=="none";!f&&x&&b.push(...rlt(a,p,g,y));const S=[a,...b],C=await slt(e,m),T=[];let E=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&T.push(C[v]),d){const D=elt(i,s,y);T.push(C[D[0]],C[D[1]])}if(E=[...E,{placement:i,overflows:T}],!T.every(D=>D<=0)){var k,A;const D=(((k=o.flip)==null?void 0:k.index)||0)+1,P=S[D];if(P)return{data:{index:D,overflows:E},reset:{placement:P}};let N=(A=E.filter(U=>U.overflows[0]<=0).sort((U,L)=>U.overflows[1]-L.overflows[1])[0])==null?void 0:A.placement;if(!N)switch(h){case"bestFit":{var O;const U=(O=E.filter(L=>{if(x){const V=Iw(L.placement);return V===_||V==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(V=>V>0).reduce((V,G)=>V+G,0)]).sort((L,V)=>L[1]-V[1])[0])==null?void 0:O[0];U&&(N=U);break}case"initialPlacement":N=a;break}if(i!==N)return{reset:{placement:N}}}return{}}}};async function clt(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=ry(n),a=V_(n),l=Iw(n)==="y",c=["left","top"].includes(s)?-1:1,u=o&&l?-1:1,d=vO(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof g=="number"&&(h=a==="end"?g*-1:g),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const ult=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=e,l=await clt(e,t);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}};function uce(t){const e=Na(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Pc(t),o=i?t.offsetWidth:n,s=i?t.offsetHeight:r,a=oA(n)!==o||oA(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function O4(t){return Oo(t)?t:t.contextElement}function nv(t){const e=O4(t);if(!Pc(e))return xf(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=uce(e);let s=(o?oA(n.width):n.width)/r,a=(o?oA(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const dlt=xf(0);function dce(t){const e=Ls(t);return!A4()||!e.visualViewport?dlt:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function flt(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ls(t)?!1:e}function Np(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=O4(t);let s=xf(1);e&&(r?Oo(r)&&(s=nv(r)):s=nv(t));const a=flt(o,n,r)?dce(o):xf(0);let l=(i.left+a.x)/s.x,c=(i.top+a.y)/s.y,u=i.width/s.x,d=i.height/s.y;if(o){const f=Ls(o),h=r&&Oo(r)?Ls(r):r;let g=f,p=GF(g);for(;p&&r&&h!==g;){const m=nv(p),v=p.getBoundingClientRect(),_=Na(p),w=v.left+(p.clientLeft+parseFloat(_.paddingLeft))*m.x,y=v.top+(p.clientTop+parseFloat(_.paddingTop))*m.y;l*=m.x,c*=m.y,u*=m.x,d*=m.y,l+=w,c+=y,g=Ls(p),p=GF(g)}}return aA({width:u,height:d,x:l,y:c})}function hlt(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",s=nd(r),a=e?mO(e.floating):!1;if(r===s||a&&o)return n;let l={scrollLeft:0,scrollTop:0},c=xf(1);const u=xf(0),d=Pc(r);if((d||!d&&!o)&&((Qy(r)!=="body"||W_(s))&&(l=gO(r)),Pc(r))){const f=Np(r);c=nv(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x,y:n.y*c.y-l.scrollTop*c.y+u.y}}function plt(t){return Array.from(t.getClientRects())}function fce(t){return Np(nd(t)).left+gO(t).scrollLeft}function mlt(t){const e=nd(t),n=gO(t),r=t.ownerDocument.body,i=sp(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=sp(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+fce(t);const a=-n.scrollTop;return Na(r).direction==="rtl"&&(s+=sp(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function glt(t,e){const n=Ls(t),r=nd(t),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const c=A4();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}function vlt(t,e){const n=Np(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=Pc(t)?nv(t):xf(1),s=t.clientWidth*o.x,a=t.clientHeight*o.y,l=i*o.x,c=r*o.y;return{width:s,height:a,x:l,y:c}}function XY(t,e,n){let r;if(e==="viewport")r=glt(t,n);else if(e==="document")r=mlt(nd(t));else if(Oo(e))r=vlt(e,n);else{const i=dce(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return aA(r)}function hce(t,e){const n=bf(t);return n===e||!Oo(n)||ty(n)?!1:Na(n).position==="fixed"||hce(n,e)}function ylt(t,e){const n=e.get(t);if(n)return n;let r=Mw(t,[],!1).filter(a=>Oo(a)&&Qy(a)!=="body"),i=null;const o=Na(t).position==="fixed";let s=o?bf(t):t;for(;Oo(s)&&!ty(s);){const a=Na(s),l=k4(s);!l&&a.position==="fixed"&&(i=null),(o?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||W_(s)&&!l&&hce(t,s))?r=r.filter(u=>u!==s):i=a,s=bf(s)}return e.set(t,r),r}function blt(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const s=[...n==="clippingAncestors"?mO(e)?[]:ylt(e,this._c):[].concat(n),r],a=s[0],l=s.reduce((c,u)=>{const d=XY(e,u,i);return c.top=sp(d.top,c.top),c.right=ny(d.right,c.right),c.bottom=ny(d.bottom,c.bottom),c.left=sp(d.left,c.left),c},XY(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function xlt(t){const{width:e,height:n}=uce(t);return{width:e,height:n}}function wlt(t,e,n){const r=Pc(e),i=nd(e),o=n==="fixed",s=Np(t,!0,o,e);let a={scrollLeft:0,scrollTop:0};const l=xf(0);if(r||!r&&!o)if((Qy(e)!=="body"||W_(i))&&(a=gO(e)),r){const d=Np(e,!0,o,e);l.x=d.x+e.clientLeft,l.y=d.y+e.clientTop}else i&&(l.x=fce(i));const c=s.left+a.scrollLeft-l.x,u=s.top+a.scrollTop-l.y;return{x:c,y:u,width:s.width,height:s.height}}function CP(t){return Na(t).position==="static"}function KY(t,e){return!Pc(t)||Na(t).position==="fixed"?null:e?e(t):t.offsetParent}function pce(t,e){const n=Ls(t);if(mO(t))return n;if(!Pc(t)){let i=bf(t);for(;i&&!ty(i);){if(Oo(i)&&!CP(i))return i;i=bf(i)}return n}let r=KY(t,e);for(;r&&Xat(r)&&CP(r);)r=KY(r,e);return r&&ty(r)&&CP(r)&&!k4(r)?n:r||Kat(t)||n}const _lt=async function(t){const e=this.getOffsetParent||pce,n=this.getDimensions,r=await n(t.floating);return{reference:wlt(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Slt(t){return Na(t).direction==="rtl"}const Clt={convertOffsetParentRelativeRectToViewportRelativeRect:hlt,getDocumentElement:nd,getClippingRect:blt,getOffsetParent:pce,getElementRects:_lt,getClientRects:plt,getDimensions:xlt,getScale:nv,isElement:Oo,isRTL:Slt};function Elt(t,e){let n=null,r;const i=nd(t);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const{left:c,top:u,width:d,height:f}=t.getBoundingClientRect();if(a||e(),!d||!f)return;const h=PC(u),g=PC(i.clientWidth-(c+d)),p=PC(i.clientHeight-(u+f)),m=PC(c),_={rootMargin:-h+"px "+-g+"px "+-p+"px "+-m+"px",threshold:sp(0,ny(1,l))||1};let w=!0;function y(b){const x=b[0].intersectionRatio;if(x!==l){if(!w)return s();x?s(!1,x):r=setTimeout(()=>{s(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(y,{..._,root:i.ownerDocument})}catch{n=new IntersectionObserver(y,_)}n.observe(t)}return s(!0),o}function Tlt(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=O4(t),u=i||o?[...c?Mw(c):[],...Mw(e)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),o&&v.addEventListener("resize",n)});const d=c&&a?Elt(c,n):null;let f=-1,h=null;s&&(h=new ResizeObserver(v=>{let[_]=v;_&&_.target===c&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(e)})),n()}),c&&!l&&h.observe(c),h.observe(e));let g,p=l?Np(t):null;l&&m();function m(){const v=Np(t);p&&(v.x!==p.x||v.y!==p.y||v.width!==p.width||v.height!==p.height)&&n(),p=v,g=requestAnimationFrame(m)}return n(),()=>{var v;u.forEach(_=>{i&&_.removeEventListener("scroll",n),o&&_.removeEventListener("resize",n)}),d==null||d(),(v=h)==null||v.disconnect(),h=null,l&&cancelAnimationFrame(g)}}const klt=ult,Alt=llt,YY=alt,Mlt=(t,e,n)=>{const r=new Map,i={platform:Clt,...n},o={...i.platform,_c:r};return olt(t,e,{...i,platform:o})};var jE=typeof document<"u"?R.useLayoutEffect:R.useEffect;function lA(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!lA(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&t.$$typeof)&&!lA(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function mce(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function QY(t,e){const n=mce(t);return Math.round(e*n)/n}function ZY(t){const e=R.useRef(t);return jE(()=>{e.current=t}),e}function Ilt(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=R.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,h]=R.useState(r);lA(f,r)||h(r);const[g,p]=R.useState(null),[m,v]=R.useState(null),_=R.useCallback(U=>{U!==x.current&&(x.current=U,p(U))},[]),w=R.useCallback(U=>{U!==S.current&&(S.current=U,v(U))},[]),y=o||g,b=s||m,x=R.useRef(null),S=R.useRef(null),C=R.useRef(u),T=l!=null,E=ZY(l),k=ZY(i),A=R.useCallback(()=>{if(!x.current||!S.current)return;const U={placement:e,strategy:n,middleware:f};k.current&&(U.platform=k.current),Mlt(x.current,S.current,U).then(L=>{const V={...L,isPositioned:!0};O.current&&!lA(C.current,V)&&(C.current=V,o_.flushSync(()=>{d(V)}))})},[f,e,n,k]);jE(()=>{c===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,d(U=>({...U,isPositioned:!1})))},[c]);const O=R.useRef(!1);jE(()=>(O.current=!0,()=>{O.current=!1}),[]),jE(()=>{if(y&&(x.current=y),b&&(S.current=b),y&&b){if(E.current)return E.current(y,b,A);A()}},[y,b,A,E,T]);const D=R.useMemo(()=>({reference:x,floating:S,setReference:_,setFloating:w}),[_,w]),P=R.useMemo(()=>({reference:y,floating:b}),[y,b]),N=R.useMemo(()=>{const U={position:n,left:0,top:0};if(!P.floating)return U;const L=QY(P.floating,u.x),V=QY(P.floating,u.y);return a?{...U,transform:"translate("+L+"px, "+V+"px)",...mce(P.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:L,top:V}},[n,a,P.floating,u.x,u.y]);return R.useMemo(()=>({...u,update:A,refs:D,elements:P,floatingStyles:N}),[u,A,D,P,N])}const Olt=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?YY({element:r.current,padding:i}).fn(n):{}:r?YY({element:r,padding:i}).fn(n):{}}}},Rlt=(t,e)=>({...klt(t),options:[t,e]}),Dlt=(t,e)=>({...Alt(t),options:[t,e]}),Plt=(t,e)=>({...Olt(t),options:[t,e]}),gce={...fp},Nlt=gce.useInsertionEffect,$lt=Nlt||(t=>t());function Llt(t){const e=R.useRef(()=>{});return $lt(()=>{e.current=t}),R.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}var cA=typeof document<"u"?R.useLayoutEffect:R.useEffect;function XF(){return XF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},XF.apply(this,arguments)}let JY=!1,Flt=0;const e7=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Flt++;function Blt(){const[t,e]=R.useState(()=>JY?e7():void 0);return cA(()=>{t==null&&e(e7())},[]),R.useEffect(()=>{JY=!0},[]),t}const Ult=gce.useId,vce=Ult||Blt,zlt=R.forwardRef(function(e,n){const{context:{placement:r,elements:{floating:i},middlewareData:{arrow:o}},width:s=14,height:a=7,tipRadius:l=0,strokeWidth:c=0,staticOffset:u,stroke:d,d:f,style:{transform:h,...g}={},...p}=e,m=vce(),[v,_]=R.useState(!1);if(cA(()=>{if(!i)return;Na(i).direction==="rtl"&&_(!0)},[i]),!i)return null;const w=c*2,y=w/2,b=s/2*(l/-8+1),x=a/2*l/4,[S,C]=r.split("-"),T=!!f,E=S==="top"||S==="bottom",k=u&&C==="end"?"bottom":"top";let A=u&&C==="end"?"right":"left";u&&v&&(A=C==="end"?"left":"right");const O=(o==null?void 0:o.x)!=null?u||o.x:"",D=(o==null?void 0:o.y)!=null?u||o.y:"",P=f||"M0,0"+(" H"+s)+(" L"+(s-b)+","+(a-x))+(" Q"+s/2+","+a+" "+b+","+(a-x))+" Z",N={top:T?"rotate(180deg)":"",left:T?"rotate(90deg)":"rotate(-90deg)",bottom:T?"":"rotate(180deg)",right:T?"rotate(-90deg)":"rotate(90deg)"}[S];return R.createElement("svg",XF({},p,{"aria-hidden":!0,ref:n,width:T?s:s+w,height:s,viewBox:"0 0 "+s+" "+(a>s?a:s),style:{position:"absolute",pointerEvents:"none",[A]:O,[k]:D,[S]:E||T?"100%":"calc(100% - "+w/2+"px)",transform:""+N+(h??""),...g}}),w>0&&R.createElement("path",{clipPath:"url(#"+m+")",fill:"none",stroke:d,strokeWidth:w+(f?0:1),d:P}),R.createElement("path",{stroke:w&&!f?p.fill:"none",d:P}),R.createElement("clipPath",{id:m},R.createElement("rect",{x:-y,y:y*(T?-1:1),width:s+w,height:s})))});function jlt(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(i=>i!==n))||[])}}}const Wlt=R.createContext(null),Vlt=R.createContext(null),Hlt=()=>{var t;return((t=R.useContext(Wlt))==null?void 0:t.id)||null},Glt=()=>R.useContext(Vlt);function qlt(t){const{open:e=!1,onOpenChange:n,elements:r}=t,i=vce(),o=R.useRef({}),[s]=R.useState(()=>jlt()),a=Hlt()!=null,[l,c]=R.useState(r.reference),u=Llt((h,g,p)=>{o.current.openEvent=h?g:void 0,s.emit("openchange",{open:h,event:g,reason:p,nested:a}),n==null||n(h,g,p)}),d=R.useMemo(()=>({setPositionReference:c}),[]),f=R.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return R.useMemo(()=>({dataRef:o,open:e,onOpenChange:u,elements:f,events:s,floatingId:i,refs:d}),[e,u,f,s,i,d])}function Xlt(t){t===void 0&&(t={});const{nodeId:e}=t,n=qlt({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,i=r.elements,[o,s]=R.useState(null),[a,l]=R.useState(null),u=(i==null?void 0:i.reference)||o,d=R.useRef(null),f=Glt();cA(()=>{u&&(d.current=u)},[u]);const h=Ilt({...t,elements:{...i,...a&&{reference:a}}}),g=R.useCallback(w=>{const y=Oo(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),contextElement:w}:w;l(y),h.refs.setReference(y)},[h.refs]),p=R.useCallback(w=>{(Oo(w)||w===null)&&(d.current=w,s(w)),(Oo(h.refs.reference.current)||h.refs.reference.current===null||w!==null&&!Oo(w))&&h.refs.setReference(w)},[h.refs]),m=R.useMemo(()=>({...h.refs,setReference:p,setPositionReference:g,domReference:d}),[h.refs,p,g]),v=R.useMemo(()=>({...h.elements,domReference:u}),[h.elements,u]),_=R.useMemo(()=>({...h,...r,refs:m,elements:v,nodeId:e}),[h,m,v,e,r]);return cA(()=>{r.dataRef.current.floatingContext=_;const w=f==null?void 0:f.nodesRef.current.find(y=>y.id===e);w&&(w.context=_)}),R.useMemo(()=>({...h,context:_,refs:m,elements:v}),[h,m,v,_])}/*!
  react-datepicker v7.3.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var KF=function(e,n){return KF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},KF(e,n)};function Ri(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");KF(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var sn=function(){return sn=Object.assign||function(n){for(var r,i=1,o=arguments.length;i<o;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},sn.apply(this,arguments)};function ac(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var Klt=function(t){var e=t.showTimeSelectOnly,n=e===void 0?!1:e,r=t.showTime,i=r===void 0?!1:r,o=t.className,s=t.children,a=n?"Choose Time":"Choose Date".concat(i?" and Time":"");return B.createElement("div",{className:o,role:"dialog","aria-label":a,"aria-modal":"true"},s)},at;(function(t){t.ArrowUp="ArrowUp",t.ArrowDown="ArrowDown",t.ArrowLeft="ArrowLeft",t.ArrowRight="ArrowRight",t.PageUp="PageUp",t.PageDown="PageDown",t.Home="Home",t.End="End",t.Enter="Enter",t.Space=" ",t.Tab="Tab",t.Escape="Escape",t.Backspace="Backspace",t.X="x"})(at||(at={}));function yce(){var t=typeof window<"u"?window:globalThis;return t}var H_=12,Ylt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;function Mn(t){if(t==null)return new Date;var e=typeof t=="string"?Mat(t):ft(t);return su(e)?e:new Date}function Qlt(t,e,n,r,i){var o,s=null,a=ap(n)||ap(ex()),l=!0;if(Array.isArray(e))return e.forEach(function(u){var d=_P(t,u,new Date,{locale:a,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});r&&(l=su(d,i)&&t===tr(d,u,n)),su(d,i)&&l&&(s=d)}),s;if(s=_P(t,e,new Date,{locale:a,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0}),r)l=su(s)&&t===tr(s,e,n);else if(!su(s)){var c=((o=e.match(Ylt))!==null&&o!==void 0?o:[]).map(function(u){var d=u[0];if(d==="p"||d==="P"){var f=nA[d];return a?f(u,a.formatLong):d}return u}).join("");t.length>0&&(s=_P(t,c.slice(0,t.length),new Date,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})),su(s)||(s=new Date(t))}return su(s)&&l?s:null}function su(t,e){return rA(t)&&!Pp(t,e??new Date("1/1/1800"))}function tr(t,e,n){if(n==="en")return zY(t,e,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var r=n?ap(n):void 0;return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),!r&&ex()&&ap(ex())&&(r=ap(ex())),zY(t,e,{locale:r,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function la(t,e){var n=e.dateFormat,r=e.locale,i=Array.isArray(n)&&n.length>0?n[0]:n;return t&&tr(t,i,r)||""}function Zlt(t,e,n){if(!t)return"";var r=la(t,n),i=e?la(e,n):"";return"".concat(r," - ").concat(i)}function Jlt(t,e){if(!(t!=null&&t.length))return"";var n=t[0]?la(t[0],e):"";if(t.length===1)return n;if(t.length===2&&t[1]){var r=la(t[1],e);return"".concat(n,", ").concat(r)}var i=t.length-1;return"".concat(n," (+").concat(i,")")}function EP(t,e){var n=e.hour,r=n===void 0?0:n,i=e.minute,o=i===void 0?0:i,s=e.second,a=s===void 0?0:s;return BE(UE(zE(t,a),o),r)}function ect(t){return S4(t)}function tct(t,e){return tr(t,"ddd",e)}function WE(t){return Dp(t)}function of(t,e,n){var r=ap(e||ex());return ju(t,{locale:r,weekStartsOn:n})}function sf(t){return oce(t)}function yb(t){return pO(t)}function t7(t){return HF(t)}function n7(){return Dp(Mn())}function r7(t){return Gle(t)}function nct(t){return Pot(t)}function Xl(t,e){return t&&e?Rst(t,e):!t&&!e}function So(t,e){return t&&e?Ist(t,e):!t&&!e}function uA(t,e){return t&&e?Ost(t,e):!t&&!e}function nn(t,e){return t&&e?Mst(t,e):!t&&!e}function Gh(t,e){return t&&e?Ast(t,e):!t&&!e}function bb(t,e,n){var r,i=Dp(e),o=Gle(n);try{r=Aw(t,{start:i,end:o})}catch{r=!1}return r}function ex(){var t=yce();return t.__localeId__}function ap(t){if(typeof t=="string"){var e=yce();return e.__localeData__?e.__localeData__[t]:void 0}else return t}function rct(t,e,n){return e(tr(t,"EEEE",n))}function ict(t,e){return tr(t,"EEEEEE",e)}function oct(t,e){return tr(t,"EEE",e)}function R4(t,e){return tr(_s(Mn(),t),"LLLL",e)}function bce(t,e){return tr(_s(Mn(),t),"LLL",e)}function sct(t,e){return tr(fg(Mn(),t),"QQQ",e)}function Bd(t,e){var n=e===void 0?{}:e,r=n.minDate,i=n.maxDate,o=n.excludeDates,s=n.excludeDateIntervals,a=n.includeDates,l=n.includeDateIntervals,c=n.filterDate;return G_(t,{minDate:r,maxDate:i})||o&&o.some(function(u){var d;return u instanceof Date?nn(t,u):nn(t,(d=u.date)!==null&&d!==void 0?d:new Date)})||s&&s.some(function(u){var d=u.start,f=u.end;return Aw(t,{start:d,end:f})})||a&&!a.some(function(u){return nn(t,u)})||l&&!l.some(function(u){var d=u.start,f=u.end;return Aw(t,{start:d,end:f})})||c&&!c(Mn(t))||!1}function D4(t,e){var n=e===void 0?{}:e,r=n.excludeDates,i=n.excludeDateIntervals;return i&&i.length>0?i.some(function(o){var s=o.start,a=o.end;return Aw(t,{start:s,end:a})}):r&&r.some(function(o){var s;return o instanceof Date?nn(t,o):nn(t,(s=o.date)!==null&&s!==void 0?s:new Date)})||!1}function xce(t,e){var n=e===void 0?{}:e,r=n.minDate,i=n.maxDate,o=n.excludeDates,s=n.includeDates,a=n.filterDate;return G_(t,{minDate:r?oce(r):void 0,maxDate:i?Rot(i):void 0})||(o==null?void 0:o.some(function(l){return So(t,l instanceof Date?l:l.date)}))||s&&!s.some(function(l){return So(t,l)})||a&&!a(Mn(t))||!1}function NC(t,e,n,r){var i=Xt(t),o=Io(t),s=Xt(e),a=Io(e),l=Xt(r);return i===s&&i===l?o<=n&&n<=a:i<s?l===i&&o<=n||l===s&&a>=n||l<s&&l>i:!1}function act(t,e){var n=e===void 0?{}:e,r=n.minDate,i=n.maxDate,o=n.excludeDates,s=n.includeDates;return G_(t,{minDate:r,maxDate:i})||o&&o.some(function(a){return So(a instanceof Date?a:a.date,t)})||s&&!s.some(function(a){return So(a,t)})||!1}function TP(t,e){var n=e===void 0?{}:e,r=n.minDate,i=n.maxDate,o=n.excludeDates,s=n.includeDates,a=n.filterDate;return G_(t,{minDate:r,maxDate:i})||(o==null?void 0:o.some(function(l){return uA(t,l instanceof Date?l:l.date)}))||s&&!s.some(function(l){return uA(t,l)})||a&&!a(Mn(t))||!1}function $C(t,e,n){if(!e||!n||!rA(e)||!rA(n))return!1;var r=Xt(e),i=Xt(n);return r<=t&&i>=t}function YF(t,e){var n=e===void 0?{}:e,r=n.minDate,i=n.maxDate,o=n.excludeDates,s=n.includeDates,a=n.filterDate,l=new Date(t,0,1);return G_(l,{minDate:r?pO(r):void 0,maxDate:i?qle(i):void 0})||(o==null?void 0:o.some(function(c){return Xl(l,c instanceof Date?c:c.date)}))||s&&!s.some(function(c){return Xl(l,c)})||a&&!a(Mn(l))||!1}function LC(t,e,n,r){var i=Xt(t),o=op(t),s=Xt(e),a=op(e),l=Xt(r);return i===s&&i===l?o<=n&&n<=a:i<s?l===i&&o<=n||l===s&&a>=n||l<s&&l>i:!1}function G_(t,e){var n,r=e===void 0?{}:e,i=r.minDate,o=r.maxDate;return(n=i&&kw(t,i)<0||o&&kw(t,o)>0)!==null&&n!==void 0?n:!1}function i7(t,e){return e.some(function(n){return _c(n)===_c(t)&&Sc(n)===Sc(t)&&ku(n)===ku(t)})}function o7(t,e){var n=e===void 0?{}:e,r=n.excludeTimes,i=n.includeTimes,o=n.filterTime;return r&&i7(t,r)||i&&!i7(t,i)||o&&!o(t)||!1}function s7(t,e){var n=e.minTime,r=e.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var i=Mn();i=BE(i,_c(t)),i=UE(i,Sc(t)),i=zE(i,ku(t));var o=Mn();o=BE(o,_c(n)),o=UE(o,Sc(n)),o=zE(o,ku(n));var s=Mn();s=BE(s,_c(r)),s=UE(s,Sc(r)),s=zE(s,ku(r));var a;try{a=!Aw(i,{start:o,end:s})}catch{a=!1}return a}function a7(t,e){var n=e===void 0?{}:e,r=n.minDate,i=n.includeDates,o=Jv(t,1);return r&&Jk(r,o)>0||i&&i.every(function(s){return Jk(s,o)>0})||!1}function l7(t,e){var n=e===void 0?{}:e,r=n.maxDate,i=n.includeDates,o=kl(t,1);return r&&Jk(o,r)>0||i&&i.every(function(s){return Jk(o,s)>0})||!1}function lct(t,e){var n=e===void 0?{}:e,r=n.minDate,i=n.includeDates,o=pO(t),s=sce(o,1);return r&&eA(r,s)>0||i&&i.every(function(a){return eA(a,s)>0})||!1}function cct(t,e){var n=e===void 0?{}:e,r=n.maxDate,i=n.includeDates,o=qle(t),s=_4(o,1);return r&&eA(s,r)>0||i&&i.every(function(a){return eA(s,a)>0})||!1}function c7(t,e){var n=e===void 0?{}:e,r=n.minDate,i=n.includeDates,o=ey(t,1);return r&&tA(r,o)>0||i&&i.every(function(s){return tA(s,o)>0})||!1}function uct(t,e){var n=e===void 0?{}:e,r=n.minDate,i=n.yearItemNumber,o=i===void 0?H_:i,s=yb(ey(t,o)),a=Ud(s,o).endPeriod,l=r&&Xt(r);return l&&l>a||!1}function u7(t,e){var n=e===void 0?{}:e,r=n.maxDate,i=n.includeDates,o=Eu(t,1);return r&&tA(o,r)>0||i&&i.every(function(s){return tA(o,s)>0})||!1}function dct(t,e){var n=e===void 0?{}:e,r=n.maxDate,i=n.yearItemNumber,o=i===void 0?H_:i,s=Eu(t,o),a=Ud(s,o).startPeriod,l=r&&Xt(r);return l&&l<a||!1}function wce(t){var e=t.minDate,n=t.includeDates;if(n&&e){var r=n.filter(function(i){return kw(i,e)>=0});return VY(r)}else return n?VY(n):e}function _ce(t){var e=t.maxDate,n=t.includeDates;if(n&&e){var r=n.filter(function(i){return kw(i,e)<=0});return WY(r)}else return n?WY(n):e}function d7(t,e){var n;t===void 0&&(t=[]),e===void 0&&(e="react-datepicker__day--highlighted");for(var r=new Map,i=0,o=t.length;i<o;i++){var s=t[i];if(Tu(s)){var a=tr(s,"MM.dd.yyyy"),l=r.get(a)||[];l.includes(e)||(l.push(e),r.set(a,l))}else if(typeof s=="object"){var c=Object.keys(s),u=(n=c[0])!==null&&n!==void 0?n:"",d=s[u];if(typeof u=="string"&&Array.isArray(d))for(var f=0,h=d.length;f<h;f++){var g=d[f];if(g){var a=tr(g,"MM.dd.yyyy"),l=r.get(a)||[];l.includes(u)||(l.push(u),r.set(a,l))}}}}return r}function fct(t,e){return t.length!==e.length?!1:t.every(function(n,r){return n===e[r]})}function hct(t,e){t===void 0&&(t=[]),e===void 0&&(e="react-datepicker__day--holidays");var n=new Map;return t.forEach(function(r){var i=r.date,o=r.holidayName;if(Tu(i)){var s=tr(i,"MM.dd.yyyy"),a=n.get(s)||{className:"",holidayNames:[]};if(!("className"in a&&a.className===e&&fct(a.holidayNames,[o]))){a.className=e;var l=a.holidayNames;a.holidayNames=l?ac(ac([],l,!0),[o],!1):[o],n.set(s,a)}}}),n}function pct(t,e,n,r,i){for(var o=i.length,s=[],a=0;a<o;a++){var l=t,c=i[a];c&&(l=Iot(l,_c(c)),l=jF(l,Sc(c)),l=Oot(l,ku(c)));var u=jF(t,(n+1)*r);yf(l,e)&&Pp(l,u)&&c!=null&&s.push(c)}return s}function f7(t){return t<10?"0".concat(t):"".concat(t)}function Ud(t,e){e===void 0&&(e=H_);var n=Math.ceil(Xt(t)/e)*e,r=n-(e-1);return{startPeriod:r,endPeriod:n}}function mct(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),24);return Math.round((+n-+e)/36e5)}function h7(t){var e=t.getSeconds(),n=t.getMilliseconds();return ft(t.getTime()-e*1e3-n)}function gct(t,e){return h7(t).getTime()===h7(e).getTime()}function p7(t){if(!Tu(t))throw new Error("Invalid date");var e=new Date(t);return e.setHours(0,0,0,0),e}function m7(t,e){if(!Tu(t)||!Tu(e))throw new Error("Invalid date received");var n=p7(t),r=p7(e);return Pp(n,r)}function Sce(t){return t.key===at.Space}var vct=function(t){Ri(e,t);function e(n){var r=t.call(this,n)||this;return r.onTimeChange=function(i){var o,s;r.setState({time:i});var a=r.props.date,l=a instanceof Date&&!isNaN(+a),c=l?a:new Date;if(i!=null&&i.includes(":")){var u=i.split(":"),d=u[0],f=u[1];c.setHours(Number(d)),c.setMinutes(Number(f))}(s=(o=r.props).onChange)===null||s===void 0||s.call(o,c)},r.renderTimeInput=function(){var i=r.state.time,o=r.props,s=o.date,a=o.timeString,l=o.customTimeInput;return l?R.cloneElement(l,{date:s,value:i,onChange:r.onTimeChange}):B.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",required:!0,value:i,onChange:function(c){r.onTimeChange(c.target.value||a)}})},r.state={time:r.props.timeString},r}return e.getDerivedStateFromProps=function(n,r){return n.timeString!==r.time?{time:n.timeString}:null},e.prototype.render=function(){return B.createElement("div",{className:"react-datepicker__input-time-container"},B.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),B.createElement("div",{className:"react-datepicker-time__input-container"},B.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},e}(R.Component),yct=function(t){Ri(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.dayEl=R.createRef(),n.handleClick=function(r){!n.isDisabled()&&n.props.onClick&&n.props.onClick(r)},n.handleMouseEnter=function(r){!n.isDisabled()&&n.props.onMouseEnter&&n.props.onMouseEnter(r)},n.handleOnKeyDown=function(r){var i,o,s=r.key;s===at.Space&&(r.preventDefault(),r.key=at.Enter),(o=(i=n.props).handleOnKeyDown)===null||o===void 0||o.call(i,r)},n.isSameDay=function(r){return nn(n.props.day,r)},n.isKeyboardSelected=function(){var r;if(n.props.disabledKeyboardNavigation)return!1;var i=n.props.selectsMultiple?(r=n.props.selectedDates)===null||r===void 0?void 0:r.some(function(s){return n.isSameDayOrWeek(s)}):n.isSameDayOrWeek(n.props.selected),o=n.props.preSelection&&n.isDisabled(n.props.preSelection);return!i&&n.isSameDayOrWeek(n.props.preSelection)&&!o},n.isDisabled=function(r){return r===void 0&&(r=n.props.day),Bd(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(){return D4(n.props.day,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.isStartOfWeek=function(){return nn(n.props.day,of(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameWeek=function(r){return n.props.showWeekPicker&&nn(r,of(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameDayOrWeek=function(r){return n.isSameDay(r)||n.isSameWeek(r)},n.getHighLightedClass=function(){var r=n.props,i=r.day,o=r.highlightDates;if(!o)return!1;var s=tr(i,"MM.dd.yyyy");return o.get(s)},n.getHolidaysClass=function(){var r,i=n.props,o=i.day,s=i.holidays;if(!s)return[void 0];var a=tr(o,"MM.dd.yyyy");return s.has(a)?[(r=s.get(a))===null||r===void 0?void 0:r.className]:[void 0]},n.isInRange=function(){var r=n.props,i=r.day,o=r.startDate,s=r.endDate;return!o||!s?!1:bb(i,o,s)},n.isInSelectingRange=function(){var r,i=n.props,o=i.day,s=i.selectsStart,a=i.selectsEnd,l=i.selectsRange,c=i.selectsDisabledDaysInRange,u=i.startDate,d=i.endDate,f=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return!(s||a||l)||!f||!c&&n.isDisabled()?!1:s&&d&&(Pp(f,d)||Gh(f,d))?bb(o,f,d):a&&u&&(yf(f,u)||Gh(f,u))||l&&u&&!d&&(yf(f,u)||Gh(f,u))?bb(o,u,f):!1},n.isSelectingRangeStart=function(){var r;if(!n.isInSelectingRange())return!1;var i=n.props,o=i.day,s=i.startDate,a=i.selectsStart,l=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return a?nn(o,l):nn(o,s)},n.isSelectingRangeEnd=function(){var r;if(!n.isInSelectingRange())return!1;var i=n.props,o=i.day,s=i.endDate,a=i.selectsEnd,l=i.selectsRange,c=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return a||l?nn(o,c):nn(o,s)},n.isRangeStart=function(){var r=n.props,i=r.day,o=r.startDate,s=r.endDate;return!o||!s?!1:nn(o,i)},n.isRangeEnd=function(){var r=n.props,i=r.day,o=r.startDate,s=r.endDate;return!o||!s?!1:nn(s,i)},n.isWeekend=function(){var r=kst(n.props.day);return r===0||r===6},n.isAfterMonth=function(){return n.props.month!==void 0&&(n.props.month+1)%12===Io(n.props.day)},n.isBeforeMonth=function(){return n.props.month!==void 0&&(Io(n.props.day)+1)%12===n.props.month},n.isCurrentDay=function(){return n.isSameDay(Mn())},n.isSelected=function(){var r;return n.props.selectsMultiple?(r=n.props.selectedDates)===null||r===void 0?void 0:r.some(function(i){return n.isSameDayOrWeek(i)}):n.isSameDayOrWeek(n.props.selected)},n.getClassNames=function(r){var i=n.props.dayClassName?n.props.dayClassName(r):void 0;return Ze("react-datepicker__day",i,"react-datepicker__day--"+tct(n.props.day),{"react-datepicker__day--disabled":n.isDisabled(),"react-datepicker__day--excluded":n.isExcluded(),"react-datepicker__day--selected":n.isSelected(),"react-datepicker__day--keyboard-selected":n.isKeyboardSelected(),"react-datepicker__day--range-start":n.isRangeStart(),"react-datepicker__day--range-end":n.isRangeEnd(),"react-datepicker__day--in-range":n.isInRange(),"react-datepicker__day--in-selecting-range":n.isInSelectingRange(),"react-datepicker__day--selecting-range-start":n.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":n.isSelectingRangeEnd(),"react-datepicker__day--today":n.isCurrentDay(),"react-datepicker__day--weekend":n.isWeekend(),"react-datepicker__day--outside-month":n.isAfterMonth()||n.isBeforeMonth()},n.getHighLightedClass(),n.getHolidaysClass())},n.getAriaLabel=function(){var r=n.props,i=r.day,o=r.ariaLabelPrefixWhenEnabled,s=o===void 0?"Choose":o,a=r.ariaLabelPrefixWhenDisabled,l=a===void 0?"Not available":a,c=n.isDisabled()||n.isExcluded()?l:s;return"".concat(c," ").concat(tr(i,"PPPP",n.props.locale))},n.getTitle=function(){var r=n.props,i=r.day,o=r.holidays,s=o===void 0?new Map:o,a=r.excludeDates,l=tr(i,"MM.dd.yyyy"),c=[];return s.has(l)&&c.push.apply(c,s.get(l).holidayNames),n.isExcluded()&&c.push(a==null?void 0:a.filter(function(u){return u instanceof Date?nn(u,i):nn(u==null?void 0:u.date,i)}).map(function(u){if(!(u instanceof Date))return u==null?void 0:u.message})),c.join(", ")},n.getTabIndex=function(){var r=n.props.selected,i=n.props.preSelection,o=!(n.props.showWeekPicker&&(n.props.showWeekNumber||!n.isStartOfWeek()))&&(n.isKeyboardSelected()||n.isSameDay(r)&&nn(i,r))?0:-1;return o},n.handleFocusDay=function(){var r;n.shouldFocusDay()&&((r=n.dayEl.current)===null||r===void 0||r.focus({preventScroll:!0}))},n.renderDayContents=function(){return n.props.monthShowsDuplicateDaysEnd&&n.isAfterMonth()||n.props.monthShowsDuplicateDaysStart&&n.isBeforeMonth()?null:n.props.renderDayContents?n.props.renderDayContents(jY(n.props.day),n.props.day):jY(n.props.day)},n.render=function(){return B.createElement("div",{ref:n.dayEl,className:n.getClassNames(n.props.day),onKeyDown:n.handleOnKeyDown,onClick:n.handleClick,onMouseEnter:n.props.usePointerEvent?void 0:n.handleMouseEnter,onPointerEnter:n.props.usePointerEvent?n.handleMouseEnter:void 0,tabIndex:n.getTabIndex(),"aria-label":n.getAriaLabel(),role:"option",title:n.getTitle(),"aria-disabled":n.isDisabled(),"aria-current":n.isCurrentDay()?"date":void 0,"aria-selected":n.isSelected()||n.isInRange()},n.renderDayContents(),n.getTitle()!==""&&B.createElement("span",{className:"overlay"},n.getTitle()))},n}return e.prototype.componentDidMount=function(){this.handleFocusDay()},e.prototype.componentDidUpdate=function(){this.handleFocusDay()},e.prototype.shouldFocusDay=function(){var n=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(n=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(n=!1),this.isDayActiveElement()&&(n=!0),this.isDuplicateDay()&&(n=!1)),n},e.prototype.isDayActiveElement=function(){var n,r,i;return((r=(n=this.props.containerRef)===null||n===void 0?void 0:n.current)===null||r===void 0?void 0:r.contains(document.activeElement))&&((i=document.activeElement)===null||i===void 0?void 0:i.classList.contains("react-datepicker__day"))},e.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},e}(R.Component),bct=function(t){Ri(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.weekNumberEl=R.createRef(),n.handleClick=function(r){n.props.onClick&&n.props.onClick(r)},n.handleOnKeyDown=function(r){var i,o,s=r.key;s===at.Space&&(r.preventDefault(),r.key=at.Enter),(o=(i=n.props).handleOnKeyDown)===null||o===void 0||o.call(i,r)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!nn(n.props.date,n.props.selected)&&nn(n.props.date,n.props.preSelection)},n.getTabIndex=function(){return n.props.showWeekPicker&&n.props.showWeekNumber&&(n.isKeyboardSelected()||nn(n.props.date,n.props.selected)&&nn(n.props.preSelection,n.props.selected))?0:-1},n.handleFocusWeekNumber=function(r){var i=!1;n.getTabIndex()===0&&!(r!=null&&r.isInputFocused)&&nn(n.props.date,n.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(i=!0),n.props.inline&&!n.props.shouldFocusDayInline&&(i=!1),n.props.containerRef&&n.props.containerRef.current&&n.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(i=!0)),i&&n.weekNumberEl.current&&n.weekNumberEl.current.focus({preventScroll:!0})},n}return Object.defineProperty(e,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},e.prototype.componentDidUpdate=function(n){this.handleFocusWeekNumber(n)},e.prototype.render=function(){var n=this.props,r=n.weekNumber,i=n.ariaLabelPrefix,o=i===void 0?e.defaultProps.ariaLabelPrefix:i,s=n.onClick,a={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!s,"react-datepicker__week-number--selected":!!s&&nn(this.props.date,this.props.selected),"react-datepicker__week-number--keyboard-selected":this.isKeyboardSelected()};return B.createElement("div",{ref:this.weekNumberEl,className:Ze(a),"aria-label":"".concat(o," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},r)},e}(R.Component),xct=function(t){Ri(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.isDisabled=function(r){return Bd(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.handleDayClick=function(r,i){n.props.onDayClick&&n.props.onDayClick(r,i)},n.handleDayMouseEnter=function(r){n.props.onDayMouseEnter&&n.props.onDayMouseEnter(r)},n.handleWeekClick=function(r,i,o){for(var s,a,l,c=new Date(r),u=0;u<7;u++){var d=new Date(r);d.setDate(d.getDate()+u);var f=!n.isDisabled(d);if(f){c=d;break}}typeof n.props.onWeekSelect=="function"&&n.props.onWeekSelect(c,i,o),n.props.showWeekPicker&&n.handleDayClick(c,o),((s=n.props.shouldCloseOnSelect)!==null&&s!==void 0?s:e.defaultProps.shouldCloseOnSelect)&&((l=(a=n.props).setOpen)===null||l===void 0||l.call(a,!1))},n.formatWeekNumber=function(r){return n.props.formatWeekNumber?n.props.formatWeekNumber(r):ect(r)},n.renderDays=function(){var r=n.startOfWeek(),i=[],o=n.formatWeekNumber(r);if(n.props.showWeekNumber){var s=n.props.onWeekSelect||n.props.showWeekPicker?n.handleWeekClick.bind(n,r,o):void 0;i.push(B.createElement(bct,sn({key:"W"},e.defaultProps,n.props,{weekNumber:o,date:r,onClick:s})))}return i.concat([0,1,2,3,4,5,6].map(function(a){var l=Bf(r,a);return B.createElement(yct,sn({},e.defaultProps,n.props,{ariaLabelPrefixWhenEnabled:n.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:n.props.disabledDayAriaLabelPrefix,key:l.valueOf(),day:l,onClick:n.handleDayClick.bind(n,l),onMouseEnter:n.handleDayMouseEnter.bind(n,l)}))}))},n.startOfWeek=function(){return of(n.props.day,n.props.locale,n.props.calendarStartDay)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!nn(n.startOfWeek(),n.props.selected)&&nn(n.startOfWeek(),n.props.preSelection)},n}return Object.defineProperty(e,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),e.prototype.render=function(){var n={"react-datepicker__week":!0,"react-datepicker__week--selected":nn(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return B.createElement("div",{className:Ze(n)},this.renderDays())},e}(R.Component),nb,wct=6,rv={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},kP=(nb={},nb[rv.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},nb[rv.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},nb[rv.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},nb),FC=1;function g7(t,e){return t?rv.FOUR_COLUMNS:e?rv.TWO_COLUMNS:rv.THREE_COLUMNS}var _ct=function(t){Ri(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.MONTH_REFS=ac([],Array(12),!0).map(function(){return R.createRef()}),n.QUARTER_REFS=ac([],Array(4),!0).map(function(){return R.createRef()}),n.isDisabled=function(r){return Bd(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(r){return D4(r,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.handleDayClick=function(r,i){var o,s;(s=(o=n.props).onDayClick)===null||s===void 0||s.call(o,r,i,n.props.orderInDisplay)},n.handleDayMouseEnter=function(r){var i,o;(o=(i=n.props).onDayMouseEnter)===null||o===void 0||o.call(i,r)},n.handleMouseLeave=function(){var r,i;(i=(r=n.props).onMouseLeave)===null||i===void 0||i.call(r)},n.isRangeStartMonth=function(r){var i=n.props,o=i.day,s=i.startDate,a=i.endDate;return!s||!a?!1:So(_s(o,r),s)},n.isRangeStartQuarter=function(r){var i=n.props,o=i.day,s=i.startDate,a=i.endDate;return!s||!a?!1:uA(fg(o,r),s)},n.isRangeEndMonth=function(r){var i=n.props,o=i.day,s=i.startDate,a=i.endDate;return!s||!a?!1:So(_s(o,r),a)},n.isRangeEndQuarter=function(r){var i=n.props,o=i.day,s=i.startDate,a=i.endDate;return!s||!a?!1:uA(fg(o,r),a)},n.isInSelectingRangeMonth=function(r){var i,o=n.props,s=o.day,a=o.selectsStart,l=o.selectsEnd,c=o.selectsRange,u=o.startDate,d=o.endDate,f=(i=n.props.selectingDate)!==null&&i!==void 0?i:n.props.preSelection;return!(a||l||c)||!f?!1:a&&d?NC(f,d,r,s):l&&u||c&&u&&!d?NC(u,f,r,s):!1},n.isSelectingMonthRangeStart=function(r){var i;if(!n.isInSelectingRangeMonth(r))return!1;var o=n.props,s=o.day,a=o.startDate,l=o.selectsStart,c=_s(s,r),u=(i=n.props.selectingDate)!==null&&i!==void 0?i:n.props.preSelection;return l?So(c,u):So(c,a)},n.isSelectingMonthRangeEnd=function(r){var i;if(!n.isInSelectingRangeMonth(r))return!1;var o=n.props,s=o.day,a=o.endDate,l=o.selectsEnd,c=o.selectsRange,u=_s(s,r),d=(i=n.props.selectingDate)!==null&&i!==void 0?i:n.props.preSelection;return l||c?So(u,d):So(u,a)},n.isInSelectingRangeQuarter=function(r){var i,o=n.props,s=o.day,a=o.selectsStart,l=o.selectsEnd,c=o.selectsRange,u=o.startDate,d=o.endDate,f=(i=n.props.selectingDate)!==null&&i!==void 0?i:n.props.preSelection;return!(a||l||c)||!f?!1:a&&d?LC(f,d,r,s):l&&u||c&&u&&!d?LC(u,f,r,s):!1},n.isWeekInMonth=function(r){var i=n.props.day,o=Bf(r,6);return So(r,i)||So(o,i)},n.isCurrentMonth=function(r,i){return Xt(r)===Xt(Mn())&&i===Io(Mn())},n.isCurrentQuarter=function(r,i){return Xt(r)===Xt(Mn())&&i===op(Mn())},n.isSelectedMonth=function(r,i,o){return Io(o)===i&&Xt(r)===Xt(o)},n.isSelectMonthInList=function(r,i,o){return o.some(function(s){return n.isSelectedMonth(r,i,s)})},n.isSelectedQuarter=function(r,i,o){return op(r)===i&&Xt(r)===Xt(o)},n.renderWeeks=function(){for(var r=[],i=n.props.fixedHeight,o=0,s=!1,a=of(sf(n.props.day),n.props.locale,n.props.calendarStartDay),l=function(g){return n.props.showWeekPicker?of(g,n.props.locale,n.props.calendarStartDay):n.props.preSelection},c=function(g){return n.props.showWeekPicker?of(g,n.props.locale,n.props.calendarStartDay):n.props.selected},u=n.props.selected?c(n.props.selected):void 0,d=n.props.preSelection?l(n.props.preSelection):void 0;r.push(B.createElement(xct,sn({},n.props,{ariaLabelPrefix:n.props.weekAriaLabelPrefix,key:o,day:a,month:Io(n.props.day),onDayClick:n.handleDayClick,onDayMouseEnter:n.handleDayMouseEnter,selected:u,preSelection:d,showWeekNumber:n.props.showWeekNumbers}))),!s;){o++,a=Qk(a,1);var f=i&&o>=wct,h=!i&&!n.isWeekInMonth(a);if(f||h)if(n.props.peekNextMonth)s=!0;else break}return r},n.onMonthClick=function(r,i){var o=n.isMonthDisabledForLabelDate(i),s=o.isDisabled,a=o.labelDate;s||n.handleDayClick(sf(a),r)},n.onMonthMouseEnter=function(r){var i=n.isMonthDisabledForLabelDate(r),o=i.isDisabled,s=i.labelDate;o||n.handleDayMouseEnter(sf(s))},n.handleMonthNavigation=function(r,i){var o,s,a,l;(s=(o=n.props).setPreSelection)===null||s===void 0||s.call(o,i),(l=(a=n.MONTH_REFS[r])===null||a===void 0?void 0:a.current)===null||l===void 0||l.focus()},n.handleKeyboardNavigation=function(r,i,o){var s,a=n.props,l=a.selected,c=a.preSelection,u=a.setPreSelection,d=a.minDate,f=a.maxDate,h=a.showFourColumnMonthYearPicker,g=a.showTwoColumnMonthYearPicker;if(c){var p=g7(h,g),m=n.getVerticalOffset(p),v=(s=kP[p])===null||s===void 0?void 0:s.grid,_=function(S,C,T){var E,k,A=C,O=T;switch(S){case at.ArrowRight:A=kl(C,FC),O=T===11?0:T+FC;break;case at.ArrowLeft:A=Jv(C,FC),O=T===0?11:T-FC;break;case at.ArrowUp:A=Jv(C,m),O=!((E=v==null?void 0:v[0])===null||E===void 0)&&E.includes(T)?T+12-m:T-m;break;case at.ArrowDown:A=kl(C,m),O=!((k=v==null?void 0:v[v.length-1])===null||k===void 0)&&k.includes(T)?T-12+m:T+m;break}return{newCalculatedDate:A,newCalculatedMonth:O}},w=function(S,C,T){for(var E=40,k=S,A=!1,O=0,D=_(k,C,T),P=D.newCalculatedDate,N=D.newCalculatedMonth;!A;){if(O>=E){P=C,N=T;break}if(d&&P<d){k=at.ArrowRight;var U=_(k,P,N);P=U.newCalculatedDate,N=U.newCalculatedMonth}if(f&&P>f){k=at.ArrowLeft;var U=_(k,P,N);P=U.newCalculatedDate,N=U.newCalculatedMonth}if(act(P,n.props)){var U=_(k,P,N);P=U.newCalculatedDate,N=U.newCalculatedMonth}else A=!0;O++}return{newCalculatedDate:P,newCalculatedMonth:N}};if(i===at.Enter){n.isMonthDisabled(o)||(n.onMonthClick(r,o),u==null||u(l));return}var y=w(i,c,o),b=y.newCalculatedDate,x=y.newCalculatedMonth;switch(i){case at.ArrowRight:case at.ArrowLeft:case at.ArrowUp:case at.ArrowDown:n.handleMonthNavigation(x,b);break}}},n.getVerticalOffset=function(r){var i,o;return(o=(i=kP[r])===null||i===void 0?void 0:i.verticalNavigationOffset)!==null&&o!==void 0?o:0},n.onMonthKeyDown=function(r,i){var o=n.props,s=o.disabledKeyboardNavigation,a=o.handleOnMonthKeyDown,l=r.key;l!==at.Tab&&r.preventDefault(),s||n.handleKeyboardNavigation(r,l,i),a&&a(r)},n.onQuarterClick=function(r,i){var o=fg(n.props.day,i);TP(o,n.props)||n.handleDayClick(t7(o),r)},n.onQuarterMouseEnter=function(r){var i=fg(n.props.day,r);TP(i,n.props)||n.handleDayMouseEnter(t7(i))},n.handleQuarterNavigation=function(r,i){var o,s,a,l;n.isDisabled(i)||n.isExcluded(i)||((s=(o=n.props).setPreSelection)===null||s===void 0||s.call(o,i),(l=(a=n.QUARTER_REFS[r-1])===null||a===void 0?void 0:a.current)===null||l===void 0||l.focus())},n.onQuarterKeyDown=function(r,i){var o,s,a=r.key;if(!n.props.disabledKeyboardNavigation)switch(a){case at.Enter:n.onQuarterClick(r,i),(s=(o=n.props).setPreSelection)===null||s===void 0||s.call(o,n.props.selected);break;case at.ArrowRight:if(!n.props.preSelection)break;n.handleQuarterNavigation(i===4?1:i+1,_4(n.props.preSelection,1));break;case at.ArrowLeft:if(!n.props.preSelection)break;n.handleQuarterNavigation(i===1?4:i-1,sce(n.props.preSelection,1));break}},n.isMonthDisabledForLabelDate=function(r){var i,o=n.props,s=o.day,a=o.minDate,l=o.maxDate,c=o.excludeDates,u=o.includeDates,d=_s(s,r);return{isDisabled:(i=(a||l||c||u)&&xce(d,n.props))!==null&&i!==void 0?i:!1,labelDate:d}},n.isMonthDisabled=function(r){var i=n.isMonthDisabledForLabelDate(r).isDisabled;return i},n.getMonthClassNames=function(r){var i=n.props,o=i.day,s=i.startDate,a=i.endDate,l=i.preSelection,c=i.monthClassName,u=c?c(_s(o,r)):void 0,d=n.getSelection();return Ze("react-datepicker__month-text","react-datepicker__month-".concat(r),u,{"react-datepicker__month-text--disabled":n.isMonthDisabled(r),"react-datepicker__month-text--selected":d?n.isSelectMonthInList(o,r,d):void 0,"react-datepicker__month-text--keyboard-selected":!n.props.disabledKeyboardNavigation&&l&&n.isSelectedMonth(o,r,l)&&!n.isMonthDisabled(r),"react-datepicker__month-text--in-selecting-range":n.isInSelectingRangeMonth(r),"react-datepicker__month-text--in-range":s&&a?NC(s,a,r,o):void 0,"react-datepicker__month-text--range-start":n.isRangeStartMonth(r),"react-datepicker__month-text--range-end":n.isRangeEndMonth(r),"react-datepicker__month-text--selecting-range-start":n.isSelectingMonthRangeStart(r),"react-datepicker__month-text--selecting-range-end":n.isSelectingMonthRangeEnd(r),"react-datepicker__month-text--today":n.isCurrentMonth(o,r)})},n.getTabIndex=function(r){if(n.props.preSelection==null)return"-1";var i=Io(n.props.preSelection),o=!n.props.disabledKeyboardNavigation&&r===i?"0":"-1";return o},n.getQuarterTabIndex=function(r){if(n.props.preSelection==null)return"-1";var i=op(n.props.preSelection),o=!n.props.disabledKeyboardNavigation&&r===i?"0":"-1";return o},n.getAriaLabel=function(r){var i=n.props,o=i.chooseDayAriaLabelPrefix,s=o===void 0?"Choose":o,a=i.disabledDayAriaLabelPrefix,l=a===void 0?"Not available":a,c=i.day,u=i.locale,d=_s(c,r),f=n.isDisabled(d)||n.isExcluded(d)?l:s;return"".concat(f," ").concat(tr(d,"MMMM yyyy",u))},n.getQuarterClassNames=function(r){var i=n.props,o=i.day,s=i.startDate,a=i.endDate,l=i.selected,c=i.minDate,u=i.maxDate,d=i.excludeDates,f=i.includeDates,h=i.filterDate,g=i.preSelection,p=i.disabledKeyboardNavigation,m=(c||u||d||f||h)&&TP(fg(o,r),n.props);return Ze("react-datepicker__quarter-text","react-datepicker__quarter-".concat(r),{"react-datepicker__quarter-text--disabled":m,"react-datepicker__quarter-text--selected":l?n.isSelectedQuarter(o,r,l):void 0,"react-datepicker__quarter-text--keyboard-selected":!p&&g&&n.isSelectedQuarter(o,r,g)&&!m,"react-datepicker__quarter-text--in-selecting-range":n.isInSelectingRangeQuarter(r),"react-datepicker__quarter-text--in-range":s&&a?LC(s,a,r,o):void 0,"react-datepicker__quarter-text--range-start":n.isRangeStartQuarter(r),"react-datepicker__quarter-text--range-end":n.isRangeEndQuarter(r)})},n.getMonthContent=function(r){var i=n.props,o=i.showFullMonthYearPicker,s=i.renderMonthContent,a=i.locale,l=i.day,c=bce(r,a),u=R4(r,a);return s?s(r,c,u,l):o?u:c},n.getQuarterContent=function(r){var i,o=n.props,s=o.renderQuarterContent,a=o.locale,l=sct(r,a);return(i=s==null?void 0:s(r,l))!==null&&i!==void 0?i:l},n.renderMonths=function(){var r,i=n.props,o=i.showTwoColumnMonthYearPicker,s=i.showFourColumnMonthYearPicker,a=i.day,l=i.selected,c=(r=kP[g7(s,o)])===null||r===void 0?void 0:r.grid;return c==null?void 0:c.map(function(u,d){return B.createElement("div",{className:"react-datepicker__month-wrapper",key:d},u.map(function(f,h){return B.createElement("div",{ref:n.MONTH_REFS[f],key:h,onClick:function(g){n.onMonthClick(g,f)},onKeyDown:function(g){Sce(g)&&(g.preventDefault(),g.key=at.Enter),n.onMonthKeyDown(g,f)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onMonthMouseEnter(f)},onPointerEnter:n.props.usePointerEvent?function(){return n.onMonthMouseEnter(f)}:void 0,tabIndex:Number(n.getTabIndex(f)),className:n.getMonthClassNames(f),"aria-disabled":n.isMonthDisabled(f),role:"option","aria-label":n.getAriaLabel(f),"aria-current":n.isCurrentMonth(a,f)?"date":void 0,"aria-selected":l?n.isSelectedMonth(a,f,l):void 0},n.getMonthContent(f))}))})},n.renderQuarters=function(){var r=n.props,i=r.day,o=r.selected,s=[1,2,3,4];return B.createElement("div",{className:"react-datepicker__quarter-wrapper"},s.map(function(a,l){return B.createElement("div",{key:l,ref:n.QUARTER_REFS[l],role:"option",onClick:function(c){n.onQuarterClick(c,a)},onKeyDown:function(c){n.onQuarterKeyDown(c,a)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onQuarterMouseEnter(a)},onPointerEnter:n.props.usePointerEvent?function(){return n.onQuarterMouseEnter(a)}:void 0,className:n.getQuarterClassNames(a),"aria-selected":o?n.isSelectedQuarter(i,a,o):void 0,tabIndex:Number(n.getQuarterTabIndex(a)),"aria-current":n.isCurrentQuarter(i,a)?"date":void 0},n.getQuarterContent(a))}))},n.getClassNames=function(){var r=n.props,i=r.selectingDate,o=r.selectsStart,s=r.selectsEnd,a=r.showMonthYearPicker,l=r.showQuarterYearPicker,c=r.showWeekPicker;return Ze("react-datepicker__month",{"react-datepicker__month--selecting-range":i&&(o||s)},{"react-datepicker__monthPicker":a},{"react-datepicker__quarterPicker":l},{"react-datepicker__weekPicker":c})},n}return e.prototype.getSelection=function(){var n=this.props,r=n.selected,i=n.selectedDates,o=n.selectsMultiple;if(o)return i;if(r)return[r]},e.prototype.render=function(){var n=this.props,r=n.showMonthYearPicker,i=n.showQuarterYearPicker,o=n.day,s=n.ariaLabelPrefix,a=s===void 0?"Month ":s,l=a?a.trim()+" ":"";return B.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(l).concat(tr(o,"MMMM, yyyy",this.props.locale)),role:"listbox"},r?this.renderMonths():i?this.renderQuarters():this.renderWeeks())},e}(R.Component),Sct=function(t){Ri(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.isSelectedMonth=function(r){return n.props.month===r},n.renderOptions=function(){return n.props.monthNames.map(function(r,i){return B.createElement("div",{className:n.isSelectedMonth(i)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:r,onClick:n.onChange.bind(n,i),"aria-selected":n.isSelectedMonth(i)?"true":void 0},n.isSelectedMonth(i)?B.createElement("span",{className:"react-datepicker__month-option--selected"},"✓"):"",r)})},n.onChange=function(r){return n.props.onChange(r)},n.handleClickOutside=function(){return n.props.onCancel()},n}return e.prototype.render=function(){return B.createElement("div",{className:"react-datepicker__month-dropdown"},this.renderOptions())},e}(R.Component),Cct=dO(Sct),Ect=function(t){Ri(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(r){return r.map(function(i,o){return B.createElement("option",{key:i,value:o},i)})},n.renderSelectMode=function(r){return B.createElement("select",{value:n.props.month,className:"react-datepicker__month-select",onChange:function(i){return n.onChange(parseInt(i.target.value))}},n.renderSelectOptions(r))},n.renderReadView=function(r,i){return B.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:n.toggleDropdown},B.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),B.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},i[n.props.month]))},n.renderDropdown=function(r){return B.createElement(Cct,sn({key:"dropdown"},n.props,{monthNames:r,onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(r){var i=n.state.dropdownVisible,o=[n.renderReadView(!i,r)];return i&&o.unshift(n.renderDropdown(r)),o},n.onChange=function(r){n.toggleDropdown(),r!==n.props.month&&n.props.onChange(r)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return e.prototype.render=function(){var n=this,r=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(o){return bce(o,n.props.locale)}:function(o){return R4(o,n.props.locale)}),i;switch(this.props.dropdownMode){case"scroll":i=this.renderScrollMode(r);break;case"select":i=this.renderSelectMode(r);break}return B.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},i)},e}(R.Component);function Tct(t,e){for(var n=[],r=sf(t),i=sf(e);!yf(r,i);)n.push(Mn(r)),r=kl(r,1);return n}var kct=function(t){Ri(e,t);function e(n){var r=t.call(this,n)||this;return r.renderOptions=function(){return r.state.monthYearsList.map(function(i){var o=VF(i),s=Xl(r.props.date,i)&&So(r.props.date,i);return B.createElement("div",{className:s?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:o,onClick:r.onChange.bind(r,o),"aria-selected":s?"true":void 0},s?B.createElement("span",{className:"react-datepicker__month-year-option--selected"},"✓"):"",tr(i,r.props.dateFormat,r.props.locale))})},r.onChange=function(i){return r.props.onChange(i)},r.handleClickOutside=function(){r.props.onCancel()},r.state={monthYearsList:Tct(r.props.minDate,r.props.maxDate)},r}return e.prototype.render=function(){var n=Ze({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return B.createElement("div",{className:n},this.renderOptions())},e}(R.Component),Act=dO(kct),Mct=function(t){Ri(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var r=sf(n.props.minDate),i=sf(n.props.maxDate),o=[];!yf(r,i);){var s=VF(r);o.push(B.createElement("option",{key:s,value:s},tr(r,n.props.dateFormat,n.props.locale))),r=kl(r,1)}return o},n.onSelectChange=function(r){n.onChange(parseInt(r.target.value))},n.renderSelectMode=function(){return B.createElement("select",{value:VF(sf(n.props.date)),className:"react-datepicker__month-year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(r){var i=tr(n.props.date,n.props.dateFormat,n.props.locale);return B.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:n.toggleDropdown},B.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),B.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},i))},n.renderDropdown=function(){return B.createElement(Act,sn({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var r=n.state.dropdownVisible,i=[n.renderReadView(!r)];return r&&i.unshift(n.renderDropdown()),i},n.onChange=function(r){n.toggleDropdown();var i=Mn(r);Xl(n.props.date,i)&&So(n.props.date,i)||n.props.onChange(i)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return e.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return B.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},n)},e}(R.Component),Ict=function(t){Ri(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={height:null},n.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var r,i,o;n.list&&(n.list.scrollTop=(o=n.centerLi&&e.calcCenterPosition(n.props.monthRef?n.props.monthRef.clientHeight-((i=(r=n.header)===null||r===void 0?void 0:r.clientHeight)!==null&&i!==void 0?i:0):n.list.clientHeight,n.centerLi))!==null&&o!==void 0?o:0)})},n.handleClick=function(r){var i,o;(n.props.minTime||n.props.maxTime)&&s7(r,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&o7(r,n.props)||(o=(i=n.props).onChange)===null||o===void 0||o.call(i,r)},n.isSelectedTime=function(r){return n.props.selected&&gct(n.props.selected,r)},n.isDisabledTime=function(r){return(n.props.minTime||n.props.maxTime)&&s7(r,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&o7(r,n.props)},n.liClasses=function(r){var i,o=["react-datepicker__time-list-item",n.props.timeClassName?n.props.timeClassName(r):void 0];return n.isSelectedTime(r)&&o.push("react-datepicker__time-list-item--selected"),n.isDisabledTime(r)&&o.push("react-datepicker__time-list-item--disabled"),n.props.injectTimes&&(_c(r)*3600+Sc(r)*60+ku(r))%(((i=n.props.intervals)!==null&&i!==void 0?i:e.defaultProps.intervals)*60)!==0&&o.push("react-datepicker__time-list-item--injected"),o.join(" ")},n.handleOnKeyDown=function(r,i){var o,s;r.key===at.Space&&(r.preventDefault(),r.key=at.Enter),(r.key===at.ArrowUp||r.key===at.ArrowLeft)&&r.target instanceof HTMLElement&&r.target.previousSibling&&(r.preventDefault(),r.target.previousSibling instanceof HTMLElement&&r.target.previousSibling.focus()),(r.key===at.ArrowDown||r.key===at.ArrowRight)&&r.target instanceof HTMLElement&&r.target.nextSibling&&(r.preventDefault(),r.target.nextSibling instanceof HTMLElement&&r.target.nextSibling.focus()),r.key===at.Enter&&n.handleClick(i),(s=(o=n.props).handleOnKeyDown)===null||s===void 0||s.call(o,r)},n.renderTimes=function(){for(var r,i=[],o=n.props.format?n.props.format:"p",s=(r=n.props.intervals)!==null&&r!==void 0?r:e.defaultProps.intervals,a=n.props.selected||n.props.openToDate||Mn(),l=WE(a),c=n.props.injectTimes&&n.props.injectTimes.sort(function(m,v){return m.getTime()-v.getTime()}),u=60*mct(a),d=u/s,f=0;f<d;f++){var h=jF(l,f*s);if(i.push(h),c){var g=pct(l,h,f,s,c);i=i.concat(g)}}var p=i.reduce(function(m,v){return v.getTime()<=a.getTime()?v:m},i[0]);return i.map(function(m){return B.createElement("li",{key:m.valueOf(),onClick:n.handleClick.bind(n,m),className:n.liClasses(m),ref:function(v){m===p&&(n.centerLi=v)},onKeyDown:function(v){n.handleOnKeyDown(v,m)},tabIndex:m===p?0:-1,role:"option","aria-selected":n.isSelectedTime(m)?"true":void 0,"aria-disabled":n.isDisabledTime(m)?"true":void 0},tr(m,o,n.props.locale))})},n}return Object.defineProperty(e,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time"}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},e.prototype.render=function(){var n=this,r,i=this.state.height;return B.createElement("div",{className:"react-datepicker__time-container ".concat(((r=this.props.todayButton)!==null&&r!==void 0?r:e.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},B.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(this.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(o){n.header=o}},B.createElement("div",{className:"react-datepicker-time__header"},this.props.timeCaption)),B.createElement("div",{className:"react-datepicker__time"},B.createElement("div",{className:"react-datepicker__time-box"},B.createElement("ul",{className:"react-datepicker__time-list",ref:function(o){n.list=o},style:i?{height:i}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},e.calcCenterPosition=function(n,r){return r.offsetTop-(n/2-r.clientHeight/2)},e}(R.Component),v7=3,Oct=function(t){Ri(e,t);function e(n){var r=t.call(this,n)||this;return r.YEAR_REFS=ac([],Array(r.props.yearItemNumber),!0).map(function(){return R.createRef()}),r.isDisabled=function(i){return Bd(i,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(i){return D4(i,{excludeDates:r.props.excludeDates})},r.selectingDate=function(){var i;return(i=r.props.selectingDate)!==null&&i!==void 0?i:r.props.preSelection},r.updateFocusOnPaginate=function(i){var o=function(){var s,a;(a=(s=r.YEAR_REFS[i])===null||s===void 0?void 0:s.current)===null||a===void 0||a.focus()};window.requestAnimationFrame(o)},r.handleYearClick=function(i,o){r.props.onDayClick&&r.props.onDayClick(i,o)},r.handleYearNavigation=function(i,o){var s,a,l,c,u=r.props,d=u.date,f=u.yearItemNumber;if(!(d===void 0||f===void 0)){var h=Ud(d,f).startPeriod;r.isDisabled(o)||r.isExcluded(o)||((a=(s=r.props).setPreSelection)===null||a===void 0||a.call(s,o),i-h<0?r.updateFocusOnPaginate(f-(h-i)):i-h>=f?r.updateFocusOnPaginate(Math.abs(f-(i-h))):(c=(l=r.YEAR_REFS[i-h])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus())}},r.isSameDay=function(i,o){return nn(i,o)},r.isCurrentYear=function(i){return i===Xt(Mn())},r.isRangeStart=function(i){return r.props.startDate&&r.props.endDate&&Xl(zl(Mn(),i),r.props.startDate)},r.isRangeEnd=function(i){return r.props.startDate&&r.props.endDate&&Xl(zl(Mn(),i),r.props.endDate)},r.isInRange=function(i){return $C(i,r.props.startDate,r.props.endDate)},r.isInSelectingRange=function(i){var o=r.props,s=o.selectsStart,a=o.selectsEnd,l=o.selectsRange,c=o.startDate,u=o.endDate;return!(s||a||l)||!r.selectingDate()?!1:s&&u?$C(i,r.selectingDate(),u):a&&c||l&&c&&!u?$C(i,c,r.selectingDate()):!1},r.isSelectingRangeStart=function(i){var o;if(!r.isInSelectingRange(i))return!1;var s=r.props,a=s.startDate,l=s.selectsStart,c=zl(Mn(),i);return l?Xl(c,(o=r.selectingDate())!==null&&o!==void 0?o:null):Xl(c,a??null)},r.isSelectingRangeEnd=function(i){var o;if(!r.isInSelectingRange(i))return!1;var s=r.props,a=s.endDate,l=s.selectsEnd,c=s.selectsRange,u=zl(Mn(),i);return l||c?Xl(u,(o=r.selectingDate())!==null&&o!==void 0?o:null):Xl(u,a??null)},r.isKeyboardSelected=function(i){if(!(r.props.date===void 0||r.props.selected==null||r.props.preSelection==null)){var o=r.props,s=o.minDate,a=o.maxDate,l=o.excludeDates,c=o.includeDates,u=o.filterDate,d=yb(zl(r.props.date,i)),f=(s||a||l||c||u)&&YF(i,r.props);return!r.props.disabledKeyboardNavigation&&!r.props.inline&&!nn(d,yb(r.props.selected))&&nn(d,yb(r.props.preSelection))&&!f}},r.onYearClick=function(i,o){var s=r.props.date;s!==void 0&&r.handleYearClick(yb(zl(s,o)),i)},r.onYearKeyDown=function(i,o){var s,a,l=i.key,c=r.props,u=c.date,d=c.yearItemNumber,f=c.handleOnKeyDown;if(l!==at.Tab&&i.preventDefault(),!r.props.disabledKeyboardNavigation)switch(l){case at.Enter:if(r.props.selected==null)break;r.onYearClick(i,o),(a=(s=r.props).setPreSelection)===null||a===void 0||a.call(s,r.props.selected);break;case at.ArrowRight:if(r.props.preSelection==null)break;r.handleYearNavigation(o+1,Eu(r.props.preSelection,1));break;case at.ArrowLeft:if(r.props.preSelection==null)break;r.handleYearNavigation(o-1,ey(r.props.preSelection,1));break;case at.ArrowUp:{if(u===void 0||d===void 0||r.props.preSelection==null)break;var h=Ud(u,d).startPeriod,g=v7,p=o-g;if(p<h){var m=d%g;o>=h&&o<h+m?g=m:g+=m,p=o-g}r.handleYearNavigation(p,ey(r.props.preSelection,g));break}case at.ArrowDown:{if(u===void 0||d===void 0||r.props.preSelection==null)break;var v=Ud(u,d).endPeriod,g=v7,p=o+g;if(p>v){var m=d%g;o<=v&&o>v-m?g=m:g+=m,p=o+g}r.handleYearNavigation(p,Eu(r.props.preSelection,g));break}}f&&f(i)},r.getYearClassNames=function(i){var o=r.props,s=o.date,a=o.minDate,l=o.maxDate,c=o.selected,u=o.excludeDates,d=o.includeDates,f=o.filterDate,h=o.yearClassName;return Ze("react-datepicker__year-text","react-datepicker__year-".concat(i),s?h==null?void 0:h(zl(s,i)):void 0,{"react-datepicker__year-text--selected":c?i===Xt(c):void 0,"react-datepicker__year-text--disabled":(a||l||u||d||f)&&YF(i,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(i),"react-datepicker__year-text--range-start":r.isRangeStart(i),"react-datepicker__year-text--range-end":r.isRangeEnd(i),"react-datepicker__year-text--in-range":r.isInRange(i),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(i),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(i),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(i),"react-datepicker__year-text--today":r.isCurrentYear(i)})},r.getYearTabIndex=function(i){if(r.props.disabledKeyboardNavigation||r.props.preSelection==null)return"-1";var o=Xt(r.props.preSelection);return i===o?"0":"-1"},r.getYearContainerClassNames=function(){var i=r.props,o=i.selectingDate,s=i.selectsStart,a=i.selectsEnd,l=i.selectsRange;return Ze("react-datepicker__year",{"react-datepicker__year--selecting-range":o&&(s||a||l)})},r.getYearContent=function(i){return r.props.renderYearContent?r.props.renderYearContent(i):i},r}return e.prototype.render=function(){var n=this,r=[],i=this.props,o=i.date,s=i.yearItemNumber,a=i.onYearMouseEnter,l=i.onYearMouseLeave;if(o===void 0)return null;for(var c=Ud(o,s),u=c.startPeriod,d=c.endPeriod,f=function(p){r.push(B.createElement("div",{ref:h.YEAR_REFS[p-u],onClick:function(m){n.onYearClick(m,p)},onKeyDown:function(m){Sce(m)&&(m.preventDefault(),m.key=at.Enter),n.onYearKeyDown(m,p)},tabIndex:Number(h.getYearTabIndex(p)),className:h.getYearClassNames(p),onMouseEnter:h.props.usePointerEvent?void 0:function(m){return a(m,p)},onPointerEnter:h.props.usePointerEvent?function(m){return a(m,p)}:void 0,onMouseLeave:h.props.usePointerEvent?void 0:function(m){return l(m,p)},onPointerLeave:h.props.usePointerEvent?function(m){return l(m,p)}:void 0,key:p,"aria-current":h.isCurrentYear(p)?"date":void 0},h.getYearContent(p)))},h=this,g=u;g<=d;g++)f(g);return B.createElement("div",{className:this.getYearContainerClassNames()},B.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},r))},e}(R.Component);function Rct(t,e,n,r){for(var i=[],o=0;o<2*e+1;o++){var s=t+e-o,a=!0;n&&(a=Xt(n)<=s),r&&a&&(a=Xt(r)>=s),a&&i.push(s)}return i}var Dct=function(t){Ri(e,t);function e(n){var r=t.call(this,n)||this;r.renderOptions=function(){var a=r.props.year,l=r.state.yearsList.map(function(d){return B.createElement("div",{className:a===d?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:d,onClick:r.onChange.bind(r,d),"aria-selected":a===d?"true":void 0},a===d?B.createElement("span",{className:"react-datepicker__year-option--selected"},"✓"):"",d)}),c=r.props.minDate?Xt(r.props.minDate):null,u=r.props.maxDate?Xt(r.props.maxDate):null;return(!u||!r.state.yearsList.find(function(d){return d===u}))&&l.unshift(B.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:r.incrementYears},B.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!c||!r.state.yearsList.find(function(d){return d===c}))&&l.push(B.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:r.decrementYears},B.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),l},r.onChange=function(a){r.props.onChange(a)},r.handleClickOutside=function(){r.props.onCancel()},r.shiftYears=function(a){var l=r.state.yearsList.map(function(c){return c+a});r.setState({yearsList:l})},r.incrementYears=function(){return r.shiftYears(1)},r.decrementYears=function(){return r.shiftYears(-1)};var i=n.yearDropdownItemNumber,o=n.scrollableYearDropdown,s=i||(o?10:5);return r.state={yearsList:Rct(r.props.year,s,r.props.minDate,r.props.maxDate)},r.dropdownRef=R.createRef(),r}return e.prototype.componentDidMount=function(){var n=this.dropdownRef.current;if(n){var r=n.children?Array.from(n.children):null,i=r?r.find(function(o){return o.ariaSelected}):null;n.scrollTop=i&&i instanceof HTMLElement?i.offsetTop+(i.clientHeight-n.clientHeight)/2:(n.scrollHeight-n.clientHeight)/2}},e.prototype.render=function(){var n=Ze({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return B.createElement("div",{className:n,ref:this.dropdownRef},this.renderOptions())},e}(R.Component),Pct=dO(Dct),Nct=function(t){Ri(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var r=n.props.minDate?Xt(n.props.minDate):1900,i=n.props.maxDate?Xt(n.props.maxDate):2100,o=[],s=r;s<=i;s++)o.push(B.createElement("option",{key:s,value:s},s));return o},n.onSelectChange=function(r){n.onChange(parseInt(r.target.value))},n.renderSelectMode=function(){return B.createElement("select",{value:n.props.year,className:"react-datepicker__year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(r){return B.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(i){return n.toggleDropdown(i)}},B.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),B.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},n.props.year))},n.renderDropdown=function(){return B.createElement(Pct,sn({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var r=n.state.dropdownVisible,i=[n.renderReadView(!r)];return r&&i.unshift(n.renderDropdown()),i},n.onChange=function(r){n.toggleDropdown(),r!==n.props.year&&n.props.onChange(r)},n.toggleDropdown=function(r){n.setState({dropdownVisible:!n.state.dropdownVisible},function(){n.props.adjustDateOnChange&&n.handleYearChange(n.props.date,r)})},n.handleYearChange=function(r,i){n.onSelect(r,i),n.setOpen()},n.onSelect=function(r,i){n.props.onSelect&&n.props.onSelect(r,i)},n.setOpen=function(){n.props.setOpen&&n.props.setOpen(!0)},n}return e.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return B.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},n)},e}(R.Component),$ct=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],Lct=function(t){var e=(t.className||"").split(/\s+/);return $ct.some(function(n){return e.indexOf(n)>=0})},Fct=function(t){Ri(e,t);function e(n){var r=t.call(this,n)||this;return r.monthContainer=void 0,r.handleClickOutside=function(i){r.props.onClickOutside(i)},r.setClickOutsideRef=function(){return r.containerRef.current},r.handleDropdownFocus=function(i){var o,s;Lct(i.target)&&((s=(o=r.props).onDropdownFocus)===null||s===void 0||s.call(o,i))},r.getDateInView=function(){var i=r.props,o=i.preSelection,s=i.selected,a=i.openToDate,l=wce(r.props),c=_ce(r.props),u=Mn(),d=a||s||o;return d||(l&&Pp(u,l)?l:c&&yf(u,c)?c:u)},r.increaseMonth=function(){r.setState(function(i){var o=i.date;return{date:kl(o,1)}},function(){return r.handleMonthChange(r.state.date)})},r.decreaseMonth=function(){r.setState(function(i){var o=i.date;return{date:Jv(o,1)}},function(){return r.handleMonthChange(r.state.date)})},r.handleDayClick=function(i,o,s){r.props.onSelect(i,o,s),r.props.setPreSelection&&r.props.setPreSelection(i)},r.handleDayMouseEnter=function(i){r.setState({selectingDate:i}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(i)},r.handleMonthMouseLeave=function(){r.setState({selectingDate:void 0}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()},r.handleYearMouseEnter=function(i,o){r.setState({selectingDate:zl(Mn(),o)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(i,o)},r.handleYearMouseLeave=function(i,o){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(i,o)},r.handleYearChange=function(i){r.props.onYearChange&&(r.props.onYearChange(i),r.setState({isRenderAriaLiveMessage:!0})),r.props.adjustDateOnChange&&(r.props.onSelect&&r.props.onSelect(i),r.props.setOpen&&r.props.setOpen(!0)),r.props.setPreSelection&&r.props.setPreSelection(i)},r.handleMonthChange=function(i){r.handleCustomMonthChange(i),r.props.adjustDateOnChange&&(r.props.onSelect&&r.props.onSelect(i),r.props.setOpen&&r.props.setOpen(!0)),r.props.setPreSelection&&r.props.setPreSelection(i)},r.handleCustomMonthChange=function(i){r.props.onMonthChange&&(r.props.onMonthChange(i),r.setState({isRenderAriaLiveMessage:!0}))},r.handleMonthYearChange=function(i){r.handleYearChange(i),r.handleMonthChange(i)},r.changeYear=function(i){r.setState(function(o){var s=o.date;return{date:zl(s,Number(i))}},function(){return r.handleYearChange(r.state.date)})},r.changeMonth=function(i){r.setState(function(o){var s=o.date;return{date:_s(s,Number(i))}},function(){return r.handleMonthChange(r.state.date)})},r.changeMonthYear=function(i){r.setState(function(o){var s=o.date;return{date:zl(_s(s,Io(i)),Xt(i))}},function(){return r.handleMonthYearChange(r.state.date)})},r.header=function(i){i===void 0&&(i=r.state.date);var o=of(i,r.props.locale,r.props.calendarStartDay),s=[];return r.props.showWeekNumbers&&s.push(B.createElement("div",{key:"W",className:"react-datepicker__day-name"},r.props.weekLabel||"#")),s.concat([0,1,2,3,4,5,6].map(function(a){var l=Bf(o,a),c=r.formatWeekday(l,r.props.locale),u=r.props.weekDayClassName?r.props.weekDayClassName(l):void 0;return B.createElement("div",{key:a,"aria-label":tr(l,"EEEE",r.props.locale),className:Ze("react-datepicker__day-name",u)},c)}))},r.formatWeekday=function(i,o){return r.props.formatWeekDay?rct(i,r.props.formatWeekDay,o):r.props.useWeekdaysShort?oct(i,o):ict(i,o)},r.decreaseYear=function(){r.setState(function(i){var o,s=i.date;return{date:ey(s,r.props.showYearPicker?(o=r.props.yearItemNumber)!==null&&o!==void 0?o:e.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.clearSelectingDate=function(){r.setState({selectingDate:void 0})},r.renderPreviousButton=function(){var i;if(!r.props.renderCustomHeader){var o;switch(!0){case r.props.showMonthYearPicker:o=c7(r.state.date,r.props);break;case r.props.showYearPicker:o=uct(r.state.date,r.props);break;case r.props.showQuarterYearPicker:o=lct(r.state.date,r.props);break;default:o=a7(r.state.date,r.props);break}if(!(!((i=r.props.forceShowMonthNavigation)!==null&&i!==void 0?i:e.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&o||r.props.showTimeSelectOnly)){var s=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],a=["react-datepicker__navigation","react-datepicker__navigation--previous"],l=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(l=r.decreaseYear),o&&r.props.showDisabledMonthNavigation&&(a.push("react-datepicker__navigation--previous--disabled"),l=void 0);var c=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,u=r.props,d=u.previousMonthButtonLabel,f=d===void 0?e.defaultProps.previousMonthButtonLabel:d,h=u.previousYearButtonLabel,g=h===void 0?e.defaultProps.previousYearButtonLabel:h,p=r.props,m=p.previousMonthAriaLabel,v=m===void 0?typeof f=="string"?f:"Previous Month":m,_=p.previousYearAriaLabel,w=_===void 0?typeof g=="string"?g:"Previous Year":_;return B.createElement("button",{type:"button",className:a.join(" "),onClick:l,onKeyDown:r.props.handleOnKeyDown,"aria-label":c?w:v},B.createElement("span",{className:s.join(" ")},c?g:f))}}},r.increaseYear=function(){r.setState(function(i){var o,s=i.date;return{date:Eu(s,r.props.showYearPicker?(o=r.props.yearItemNumber)!==null&&o!==void 0?o:e.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.renderNextButton=function(){var i;if(!r.props.renderCustomHeader){var o;switch(!0){case r.props.showMonthYearPicker:o=u7(r.state.date,r.props);break;case r.props.showYearPicker:o=dct(r.state.date,r.props);break;case r.props.showQuarterYearPicker:o=cct(r.state.date,r.props);break;default:o=l7(r.state.date,r.props);break}if(!(!((i=r.props.forceShowMonthNavigation)!==null&&i!==void 0?i:e.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&o||r.props.showTimeSelectOnly)){var s=["react-datepicker__navigation","react-datepicker__navigation--next"],a=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];r.props.showTimeSelect&&s.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&s.push("react-datepicker__navigation--next--with-today-button");var l=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(l=r.increaseYear),o&&r.props.showDisabledMonthNavigation&&(s.push("react-datepicker__navigation--next--disabled"),l=void 0);var c=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,u=r.props,d=u.nextMonthButtonLabel,f=d===void 0?e.defaultProps.nextMonthButtonLabel:d,h=u.nextYearButtonLabel,g=h===void 0?e.defaultProps.nextYearButtonLabel:h,p=r.props,m=p.nextMonthAriaLabel,v=m===void 0?typeof f=="string"?f:"Next Month":m,_=p.nextYearAriaLabel,w=_===void 0?typeof g=="string"?g:"Next Year":_;return B.createElement("button",{type:"button",className:s.join(" "),onClick:l,onKeyDown:r.props.handleOnKeyDown,"aria-label":c?w:v},B.createElement("span",{className:a.join(" ")},c?g:f))}}},r.renderCurrentMonth=function(i){i===void 0&&(i=r.state.date);var o=["react-datepicker__current-month"];return r.props.showYearDropdown&&o.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&o.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&o.push("react-datepicker__current-month--hasMonthYearDropdown"),B.createElement("h2",{className:o.join(" ")},tr(i,r.props.dateFormat,r.props.locale))},r.renderYearDropdown=function(i){if(i===void 0&&(i=!1),!(!r.props.showYearDropdown||i))return B.createElement(Nct,sn({},e.defaultProps,r.props,{date:r.state.date,onChange:r.changeYear,year:Xt(r.state.date)}))},r.renderMonthDropdown=function(i){if(i===void 0&&(i=!1),!(!r.props.showMonthDropdown||i))return B.createElement(Ect,sn({},e.defaultProps,r.props,{month:Io(r.state.date),onChange:r.changeMonth}))},r.renderMonthYearDropdown=function(i){if(i===void 0&&(i=!1),!(!r.props.showMonthYearDropdown||i))return B.createElement(Mct,sn({},e.defaultProps,r.props,{date:r.state.date,onChange:r.changeMonthYear}))},r.handleTodayButtonClick=function(i){r.props.onSelect(n7(),i),r.props.setPreSelection&&r.props.setPreSelection(n7())},r.renderTodayButton=function(){if(!(!r.props.todayButton||r.props.showTimeSelectOnly))return B.createElement("div",{className:"react-datepicker__today-button",onClick:r.handleTodayButtonClick},r.props.todayButton)},r.renderDefaultHeader=function(i){var o=i.monthDate,s=i.i;return B.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(o),B.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(s!==0),r.renderMonthYearDropdown(s!==0),r.renderYearDropdown(s!==0)),B.createElement("div",{className:"react-datepicker__day-names"},r.header(o)))},r.renderCustomHeader=function(i){var o,s,a=i.monthDate,l=i.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var c=a7(r.state.date,r.props),u=l7(r.state.date,r.props),d=c7(r.state.date,r.props),f=u7(r.state.date,r.props),h=!r.props.showMonthYearPicker&&!r.props.showQuarterYearPicker&&!r.props.showYearPicker;return B.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},(s=(o=r.props).renderCustomHeader)===null||s===void 0?void 0:s.call(o,sn(sn({},r.state),{customHeaderCount:l,monthDate:a,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:c,nextMonthButtonDisabled:u,prevYearButtonDisabled:d,nextYearButtonDisabled:f})),h&&B.createElement("div",{className:"react-datepicker__day-names"},r.header(a)))},r.renderYearHeader=function(i){var o=i.monthDate,s=r.props,a=s.showYearPicker,l=s.yearItemNumber,c=l===void 0?e.defaultProps.yearItemNumber:l,u=Ud(o,c),d=u.startPeriod,f=u.endPeriod;return B.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},a?"".concat(d," - ").concat(f):Xt(o))},r.renderHeader=function(i){var o=i.monthDate,s=i.i,a=s===void 0?0:s,l={monthDate:o,i:a};switch(!0){case r.props.renderCustomHeader!==void 0:return r.renderCustomHeader(l);case(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker):return r.renderYearHeader(l);default:return r.renderDefaultHeader(l)}},r.renderMonths=function(){var i,o;if(!(r.props.showTimeSelectOnly||r.props.showYearPicker)){for(var s=[],a=(i=r.props.monthsShown)!==null&&i!==void 0?i:e.defaultProps.monthsShown,l=r.props.showPreviousMonths?a-1:0,c=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Eu(r.state.date,l):Jv(r.state.date,l),u=(o=r.props.monthSelectedIn)!==null&&o!==void 0?o:l,d=0;d<a;++d){var f=d-u+l,h=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Eu(c,f):kl(c,f),g="month-".concat(d),p=d<a-1,m=d>0;s.push(B.createElement("div",{key:g,ref:function(v){r.monthContainer=v??void 0},className:"react-datepicker__month-container"},r.renderHeader({monthDate:h,i:d}),B.createElement(_ct,sn({},e.defaultProps,r.props,{ariaLabelPrefix:r.props.monthAriaLabelPrefix,day:h,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,handleOnMonthKeyDown:r.props.handleOnKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,orderInDisplay:d,selectingDate:r.state.selectingDate,monthShowsDuplicateDaysEnd:p,monthShowsDuplicateDaysStart:m}))))}return s}},r.renderYears=function(){if(!r.props.showTimeSelectOnly&&r.props.showYearPicker)return B.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader({monthDate:r.state.date}),B.createElement(Oct,sn({},e.defaultProps,r.props,{selectingDate:r.state.selectingDate,date:r.state.date,onDayClick:r.handleDayClick,clearSelectingDate:r.clearSelectingDate,onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave})))},r.renderTimeSection=function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return B.createElement(Ict,sn({},e.defaultProps,r.props,{onChange:r.props.onTimeChange,format:r.props.timeFormat,intervals:r.props.timeIntervals,monthRef:r.state.monthContainer}))},r.renderInputTimeSection=function(){var i=r.props.selected?new Date(r.props.selected):void 0,o=i&&su(i)&&!!r.props.selected,s=o?"".concat(f7(i.getHours()),":").concat(f7(i.getMinutes())):"";if(r.props.showTimeInput)return B.createElement(vct,sn({},e.defaultProps,r.props,{date:i,timeString:s,onChange:r.props.onTimeChange}))},r.renderAriaLiveRegion=function(){var i,o=Ud(r.state.date,(i=r.props.yearItemNumber)!==null&&i!==void 0?i:e.defaultProps.yearItemNumber),s=o.startPeriod,a=o.endPeriod,l;return r.props.showYearPicker?l="".concat(s," - ").concat(a):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?l=Xt(r.state.date):l="".concat(R4(Io(r.state.date),r.props.locale)," ").concat(Xt(r.state.date)),B.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&l)},r.renderChildren=function(){if(r.props.children)return B.createElement("div",{className:"react-datepicker__children-container"},r.props.children)},r.containerRef=R.createRef(),r.state={date:r.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},r}return Object.defineProperty(e,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:H_}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){var n=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){n.setState({monthContainer:n.monthContainer})}())},e.prototype.componentDidUpdate=function(n){var r=this;if(this.props.preSelection&&(!nn(this.props.preSelection,n.preSelection)||this.props.monthSelectedIn!==n.monthSelectedIn)){var i=!So(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return i&&r.handleCustomMonthChange(r.state.date)})}else this.props.openToDate&&!nn(this.props.openToDate,n.openToDate)&&this.setState({date:this.props.openToDate})},e.prototype.render=function(){var n=this.props.container||Klt;return B.createElement("div",{style:{display:"contents"},ref:this.containerRef},B.createElement(n,{className:Ze("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren()))},e}(R.Component),Bct=function(t){var e=t.icon,n=t.className,r=n===void 0?"":n,i=t.onClick,o="react-datepicker__calendar-icon";return typeof e=="string"?B.createElement("i",{className:"".concat(o," ").concat(e," ").concat(r),"aria-hidden":"true",onClick:i}):B.isValidElement(e)?B.cloneElement(e,{className:"".concat(e.props.className||""," ").concat(o," ").concat(r),onClick:function(s){typeof e.props.onClick=="function"&&e.props.onClick(s),typeof i=="function"&&i(s)}}):B.createElement("svg",{className:"".concat(o," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:i},B.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},Cce=function(t){Ri(e,t);function e(n){var r=t.call(this,n)||this;return r.portalRoot=null,r.el=document.createElement("div"),r}return e.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},e.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},e.prototype.render=function(){return Dh.createPortal(this.props.children,this.el)},e}(R.Component),Uct="[tabindex], a, button, input, select, textarea",zct=function(t){return(t instanceof HTMLAnchorElement||!t.disabled)&&t.tabIndex!==-1},Ece=function(t){Ri(e,t);function e(n){var r=t.call(this,n)||this;return r.getTabChildren=function(){var i;return Array.prototype.slice.call((i=r.tabLoopRef.current)===null||i===void 0?void 0:i.querySelectorAll(Uct),1,-1).filter(zct)},r.handleFocusStart=function(){var i=r.getTabChildren();i&&i.length>1&&i[i.length-1].focus()},r.handleFocusEnd=function(){var i=r.getTabChildren();i&&i.length>1&&i[0].focus()},r.tabLoopRef=R.createRef(),r}return e.prototype.render=function(){var n;return((n=this.props.enableTabLoop)!==null&&n!==void 0?n:e.defaultProps.enableTabLoop)?B.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},B.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,B.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},e.defaultProps={enableTabLoop:!0},e}(R.Component);function jct(t){var e=function(n){var r,i=typeof n.hidePopper=="boolean"?n.hidePopper:!0,o=R.useRef(null),s=Xlt(sn({open:!i,whileElementsMounted:Tlt,placement:n.popperPlacement,middleware:ac([Dlt({padding:15}),Rlt(10),Plt({element:o})],(r=n.popperModifiers)!==null&&r!==void 0?r:[],!0)},n.popperProps)),a=sn(sn({},n),{hidePopper:i,popperProps:sn(sn({},s),{arrowRef:o})});return B.createElement(t,sn({},a))};return e}var Wct=function(t){Ri(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),e.prototype.render=function(){var n=this.props,r=n.className,i=n.wrapperClassName,o=n.hidePopper,s=o===void 0?e.defaultProps.hidePopper:o,a=n.popperComponent,l=n.targetComponent,c=n.enableTabLoop,u=n.popperOnKeyDown,d=n.portalId,f=n.portalHost,h=n.popperProps,g=n.showArrow,p=void 0;if(!s){var m=Ze("react-datepicker-popper",r);p=B.createElement(Ece,{enableTabLoop:c},B.createElement("div",{ref:h.refs.setFloating,style:h.floatingStyles,className:m,"data-placement":h.placement,onKeyDown:u},a,g&&B.createElement(zlt,{ref:h.arrowRef,context:h.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(p=R.createElement(this.props.popperContainer,{},p)),d&&!s&&(p=B.createElement(Cce,{portalId:d,portalHost:f},p));var v=Ze("react-datepicker-wrapper",i);return B.createElement(B.Fragment,null,B.createElement("div",{ref:h.refs.setReference,className:v},l),p)},e}(R.Component),Vct=jct(Wct),y7="react-datepicker-ignore-onclickoutside",Hct=dO(Fct);function Gct(t,e){return t&&e?Io(t)!==Io(e)||Xt(t)!==Xt(e):t!==e}var AP="Date input not valid.",P4=function(t){Ri(e,t);function e(n){var r=t.call(this,n)||this;return r.calendar=null,r.input=null,r.getPreSelection=function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:Mn()},r.modifyHolidays=function(){var i;return(i=r.props.holidays)===null||i===void 0?void 0:i.reduce(function(o,s){var a=new Date(s.date);return su(a)?ac(ac([],o,!0),[sn(sn({},s),{date:a})],!1):o},[])},r.calcInitialState=function(){var i,o=r.getPreSelection(),s=wce(r.props),a=_ce(r.props),l=s&&Pp(o,WE(s))?s:a&&yf(o,r7(a))?a:o;return{open:r.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(i=r.props.selectsRange?r.props.startDate:r.props.selected)!==null&&i!==void 0?i:l,highlightDates:d7(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},r.resetHiddenStatus=function(){r.setState(sn(sn({},r.state),{wasHidden:!1}))},r.setHiddenStatus=function(){r.setState(sn(sn({},r.state),{wasHidden:!0}))},r.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&r.setHiddenStatus()},r.clearPreventFocusTimeout=function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)},r.setFocus=function(){r.input&&r.input.focus&&r.input.focus({preventScroll:!0})},r.setBlur=function(){r.input&&r.input.blur&&r.input.blur(),r.cancelFocusInput()},r.setOpen=function(i,o){o===void 0&&(o=!1),r.setState({open:i,preSelection:i&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:MP},function(){i||r.setState(function(s){return{focused:o?s.focused:!1}},function(){!o&&r.setBlur(),r.setState({inputValue:null})})})},r.inputOk=function(){return Tu(r.state.preSelection)},r.isCalendarOpen=function(){return r.props.open===void 0?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open},r.handleFocus=function(i){var o,s,a=r.state.wasHidden,l=a?r.state.open:!0;a&&r.resetHiddenStatus(),!r.state.preventFocus&&l&&((s=(o=r.props).onFocus)===null||s===void 0||s.call(o,i),!r.props.preventOpenOnFocus&&!r.props.readOnly&&r.setOpen(!0)),r.setState({focused:!0})},r.sendFocusBackToInput=function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},function(){r.preventFocusTimeout=setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})})},r.cancelFocusInput=function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=void 0},r.deferFocusInput=function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout(function(){return r.setFocus()},1)},r.handleDropdownFocus=function(){r.cancelFocusInput()},r.handleBlur=function(i){var o,s;(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&((s=(o=r.props).onBlur)===null||s===void 0||s.call(o,i)),r.setState({focused:!1})},r.handleCalendarClickOutside=function(i){var o,s;r.props.inline||r.setOpen(!1),(s=(o=r.props).onClickOutside)===null||s===void 0||s.call(o,i),r.props.withPortal&&i.preventDefault()},r.handleChange=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=i[0];if(!(r.props.onChangeRaw&&(r.props.onChangeRaw.apply(r,i),!s||typeof s.isDefaultPrevented!="function"||s.isDefaultPrevented()))){r.setState({inputValue:(s==null?void 0:s.target)instanceof HTMLInputElement?s.target.value:null,lastPreSelectChange:qct});var a=r.props,l=a.dateFormat,c=l===void 0?e.defaultProps.dateFormat:l,u=a.strictParsing,d=u===void 0?e.defaultProps.strictParsing:u,f=Qlt((s==null?void 0:s.target)instanceof HTMLInputElement?s.target.value:"",c,r.props.locale,d,r.props.minDate);r.props.showTimeSelectOnly&&r.props.selected&&f&&!nn(f,r.props.selected)&&(f=Gat(r.props.selected,{hours:_c(f),minutes:Sc(f),seconds:ku(f)})),(f||!((s==null?void 0:s.target)instanceof HTMLInputElement)||!(s!=null&&s.target.value))&&r.setSelected(f,s,!0)}},r.handleSelect=function(i,o,s){if(r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&r.sendFocusBackToInput(),r.props.onChangeRaw&&r.props.onChangeRaw(o),r.setSelected(i,o,!1,s),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect)r.setPreSelection(i);else if(!r.props.inline){r.props.selectsRange||r.setOpen(!1);var a=r.props,l=a.startDate,c=a.endDate;l&&!c&&(r.props.swapRange||!m7(i,l))&&r.setOpen(!1)}},r.setSelected=function(i,o,s,a){var l,c=i;if(r.props.showYearPicker){if(c!==null&&YF(Xt(c),r.props))return}else if(r.props.showMonthYearPicker){if(c!==null&&xce(c,r.props))return}else if(c!==null&&Bd(c,r.props))return;var u=r.props,d=u.onChange,f=u.selectsRange,h=u.startDate,g=u.endDate,p=u.selectsMultiple,m=u.selectedDates,v=u.minTime,_=u.swapRange;if(!Gh(r.props.selected,c)||r.props.allowSameDay||f||p)if(c!==null&&(r.props.selected&&(!s||!r.props.showTimeSelect&&!r.props.showTimeSelectOnly&&!r.props.showTimeInput)&&(c=EP(c,{hour:_c(r.props.selected),minute:Sc(r.props.selected),second:ku(r.props.selected)})),!s&&(r.props.showTimeSelect||r.props.showTimeSelectOnly)&&v&&(c=EP(c,{hour:v.getHours(),minute:v.getMinutes(),second:v.getSeconds()})),r.props.inline||r.setState({preSelection:c}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:a})),f){var w=!h&&!g,y=h&&!g,b=h&&g;w?d?d([c,null],o):e.defaultProps.onChange:y&&(c===null?d?d([null,null],o):e.defaultProps.onChange:m7(c,h)?_?d?d([c,h],o):e.defaultProps.onChange:d?d([c,null],o):e.defaultProps.onChange:d?d([h,c],o):e.defaultProps.onChange),b&&(d?d([c,null],o):e.defaultProps.onChange)}else if(p){if(c!==null)if(!(m!=null&&m.length))d?d([c],o):e.defaultProps.onChange;else{var x=m.some(function(T){return nn(T,c)});if(x){var S=m.filter(function(T){return!nn(T,c)});d?d(S,o):e.defaultProps.onChange}else d?d(ac(ac([],m,!0),[c],!1),o):e.defaultProps.onChange}}else d?d(c,o):e.defaultProps.onChange;if(!s){var C=(l=r.props.onSelect)!==null&&l!==void 0?l:e.defaultProps.onSelect;C(c,o),r.setState({inputValue:null})}},r.setPreSelection=function(i){var o=Tu(r.props.minDate),s=Tu(r.props.maxDate),a=!0;if(i){var l=WE(i);if(o&&s)a=bb(i,r.props.minDate,r.props.maxDate);else if(o){var c=WE(r.props.minDate);a=yf(i,c)||Gh(l,c)}else if(s){var u=r7(r.props.maxDate);a=Pp(i,u)||Gh(l,u)}}a&&r.setState({preSelection:i})},r.toggleCalendar=function(){r.setOpen(!r.state.open)},r.handleTimeChange=function(i){var o;if(!(r.props.selectsRange||r.props.selectsMultiple)){var s=r.props.selected?r.props.selected:r.getPreSelection(),a=r.props.selected?i:EP(s,{hour:_c(i),minute:Sc(i)});r.setState({preSelection:a});var l=(o=r.props.onChange)!==null&&o!==void 0?o:e.defaultProps.onChange;l(a),r.props.shouldCloseOnSelect&&!r.props.showTimeInput&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})}},r.onInputClick=function(){var i,o;!r.props.disabled&&!r.props.readOnly&&r.setOpen(!0),(o=(i=r.props).onInputClick)===null||o===void 0||o.call(i)},r.onInputKeyDown=function(i){var o,s,a,l,c;(s=(o=r.props).onKeyDown)===null||s===void 0||s.call(o,i);var u=i.key;if(!r.state.open&&!r.props.inline&&!r.props.preventOpenOnFocus){(u===at.ArrowDown||u===at.ArrowUp||u===at.Enter)&&r.onInputClick();return}if(r.state.open){if(u===at.ArrowDown||u===at.ArrowUp){i.preventDefault();var d=r.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':r.props.showFullMonthYearPicker||r.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',f=((a=r.calendar)===null||a===void 0?void 0:a.componentNode)instanceof Element&&r.calendar.componentNode.querySelector(d);f instanceof HTMLElement&&f.focus({preventScroll:!0});return}var h=Mn(r.state.preSelection);u===at.Enter?(i.preventDefault(),r.inputOk()&&r.state.lastPreSelectChange===MP?(r.handleSelect(h,i),!r.props.shouldCloseOnSelect&&r.setPreSelection(h)):r.setOpen(!1)):u===at.Escape?(i.preventDefault(),r.sendFocusBackToInput(),r.setOpen(!1)):u===at.Tab&&r.setOpen(!1),r.inputOk()||(c=(l=r.props).onInputError)===null||c===void 0||c.call(l,{code:1,msg:AP})}},r.onPortalKeyDown=function(i){var o=i.key;o===at.Escape&&(i.preventDefault(),r.setState({preventFocus:!0},function(){r.setOpen(!1),setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})}))},r.onDayKeyDown=function(i){var o,s,a,l,c=r.props,u=c.minDate,d=c.maxDate,f=c.disabledKeyboardNavigation,h=c.showWeekPicker,g=c.shouldCloseOnSelect,p=c.locale,m=c.calendarStartDay,v=c.adjustDateOnChange,_=c.inline;if((s=(o=r.props).onKeyDown)===null||s===void 0||s.call(o,i),!f){var w=i.key,y=i.shiftKey,b=Mn(r.state.preSelection),x=function(O,D){var P=D;switch(O){case at.ArrowRight:P=h?Qk(D,1):Bf(D,1);break;case at.ArrowLeft:P=h?HY(D,1):qat(D,1);break;case at.ArrowUp:P=HY(D,1);break;case at.ArrowDown:P=Qk(D,1);break;case at.PageUp:P=y?ey(D,1):Jv(D,1);break;case at.PageDown:P=y?Eu(D,1):kl(D,1);break;case at.Home:P=of(D,p,m);break;case at.End:P=nct(D);break}return P},S=function(O,D){for(var P=40,N=O,U=!1,L=0,V=x(O,D);!U;){if(L>=P){V=D;break}u&&V<u&&(N=at.ArrowRight,V=Bd(u,r.props)?x(N,V):u),d&&V>d&&(N=at.ArrowLeft,V=Bd(d,r.props)?x(N,V):d),Bd(V,r.props)?((N===at.PageUp||N===at.Home)&&(N=at.ArrowRight),(N===at.PageDown||N===at.End)&&(N=at.ArrowLeft),V=x(N,V)):U=!0,L++}return V};if(w===at.Enter){i.preventDefault(),r.handleSelect(b,i),!g&&r.setPreSelection(b);return}else if(w===at.Escape){i.preventDefault(),r.setOpen(!1),r.inputOk()||(l=(a=r.props).onInputError)===null||l===void 0||l.call(a,{code:1,msg:AP});return}var C=null;switch(w){case at.ArrowLeft:case at.ArrowRight:case at.ArrowUp:case at.ArrowDown:case at.PageUp:case at.PageDown:case at.Home:case at.End:C=S(w,b);break}if(!C){r.props.onInputError&&r.props.onInputError({code:1,msg:AP});return}if(i.preventDefault(),r.setState({lastPreSelectChange:MP}),v&&r.setSelected(C),r.setPreSelection(C),_){var T=Io(b),E=Io(C),k=Xt(b),A=Xt(C);T!==E||k!==A?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}},r.onPopperKeyDown=function(i){var o=i.key;o===at.Escape&&(i.preventDefault(),r.sendFocusBackToInput())},r.onClearClick=function(i){i&&i.preventDefault&&i.preventDefault(),r.sendFocusBackToInput();var o=r.props,s=o.selectsRange,a=o.onChange;s?a?a([null,null],i):e.defaultProps.onChange():a?a(null,i):e.defaultProps.onChange(),r.setState({inputValue:null})},r.clear=function(){r.onClearClick()},r.onScroll=function(i){typeof r.props.closeOnScroll=="boolean"&&r.props.closeOnScroll?(i.target===document||i.target===document.documentElement||i.target===document.body)&&r.setOpen(!1):typeof r.props.closeOnScroll=="function"&&r.props.closeOnScroll(i)&&r.setOpen(!1)},r.renderCalendar=function(){var i,o;return!r.props.inline&&!r.isCalendarOpen()?null:B.createElement(Hct,sn({ref:function(s){r.calendar=s}},r.props,r.state,{setOpen:r.setOpen,dateFormat:(i=r.props.dateFormatCalendar)!==null&&i!==void 0?i:e.defaultProps.dateFormatCalendar,onSelect:r.handleSelect,onClickOutside:r.handleCalendarClickOutside,holidays:hct(r.modifyHolidays()),outsideClickIgnoreClass:y7,onDropdownFocus:r.handleDropdownFocus,onTimeChange:r.handleTimeChange,className:r.props.calendarClassName,container:r.props.calendarContainer,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,setPreSelection:r.setPreSelection,dropdownMode:(o=r.props.dropdownMode)!==null&&o!==void 0?o:e.defaultProps.dropdownMode}),r.props.children)},r.renderAriaLiveRegion=function(){var i=r.props,o=i.dateFormat,s=o===void 0?e.defaultProps.dateFormat:o,a=i.locale,l=r.props.showTimeInput||r.props.showTimeSelect,c=l?"PPPPp":"PPPP",u;return r.props.selectsRange?u="Selected start date: ".concat(la(r.props.startDate,{dateFormat:c,locale:a}),". ").concat(r.props.endDate?"End date: "+la(r.props.endDate,{dateFormat:c,locale:a}):""):r.props.showTimeSelectOnly?u="Selected time: ".concat(la(r.props.selected,{dateFormat:s,locale:a})):r.props.showYearPicker?u="Selected year: ".concat(la(r.props.selected,{dateFormat:"yyyy",locale:a})):r.props.showMonthYearPicker?u="Selected month: ".concat(la(r.props.selected,{dateFormat:"MMMM yyyy",locale:a})):r.props.showQuarterYearPicker?u="Selected quarter: ".concat(la(r.props.selected,{dateFormat:"yyyy, QQQ",locale:a})):u="Selected date: ".concat(la(r.props.selected,{dateFormat:c,locale:a})),B.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},u)},r.renderDateInput=function(){var i,o,s,a=Ze(r.props.className,(i={},i[y7]=r.state.open,i)),l=r.props.customInput||B.createElement("input",{type:"text"}),c=r.props.customInputRef||"ref",u=r.props,d=u.dateFormat,f=d===void 0?e.defaultProps.dateFormat:d,h=u.locale,g=typeof r.props.value=="string"?r.props.value:typeof r.state.inputValue=="string"?r.state.inputValue:r.props.selectsRange?Zlt(r.props.startDate,r.props.endDate,{dateFormat:f,locale:h}):r.props.selectsMultiple?Jlt((s=r.props.selectedDates)!==null&&s!==void 0?s:[],{dateFormat:f,locale:h}):la(r.props.selected,{dateFormat:f,locale:h});return R.cloneElement(l,(o={},o[c]=function(p){r.input=p},o.value=g,o.onBlur=r.handleBlur,o.onChange=r.handleChange,o.onClick=r.onInputClick,o.onFocus=r.handleFocus,o.onKeyDown=r.onInputKeyDown,o.id=r.props.id,o.name=r.props.name,o.form=r.props.form,o.autoFocus=r.props.autoFocus,o.placeholder=r.props.placeholderText,o.disabled=r.props.disabled,o.autoComplete=r.props.autoComplete,o.className=Ze(l.props.className,a),o.title=r.props.title,o.readOnly=r.props.readOnly,o.required=r.props.required,o.tabIndex=r.props.tabIndex,o["aria-describedby"]=r.props.ariaDescribedBy,o["aria-invalid"]=r.props.ariaInvalid,o["aria-labelledby"]=r.props.ariaLabelledBy,o["aria-required"]=r.props.ariaRequired,o))},r.renderClearButton=function(){var i=r.props,o=i.isClearable,s=i.disabled,a=i.selected,l=i.startDate,c=i.endDate,u=i.clearButtonTitle,d=i.clearButtonClassName,f=d===void 0?"":d,h=i.ariaLabelClose,g=h===void 0?"Close":h,p=i.selectedDates;return o&&(a!=null||l!=null||c!=null||p!=null&&p.length)?B.createElement("button",{type:"button",className:Ze("react-datepicker__close-icon",f,{"react-datepicker__close-icon--disabled":s}),disabled:s,"aria-label":g,onClick:r.onClearClick,title:u,tabIndex:-1}):null},r.state=r.calcInitialState(),r.preventFocusTimeout=void 0,r}return Object.defineProperty(e,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",onChange:function(){},disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",onFocus:function(){},onBlur:function(){},onKeyDown:function(){},onInputClick:function(){},onSelect:function(){},onClickOutside:function(){},onMonthChange:function(){},onCalendarOpen:function(){},onCalendarClose:function(){},preventOpenOnFocus:!1,onYearChange:function(){},onInputError:function(){},monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:H_,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.componentDidUpdate=function(n,r){var i,o,s,a;n.inline&&Gct(n.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&n.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),n.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:d7(this.props.highlightDates)}),!r.focused&&!Gh(n.selected,this.props.selected)&&this.setState({inputValue:null}),r.open!==this.state.open&&(r.open===!1&&this.state.open===!0&&((o=(i=this.props).onCalendarOpen)===null||o===void 0||o.call(i)),r.open===!0&&this.state.open===!1&&((a=(s=this.props).onCalendarClose)===null||a===void 0||a.call(s)))},e.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.renderInputContainer=function(){var n=this.props,r=n.showIcon,i=n.icon,o=n.calendarIconClassname,s=n.calendarIconClassName,a=n.toggleCalendarOnIconClick,l=this.state.open;return o&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),B.createElement("div",{className:"react-datepicker__input-container".concat(r?" react-datepicker__view-calendar-icon":"")},r&&B.createElement(Bct,sn({icon:i,className:Ze(s,!s&&o,l&&"react-datepicker-ignore-onclickoutside")},a?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},e.prototype.render=function(){var n=this.renderCalendar();if(this.props.inline)return n;if(this.props.withPortal){var r=this.state.open?B.createElement(Ece,{enableTabLoop:this.props.enableTabLoop},B.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},n)):null;return this.state.open&&this.props.portalId&&(r=B.createElement(Cce,sn({portalId:this.props.portalId},this.props),r)),B.createElement("div",null,this.renderInputContainer(),r)}return B.createElement(Vct,sn({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:n,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},e}(R.Component),qct="input",MP="navigate";const Xct=()=>{const[t,e]=R.useState([]),[n,r]=R.useState([]),[i,o]=R.useState(new Date("2024-08-18")),[s,a]=R.useState(!1),[l,c]=R.useState(0),[u,d]=R.useState(""),[f,h]=R.useState([0,0]);R.useEffect(()=>{(async()=>{try{a(!0),c(0),d("Fetching data...");const _=await Ht.get("http://localhost:4650/api5/predictions");if(_.headers["content-type"].includes("application/json")){const w=_.data;e(w),d("Data fetched successfully."),c(100);const b=g(w).map(C=>C.prediction),x=Math.min(...b),S=Math.max(...b);h([x-5,S+5])}else console.error("Error: Expected JSON response but got:",_.headers["content-type"])}catch(_){console.error("Error fetching data:",_),d("Error fetching data.")}finally{a(!1)}})()},[]),R.useEffect(()=>{if(i&&t.length>0){const v=i.toISOString().split("T")[0],_=t.filter(w=>w.dates.some(y=>y.startsWith(v)));r(_)}else r(t)},[i,t]);const g=v=>{if(v.length===0)return[];const _=v[0].dates,w=v[0].predictions.flat();return _.map((y,b)=>({date:y,prediction:w[b]}))},m=(()=>{const v=Math.max(...n.map(w=>w.prediction)),_=Math.min(...n.map(w=>w.prediction));return v<=0?0:_>=0?1:v/(v-_)})();return I.jsxs("div",{children:[I.jsx("h3",{children:"FORECAST RECORDS - SELECT DAY "}),I.jsxs("div",{style:{marginBottom:"20px"},children:[I.jsx("label",{children:"SELECT DATE: "}),I.jsx(P4,{selected:i,onChange:v=>o(v),dateFormat:"yyyy-MM-dd",isClearable:!0,placeholderText:"Select a date"})]}),s&&I.jsxs(I.Fragment,{children:[I.jsx(j_,{animated:!0,now:l}),I.jsx("p",{children:u})]}),I.jsx("div",{style:{width:"100%",height:"460px"},children:I.jsx(As,{width:"100%",height:"90%",children:I.jsxs(bu,{data:g(n),margin:{top:10,right:30,left:0,bottom:0},children:[I.jsx(dl,{strokeDasharray:"3 3"}),I.jsx(Ko,{dataKey:"date"}),I.jsx(Yo,{domain:f,tickFormatter:v=>v.toFixed(2)}),I.jsx(si,{}),I.jsx("defs",{children:I.jsxs("linearGradient",{id:"splitColor",x1:"0",y1:"0",x2:"0",y2:"1",children:[I.jsx("stop",{offset:m,stopColor:"green",stopOpacity:1}),I.jsx("stop",{offset:m,stopColor:"red",stopOpacity:1})]})}),I.jsx(Mr,{type:"monotone",dataKey:"prediction",stroke:"#000",fill:"url(#splitColor)"})]})})})]})},N4=R.createContext(),Kct=({children:t})=>{const[e,n]=R.useState([]),[r,i]=R.useState(!0),o=async()=>{try{const a=(await Ht.get("http://localhost:3030/api1/rune-data?rune_name=BILLION•DOLLAR•CAT")).data;n(a),localStorage.setItem("priceData",JSON.stringify(a)),localStorage.setItem("lastFetched",Date.now())}catch(s){console.error("Error fetching price data:",s)}finally{i(!1)}};return R.useEffect(()=>{const s=localStorage.getItem("priceData"),a=localStorage.getItem("lastFetched");if(s&&a){const l=Date.now()-parseInt(a,10),c=12*60*60*1e3;if(l<c){n(JSON.parse(s)),i(!1);return}}o()},[]),I.jsx(N4.Provider,{value:{priceData:e,loading:r},children:t})},Yct=()=>{const{priceData:t,loading:e}=R.useContext(N4),[n,r]=R.useState([]),[i,o]=R.useState([]),[s,a]=R.useState([]),[l,c]=R.useState(new Date("2024-07-21")),[u,d]=R.useState(!1),[f,h]=R.useState(0),[g,p]=R.useState(""),[m,v]=R.useState([0,10]);R.useEffect(()=>{(async()=>{try{d(!0),h(0),p("Fetching forecast data...");const y=await Ht.get("https://99.37.183.149:4650/api5/predictions");y.headers["content-type"].includes("application/json")?(r(y.data),p("Forecast data fetched successfully."),h(100)):console.error("Error: Expected JSON response but got:",y.headers["content-type"])}catch(y){console.error("Error fetching forecast data:",y),p("Error fetching forecast data.")}finally{d(!1)}})()},[]),R.useEffect(()=>{if(l&&n.length>0&&t.length>0){const w=l.toISOString().split("T")[0],y=n.filter(C=>C.dates&&C.dates.some(T=>T.startsWith(w))),b=t.filter(C=>new Date(C.timestamp).toISOString().split("T")[0]===w&&C.rune_name==="BILLION•DOLLAR•CAT").map(C=>({date:C.timestamp,actual:parseFloat(C.price_sats)})),x=y.length>0?_(y[0]):[];o(x),a(b);const S=[...x.map(C=>C.prediction),...b.map(C=>C.actual)];if(S.length>0){const C=Math.min(...S),T=Math.max(...S);v([C-5,T+5])}}else o([]),a([])},[l,n,t]);const _=w=>{const y=w.dates,b=w.predictions.flat();return y.map((x,S)=>({date:x,prediction:b[S]}))};return I.jsxs("div",{children:[I.jsx("h1",{children:"Rune Prediction"}),I.jsxs("div",{style:{marginBottom:"20px"},children:[I.jsx("label",{children:"Select Date: "}),I.jsx(P4,{selected:l,onChange:w=>c(w),dateFormat:"yyyy-MM-dd",isClearable:!0,placeholderText:"Select a date"})]}),(u||e)&&I.jsxs(I.Fragment,{children:[I.jsx(j_,{animated:!0,now:f}),I.jsx("p",{children:g})]}),I.jsxs("div",{style:{width:"100%",height:"300px"},children:[I.jsx(As,{width:"100%",height:"100%",children:I.jsxs(uYe,{data:i,margin:{top:10,right:30,left:0,bottom:0},children:[I.jsx(dl,{strokeDasharray:"3 3"}),I.jsx(Ko,{dataKey:"date"}),I.jsx(Yo,{domain:m,tickFormatter:w=>w.toFixed(2)}),I.jsx(si,{}),I.jsx(Nu,{}),I.jsx(Wv,{type:"monotone",dataKey:"prediction",stroke:"#8884d8",name:"Forecasted Price"}),I.jsx(Wv,{type:"monotone",data:s,dataKey:"actual",stroke:"#82ca9d",name:"Actual Price"})]})}),I.jsx(As,{width:"100%",height:"100%",children:I.jsxs(bu,{data:i,margin:{top:10,right:30,left:0,bottom:0},children:[I.jsx(dl,{strokeDasharray:"3 3"}),I.jsx(Ko,{dataKey:"date"}),I.jsx(Yo,{domain:m,tickFormatter:w=>w.toFixed(2)}),I.jsx(si,{}),I.jsx(Nu,{}),I.jsx(Mr,{type:"monotone",dataKey:"prediction",stroke:"#000",fill:"white",name:"Forecasted Price"}),I.jsx(Mr,{type:"monotone",data:s,dataKey:"actual",stroke:"#06f82b",name:"Actual Price"})]})})]})]})},Nc=Object.create(null);Nc.open="0";Nc.close="1";Nc.ping="2";Nc.pong="3";Nc.message="4";Nc.upgrade="5";Nc.noop="6";const VE=Object.create(null);Object.keys(Nc).forEach(t=>{VE[Nc[t]]=t});const QF={type:"error",data:"parser error"},Tce=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",kce=typeof ArrayBuffer=="function",Ace=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,$4=({type:t,data:e},n,r)=>Tce&&e instanceof Blob?n?r(e):b7(e,r):kce&&(e instanceof ArrayBuffer||Ace(e))?n?r(e):b7(new Blob([e]),r):r(Nc[t]+(e||"")),b7=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function x7(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let IP;function Qct(t,e){if(Tce&&t.data instanceof Blob)return t.data.arrayBuffer().then(x7).then(e);if(kce&&(t.data instanceof ArrayBuffer||Ace(t.data)))return e(x7(t.data));$4(t,!1,n=>{IP||(IP=new TextEncoder),e(IP.encode(n))})}const w7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xb=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<w7.length;t++)xb[w7.charCodeAt(t)]=t;const Zct=t=>{let e=t.length*.75,n=t.length,r,i=0,o,s,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const c=new ArrayBuffer(e),u=new Uint8Array(c);for(r=0;r<n;r+=4)o=xb[t.charCodeAt(r)],s=xb[t.charCodeAt(r+1)],a=xb[t.charCodeAt(r+2)],l=xb[t.charCodeAt(r+3)],u[i++]=o<<2|s>>4,u[i++]=(s&15)<<4|a>>2,u[i++]=(a&3)<<6|l&63;return c},Jct=typeof ArrayBuffer=="function",L4=(t,e)=>{if(typeof t!="string")return{type:"message",data:Mce(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:eut(t.substring(1),e)}:VE[n]?t.length>1?{type:VE[n],data:t.substring(1)}:{type:VE[n]}:QF},eut=(t,e)=>{if(Jct){const n=Zct(t);return Mce(n,e)}else return{base64:!0,data:t}},Mce=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Ice="",tut=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((o,s)=>{$4(o,!1,a=>{r[s]=a,++i===n&&e(r.join(Ice))})})},nut=(t,e)=>{const n=t.split(Ice),r=[];for(let i=0;i<n.length;i++){const o=L4(n[i],e);if(r.push(o),o.type==="error")break}return r};function rut(){return new TransformStream({transform(t,e){Qct(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const o=new DataView(i.buffer);o.setUint8(0,126),o.setUint16(1,r)}else{i=new Uint8Array(9);const o=new DataView(i.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let OP;function BC(t){return t.reduce((e,n)=>e+n.length,0)}function UC(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function iut(t,e){OP||(OP=new TextDecoder);const n=[];let r=0,i=-1,o=!1;return new TransformStream({transform(s,a){for(n.push(s);;){if(r===0){if(BC(n)<1)break;const l=UC(n,1);o=(l[0]&128)===128,i=l[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(BC(n)<2)break;const l=UC(n,2);i=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(r===2){if(BC(n)<8)break;const l=UC(n,8),c=new DataView(l.buffer,l.byteOffset,l.length),u=c.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(QF);break}i=u*Math.pow(2,32)+c.getUint32(4),r=3}else{if(BC(n)<i)break;const l=UC(n,i);a.enqueue(L4(o?l:OP.decode(l),e)),r=0}if(i===0||i>t){a.enqueue(QF);break}}}})}const Oce=4;function Gr(t){if(t)return out(t)}function out(t){for(var e in Gr.prototype)t[e]=Gr.prototype[e];return t}Gr.prototype.on=Gr.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Gr.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Gr.prototype.off=Gr.prototype.removeListener=Gr.prototype.removeAllListeners=Gr.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Gr.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};Gr.prototype.emitReserved=Gr.prototype.emit;Gr.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Gr.prototype.hasListeners=function(t){return!!this.listeners(t).length};const pa=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function Rce(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const sut=pa.setTimeout,aut=pa.clearTimeout;function yO(t,e){e.useNativeTimers?(t.setTimeoutFn=sut.bind(pa),t.clearTimeoutFn=aut.bind(pa)):(t.setTimeoutFn=pa.setTimeout.bind(pa),t.clearTimeoutFn=pa.clearTimeout.bind(pa))}const lut=1.33;function cut(t){return typeof t=="string"?uut(t):Math.ceil((t.byteLength||t.size)*lut)}function uut(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function dut(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function fut(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let o=n[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}class hut extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class F4 extends Gr{constructor(e){super(),this.writable=!1,yO(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,n,r){return super.emitReserved("error",new hut(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=L4(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=dut(e);return n.length?"?"+n:""}}const Dce="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),ZF=64,put={};let _7=0,zC=0,S7;function C7(t){let e="";do e=Dce[t%ZF]+e,t=Math.floor(t/ZF);while(t>0);return e}function Pce(){const t=C7(+new Date);return t!==S7?(_7=0,S7=t):t+"."+C7(_7++)}for(;zC<ZF;zC++)put[Dce[zC]]=zC;let Nce=!1;try{Nce=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const mut=Nce;function $ce(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||mut))return new XMLHttpRequest}catch{}if(!e)try{return new pa[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function gut(){}const vut=function(){return new $ce({xdomain:!1}).responseType!=null}();class yut extends F4{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const r=location.protocol==="https:";let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}const n=e&&e.forceBase64;this.supportsBinary=vut&&!n,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};nut(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,tut(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Pce()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new iv(this.uri(),e)}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,o)=>{this.onError("xhr post error",i,o)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}let iv=class HE extends Gr{constructor(e,n){super(),yO(this,n),this.opts=n,this.method=n.method||"GET",this.uri=e,this.data=n.data!==void 0?n.data:null,this.create()}create(){var e;const n=Rce(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const r=this.xhr=new $ce(n);try{r.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}}catch{}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this.opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this.opts.cookieJar)===null||i===void 0||i.parseCookies(r)),r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},r.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document<"u"&&(this.index=HE.requestsCount++,HE.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=gut,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete HE.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};iv.requestsCount=0;iv.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",E7);else if(typeof addEventListener=="function"){const t="onpagehide"in pa?"pagehide":"unload";addEventListener(t,E7,!1)}}function E7(){for(let t in iv.requests)iv.requests.hasOwnProperty(t)&&iv.requests[t].abort()}const B4=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),jC=pa.WebSocket||pa.MozWebSocket,T7=!0,but="arraybuffer",k7=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class xut extends F4{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),n=this.opts.protocols,r=k7?{}:Rce(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=T7&&!k7?n?new jC(e,n):new jC(e):new jC(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;$4(r,this.supportsBinary,o=>{const s={};try{T7&&this.ws.send(o)}catch{}i&&B4(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Pce()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}check(){return!!jC}}class wut extends F4{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{const n=iut(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=rut();i.readable.pipeTo(e.writable),this.writer=i.writable.getWriter();const o=()=>{r.read().then(({done:a,value:l})=>{a||(this.onPacket(l),o())}).catch(a=>{})};o();const s={type:"open"};this.query.sid&&(s.data=`{"sid":"${this.query.sid}"}`),this.writer.write(s).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this.writer.write(r).then(()=>{i&&B4(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}}const _ut={websocket:xut,webtransport:wut,polling:yut},Sut=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Cut=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function JF(t){if(t.length>2e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=Sut.exec(t||""),o={},s=14;for(;s--;)o[Cut[s]]=i[s]||"";return n!=-1&&r!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=Eut(o,o.path),o.queryKey=Tut(o,o.query),o}function Eut(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Tut(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,o){i&&(n[i]=o)}),n}let Lce=class hg extends Gr{constructor(e,n={}){super(),this.binaryType=but,this.writeBuffer=[],e&&typeof e=="object"&&(n=e,e=null),e?(e=JF(e),n.hostname=e.host,n.secure=e.protocol==="https"||e.protocol==="wss",n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=JF(n.host).host),yO(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=fut(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=Oce,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new _ut[e](r)}open(){let e;if(this.opts.rememberUpgrade&&hg.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(e){let n=this.createTransport(e),r=!1;hg.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;hg.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=n.name,this.emitReserved("upgradeError",f)}}))};function o(){r||(r=!0,u(),n.close(),n=null)}const s=d=>{const f=new Error("probe error: "+d);f.transport=n.name,o(),this.emitReserved("upgradeError",f)};function a(){s("transport closed")}function l(){s("socket closed")}function c(d){n&&d.name!==n.name&&o()}const u=()=>{n.removeListener("open",i),n.removeListener("error",s),n.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};n.once("open",i),n.once("error",s),n.once("close",a),this.once("close",l),this.once("upgrading",c),this.upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onOpen(){if(this.readyState="open",hg.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const n=this.upgrades.length;for(;e<n;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=e.data,this.onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=cut(i)),r>0&&n>this.maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}write(e,n,r){return this.sendPacket("message",e,n,r),this}send(e,n,r){return this.sendPacket("message",e,n,r),this}sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const o={type:e,data:n,options:r};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}onError(e){hg.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const n=[];let r=0;const i=e.length;for(;r<i;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}};Lce.protocol=Oce;function kut(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=JF(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+e,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}const Aut=typeof ArrayBuffer=="function",Mut=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Fce=Object.prototype.toString,Iut=typeof Blob=="function"||typeof Blob<"u"&&Fce.call(Blob)==="[object BlobConstructor]",Out=typeof File=="function"||typeof File<"u"&&Fce.call(File)==="[object FileConstructor]";function U4(t){return Aut&&(t instanceof ArrayBuffer||Mut(t))||Iut&&t instanceof Blob||Out&&t instanceof File}function GE(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(GE(t[n]))return!0;return!1}if(U4(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return GE(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&GE(t[n]))return!0;return!1}function Rut(t){const e=[],n=t.data,r=t;return r.data=e3(n,e),r.attachments=e.length,{packet:r,buffers:e}}function e3(t,e){if(!t)return t;if(U4(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=e3(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=e3(t[r],e));return n}return t}function Dut(t,e){return t.data=t3(t.data,e),delete t.attachments,t}function t3(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=t3(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=t3(t[n],e));return t}const Put=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Nut=5;var Zt;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Zt||(Zt={}));class $ut{constructor(e){this.replacer=e}encode(e){return(e.type===Zt.EVENT||e.type===Zt.ACK)&&GE(e)?this.encodeAsBinary({type:e.type===Zt.EVENT?Zt.BINARY_EVENT:Zt.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===Zt.BINARY_EVENT||e.type===Zt.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=Rut(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function A7(t){return Object.prototype.toString.call(t)==="[object Object]"}class z4 extends Gr{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===Zt.BINARY_EVENT;r||n.type===Zt.BINARY_ACK?(n.type=r?Zt.EVENT:Zt.ACK,this.reconstructor=new Lut(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(U4(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(Zt[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Zt.BINARY_EVENT||r.type===Zt.BINARY_ACK){const o=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const s=e.substring(o,n);if(s!=Number(s)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(s)}if(e.charAt(n+1)==="/"){const o=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(o,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const o=n+1;for(;++n;){const s=e.charAt(n);if(s==null||Number(s)!=s){--n;break}if(n===e.length)break}r.id=Number(e.substring(o,n+1))}if(e.charAt(++n)){const o=this.tryParse(e.substr(n));if(z4.isPayloadValid(r.type,o))r.data=o;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case Zt.CONNECT:return A7(n);case Zt.DISCONNECT:return n===void 0;case Zt.CONNECT_ERROR:return typeof n=="string"||A7(n);case Zt.EVENT:case Zt.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Put.indexOf(n[0])===-1);case Zt.ACK:case Zt.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Lut{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=Dut(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Fut=Object.freeze(Object.defineProperty({__proto__:null,Decoder:z4,Encoder:$ut,get PacketType(){return Zt},protocol:Nut},Symbol.toStringTag,{value:"Module"}));function il(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const But=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Bce extends Gr{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[il(e,"open",this.onopen.bind(this)),il(e,"packet",this.onpacket.bind(this)),il(e,"error",this.onerror.bind(this)),il(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){if(But.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const r={type:Zt.EVENT,data:n};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const s=this.ids++,a=n.pop();this._registerAckCallback(s,a),r.id=s}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},i),s=(...a)=>{this.io.clearTimeoutFn(o),n.apply(this,a)};s.withError=!0,this.acks[e]=s}emitWithAck(e,...n){return new Promise((r,i)=>{const o=(s,a)=>s?i(s):r(a);o.withError=!0,n.push(o),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...o)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...o)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Zt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Zt.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Zt.EVENT:case Zt.BINARY_EVENT:this.onevent(e);break;case Zt.ACK:case Zt.BINARY_ACK:this.onack(e);break;case Zt.DISCONNECT:this.ondisconnect();break;case Zt.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:Zt.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Zt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Zy(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Zy.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Zy.prototype.reset=function(){this.attempts=0};Zy.prototype.setMin=function(t){this.ms=t};Zy.prototype.setMax=function(t){this.max=t};Zy.prototype.setJitter=function(t){this.jitter=t};class n3 extends Gr{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,yO(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Zy({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||Fut;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Lce(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=il(n,"open",function(){r.onopen(),e&&e()}),o=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},s=il(n,"error",o);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{i(),o(new Error("timeout")),n.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(i),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(il(e,"ping",this.onping.bind(this)),il(e,"data",this.ondata.bind(this)),il(e,"error",this.onerror.bind(this)),il(e,"close",this.onclose.bind(this)),il(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){B4(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new Bce(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const rb={};function tx(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=kut(t,e.path||"/socket.io"),r=n.source,i=n.id,o=n.path,s=rb[i]&&o in rb[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||s;let l;return a?l=new n3(r,e):(rb[i]||(rb[i]=new n3(r,e)),l=rb[i]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(tx,{Manager:n3,Socket:Bce,io:tx,connect:tx});tx("http://localhost:5100");function Uut(){const[t,e]=R.useState(""),[n,r]=R.useState(0),[i,o]=R.useState(200),[s,a]=R.useState(null),[l,c]=R.useState(null);R.useEffect(()=>{const f=tx("http://localhost:5100");return f.on("status_update",h=>{e(h)}),f.on("epoch_metrics",h=>{r(h.epoch),a(h.loss),c(h.val_loss)}),()=>f.disconnect()},[]);const u=()=>{Ht.post("http://localhost:5100/start_training").then(f=>{e(f.data.status),f.data.status==="Training started"&&(r(0),a(null),c(null))}).catch(f=>{console.error("Error starting training:",f),e("Error starting training")})},d=()=>n/i*100;return I.jsxs("div",{className:"App",children:[I.jsxs("header",{className:"App-header",children:[I.jsx("h1",{children:"Real-Time Training Metrics"}),I.jsx("button",{className:"btn btn-primary",onClick:u,children:"Start Training"}),I.jsx("p",{children:t})]}),I.jsx("div",{className:"progress my-3",children:I.jsx("div",{className:"progress-bar progress-bar-striped",role:"progressbar",style:{width:`${d()}%`},"aria-valuenow":d(),"aria-valuemin":"0","aria-valuemax":"100"})}),I.jsxs("div",{className:"tfjs",children:[I.jsx("h2",{children:"Training Progress"}),I.jsxs("p",{children:["Epoch: ",n,"/",i]}),I.jsxs("p",{children:["Loss: ",s]}),I.jsxs("p",{children:["Validation Loss: ",l]})]})]})}const zut=[{name:"DiscordAPI",endpoint:"http://localhost:5550/status"},{name:"Discordhealth",endpoint:"http://localhost:5550/health"},{name:"RuneAPI",endpoint:"http://localhost:5540/status"},{name:"Runehealth",endpoint:"http://localhost:5540/health"}],jut=t=>{const e=Math.PI/180,{cx:n,cy:r,midAngle:i,innerRadius:o,outerRadius:s,startAngle:a,endAngle:l,fill:c,payload:u,percent:d,value:f}=t,h=Math.sin(-e*i),g=Math.cos(-e*i),p=n+(s+10)*g,m=r+(s+10)*h,v=n+(s+30)*g,_=r+(s+30)*h,w=v+(g>=0?1:-1)*22,y=_,b=g>=0?"start":"end";return I.jsx(I.Fragment,{children:I.jsxs("g",{children:[I.jsx("text",{x:n,y:r,dy:8,textAnchor:"middle",fill:c,children:u.name}),I.jsx(vf,{cx:n,cy:r,innerRadius:o,outerRadius:s,startAngle:a,endAngle:l,fill:c}),I.jsx(vf,{cx:n,cy:r,startAngle:a,endAngle:l,innerRadius:s+6,outerRadius:s+10,fill:c}),I.jsx("path",{d:`M${p},${m}L${v},${_}L${w},${y}`,stroke:c,fill:"none"}),I.jsx("circle",{cx:w,cy:y,r:2,fill:c,stroke:"none"}),I.jsx("text",{x:w+(g>=0?1:-1)*12,y,textAnchor:b,fill:"#333",children:`PV ${f}`}),I.jsx("text",{x:w+(g>=0?1:-1)*12,y,dy:18,textAnchor:b,fill:"#999",children:`(Rate ${(d*100).toFixed(2)}%)`})]})})};class bO extends R.PureComponent{constructor(){super(...arguments);He(this,"state",{activeIndex:0,data:zut.map((n,r)=>({name:n.name,value:1,fill:"#8884d8",endpoint:n.endpoint,key:r}))});He(this,"checkEndpoints",async()=>{const{data:n}=this.state;for(let r=0;r<n.length;r++)try{await Ht.get(n[r].endpoint),this.updateEndpointStatus(r,!0)}catch{this.updateEndpointStatus(r,!1)}});He(this,"updateEndpointStatus",(n,r)=>{this.setState(i=>{const o=[...i.data];return o[n].fill=r?"#00C49F":"#FF8042",{data:o}})});He(this,"onPieEnter",(n,r)=>{this.setState({activeIndex:r})})}componentDidMount(){this.checkEndpoints(),this.interval=setInterval(this.checkEndpoints,15e3)}componentWillUnmount(){clearInterval(this.interval)}render(){return I.jsx(I.Fragment,{children:I.jsx(As,{width:"100%",height:"100%",children:I.jsx(Sj,{width:200,height:200,children:I.jsx(Dl,{activeIndex:this.state.activeIndex,activeShape:jut,data:this.state.data,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,fill:"#8884d8",dataKey:"value",onMouseEnter:this.onPieEnter})})})})}}He(bO,"demoUrl","https://codesandbox.io/s/pie-chart-with-customized-active-shape-y93si");const $t=WZe({createStyledComponent:qn("div",{name:"MuiGrid2",slot:"Root",overridesResolver:(t,e)=>e.root}),componentName:"MuiGrid2",useThemeProps:t=>Ks({props:t,name:"MuiGrid2"})}),Wut=({data:t,yDomain:e,filteredHistoricalData:n})=>I.jsx("div",{style:{width:"100%",height:"300px"},children:I.jsx(As,{width:"100%",height:"100%",children:I.jsxs(bu,{data:t,margin:{top:10,right:30,left:0,bottom:0},children:[I.jsx(dl,{strokeDasharray:"3 3"}),I.jsx(Ko,{dataKey:"date"}),I.jsx(Yo,{domain:e,tickFormatter:r=>r.toFixed(2)}),I.jsx(si,{}),I.jsx(Nu,{}),I.jsx(Mr,{type:"monotone",dataKey:"prediction",stroke:"#000",fill:"white",name:"Forecasted Price"}),I.jsx(Mr,{type:"monotone",data:n,dataKey:"actual",stroke:"#06f82b",name:"Actual Price"})]})})}),Vut=()=>{const{priceData:t,loading:e}=R.useContext(N4),[n,r]=R.useState([]),[i,o]=R.useState([]),[s,a]=R.useState([]),[l,c]=R.useState(new Date("2024-07-21")),[u,d]=R.useState(!1),[f,h]=R.useState(0),[g,p]=R.useState(""),[m,v]=R.useState([0,10]);R.useEffect(()=>{(async()=>{try{d(!0),h(0),p("Fetching forecast data...");const y=await Ht.get("http://localhost:4650/api5/predictions");y.headers["content-type"].includes("application/json")?(r(y.data),p("Forecast data fetched successfully."),h(100)):console.error("Error: Expected JSON response but got:",y.headers["content-type"])}catch(y){console.error("Error fetching forecast data:",y),p("Error fetching forecast data.")}finally{d(!1)}})()},[]),R.useEffect(()=>{if(l&&n.length>0&&t.length>0){const w=l.toISOString().split("T")[0],y=n.filter(C=>C.dates&&C.dates.some(T=>T.startsWith(w))),b=t.filter(C=>new Date(C.timestamp).toISOString().split("T")[0]===w&&C.rune_name==="BILLION•DOLLAR•CAT").map(C=>({date:C.timestamp,actual:parseFloat(C.price_sats)})),x=y.length>0?_(y[0]):[];o(x),a(b);const S=[...x.map(C=>C.prediction),...b.map(C=>C.actual)];if(S.length>0){const C=Math.min(...S),T=Math.max(...S);v([C-5,T+5])}}else o([]),a([])},[l,n,t]);const _=w=>{const y=w.dates,b=w.predictions.flat();return y.map((x,S)=>({date:x,prediction:b[S]}))};return I.jsxs("div",{children:[I.jsx("h3",{children:"FORECAST DATA / ACTUAL PRICE HISTORY"}),I.jsxs("div",{style:{marginBottom:"20px"},children:[I.jsx("label",{children:"Select Date: "}),I.jsx(P4,{selected:l,onChange:w=>c(w),dateFormat:"yyyy-MM-dd",isClearable:!0,placeholderText:"Select a date"})]}),(u||e)&&I.jsxs(I.Fragment,{children:[I.jsx(j_,{animated:!0,now:f}),I.jsx("p",{children:g})]}),I.jsx(Wut,{data:i,yDomain:m,filteredHistoricalData:s})]})},Hut=R.createContext(),Gut=({children:t})=>{const[e,n]=R.useState([]),[r,i]=R.useState(!0),o=async()=>{try{const a=(await Ht.get("http://localhost:4650/api5/predictions")).data;n(a),localStorage.setItem("forecastData",JSON.stringify(a)),localStorage.setItem("forecastLastFetched",Date.now())}catch(s){console.error("Error fetching forecast data:",s)}finally{i(!1)}};return R.useEffect(()=>{const s=localStorage.getItem("forecastData"),a=localStorage.getItem("forecastLastFetched");if(s&&a){const l=Date.now()-parseInt(a,10),c=12*60*60*1e3;if(l<c){n(JSON.parse(s)),i(!1);return}}o()},[]),I.jsx(Hut.Provider,{value:{ForecastData:e,loading:r},children:t})};qn(om)(({theme:t})=>({backgroundColor:t.palette.mode==="dark"?"#1A2027":"#fff",...t.typography.body2,padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary}));const qut=()=>{const{loading:t,userInfo:e,error:n}=vM(u=>u.auth),r=yM(),{register:i,handleSubmit:o}=Vae(),s=wM();R.useEffect(()=>{e&&s("/forecastpage")},[s,e]);const a=u=>{r(Jh(u))},{loginWithRedirect:l}=Ztt(),c=()=>{l()};return I.jsx(I.Fragment,{children:I.jsx("div",{children:I.jsx("div",{className:"container",children:I.jsx("div",{className:"row",children:I.jsxs("div",{className:"col-md-20 offset-md",children:[I.jsxs(oP,{onSubmit:o(a),children:[n&&I.jsx(AF,{children:n}),I.jsx(Hk,{controlId:"email",label:"Email",children:I.jsx(oP.Control,{type:"email",className:"form-input",...i("email"),required:!0})}),I.jsx(Hk,{controlId:"password",label:"Password",children:I.jsx(oP.Control,{type:"password",className:"form-input",...i("password"),required:!0})}),I.jsx("br",{}),I.jsx(DT,{type:"submit",className:"button",disabled:t,children:t?I.jsx(Hae,{}):"Login"})]}),I.jsx("br",{}),I.jsx(DT,{variant:"primary",onClick:c,children:"Log In with Google"})," "]})})})})})},ti=qn(om)(({theme:t})=>({backgroundColor:t.palette.mode==="dark"?"#1A2027":"#fff",...t.typography.body2,padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary})),Xut=()=>(R.useEffect(()=>{const t=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",t)},[]),I.jsx(I.Fragment,{children:I.jsx(Yy,{sx:{flexGrow:1,padding:{xs:2,sm:4}},children:I.jsxs($t,{container:!0,spacing:4,children:[I.jsx($t,{xs:12,children:I.jsx(ti,{sx:{backgroundColor:"black"}})}),I.jsx($t,{xs:12,children:I.jsx(ti,{sx:{backgroundColor:"black"}})}),I.jsx($t,{xs:12,children:I.jsx(ti,{sx:{backgroundColor:"#1d1d1d"}})}),I.jsx($t,{xs:2,children:I.jsx(ti,{sx:{backgroundColor:"black"}})}),I.jsx($t,{xs:4,children:I.jsx(ti,{style:{color:"white"},sx:{backgroundColor:"black"},children:I.jsx(vot,{})})}),I.jsx($t,{xs:4,children:I.jsx(ti,{style:{color:"white"},sx:{backgroundColor:"black"},children:I.jsx(Xct,{})})}),I.jsx($t,{xs:2,children:I.jsx(ti,{sx:{backgroundColor:"black"}})}),I.jsx($t,{xs:2,children:I.jsx(ti,{sx:{backgroundColor:"black"}})}),I.jsx($t,{xs:8,children:I.jsx(ti,{style:{color:"white"},sx:{backgroundColor:"black"},children:I.jsx(Vut,{})})}),I.jsx($t,{xs:2,children:I.jsx(ti,{sx:{backgroundColor:"black"}})}),I.jsx($t,{xs:2,children:I.jsx(ti,{sx:{backgroundColor:"black"}})}),I.jsx($t,{xs:8,children:I.jsx(ti,{style:{color:"white"},sx:{backgroundColor:"black"}})}),I.jsx($t,{xs:2,children:I.jsx(ti,{sx:{backgroundColor:"black"}})}),I.jsx($t,{xs:2,children:I.jsx(ti,{sx:{backgroundColor:"black"}})}),I.jsx($t,{xs:8,children:I.jsxs(ti,{style:{color:"white"},sx:{backgroundColor:"black"},children:[I.jsx("h1",{children:"On Demand Rune Forecasting"}),I.jsx("h2",{children:"Select a Rune, - Its historical price data is then processed and run through the LSTM Forecasting Model"}),I.jsx("h3",{children:"THIS WILL TAKE ABOUT 5 MINUTES FROM START TO FINISH. PLEASE DO NOT LEAVE THE PAGE OR REFRESH"}),I.jsx(Vle,{})]})}),I.jsx($t,{xs:2,children:I.jsx(ti,{sx:{backgroundColor:"black"}})}),I.jsx($t,{xs:2,children:I.jsx(ti,{sx:{backgroundColor:"black"}})}),I.jsx($t,{xs:2,children:I.jsx(ti,{sx:{backgroundColor:"black"}})}),I.jsx($t,{xs:2,children:I.jsx(ti,{sx:{backgroundColor:"black"}})})]})})})),M7=qn(om)(({theme:t})=>({backgroundColor:t.palette.mode==="dark"?"#1A2027":"#fff",...t.typography.body2,padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary})),Kut=()=>(R.useEffect(()=>{const t=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",t)},[]),I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"threechart",children:[I.jsx(bO,{}),I.jsx(wI,{}),I.jsx(_I,{})]}),I.jsx(Yy,{sx:{flexGrow:1,padding:6},children:I.jsxs($t,{container:!0,spacing:4,children:[I.jsx($t,{xs:12,children:I.jsx(M7,{style:{color:"white"},sx:{backgroundColor:"#1d1d1d"},children:I.jsx(M7,{style:{color:"white"},sx:{backgroundColor:"#1d1d1d",height:"800px"},children:I.jsx(Yct,{})})})}),I.jsx(oO,{style:{position:"sticky"}})]})})]})),I7=qn(om)(({theme:t})=>({backgroundColor:t.palette.mode==="dark"?"#1A2027":"#fff",...t.typography.body2,padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary})),Yut=()=>(R.useEffect(()=>{const t=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",t)},[]),I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"threechart",children:[I.jsx(bO,{}),I.jsx(wI,{}),I.jsx(_I,{})]}),I.jsx(Yy,{sx:{flexGrow:1,padding:6},children:I.jsxs($t,{container:!0,spacing:4,children:[I.jsx($t,{xs:12,children:I.jsx(I7,{style:{color:"white"},sx:{backgroundColor:"#1d1d1d"},children:I.jsx(I7,{style:{color:"white"},sx:{backgroundColor:"#1d1d1d",height:"800px"},children:I.jsx(Vle,{})})})}),I.jsx(oO,{style:{position:"sticky"}})]})})]}));var r3={exports:{}};/*!
 * Materialize v1.0.0 (http://materializecss.com)
 * Copyright 2014-2017 Materialize
 * MIT License (https://raw.githubusercontent.com/Dogfalo/materialize/master/LICENSE)
 */(function(t,e){var n=function p(m,v,_){m===null&&(m=Function.prototype);var w=Object.getOwnPropertyDescriptor(m,v);if(w===void 0){var y=Object.getPrototypeOf(m);return y===null?void 0:p(y,v,_)}else{if("value"in w)return w.value;var b=w.get;return b===void 0?void 0:b.call(_)}},r=function(){function p(m,v){for(var _=0;_<v.length;_++){var w=v[_];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(m,w.key,w)}}return function(m,v,_){return v&&p(m.prototype,v),_&&p(m,_),m}}();function i(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function o(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}function s(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}/*! cash-dom 1.3.5, https://github.com/kenwheeler/cash @license MIT */(function(p){window.cash=p()})(function(){var p=document,m=window,v=Array.prototype,_=v.slice,w=v.filter,y=v.push,b=function(){},x=function(F){return typeof F==typeof b&&F.call},S=function(F){return typeof F=="string"},C=/^#[\w-]*$/,T=/^\.[\w-]*$/,E=/<.+>/,k=/^\w+$/;function A(F,W){W=W||p;var X=T.test(F)?W.getElementsByClassName(F.slice(1)):k.test(F)?W.getElementsByTagName(F):W.querySelectorAll(F);return X}var O;function D(F){if(!O){O=p.implementation.createHTMLDocument(null);var W=O.createElement("base");W.href=p.location.href,O.head.appendChild(W)}return O.body.innerHTML=F,O.body.childNodes}function P(F){p.readyState!=="loading"?F():p.addEventListener("DOMContentLoaded",F)}function N(F,W){if(!F)return this;if(F.cash&&F!==m)return F;var X=F,ae=0,he;if(S(F))X=C.test(F)?p.getElementById(F.slice(1)):E.test(F)?D(F):A(F,W);else if(x(F))return P(F),this;if(!X)return this;if(X.nodeType||X===m)this[0]=X,this.length=1;else for(he=this.length=X.length;ae<he;ae++)this[ae]=X[ae];return this}function U(F,W){return new N(F,W)}var L=U.fn=U.prototype=N.prototype={cash:!0,length:0,push:y,splice:v.splice,map:v.map,init:N};Object.defineProperty(L,"constructor",{value:U}),U.parseHTML=D,U.noop=b,U.isFunction=x,U.isString=S,U.extend=L.extend=function(F){F=F||{};var W=_.call(arguments),X=W.length,ae=1;for(W.length===1&&(F=this,ae=0);ae<X;ae++)if(W[ae])for(var he in W[ae])W[ae].hasOwnProperty(he)&&(F[he]=W[ae][he]);return F};function V(F,W){for(var X=F.length,ae=0;ae<X&&W.call(F[ae],F[ae],ae,F)!==!1;ae++);}function G(F,W){var X=F&&(F.matches||F.webkitMatchesSelector||F.mozMatchesSelector||F.msMatchesSelector||F.oMatchesSelector);return!!X&&X.call(F,W)}function Q(F){return S(F)?G:F.cash?function(W){return F.is(W)}:function(W,X){return W===X}}function te(F){return U(_.call(F).filter(function(W,X,ae){return ae.indexOf(W)===X}))}U.extend({merge:function(F,W){for(var X=+W.length,ae=F.length,he=0;he<X;ae++,he++)F[ae]=W[he];return F.length=ae,F},each:V,matches:G,unique:te,isArray:Array.isArray,isNumeric:function(F){return!isNaN(parseFloat(F))&&isFinite(F)}});var ne=U.uid="_cash"+Date.now();function ee(F){return F[ne]=F[ne]||{}}function re(F,W,X){return ee(F)[W]=X}function se(F,W){var X=ee(F);return X[W]===void 0&&(X[W]=F.dataset?F.dataset[W]:U(F).attr("data-"+W)),X[W]}function me(F,W){var X=ee(F);X?delete X[W]:F.dataset?delete F.dataset[W]:U(F).removeAttr("data-"+name)}L.extend({data:function(F,W){if(S(F))return W===void 0?se(this[0],F):this.each(function(ae){return re(ae,F,W)});for(var X in F)this.data(X,F[X]);return this},removeData:function(F){return this.each(function(W){return me(W,F)})}});var Me=/\S+/g;function de(F){return S(F)&&F.match(Me)}function Ce(F,W){return F.classList?F.classList.contains(W):new RegExp("(^| )"+W+"( |$)","gi").test(F.className)}function Ee(F,W,X){F.classList?F.classList.add(W):X.indexOf(" "+W+" ")&&(F.className+=" "+W)}function q(F,W){F.classList?F.classList.remove(W):F.className=F.className.replace(W,"")}L.extend({addClass:function(F){var W=de(F);return W?this.each(function(X){var ae=" "+X.className+" ";V(W,function(he){Ee(X,he,ae)})}):this},attr:function(F,W){if(F){if(S(F))return W===void 0?this[0]?this[0].getAttribute?this[0].getAttribute(F):this[0][F]:void 0:this.each(function(ae){ae.setAttribute?ae.setAttribute(F,W):ae[F]=W});for(var X in F)this.attr(X,F[X]);return this}},hasClass:function(F){var W=!1,X=de(F);return X&&X.length&&this.each(function(ae){return W=Ce(ae,X[0]),!W}),W},prop:function(F,W){if(S(F))return W===void 0?this[0][F]:this.each(function(ae){ae[F]=W});for(var X in F)this.prop(X,F[X]);return this},removeAttr:function(F){return this.each(function(W){W.removeAttribute?W.removeAttribute(F):delete W[F]})},removeClass:function(F){if(!arguments.length)return this.attr("class","");var W=de(F);return W?this.each(function(X){V(W,function(ae){q(X,ae)})}):this},removeProp:function(F){return this.each(function(W){delete W[F]})},toggleClass:function(F,W){if(W!==void 0)return this[W?"addClass":"removeClass"](F);var X=de(F);return X?this.each(function(ae){var he=" "+ae.className+" ";V(X,function(_e){Ce(ae,_e)?q(ae,_e):Ee(ae,_e,he)})}):this}}),L.extend({add:function(F,W){return te(U.merge(this,U(F,W)))},each:function(F){return V(this,F),this},eq:function(F){return U(this.get(F))},filter:function(F){if(!F)return this;var W=x(F)?F:Q(F);return U(w.call(this,function(X){return W(X,F)}))},first:function(){return this.eq(0)},get:function(F){return F===void 0?_.call(this):F<0?this[F+this.length]:this[F]},index:function(F){var W=F?U(F)[0]:this[0],X=F?this:U(W).parent().children();return _.call(X).indexOf(W)},last:function(){return this.eq(-1)}});var Ve=function(){var F=/(?:^\w|[A-Z]|\b\w)/g,W=/[\s-_]+/g;return function(X){return X.replace(F,function(ae,he){return ae[he===0?"toLowerCase":"toUpperCase"]()}).replace(W,"")}}(),ze=function(){var F={},W=document,X=W.createElement("div"),ae=X.style;return function(he){if(he=Ve(he),F[he])return F[he];var _e=he.charAt(0).toUpperCase()+he.slice(1),Be=["webkit","moz","ms","o"],Xe=(he+" "+Be.join(_e+" ")+_e).split(" ");return V(Xe,function(lt){if(lt in ae)return F[lt]=he=F[he]=lt,!1}),F[he]}}();U.prefixedProp=ze,U.camelCase=Ve,L.extend({css:function(F,W){if(S(F))return F=ze(F),arguments.length>1?this.each(function(ae){return ae.style[F]=W}):m.getComputedStyle(this[0])[F];for(var X in F)this.css(X,F[X]);return this}});function Fe(F,W){return parseInt(m.getComputedStyle(F[0],null)[W],10)||0}V(["Width","Height"],function(F){var W=F.toLowerCase();L[W]=function(){return this[0].getBoundingClientRect()[W]},L["inner"+F]=function(){return this[0]["client"+F]},L["outer"+F]=function(X){return this[0]["offset"+F]+(X?Fe(this,"margin"+(F==="Width"?"Left":"Top"))+Fe(this,"margin"+(F==="Width"?"Right":"Bottom")):0)}});function we(F,W,X){var ae=se(F,"_cashEvents")||re(F,"_cashEvents",{});ae[W]=ae[W]||[],ae[W].push(X),F.addEventListener(W,X)}function Je(F,W,X){var ae=se(F,"_cashEvents"),he=ae&&ae[W],_e;he&&(X?(F.removeEventListener(W,X),_e=he.indexOf(X),_e>=0&&he.splice(_e,1)):(V(he,function(Be){F.removeEventListener(W,Be)}),he=[]))}L.extend({off:function(F,W){return this.each(function(X){return Je(X,F,W)})},on:function(F,W,X,ae){var he;if(!S(F)){for(var _e in F)this.on(_e,W,F[_e]);return this}return x(W)&&(X=W,W=null),F==="ready"?(P(X),this):(W&&(he=X,X=function(Be){for(var Xe=Be.target;!G(Xe,W);){if(Xe===this||Xe===null)return Xe=!1;Xe=Xe.parentNode}Xe&&he.call(Xe,Be)}),this.each(function(Be){var Xe=X;ae&&(Xe=function(){X.apply(this,arguments),Je(Be,F,Xe)}),we(Be,F,Xe)}))},one:function(F,W,X){return this.on(F,W,X,!0)},ready:P,trigger:function(F,W){if(document.createEvent){var X=document.createEvent("HTMLEvents");return X.initEvent(F,!0,!1),X=this.extend(X,W),this.each(function(ae){return ae.dispatchEvent(X)})}}});function Z(F,W){return"&"+encodeURIComponent(F)+"="+encodeURIComponent(W).replace(/%20/g,"+")}function ce(F){var W=[];return V(F.options,function(X){X.selected&&W.push(X.value)}),W.length?W:null}function H(F){var W=F.selectedIndex;return W>=0?F.options[W].value:null}function j(F){var W=F.type;if(!W)return null;switch(W.toLowerCase()){case"select-one":return H(F);case"select-multiple":return ce(F);case"radio":return F.checked?F.value:null;case"checkbox":return F.checked?F.value:null;default:return F.value?F.value:null}}L.extend({serialize:function(){var F="";return V(this[0].elements||this,function(W){if(!(W.disabled||W.tagName==="FIELDSET")){var X=W.name;switch(W.type.toLowerCase()){case"file":case"reset":case"submit":case"button":break;case"select-multiple":var ae=j(W);ae!==null&&V(ae,function(_e){F+=Z(X,_e)});break;default:var he=j(W);he!==null&&(F+=Z(X,he))}}}),F.substr(1)},val:function(F){return F===void 0?j(this[0]):this.each(function(W){return W.value=F})}});function ie(F,W,X){if(X){var ae=F.childNodes[0];F.insertBefore(W,ae)}else F.appendChild(W)}function z(F,W,X){var ae=S(W);if(!ae&&W.length){V(W,function(he){return z(F,he,X)});return}V(F,ae?function(he){return he.insertAdjacentHTML(X?"afterbegin":"beforeend",W)}:function(he,_e){return ie(he,_e===0?W:W.cloneNode(!0),X)})}L.extend({after:function(F){return U(F).insertAfter(this),this},append:function(F){return z(this,F),this},appendTo:function(F){return z(U(F),this),this},before:function(F){return U(F).insertBefore(this),this},clone:function(){return U(this.map(function(F){return F.cloneNode(!0)}))},empty:function(){return this.html(""),this},html:function(F){if(F===void 0)return this[0].innerHTML;var W=F.nodeType?F[0].outerHTML:F;return this.each(function(X){return X.innerHTML=W})},insertAfter:function(F){var W=this;return U(F).each(function(X,ae){var he=X.parentNode,_e=X.nextSibling;W.each(function(Be){he.insertBefore(ae===0?Be:Be.cloneNode(!0),_e)})}),this},insertBefore:function(F){var W=this;return U(F).each(function(X,ae){var he=X.parentNode;W.each(function(_e){he.insertBefore(ae===0?_e:_e.cloneNode(!0),X)})}),this},prepend:function(F){return z(this,F,!0),this},prependTo:function(F){return z(U(F),this,!0),this},remove:function(){return this.each(function(F){if(F.parentNode)return F.parentNode.removeChild(F)})},text:function(F){return F===void 0?this[0].textContent:this.each(function(W){return W.textContent=F})}});var K=p.documentElement;return L.extend({position:function(){var F=this[0];return{left:F.offsetLeft,top:F.offsetTop}},offset:function(){var F=this[0].getBoundingClientRect();return{top:F.top+m.pageYOffset-K.clientTop,left:F.left+m.pageXOffset-K.clientLeft}},offsetParent:function(){return U(this[0].offsetParent)}}),L.extend({children:function(F){var W=[];return this.each(function(X){y.apply(W,X.children)}),W=te(W),F?W.filter(function(X){return G(X,F)}):W},closest:function(F){return!F||this.length<1?U():this.is(F)?this.filter(F):this.parent().closest(F)},is:function(F){if(!F)return!1;var W=!1,X=Q(F);return this.each(function(ae){return W=X(ae,F),!W}),W},find:function(F){if(!F||F.nodeType)return U(F&&this.has(F).length?F:null);var W=[];return this.each(function(X){y.apply(W,A(F,X))}),te(W)},has:function(F){var W=S(F)?function(X){return A(F,X).length!==0}:function(X){return X.contains(F)};return this.filter(W)},next:function(){return U(this[0].nextElementSibling)},not:function(F){if(!F)return this;var W=Q(F);return this.filter(function(X){return!W(X,F)})},parent:function(){var F=[];return this.each(function(W){W&&W.parentNode&&F.push(W.parentNode)}),te(F)},parents:function(F){var W,X=[];return this.each(function(ae){for(W=ae;W&&W.parentNode&&W!==p.body.parentNode;)W=W.parentNode,(!F||F&&G(W,F))&&X.push(W)}),te(X)},prev:function(){return U(this[0].previousElementSibling)},siblings:function(F){var W=this.parent().children(F),X=this[0];return W.filter(function(ae){return ae!==X})}}),U});var a=function(){function p(m,v,_){s(this,p),v instanceof Element||console.error(Error(v+" is not an HTML Element"));var w=m.getInstance(v);w&&w.destroy(),this.el=v,this.$el=cash(v)}return r(p,null,[{key:"init",value:function(v,_,w){var y=null;if(_ instanceof Element)y=new v(_,w);else if(_&&(_.jquery||_.cash||_ instanceof NodeList)){for(var b=[],x=0;x<_.length;x++)b.push(new v(_[x],w));y=b}return y}}]),p}();(function(p){p.Package?M={}:p.M={},M.jQueryLoaded=!!p.jQuery})(window),e.nodeType||(!t.nodeType&&t.exports&&(e=t.exports=M),e.default=M),M.version="1.0.0",M.keys={TAB:9,ENTER:13,ESC:27,ARROW_UP:38,ARROW_DOWN:40},M.tabPressed=!1,M.keyDown=!1;var l=function(p){M.keyDown=!0,(p.which===M.keys.TAB||p.which===M.keys.ARROW_DOWN||p.which===M.keys.ARROW_UP)&&(M.tabPressed=!0)},c=function(p){M.keyDown=!1,(p.which===M.keys.TAB||p.which===M.keys.ARROW_DOWN||p.which===M.keys.ARROW_UP)&&(M.tabPressed=!1)},u=function(p){M.keyDown&&document.body.classList.add("keyboard-focused")},d=function(p){document.body.classList.remove("keyboard-focused")};document.addEventListener("keydown",l,!0),document.addEventListener("keyup",c,!0),document.addEventListener("focus",u,!0),document.addEventListener("blur",d,!0),M.initializeJqueryWrapper=function(p,m,v){jQuery.fn[m]=function(_){if(p.prototype[_]){var w=Array.prototype.slice.call(arguments,1);if(_.slice(0,3)==="get"){var y=this.first()[0][v];return y[_].apply(y,w)}return this.each(function(){var b=this[v];b[_].apply(b,w)})}else if(typeof _=="object"||!_)return p.init(this,arguments[0]),this;jQuery.error("Method "+_+" does not exist on jQuery."+m)}},M.AutoInit=function(p){var m=p||document.body,v={Autocomplete:m.querySelectorAll(".autocomplete:not(.no-autoinit)"),Carousel:m.querySelectorAll(".carousel:not(.no-autoinit)"),Chips:m.querySelectorAll(".chips:not(.no-autoinit)"),Collapsible:m.querySelectorAll(".collapsible:not(.no-autoinit)"),Datepicker:m.querySelectorAll(".datepicker:not(.no-autoinit)"),Dropdown:m.querySelectorAll(".dropdown-trigger:not(.no-autoinit)"),Materialbox:m.querySelectorAll(".materialboxed:not(.no-autoinit)"),Modal:m.querySelectorAll(".modal:not(.no-autoinit)"),Parallax:m.querySelectorAll(".parallax:not(.no-autoinit)"),Pushpin:m.querySelectorAll(".pushpin:not(.no-autoinit)"),ScrollSpy:m.querySelectorAll(".scrollspy:not(.no-autoinit)"),FormSelect:m.querySelectorAll("select:not(.no-autoinit)"),Sidenav:m.querySelectorAll(".sidenav:not(.no-autoinit)"),Tabs:m.querySelectorAll(".tabs:not(.no-autoinit)"),TapTarget:m.querySelectorAll(".tap-target:not(.no-autoinit)"),Timepicker:m.querySelectorAll(".timepicker:not(.no-autoinit)"),Tooltip:m.querySelectorAll(".tooltipped:not(.no-autoinit)"),FloatingActionButton:m.querySelectorAll(".fixed-action-btn:not(.no-autoinit)")};for(var _ in v){var w=M[_];w.init(v[_])}},M.objectSelectorString=function(p){var m=p.prop("tagName")||"",v=p.attr("id")||"",_=p.attr("class")||"";return(m+v+_).replace(/\s/g,"")},M.guid=function(){function p(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return function(){return p()+p()+"-"+p()+"-"+p()+"-"+p()+"-"+p()+p()+p()}}(),M.escapeHash=function(p){return p.replace(/(:|\.|\[|\]|,|=|\/)/g,"\\$1")},M.elementOrParentIsFixed=function(p){var m=$(p),v=m.add(m.parents()),_=!1;return v.each(function(){if($(this).css("position")==="fixed")return _=!0,!1}),_},M.checkWithinContainer=function(p,m,v){var _={top:!1,right:!1,bottom:!1,left:!1},w=p.getBoundingClientRect(),y=p===document.body?Math.max(w.bottom,window.innerHeight):w.bottom,b=p.scrollLeft,x=p.scrollTop,S=m.left-b,C=m.top-x;return(S<w.left+v||S<v)&&(_.left=!0),(S+m.width>w.right-v||S+m.width>window.innerWidth-v)&&(_.right=!0),(C<w.top+v||C<v)&&(_.top=!0),(C+m.height>y-v||C+m.height>window.innerHeight-v)&&(_.bottom=!0),_},M.checkPossibleAlignments=function(p,m,v,_){var w={top:!0,right:!0,bottom:!0,left:!0,spaceOnTop:null,spaceOnRight:null,spaceOnBottom:null,spaceOnLeft:null},y=getComputedStyle(m).overflow==="visible",b=m.getBoundingClientRect(),x=Math.min(b.height,window.innerHeight),S=Math.min(b.width,window.innerWidth),C=p.getBoundingClientRect(),T=m.scrollLeft,E=m.scrollTop,k=v.left-T,A=v.top-E,O=v.top+C.height-E;return w.spaceOnRight=y?window.innerWidth-(C.left+v.width):S-(k+v.width),w.spaceOnRight<0&&(w.left=!1),w.spaceOnLeft=y?C.right-v.width:k-v.width+C.width,w.spaceOnLeft<0&&(w.right=!1),w.spaceOnBottom=y?window.innerHeight-(C.top+v.height+_):x-(A+v.height+_),w.spaceOnBottom<0&&(w.top=!1),w.spaceOnTop=y?C.bottom-(v.height+_):O-(v.height-_),w.spaceOnTop<0&&(w.bottom=!1),w},M.getOverflowParent=function(p){return p==null?null:p===document.body||getComputedStyle(p).overflow!=="visible"?p:M.getOverflowParent(p.parentElement)},M.getIdFromTrigger=function(p){var m=p.getAttribute("data-target");return m||(m=p.getAttribute("href"),m?m=m.slice(1):m=""),m},M.getDocumentScrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},M.getDocumentScrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};/**
 * Get time in ms
 * @license https://raw.github.com/jashkenas/underscore/master/LICENSE
 * @type {function}
 * @return {number}
 */var f=Date.now||function(){return new Date().getTime()};/**
 * Returns a function, that, when invoked, will only be triggered at most once
 * during a given window of time. Normally, the throttled function will run
 * as much as it can, without ever going more than once per `wait` duration;
 * but if you'd like to disable the execution on the leading edge, pass
 * `{leading: false}`. To disable execution on the trailing edge, ditto.
 * @license https://raw.github.com/jashkenas/underscore/master/LICENSE
 * @param {function} func
 * @param {number} wait
 * @param {Object=} options
 * @returns {Function}
 */M.throttle=function(p,m,v){var _=void 0,w=void 0,y=void 0,b=null,x=0;v||(v={});var S=function(){x=v.leading===!1?0:f(),b=null,y=p.apply(_,w),_=w=null};return function(){var C=f();!x&&v.leading===!1&&(x=C);var T=m-(C-x);return _=this,w=arguments,T<=0?(clearTimeout(b),b=null,x=C,y=p.apply(_,w),_=w=null):!b&&v.trailing!==!1&&(b=setTimeout(S,T)),y}};var h={scope:{}};h.defineProperty=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,m,v){if(v.get||v.set)throw new TypeError("ES3 does not support getters and setters.");p!=Array.prototype&&p!=Object.prototype&&(p[m]=v.value)},h.getGlobal=function(p){return typeof window<"u"&&window===p?p:typeof co<"u"&&co!=null?co:p},h.global=h.getGlobal(co),h.SYMBOL_PREFIX="jscomp_symbol_",h.initSymbol=function(){h.initSymbol=function(){},h.global.Symbol||(h.global.Symbol=h.Symbol)},h.symbolCounter_=0,h.Symbol=function(p){return h.SYMBOL_PREFIX+(p||"")+h.symbolCounter_++},h.initSymbolIterator=function(){h.initSymbol();var p=h.global.Symbol.iterator;p||(p=h.global.Symbol.iterator=h.global.Symbol("iterator")),typeof Array.prototype[p]!="function"&&h.defineProperty(Array.prototype,p,{configurable:!0,writable:!0,value:function(){return h.arrayIterator(this)}}),h.initSymbolIterator=function(){}},h.arrayIterator=function(p){var m=0;return h.iteratorPrototype(function(){return m<p.length?{done:!1,value:p[m++]}:{done:!0}})},h.iteratorPrototype=function(p){return h.initSymbolIterator(),p={next:p},p[h.global.Symbol.iterator]=function(){return this},p},h.array=h.array||{},h.iteratorFromArray=function(p,m){h.initSymbolIterator(),p instanceof String&&(p+="");var v=0,_={next:function(){if(v<p.length){var w=v++;return{value:m(w,p[w]),done:!1}}return _.next=function(){return{done:!0,value:void 0}},_.next()}};return _[Symbol.iterator]=function(){return _},_},h.polyfill=function(p,m,v,_){if(m){for(v=h.global,p=p.split("."),_=0;_<p.length-1;_++){var w=p[_];w in v||(v[w]={}),v=v[w]}p=p[p.length-1],_=v[p],m=m(_),m!=_&&m!=null&&h.defineProperty(v,p,{configurable:!0,writable:!0,value:m})}},h.polyfill("Array.prototype.keys",function(p){return p||function(){return h.iteratorFromArray(this,function(m){return m})}},"es6-impl","es3");var g=co;(function(p){M.anime=p()})(function(){function p(z){if(!we.col(z))try{return document.querySelectorAll(z)}catch{}}function m(z,K){for(var F=z.length,W=2<=arguments.length?arguments[1]:void 0,X=[],ae=0;ae<F;ae++)if(ae in z){var he=z[ae];K.call(W,he,ae,z)&&X.push(he)}return X}function v(z){return z.reduce(function(K,F){return K.concat(we.arr(F)?v(F):F)},[])}function _(z){return we.arr(z)?z:(we.str(z)&&(z=p(z)||z),z instanceof NodeList||z instanceof HTMLCollection?[].slice.call(z):[z])}function w(z,K){return z.some(function(F){return F===K})}function y(z){var K={},F;for(F in z)K[F]=z[F];return K}function b(z,K){var F=y(z),W;for(W in z)F[W]=K.hasOwnProperty(W)?K[W]:z[W];return F}function x(z,K){var F=y(z),W;for(W in K)F[W]=we.und(z[W])?K[W]:z[W];return F}function S(z){z=z.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(W,X,ae,he){return X+X+ae+ae+he+he});var F=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(z);z=parseInt(F[1],16);var K=parseInt(F[2],16),F=parseInt(F[3],16);return"rgba("+z+","+K+","+F+",1)"}function C(z){function K(_e,Be,Xe){return 0>Xe&&(Xe+=1),1<Xe&&--Xe,Xe<1/6?_e+6*(Be-_e)*Xe:.5>Xe?Be:Xe<2/3?_e+(Be-_e)*(2/3-Xe)*6:_e}var X=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(z)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(z);z=parseInt(X[1])/360;var F=parseInt(X[2])/100,W=parseInt(X[3])/100,X=X[4]||1;if(F==0)W=F=z=W;else{var ae=.5>W?W*(1+F):W+F-W*F,he=2*W-ae,W=K(he,ae,z+1/3),F=K(he,ae,z);z=K(he,ae,z-1/3)}return"rgba("+255*W+","+255*F+","+255*z+","+X+")"}function T(z){if(z=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(z))return z[2]}function E(z){if(-1<z.indexOf("translate")||z==="perspective")return"px";if(-1<z.indexOf("rotate")||-1<z.indexOf("skew"))return"deg"}function k(z,K){return we.fnc(z)?z(K.target,K.id,K.total):z}function A(z,K){if(K in z.style)return getComputedStyle(z).getPropertyValue(K.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function O(z,K){if(we.dom(z)&&w(ze,K))return"transform";if(we.dom(z)&&(z.getAttribute(K)||we.svg(z)&&z[K]))return"attribute";if(we.dom(z)&&K!=="transform"&&A(z,K))return"css";if(z[K]!=null)return"object"}function D(z,K){var F=E(K),F=-1<K.indexOf("scale")?1:0+F;if(z=z.style.transform,!z)return F;for(var W=[],X=[],ae=[],he=/(\w+)\((.+?)\)/g;W=he.exec(z);)X.push(W[1]),ae.push(W[2]);return z=m(ae,function(_e,Be){return X[Be]===K}),z.length?z[0]:F}function P(z,K){switch(O(z,K)){case"transform":return D(z,K);case"css":return A(z,K);case"attribute":return z.getAttribute(K)}return z[K]||0}function N(z,K){var F=/^(\*=|\+=|-=)/.exec(z);if(!F)return z;var W=T(z)||0;switch(K=parseFloat(K),z=parseFloat(z.replace(F[0],"")),F[0][0]){case"+":return K+z+W;case"-":return K-z+W;case"*":return K*z+W}}function U(z,K){return Math.sqrt(Math.pow(K.x-z.x,2)+Math.pow(K.y-z.y,2))}function L(z){z=z.points;for(var K=0,F,W=0;W<z.numberOfItems;W++){var X=z.getItem(W);0<W&&(K+=U(F,X)),F=X}return K}function V(z){if(z.getTotalLength)return z.getTotalLength();switch(z.tagName.toLowerCase()){case"circle":return 2*Math.PI*z.getAttribute("r");case"rect":return 2*z.getAttribute("width")+2*z.getAttribute("height");case"line":return U({x:z.getAttribute("x1"),y:z.getAttribute("y1")},{x:z.getAttribute("x2"),y:z.getAttribute("y2")});case"polyline":return L(z);case"polygon":var K=z.points;return L(z)+U(K.getItem(K.numberOfItems-1),K.getItem(0))}}function G(z,K){function F(he){return he=he===void 0?0:he,z.el.getPointAtLength(1<=K+he?K+he:0)}var W=F(),X=F(-1),ae=F(1);switch(z.property){case"x":return W.x;case"y":return W.y;case"angle":return 180*Math.atan2(ae.y-X.y,ae.x-X.x)/Math.PI}}function Q(z,K){var F=/-?\d*\.?\d+/g,W;if(W=we.pth(z)?z.totalLength:z,we.col(W))if(we.rgb(W)){var X=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(W);W=X?"rgba("+X[1]+",1)":W}else W=we.hex(W)?S(W):we.hsl(W)?C(W):void 0;else X=(X=T(W))?W.substr(0,W.length-X.length):W,W=K&&!/\s/g.test(W)?X+K:X;return W+="",{original:W,numbers:W.match(F)?W.match(F).map(Number):[0],strings:we.str(z)||K?W.split(F):[]}}function te(z){return z=z?v(we.arr(z)?z.map(_):_(z)):[],m(z,function(K,F,W){return W.indexOf(K)===F})}function ne(z){var K=te(z);return K.map(function(F,W){return{target:F,id:W,total:K.length}})}function ee(z,K){var F=y(K);if(we.arr(z)){var W=z.length;W!==2||we.obj(z[0])?we.fnc(K.duration)||(F.duration=K.duration/W):z={value:z}}return _(z).map(function(X,ae){return ae=ae?0:K.delay,X=we.obj(X)&&!we.pth(X)?X:{value:X},we.und(X.delay)&&(X.delay=ae),X}).map(function(X){return x(X,F)})}function re(z,K){var F={},W;for(W in z){var X=k(z[W],K);we.arr(X)&&(X=X.map(function(ae){return k(ae,K)}),X.length===1&&(X=X[0])),F[W]=X}return F.duration=parseFloat(F.duration),F.delay=parseFloat(F.delay),F}function se(z){return we.arr(z)?Je.apply(this,z):Z[z]}function me(z,K){var F;return z.tweens.map(function(W){W=re(W,K);var X=W.value,_e=P(K.target,z.name),ae=F?F.to.original:_e,ae=we.arr(X)?X[0]:ae,he=N(we.arr(X)?X[1]:X,ae),_e=T(he)||T(ae)||T(_e);return W.from=Q(ae,_e),W.to=Q(he,_e),W.start=F?F.end:z.offset,W.end=W.start+W.delay+W.duration,W.easing=se(W.easing),W.elasticity=(1e3-Math.min(Math.max(W.elasticity,1),999))/1e3,W.isPath=we.pth(X),W.isColor=we.col(W.from.original),W.isColor&&(W.round=1),F=W})}function Me(z,K){return m(v(z.map(function(F){return K.map(function(W){var X=O(F.target,W.name);if(X){var ae=me(W,F);W={type:X,property:W.name,animatable:F,tweens:ae,duration:ae[ae.length-1].end,delay:ae[0].delay}}else W=void 0;return W})})),function(F){return!we.und(F)})}function de(z,K,F,W){var X=z==="delay";return K.length?(X?Math.min:Math.max).apply(Math,K.map(function(ae){return ae[z]})):X?W.delay:F.offset+W.delay+W.duration}function Ce(z){var K=b(q,z),F=b(Ve,z),W=ne(z.targets),X=[],ae=x(K,F),he;for(he in z)ae.hasOwnProperty(he)||he==="targets"||X.push({name:he,offset:ae.offset,tweens:ee(z[he],F)});return z=Me(W,X),x(K,{children:[],animatables:W,animations:z,duration:de("duration",z,K,F),delay:de("delay",z,K,F)})}function Ee(z){function K(){return window.Promise&&new Promise(function(Ue){return lt=Ue})}function F(Ue){return ye.reversed?ye.duration-Ue:Ue}function W(Ue){for(var ut=0,le={},je=ye.animations,Ne=je.length;ut<Ne;){var $e=je[ut],qe=$e.animatable,ct=$e.tweens,It=ct.length-1,Ft=ct[It];It&&(Ft=m(ct,function(y0){return Ue<y0.end})[0]||Ft);for(var ct=Math.min(Math.max(Ue-Ft.start-Ft.delay,0),Ft.duration)/Ft.duration,Xn=isNaN(ct)?1:Ft.easing(ct,Ft.elasticity),ct=Ft.to.strings,Kt=Ft.round,It=[],ei=void 0,ei=Ft.to.numbers.length,Br=0;Br<ei;Br++){var yo=void 0,yo=Ft.to.numbers[Br],v0=Ft.from.numbers[Br],yo=Ft.isPath?G(Ft.value,Xn*yo):v0+Xn*(yo-v0);Kt&&(Ft.isColor&&2<Br||(yo=Math.round(yo*Kt)/Kt)),It.push(yo)}if(Ft=ct.length)for(ei=ct[0],Xn=0;Xn<Ft;Xn++)Kt=ct[Xn+1],Br=It[Xn],isNaN(Br)||(ei=Kt?ei+(Br+Kt):ei+(Br+" "));else ei=It[0];ce[$e.type](qe.target,$e.property,ei,le,qe.id),$e.currentValue=ei,ut++}if(ut=Object.keys(le).length)for(je=0;je<ut;je++)Fe||(Fe=A(document.body,"transform")?"transform":"-webkit-transform"),ye.animatables[je].target.style[Fe]=le[je].join(" ");ye.currentTime=Ue,ye.progress=Ue/ye.duration*100}function X(Ue){ye[Ue]&&ye[Ue](ye)}function ae(){ye.remaining&&ye.remaining!==!0&&ye.remaining--}function he(Ue){var ut=ye.duration,le=ye.offset,je=le+ye.delay,Ne=ye.currentTime,$e=ye.reversed,qe=F(Ue);if(ye.children.length){var ct=ye.children,It=ct.length;if(qe>=ye.currentTime)for(var Ft=0;Ft<It;Ft++)ct[Ft].seek(qe);else for(;It--;)ct[It].seek(qe)}(qe>=je||!ut)&&(ye.began||(ye.began=!0,X("begin")),X("run")),qe>le&&qe<ut?W(qe):(qe<=le&&Ne!==0&&(W(0),$e&&ae()),(qe>=ut&&Ne!==ut||!ut)&&(W(ut),$e||ae())),X("update"),Ue>=ut&&(ye.remaining?(Be=_e,ye.direction==="alternate"&&(ye.reversed=!ye.reversed)):(ye.pause(),ye.completed||(ye.completed=!0,X("complete"),"Promise"in window&&(lt(),tt=K()))),Xe=0)}z=z===void 0?{}:z;var _e,Be,Xe=0,lt=null,tt=K(),ye=Ce(z);return ye.reset=function(){var Ue=ye.direction,ut=ye.loop;for(ye.currentTime=0,ye.progress=0,ye.paused=!0,ye.began=!1,ye.completed=!1,ye.reversed=Ue==="reverse",ye.remaining=Ue==="alternate"&&ut===1?2:ut,W(0),Ue=ye.children.length;Ue--;)ye.children[Ue].reset()},ye.tick=function(Ue){_e=Ue,Be||(Be=_e),he((Xe+_e-Be)*Ee.speed)},ye.seek=function(Ue){he(F(Ue))},ye.pause=function(){var Ue=H.indexOf(ye);-1<Ue&&H.splice(Ue,1),ye.paused=!0},ye.play=function(){ye.paused&&(ye.paused=!1,Be=0,Xe=F(ye.currentTime),H.push(ye),j||ie())},ye.reverse=function(){ye.reversed=!ye.reversed,Be=0,Xe=F(ye.currentTime)},ye.restart=function(){ye.pause(),ye.reset(),ye.play()},ye.finished=tt,ye.reset(),ye.autoplay&&ye.play(),ye}var q={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,offset:0},Ve={duration:1e3,delay:0,easing:"easeOutElastic",elasticity:500,round:0},ze="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY perspective".split(" "),Fe,we={arr:function(z){return Array.isArray(z)},obj:function(z){return-1<Object.prototype.toString.call(z).indexOf("Object")},pth:function(z){return we.obj(z)&&z.hasOwnProperty("totalLength")},svg:function(z){return z instanceof SVGElement},dom:function(z){return z.nodeType||we.svg(z)},str:function(z){return typeof z=="string"},fnc:function(z){return typeof z=="function"},und:function(z){return typeof z>"u"},hex:function(z){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(z)},rgb:function(z){return/^rgb/.test(z)},hsl:function(z){return/^hsl/.test(z)},col:function(z){return we.hex(z)||we.rgb(z)||we.hsl(z)}},Je=function(){function z(K,F,W){return(((1-3*W+3*F)*K+(3*W-6*F))*K+3*F)*K}return function(K,F,W,X){if(0<=K&&1>=K&&0<=W&&1>=W){var ae=new Float32Array(11);if(K!==F||W!==X)for(var he=0;11>he;++he)ae[he]=z(.1*he,K,W);return function(_e){if(K===F&&W===X)return _e;if(_e===0)return 0;if(_e===1)return 1;for(var Be=0,Xe=1;Xe!==10&&ae[Xe]<=_e;++Xe)Be+=.1;--Xe;var Xe=Be+(_e-ae[Xe])/(ae[Xe+1]-ae[Xe])*.1,lt=3*(1-3*W+3*K)*Xe*Xe+2*(3*W-6*K)*Xe+3*K;if(.001<=lt){for(Be=0;4>Be&&(lt=3*(1-3*W+3*K)*Xe*Xe+2*(3*W-6*K)*Xe+3*K,lt!==0);++Be)var tt=z(Xe,K,W)-_e,Xe=Xe-tt/lt;_e=Xe}else if(lt===0)_e=Xe;else{var Xe=Be,Be=Be+.1,ye=0;do tt=Xe+(Be-Xe)/2,lt=z(tt,K,W)-_e,0<lt?Be=tt:Xe=tt;while(1e-7<Math.abs(lt)&&10>++ye);_e=tt}return z(_e,F,X)}}}}(),Z=function(){function z(he,_e){return he===0||he===1?he:-Math.pow(2,10*(he-1))*Math.sin(2*(he-1-_e/(2*Math.PI)*Math.asin(1))*Math.PI/_e)}var K="Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),F={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],z],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(he,_e){return 1-z(1-he,_e)}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(he,_e){return .5>he?z(2*he,_e)/2:1-z(-2*he+2,_e)/2}]},W={linear:Je(.25,.25,.75,.75)},X={},ae;for(ae in F)X.type=ae,F[X.type].forEach(function(he){return function(_e,Be){W["ease"+he.type+K[Be]]=we.fnc(_e)?_e:Je.apply(g,_e)}}(X)),X={type:X.type};return W}(),ce={css:function(z,K,F){return z.style[K]=F},attribute:function(z,K,F){return z.setAttribute(K,F)},object:function(z,K,F){return z[K]=F},transform:function(z,K,F,W,X){W[X]||(W[X]=[]),W[X].push(K+"("+F+")")}},H=[],j=0,ie=function(){function z(){j=requestAnimationFrame(K)}function K(F){var W=H.length;if(W){for(var X=0;X<W;)H[X]&&H[X].tick(F),X++;z()}else cancelAnimationFrame(j),j=0}return z}();return Ee.version="2.2.0",Ee.speed=1,Ee.running=H,Ee.remove=function(z){z=te(z);for(var K=H.length;K--;)for(var F=H[K],W=F.animations,X=W.length;X--;)w(z,W[X].animatable.target)&&(W.splice(X,1),W.length||F.pause())},Ee.getValue=P,Ee.path=function(z,K){var F=we.str(z)?p(z)[0]:z,W=K||100;return function(X){return{el:F,property:X,totalLength:V(F)*(W/100)}}},Ee.setDashoffset=function(z){var K=V(z);return z.setAttribute("stroke-dasharray",K),K},Ee.bezier=Je,Ee.easings=Z,Ee.timeline=function(z){var K=Ee(z);return K.pause(),K.duration=0,K.add=function(F){return K.children.forEach(function(W){W.began=!0,W.completed=!0}),_(F).forEach(function(W){var X=x(W,b(Ve,z||{}));X.targets=X.targets||z.targets,W=K.duration;var ae=X.offset;X.autoplay=!1,X.direction=K.direction,X.offset=we.und(ae)?W:N(ae,W),K.began=!0,K.completed=!0,K.seek(X.offset),X=Ee(X),X.began=!0,X.completed=!0,X.duration>W&&(K.duration=X.duration),K.children.push(X)}),K.seek(0),K.reset(),K.autoplay&&K.restart(),K},K},Ee.random=function(z,K){return Math.floor(Math.random()*(K-z+1))+z},Ee}),function(p,m){var v={accordion:!0,onOpenStart:void 0,onOpenEnd:void 0,onCloseStart:void 0,onCloseEnd:void 0,inDuration:300,outDuration:300},_=function(w){o(y,w);function y(b,x){s(this,y);var S=i(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,y,b,x));S.el.M_Collapsible=S,S.options=p.extend({},y.defaults,x),S.$headers=S.$el.children("li").children(".collapsible-header"),S.$headers.attr("tabindex",0),S._setupEventHandlers();var C=S.$el.children("li.active").children(".collapsible-body");return S.options.accordion?C.first().css("display","block"):C.css("display","block"),S}return r(y,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Collapsible=void 0}},{key:"_setupEventHandlers",value:function(){var x=this;this._handleCollapsibleClickBound=this._handleCollapsibleClick.bind(this),this._handleCollapsibleKeydownBound=this._handleCollapsibleKeydown.bind(this),this.el.addEventListener("click",this._handleCollapsibleClickBound),this.$headers.each(function(S){S.addEventListener("keydown",x._handleCollapsibleKeydownBound)})}},{key:"_removeEventHandlers",value:function(){var x=this;this.el.removeEventListener("click",this._handleCollapsibleClickBound),this.$headers.each(function(S){S.removeEventListener("keydown",x._handleCollapsibleKeydownBound)})}},{key:"_handleCollapsibleClick",value:function(x){var S=p(x.target).closest(".collapsible-header");if(x.target&&S.length){var C=S.closest(".collapsible");if(C[0]===this.el){var T=S.closest("li"),E=C.children("li"),k=T[0].classList.contains("active"),A=E.index(T);k?this.close(A):this.open(A)}}}},{key:"_handleCollapsibleKeydown",value:function(x){x.keyCode===13&&this._handleCollapsibleClickBound(x)}},{key:"_animateIn",value:function(x){var S=this,C=this.$el.children("li").eq(x);if(C.length){var T=C.children(".collapsible-body");m.remove(T[0]),T.css({display:"block",overflow:"hidden",height:0,paddingTop:"",paddingBottom:""});var E=T.css("padding-top"),k=T.css("padding-bottom"),A=T[0].scrollHeight;T.css({paddingTop:0,paddingBottom:0}),m({targets:T[0],height:A,paddingTop:E,paddingBottom:k,duration:this.options.inDuration,easing:"easeInOutCubic",complete:function(O){T.css({overflow:"",paddingTop:"",paddingBottom:"",height:""}),typeof S.options.onOpenEnd=="function"&&S.options.onOpenEnd.call(S,C[0])}})}}},{key:"_animateOut",value:function(x){var S=this,C=this.$el.children("li").eq(x);if(C.length){var T=C.children(".collapsible-body");m.remove(T[0]),T.css("overflow","hidden"),m({targets:T[0],height:0,paddingTop:0,paddingBottom:0,duration:this.options.outDuration,easing:"easeInOutCubic",complete:function(){T.css({height:"",overflow:"",padding:"",display:""}),typeof S.options.onCloseEnd=="function"&&S.options.onCloseEnd.call(S,C[0])}})}}},{key:"open",value:function(x){var S=this,C=this.$el.children("li").eq(x);if(C.length&&!C[0].classList.contains("active")){if(typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,C[0]),this.options.accordion){var T=this.$el.children("li"),E=this.$el.children("li.active");E.each(function(k){var A=T.index(p(k));S.close(A)})}C[0].classList.add("active"),this._animateIn(x)}}},{key:"close",value:function(x){var S=this.$el.children("li").eq(x);S.length&&S[0].classList.contains("active")&&(typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,S[0]),S[0].classList.remove("active"),this._animateOut(x))}}],[{key:"init",value:function(x,S){return n(y.__proto__||Object.getPrototypeOf(y),"init",this).call(this,this,x,S)}},{key:"getInstance",value:function(x){var S=x.jquery?x[0]:x;return S.M_Collapsible}},{key:"defaults",get:function(){return v}}]),y}(a);M.Collapsible=_,M.jQueryLoaded&&M.initializeJqueryWrapper(_,"collapsible","M_Collapsible")}(cash,M.anime),function(p,m){var v={alignment:"left",autoFocus:!0,constrainWidth:!0,container:null,coverTrigger:!0,closeOnClick:!0,hover:!1,inDuration:150,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onItemClick:null},_=function(w){o(y,w);function y(b,x){s(this,y);var S=i(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,y,b,x));return S.el.M_Dropdown=S,y._dropdowns.push(S),S.id=M.getIdFromTrigger(b),S.dropdownEl=document.getElementById(S.id),S.$dropdownEl=p(S.dropdownEl),S.options=p.extend({},y.defaults,x),S.isOpen=!1,S.isScrollable=!1,S.isTouchMoving=!1,S.focusedIndex=-1,S.filterQuery=[],S.options.container?p(S.options.container).append(S.dropdownEl):S.$el.after(S.dropdownEl),S._makeDropdownFocusable(),S._resetFilterQueryBound=S._resetFilterQuery.bind(S),S._handleDocumentClickBound=S._handleDocumentClick.bind(S),S._handleDocumentTouchmoveBound=S._handleDocumentTouchmove.bind(S),S._handleDropdownClickBound=S._handleDropdownClick.bind(S),S._handleDropdownKeydownBound=S._handleDropdownKeydown.bind(S),S._handleTriggerKeydownBound=S._handleTriggerKeydown.bind(S),S._setupEventHandlers(),S}return r(y,[{key:"destroy",value:function(){this._resetDropdownStyles(),this._removeEventHandlers(),y._dropdowns.splice(y._dropdowns.indexOf(this),1),this.el.M_Dropdown=void 0}},{key:"_setupEventHandlers",value:function(){this.el.addEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.addEventListener("click",this._handleDropdownClickBound),this.options.hover?(this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.addEventListener("mouseleave",this._handleMouseLeaveBound)):(this._handleClickBound=this._handleClick.bind(this),this.el.addEventListener("click",this._handleClickBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.removeEventListener("click",this._handleDropdownClickBound),this.options.hover?(this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.removeEventListener("mouseleave",this._handleMouseLeaveBound)):this.el.removeEventListener("click",this._handleClickBound)}},{key:"_setupTemporaryEventHandlers",value:function(){document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound),document.body.addEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.addEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_removeTemporaryEventHandlers",value:function(){document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound),document.body.removeEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.removeEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_handleClick",value:function(x){x.preventDefault(),this.open()}},{key:"_handleMouseEnter",value:function(){this.open()}},{key:"_handleMouseLeave",value:function(x){var S=x.toElement||x.relatedTarget,C=!!p(S).closest(".dropdown-content").length,T=!1,E=p(S).closest(".dropdown-trigger");E.length&&E[0].M_Dropdown&&E[0].M_Dropdown.isOpen&&(T=!0),!T&&!C&&this.close()}},{key:"_handleDocumentClick",value:function(x){var S=this,C=p(x.target);this.options.closeOnClick&&C.closest(".dropdown-content").length&&!this.isTouchMoving?setTimeout(function(){S.close()},0):(C.closest(".dropdown-trigger").length||!C.closest(".dropdown-content").length)&&setTimeout(function(){S.close()},0),this.isTouchMoving=!1}},{key:"_handleTriggerKeydown",value:function(x){(x.which===M.keys.ARROW_DOWN||x.which===M.keys.ENTER)&&!this.isOpen&&(x.preventDefault(),this.open())}},{key:"_handleDocumentTouchmove",value:function(x){var S=p(x.target);S.closest(".dropdown-content").length&&(this.isTouchMoving=!0)}},{key:"_handleDropdownClick",value:function(x){if(typeof this.options.onItemClick=="function"){var S=p(x.target).closest("li")[0];this.options.onItemClick.call(this,S)}}},{key:"_handleDropdownKeydown",value:function(x){if(x.which===M.keys.TAB)x.preventDefault(),this.close();else if((x.which===M.keys.ARROW_DOWN||x.which===M.keys.ARROW_UP)&&this.isOpen){x.preventDefault();var S=x.which===M.keys.ARROW_DOWN?1:-1,C=this.focusedIndex,T=!1;do if(C=C+S,this.dropdownEl.children[C]&&this.dropdownEl.children[C].tabIndex!==-1){T=!0;break}while(C<this.dropdownEl.children.length&&C>=0);T&&(this.focusedIndex=C,this._focusFocusedItem())}else if(x.which===M.keys.ENTER&&this.isOpen){var E=this.dropdownEl.children[this.focusedIndex],k=p(E).find("a, button").first();k.length?k[0].click():E&&E.click()}else x.which===M.keys.ESC&&this.isOpen&&(x.preventDefault(),this.close());var A=String.fromCharCode(x.which).toLowerCase(),O=[9,13,27,38,40];if(A&&O.indexOf(x.which)===-1){this.filterQuery.push(A);var D=this.filterQuery.join(""),P=p(this.dropdownEl).find("li").filter(function(N){return p(N).text().toLowerCase().indexOf(D)===0})[0];P&&(this.focusedIndex=p(P).index(),this._focusFocusedItem())}this.filterTimeout=setTimeout(this._resetFilterQueryBound,1e3)}},{key:"_resetFilterQuery",value:function(){this.filterQuery=[]}},{key:"_resetDropdownStyles",value:function(){this.$dropdownEl.css({display:"",width:"",height:"",left:"",top:"","transform-origin":"",transform:"",opacity:""})}},{key:"_makeDropdownFocusable",value:function(){this.dropdownEl.tabIndex=0,p(this.dropdownEl).children().each(function(x){x.getAttribute("tabindex")||x.setAttribute("tabindex",0)})}},{key:"_focusFocusedItem",value:function(){this.focusedIndex>=0&&this.focusedIndex<this.dropdownEl.children.length&&this.options.autoFocus&&this.dropdownEl.children[this.focusedIndex].focus()}},{key:"_getDropdownPosition",value:function(){this.el.offsetParent.getBoundingClientRect();var x=this.el.getBoundingClientRect(),S=this.dropdownEl.getBoundingClientRect(),C=S.height,T=S.width,E=x.left-S.left,k=x.top-S.top,A={left:E,top:k,height:C,width:T},O=this.dropdownEl.offsetParent?this.dropdownEl.offsetParent:this.dropdownEl.parentNode,D=M.checkPossibleAlignments(this.el,O,A,this.options.coverTrigger?0:x.height),P="top",N=this.options.alignment;if(k+=this.options.coverTrigger?0:x.height,this.isScrollable=!1,D.top||(D.bottom?P="bottom":(this.isScrollable=!0,D.spaceOnTop>D.spaceOnBottom?(P="bottom",C+=D.spaceOnTop,k-=D.spaceOnTop):C+=D.spaceOnBottom)),!D[N]){var U=N==="left"?"right":"left";D[U]?N=U:D.spaceOnLeft>D.spaceOnRight?(N="right",T+=D.spaceOnLeft,E-=D.spaceOnLeft):(N="left",T+=D.spaceOnRight)}return P==="bottom"&&(k=k-S.height+(this.options.coverTrigger?x.height:0)),N==="right"&&(E=E-S.width+x.width),{x:E,y:k,verticalAlignment:P,horizontalAlignment:N,height:C,width:T}}},{key:"_animateIn",value:function(){var x=this;m.remove(this.dropdownEl),m({targets:this.dropdownEl,opacity:{value:[0,1],easing:"easeOutQuad"},scaleX:[.3,1],scaleY:[.3,1],duration:this.options.inDuration,easing:"easeOutQuint",complete:function(S){x.options.autoFocus&&x.dropdownEl.focus(),typeof x.options.onOpenEnd=="function"&&x.options.onOpenEnd.call(x,x.el)}})}},{key:"_animateOut",value:function(){var x=this;m.remove(this.dropdownEl),m({targets:this.dropdownEl,opacity:{value:0,easing:"easeOutQuint"},scaleX:.3,scaleY:.3,duration:this.options.outDuration,easing:"easeOutQuint",complete:function(S){x._resetDropdownStyles(),typeof x.options.onCloseEnd=="function"&&x.options.onCloseEnd.call(x,x.el)}})}},{key:"_placeDropdown",value:function(){var x=this.options.constrainWidth?this.el.getBoundingClientRect().width:this.dropdownEl.getBoundingClientRect().width;this.dropdownEl.style.width=x+"px";var S=this._getDropdownPosition();this.dropdownEl.style.left=S.x+"px",this.dropdownEl.style.top=S.y+"px",this.dropdownEl.style.height=S.height+"px",this.dropdownEl.style.width=S.width+"px",this.dropdownEl.style.transformOrigin=(S.horizontalAlignment==="left"?"0":"100%")+" "+(S.verticalAlignment==="top"?"0":"100%")}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el),this._resetDropdownStyles(),this.dropdownEl.style.display="block",this._placeDropdown(),this._animateIn(),this._setupTemporaryEventHandlers())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.focusedIndex=-1,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),this._animateOut(),this._removeTemporaryEventHandlers(),this.options.autoFocus&&this.el.focus())}},{key:"recalculateDimensions",value:function(){this.isOpen&&(this.$dropdownEl.css({width:"",height:"",left:"",top:"","transform-origin":""}),this._placeDropdown())}}],[{key:"init",value:function(x,S){return n(y.__proto__||Object.getPrototypeOf(y),"init",this).call(this,this,x,S)}},{key:"getInstance",value:function(x){var S=x.jquery?x[0]:x;return S.M_Dropdown}},{key:"defaults",get:function(){return v}}]),y}(a);_._dropdowns=[],M.Dropdown=_,M.jQueryLoaded&&M.initializeJqueryWrapper(_,"dropdown","M_Dropdown")}(cash,M.anime),function(p,m){var v={opacity:.5,inDuration:250,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0,dismissible:!0,startingTop:"4%",endingTop:"10%"},_=function(w){o(y,w);function y(b,x){s(this,y);var S=i(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,y,b,x));return S.el.M_Modal=S,S.options=p.extend({},y.defaults,x),S.isOpen=!1,S.id=S.$el.attr("id"),S._openingTrigger=void 0,S.$overlay=p('<div class="modal-overlay"></div>'),S.el.tabIndex=0,S._nthModalOpened=0,y._count++,S._setupEventHandlers(),S}return r(y,[{key:"destroy",value:function(){y._count--,this._removeEventHandlers(),this.el.removeAttribute("style"),this.$overlay.remove(),this.el.M_Modal=void 0}},{key:"_setupEventHandlers",value:function(){this._handleOverlayClickBound=this._handleOverlayClick.bind(this),this._handleModalCloseClickBound=this._handleModalCloseClick.bind(this),y._count===1&&document.body.addEventListener("click",this._handleTriggerClick),this.$overlay[0].addEventListener("click",this._handleOverlayClickBound),this.el.addEventListener("click",this._handleModalCloseClickBound)}},{key:"_removeEventHandlers",value:function(){y._count===0&&document.body.removeEventListener("click",this._handleTriggerClick),this.$overlay[0].removeEventListener("click",this._handleOverlayClickBound),this.el.removeEventListener("click",this._handleModalCloseClickBound)}},{key:"_handleTriggerClick",value:function(x){var S=p(x.target).closest(".modal-trigger");if(S.length){var C=M.getIdFromTrigger(S[0]),T=document.getElementById(C).M_Modal;T&&T.open(S),x.preventDefault()}}},{key:"_handleOverlayClick",value:function(){this.options.dismissible&&this.close()}},{key:"_handleModalCloseClick",value:function(x){var S=p(x.target).closest(".modal-close");S.length&&this.close()}},{key:"_handleKeydown",value:function(x){x.keyCode===27&&this.options.dismissible&&this.close()}},{key:"_handleFocus",value:function(x){!this.el.contains(x.target)&&this._nthModalOpened===y._modalsOpen&&this.el.focus()}},{key:"_animateIn",value:function(){var x=this;p.extend(this.el.style,{display:"block",opacity:0}),p.extend(this.$overlay[0].style,{display:"block",opacity:0}),m({targets:this.$overlay[0],opacity:this.options.opacity,duration:this.options.inDuration,easing:"easeOutQuad"});var S={targets:this.el,duration:this.options.inDuration,easing:"easeOutCubic",complete:function(){typeof x.options.onOpenEnd=="function"&&x.options.onOpenEnd.call(x,x.el,x._openingTrigger)}};this.el.classList.contains("bottom-sheet")?(p.extend(S,{bottom:0,opacity:1}),m(S)):(p.extend(S,{top:[this.options.startingTop,this.options.endingTop],opacity:1,scaleX:[.8,1],scaleY:[.8,1]}),m(S))}},{key:"_animateOut",value:function(){var x=this;m({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuart"});var S={targets:this.el,duration:this.options.outDuration,easing:"easeOutCubic",complete:function(){x.el.style.display="none",x.$overlay.remove(),typeof x.options.onCloseEnd=="function"&&x.options.onCloseEnd.call(x,x.el)}};this.el.classList.contains("bottom-sheet")?(p.extend(S,{bottom:"-100%",opacity:0}),m(S)):(p.extend(S,{top:[this.options.endingTop,this.options.startingTop],opacity:0,scaleX:.8,scaleY:.8}),m(S))}},{key:"open",value:function(x){if(!this.isOpen)return this.isOpen=!0,y._modalsOpen++,this._nthModalOpened=y._modalsOpen,this.$overlay[0].style.zIndex=1e3+y._modalsOpen*2,this.el.style.zIndex=1e3+y._modalsOpen*2+1,this._openingTrigger=x?x[0]:void 0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el,this._openingTrigger),this.options.preventScrolling&&(document.body.style.overflow="hidden"),this.el.classList.add("open"),this.el.insertAdjacentElement("afterend",this.$overlay[0]),this.options.dismissible&&(this._handleKeydownBound=this._handleKeydown.bind(this),this._handleFocusBound=this._handleFocus.bind(this),document.addEventListener("keydown",this._handleKeydownBound),document.addEventListener("focus",this._handleFocusBound,!0)),m.remove(this.el),m.remove(this.$overlay[0]),this._animateIn(),this.el.focus(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,y._modalsOpen--,this._nthModalOpened=0,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),this.el.classList.remove("open"),y._modalsOpen===0&&(document.body.style.overflow=""),this.options.dismissible&&(document.removeEventListener("keydown",this._handleKeydownBound),document.removeEventListener("focus",this._handleFocusBound,!0)),m.remove(this.el),m.remove(this.$overlay[0]),this._animateOut(),this}}],[{key:"init",value:function(x,S){return n(y.__proto__||Object.getPrototypeOf(y),"init",this).call(this,this,x,S)}},{key:"getInstance",value:function(x){var S=x.jquery?x[0]:x;return S.M_Modal}},{key:"defaults",get:function(){return v}}]),y}(a);_._modalsOpen=0,_._count=0,M.Modal=_,M.jQueryLoaded&&M.initializeJqueryWrapper(_,"modal","M_Modal")}(cash,M.anime),function(p,m){var v={inDuration:275,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null},_=function(w){o(y,w);function y(b,x){s(this,y);var S=i(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,y,b,x));return S.el.M_Materialbox=S,S.options=p.extend({},y.defaults,x),S.overlayActive=!1,S.doneAnimating=!0,S.placeholder=p("<div></div>").addClass("material-placeholder"),S.originalWidth=0,S.originalHeight=0,S.originInlineStyles=S.$el.attr("style"),S.caption=S.el.getAttribute("data-caption")||"",S.$el.before(S.placeholder),S.placeholder.append(S.$el),S._setupEventHandlers(),S}return r(y,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Materialbox=void 0,p(this.placeholder).after(this.el).remove(),this.$el.removeAttr("style")}},{key:"_setupEventHandlers",value:function(){this._handleMaterialboxClickBound=this._handleMaterialboxClick.bind(this),this.el.addEventListener("click",this._handleMaterialboxClickBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleMaterialboxClickBound)}},{key:"_handleMaterialboxClick",value:function(x){this.doneAnimating===!1||this.overlayActive&&this.doneAnimating?this.close():this.open()}},{key:"_handleWindowScroll",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowResize",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowEscape",value:function(x){x.keyCode===27&&this.doneAnimating&&this.overlayActive&&this.close()}},{key:"_makeAncestorsOverflowVisible",value:function(){this.ancestorsChanged=p();for(var x=this.placeholder[0].parentNode;x!==null&&!p(x).is(document);){var S=p(x);S.css("overflow")!=="visible"&&(S.css("overflow","visible"),this.ancestorsChanged===void 0?this.ancestorsChanged=S:this.ancestorsChanged=this.ancestorsChanged.add(S)),x=x.parentNode}}},{key:"_animateImageIn",value:function(){var x=this,S={targets:this.el,height:[this.originalHeight,this.newHeight],width:[this.originalWidth,this.newWidth],left:M.getDocumentScrollLeft()+this.windowWidth/2-this.placeholder.offset().left-this.newWidth/2,top:M.getDocumentScrollTop()+this.windowHeight/2-this.placeholder.offset().top-this.newHeight/2,duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){x.doneAnimating=!0,typeof x.options.onOpenEnd=="function"&&x.options.onOpenEnd.call(x,x.el)}};this.maxWidth=this.$el.css("max-width"),this.maxHeight=this.$el.css("max-height"),this.maxWidth!=="none"&&(S.maxWidth=this.newWidth),this.maxHeight!=="none"&&(S.maxHeight=this.newHeight),m(S)}},{key:"_animateImageOut",value:function(){var x=this,S={targets:this.el,width:this.originalWidth,height:this.originalHeight,left:0,top:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){x.placeholder.css({height:"",width:"",position:"",top:"",left:""}),x.attrWidth&&x.$el.attr("width",x.attrWidth),x.attrHeight&&x.$el.attr("height",x.attrHeight),x.$el.removeAttr("style"),x.originInlineStyles&&x.$el.attr("style",x.originInlineStyles),x.$el.removeClass("active"),x.doneAnimating=!0,x.ancestorsChanged.length&&x.ancestorsChanged.css("overflow",""),typeof x.options.onCloseEnd=="function"&&x.options.onCloseEnd.call(x,x.el)}};m(S)}},{key:"_updateVars",value:function(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.caption=this.el.getAttribute("data-caption")||""}},{key:"open",value:function(){var x=this;this._updateVars(),this.originalWidth=this.el.getBoundingClientRect().width,this.originalHeight=this.el.getBoundingClientRect().height,this.doneAnimating=!1,this.$el.addClass("active"),this.overlayActive=!0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el),this.placeholder.css({width:this.placeholder[0].getBoundingClientRect().width+"px",height:this.placeholder[0].getBoundingClientRect().height+"px",position:"relative",top:0,left:0}),this._makeAncestorsOverflowVisible(),this.$el.css({position:"absolute","z-index":1e3,"will-change":"left, top, width, height"}),this.attrWidth=this.$el.attr("width"),this.attrHeight=this.$el.attr("height"),this.attrWidth&&(this.$el.css("width",this.attrWidth+"px"),this.$el.removeAttr("width")),this.attrHeight&&(this.$el.css("width",this.attrHeight+"px"),this.$el.removeAttr("height")),this.$overlay=p('<div id="materialbox-overlay"></div>').css({opacity:0}).one("click",function(){x.doneAnimating&&x.close()}),this.$el.before(this.$overlay);var S=this.$overlay[0].getBoundingClientRect();this.$overlay.css({width:this.windowWidth+"px",height:this.windowHeight+"px",left:-1*S.left+"px",top:-1*S.top+"px"}),m.remove(this.el),m.remove(this.$overlay[0]),m({targets:this.$overlay[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}),this.caption!==""&&(this.$photocaption&&m.remove(this.$photoCaption[0]),this.$photoCaption=p('<div class="materialbox-caption"></div>'),this.$photoCaption.text(this.caption),p("body").append(this.$photoCaption),this.$photoCaption.css({display:"inline"}),m({targets:this.$photoCaption[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}));var C=0,T=this.originalWidth/this.windowWidth,E=this.originalHeight/this.windowHeight;this.newWidth=0,this.newHeight=0,T>E?(C=this.originalHeight/this.originalWidth,this.newWidth=this.windowWidth*.9,this.newHeight=this.windowWidth*.9*C):(C=this.originalWidth/this.originalHeight,this.newWidth=this.windowHeight*.9*C,this.newHeight=this.windowHeight*.9),this._animateImageIn(),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),this._handleWindowResizeBound=this._handleWindowResize.bind(this),this._handleWindowEscapeBound=this._handleWindowEscape.bind(this),window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleWindowResizeBound),window.addEventListener("keyup",this._handleWindowEscapeBound)}},{key:"close",value:function(){var x=this;this._updateVars(),this.doneAnimating=!1,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),m.remove(this.el),m.remove(this.$overlay[0]),this.caption!==""&&m.remove(this.$photoCaption[0]),window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleWindowResizeBound),window.removeEventListener("keyup",this._handleWindowEscapeBound),m({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){x.overlayActive=!1,x.$overlay.remove()}}),this._animateImageOut(),this.caption!==""&&m({targets:this.$photoCaption[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){x.$photoCaption.remove()}})}}],[{key:"init",value:function(x,S){return n(y.__proto__||Object.getPrototypeOf(y),"init",this).call(this,this,x,S)}},{key:"getInstance",value:function(x){var S=x.jquery?x[0]:x;return S.M_Materialbox}},{key:"defaults",get:function(){return v}}]),y}(a);M.Materialbox=_,M.jQueryLoaded&&M.initializeJqueryWrapper(_,"materialbox","M_Materialbox")}(cash,M.anime),function(p){var m={responsiveThreshold:0},v=function(_){o(w,_);function w(y,b){s(this,w);var x=i(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,w,y,b));return x.el.M_Parallax=x,x.options=p.extend({},w.defaults,b),x._enabled=window.innerWidth>x.options.responsiveThreshold,x.$img=x.$el.find("img").first(),x.$img.each(function(){var S=this;S.complete&&p(S).trigger("load")}),x._updateParallax(),x._setupEventHandlers(),x._setupStyles(),w._parallaxes.push(x),x}return r(w,[{key:"destroy",value:function(){w._parallaxes.splice(w._parallaxes.indexOf(this),1),this.$img[0].style.transform="",this._removeEventHandlers(),this.$el[0].M_Parallax=void 0}},{key:"_setupEventHandlers",value:function(){this._handleImageLoadBound=this._handleImageLoad.bind(this),this.$img[0].addEventListener("load",this._handleImageLoadBound),w._parallaxes.length===0&&(w._handleScrollThrottled=M.throttle(w._handleScroll,5),window.addEventListener("scroll",w._handleScrollThrottled),w._handleWindowResizeThrottled=M.throttle(w._handleWindowResize,5),window.addEventListener("resize",w._handleWindowResizeThrottled))}},{key:"_removeEventHandlers",value:function(){this.$img[0].removeEventListener("load",this._handleImageLoadBound),w._parallaxes.length===0&&(window.removeEventListener("scroll",w._handleScrollThrottled),window.removeEventListener("resize",w._handleWindowResizeThrottled))}},{key:"_setupStyles",value:function(){this.$img[0].style.opacity=1}},{key:"_handleImageLoad",value:function(){this._updateParallax()}},{key:"_updateParallax",value:function(){var b=this.$el.height()>0?this.el.parentNode.offsetHeight:500,x=this.$img[0].offsetHeight,S=x-b,C=this.$el.offset().top+b,T=this.$el.offset().top,E=M.getDocumentScrollTop(),k=window.innerHeight,A=E+k,O=(A-T)/(b+k),D=S*O;this._enabled?C>E&&T<E+k&&(this.$img[0].style.transform="translate3D(-50%, "+D+"px, 0)"):this.$img[0].style.transform=""}}],[{key:"init",value:function(b,x){return n(w.__proto__||Object.getPrototypeOf(w),"init",this).call(this,this,b,x)}},{key:"getInstance",value:function(b){var x=b.jquery?b[0]:b;return x.M_Parallax}},{key:"_handleScroll",value:function(){for(var b=0;b<w._parallaxes.length;b++){var x=w._parallaxes[b];x._updateParallax.call(x)}}},{key:"_handleWindowResize",value:function(){for(var b=0;b<w._parallaxes.length;b++){var x=w._parallaxes[b];x._enabled=window.innerWidth>x.options.responsiveThreshold}}},{key:"defaults",get:function(){return m}}]),w}(a);v._parallaxes=[],M.Parallax=v,M.jQueryLoaded&&M.initializeJqueryWrapper(v,"parallax","M_Parallax")}(cash),function(p,m){var v={duration:300,onShow:null,swipeable:!1,responsiveThreshold:1/0},_=function(w){o(y,w);function y(b,x){s(this,y);var S=i(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,y,b,x));return S.el.M_Tabs=S,S.options=p.extend({},y.defaults,x),S.$tabLinks=S.$el.children("li.tab").children("a"),S.index=0,S._setupActiveTabLink(),S.options.swipeable?S._setupSwipeableTabs():S._setupNormalTabs(),S._setTabsAndTabWidth(),S._createIndicator(),S._setupEventHandlers(),S}return r(y,[{key:"destroy",value:function(){this._removeEventHandlers(),this._indicator.parentNode.removeChild(this._indicator),this.options.swipeable?this._teardownSwipeableTabs():this._teardownNormalTabs(),this.$el[0].M_Tabs=void 0}},{key:"_setupEventHandlers",value:function(){this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound),this._handleTabClickBound=this._handleTabClick.bind(this),this.el.addEventListener("click",this._handleTabClickBound)}},{key:"_removeEventHandlers",value:function(){window.removeEventListener("resize",this._handleWindowResizeBound),this.el.removeEventListener("click",this._handleTabClickBound)}},{key:"_handleWindowResize",value:function(){this._setTabsAndTabWidth(),this.tabWidth!==0&&this.tabsWidth!==0&&(this._indicator.style.left=this._calcLeftPos(this.$activeTabLink)+"px",this._indicator.style.right=this._calcRightPos(this.$activeTabLink)+"px")}},{key:"_handleTabClick",value:function(x){var S=this,C=p(x.target).closest("li.tab"),T=p(x.target).closest("a");if(!(!T.length||!T.parent().hasClass("tab"))){if(C.hasClass("disabled")){x.preventDefault();return}if(!T.attr("target")){this.$activeTabLink.removeClass("active");var E=this.$content;this.$activeTabLink=T,this.$content=p(M.escapeHash(T[0].hash)),this.$tabLinks=this.$el.children("li.tab").children("a"),this.$activeTabLink.addClass("active");var k=this.index;this.index=Math.max(this.$tabLinks.index(T),0),this.options.swipeable?this._tabsCarousel&&this._tabsCarousel.set(this.index,function(){typeof S.options.onShow=="function"&&S.options.onShow.call(S,S.$content[0])}):this.$content.length&&(this.$content[0].style.display="block",this.$content.addClass("active"),typeof this.options.onShow=="function"&&this.options.onShow.call(this,this.$content[0]),E.length&&!E.is(this.$content)&&(E[0].style.display="none",E.removeClass("active"))),this._setTabsAndTabWidth(),this._animateIndicator(k),x.preventDefault()}}}},{key:"_createIndicator",value:function(){var x=this,S=document.createElement("li");S.classList.add("indicator"),this.el.appendChild(S),this._indicator=S,setTimeout(function(){x._indicator.style.left=x._calcLeftPos(x.$activeTabLink)+"px",x._indicator.style.right=x._calcRightPos(x.$activeTabLink)+"px"},0)}},{key:"_setupActiveTabLink",value:function(){this.$activeTabLink=p(this.$tabLinks.filter('[href="'+location.hash+'"]')),this.$activeTabLink.length===0&&(this.$activeTabLink=this.$el.children("li.tab").children("a.active").first()),this.$activeTabLink.length===0&&(this.$activeTabLink=this.$el.children("li.tab").children("a").first()),this.$tabLinks.removeClass("active"),this.$activeTabLink[0].classList.add("active"),this.index=Math.max(this.$tabLinks.index(this.$activeTabLink),0),this.$activeTabLink.length&&(this.$content=p(M.escapeHash(this.$activeTabLink[0].hash)),this.$content.addClass("active"))}},{key:"_setupSwipeableTabs",value:function(){var x=this;window.innerWidth>this.options.responsiveThreshold&&(this.options.swipeable=!1);var S=p();this.$tabLinks.each(function(E){var k=p(M.escapeHash(E.hash));k.addClass("carousel-item"),S=S.add(k)});var C=p('<div class="tabs-content carousel carousel-slider"></div>');S.first().before(C),C.append(S),S[0].style.display="";var T=this.$activeTabLink.closest(".tab").index();this._tabsCarousel=M.Carousel.init(C[0],{fullWidth:!0,noWrap:!0,onCycleTo:function(E){var k=x.index;x.index=p(E).index(),x.$activeTabLink.removeClass("active"),x.$activeTabLink=x.$tabLinks.eq(x.index),x.$activeTabLink.addClass("active"),x._animateIndicator(k),typeof x.options.onShow=="function"&&x.options.onShow.call(x,x.$content[0])}}),this._tabsCarousel.set(T)}},{key:"_teardownSwipeableTabs",value:function(){var x=this._tabsCarousel.$el;this._tabsCarousel.destroy(),x.after(x.children()),x.remove()}},{key:"_setupNormalTabs",value:function(){this.$tabLinks.not(this.$activeTabLink).each(function(x){if(x.hash){var S=p(M.escapeHash(x.hash));S.length&&(S[0].style.display="none")}})}},{key:"_teardownNormalTabs",value:function(){this.$tabLinks.each(function(x){if(x.hash){var S=p(M.escapeHash(x.hash));S.length&&(S[0].style.display="")}})}},{key:"_setTabsAndTabWidth",value:function(){this.tabsWidth=this.$el.width(),this.tabWidth=Math.max(this.tabsWidth,this.el.scrollWidth)/this.$tabLinks.length}},{key:"_calcRightPos",value:function(x){return Math.ceil(this.tabsWidth-x.position().left-x[0].getBoundingClientRect().width)}},{key:"_calcLeftPos",value:function(x){return Math.floor(x.position().left)}},{key:"updateTabIndicator",value:function(){this._setTabsAndTabWidth(),this._animateIndicator(this.index)}},{key:"_animateIndicator",value:function(x){var S=0,C=0;this.index-x>=0?S=90:C=90;var T={targets:this._indicator,left:{value:this._calcLeftPos(this.$activeTabLink),delay:S},right:{value:this._calcRightPos(this.$activeTabLink),delay:C},duration:this.options.duration,easing:"easeOutQuad"};m.remove(this._indicator),m(T)}},{key:"select",value:function(x){var S=this.$tabLinks.filter('[href="#'+x+'"]');S.length&&S.trigger("click")}}],[{key:"init",value:function(x,S){return n(y.__proto__||Object.getPrototypeOf(y),"init",this).call(this,this,x,S)}},{key:"getInstance",value:function(x){var S=x.jquery?x[0]:x;return S.M_Tabs}},{key:"defaults",get:function(){return v}}]),y}(a);M.Tabs=_,M.jQueryLoaded&&M.initializeJqueryWrapper(_,"tabs","M_Tabs")}(cash,M.anime),function(p,m){var v={exitDelay:200,enterDelay:0,html:null,margin:5,inDuration:250,outDuration:200,position:"bottom",transitionMovement:10},_=function(w){o(y,w);function y(b,x){s(this,y);var S=i(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,y,b,x));return S.el.M_Tooltip=S,S.options=p.extend({},y.defaults,x),S.isOpen=!1,S.isHovered=!1,S.isFocused=!1,S._appendTooltipEl(),S._setupEventHandlers(),S}return r(y,[{key:"destroy",value:function(){p(this.tooltipEl).remove(),this._removeEventHandlers(),this.el.M_Tooltip=void 0}},{key:"_appendTooltipEl",value:function(){var x=document.createElement("div");x.classList.add("material-tooltip"),this.tooltipEl=x;var S=document.createElement("div");S.classList.add("tooltip-content"),S.innerHTML=this.options.html,x.appendChild(S),document.body.appendChild(x)}},{key:"_updateTooltipContent",value:function(){this.tooltipEl.querySelector(".tooltip-content").innerHTML=this.options.html}},{key:"_setupEventHandlers",value:function(){this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this._handleFocusBound=this._handleFocus.bind(this),this._handleBlurBound=this._handleBlur.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.el.addEventListener("focus",this._handleFocusBound,!0),this.el.addEventListener("blur",this._handleBlurBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.el.removeEventListener("focus",this._handleFocusBound,!0),this.el.removeEventListener("blur",this._handleBlurBound,!0)}},{key:"open",value:function(x){this.isOpen||(x=x===void 0?!0:void 0,this.isOpen=!0,this.options=p.extend({},this.options,this._getAttributeOptions()),this._updateTooltipContent(),this._setEnterDelayTimeout(x))}},{key:"close",value:function(){this.isOpen&&(this.isHovered=!1,this.isFocused=!1,this.isOpen=!1,this._setExitDelayTimeout())}},{key:"_setExitDelayTimeout",value:function(){var x=this;clearTimeout(this._exitDelayTimeout),this._exitDelayTimeout=setTimeout(function(){x.isHovered||x.isFocused||x._animateOut()},this.options.exitDelay)}},{key:"_setEnterDelayTimeout",value:function(x){var S=this;clearTimeout(this._enterDelayTimeout),this._enterDelayTimeout=setTimeout(function(){!S.isHovered&&!S.isFocused&&!x||S._animateIn()},this.options.enterDelay)}},{key:"_positionTooltip",value:function(){var x=this.el,S=this.tooltipEl,C=x.offsetHeight,T=x.offsetWidth,E=S.offsetHeight,k=S.offsetWidth,A=void 0,O=this.options.margin,D=void 0,P=void 0;this.xMovement=0,this.yMovement=0,D=x.getBoundingClientRect().top+M.getDocumentScrollTop(),P=x.getBoundingClientRect().left+M.getDocumentScrollLeft(),this.options.position==="top"?(D+=-E-O,P+=T/2-k/2,this.yMovement=-this.options.transitionMovement):this.options.position==="right"?(D+=C/2-E/2,P+=T+O,this.xMovement=this.options.transitionMovement):this.options.position==="left"?(D+=C/2-E/2,P+=-k-O,this.xMovement=-this.options.transitionMovement):(D+=C+O,P+=T/2-k/2,this.yMovement=this.options.transitionMovement),A=this._repositionWithinScreen(P,D,k,E),p(S).css({top:A.y+"px",left:A.x+"px"})}},{key:"_repositionWithinScreen",value:function(x,S,C,T){var E=M.getDocumentScrollLeft(),k=M.getDocumentScrollTop(),A=x-E,O=S-k,D={left:A,top:O,width:C,height:T},P=this.options.margin+this.options.transitionMovement,N=M.checkWithinContainer(document.body,D,P);return N.left?A=P:N.right&&(A-=A+C-window.innerWidth),N.top?O=P:N.bottom&&(O-=O+T-window.innerHeight),{x:A+E,y:O+k}}},{key:"_animateIn",value:function(){this._positionTooltip(),this.tooltipEl.style.visibility="visible",m.remove(this.tooltipEl),m({targets:this.tooltipEl,opacity:1,translateX:this.xMovement,translateY:this.yMovement,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_animateOut",value:function(){m.remove(this.tooltipEl),m({targets:this.tooltipEl,opacity:0,translateX:0,translateY:0,duration:this.options.outDuration,easing:"easeOutCubic"})}},{key:"_handleMouseEnter",value:function(){this.isHovered=!0,this.isFocused=!1,this.open(!1)}},{key:"_handleMouseLeave",value:function(){this.isHovered=!1,this.isFocused=!1,this.close()}},{key:"_handleFocus",value:function(){M.tabPressed&&(this.isFocused=!0,this.open(!1))}},{key:"_handleBlur",value:function(){this.isFocused=!1,this.close()}},{key:"_getAttributeOptions",value:function(){var x={},S=this.el.getAttribute("data-tooltip"),C=this.el.getAttribute("data-position");return S&&(x.html=S),C&&(x.position=C),x}}],[{key:"init",value:function(x,S){return n(y.__proto__||Object.getPrototypeOf(y),"init",this).call(this,this,x,S)}},{key:"getInstance",value:function(x){var S=x.jquery?x[0]:x;return S.M_Tooltip}},{key:"defaults",get:function(){return v}}]),y}(a);M.Tooltip=_,M.jQueryLoaded&&M.initializeJqueryWrapper(_,"tooltip","M_Tooltip")}(cash,M.anime),function(p){var m=m||{},v=document.querySelectorAll.bind(document);function _(E){return E!==null&&E===E.window}function w(E){return _(E)?E:E.nodeType===9&&E.defaultView}function y(E){var k,A,O={top:0,left:0},D=E&&E.ownerDocument;return k=D.documentElement,typeof E.getBoundingClientRect<"u"&&(O=E.getBoundingClientRect()),A=w(D),{top:O.top+A.pageYOffset-k.clientTop,left:O.left+A.pageXOffset-k.clientLeft}}function b(E){var k="";for(var A in E)E.hasOwnProperty(A)&&(k+=A+":"+E[A]+";");return k}var x={duration:750,show:function(E,k){if(E.button===2)return!1;var A=k||this,O=document.createElement("div");O.className="waves-ripple",A.appendChild(O);var D=y(A),P=E.pageY-D.top,N=E.pageX-D.left,U="scale("+A.clientWidth/100*10+")";"touches"in E&&(P=E.touches[0].pageY-D.top,N=E.touches[0].pageX-D.left),O.setAttribute("data-hold",Date.now()),O.setAttribute("data-scale",U),O.setAttribute("data-x",N),O.setAttribute("data-y",P);var L={top:P+"px",left:N+"px"};O.className=O.className+" waves-notransition",O.setAttribute("style",b(L)),O.className=O.className.replace("waves-notransition",""),L["-webkit-transform"]=U,L["-moz-transform"]=U,L["-ms-transform"]=U,L["-o-transform"]=U,L.transform=U,L.opacity="1",L["-webkit-transition-duration"]=x.duration+"ms",L["-moz-transition-duration"]=x.duration+"ms",L["-o-transition-duration"]=x.duration+"ms",L["transition-duration"]=x.duration+"ms",L["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",L["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",L["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",L["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",O.setAttribute("style",b(L))},hide:function(E){S.touchup(E);var k=this;k.clientWidth*1.4;var A=null,O=k.getElementsByClassName("waves-ripple");if(O.length>0)A=O[O.length-1];else return!1;var D=A.getAttribute("data-x"),P=A.getAttribute("data-y"),N=A.getAttribute("data-scale"),U=Date.now()-Number(A.getAttribute("data-hold")),L=350-U;L<0&&(L=0),setTimeout(function(){var V={top:P+"px",left:D+"px",opacity:"0","-webkit-transition-duration":x.duration+"ms","-moz-transition-duration":x.duration+"ms","-o-transition-duration":x.duration+"ms","transition-duration":x.duration+"ms","-webkit-transform":N,"-moz-transform":N,"-ms-transform":N,"-o-transform":N,transform:N};A.setAttribute("style",b(V)),setTimeout(function(){try{k.removeChild(A)}catch{return!1}},x.duration)},L)},wrapInput:function(E){for(var k=0;k<E.length;k++){var A=E[k];if(A.tagName.toLowerCase()==="input"){var O=A.parentNode;if(O.tagName.toLowerCase()==="i"&&O.className.indexOf("waves-effect")!==-1)continue;var D=document.createElement("i");D.className=A.className+" waves-input-wrapper";var P=A.getAttribute("style");P||(P=""),D.setAttribute("style",P),A.className="waves-button-input",A.removeAttribute("style"),O.replaceChild(D,A),D.appendChild(A)}}}},S={touches:0,allowEvent:function(E){var k=!0;return E.type==="touchstart"?S.touches+=1:E.type==="touchend"||E.type==="touchcancel"?setTimeout(function(){S.touches>0&&(S.touches-=1)},500):E.type==="mousedown"&&S.touches>0&&(k=!1),k},touchup:function(E){S.allowEvent(E)}};function C(E){if(S.allowEvent(E)===!1)return null;for(var k=null,A=E.target||E.srcElement;A.parentNode!==null;){if(!(A instanceof SVGElement)&&A.className.indexOf("waves-effect")!==-1){k=A;break}A=A.parentNode}return k}function T(E){var k=C(E);k!==null&&(x.show(E,k),"ontouchstart"in p&&(k.addEventListener("touchend",x.hide,!1),k.addEventListener("touchcancel",x.hide,!1)),k.addEventListener("mouseup",x.hide,!1),k.addEventListener("mouseleave",x.hide,!1),k.addEventListener("dragend",x.hide,!1))}m.displayEffect=function(E){E=E||{},"duration"in E&&(x.duration=E.duration),x.wrapInput(v(".waves-effect")),"ontouchstart"in p&&document.body.addEventListener("touchstart",T,!1),document.body.addEventListener("mousedown",T,!1)},m.attach=function(E){E.tagName.toLowerCase()==="input"&&(x.wrapInput([E]),E=E.parentNode),"ontouchstart"in p&&E.addEventListener("touchstart",T,!1),E.addEventListener("mousedown",T,!1)},p.Waves=m,document.addEventListener("DOMContentLoaded",function(){m.displayEffect()},!1)}(window),function(p,m){var v={html:"",displayLength:4e3,inDuration:300,outDuration:375,classes:"",completeCallback:null,activationPercent:.8},_=function(){function w(y){s(this,w),this.options=p.extend({},w.defaults,y),this.message=this.options.html,this.panning=!1,this.timeRemaining=this.options.displayLength,w._toasts.length===0&&w._createContainer(),w._toasts.push(this);var b=this._createToast();b.M_Toast=this,this.el=b,this.$el=p(b),this._animateIn(),this._setTimer()}return r(w,[{key:"_createToast",value:function(){var b=document.createElement("div");return b.classList.add("toast"),this.options.classes.length&&p(b).addClass(this.options.classes),(typeof HTMLElement=="object"?this.message instanceof HTMLElement:this.message&&typeof this.message=="object"&&this.message!==null&&this.message.nodeType===1&&typeof this.message.nodeName=="string")?b.appendChild(this.message):this.message.jquery?p(b).append(this.message[0]):b.innerHTML=this.message,w._container.appendChild(b),b}},{key:"_animateIn",value:function(){m({targets:this.el,top:0,opacity:1,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_setTimer",value:function(){var b=this;this.timeRemaining!==1/0&&(this.counterInterval=setInterval(function(){b.panning||(b.timeRemaining-=20),b.timeRemaining<=0&&b.dismiss()},20))}},{key:"dismiss",value:function(){var b=this;window.clearInterval(this.counterInterval);var x=this.el.offsetWidth*this.options.activationPercent;this.wasSwiped&&(this.el.style.transition="transform .05s, opacity .05s",this.el.style.transform="translateX("+x+"px)",this.el.style.opacity=0),m({targets:this.el,opacity:0,marginTop:-40,duration:this.options.outDuration,easing:"easeOutExpo",complete:function(){typeof b.options.completeCallback=="function"&&b.options.completeCallback(),b.$el.remove(),w._toasts.splice(w._toasts.indexOf(b),1),w._toasts.length===0&&w._removeContainer()}})}}],[{key:"getInstance",value:function(b){var x=b.jquery?b[0]:b;return x.M_Toast}},{key:"_createContainer",value:function(){var b=document.createElement("div");b.setAttribute("id","toast-container"),b.addEventListener("touchstart",w._onDragStart),b.addEventListener("touchmove",w._onDragMove),b.addEventListener("touchend",w._onDragEnd),b.addEventListener("mousedown",w._onDragStart),document.addEventListener("mousemove",w._onDragMove),document.addEventListener("mouseup",w._onDragEnd),document.body.appendChild(b),w._container=b}},{key:"_removeContainer",value:function(){document.removeEventListener("mousemove",w._onDragMove),document.removeEventListener("mouseup",w._onDragEnd),p(w._container).remove(),w._container=null}},{key:"_onDragStart",value:function(b){if(b.target&&p(b.target).closest(".toast").length){var x=p(b.target).closest(".toast"),S=x[0].M_Toast;S.panning=!0,w._draggedToast=S,S.el.classList.add("panning"),S.el.style.transition="",S.startingXPos=w._xPos(b),S.time=Date.now(),S.xPos=w._xPos(b)}}},{key:"_onDragMove",value:function(b){if(w._draggedToast){b.preventDefault();var x=w._draggedToast;x.deltaX=Math.abs(x.xPos-w._xPos(b)),x.xPos=w._xPos(b),x.velocityX=x.deltaX/(Date.now()-x.time),x.time=Date.now();var S=x.xPos-x.startingXPos,C=x.el.offsetWidth*x.options.activationPercent;x.el.style.transform="translateX("+S+"px)",x.el.style.opacity=1-Math.abs(S/C)}}},{key:"_onDragEnd",value:function(){if(w._draggedToast){var b=w._draggedToast;b.panning=!1,b.el.classList.remove("panning");var x=b.xPos-b.startingXPos,S=b.el.offsetWidth*b.options.activationPercent,C=Math.abs(x)>S||b.velocityX>1;C?(b.wasSwiped=!0,b.dismiss()):(b.el.style.transition="transform .2s, opacity .2s",b.el.style.transform="",b.el.style.opacity=""),w._draggedToast=null}}},{key:"_xPos",value:function(b){return b.targetTouches&&b.targetTouches.length>=1?b.targetTouches[0].clientX:b.clientX}},{key:"dismissAll",value:function(){for(var b in w._toasts)w._toasts[b].dismiss()}},{key:"defaults",get:function(){return v}}]),w}();_._toasts=[],_._container=null,_._draggedToast=null,M.Toast=_,M.toast=function(w){return new _(w)}}(cash,M.anime),function(p,m){var v={edge:"left",draggable:!0,inDuration:250,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0},_=function(w){o(y,w);function y(b,x){s(this,y);var S=i(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,y,b,x));return S.el.M_Sidenav=S,S.id=S.$el.attr("id"),S.options=p.extend({},y.defaults,x),S.isOpen=!1,S.isFixed=S.el.classList.contains("sidenav-fixed"),S.isDragged=!1,S.lastWindowWidth=window.innerWidth,S.lastWindowHeight=window.innerHeight,S._createOverlay(),S._createDragTarget(),S._setupEventHandlers(),S._setupClasses(),S._setupFixed(),y._sidenavs.push(S),S}return r(y,[{key:"destroy",value:function(){this._removeEventHandlers(),this._enableBodyScrolling(),this._overlay.parentNode.removeChild(this._overlay),this.dragTarget.parentNode.removeChild(this.dragTarget),this.el.M_Sidenav=void 0,this.el.style.transform="";var x=y._sidenavs.indexOf(this);x>=0&&y._sidenavs.splice(x,1)}},{key:"_createOverlay",value:function(){var x=document.createElement("div");this._closeBound=this.close.bind(this),x.classList.add("sidenav-overlay"),x.addEventListener("click",this._closeBound),document.body.appendChild(x),this._overlay=x}},{key:"_setupEventHandlers",value:function(){y._sidenavs.length===0&&document.body.addEventListener("click",this._handleTriggerClick),this._handleDragTargetDragBound=this._handleDragTargetDrag.bind(this),this._handleDragTargetReleaseBound=this._handleDragTargetRelease.bind(this),this._handleCloseDragBound=this._handleCloseDrag.bind(this),this._handleCloseReleaseBound=this._handleCloseRelease.bind(this),this._handleCloseTriggerClickBound=this._handleCloseTriggerClick.bind(this),this.dragTarget.addEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.addEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.addEventListener("touchmove",this._handleCloseDragBound),this._overlay.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("touchmove",this._handleCloseDragBound),this.el.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&(this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound))}},{key:"_removeEventHandlers",value:function(){y._sidenavs.length===1&&document.body.removeEventListener("click",this._handleTriggerClick),this.dragTarget.removeEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.removeEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.removeEventListener("touchmove",this._handleCloseDragBound),this._overlay.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("touchmove",this._handleCloseDragBound),this.el.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&window.removeEventListener("resize",this._handleWindowResizeBound)}},{key:"_handleTriggerClick",value:function(x){var S=p(x.target).closest(".sidenav-trigger");if(x.target&&S.length){var C=M.getIdFromTrigger(S[0]),T=document.getElementById(C).M_Sidenav;T&&T.open(S),x.preventDefault()}}},{key:"_startDrag",value:function(x){var S=x.targetTouches[0].clientX;this.isDragged=!0,this._startingXpos=S,this._xPos=this._startingXpos,this._time=Date.now(),this._width=this.el.getBoundingClientRect().width,this._overlay.style.display="block",this._initialScrollTop=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop(),this._verticallyScrolling=!1,m.remove(this.el),m.remove(this._overlay)}},{key:"_dragMoveUpdate",value:function(x){var S=x.targetTouches[0].clientX,C=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop();this.deltaX=Math.abs(this._xPos-S),this._xPos=S,this.velocityX=this.deltaX/(Date.now()-this._time),this._time=Date.now(),this._initialScrollTop!==C&&(this._verticallyScrolling=!0)}},{key:"_handleDragTargetDrag",value:function(x){if(!(!this.options.draggable||this._isCurrentlyFixed()||this._verticallyScrolling)){this.isDragged||this._startDrag(x),this._dragMoveUpdate(x);var S=this._xPos-this._startingXpos,C=S>0?"right":"left";S=Math.min(this._width,Math.abs(S)),this.options.edge===C&&(S=0);var T=S,E="translateX(-100%)";this.options.edge==="right"&&(E="translateX(100%)",T=-T),this.percentOpen=Math.min(1,S/this._width),this.el.style.transform=E+" translateX("+T+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleDragTargetRelease",value:function(){this.isDragged&&(this.percentOpen>.2?this.open():this._animateOut(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseDrag",value:function(x){if(this.isOpen){if(!this.options.draggable||this._isCurrentlyFixed()||this._verticallyScrolling)return;this.isDragged||this._startDrag(x),this._dragMoveUpdate(x);var S=this._xPos-this._startingXpos,C=S>0?"right":"left";S=Math.min(this._width,Math.abs(S)),this.options.edge!==C&&(S=0);var T=-S;this.options.edge==="right"&&(T=-T),this.percentOpen=Math.min(1,1-S/this._width),this.el.style.transform="translateX("+T+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleCloseRelease",value:function(){this.isOpen&&this.isDragged&&(this.percentOpen>.8?this._animateIn():this.close(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseTriggerClick",value:function(x){var S=p(x.target).closest(".sidenav-close");S.length&&!this._isCurrentlyFixed()&&this.close()}},{key:"_handleWindowResize",value:function(){this.lastWindowWidth!==window.innerWidth&&(window.innerWidth>992?this.open():this.close()),this.lastWindowWidth=window.innerWidth,this.lastWindowHeight=window.innerHeight}},{key:"_setupClasses",value:function(){this.options.edge==="right"&&(this.el.classList.add("right-aligned"),this.dragTarget.classList.add("right-aligned"))}},{key:"_removeClasses",value:function(){this.el.classList.remove("right-aligned"),this.dragTarget.classList.remove("right-aligned")}},{key:"_setupFixed",value:function(){this._isCurrentlyFixed()&&this.open()}},{key:"_isCurrentlyFixed",value:function(){return this.isFixed&&window.innerWidth>992}},{key:"_createDragTarget",value:function(){var x=document.createElement("div");x.classList.add("drag-target"),document.body.appendChild(x),this.dragTarget=x}},{key:"_preventBodyScrolling",value:function(){var x=document.body;x.style.overflow="hidden"}},{key:"_enableBodyScrolling",value:function(){var x=document.body;x.style.overflow=""}},{key:"open",value:function(){this.isOpen!==!0&&(this.isOpen=!0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el),this._isCurrentlyFixed()?(m.remove(this.el),m({targets:this.el,translateX:0,duration:0,easing:"easeOutQuad"}),this._enableBodyScrolling(),this._overlay.style.display="none"):(this.options.preventScrolling&&this._preventBodyScrolling(),(!this.isDragged||this.percentOpen!=1)&&this._animateIn()))}},{key:"close",value:function(){if(this.isOpen!==!1)if(this.isOpen=!1,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),this._isCurrentlyFixed()){var x=this.options.edge==="left"?"-105%":"105%";this.el.style.transform="translateX("+x+")"}else this._enableBodyScrolling(),!this.isDragged||this.percentOpen!=0?this._animateOut():this._overlay.style.display="none"}},{key:"_animateIn",value:function(){this._animateSidenavIn(),this._animateOverlayIn()}},{key:"_animateSidenavIn",value:function(){var x=this,S=this.options.edge==="left"?-1:1;this.isDragged&&(S=this.options.edge==="left"?S+this.percentOpen:S-this.percentOpen),m.remove(this.el),m({targets:this.el,translateX:[S*100+"%",0],duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){typeof x.options.onOpenEnd=="function"&&x.options.onOpenEnd.call(x,x.el)}})}},{key:"_animateOverlayIn",value:function(){var x=0;this.isDragged?x=this.percentOpen:p(this._overlay).css({display:"block"}),m.remove(this._overlay),m({targets:this._overlay,opacity:[x,1],duration:this.options.inDuration,easing:"easeOutQuad"})}},{key:"_animateOut",value:function(){this._animateSidenavOut(),this._animateOverlayOut()}},{key:"_animateSidenavOut",value:function(){var x=this,S=this.options.edge==="left"?-1:1,C=0;this.isDragged&&(C=this.options.edge==="left"?S+this.percentOpen:S-this.percentOpen),m.remove(this.el),m({targets:this.el,translateX:[C*100+"%",S*105+"%"],duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){typeof x.options.onCloseEnd=="function"&&x.options.onCloseEnd.call(x,x.el)}})}},{key:"_animateOverlayOut",value:function(){var x=this;m.remove(this._overlay),m({targets:this._overlay,opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){p(x._overlay).css("display","none")}})}}],[{key:"init",value:function(x,S){return n(y.__proto__||Object.getPrototypeOf(y),"init",this).call(this,this,x,S)}},{key:"getInstance",value:function(x){var S=x.jquery?x[0]:x;return S.M_Sidenav}},{key:"defaults",get:function(){return v}}]),y}(a);_._sidenavs=[],M.Sidenav=_,M.jQueryLoaded&&M.initializeJqueryWrapper(_,"sidenav","M_Sidenav")}(cash,M.anime),function(p,m){var v={throttle:100,scrollOffset:200,activeClass:"active",getActiveElement:function(w){return'a[href="#'+w+'"]'}},_=function(w){o(y,w);function y(b,x){s(this,y);var S=i(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,y,b,x));return S.el.M_ScrollSpy=S,S.options=p.extend({},y.defaults,x),y._elements.push(S),y._count++,y._increment++,S.tickId=-1,S.id=y._increment,S._setupEventHandlers(),S._handleWindowScroll(),S}return r(y,[{key:"destroy",value:function(){y._elements.splice(y._elements.indexOf(this),1),y._elementsInView.splice(y._elementsInView.indexOf(this),1),y._visibleElements.splice(y._visibleElements.indexOf(this.$el),1),y._count--,this._removeEventHandlers(),p(this.options.getActiveElement(this.$el.attr("id"))).removeClass(this.options.activeClass),this.el.M_ScrollSpy=void 0}},{key:"_setupEventHandlers",value:function(){var x=M.throttle(this._handleWindowScroll,200);this._handleThrottledResizeBound=x.bind(this),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),y._count===1&&(window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleThrottledResizeBound),document.body.addEventListener("click",this._handleTriggerClick))}},{key:"_removeEventHandlers",value:function(){y._count===0&&(window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleThrottledResizeBound),document.body.removeEventListener("click",this._handleTriggerClick))}},{key:"_handleTriggerClick",value:function(x){for(var S=p(x.target),C=y._elements.length-1;C>=0;C--){var T=y._elements[C];if(S.is('a[href="#'+T.$el.attr("id")+'"]')){x.preventDefault();var E=T.$el.offset().top+1;m({targets:[document.documentElement,document.body],scrollTop:E-T.options.scrollOffset,duration:400,easing:"easeOutCubic"});break}}}},{key:"_handleWindowScroll",value:function(){y._ticks++;for(var x=M.getDocumentScrollTop(),S=M.getDocumentScrollLeft(),C=S+window.innerWidth,T=x+window.innerHeight,E=y._findElements(x,C,T,S),k=0;k<E.length;k++){var A=E[k],O=A.tickId;O<0&&A._enter(),A.tickId=y._ticks}for(var D=0;D<y._elementsInView.length;D++){var P=y._elementsInView[D],N=P.tickId;N>=0&&N!==y._ticks&&(P._exit(),P.tickId=-1)}y._elementsInView=E}},{key:"_enter",value:function(){y._visibleElements=y._visibleElements.filter(function(x){return x.height()!=0}),y._visibleElements[0]?(p(this.options.getActiveElement(y._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),y._visibleElements[0][0].M_ScrollSpy&&this.id<y._visibleElements[0][0].M_ScrollSpy.id?y._visibleElements.unshift(this.$el):y._visibleElements.push(this.$el)):y._visibleElements.push(this.$el),p(this.options.getActiveElement(y._visibleElements[0].attr("id"))).addClass(this.options.activeClass)}},{key:"_exit",value:function(){var x=this;y._visibleElements=y._visibleElements.filter(function(S){return S.height()!=0}),y._visibleElements[0]&&(p(this.options.getActiveElement(y._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),y._visibleElements=y._visibleElements.filter(function(S){return S.attr("id")!=x.$el.attr("id")}),y._visibleElements[0]&&p(this.options.getActiveElement(y._visibleElements[0].attr("id"))).addClass(this.options.activeClass))}}],[{key:"init",value:function(x,S){return n(y.__proto__||Object.getPrototypeOf(y),"init",this).call(this,this,x,S)}},{key:"getInstance",value:function(x){var S=x.jquery?x[0]:x;return S.M_ScrollSpy}},{key:"_findElements",value:function(x,S,C,T){for(var E=[],k=0;k<y._elements.length;k++){var A=y._elements[k],O=x+A.options.scrollOffset||200;if(A.$el.height()>0){var D=A.$el.offset().top,P=A.$el.offset().left,N=P+A.$el.width(),U=D+A.$el.height(),L=!(P>S||N<T||D>C||U<O);L&&E.push(A)}}return E}},{key:"defaults",get:function(){return v}}]),y}(a);_._elements=[],_._elementsInView=[],_._visibleElements=[],_._count=0,_._increment=0,_._ticks=0,M.ScrollSpy=_,M.jQueryLoaded&&M.initializeJqueryWrapper(_,"scrollSpy","M_ScrollSpy")}(cash,M.anime),function(p){var m={data:{},limit:1/0,onAutocomplete:null,minLength:1,sortFunction:function(_,w,y){return _.indexOf(y)-w.indexOf(y)}},v=function(_){o(w,_);function w(y,b){s(this,w);var x=i(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,w,y,b));return x.el.M_Autocomplete=x,x.options=p.extend({},w.defaults,b),x.isOpen=!1,x.count=0,x.activeIndex=-1,x.oldVal,x.$inputField=x.$el.closest(".input-field"),x.$active=p(),x._mousedown=!1,x._setupDropdown(),x._setupEventHandlers(),x}return r(w,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_Autocomplete=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputBlurBound=this._handleInputBlur.bind(this),this._handleInputKeyupAndFocusBound=this._handleInputKeyupAndFocus.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleContainerMousedownAndTouchstartBound=this._handleContainerMousedownAndTouchstart.bind(this),this._handleContainerMouseupAndTouchendBound=this._handleContainerMouseupAndTouchend.bind(this),this.el.addEventListener("blur",this._handleInputBlurBound),this.el.addEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.addEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("click",this._handleInputClickBound),this.container.addEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),typeof window.ontouchstart<"u"&&(this.container.addEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("blur",this._handleInputBlurBound),this.el.removeEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("click",this._handleInputClickBound),this.container.removeEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),typeof window.ontouchstart<"u"&&(this.container.removeEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_setupDropdown",value:function(){var b=this;this.container=document.createElement("ul"),this.container.id="autocomplete-options-"+M.guid(),p(this.container).addClass("autocomplete-content dropdown-content"),this.$inputField.append(this.container),this.el.setAttribute("data-target",this.container.id),this.dropdown=M.Dropdown.init(this.el,{autoFocus:!1,closeOnClick:!1,coverTrigger:!1,onItemClick:function(x){b.selectOption(p(x))}}),this.el.removeEventListener("click",this.dropdown._handleClickBound)}},{key:"_removeDropdown",value:function(){this.container.parentNode.removeChild(this.container)}},{key:"_handleInputBlur",value:function(){this._mousedown||(this.close(),this._resetAutocomplete())}},{key:"_handleInputKeyupAndFocus",value:function(b){b.type==="keyup"&&(w._keydown=!1),this.count=0;var x=this.el.value.toLowerCase();b.keyCode===13||b.keyCode===38||b.keyCode===40||(this.oldVal!==x&&(M.tabPressed||b.type!=="focus")&&this.open(),this.oldVal=x)}},{key:"_handleInputKeydown",value:function(b){w._keydown=!0;var x=b.keyCode,S=void 0,C=p(this.container).children("li").length;if(x===M.keys.ENTER&&this.activeIndex>=0){S=p(this.container).children("li").eq(this.activeIndex),S.length&&(this.selectOption(S),b.preventDefault());return}(x===M.keys.ARROW_UP||x===M.keys.ARROW_DOWN)&&(b.preventDefault(),x===M.keys.ARROW_UP&&this.activeIndex>0&&this.activeIndex--,x===M.keys.ARROW_DOWN&&this.activeIndex<C-1&&this.activeIndex++,this.$active.removeClass("active"),this.activeIndex>=0&&(this.$active=p(this.container).children("li").eq(this.activeIndex),this.$active.addClass("active")))}},{key:"_handleInputClick",value:function(b){this.open()}},{key:"_handleContainerMousedownAndTouchstart",value:function(b){this._mousedown=!0}},{key:"_handleContainerMouseupAndTouchend",value:function(b){this._mousedown=!1}},{key:"_highlight",value:function(b,x){var S=x.find("img"),C=x.text().toLowerCase().indexOf(""+b.toLowerCase()),T=C+b.length-1,E=x.text().slice(0,C),k=x.text().slice(C,T+1),A=x.text().slice(T+1);x.html("<span>"+E+"<span class='highlight'>"+k+"</span>"+A+"</span>"),S.length&&x.prepend(S)}},{key:"_resetCurrentElement",value:function(){this.activeIndex=-1,this.$active.removeClass("active")}},{key:"_resetAutocomplete",value:function(){p(this.container).empty(),this._resetCurrentElement(),this.oldVal=null,this.isOpen=!1,this._mousedown=!1}},{key:"selectOption",value:function(b){var x=b.text().trim();this.el.value=x,this.$el.trigger("change"),this._resetAutocomplete(),this.close(),typeof this.options.onAutocomplete=="function"&&this.options.onAutocomplete.call(this,x)}},{key:"_renderDropdown",value:function(b,x){var S=this;this._resetAutocomplete();var C=[];for(var T in b)if(b.hasOwnProperty(T)&&T.toLowerCase().indexOf(x)!==-1){if(this.count>=this.options.limit)break;var E={data:b[T],key:T};C.push(E),this.count++}if(this.options.sortFunction){var k=function(P,N){return S.options.sortFunction(P.key.toLowerCase(),N.key.toLowerCase(),x.toLowerCase())};C.sort(k)}for(var A=0;A<C.length;A++){var O=C[A],D=p("<li></li>");O.data?D.append('<img src="'+O.data+'" class="right circle"><span>'+O.key+"</span>"):D.append("<span>"+O.key+"</span>"),p(this.container).append(D),this._highlight(x,D)}}},{key:"open",value:function(){var b=this.el.value.toLowerCase();this._resetAutocomplete(),b.length>=this.options.minLength&&(this.isOpen=!0,this._renderDropdown(this.options.data,b)),this.dropdown.isOpen?this.dropdown.recalculateDimensions():this.dropdown.open()}},{key:"close",value:function(){this.dropdown.close()}},{key:"updateData",value:function(b){var x=this.el.value.toLowerCase();this.options.data=b,this.isOpen&&this._renderDropdown(b,x)}}],[{key:"init",value:function(b,x){return n(w.__proto__||Object.getPrototypeOf(w),"init",this).call(this,this,b,x)}},{key:"getInstance",value:function(b){var x=b.jquery?b[0]:b;return x.M_Autocomplete}},{key:"defaults",get:function(){return m}}]),w}(a);v._keydown=!1,M.Autocomplete=v,M.jQueryLoaded&&M.initializeJqueryWrapper(v,"autocomplete","M_Autocomplete")}(cash),function(p){M.updateTextFields=function(){var m="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea";p(m).each(function(v,_){var w=p(this);v.value.length>0||p(v).is(":focus")||v.autofocus||w.attr("placeholder")!==null?w.siblings("label").addClass("active"):v.validity?w.siblings("label").toggleClass("active",v.validity.badInput===!0):w.siblings("label").removeClass("active")})},M.validate_field=function(m){var v=m.attr("data-length")!==null,_=parseInt(m.attr("data-length")),w=m[0].value.length;w===0&&m[0].validity.badInput===!1&&!m.is(":required")?m.hasClass("validate")&&(m.removeClass("valid"),m.removeClass("invalid")):m.hasClass("validate")&&(m.is(":valid")&&v&&w<=_||m.is(":valid")&&!v?(m.removeClass("invalid"),m.addClass("valid")):(m.removeClass("valid"),m.addClass("invalid")))},M.textareaAutoResize=function(m){if(m instanceof Element&&(m=p(m)),!m.length){console.error("No textarea element found");return}var v=p(".hiddendiv").first();v.length||(v=p('<div class="hiddendiv common"></div>'),p("body").append(v));var _=m.css("font-family"),w=m.css("font-size"),y=m.css("line-height"),b=m.css("padding-top"),x=m.css("padding-right"),S=m.css("padding-bottom"),C=m.css("padding-left");w&&v.css("font-size",w),_&&v.css("font-family",_),y&&v.css("line-height",y),b&&v.css("padding-top",b),x&&v.css("padding-right",x),S&&v.css("padding-bottom",S),C&&v.css("padding-left",C),m.data("original-height")||m.data("original-height",m.height()),m.attr("wrap")==="off"&&v.css("overflow-wrap","normal").css("white-space","pre"),v.text(m[0].value+`
`);var T=v.html().replace(/\n/g,"<br>");v.html(T),m[0].offsetWidth>0&&m[0].offsetHeight>0?v.css("width",m.width()+"px"):v.css("width",window.innerWidth/2+"px"),m.data("original-height")<=v.innerHeight()?m.css("height",v.innerHeight()+"px"):m[0].value.length<m.data("previous-length")&&m.css("height",m.data("original-height")+"px"),m.data("previous-length",m[0].value.length)},p(document).ready(function(){var m="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea";p(document).on("change",m,function(){(this.value.length!==0||p(this).attr("placeholder")!==null)&&p(this).siblings("label").addClass("active"),M.validate_field(p(this))}),p(document).ready(function(){M.updateTextFields()}),p(document).on("reset",function(w){var y=p(w.target);y.is("form")&&(y.find(m).removeClass("valid").removeClass("invalid"),y.find(m).each(function(b){this.value.length&&p(this).siblings("label").removeClass("active")}),setTimeout(function(){y.find("select").each(function(){this.M_FormSelect&&p(this).trigger("change")})},0))}),document.addEventListener("focus",function(w){p(w.target).is(m)&&p(w.target).siblings("label, .prefix").addClass("active")},!0),document.addEventListener("blur",function(w){var y=p(w.target);if(y.is(m)){var b=".prefix";y[0].value.length===0&&y[0].validity.badInput!==!0&&y.attr("placeholder")===null&&(b+=", label"),y.siblings(b).removeClass("active"),M.validate_field(y)}},!0);var v="input[type=radio], input[type=checkbox]";p(document).on("keyup",v,function(w){if(w.which===M.keys.TAB){p(this).addClass("tabbed");var y=p(this);y.one("blur",function(b){p(this).removeClass("tabbed")});return}});var _=".materialize-textarea";p(_).each(function(){var w=p(this);w.data("original-height",w.height()),w.data("previous-length",this.value.length),M.textareaAutoResize(w)}),p(document).on("keyup",_,function(){M.textareaAutoResize(p(this))}),p(document).on("keydown",_,function(){M.textareaAutoResize(p(this))}),p(document).on("change",'.file-field input[type="file"]',function(){for(var w=p(this).closest(".file-field"),y=w.find("input.file-path"),b=p(this)[0].files,x=[],S=0;S<b.length;S++)x.push(b[S].name);y[0].value=x.join(", "),y.trigger("change")})})}(cash),function(p,m){var v={indicators:!0,height:400,duration:500,interval:6e3},_=function(w){o(y,w);function y(b,x){s(this,y);var S=i(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,y,b,x));return S.el.M_Slider=S,S.options=p.extend({},y.defaults,x),S.$slider=S.$el.find(".slides"),S.$slides=S.$slider.children("li"),S.activeIndex=S.$slides.filter(function(C){return p(C).hasClass("active")}).first().index(),S.activeIndex!=-1&&(S.$active=S.$slides.eq(S.activeIndex)),S._setSliderHeight(),S.$slides.find(".caption").each(function(C){S._animateCaptionIn(C,0)}),S.$slides.find("img").each(function(C){var T="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";p(C).attr("src")!==T&&(p(C).css("background-image",'url("'+p(C).attr("src")+'")'),p(C).attr("src",T))}),S._setupIndicators(),S.$active?S.$active.css("display","block"):(S.$slides.first().addClass("active"),m({targets:S.$slides.first()[0],opacity:1,duration:S.options.duration,easing:"easeOutQuad"}),S.activeIndex=0,S.$active=S.$slides.eq(S.activeIndex),S.options.indicators&&S.$indicators.eq(S.activeIndex).addClass("active")),S.$active.find("img").each(function(C){m({targets:S.$active.find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:S.options.duration,easing:"easeOutQuad"})}),S._setupEventHandlers(),S.start(),S}return r(y,[{key:"destroy",value:function(){this.pause(),this._removeIndicators(),this._removeEventHandlers(),this.el.M_Slider=void 0}},{key:"_setupEventHandlers",value:function(){var x=this;this._handleIntervalBound=this._handleInterval.bind(this),this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.options.indicators&&this.$indicators.each(function(S){S.addEventListener("click",x._handleIndicatorClickBound)})}},{key:"_removeEventHandlers",value:function(){var x=this;this.options.indicators&&this.$indicators.each(function(S){S.removeEventListener("click",x._handleIndicatorClickBound)})}},{key:"_handleIndicatorClick",value:function(x){var S=p(x.target).index();this.set(S)}},{key:"_handleInterval",value:function(){var x=this.$slider.find(".active").index();this.$slides.length===x+1?x=0:x+=1,this.set(x)}},{key:"_animateCaptionIn",value:function(x,S){var C={targets:x,opacity:0,duration:S,easing:"easeOutQuad"};p(x).hasClass("center-align")?C.translateY=-100:p(x).hasClass("right-align")?C.translateX=100:p(x).hasClass("left-align")&&(C.translateX=-100),m(C)}},{key:"_setSliderHeight",value:function(){this.$el.hasClass("fullscreen")||(this.options.indicators?this.$el.css("height",this.options.height+40+"px"):this.$el.css("height",this.options.height+"px"),this.$slider.css("height",this.options.height+"px"))}},{key:"_setupIndicators",value:function(){var x=this;this.options.indicators&&(this.$indicators=p('<ul class="indicators"></ul>'),this.$slides.each(function(S,C){var T=p('<li class="indicator-item"></li>');x.$indicators.append(T[0])}),this.$el.append(this.$indicators[0]),this.$indicators=this.$indicators.children("li.indicator-item"))}},{key:"_removeIndicators",value:function(){this.$el.find("ul.indicators").remove()}},{key:"set",value:function(x){var S=this;if(x>=this.$slides.length?x=0:x<0&&(x=this.$slides.length-1),this.activeIndex!=x){this.$active=this.$slides.eq(this.activeIndex);var C=this.$active.find(".caption");this.$active.removeClass("active"),m({targets:this.$active[0],opacity:0,duration:this.options.duration,easing:"easeOutQuad",complete:function(){S.$slides.not(".active").each(function(T){m({targets:T,opacity:0,translateX:0,translateY:0,duration:0,easing:"easeOutQuad"})})}}),this._animateCaptionIn(C[0],this.options.duration),this.options.indicators&&(this.$indicators.eq(this.activeIndex).removeClass("active"),this.$indicators.eq(x).addClass("active")),m({targets:this.$slides.eq(x)[0],opacity:1,duration:this.options.duration,easing:"easeOutQuad"}),m({targets:this.$slides.eq(x).find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:this.options.duration,delay:this.options.duration,easing:"easeOutQuad"}),this.$slides.eq(x).addClass("active"),this.activeIndex=x,this.start()}}},{key:"pause",value:function(){clearInterval(this.interval)}},{key:"start",value:function(){clearInterval(this.interval),this.interval=setInterval(this._handleIntervalBound,this.options.duration+this.options.interval)}},{key:"next",value:function(){var x=this.activeIndex+1;x>=this.$slides.length?x=0:x<0&&(x=this.$slides.length-1),this.set(x)}},{key:"prev",value:function(){var x=this.activeIndex-1;x>=this.$slides.length?x=0:x<0&&(x=this.$slides.length-1),this.set(x)}}],[{key:"init",value:function(x,S){return n(y.__proto__||Object.getPrototypeOf(y),"init",this).call(this,this,x,S)}},{key:"getInstance",value:function(x){var S=x.jquery?x[0]:x;return S.M_Slider}},{key:"defaults",get:function(){return v}}]),y}(a);M.Slider=_,M.jQueryLoaded&&M.initializeJqueryWrapper(_,"slider","M_Slider")}(cash,M.anime),function(p,m){p(document).on("click",".card",function(v){if(p(this).children(".card-reveal").length){var _=p(v.target).closest(".card");_.data("initialOverflow")===void 0&&_.data("initialOverflow",_.css("overflow")===void 0?"":_.css("overflow"));var w=p(this).find(".card-reveal");p(v.target).is(p(".card-reveal .card-title"))||p(v.target).is(p(".card-reveal .card-title i"))?m({targets:w[0],translateY:0,duration:225,easing:"easeInOutQuad",complete:function(y){var b=y.animatables[0].target;p(b).css({display:"none"}),_.css("overflow",_.data("initialOverflow"))}}):(p(v.target).is(p(".card .activator"))||p(v.target).is(p(".card .activator i")))&&(_.css("overflow","hidden"),w.css({display:"block"}),m({targets:w[0],translateY:"-100%",duration:300,easing:"easeInOutQuad"}))}})}(cash,M.anime),function(p){var m={data:[],placeholder:"",secondaryPlaceholder:"",autocompleteOptions:{},limit:1/0,onChipAdd:null,onChipSelect:null,onChipDelete:null},v=function(_){o(w,_);function w(y,b){s(this,w);var x=i(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,w,y,b));return x.el.M_Chips=x,x.options=p.extend({},w.defaults,b),x.$el.addClass("chips input-field"),x.chipsData=[],x.$chips=p(),x._setupInput(),x.hasAutocomplete=Object.keys(x.options.autocompleteOptions).length>0,x.$input.attr("id")||x.$input.attr("id",M.guid()),x.options.data.length&&(x.chipsData=x.options.data,x._renderChips(x.chipsData)),x.hasAutocomplete&&x._setupAutocomplete(),x._setPlaceholder(),x._setupLabel(),x._setupEventHandlers(),x}return r(w,[{key:"getData",value:function(){return this.chipsData}},{key:"destroy",value:function(){this._removeEventHandlers(),this.$chips.remove(),this.el.M_Chips=void 0}},{key:"_setupEventHandlers",value:function(){this._handleChipClickBound=this._handleChipClick.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputFocusBound=this._handleInputFocus.bind(this),this._handleInputBlurBound=this._handleInputBlur.bind(this),this.el.addEventListener("click",this._handleChipClickBound),document.addEventListener("keydown",w._handleChipsKeydown),document.addEventListener("keyup",w._handleChipsKeyup),this.el.addEventListener("blur",w._handleChipsBlur,!0),this.$input[0].addEventListener("focus",this._handleInputFocusBound),this.$input[0].addEventListener("blur",this._handleInputBlurBound),this.$input[0].addEventListener("keydown",this._handleInputKeydownBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleChipClickBound),document.removeEventListener("keydown",w._handleChipsKeydown),document.removeEventListener("keyup",w._handleChipsKeyup),this.el.removeEventListener("blur",w._handleChipsBlur,!0),this.$input[0].removeEventListener("focus",this._handleInputFocusBound),this.$input[0].removeEventListener("blur",this._handleInputBlurBound),this.$input[0].removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleChipClick",value:function(b){var x=p(b.target).closest(".chip"),S=p(b.target).is(".close");if(x.length){var C=x.index();S?(this.deleteChip(C),this.$input[0].focus()):this.selectChip(C)}else this.$input[0].focus()}},{key:"_handleInputFocus",value:function(){this.$el.addClass("focus")}},{key:"_handleInputBlur",value:function(){this.$el.removeClass("focus")}},{key:"_handleInputKeydown",value:function(b){if(w._keydown=!0,b.keyCode===13){if(this.hasAutocomplete&&this.autocomplete&&this.autocomplete.isOpen)return;b.preventDefault(),this.addChip({tag:this.$input[0].value}),this.$input[0].value=""}else(b.keyCode===8||b.keyCode===37)&&this.$input[0].value===""&&this.chipsData.length&&(b.preventDefault(),this.selectChip(this.chipsData.length-1))}},{key:"_renderChip",value:function(b){if(b.tag){var x=document.createElement("div"),S=document.createElement("i");if(x.classList.add("chip"),x.textContent=b.tag,x.setAttribute("tabindex",0),p(S).addClass("material-icons close"),S.textContent="close",b.image){var C=document.createElement("img");C.setAttribute("src",b.image),x.insertBefore(C,x.firstChild)}return x.appendChild(S),x}}},{key:"_renderChips",value:function(){this.$chips.remove();for(var b=0;b<this.chipsData.length;b++){var x=this._renderChip(this.chipsData[b]);this.$el.append(x),this.$chips.add(x)}this.$el.append(this.$input[0])}},{key:"_setupAutocomplete",value:function(){var b=this;this.options.autocompleteOptions.onAutocomplete=function(x){b.addChip({tag:x}),b.$input[0].value="",b.$input[0].focus()},this.autocomplete=M.Autocomplete.init(this.$input[0],this.options.autocompleteOptions)}},{key:"_setupInput",value:function(){this.$input=this.$el.find("input"),this.$input.length||(this.$input=p("<input></input>"),this.$el.append(this.$input)),this.$input.addClass("input")}},{key:"_setupLabel",value:function(){this.$label=this.$el.find("label"),this.$label.length&&this.$label.setAttribute("for",this.$input.attr("id"))}},{key:"_setPlaceholder",value:function(){this.chipsData!==void 0&&!this.chipsData.length&&this.options.placeholder?p(this.$input).prop("placeholder",this.options.placeholder):(this.chipsData===void 0||this.chipsData.length)&&this.options.secondaryPlaceholder&&p(this.$input).prop("placeholder",this.options.secondaryPlaceholder)}},{key:"_isValid",value:function(b){if(b.hasOwnProperty("tag")&&b.tag!==""){for(var x=!1,S=0;S<this.chipsData.length;S++)if(this.chipsData[S].tag===b.tag){x=!0;break}return!x}return!1}},{key:"addChip",value:function(b){if(!(!this._isValid(b)||this.chipsData.length>=this.options.limit)){var x=this._renderChip(b);this.$chips.add(x),this.chipsData.push(b),p(this.$input).before(x),this._setPlaceholder(),typeof this.options.onChipAdd=="function"&&this.options.onChipAdd.call(this,this.$el,x)}}},{key:"deleteChip",value:function(b){var x=this.$chips.eq(b);this.$chips.eq(b).remove(),this.$chips=this.$chips.filter(function(S){return p(S).index()>=0}),this.chipsData.splice(b,1),this._setPlaceholder(),typeof this.options.onChipDelete=="function"&&this.options.onChipDelete.call(this,this.$el,x[0])}},{key:"selectChip",value:function(b){var x=this.$chips.eq(b);this._selectedChip=x,x[0].focus(),typeof this.options.onChipSelect=="function"&&this.options.onChipSelect.call(this,this.$el,x[0])}}],[{key:"init",value:function(b,x){return n(w.__proto__||Object.getPrototypeOf(w),"init",this).call(this,this,b,x)}},{key:"getInstance",value:function(b){var x=b.jquery?b[0]:b;return x.M_Chips}},{key:"_handleChipsKeydown",value:function(b){w._keydown=!0;var x=p(b.target).closest(".chips"),S=b.target&&x.length;if(!(p(b.target).is("input, textarea")||!S)){var C=x[0].M_Chips;if(b.keyCode===8||b.keyCode===46){b.preventDefault();var T=C.chipsData.length;if(C._selectedChip){var E=C._selectedChip.index();C.deleteChip(E),C._selectedChip=null,T=Math.max(E-1,0)}C.chipsData.length&&C.selectChip(T)}else if(b.keyCode===37){if(C._selectedChip){var k=C._selectedChip.index()-1;if(k<0)return;C.selectChip(k)}}else if(b.keyCode===39&&C._selectedChip){var A=C._selectedChip.index()+1;A>=C.chipsData.length?C.$input[0].focus():C.selectChip(A)}}}},{key:"_handleChipsKeyup",value:function(b){w._keydown=!1}},{key:"_handleChipsBlur",value:function(b){if(!w._keydown){var x=p(b.target).closest(".chips"),S=x[0].M_Chips;S._selectedChip=null}}},{key:"defaults",get:function(){return m}}]),w}(a);v._keydown=!1,M.Chips=v,M.jQueryLoaded&&M.initializeJqueryWrapper(v,"chips","M_Chips"),p(document).ready(function(){p(document.body).on("click",".chip .close",function(){var _=p(this).closest(".chips");_.length&&_[0].M_Chips||p(this).closest(".chip").remove()})})}(cash),function(p){var m={top:0,bottom:1/0,offset:0,onPositionChange:null},v=function(_){o(w,_);function w(y,b){s(this,w);var x=i(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,w,y,b));return x.el.M_Pushpin=x,x.options=p.extend({},w.defaults,b),x.originalOffset=x.el.offsetTop,w._pushpins.push(x),x._setupEventHandlers(),x._updatePosition(),x}return r(w,[{key:"destroy",value:function(){this.el.style.top=null,this._removePinClasses(),this._removeEventHandlers();var b=w._pushpins.indexOf(this);w._pushpins.splice(b,1)}},{key:"_setupEventHandlers",value:function(){document.addEventListener("scroll",w._updateElements)}},{key:"_removeEventHandlers",value:function(){document.removeEventListener("scroll",w._updateElements)}},{key:"_updatePosition",value:function(){var b=M.getDocumentScrollTop()+this.options.offset;this.options.top<=b&&this.options.bottom>=b&&!this.el.classList.contains("pinned")&&(this._removePinClasses(),this.el.style.top=this.options.offset+"px",this.el.classList.add("pinned"),typeof this.options.onPositionChange=="function"&&this.options.onPositionChange.call(this,"pinned")),b<this.options.top&&!this.el.classList.contains("pin-top")&&(this._removePinClasses(),this.el.style.top=0,this.el.classList.add("pin-top"),typeof this.options.onPositionChange=="function"&&this.options.onPositionChange.call(this,"pin-top")),b>this.options.bottom&&!this.el.classList.contains("pin-bottom")&&(this._removePinClasses(),this.el.classList.add("pin-bottom"),this.el.style.top=this.options.bottom-this.originalOffset+"px",typeof this.options.onPositionChange=="function"&&this.options.onPositionChange.call(this,"pin-bottom"))}},{key:"_removePinClasses",value:function(){this.el.classList.remove("pin-top"),this.el.classList.remove("pinned"),this.el.classList.remove("pin-bottom")}}],[{key:"init",value:function(b,x){return n(w.__proto__||Object.getPrototypeOf(w),"init",this).call(this,this,b,x)}},{key:"getInstance",value:function(b){var x=b.jquery?b[0]:b;return x.M_Pushpin}},{key:"_updateElements",value:function(){for(var b in w._pushpins){var x=w._pushpins[b];x._updatePosition()}}},{key:"defaults",get:function(){return m}}]),w}(a);v._pushpins=[],M.Pushpin=v,M.jQueryLoaded&&M.initializeJqueryWrapper(v,"pushpin","M_Pushpin")}(cash),function(p,m){var v={direction:"top",hoverEnabled:!0,toolbarEnabled:!1};p.fn.reverse=[].reverse;var _=function(w){o(y,w);function y(b,x){s(this,y);var S=i(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,y,b,x));return S.el.M_FloatingActionButton=S,S.options=p.extend({},y.defaults,x),S.isOpen=!1,S.$anchor=S.$el.children("a").first(),S.$menu=S.$el.children("ul").first(),S.$floatingBtns=S.$el.find("ul .btn-floating"),S.$floatingBtnsReverse=S.$el.find("ul .btn-floating").reverse(),S.offsetY=0,S.offsetX=0,S.$el.addClass("direction-"+S.options.direction),S.options.direction==="top"?S.offsetY=40:S.options.direction==="right"?S.offsetX=-40:S.options.direction==="bottom"?S.offsetY=-40:S.offsetX=40,S._setupEventHandlers(),S}return r(y,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_FloatingActionButton=void 0}},{key:"_setupEventHandlers",value:function(){this._handleFABClickBound=this._handleFABClick.bind(this),this._handleOpenBound=this.open.bind(this),this._handleCloseBound=this.close.bind(this),this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.addEventListener("mouseenter",this._handleOpenBound),this.el.addEventListener("mouseleave",this._handleCloseBound)):this.el.addEventListener("click",this._handleFABClickBound)}},{key:"_removeEventHandlers",value:function(){this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.removeEventListener("mouseenter",this._handleOpenBound),this.el.removeEventListener("mouseleave",this._handleCloseBound)):this.el.removeEventListener("click",this._handleFABClickBound)}},{key:"_handleFABClick",value:function(){this.isOpen?this.close():this.open()}},{key:"_handleDocumentClick",value:function(x){p(x.target).closest(this.$menu).length||this.close()}},{key:"open",value:function(){this.isOpen||(this.options.toolbarEnabled?this._animateInToolbar():this._animateInFAB(),this.isOpen=!0)}},{key:"close",value:function(){this.isOpen&&(this.options.toolbarEnabled?(window.removeEventListener("scroll",this._handleCloseBound,!0),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),this._animateOutToolbar()):this._animateOutFAB(),this.isOpen=!1)}},{key:"_animateInFAB",value:function(){var x=this;this.$el.addClass("active");var S=0;this.$floatingBtnsReverse.each(function(C){m({targets:C,opacity:1,scale:[.4,1],translateY:[x.offsetY,0],translateX:[x.offsetX,0],duration:275,delay:S,easing:"easeInOutQuad"}),S+=40})}},{key:"_animateOutFAB",value:function(){var x=this;this.$floatingBtnsReverse.each(function(S){m.remove(S),m({targets:S,opacity:0,scale:.4,translateY:x.offsetY,translateX:x.offsetX,duration:175,easing:"easeOutQuad",complete:function(){x.$el.removeClass("active")}})})}},{key:"_animateInToolbar",value:function(){var x=this,S=void 0,C=window.innerWidth,T=window.innerHeight,E=this.el.getBoundingClientRect(),k=p('<div class="fab-backdrop"></div>'),A=this.$anchor.css("background-color");this.$anchor.append(k),this.offsetX=E.left-C/2+E.width/2,this.offsetY=T-E.bottom,S=C/k[0].clientWidth,this.btnBottom=E.bottom,this.btnLeft=E.left,this.btnWidth=E.width,this.$el.addClass("active"),this.$el.css({"text-align":"center",width:"100%",bottom:0,left:0,transform:"translateX("+this.offsetX+"px)",transition:"none"}),this.$anchor.css({transform:"translateY("+-this.offsetY+"px)",transition:"none"}),k.css({"background-color":A}),setTimeout(function(){x.$el.css({transform:"",transition:"transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s"}),x.$anchor.css({overflow:"visible",transform:"",transition:"transform .2s"}),setTimeout(function(){x.$el.css({overflow:"hidden","background-color":A}),k.css({transform:"scale("+S+")",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"}),x.$menu.children("li").children("a").css({opacity:1}),x._handleDocumentClickBound=x._handleDocumentClick.bind(x),window.addEventListener("scroll",x._handleCloseBound,!0),document.body.addEventListener("click",x._handleDocumentClickBound,!0)},100)},0)}},{key:"_animateOutToolbar",value:function(){var x=this,S=window.innerWidth,C=window.innerHeight,T=this.$el.find(".fab-backdrop"),E=this.$anchor.css("background-color");this.offsetX=this.btnLeft-S/2+this.btnWidth/2,this.offsetY=C-this.btnBottom,this.$el.removeClass("active"),this.$el.css({"background-color":"transparent",transition:"none"}),this.$anchor.css({transition:"none"}),T.css({transform:"scale(0)","background-color":E}),this.$menu.children("li").children("a").css({opacity:""}),setTimeout(function(){T.remove(),x.$el.css({"text-align":"",width:"",bottom:"",left:"",overflow:"","background-color":"",transform:"translate3d("+-x.offsetX+"px,0,0)"}),x.$anchor.css({overflow:"",transform:"translate3d(0,"+x.offsetY+"px,0)"}),setTimeout(function(){x.$el.css({transform:"translate3d(0,0,0)",transition:"transform .2s"}),x.$anchor.css({transform:"translate3d(0,0,0)",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"})},20)},200)}}],[{key:"init",value:function(x,S){return n(y.__proto__||Object.getPrototypeOf(y),"init",this).call(this,this,x,S)}},{key:"getInstance",value:function(x){var S=x.jquery?x[0]:x;return S.M_FloatingActionButton}},{key:"defaults",get:function(){return v}}]),y}(a);M.FloatingActionButton=_,M.jQueryLoaded&&M.initializeJqueryWrapper(_,"floatingActionButton","M_FloatingActionButton")}(cash,M.anime),function(p){var m={autoClose:!1,format:"mmm dd, yyyy",parse:null,defaultDate:null,setDefaultDate:!1,disableWeekends:!1,disableDayFn:null,firstDay:0,minDate:null,maxDate:null,yearRange:10,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,container:null,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok",previousMonth:"‹",nextMonth:"›",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysAbbrev:["S","M","T","W","T","F","S"]},events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null},v=function(_){o(w,_);function w(y,b){s(this,w);var x=i(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,w,y,b));x.el.M_Datepicker=x,x.options=p.extend({},w.defaults,b),b&&b.hasOwnProperty("i18n")&&typeof b.i18n=="object"&&(x.options.i18n=p.extend({},w.defaults.i18n,b.i18n)),x.options.minDate&&x.options.minDate.setHours(0,0,0,0),x.options.maxDate&&x.options.maxDate.setHours(0,0,0,0),x.id=M.guid(),x._setupVariables(),x._insertHTMLIntoDOM(),x._setupModal(),x._setupEventHandlers(),x.options.defaultDate||(x.options.defaultDate=new Date(Date.parse(x.el.value)));var S=x.options.defaultDate;return w._isDate(S)?x.options.setDefaultDate?(x.setDate(S,!0),x.setInputValue()):x.gotoDate(S):x.gotoDate(new Date),x.isOpen=!1,x}return r(w,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),p(this.modalEl).remove(),this.destroySelects(),this.el.M_Datepicker=void 0}},{key:"destroySelects",value:function(){var b=this.calendarEl.querySelector(".orig-select-year");b&&M.FormSelect.getInstance(b).destroy();var x=this.calendarEl.querySelector(".orig-select-month");x&&M.FormSelect.getInstance(x).destroy()}},{key:"_insertHTMLIntoDOM",value:function(){this.options.showClearBtn&&(p(this.clearBtn).css({visibility:""}),this.clearBtn.innerHTML=this.options.i18n.clear),this.doneBtn.innerHTML=this.options.i18n.done,this.cancelBtn.innerHTML=this.options.i18n.cancel,this.options.container?this.$modalEl.appendTo(this.options.container):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var b=this;this.modalEl.id="modal-"+this.id,this.modal=M.Modal.init(this.modalEl,{onCloseEnd:function(){b.isOpen=!1}})}},{key:"toString",value:function(b){var x=this;if(b=b||this.options.format,!w._isDate(this.date))return"";var S=b.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g),C=S.map(function(T){return x.formats[T]?x.formats[T]():T}).join("");return C}},{key:"setDate",value:function(b,x){if(!b)return this.date=null,this._renderDateDisplay(),this.draw();if(typeof b=="string"&&(b=new Date(Date.parse(b))),!!w._isDate(b)){var S=this.options.minDate,C=this.options.maxDate;w._isDate(S)&&b<S?b=S:w._isDate(C)&&b>C&&(b=C),this.date=new Date(b.getTime()),this._renderDateDisplay(),w._setToStartOfDay(this.date),this.gotoDate(this.date),!x&&typeof this.options.onSelect=="function"&&this.options.onSelect.call(this,this.date)}}},{key:"setInputValue",value:function(){this.el.value=this.toString(),this.$el.trigger("change",{firedBy:this})}},{key:"_renderDateDisplay",value:function(){var b=w._isDate(this.date)?this.date:new Date,x=this.options.i18n,S=x.weekdaysShort[b.getDay()],C=x.monthsShort[b.getMonth()],T=b.getDate();this.yearTextEl.innerHTML=b.getFullYear(),this.dateTextEl.innerHTML=S+", "+C+" "+T}},{key:"gotoDate",value:function(b){var x=!0;if(w._isDate(b)){if(this.calendars){var S=new Date(this.calendars[0].year,this.calendars[0].month,1),C=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),T=b.getTime();C.setMonth(C.getMonth()+1),C.setDate(C.getDate()-1),x=T<S.getTime()||C.getTime()<T}x&&(this.calendars=[{month:b.getMonth(),year:b.getFullYear()}]),this.adjustCalendars()}}},{key:"adjustCalendars",value:function(){this.calendars[0]=this.adjustCalendar(this.calendars[0]),this.draw()}},{key:"adjustCalendar",value:function(b){return b.month<0&&(b.year-=Math.ceil(Math.abs(b.month)/12),b.month+=12),b.month>11&&(b.year+=Math.floor(Math.abs(b.month)/12),b.month-=12),b}},{key:"nextMonth",value:function(){this.calendars[0].month++,this.adjustCalendars()}},{key:"prevMonth",value:function(){this.calendars[0].month--,this.adjustCalendars()}},{key:"render",value:function(b,x,S){var C=this.options,T=new Date,E=w._getDaysInMonth(b,x),k=new Date(b,x,1).getDay(),A=[],O=[];w._setToStartOfDay(T),C.firstDay>0&&(k-=C.firstDay,k<0&&(k+=7));for(var D=x===0?11:x-1,P=x===11?0:x+1,N=x===0?b-1:b,U=x===11?b+1:b,L=w._getDaysInMonth(N,D),V=E+k,G=V;G>7;)G-=7;V+=7-G;for(var Q=!1,te=0,ne=0;te<V;te++){var ee=new Date(b,x,1+(te-k)),re=w._isDate(this.date)?w._compareDates(ee,this.date):!1,se=w._compareDates(ee,T),me=C.events.indexOf(ee.toDateString())!==-1,Me=te<k||te>=E+k,de=1+(te-k),Ce=x,Ee=b,q=C.startRange&&w._compareDates(C.startRange,ee),Ve=C.endRange&&w._compareDates(C.endRange,ee),ze=C.startRange&&C.endRange&&C.startRange<ee&&ee<C.endRange,Fe=C.minDate&&ee<C.minDate||C.maxDate&&ee>C.maxDate||C.disableWeekends&&w._isWeekend(ee)||C.disableDayFn&&C.disableDayFn(ee);Me&&(te<k?(de=L+de,Ce=D,Ee=N):(de=de-E,Ce=P,Ee=U));var we={day:de,month:Ce,year:Ee,hasEvent:me,isSelected:re,isToday:se,isDisabled:Fe,isEmpty:Me,isStartRange:q,isEndRange:Ve,isInRange:ze,showDaysInNextAndPreviousMonths:C.showDaysInNextAndPreviousMonths};O.push(this.renderDay(we)),++ne===7&&(A.push(this.renderRow(O,C.isRTL,Q)),O=[],ne=0,Q=!1)}return this.renderTable(C,A,S)}},{key:"renderDay",value:function(b){var x=[],S="false";if(b.isEmpty)if(b.showDaysInNextAndPreviousMonths)x.push("is-outside-current-month"),x.push("is-selection-disabled");else return'<td class="is-empty"></td>';return b.isDisabled&&x.push("is-disabled"),b.isToday&&x.push("is-today"),b.isSelected&&(x.push("is-selected"),S="true"),b.hasEvent&&x.push("has-event"),b.isInRange&&x.push("is-inrange"),b.isStartRange&&x.push("is-startrange"),b.isEndRange&&x.push("is-endrange"),'<td data-day="'+b.day+'" class="'+x.join(" ")+'" aria-selected="'+S+'">'+('<button class="datepicker-day-button" type="button" data-year="'+b.year+'" data-month="'+b.month+'" data-day="'+b.day+'">'+b.day+"</button>")+"</td>"}},{key:"renderRow",value:function(b,x,S){return'<tr class="datepicker-row'+(S?" is-selected":"")+'">'+(x?b.reverse():b).join("")+"</tr>"}},{key:"renderTable",value:function(b,x,S){return'<div class="datepicker-table-wrapper"><table cellpadding="0" cellspacing="0" class="datepicker-table" role="grid" aria-labelledby="'+S+'">'+this.renderHead(b)+this.renderBody(x)+"</table></div>"}},{key:"renderHead",value:function(b){var x=void 0,S=[];for(x=0;x<7;x++)S.push('<th scope="col"><abbr title="'+this.renderDayName(b,x)+'">'+this.renderDayName(b,x,!0)+"</abbr></th>");return"<thead><tr>"+(b.isRTL?S.reverse():S).join("")+"</tr></thead>"}},{key:"renderBody",value:function(b){return"<tbody>"+b.join("")+"</tbody>"}},{key:"renderTitle",value:function(b,x,S,C,T,E){var k=void 0,A=void 0,O=void 0,D=this.options,P=S===D.minYear,N=S===D.maxYear,U='<div id="'+E+'" class="datepicker-controls" role="heading" aria-live="assertive">',L=void 0,V=void 0,G=!0,Q=!0;for(O=[],k=0;k<12;k++)O.push('<option value="'+(S===T?k-x:12+k-x)+'"'+(k===C?' selected="selected"':"")+(P&&k<D.minMonth||N&&k>D.maxMonth?'disabled="disabled"':"")+">"+D.i18n.months[k]+"</option>");for(L='<select class="datepicker-select orig-select-month" tabindex="-1">'+O.join("")+"</select>",p.isArray(D.yearRange)?(k=D.yearRange[0],A=D.yearRange[1]+1):(k=S-D.yearRange,A=1+S+D.yearRange),O=[];k<A&&k<=D.maxYear;k++)k>=D.minYear&&O.push('<option value="'+k+'" '+(k===S?'selected="selected"':"")+">"+k+"</option>");V='<select class="datepicker-select orig-select-year" tabindex="-1">'+O.join("")+"</select>";var te='<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"/><path d="M0-.5h24v24H0z" fill="none"/></svg>';U+='<button class="month-prev'+(G?"":" is-disabled")+'" type="button">'+te+"</button>",U+='<div class="selects-container">',D.showMonthAfterYear?U+=V+L:U+=L+V,U+="</div>",P&&(C===0||D.minMonth>=C)&&(G=!1),N&&(C===11||D.maxMonth<=C)&&(Q=!1);var ne='<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"/><path d="M0-.25h24v24H0z" fill="none"/></svg>';return U+='<button class="month-next'+(Q?"":" is-disabled")+'" type="button">'+ne+"</button>",U+="</div>"}},{key:"draw",value:function(b){if(!(!this.isOpen&&!b)){var x=this.options,S=x.minYear,C=x.maxYear,T=x.minMonth,E=x.maxMonth,k="",A=void 0;this._y<=S&&(this._y=S,!isNaN(T)&&this._m<T&&(this._m=T)),this._y>=C&&(this._y=C,!isNaN(E)&&this._m>E&&(this._m=E)),A="datepicker-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var O=0;O<1;O++)this._renderDateDisplay(),k+=this.renderTitle(this,O,this.calendars[O].year,this.calendars[O].month,this.calendars[0].year,A)+this.render(this.calendars[O].year,this.calendars[O].month,A);this.destroySelects(),this.calendarEl.innerHTML=k;var D=this.calendarEl.querySelector(".orig-select-year"),P=this.calendarEl.querySelector(".orig-select-month");M.FormSelect.init(D,{classes:"select-year",dropdownOptions:{container:document.body,constrainWidth:!1}}),M.FormSelect.init(P,{classes:"select-month",dropdownOptions:{container:document.body,constrainWidth:!1}}),D.addEventListener("change",this._handleYearChange.bind(this)),P.addEventListener("change",this._handleMonthChange.bind(this)),typeof this.options.onDraw=="function"&&this.options.onDraw(this)}}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleInputChangeBound=this._handleInputChange.bind(this),this._handleCalendarClickBound=this._handleCalendarClick.bind(this),this._finishSelectionBound=this._finishSelection.bind(this),this._handleMonthChange=this._handleMonthChange.bind(this),this._closeBound=this.close.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("change",this._handleInputChangeBound),this.calendarEl.addEventListener("click",this._handleCalendarClickBound),this.doneBtn.addEventListener("click",this._finishSelectionBound),this.cancelBtn.addEventListener("click",this._closeBound),this.options.showClearBtn&&(this._handleClearClickBound=this._handleClearClick.bind(this),this.clearBtn.addEventListener("click",this._handleClearClickBound))}},{key:"_setupVariables",value:function(){var b=this;this.$modalEl=p(w._template),this.modalEl=this.$modalEl[0],this.calendarEl=this.modalEl.querySelector(".datepicker-calendar"),this.yearTextEl=this.modalEl.querySelector(".year-text"),this.dateTextEl=this.modalEl.querySelector(".date-text"),this.options.showClearBtn&&(this.clearBtn=this.modalEl.querySelector(".datepicker-clear")),this.doneBtn=this.modalEl.querySelector(".datepicker-done"),this.cancelBtn=this.modalEl.querySelector(".datepicker-cancel"),this.formats={d:function(){return b.date.getDate()},dd:function(){var x=b.date.getDate();return(x<10?"0":"")+x},ddd:function(){return b.options.i18n.weekdaysShort[b.date.getDay()]},dddd:function(){return b.options.i18n.weekdays[b.date.getDay()]},m:function(){return b.date.getMonth()+1},mm:function(){var x=b.date.getMonth()+1;return(x<10?"0":"")+x},mmm:function(){return b.options.i18n.monthsShort[b.date.getMonth()]},mmmm:function(){return b.options.i18n.months[b.date.getMonth()]},yy:function(){return(""+b.date.getFullYear()).slice(2)},yyyy:function(){return b.date.getFullYear()}}}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("change",this._handleInputChangeBound),this.calendarEl.removeEventListener("click",this._handleCalendarClickBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(b){b.which===M.keys.ENTER&&(b.preventDefault(),this.open())}},{key:"_handleCalendarClick",value:function(b){if(this.isOpen){var x=p(b.target);x.hasClass("is-disabled")||(x.hasClass("datepicker-day-button")&&!x.hasClass("is-empty")&&!x.parent().hasClass("is-disabled")?(this.setDate(new Date(b.target.getAttribute("data-year"),b.target.getAttribute("data-month"),b.target.getAttribute("data-day"))),this.options.autoClose&&this._finishSelection()):x.closest(".month-prev").length?this.prevMonth():x.closest(".month-next").length&&this.nextMonth())}}},{key:"_handleClearClick",value:function(){this.date=null,this.setInputValue(),this.close()}},{key:"_handleMonthChange",value:function(b){this.gotoMonth(b.target.value)}},{key:"_handleYearChange",value:function(b){this.gotoYear(b.target.value)}},{key:"gotoMonth",value:function(b){isNaN(b)||(this.calendars[0].month=parseInt(b,10),this.adjustCalendars())}},{key:"gotoYear",value:function(b){isNaN(b)||(this.calendars[0].year=parseInt(b,10),this.adjustCalendars())}},{key:"_handleInputChange",value:function(b){var x=void 0;b.firedBy!==this&&(this.options.parse?x=this.options.parse(this.el.value,this.options.format):x=new Date(Date.parse(this.el.value)),w._isDate(x)&&this.setDate(x))}},{key:"renderDayName",value:function(b,x,S){for(x+=b.firstDay;x>=7;)x-=7;return S?b.i18n.weekdaysAbbrev[x]:b.i18n.weekdays[x]}},{key:"_finishSelection",value:function(){this.setInputValue(),this.close()}},{key:"open",value:function(){if(!this.isOpen)return this.isOpen=!0,typeof this.options.onOpen=="function"&&this.options.onOpen.call(this),this.draw(),this.modal.open(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,typeof this.options.onClose=="function"&&this.options.onClose.call(this),this.modal.close(),this}}],[{key:"init",value:function(b,x){return n(w.__proto__||Object.getPrototypeOf(w),"init",this).call(this,this,b,x)}},{key:"_isDate",value:function(b){return/Date/.test(Object.prototype.toString.call(b))&&!isNaN(b.getTime())}},{key:"_isWeekend",value:function(b){var x=b.getDay();return x===0||x===6}},{key:"_setToStartOfDay",value:function(b){w._isDate(b)&&b.setHours(0,0,0,0)}},{key:"_getDaysInMonth",value:function(b,x){return[31,w._isLeapYear(b)?29:28,31,30,31,30,31,31,30,31,30,31][x]}},{key:"_isLeapYear",value:function(b){return b%4===0&&b%100!==0||b%400===0}},{key:"_compareDates",value:function(b,x){return b.getTime()===x.getTime()}},{key:"_setToStartOfDay",value:function(b){w._isDate(b)&&b.setHours(0,0,0,0)}},{key:"getInstance",value:function(b){var x=b.jquery?b[0]:b;return x.M_Datepicker}},{key:"defaults",get:function(){return m}}]),w}(a);v._template=['<div class= "modal datepicker-modal">','<div class="modal-content datepicker-container">','<div class="datepicker-date-display">','<span class="year-text"></span>','<span class="date-text"></span>',"</div>",'<div class="datepicker-calendar-container">','<div class="datepicker-calendar"></div>','<div class="datepicker-footer">','<button class="btn-flat datepicker-clear waves-effect" style="visibility: hidden;" type="button"></button>','<div class="confirmation-btns">','<button class="btn-flat datepicker-cancel waves-effect" type="button"></button>','<button class="btn-flat datepicker-done waves-effect" type="button"></button>',"</div>","</div>","</div>","</div>","</div>"].join(""),M.Datepicker=v,M.jQueryLoaded&&M.initializeJqueryWrapper(v,"datepicker","M_Datepicker")}(cash),function(p){var m={dialRadius:135,outerRadius:105,innerRadius:70,tickRadius:20,duration:350,container:null,defaultTime:"now",fromNow:0,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok"},autoClose:!1,twelveHour:!0,vibrate:!0,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onSelect:null},v=function(_){o(w,_);function w(y,b){s(this,w);var x=i(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,w,y,b));return x.el.M_Timepicker=x,x.options=p.extend({},w.defaults,b),x.id=M.guid(),x._insertHTMLIntoDOM(),x._setupModal(),x._setupVariables(),x._setupEventHandlers(),x._clockSetup(),x._pickerSetup(),x}return r(w,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),p(this.modalEl).remove(),this.el.M_Timepicker=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleClockClickStartBound=this._handleClockClickStart.bind(this),this._handleDocumentClickMoveBound=this._handleDocumentClickMove.bind(this),this._handleDocumentClickEndBound=this._handleDocumentClickEnd.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.plate.addEventListener("mousedown",this._handleClockClickStartBound),this.plate.addEventListener("touchstart",this._handleClockClickStartBound),p(this.spanHours).on("click",this.showView.bind(this,"hours")),p(this.spanMinutes).on("click",this.showView.bind(this,"minutes"))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(b){b.which===M.keys.ENTER&&(b.preventDefault(),this.open())}},{key:"_handleClockClickStart",value:function(b){b.preventDefault();var x=this.plate.getBoundingClientRect(),S={x:x.left,y:x.top};this.x0=S.x+this.options.dialRadius,this.y0=S.y+this.options.dialRadius,this.moved=!1;var C=w._Pos(b);this.dx=C.x-this.x0,this.dy=C.y-this.y0,this.setHand(this.dx,this.dy,!1),document.addEventListener("mousemove",this._handleDocumentClickMoveBound),document.addEventListener("touchmove",this._handleDocumentClickMoveBound),document.addEventListener("mouseup",this._handleDocumentClickEndBound),document.addEventListener("touchend",this._handleDocumentClickEndBound)}},{key:"_handleDocumentClickMove",value:function(b){b.preventDefault();var x=w._Pos(b),S=x.x-this.x0,C=x.y-this.y0;this.moved=!0,this.setHand(S,C,!1,!0)}},{key:"_handleDocumentClickEnd",value:function(b){var x=this;b.preventDefault(),document.removeEventListener("mouseup",this._handleDocumentClickEndBound),document.removeEventListener("touchend",this._handleDocumentClickEndBound);var S=w._Pos(b),C=S.x-this.x0,T=S.y-this.y0;this.moved&&C===this.dx&&T===this.dy&&this.setHand(C,T),this.currentView==="hours"?this.showView("minutes",this.options.duration/2):this.options.autoClose&&(p(this.minutesView).addClass("timepicker-dial-out"),setTimeout(function(){x.done()},this.options.duration/2)),typeof this.options.onSelect=="function"&&this.options.onSelect.call(this,this.hours,this.minutes),document.removeEventListener("mousemove",this._handleDocumentClickMoveBound),document.removeEventListener("touchmove",this._handleDocumentClickMoveBound)}},{key:"_insertHTMLIntoDOM",value:function(){this.$modalEl=p(w._template),this.modalEl=this.$modalEl[0],this.modalEl.id="modal-"+this.id;var b=document.querySelector(this.options.container);this.options.container&&b?this.$modalEl.appendTo(b):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var b=this;this.modal=M.Modal.init(this.modalEl,{onOpenStart:this.options.onOpenStart,onOpenEnd:this.options.onOpenEnd,onCloseStart:this.options.onCloseStart,onCloseEnd:function(){typeof b.options.onCloseEnd=="function"&&b.options.onCloseEnd.call(b),b.isOpen=!1}})}},{key:"_setupVariables",value:function(){this.currentView="hours",this.vibrate=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,this._canvas=this.modalEl.querySelector(".timepicker-canvas"),this.plate=this.modalEl.querySelector(".timepicker-plate"),this.hoursView=this.modalEl.querySelector(".timepicker-hours"),this.minutesView=this.modalEl.querySelector(".timepicker-minutes"),this.spanHours=this.modalEl.querySelector(".timepicker-span-hours"),this.spanMinutes=this.modalEl.querySelector(".timepicker-span-minutes"),this.spanAmPm=this.modalEl.querySelector(".timepicker-span-am-pm"),this.footer=this.modalEl.querySelector(".timepicker-footer"),this.amOrPm="PM"}},{key:"_pickerSetup",value:function(){var b=p('<button class="btn-flat timepicker-clear waves-effect" style="visibility: hidden;" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.clear+"</button>").appendTo(this.footer).on("click",this.clear.bind(this));this.options.showClearBtn&&b.css({visibility:""});var x=p('<div class="confirmation-btns"></div>');p('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.cancel+"</button>").appendTo(x).on("click",this.close.bind(this)),p('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.done+"</button>").appendTo(x).on("click",this.done.bind(this)),x.appendTo(this.footer)}},{key:"_clockSetup",value:function(){this.options.twelveHour&&(this.$amBtn=p('<div class="am-btn">AM</div>'),this.$pmBtn=p('<div class="pm-btn">PM</div>'),this.$amBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm),this.$pmBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm)),this._buildHoursView(),this._buildMinutesView(),this._buildSVGClock()}},{key:"_buildSVGClock",value:function(){var b=this.options.dialRadius,x=this.options.tickRadius,S=b*2,C=w._createSVGEl("svg");C.setAttribute("class","timepicker-svg"),C.setAttribute("width",S),C.setAttribute("height",S);var T=w._createSVGEl("g");T.setAttribute("transform","translate("+b+","+b+")");var E=w._createSVGEl("circle");E.setAttribute("class","timepicker-canvas-bearing"),E.setAttribute("cx",0),E.setAttribute("cy",0),E.setAttribute("r",4);var k=w._createSVGEl("line");k.setAttribute("x1",0),k.setAttribute("y1",0);var A=w._createSVGEl("circle");A.setAttribute("class","timepicker-canvas-bg"),A.setAttribute("r",x),T.appendChild(k),T.appendChild(A),T.appendChild(E),C.appendChild(T),this._canvas.appendChild(C),this.hand=k,this.bg=A,this.bearing=E,this.g=T}},{key:"_buildHoursView",value:function(){var b=p('<div class="timepicker-tick"></div>');if(this.options.twelveHour)for(var x=1;x<13;x+=1){var S=b.clone(),C=x/6*Math.PI,T=this.options.outerRadius;S.css({left:this.options.dialRadius+Math.sin(C)*T-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(C)*T-this.options.tickRadius+"px"}),S.html(x===0?"00":x),this.hoursView.appendChild(S[0])}else for(var E=0;E<24;E+=1){var k=b.clone(),A=E/6*Math.PI,O=E>0&&E<13,D=O?this.options.innerRadius:this.options.outerRadius;k.css({left:this.options.dialRadius+Math.sin(A)*D-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(A)*D-this.options.tickRadius+"px"}),k.html(E===0?"00":E),this.hoursView.appendChild(k[0])}}},{key:"_buildMinutesView",value:function(){for(var b=p('<div class="timepicker-tick"></div>'),x=0;x<60;x+=5){var S=b.clone(),C=x/30*Math.PI;S.css({left:this.options.dialRadius+Math.sin(C)*this.options.outerRadius-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(C)*this.options.outerRadius-this.options.tickRadius+"px"}),S.html(w._addLeadingZero(x)),this.minutesView.appendChild(S[0])}}},{key:"_handleAmPmClick",value:function(b){var x=p(b.target);this.amOrPm=x.hasClass("am-btn")?"AM":"PM",this._updateAmPmView()}},{key:"_updateAmPmView",value:function(){this.options.twelveHour&&(this.$amBtn.toggleClass("text-primary",this.amOrPm==="AM"),this.$pmBtn.toggleClass("text-primary",this.amOrPm==="PM"))}},{key:"_updateTimeFromInput",value:function(){var b=((this.el.value||this.options.defaultTime||"")+"").split(":");if(this.options.twelveHour&&!(typeof b[1]>"u")&&(b[1].toUpperCase().indexOf("AM")>0?this.amOrPm="AM":this.amOrPm="PM",b[1]=b[1].replace("AM","").replace("PM","")),b[0]==="now"){var x=new Date(+new Date+this.options.fromNow);b=[x.getHours(),x.getMinutes()],this.options.twelveHour&&(this.amOrPm=b[0]>=12&&b[0]<24?"PM":"AM")}this.hours=+b[0]||0,this.minutes=+b[1]||0,this.spanHours.innerHTML=this.hours,this.spanMinutes.innerHTML=w._addLeadingZero(this.minutes),this._updateAmPmView()}},{key:"showView",value:function(b,x){b==="minutes"&&p(this.hoursView).css("visibility");var S=b==="hours",C=S?this.hoursView:this.minutesView,T=S?this.minutesView:this.hoursView;this.currentView=b,p(this.spanHours).toggleClass("text-primary",S),p(this.spanMinutes).toggleClass("text-primary",!S),T.classList.add("timepicker-dial-out"),p(C).css("visibility","visible").removeClass("timepicker-dial-out"),this.resetClock(x),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){p(T).css("visibility","hidden")},this.options.duration)}},{key:"resetClock",value:function(b){var x=this.currentView,S=this[x],C=x==="hours",T=Math.PI/(C?6:30),E=S*T,k=C&&S>0&&S<13?this.options.innerRadius:this.options.outerRadius,A=Math.sin(E)*k,O=-Math.cos(E)*k,D=this;b?(p(this.canvas).addClass("timepicker-canvas-out"),setTimeout(function(){p(D.canvas).removeClass("timepicker-canvas-out"),D.setHand(A,O)},b)):this.setHand(A,O)}},{key:"setHand",value:function(b,x,S){var C=this,T=Math.atan2(b,-x),E=this.currentView==="hours",k=Math.PI/(E||S?6:30),A=Math.sqrt(b*b+x*x),O=E&&A<(this.options.outerRadius+this.options.innerRadius)/2,D=O?this.options.innerRadius:this.options.outerRadius;this.options.twelveHour&&(D=this.options.outerRadius),T<0&&(T=Math.PI*2+T);var P=Math.round(T/k);T=P*k,this.options.twelveHour?E?P===0&&(P=12):(S&&(P*=5),P===60&&(P=0)):E?(P===12&&(P=0),P=O?P===0?12:P:P===0?0:P+12):(S&&(P*=5),P===60&&(P=0)),this[this.currentView]!==P&&this.vibrate&&this.options.vibrate&&(this.vibrateTimer||(navigator[this.vibrate](10),this.vibrateTimer=setTimeout(function(){C.vibrateTimer=null},100))),this[this.currentView]=P,E?this.spanHours.innerHTML=P:this.spanMinutes.innerHTML=w._addLeadingZero(P);var N=Math.sin(T)*(D-this.options.tickRadius),U=-Math.cos(T)*(D-this.options.tickRadius),L=Math.sin(T)*D,V=-Math.cos(T)*D;this.hand.setAttribute("x2",N),this.hand.setAttribute("y2",U),this.bg.setAttribute("cx",L),this.bg.setAttribute("cy",V)}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,this._updateTimeFromInput(),this.showView("hours"),this.modal.open())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.modal.close())}},{key:"done",value:function(b,x){var S=this.el.value,C=x?"":w._addLeadingZero(this.hours)+":"+w._addLeadingZero(this.minutes);this.time=C,!x&&this.options.twelveHour&&(C=C+" "+this.amOrPm),this.el.value=C,C!==S&&this.$el.trigger("change"),this.close(),this.el.focus()}},{key:"clear",value:function(){this.done(null,!0)}}],[{key:"init",value:function(b,x){return n(w.__proto__||Object.getPrototypeOf(w),"init",this).call(this,this,b,x)}},{key:"_addLeadingZero",value:function(b){return(b<10?"0":"")+b}},{key:"_createSVGEl",value:function(b){var x="http://www.w3.org/2000/svg";return document.createElementNS(x,b)}},{key:"_Pos",value:function(b){return b.targetTouches&&b.targetTouches.length>=1?{x:b.targetTouches[0].clientX,y:b.targetTouches[0].clientY}:{x:b.clientX,y:b.clientY}}},{key:"getInstance",value:function(b){var x=b.jquery?b[0]:b;return x.M_Timepicker}},{key:"defaults",get:function(){return m}}]),w}(a);v._template=['<div class= "modal timepicker-modal">','<div class="modal-content timepicker-container">','<div class="timepicker-digital-display">','<div class="timepicker-text-container">','<div class="timepicker-display-column">','<span class="timepicker-span-hours text-primary"></span>',":",'<span class="timepicker-span-minutes"></span>',"</div>",'<div class="timepicker-display-column timepicker-display-am-pm">','<div class="timepicker-span-am-pm"></div>',"</div>","</div>","</div>",'<div class="timepicker-analog-display">','<div class="timepicker-plate">','<div class="timepicker-canvas"></div>','<div class="timepicker-dial timepicker-hours"></div>','<div class="timepicker-dial timepicker-minutes timepicker-dial-out"></div>',"</div>",'<div class="timepicker-footer"></div>',"</div>","</div>","</div>"].join(""),M.Timepicker=v,M.jQueryLoaded&&M.initializeJqueryWrapper(v,"timepicker","M_Timepicker")}(cash),function(p){var m={},v=function(_){o(w,_);function w(y,b){s(this,w);var x=i(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,w,y,b));return x.el.M_CharacterCounter=x,x.options=p.extend({},w.defaults,b),x.isInvalid=!1,x.isValidLength=!1,x._setupCounter(),x._setupEventHandlers(),x}return r(w,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.CharacterCounter=void 0,this._removeCounter()}},{key:"_setupEventHandlers",value:function(){this._handleUpdateCounterBound=this.updateCounter.bind(this),this.el.addEventListener("focus",this._handleUpdateCounterBound,!0),this.el.addEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("focus",this._handleUpdateCounterBound,!0),this.el.removeEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_setupCounter",value:function(){this.counterEl=document.createElement("span"),p(this.counterEl).addClass("character-counter").css({float:"right","font-size":"12px",height:1}),this.$el.parent().append(this.counterEl)}},{key:"_removeCounter",value:function(){p(this.counterEl).remove()}},{key:"updateCounter",value:function(){var b=+this.$el.attr("data-length"),x=this.el.value.length;this.isValidLength=x<=b;var S=x;b&&(S+="/"+b,this._validateInput()),p(this.counterEl).html(S)}},{key:"_validateInput",value:function(){this.isValidLength&&this.isInvalid?(this.isInvalid=!1,this.$el.removeClass("invalid")):!this.isValidLength&&!this.isInvalid&&(this.isInvalid=!0,this.$el.removeClass("valid"),this.$el.addClass("invalid"))}}],[{key:"init",value:function(b,x){return n(w.__proto__||Object.getPrototypeOf(w),"init",this).call(this,this,b,x)}},{key:"getInstance",value:function(b){var x=b.jquery?b[0]:b;return x.M_CharacterCounter}},{key:"defaults",get:function(){return m}}]),w}(a);M.CharacterCounter=v,M.jQueryLoaded&&M.initializeJqueryWrapper(v,"characterCounter","M_CharacterCounter")}(cash),function(p){var m={duration:200,dist:-100,shift:0,padding:0,numVisible:5,fullWidth:!1,indicators:!1,noWrap:!1,onCycleTo:null},v=function(_){o(w,_);function w(y,b){s(this,w);var x=i(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,w,y,b));return x.el.M_Carousel=x,x.options=p.extend({},w.defaults,b),x.hasMultipleSlides=x.$el.find(".carousel-item").length>1,x.showIndicators=x.options.indicators&&x.hasMultipleSlides,x.noWrap=x.options.noWrap||!x.hasMultipleSlides,x.pressed=!1,x.dragged=!1,x.offset=x.target=0,x.images=[],x.itemWidth=x.$el.find(".carousel-item").first().innerWidth(),x.itemHeight=x.$el.find(".carousel-item").first().innerHeight(),x.dim=x.itemWidth*2+x.options.padding||1,x._autoScrollBound=x._autoScroll.bind(x),x._trackBound=x._track.bind(x),x.options.fullWidth&&(x.options.dist=0,x._setCarouselHeight(),x.showIndicators&&x.$el.find(".carousel-fixed-item").addClass("with-indicators")),x.$indicators=p('<ul class="indicators"></ul>'),x.$el.find(".carousel-item").each(function(S,C){if(x.images.push(S),x.showIndicators){var T=p('<li class="indicator-item"></li>');C===0&&T[0].classList.add("active"),x.$indicators.append(T)}}),x.showIndicators&&x.$el.append(x.$indicators),x.count=x.images.length,x.options.numVisible=Math.min(x.count,x.options.numVisible),x.xform="transform",["webkit","Moz","O","ms"].every(function(S){var C=S+"Transform";return typeof document.body.style[C]<"u"?(x.xform=C,!1):!0}),x._setupEventHandlers(),x._scroll(x.offset),x}return r(w,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Carousel=void 0}},{key:"_setupEventHandlers",value:function(){var b=this;this._handleCarouselTapBound=this._handleCarouselTap.bind(this),this._handleCarouselDragBound=this._handleCarouselDrag.bind(this),this._handleCarouselReleaseBound=this._handleCarouselRelease.bind(this),this._handleCarouselClickBound=this._handleCarouselClick.bind(this),typeof window.ontouchstart<"u"&&(this.el.addEventListener("touchstart",this._handleCarouselTapBound),this.el.addEventListener("touchmove",this._handleCarouselDragBound),this.el.addEventListener("touchend",this._handleCarouselReleaseBound)),this.el.addEventListener("mousedown",this._handleCarouselTapBound),this.el.addEventListener("mousemove",this._handleCarouselDragBound),this.el.addEventListener("mouseup",this._handleCarouselReleaseBound),this.el.addEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.addEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&(this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.$indicators.find(".indicator-item").each(function(S,C){S.addEventListener("click",b._handleIndicatorClickBound)}));var x=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=x.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){var b=this;typeof window.ontouchstart<"u"&&(this.el.removeEventListener("touchstart",this._handleCarouselTapBound),this.el.removeEventListener("touchmove",this._handleCarouselDragBound),this.el.removeEventListener("touchend",this._handleCarouselReleaseBound)),this.el.removeEventListener("mousedown",this._handleCarouselTapBound),this.el.removeEventListener("mousemove",this._handleCarouselDragBound),this.el.removeEventListener("mouseup",this._handleCarouselReleaseBound),this.el.removeEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.removeEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&this.$indicators.find(".indicator-item").each(function(x,S){x.removeEventListener("click",b._handleIndicatorClickBound)}),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleCarouselTap",value:function(b){b.type==="mousedown"&&p(b.target).is("img")&&b.preventDefault(),this.pressed=!0,this.dragged=!1,this.verticalDragged=!1,this.reference=this._xpos(b),this.referenceY=this._ypos(b),this.velocity=this.amplitude=0,this.frame=this.offset,this.timestamp=Date.now(),clearInterval(this.ticker),this.ticker=setInterval(this._trackBound,100)}},{key:"_handleCarouselDrag",value:function(b){var x=void 0,S=void 0,C=void 0,T=void 0;if(this.pressed)if(x=this._xpos(b),S=this._ypos(b),C=this.reference-x,T=Math.abs(this.referenceY-S),T<30&&!this.verticalDragged)(C>2||C<-2)&&(this.dragged=!0,this.reference=x,this._scroll(this.offset+C));else{if(this.dragged)return b.preventDefault(),b.stopPropagation(),!1;this.verticalDragged=!0}if(this.dragged)return b.preventDefault(),b.stopPropagation(),!1}},{key:"_handleCarouselRelease",value:function(b){if(this.pressed)this.pressed=!1;else return;return clearInterval(this.ticker),this.target=this.offset,(this.velocity>10||this.velocity<-10)&&(this.amplitude=.9*this.velocity,this.target=this.offset+this.amplitude),this.target=Math.round(this.target/this.dim)*this.dim,this.noWrap&&(this.target>=this.dim*(this.count-1)?this.target=this.dim*(this.count-1):this.target<0&&(this.target=0)),this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound),this.dragged&&(b.preventDefault(),b.stopPropagation()),!1}},{key:"_handleCarouselClick",value:function(b){if(this.dragged)return b.preventDefault(),b.stopPropagation(),!1;if(!this.options.fullWidth){var x=p(b.target).closest(".carousel-item").index(),S=this._wrap(this.center)-x;S!==0&&(b.preventDefault(),b.stopPropagation()),this._cycleTo(x)}}},{key:"_handleIndicatorClick",value:function(b){b.stopPropagation();var x=p(b.target).closest(".indicator-item");x.length&&this._cycleTo(x.index())}},{key:"_handleResize",value:function(b){this.options.fullWidth?(this.itemWidth=this.$el.find(".carousel-item").first().innerWidth(),this.imageHeight=this.$el.find(".carousel-item.active").height(),this.dim=this.itemWidth*2+this.options.padding,this.offset=this.center*2*this.itemWidth,this.target=this.offset,this._setCarouselHeight(!0)):this._scroll()}},{key:"_setCarouselHeight",value:function(b){var x=this,S=this.$el.find(".carousel-item.active").length?this.$el.find(".carousel-item.active").first():this.$el.find(".carousel-item").first(),C=S.find("img").first();if(C.length)if(C[0].complete){var T=C.height();if(T>0)this.$el.css("height",T+"px");else{var E=C[0].naturalWidth,k=C[0].naturalHeight,A=this.$el.width()/E*k;this.$el.css("height",A+"px")}}else C.one("load",function(D,P){x.$el.css("height",D.offsetHeight+"px")});else if(!b){var O=S.height();this.$el.css("height",O+"px")}}},{key:"_xpos",value:function(b){return b.targetTouches&&b.targetTouches.length>=1?b.targetTouches[0].clientX:b.clientX}},{key:"_ypos",value:function(b){return b.targetTouches&&b.targetTouches.length>=1?b.targetTouches[0].clientY:b.clientY}},{key:"_wrap",value:function(b){return b>=this.count?b%this.count:b<0?this._wrap(this.count+b%this.count):b}},{key:"_track",value:function(){var b=void 0,x=void 0,S=void 0,C=void 0;b=Date.now(),x=b-this.timestamp,this.timestamp=b,S=this.offset-this.frame,this.frame=this.offset,C=1e3*S/(1+x),this.velocity=.8*C+.2*this.velocity}},{key:"_autoScroll",value:function(){var b=void 0,x=void 0;this.amplitude&&(b=Date.now()-this.timestamp,x=this.amplitude*Math.exp(-b/this.options.duration),x>2||x<-2?(this._scroll(this.target-x),requestAnimationFrame(this._autoScrollBound)):this._scroll(this.target))}},{key:"_scroll",value:function(b){var x=this;this.$el.hasClass("scrolling")||this.el.classList.add("scrolling"),this.scrollingTimeout!=null&&window.clearTimeout(this.scrollingTimeout),this.scrollingTimeout=window.setTimeout(function(){x.$el.removeClass("scrolling")},this.options.duration);var S=void 0,C=void 0,T=void 0,E=void 0,k=void 0,A=void 0,O=void 0,D=void 0,P=void 0,N=void 0,U=this.center,L=1/this.options.numVisible;if(this.offset=typeof b=="number"?b:this.offset,this.center=Math.floor((this.offset+this.dim/2)/this.dim),T=this.offset-this.center*this.dim,E=T<0?1:-1,k=-E*T*2/this.dim,C=this.count>>1,this.options.fullWidth?(O="translateX(0)",N=1):(O="translateX("+(this.el.clientWidth-this.itemWidth)/2+"px) ",O+="translateY("+(this.el.clientHeight-this.itemHeight)/2+"px)",N=1-L*k),this.showIndicators){var V=this.center%this.count,G=this.$indicators.find(".indicator-item.active");G.index()!==V&&(G.removeClass("active"),this.$indicators.find(".indicator-item").eq(V)[0].classList.add("active"))}if(!this.noWrap||this.center>=0&&this.center<this.count){A=this.images[this._wrap(this.center)],p(A).hasClass("active")||(this.$el.find(".carousel-item").removeClass("active"),A.classList.add("active"));var Q=O+" translateX("+-T/2+"px) translateX("+E*this.options.shift*k*S+"px) translateZ("+this.options.dist*k+"px)";this._updateItemStyle(A,N,0,Q)}for(S=1;S<=C;++S){if(this.options.fullWidth?(D=this.options.dist,P=S===C&&T<0?1-k:1):(D=this.options.dist*(S*2+k*E),P=1-L*(S*2+k*E)),!this.noWrap||this.center+S<this.count){A=this.images[this._wrap(this.center+S)];var te=O+" translateX("+(this.options.shift+(this.dim*S-T)/2)+"px) translateZ("+D+"px)";this._updateItemStyle(A,P,-S,te)}if(this.options.fullWidth?(D=this.options.dist,P=S===C&&T>0?1-k:1):(D=this.options.dist*(S*2-k*E),P=1-L*(S*2-k*E)),!this.noWrap||this.center-S>=0){A=this.images[this._wrap(this.center-S)];var ne=O+" translateX("+(-this.options.shift+(-this.dim*S-T)/2)+"px) translateZ("+D+"px)";this._updateItemStyle(A,P,-S,ne)}}if(!this.noWrap||this.center>=0&&this.center<this.count){A=this.images[this._wrap(this.center)];var ee=O+" translateX("+-T/2+"px) translateX("+E*this.options.shift*k+"px) translateZ("+this.options.dist*k+"px)";this._updateItemStyle(A,N,0,ee)}var re=this.$el.find(".carousel-item").eq(this._wrap(this.center));U!==this.center&&typeof this.options.onCycleTo=="function"&&this.options.onCycleTo.call(this,re[0],this.dragged),typeof this.oneTimeCallback=="function"&&(this.oneTimeCallback.call(this,re[0],this.dragged),this.oneTimeCallback=null)}},{key:"_updateItemStyle",value:function(b,x,S,C){b.style[this.xform]=C,b.style.zIndex=S,b.style.opacity=x,b.style.visibility="visible"}},{key:"_cycleTo",value:function(b,x){var S=this.center%this.count-b;this.noWrap||(S<0?Math.abs(S+this.count)<Math.abs(S)&&(S+=this.count):S>0&&Math.abs(S-this.count)<S&&(S-=this.count)),this.target=this.dim*Math.round(this.offset/this.dim),S<0?this.target+=this.dim*Math.abs(S):S>0&&(this.target-=this.dim*S),typeof x=="function"&&(this.oneTimeCallback=x),this.offset!==this.target&&(this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound))}},{key:"next",value:function(b){(b===void 0||isNaN(b))&&(b=1);var x=this.center+b;if(x>=this.count||x<0){if(this.noWrap)return;x=this._wrap(x)}this._cycleTo(x)}},{key:"prev",value:function(b){(b===void 0||isNaN(b))&&(b=1);var x=this.center-b;if(x>=this.count||x<0){if(this.noWrap)return;x=this._wrap(x)}this._cycleTo(x)}},{key:"set",value:function(b,x){if((b===void 0||isNaN(b))&&(b=0),b>this.count||b<0){if(this.noWrap)return;b=this._wrap(b)}this._cycleTo(b,x)}}],[{key:"init",value:function(b,x){return n(w.__proto__||Object.getPrototypeOf(w),"init",this).call(this,this,b,x)}},{key:"getInstance",value:function(b){var x=b.jquery?b[0]:b;return x.M_Carousel}},{key:"defaults",get:function(){return m}}]),w}(a);M.Carousel=v,M.jQueryLoaded&&M.initializeJqueryWrapper(v,"carousel","M_Carousel")}(cash),function(p){var m={onOpen:void 0,onClose:void 0},v=function(_){o(w,_);function w(y,b){s(this,w);var x=i(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,w,y,b));return x.el.M_TapTarget=x,x.options=p.extend({},w.defaults,b),x.isOpen=!1,x.$origin=p("#"+x.$el.attr("data-target")),x._setup(),x._calculatePositioning(),x._setupEventHandlers(),x}return r(w,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.TapTarget=void 0}},{key:"_setupEventHandlers",value:function(){this._handleDocumentClickBound=this._handleDocumentClick.bind(this),this._handleTargetClickBound=this._handleTargetClick.bind(this),this._handleOriginClickBound=this._handleOriginClick.bind(this),this.el.addEventListener("click",this._handleTargetClickBound),this.originEl.addEventListener("click",this._handleOriginClickBound);var b=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=b.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleTargetClickBound),this.originEl.removeEventListener("click",this._handleOriginClickBound),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleTargetClick",value:function(b){this.open()}},{key:"_handleOriginClick",value:function(b){this.close()}},{key:"_handleResize",value:function(b){this._calculatePositioning()}},{key:"_handleDocumentClick",value:function(b){p(b.target).closest(".tap-target-wrapper").length||(this.close(),b.preventDefault(),b.stopPropagation())}},{key:"_setup",value:function(){this.wrapper=this.$el.parent()[0],this.waveEl=p(this.wrapper).find(".tap-target-wave")[0],this.originEl=p(this.wrapper).find(".tap-target-origin")[0],this.contentEl=this.$el.find(".tap-target-content")[0],p(this.wrapper).hasClass(".tap-target-wrapper")||(this.wrapper=document.createElement("div"),this.wrapper.classList.add("tap-target-wrapper"),this.$el.before(p(this.wrapper)),this.wrapper.append(this.el)),this.contentEl||(this.contentEl=document.createElement("div"),this.contentEl.classList.add("tap-target-content"),this.$el.append(this.contentEl)),this.waveEl||(this.waveEl=document.createElement("div"),this.waveEl.classList.add("tap-target-wave"),this.originEl||(this.originEl=this.$origin.clone(!0,!0),this.originEl.addClass("tap-target-origin"),this.originEl.removeAttr("id"),this.originEl.removeAttr("style"),this.originEl=this.originEl[0],this.waveEl.append(this.originEl)),this.wrapper.append(this.waveEl))}},{key:"_calculatePositioning",value:function(){var b=this.$origin.css("position")==="fixed";if(!b)for(var x=this.$origin.parents(),S=0;S<x.length&&(b=p(x[S]).css("position")=="fixed",!b);S++);var C=this.$origin.outerWidth(),T=this.$origin.outerHeight(),E=b?this.$origin.offset().top-M.getDocumentScrollTop():this.$origin.offset().top,k=b?this.$origin.offset().left-M.getDocumentScrollLeft():this.$origin.offset().left,A=window.innerWidth,O=window.innerHeight,D=A/2,P=O/2,N=k<=D,U=k>D,L=E<=P,V=E>P,G=k>=A*.25&&k<=A*.75,Q=this.$el.outerWidth(),te=this.$el.outerHeight(),ne=E+T/2-te/2,ee=k+C/2-Q/2,re=b?"fixed":"absolute",se=G?Q:Q/2+C,me=te/2,Me=L?te/2:0,de=0,Ce=N&&!G?Q/2-C:0,Ee=0,q=C,Ve=V?"bottom":"top",ze=(C>T,C*2),Fe=ze,we=te/2-Fe/2,Je=Q/2-ze/2,Z={};Z.top=L?ne+"px":"",Z.right=U?A-ee-Q+"px":"",Z.bottom=V?O-ne-te+"px":"",Z.left=N?ee+"px":"",Z.position=re,p(this.wrapper).css(Z),p(this.contentEl).css({width:se+"px",height:me+"px",top:Me+"px",right:Ee+"px",bottom:de+"px",left:Ce+"px",padding:q+"px",verticalAlign:Ve}),p(this.waveEl).css({top:we+"px",left:Je+"px",width:ze+"px",height:Fe+"px"})}},{key:"open",value:function(){this.isOpen||(typeof this.options.onOpen=="function"&&this.options.onOpen.call(this,this.$origin[0]),this.isOpen=!0,this.wrapper.classList.add("open"),document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound))}},{key:"close",value:function(){this.isOpen&&(typeof this.options.onClose=="function"&&this.options.onClose.call(this,this.$origin[0]),this.isOpen=!1,this.wrapper.classList.remove("open"),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound))}}],[{key:"init",value:function(b,x){return n(w.__proto__||Object.getPrototypeOf(w),"init",this).call(this,this,b,x)}},{key:"getInstance",value:function(b){var x=b.jquery?b[0]:b;return x.M_TapTarget}},{key:"defaults",get:function(){return m}}]),w}(a);M.TapTarget=v,M.jQueryLoaded&&M.initializeJqueryWrapper(v,"tapTarget","M_TapTarget")}(cash),function(p){var m={classes:"",dropdownOptions:{}},v=function(_){o(w,_);function w(y,b){s(this,w);var x=i(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,w,y,b));return x.$el.hasClass("browser-default")?i(x):(x.el.M_FormSelect=x,x.options=p.extend({},w.defaults,b),x.isMultiple=x.$el.prop("multiple"),x.el.tabIndex=-1,x._keysSelected={},x._valueDict={},x._setupDropdown(),x._setupEventHandlers(),x)}return r(w,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_FormSelect=void 0}},{key:"_setupEventHandlers",value:function(){var b=this;this._handleSelectChangeBound=this._handleSelectChange.bind(this),this._handleOptionClickBound=this._handleOptionClick.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),p(this.dropdownOptions).find("li:not(.optgroup)").each(function(x){x.addEventListener("click",b._handleOptionClickBound)}),this.el.addEventListener("change",this._handleSelectChangeBound),this.input.addEventListener("click",this._handleInputClickBound)}},{key:"_removeEventHandlers",value:function(){var b=this;p(this.dropdownOptions).find("li:not(.optgroup)").each(function(x){x.removeEventListener("click",b._handleOptionClickBound)}),this.el.removeEventListener("change",this._handleSelectChangeBound),this.input.removeEventListener("click",this._handleInputClickBound)}},{key:"_handleSelectChange",value:function(b){this._setValueToInput()}},{key:"_handleOptionClick",value:function(b){b.preventDefault();var x=p(b.target).closest("li")[0],S=x.id;if(!p(x).hasClass("disabled")&&!p(x).hasClass("optgroup")&&S.length){var C=!0;if(this.isMultiple){var T=p(this.dropdownOptions).find("li.disabled.selected");T.length&&(T.removeClass("selected"),T.find('input[type="checkbox"]').prop("checked",!1),this._toggleEntryFromArray(T[0].id)),C=this._toggleEntryFromArray(S)}else p(this.dropdownOptions).find("li").removeClass("selected"),p(x).toggleClass("selected",C);var E=p(this._valueDict[S].el).prop("selected");E!==C&&(p(this._valueDict[S].el).prop("selected",C),this.$el.trigger("change"))}b.stopPropagation()}},{key:"_handleInputClick",value:function(){this.dropdown&&this.dropdown.isOpen&&(this._setValueToInput(),this._setSelectedStates())}},{key:"_setupDropdown",value:function(){var b=this;this.wrapper=document.createElement("div"),p(this.wrapper).addClass("select-wrapper "+this.options.classes),this.$el.before(p(this.wrapper)),this.wrapper.appendChild(this.el),this.el.disabled&&this.wrapper.classList.add("disabled"),this.$selectOptions=this.$el.children("option, optgroup"),this.dropdownOptions=document.createElement("ul"),this.dropdownOptions.id="select-options-"+M.guid(),p(this.dropdownOptions).addClass("dropdown-content select-dropdown "+(this.isMultiple?"multiple-select-dropdown":"")),this.$selectOptions.length&&this.$selectOptions.each(function(C){if(p(C).is("option")){var T=void 0;b.isMultiple?T=b._appendOptionWithIcon(b.$el,C,"multiple"):T=b._appendOptionWithIcon(b.$el,C),b._addOptionToValueDict(C,T)}else if(p(C).is("optgroup")){var E=p(C).children("option");p(b.dropdownOptions).append(p('<li class="optgroup"><span>'+C.getAttribute("label")+"</span></li>")[0]),E.each(function(k){var A=b._appendOptionWithIcon(b.$el,k,"optgroup-option");b._addOptionToValueDict(k,A)})}}),this.$el.after(this.dropdownOptions),this.input=document.createElement("input"),p(this.input).addClass("select-dropdown dropdown-trigger"),this.input.setAttribute("type","text"),this.input.setAttribute("readonly","true"),this.input.setAttribute("data-target",this.dropdownOptions.id),this.el.disabled&&p(this.input).prop("disabled","true"),this.$el.before(this.input),this._setValueToInput();var x=p('<svg class="caret" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');if(this.$el.before(x[0]),!this.el.disabled){var S=p.extend({},this.options.dropdownOptions);S.onOpenEnd=function(C){var T=p(b.dropdownOptions).find(".selected").first();if(T.length&&(M.keyDown=!0,b.dropdown.focusedIndex=T.index(),b.dropdown._focusFocusedItem(),M.keyDown=!1,b.dropdown.isScrollable)){var E=T[0].getBoundingClientRect().top-b.dropdownOptions.getBoundingClientRect().top;E-=b.dropdownOptions.clientHeight/2,b.dropdownOptions.scrollTop=E}},this.isMultiple&&(S.closeOnClick=!1),this.dropdown=M.Dropdown.init(this.input,S)}this._setSelectedStates()}},{key:"_addOptionToValueDict",value:function(b,x){var S=Object.keys(this._valueDict).length,C=this.dropdownOptions.id+S,T={};x.id=C,T.el=b,T.optionEl=x,this._valueDict[C]=T}},{key:"_removeDropdown",value:function(){p(this.wrapper).find(".caret").remove(),p(this.input).remove(),p(this.dropdownOptions).remove(),p(this.wrapper).before(this.$el),p(this.wrapper).remove()}},{key:"_appendOptionWithIcon",value:function(b,x,S){var C=x.disabled?"disabled ":"",T=S==="optgroup-option"?"optgroup-option ":"",E=this.isMultiple?'<label><input type="checkbox"'+C+'"/><span>'+x.innerHTML+"</span></label>":x.innerHTML,k=p("<li></li>"),A=p("<span></span>");A.html(E),k.addClass(C+" "+T),k.append(A);var O=x.getAttribute("data-icon");if(O){var D=p('<img alt="" src="'+O+'">');k.prepend(D)}return p(this.dropdownOptions).append(k[0]),k[0]}},{key:"_toggleEntryFromArray",value:function(b){var x=!this._keysSelected.hasOwnProperty(b),S=p(this._valueDict[b].optionEl);return x?this._keysSelected[b]=!0:delete this._keysSelected[b],S.toggleClass("selected",x),S.find('input[type="checkbox"]').prop("checked",x),S.prop("selected",x),x}},{key:"_setValueToInput",value:function(){var b=[],x=this.$el.find("option");if(x.each(function(C){if(p(C).prop("selected")){var T=p(C).text();b.push(T)}}),!b.length){var S=this.$el.find("option:disabled").eq(0);S.length&&S[0].value===""&&b.push(S.text())}this.input.value=b.join(", ")}},{key:"_setSelectedStates",value:function(){this._keysSelected={};for(var b in this._valueDict){var x=this._valueDict[b],S=p(x.el).prop("selected");p(x.optionEl).find('input[type="checkbox"]').prop("checked",S),S?(this._activateOption(p(this.dropdownOptions),p(x.optionEl)),this._keysSelected[b]=!0):p(x.optionEl).removeClass("selected")}}},{key:"_activateOption",value:function(b,x){if(x){this.isMultiple||b.find("li.selected").removeClass("selected");var S=p(x);S.addClass("selected")}}},{key:"getSelectedValues",value:function(){var b=[];for(var x in this._keysSelected)b.push(this._valueDict[x].el.value);return b}}],[{key:"init",value:function(b,x){return n(w.__proto__||Object.getPrototypeOf(w),"init",this).call(this,this,b,x)}},{key:"getInstance",value:function(b){var x=b.jquery?b[0]:b;return x.M_FormSelect}},{key:"defaults",get:function(){return m}}]),w}(a);M.FormSelect=v,M.jQueryLoaded&&M.initializeJqueryWrapper(v,"formSelect","M_FormSelect")}(cash),function(p,m){var v={},_=function(w){o(y,w);function y(b,x){s(this,y);var S=i(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,y,b,x));return S.el.M_Range=S,S.options=p.extend({},y.defaults,x),S._mousedown=!1,S._setupThumb(),S._setupEventHandlers(),S}return r(y,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeThumb(),this.el.M_Range=void 0}},{key:"_setupEventHandlers",value:function(){this._handleRangeChangeBound=this._handleRangeChange.bind(this),this._handleRangeMousedownTouchstartBound=this._handleRangeMousedownTouchstart.bind(this),this._handleRangeInputMousemoveTouchmoveBound=this._handleRangeInputMousemoveTouchmove.bind(this),this._handleRangeMouseupTouchendBound=this._handleRangeMouseupTouchend.bind(this),this._handleRangeBlurMouseoutTouchleaveBound=this._handleRangeBlurMouseoutTouchleave.bind(this),this.el.addEventListener("change",this._handleRangeChangeBound),this.el.addEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.addEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.addEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("change",this._handleRangeChangeBound),this.el.removeEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_handleRangeChange",value:function(){p(this.value).html(this.$el.val()),p(this.thumb).hasClass("active")||this._showRangeBubble();var x=this._calcRangeOffset();p(this.thumb).addClass("active").css("left",x+"px")}},{key:"_handleRangeMousedownTouchstart",value:function(x){if(p(this.value).html(this.$el.val()),this._mousedown=!0,this.$el.addClass("active"),p(this.thumb).hasClass("active")||this._showRangeBubble(),x.type!=="input"){var S=this._calcRangeOffset();p(this.thumb).addClass("active").css("left",S+"px")}}},{key:"_handleRangeInputMousemoveTouchmove",value:function(){if(this._mousedown){p(this.thumb).hasClass("active")||this._showRangeBubble();var x=this._calcRangeOffset();p(this.thumb).addClass("active").css("left",x+"px"),p(this.value).html(this.$el.val())}}},{key:"_handleRangeMouseupTouchend",value:function(){this._mousedown=!1,this.$el.removeClass("active")}},{key:"_handleRangeBlurMouseoutTouchleave",value:function(){if(!this._mousedown){var x=parseInt(this.$el.css("padding-left")),S=7+x+"px";p(this.thumb).hasClass("active")&&(m.remove(this.thumb),m({targets:this.thumb,height:0,width:0,top:10,easing:"easeOutQuad",marginLeft:S,duration:100})),p(this.thumb).removeClass("active")}}},{key:"_setupThumb",value:function(){this.thumb=document.createElement("span"),this.value=document.createElement("span"),p(this.thumb).addClass("thumb"),p(this.value).addClass("value"),p(this.thumb).append(this.value),this.$el.after(this.thumb)}},{key:"_removeThumb",value:function(){p(this.thumb).remove()}},{key:"_showRangeBubble",value:function(){var x=parseInt(p(this.thumb).parent().css("padding-left")),S=-7+x+"px";m.remove(this.thumb),m({targets:this.thumb,height:30,width:30,top:-30,marginLeft:S,duration:300,easing:"easeOutQuint"})}},{key:"_calcRangeOffset",value:function(){var x=this.$el.width()-15,S=parseFloat(this.$el.attr("max"))||100,C=parseFloat(this.$el.attr("min"))||0,T=(parseFloat(this.$el.val())-C)/(S-C);return T*x}}],[{key:"init",value:function(x,S){return n(y.__proto__||Object.getPrototypeOf(y),"init",this).call(this,this,x,S)}},{key:"getInstance",value:function(x){var S=x.jquery?x[0]:x;return S.M_Range}},{key:"defaults",get:function(){return v}}]),y}(a);M.Range=_,M.jQueryLoaded&&M.initializeJqueryWrapper(_,"range","M_Range"),_.init(p("input[type=range]"))}(cash,M.anime)})(r3,r3.exports);var Qut=r3.exports;const Zut=cn(Qut);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jut=1e-7,edt=1e-4;class Uce{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class j4{refCount(e){return zo("refCount")}incRef(e){return zo("incRef")}timerAvailable(){return!0}time(e){return zo("time")}read(e){return zo("read")}readSync(e){return zo("readSync")}readToGPU(e,n){return zo("readToGPU")}numDataIds(){return zo("numDataIds")}disposeData(e,n){return zo("disposeData")}write(e,n,r){return zo("write")}move(e,n,r,i,o){return zo("move")}createTensorFromGPUData(e,n,r){return zo("createTensorFromGPUData")}memory(){return zo("memory")}floatPrecision(){return zo("floatPrecision")}epsilon(){return this.floatPrecision()===32?Jut:edt}dispose(){return zo("dispose")}}function zo(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tdt(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,pg(t,e,n)}function $p(t,e,n){return Math.max(t,Math.min(e,n))}function W4(t){return t%2===0?t:t+1}function pg(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function ndt(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function Y(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function V4(t,e,n=""){Y(mn(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function H4(t){Y(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Re(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function mn(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function iy(t){return t%1===0}function i3(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function ov(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function O7(t,e=i=>0,n,r){return new Promise((i,o)=>{let s=0;const a=()=>{if(t()){i();return}s++;const l=e(s);if(n!=null&&s>=n){o();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function zce(t,e){let n=1,r=-1;for(let o=0;o<t.length;++o)if(t[o]>=0)n*=t[o];else if(t[o]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${o}`);r=o}else if(t[o]<0)throw Error(`Shapes can not be < 0. Found ${t[o]} at dim ${o}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const i=t.slice();return i[r]=e/n,i}function Gt(t,e){const n=e.length;return t=t==null?e.map((r,i)=>i):[].concat(t),Y(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),Y(t.every(r=>iy(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function Uf(t,e){const n=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,o=e==null||i?null:Gt(e,t).sort();let s=0;for(let a=0;a<t.length;++a){if(o!=null){if(o[s]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(o[s]==null||o[s]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),o[s]<=a&&s++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function Hi(t,e){return wr(t,e)}function wr(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function rdt(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function idt(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function jce(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function dA(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function odt(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function q_(t){return typeof t=="string"||t instanceof String}function sdt(t){return typeof t=="boolean"}function o3(t){return typeof t=="number"}function Jy(t){return Array.isArray(t)?Jy(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":o3(t)?"float32":q_(t)?"string":sdt(t)?"bool":"float32"}function s3(t){return!!(t&&t.constructor&&t.call&&t.apply)}function a3(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function _t(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function Wce(t,e,n,r=!1){const i=new Array;if(e.length===1){const o=e[0]*(r?2:1);for(let s=0;s<o;s++)i[s]=n[t+s]}else{const o=e[0],s=e.slice(1),a=s.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<o;l++)i[l]=Wce(t+l*a,s,n,r)}return i}function xl(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((i,o)=>i*o)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return Wce(0,t,e,n)}function adt(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function G4(t,e){const n=Gi(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Gi(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function Vce(t,e){const n=t.reduce((r,i)=>r*i,1);if(e==null||e==="float32")return xl(t,new Float32Array(n));if(e==="int32")return xl(t,new Int32Array(n));if(e==="bool")return xl(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function rd(t){t.forEach(e=>{Y(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Cc(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function e0(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}function q4(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R7="tfjsflags";class ldt{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=cdt,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(Te().getBool("IS_TEST")||Te().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const i=this.urlFlags[e];Te().getBool("IS_TEST")||Te().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${i}.`),this.set(e,i)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(q4(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);R7 in e&&e[R7].split(",").forEach(r=>{const[i,o]=r.split(":");this.urlFlags[i]=ddt(i,o)})}}function cdt(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(udt(e,r[0],r[1]),r.join("="))),e}function udt(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function ddt(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function Te(){return Hce}let Hce=null;function fdt(t){Hce=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let RP;function Gce(){if(RP==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");RP=t}return RP}function hdt(){const t=Gce();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function X4(t,e){const n=hdt();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const xO="Abs",X_="Acos",K_="Acosh",t0="Add",K4="AddN",Y4="All",Q4="Any",wO="ArgMax",_O="ArgMin",Y_="Asin",Q_="Asinh",Z_="Atan",J_="Atanh",e1="Atan2",SO="AvgPool",Z4="AvgPoolGrad",CO="AvgPool3D",J4="AvgPool3DGrad",EO="BatchMatMul",TO="BatchToSpaceND",eW="Bincount",tW="BitwiseAnd",pdt="BroadcastTo",qce="BroadcastArgs",t1="Cast",n1="Ceil",r1="ClipByValue",nW="Complex",kO="ComplexAbs",AO="Concat",MO="Conv2D",rW="Conv2DBackpropFilter",IO="Conv2DBackpropInput",OO="Conv3D",iW="Conv3DBackpropFilterV2",oW="Conv3DBackpropInputV2",i1="Cos",o1="Cosh",sW="Cumprod",RO="Cumsum",aW="CropAndResize",lW="DenseBincount",cW="DepthToSpace",DO="DepthwiseConv2dNative",uW="DepthwiseConv2dNativeBackpropFilter",dW="DepthwiseConv2dNativeBackpropInput",Xce="Diag",PO="Dilation2D",l3="Dilation2DBackpropInput",c3="Dilation2DBackpropFilter",mdt="Draw",s1="RealDiv",fW="Einsum",a1="Elu",hW="EluGrad",l1="Erf",NO="Equal",c1="Exp",$O="ExpandDims",u1="Expm1",pW="FFT",mW="Fill",gW="FlipLeftRight",d1="Floor",f1="FloorDiv",LO="FusedBatchNorm",FO="GatherV2",Kce="GatherNd",BO="Greater",h1="GreaterEqual",p1="Identity",vW="IFFT",yW="Imag",m1="IsFinite",g1="IsInf",v1="IsNan",UO="LeakyRelu",zO="Less",jO="LessEqual",Yce="LinSpace",y1="Log",b1="Log1p",WO="LogicalAnd",VO="LogicalNot",HO="LogicalOr",gdt="LogSoftmax",GO="LRN",bW="LRNGrad",qO="Max",x1="Maximum",XO="MaxPool",xW="MaxPoolGrad",KO="MaxPool3D",wW="MaxPool3DGrad",Qce="MaxPoolWithArgmax",YO="Mean",QO="Min",w1="Minimum",ZO="MirrorPad",_1="Mod",Zce="Multinomial",S1="Multiply",JO="Neg",e2="NotEqual",_W="NonMaxSuppressionV3",SW="NonMaxSuppressionV4",CW="NonMaxSuppressionV5",t2="OnesLike",n2="OneHot",r2="Pack",i2="PadV2",C1="Pow",o2="Prelu",s2="Prod",Jce="RaggedGather",eue="RaggedRange",tue="RaggedTensorToTensor",EW="Range",TW="Real",E1="Reciprocal",T1="Relu",a2="Reshape",l2="ResizeNearestNeighbor",kW="ResizeNearestNeighborGrad",c2="ResizeBilinear",AW="ResizeBilinearGrad",k1="Relu6",u2="Reverse",A1="Round",M1="Rsqrt",nue="ScatterNd",rue="TensorScatterUpdate",iue="SearchSorted",d2="Select",I1="Selu",f2="Slice",O1="Sin",R1="Sinh",D1="Sign",P1="Sigmoid",N1="Softplus",$1="Sqrt",h2="Sum",p2="SpaceToBatchND",m2="SplitV",g2="Softmax",oue="SparseFillEmptyRows",sue="SparseReshape",aue="SparseSegmentMean",lue="SparseSegmentSum",cue="SparseToDense",L1="SquaredDifference",MW="Square",IW="StaticRegexReplace",OW="StridedSlice",uue="StringNGrams",due="StringSplit",fue="StringToHashBucketFast",F1="Sub",B1="Tan",U1="Tanh",z1="Tile",RW="TopK",DW="Transform",sv="Transpose",PW="Unique",v2="Unpack",y2="UnsortedSegmentSum",b2="ZerosLike",j1="Step",vdt="FromPixels",NW="RotateWithOffset",fA="_FusedMatMul",hA="FusedConv2D",hue="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Es(...t){Te().getBool("IS_TEST")||Te().getBool("PROD")||console.warn(...t)}function ydt(...t){Te().getBool("IS_TEST")||Te().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pA=X4("kernelRegistry",()=>new Map),u3=X4("gradRegistry",()=>new Map);function D7(t,e){const n=mue(t,e);return pA.get(n)}function P7(t){return u3.get(t)}function N7(t){const e=pA.entries(),n=[];for(;;){const{done:r,value:i}=e.next();if(r)break;const[o,s]=i,[a]=o.split("_");a===t&&n.push(s)}return n}function pue(t){const{kernelName:e,backendName:n}=t,r=mue(e,n);pA.has(r)&&Es(`The kernel '${e}' for backend '${n}' is already registered`),pA.set(r,t)}function bdt(t){const{kernelName:e}=t;u3.has(e)&&Te().getBool("DEBUG")&&Es(`Overriding the gradient for '${e}'`),u3.set(e,t)}function mue(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gue(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var vue=Hn,wa=null;try{wa=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Hn(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}Hn.prototype.__isLong__;Object.defineProperty(Hn.prototype,"__isLong__",{value:!0});function hs(t){return(t&&t.__isLong__)===!0}Hn.isLong=hs;var $7={},L7={};function am(t,e){var n,r,i;return e?(t>>>=0,(i=0<=t&&t<256)&&(r=L7[t],r)?r:(n=Gn(t,(t|0)<0?-1:0,!0),i&&(L7[t]=n),n)):(t|=0,(i=-128<=t&&t<128)&&(r=$7[t],r)?r:(n=Gn(t,t<0?-1:0,!1),i&&($7[t]=n),n))}Hn.fromInt=am;function _a(t,e){if(isNaN(t))return e?qh:Sa;if(e){if(t<0)return qh;if(t>=yue)return wue}else{if(t<=-B7)return Qo;if(t+1>=B7)return xue}return t<0?_a(-t,e).neg():Gn(t%oy|0,t/oy|0,e)}Hn.fromNumber=_a;function Gn(t,e,n){return new Hn(t,e,n)}Hn.fromBits=Gn;var mA=Math.pow;function $W(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Sa;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return $W(t.substring(1),e,n).neg();for(var i=_a(mA(n,8)),o=Sa,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),l=parseInt(t.substring(s,s+a),n);if(a<8){var c=_a(mA(n,a));o=o.mul(c).add(_a(l))}else o=o.mul(i),o=o.add(_a(l))}return o.unsigned=e,o}Hn.fromString=$W;function Pl(t,e){return typeof t=="number"?_a(t,e):typeof t=="string"?$W(t,e):Gn(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}Hn.fromValue=Pl;var F7=65536,xdt=1<<24,oy=F7*F7,yue=oy*oy,B7=yue/2,U7=am(xdt),Sa=am(0);Hn.ZERO=Sa;var qh=am(0,!0);Hn.UZERO=qh;var Lg=am(1);Hn.ONE=Lg;var bue=am(1,!0);Hn.UONE=bue;var d3=am(-1);Hn.NEG_ONE=d3;var xue=Gn(-1,2147483647,!1);Hn.MAX_VALUE=xue;var wue=Gn(-1,-1,!0);Hn.MAX_UNSIGNED_VALUE=wue;var Qo=Gn(0,-2147483648,!1);Hn.MIN_VALUE=Qo;var rt=Hn.prototype;rt.toInt=function(){return this.unsigned?this.low>>>0:this.low};rt.toNumber=function(){return this.unsigned?(this.high>>>0)*oy+(this.low>>>0):this.high*oy+(this.low>>>0)};rt.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Qo)){var n=_a(e),r=this.div(n),i=r.mul(n).sub(this);return r.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var o=_a(mA(e,6),this.unsigned),s=this,a="";;){var l=s.div(o),c=s.sub(l.mul(o)).toInt()>>>0,u=c.toString(e);if(s=l,s.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}};rt.getHighBits=function(){return this.high};rt.getHighBitsUnsigned=function(){return this.high>>>0};rt.getLowBits=function(){return this.low};rt.getLowBitsUnsigned=function(){return this.low>>>0};rt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Qo)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};rt.isZero=function(){return this.high===0&&this.low===0};rt.eqz=rt.isZero;rt.isNegative=function(){return!this.unsigned&&this.high<0};rt.isPositive=function(){return this.unsigned||this.high>=0};rt.isOdd=function(){return(this.low&1)===1};rt.isEven=function(){return(this.low&1)===0};rt.equals=function(e){return hs(e)||(e=Pl(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};rt.eq=rt.equals;rt.notEquals=function(e){return!this.eq(e)};rt.neq=rt.notEquals;rt.ne=rt.notEquals;rt.lessThan=function(e){return this.comp(e)<0};rt.lt=rt.lessThan;rt.lessThanOrEqual=function(e){return this.comp(e)<=0};rt.lte=rt.lessThanOrEqual;rt.le=rt.lessThanOrEqual;rt.greaterThan=function(e){return this.comp(e)>0};rt.gt=rt.greaterThan;rt.greaterThanOrEqual=function(e){return this.comp(e)>=0};rt.gte=rt.greaterThanOrEqual;rt.ge=rt.greaterThanOrEqual;rt.compare=function(e){if(hs(e)||(e=Pl(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};rt.comp=rt.compare;rt.negate=function(){return!this.unsigned&&this.eq(Qo)?Qo:this.not().add(Lg)};rt.neg=rt.negate;rt.add=function(e){hs(e)||(e=Pl(e));var n=this.high>>>16,r=this.high&65535,i=this.low>>>16,o=this.low&65535,s=e.high>>>16,a=e.high&65535,l=e.low>>>16,c=e.low&65535,u=0,d=0,f=0,h=0;return h+=o+c,f+=h>>>16,h&=65535,f+=i+l,d+=f>>>16,f&=65535,d+=r+a,u+=d>>>16,d&=65535,u+=n+s,u&=65535,Gn(f<<16|h,u<<16|d,this.unsigned)};rt.subtract=function(e){return hs(e)||(e=Pl(e)),this.add(e.neg())};rt.sub=rt.subtract;rt.multiply=function(e){if(this.isZero())return Sa;if(hs(e)||(e=Pl(e)),wa){var n=wa.mul(this.low,this.high,e.low,e.high);return Gn(n,wa.get_high(),this.unsigned)}if(e.isZero())return Sa;if(this.eq(Qo))return e.isOdd()?Qo:Sa;if(e.eq(Qo))return this.isOdd()?Qo:Sa;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(U7)&&e.lt(U7))return _a(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,o=this.low>>>16,s=this.low&65535,a=e.high>>>16,l=e.high&65535,c=e.low>>>16,u=e.low&65535,d=0,f=0,h=0,g=0;return g+=s*u,h+=g>>>16,g&=65535,h+=o*u,f+=h>>>16,h&=65535,h+=s*c,f+=h>>>16,h&=65535,f+=i*u,d+=f>>>16,f&=65535,f+=o*c,d+=f>>>16,f&=65535,f+=s*l,d+=f>>>16,f&=65535,d+=r*u+i*c+o*l+s*a,d&=65535,Gn(h<<16|g,d<<16|f,this.unsigned)};rt.mul=rt.multiply;rt.divide=function(e){if(hs(e)||(e=Pl(e)),e.isZero())throw Error("division by zero");if(wa){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?wa.div_u:wa.div_s)(this.low,this.high,e.low,e.high);return Gn(n,wa.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?qh:Sa;var r,i,o;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return qh;if(e.gt(this.shru(1)))return bue;o=qh}else{if(this.eq(Qo)){if(e.eq(Lg)||e.eq(d3))return Qo;if(e.eq(Qo))return Lg;var s=this.shr(1);return r=s.div(e).shl(1),r.eq(Sa)?e.isNegative()?Lg:d3:(i=this.sub(e.mul(r)),o=r.add(i.div(e)),o)}else if(e.eq(Qo))return this.unsigned?qh:Sa;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=Sa}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:mA(2,a-48),c=_a(r),u=c.mul(e);u.isNegative()||u.gt(i);)r-=l,c=_a(r,this.unsigned),u=c.mul(e);c.isZero()&&(c=Lg),o=o.add(c),i=i.sub(u)}return o};rt.div=rt.divide;rt.modulo=function(e){if(hs(e)||(e=Pl(e)),wa){var n=(this.unsigned?wa.rem_u:wa.rem_s)(this.low,this.high,e.low,e.high);return Gn(n,wa.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};rt.mod=rt.modulo;rt.rem=rt.modulo;rt.not=function(){return Gn(~this.low,~this.high,this.unsigned)};rt.and=function(e){return hs(e)||(e=Pl(e)),Gn(this.low&e.low,this.high&e.high,this.unsigned)};rt.or=function(e){return hs(e)||(e=Pl(e)),Gn(this.low|e.low,this.high|e.high,this.unsigned)};rt.xor=function(e){return hs(e)||(e=Pl(e)),Gn(this.low^e.low,this.high^e.high,this.unsigned)};rt.shiftLeft=function(e){return hs(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Gn(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Gn(0,this.low<<e-32,this.unsigned)};rt.shl=rt.shiftLeft;rt.shiftRight=function(e){return hs(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Gn(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Gn(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};rt.shr=rt.shiftRight;rt.shiftRightUnsigned=function(e){if(hs(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return Gn(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?Gn(n,0,this.unsigned):Gn(n>>>e-32,0,this.unsigned)};rt.shru=rt.shiftRightUnsigned;rt.shr_u=rt.shiftRightUnsigned;rt.toSigned=function(){return this.unsigned?Gn(this.low,this.high,!1):this};rt.toUnsigned=function(){return this.unsigned?this:Gn(this.low,this.high,!0)};rt.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};rt.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};rt.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Hn.fromBytes=function(e,n,r){return r?Hn.fromBytesLE(e,n):Hn.fromBytesBE(e,n)};Hn.fromBytesLE=function(e,n){return new Hn(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};Hn.fromBytesBE=function(e,n){return new Hn(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const _ue=cn(vue),wdt=ZZ({__proto__:null,default:_ue},[vue]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kh=_ue||wdt;function x2(t){return kh.fromString(t,!0,16)}const Sue=x2("c3a5c85c97cb3127"),wh=x2("b492b66fbe98f273"),lo=x2("9ae16a3b2f90404f");function f3(t){return t.xor(t.shru(47))}function Cue(t,e,n){const r=t.slice(e,e+n);return kh.fromBytes(Array.from(r),!0,!0)}function Ln(t,e){return Cue(t,e,8)}function z7(t,e){return Cue(t,e,4)}function li(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function af(t,e,n=x2("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let i=e.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function _dt(t,e,n,r,i,o){i=i.add(t),o=li(o.add(i).add(r),21);const s=i;return i=i.add(e),i=i.add(n),o=o.add(li(i,44)),[i.add(r),o.add(s)]}function WC(t,e,n,r){return _dt(Ln(t,e),Ln(t,e+8),Ln(t,e+16),Ln(t,e+24),n,r)}function Sdt(t,e=t.length){if(e>=8){const n=lo.add(e*2),r=Ln(t,0).add(lo),i=Ln(t,e-8),o=li(i,37).mul(n).add(r),s=li(r,25).add(i).mul(n);return af(o,s,n)}if(e>=4){const n=lo.add(e*2),r=z7(t,0);return af(r.shl(3).add(e),z7(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],i=t[e-1],o=n+(r<<8),s=e+(i<<2);return f3(lo.mul(o).xor(Sue.mul(s))).mul(lo)}return lo}function Cdt(t,e=t.length){const n=lo.add(e*2),r=Ln(t,0).mul(wh),i=Ln(t,8),o=Ln(t,e-8).mul(n),s=Ln(t,e-16).mul(lo);return af(li(r.add(i),43).add(li(o,30)).add(s),r.add(li(i.add(lo),18)).add(o),n)}function Edt(t,e=t.length){const n=lo.add(e*2),r=Ln(t,0).mul(lo),i=Ln(t,8),o=Ln(t,e-8).mul(n),s=Ln(t,e-16).mul(lo),a=li(r.add(i),43).add(li(o,30)).add(s),l=af(a,r.add(li(i.add(lo),18)).add(o),n),c=Ln(t,16).mul(n),u=Ln(t,24),d=a.add(Ln(t,e-32)).mul(n),f=l.add(Ln(t,e-24)).mul(n);return af(li(c.add(u),43).add(li(d,30)).add(f),c.add(li(u.add(r),18)).add(d),n)}function Tdt(t,e=t.length){const n=kh.fromNumber(81,!0);if(e<=32)return e<=16?Sdt(t,e):Cdt(t,e);if(e<=64)return Edt(t,e);let r=n,i=n.mul(wh).add(113),o=f3(i.mul(lo).add(113)).mul(lo),s=[kh.UZERO,kh.UZERO],a=[kh.UZERO,kh.UZERO];r=r.mul(lo).add(Ln(t,0));let l=0;const c=(e-1>>6)*64,u=c+(e-1&63)-63;do r=li(r.add(i).add(s[0]).add(Ln(t,l+8)),37).mul(wh),i=li(i.add(s[1]).add(Ln(t,l+48)),42).mul(wh),r=r.xor(a[1]),i=i.add(s[0]).add(Ln(t,l+40)),o=li(o.add(a[0]),33).mul(wh),s=WC(t,l,s[1].mul(wh),r.add(a[0])),a=WC(t,l+32,o.add(a[1]),i.add(Ln(t,l+16))),[o,r]=[r,o],l+=64;while(l!==c);const d=wh.add(o.and(255).shl(1));return l=u,a[0]=a[0].add(e-1&63),s[0]=s[0].add(a[0]),a[0]=a[0].add(s[0]),r=li(r.add(i).add(s[0]).add(Ln(t,l+8)),37).mul(d),i=li(i.add(s[1]).add(Ln(t,l+48)),42).mul(d),r=r.xor(a[1].mul(9)),i=i.add(s[0].mul(9).add(Ln(t,l+40))),o=li(o.add(a[0]),33).mul(d),s=WC(t,l,s[1].mul(d),r.add(a[0])),a=WC(t,l+32,o.add(a[1]),i.add(Ln(t,l+16))),[o,r]=[r,o],af(af(s[0],a[0],d).add(f3(i).mul(Sue)).add(o),af(s[1],a[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zf(t,e){return e==="string"?lf(t):lm([t],e)}function kdt(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function lm(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Lp(t)),Te().getBool("DEBUG")&&rdt(t,e),kdt(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Co(){return Te().platform.now()}function lf(t,e="utf-8"){return e=e||"utf-8",Te().platform.encode(t,e)}function wf(t,e="utf-8"){return e=e||"utf-8",Te().platform.decode(t,e)}function $a(t){return Te().platform.isTypedArray!=null?Te().platform.isTypedArray(t):gue(t)}function Lp(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||q4(t)||t==null||$a(t)&&n)e.push(t);else if(Array.isArray(t)||$a(t))for(let r=0;r<t.length;++r)Lp(t[r],e,n);else{let r=-1;for(const i of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(i)&&(r=Math.max(r,Number(i)));for(let i=0;i<=r;i++)Lp(t[i],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Adt{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new Idt)}profileKernel(e,n,r){let i;const o=()=>{i=r()};let s;const a=Co();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(o);else{o();for(const c of i)c.dataSync();s=Promise.resolve({kernelMs:Co()-a})}if(Te().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<i.length;c++){const u=i[c];u.data().then(d=>{Mdt(d,u.dtype,e)})}return{kernelName:e,outputs:i,inputs:n,timeMs:s.then(c=>c.kernelMs),extraInfo:s.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:i,inputs:o,extraInfo:s}=e;r.forEach(a=>{Promise.all([a.data(),i,s]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],o,l[2])})})}}function Mdt(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const i=t[r];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${n}'`),!0}return!1}class Idt{logKernelProfile(e,n,r,i,o,s){const a=typeof i=="number"?ov(`${i}ms`,9):i.error,l=ov(e,25),c=n.rank,u=n.size,d=ov(n.shape.toString(),14);let f="";for(const h in o){const g=o[h];if(g!=null){const p=g.shape||n.shape,m=p.length;f+=`${h}: ${m}D ${m>0?p:""} `}}console.log(`%c${l}	%c${a}	%c${c}D ${d}	%c${u}	%c${f}	%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Odt(t,e,n){const r={},i={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],u=c.inputs;for(const d in u){const f=u[d];let h=!1;for(let g=0;g<e.length;g++)if(r[f.id]){c.outputs.forEach(p=>r[p.id]=!0),h=!0,i[c.id]=!0;break}if(h)break}}const o={};o[n.id]=!0;const s={};for(let l=t.length-1;l>=0;l--){const c=t[l],u=c.inputs;for(let d=0;d<c.outputs.length;d++)if(o[c.outputs[d].id]){for(const f in u)o[u[f].id]=!0,s[c.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const c=t[l];if(i[c.id]&&s[c.id]){const u={};for(const f in c.inputs){const h=c.inputs[f];r[h.id]&&(u[f]=h)}const d=Object.assign({},c);d.inputs=u,d.outputs=c.outputs,a.push(d)}}return a}function Rdt(t,e,n,r){for(let i=e.length-1;i>=0;i--){const o=e[i],s=[];if(o.outputs.forEach(l=>{const c=t[l.id];c!=null?s.push(c):s.push(null)}),o.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${o.kernelName}.`);const a=o.gradient(s);for(const l in o.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const c=n(()=>a[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const u=o.inputs[l];if(!mn(c.shape,u.shape))throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=c;else{const d=t[u.id];t[u.id]=r(d,c),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j7=20,ib=3,DP=7;function Ddt(t,e,n,r){const i=_t(e),o=Pdt(t,e,n,i),s=e.length,a=qE(t,e,n,i,o),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${s}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join(`
`)),l.join(`
`)}function Pdt(t,e,n,r){const i=Re(e),o=r[r.length-1],s=new Array(o).fill(0),a=e.length,l=n==="complex64"?_b(t):t;if(a>1)for(let c=0;c<i/o;c++){const u=c*o;for(let d=0;d<o;d++)s[d]=Math.max(s[d],wb(l[u+d],0,n).length)}return s}function wb(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(DP))} + ${parseFloat(t[1].toFixed(DP))}j`:q_(t)?r=`'${t}'`:n==="bool"?r=Eue(t):r=parseFloat(t.toFixed(DP)).toString(),ov(r,e)}function Eue(t){return t===0?"false":"true"}function qE(t,e,n,r,i,o=!0){const s=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const p=_b(t);return[wb(p[0],0,n)]}return n==="bool"?[Eue(t[0])]:[t[0].toString()]}if(l===1){if(a>j7){const m=ib*s;let v=Array.from(t.slice(0,m)),_=Array.from(t.slice((a-ib)*s,a*s));return n==="complex64"&&(v=_b(v),_=_b(_)),["["+v.map((w,y)=>wb(w,i[y],n)).join(", ")+", ..., "+_.map((w,y)=>wb(w,i[a-ib+y],n)).join(", ")+"]"]}return["["+(n==="complex64"?_b(t):Array.from(t)).map((m,v)=>wb(m,i[v],n)).join(", ")+"]"]}const c=e.slice(1),u=r.slice(1),d=r[0]*s,f=[];if(a>j7){for(let p=0;p<ib;p++){const m=p*d,v=m+d;f.push(...qE(t.slice(m,v),c,n,u,i,!1))}f.push("...");for(let p=a-ib;p<a;p++){const m=p*d,v=m+d;f.push(...qE(t.slice(m,v),c,n,u,i,p===a-1))}}else for(let p=0;p<a;p++){const m=p*d,v=m+d;f.push(...qE(t.slice(m,v),c,n,u,i,p===a-1))}const h=l===2?",":"";f[0]="["+(a>0?f[0]+h:"");for(let p=1;p<f.length-1;p++)f[p]=" "+f[p]+h;let g=`,
`;for(let p=2;p<l;p++)g+=`
`;return f[f.length-1]=" "+f[f.length-1]+"]"+(o?"":g),f}function _b(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ai{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=Re(e),r!=null){const i=r.length;Y(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||wr(n,this.size),this.strides=_t(e)}set(e,...n){n.length===0&&(n=[0]),Y(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const i of e){if(i<0||i>=this.shape[n]){const o=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(o)}n++}let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=this.strides[i]*e[i];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return sl().makeTensor(this.values,this.shape,this.dtype)}}let sl=null,mg=null;function Ndt(t){sl=t}function $dt(t){mg=t}class Vr{constructor(e,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=Re(e),this.strides=_t(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return mg.buffer(this.shape,this.dtype,e)}bufferSync(){return mg.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return xl(this.shape,e,this.dtype==="complex64")}arraySync(){return xl(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=sl().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>wf(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),sl().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=sl().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>wf(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await sl().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),sl().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return mg.print(this,e)}clone(){return this.throwIfDisposed(),mg.clone(this)}toString(e=!1){const n=this.dataSync();return Ddt(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),mg.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),sl().makeVariable(this,e,n,r)}}Object.defineProperty(Vr,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function Oe(){return X4("Tensor",()=>Vr)}Oe();class gA extends Vr{constructor(e,n,r,i){super(e.shape,e.dtype,e.dataId,i),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!mn(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);sl().disposeTensor(this),this.dataId=e.dataId,sl().incRef(this,null)}dispose(){sl().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(gA,Symbol.hasInstance,{value:t=>t instanceof Vr&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var W7;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(W7||(W7={}));var h3;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(h3||(h3={}));var p3;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(p3||(p3={}));var m3;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(m3||(m3={}));var g3;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(g3||(g3={}));const Ldt={float32:m3,int32:h3,bool:p3,complex64:g3};function cs(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return Ldt[t][e]}function LW(t){return cs(t,"int32")}function Tue(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function kue(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cr(t,e){if(t.dtype===e.dtype)return[t,e];const n=cs(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function Aue(t){const e=[];return Mue(t,e,new Set),e}function Mue(t,e,n){if(t==null)return;if(t instanceof Vr){e.push(t);return}if(!Fdt(t))return;const r=t;for(const i in r){const o=r[i];n.has(o)||(n.add(o),Mue(o,e,n))}}function Fdt(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PP(t){return t.kernelName!=null}class V7{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class sy{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new V7}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(Es(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Adt(this.backendInstance),!0}setupRegisteredKernels(){N7(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){N7(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof j4)&&typeof r.then=="function"){const i=++this.pendingBackendInitId,o=r.then(s=>i<this.pendingBackendInitId?!1:(this.registry[e]=s,this.pendingBackendInit=null,!0)).catch(s=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,Es(`Initialization of backend ${e} failed`),Es(s.stack||s.message)),!1));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Es(`Initialization of backend ${e} failed`),Es(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:i,asyncInit:o}=this.initializeBackend(r);if(o||i)return{name:r,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),i=r.backend,o=this.readSync(n),s=i.refCount(n);i.disposeData(n,!0),r.backend=e,e.move(n,o,r.shape,r.dtype,s),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let i;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(i),()=>(i=n(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(e,n,r){e();try{const i=r();return n(),i}catch(i){throw n(),i}}nextTensorId(){return sy.nextTensorId++}nextVariableId(){return sy.nextVariableId++}clone(e){const n=pe.runKernel(p1,{x:e}),r={x:e},i=s=>({x:()=>{const a="float32",l={x:s},c={dtype:a};return pe.runKernel(t1,l,c)}}),o=[];return this.addTapeNode(this.state.activeScope.name,r,[n],i,o,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(D7(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const i=this.backend.numDataIds();let o=0;r.forEach(l=>{o+=l.dtype==="complex64"?3:1});const s=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=i-n-o-s;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const i=this.isTapeOn(),o=this.state.numBytes,s=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const c=PP(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(PP(e)){const{kernelName:g,inputs:p,attrs:m}=e;this.backendName==null&&this.backend;const v=D7(g,this.backendName);Y(v!=null,()=>`Cannot find registered kernel '${g}' for backend '${this.backendName}'`),a=()=>{const _=this.backend.numDataIds();l=v.kernelFunc({inputs:p,attrs:m,backend:this.backend});const w=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(g,_,w);const y=w.map(b=>b.rank!=null?b:this.makeTensorFromTensorInfo(b));if(i){const b=this.getTensorsForGradient(g,p,y);r=this.saveTensorsForBackwardMode(b)}return y}}else{const{forwardFunc:g}=e,p=m=>{i&&(r=m.map(v=>this.keep(this.clone(v))))};a=()=>{const m=this.backend.numDataIds();l=this.tidy(()=>g(this.backend,p));const v=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,m,v),v}}const{inputs:u,attrs:d}=e,f=PP(e)?null:e.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(h=this.profiler.profileKernel(c,u,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),n=h.outputs)}),i&&this.addTapeNode(c,u,n,f,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(g=>u[g]!=null?u[g].shape:null),outputShapes:n.map(g=>g.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const i=P7(e);if(i!=null){const o=i.inputsToSave||[],s=i.outputsToSave||[];let a;i.saveAllInputs?(Y(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(c=>n[c])):a=o.map(c=>n[c]);const l=r.filter((c,u)=>s[u]);return a.concat(l)}return[]}makeTensor(e,n,r,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;let o=e;r==="string"&&q_(e[0])&&(o=e.map(l=>lf(l)));const s=i.write(o,n,r),a=new Vr(n,r,s,this.nextTensorId());if(this.trackTensor(a,i),r==="string"){const l=this.state.tensorInfo.get(s),c=odt(o);this.state.numBytes+=c-l.bytes,l.bytes=c}return a}makeTensorFromDataId(e,n,r,i){r=r||"float32";const o={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(o,i)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:i,dtype:o}=e,s=new Vr(i,o,r,this.nextTensorId());return this.trackTensor(s,n),s}makeVariable(e,n=!0,r,i){r=r||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.cast(i));const o=new gA(e,n,r,this.nextTensorId());if(this.state.registeredVariables[o.name]!=null)throw new Error(`Variable with name ${o.name} was already registered`);return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*dA(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof gA||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*dA(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,i,o,s){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:o},l=P7(e);l!=null&&(i=l.gradFunc),i!=null&&(a.gradient=c=>(c=c.map((u,d)=>{if(u==null){const f=r[d],h=Gi(f.size,f.dtype);return this.makeTensor(h,f.shape,f.dtype)}return u}),i(c.length>1?c:c[0],o,s))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=Aue(e),r=new Set(n.map(o=>o.id));for(let o=0;o<this.state.activeScope.track.length;o++){const s=this.state.activeScope.track[o];!s.kept&&!r.has(s.id)&&s.dispose()}const i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(o=>{!o.kept&&o.scopeId===i.id&&this.track(o)})}gradients(e,n,r,i=!1){if(Y(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const o=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));Y(o instanceof Vr,()=>"The result y returned by f() must be a tensor.");const s=Odt(this.state.activeTape,n,o);if(!i&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[o.id]=r??Bdt(o.shape),Rdt(a,s,c=>this.tidy(c),Udt);const l=n.map(c=>a[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const u of c.saved)u.dispose()}),this.state.activeTape=null),{value:o,grads:l}})}customGrad(e){return Y(s3(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{Y(n.every(a=>a instanceof Vr),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const i={};n.forEach((a,l)=>{i[l]=a});const o=(a,l)=>(r=e(...n,l),Y(r.value instanceof Vr,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),Y(s3(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),s=(a,l)=>{const c=r.gradFunc(a,l),u=Array.isArray(c)?c:[c];Y(u.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),Y(u.every(f=>f instanceof Vr),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return u.forEach((f,h)=>{d[h]=()=>f}),d};return this.runKernelFunc({forwardFunc:o,backwardsFunc:s,inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Co(),r=await this.backend.time(e);return r.wallMs=Co()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new V7;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}sy.nextTensorId=0;sy.nextVariableId=0;function Bdt(t){const e=G4(Re(t),"float32");return pe.makeTensor(e,t,"float32")}function Iue(){const t=Gce();if(t._tfengine==null){const e=new ldt(t);t._tfengine=new sy(e)}return fdt(t._tfengine.ENV),Ndt(()=>t._tfengine),t._tfengine}const pe=Iue();function Udt(t,e){const n={a:t,b:e};return pe.runKernel(t0,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zdt(){return typeof navigator<"u"&&navigator!=null}function Oue(t){if(t||zdt()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function Rue(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const No=Te();No.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});No.registerFlag("IS_BROWSER",()=>Rue());No.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");No.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));No.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));No.registerFlag("PROD",()=>!1);No.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>No.getBool("DEBUG"));No.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);No.registerFlag("IS_TEST",()=>!1);No.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>No.getBool("DEBUG"));No.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);No.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);No.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W1(t,e){let n=t;if($a(t))return e==="string"?[]:[t.length];if(Tue(t)){const i=t.channels||"RGBA";return[t.height,t.width*i.length]}else if(kue(t))return[t.buffer.size/(e==null?4:dA(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||$a(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&Te().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Due(t,r,[]),r}function Due(t,e,n){if(n=n||[],!Array.isArray(t)&&!$a(t)){Y(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}Y(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),Y(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let i=0;i<t.length;++i)Due(t[i],r,n.concat(i))}function H7(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function oe(t,e,n,r="numeric"){if(t instanceof Oe())return H7(r,t.dtype,e,n),t;let i=Jy(t);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),H7(r,i,e,n),t==null||!$a(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const o=W1(t,i);!$a(t)&&!Array.isArray(t)&&(t=[t]);const a=i!=="string"?lm(t,i):Lp(t,[],!0);return pe.makeTensor(a,o,i)}function Pue(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((o,s)=>oe(o,`${e}[${s}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jdt="__op";function ve(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+jdt;const i=(...o)=>{pe.startScope(n);try{const s=r(...o);return q4(s)&&console.error("Cannot return a Promise inside of tidy."),pe.endScope(s),s}catch(s){throw pe.endScope(null),s}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wdt(t,e){const n=oe(t,"real","complex"),r=oe(e,"imag","complex");V4(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const i={real:n,imag:r};return pe.runKernel(nW,i)}const Fp=ve({complex_:Wdt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V1(t,e,n,r){if(r==null)r=Jy(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(kue(t)||Tue(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return pe.backend.createTensorFromGPUData(t,e||n,r)}if(!$a(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){rd(e);const i=Re(e),o=Re(n);Y(i===o,()=>`Based on the provided shape, [${e}], the tensor should have ${i} values but has ${o}`);for(let s=0;s<n.length;++s){const a=n[s],l=s===n.length-1?a!==Re(e.slice(s)):!0;Y(n[s]===e[s]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!$a(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?lm(t,r):Lp(t,[],!0),pe.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nx(t,e,n){const r=W1(t,n);return V1(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vA={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class jf{static join(e){return new jf(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>$a(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const i=e[r];r!==e.length-1&&i.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const o=n+i.byteLength;this.shards.push({buffer:i,start:n,end:o}),n=o}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const i=n-e,o=new ArrayBuffer(i),s=new Uint8Array(o);let a=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],d=e+a-c.start,f=a,g=Math.min(n,c.end)-c.start,p=new Uint8Array(c.buffer,d,g-d);if(s.set(p,f),a+=p.length,n<c.end)break}return o}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(i){return e<i.start?-1:e>=i.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=Vdt(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function Vdt(t,e){let n=0,r=t.length;for(;n<=r;){const i=Math.floor((r-n)/2)+n,o=e(t[i]);if(o===0)return i;o<0?r=i:n=i+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bl(){return pe}function G7(){return pe.memory()}function Se(t,e){return pe.tidy(t,e)}function zt(t){Aue(t).forEach(n=>n.dispose())}function Ec(t){return pe.keep(t)}function Nue(t,e,n=1){return pe.registerBackend(t,e,n)}function Hdt(){return pe.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ay=4;async function q7(t,e){const n=[],r=[],i=Array.isArray(t)?t.map(s=>s.name):Object.keys(t);for(let s=0;s<i.length;++s){const a=i[s],l=Array.isArray(t)?t[s].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const c={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const u=new Promise(async d=>{const f=await l.bytes(),h=f.reduce((m,v)=>m+v.length,0)+ay*f.length,g=new Uint8Array(h);let p=0;for(let m=0;m<f.length;m++){const v=f[m],_=new Uint8Array(new Uint32Array([v.length]).buffer);g.set(_,p),p+=ay,g.set(v,p),p+=v.length}d(g)});r.push(u)}else r.push(l.data());e!=null&&(c.group=e),n.push(c)}const o=await Promise.all(r);return{data:Kdt(o),specs:n}}function Gdt(t,e){const n=new jf(t),r={};let i=0;for(const o of e){const s=qdt(o,(a,l)=>n.slice(i+a,i+l));r[o.name]=Xdt(o,n.slice(i,i+s)),i+=s}return r}function qdt(t,e){const n=Re(t.shape);let r;if("quantization"in t){const i=t.quantization;r=vA[i.dtype]}else if(t.dtype==="string"){let i=0;for(let o=0;o<n;o++)i+=ay+new Uint32Array(e(i,i+ay))[0];return i}else r=vA[t.dtype];return n*r}function Xdt(t,e){const n=t.name,r=t.dtype,i=t.shape,o=Re(i);let s,a=0;if("quantization"in t){const l=t.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const c=vA[l.dtype],u=l.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){s=new Float32Array(u.length);for(let d=0;d<u.length;d++){const f=u[d];s[d]=f*l.scale+l.min}}else if(l.dtype==="float16")s=oft()(u);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);s=new Int32Array(u.length);for(let d=0;d<u.length;d++){const f=u[d];s[d]=Math.round(f*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=o*c}else if(r==="string"){const l=Re(t.shape);s=[];for(let c=0;c<l;c++){const u=new Uint32Array(e.slice(a,a+ay))[0];a+=ay;const d=new Uint8Array(e.slice(a,a+u));s.push(d),a+=u}}else{const l=vA[r];if(r==="float32")s=new Float32Array(e);else if(r==="int32")s=new Int32Array(e);else if(r==="bool")s=new Uint8Array(e);else if(r==="complex64"){s=new Float32Array(e);const c=new Float32Array(s.length/2),u=new Float32Array(s.length/2);for(let g=0;g<c.length;g++)c[g]=s[g*2],u[g]=s[g*2+1];const d=nx(c,i,"float32"),f=nx(u,i,"float32"),h=Fp(d,f);return d.dispose(),f.dispose(),h}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=o*l}return nx(s,i,r)}function Kdt(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(o=>{if(e+=o.byteLength,n.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${o.constructor.name}`)});const r=new Uint8Array(e);let i=0;return n.forEach(o=>{r.set(new Uint8Array(o.buffer),i),i+=o.byteLength}),r.buffer}const FW=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function X7(t){return FW?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function Ydt(t){if(FW)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function Qdt(t){if(FW){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function Zdt(t){return jf.join(t)}function Jdt(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function eft(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function tft(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),eft(t,n,r)}function BW(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:X7(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:X7(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new jf(t.weightData).byteLength}}function K7(t){const e=[];for(const n of t)e.push(...n.weights);return e}function nft(){const t=n=>{let r=n<<13,i=0;for(;!(r&8388608);)i-=8388608,r<<=1;return r&=-8388609,i+=947912704,r|i},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function rft(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function ift(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function oft(){const t=nft(),e=rft(),n=ift();return r=>{const i=new ArrayBuffer(4*r.length),o=new Uint32Array(i);for(let s=0;s<r.length;s++){const a=r[s],l=t[n[a>>10]+(a&1023)]+e[a>>10];o[s]=l}return new Float32Array(i)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ii{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return ii.instance==null&&(ii.instance=new ii),ii.instance}static registerSaveRouter(e){ii.getInstance().saveRouters.push(e)}static registerLoadRouter(e){ii.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return ii.getHandlers(e,"save")}static getLoadHandlers(e,n){return ii.getHandlers(e,"load",n)}static getHandlers(e,n,r){const i=[];return(n==="load"?ii.getInstance().loadRouters:ii.getInstance().saveRouters).forEach(s=>{const a=s(e,r);a!==null&&i.push(a)}),i}}const sft=t=>ii.getSaveHandlers(t),aft=(t,e)=>ii.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v3="tensorflowjs",y3=1,Xh="models_store",zd="model_info_store";function $ue(){if(!Te().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function b3(t){const e=t.result;e.createObjectStore(Xh,{keyPath:"modelPath"}),e.createObjectStore(zd,{keyPath:"modelPath"})}class Bp{constructor(e){if(this.indexedDB=$ue(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,i)=>{const o=this.indexedDB.open(v3,y3);o.onupgradeneeded=()=>b3(o),o.onsuccess=()=>{const s=o.result;if(n==null){const a=s.transaction(Xh,"readonly"),c=a.objectStore(Xh).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return s.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=u=>(s.close(),i(c.error)),a.oncomplete=()=>s.close()}else{n.weightData=jf.join(n.weightData);const a=BW(n),l=s.transaction(zd,"readwrite");let c=l.objectStore(zd),u;try{u=c.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(f){return i(f)}let d;u.onsuccess=()=>{d=s.transaction(Xh,"readwrite");const f=d.objectStore(Xh);let h;try{h=f.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(g){return i(g)}h.onsuccess=()=>r({modelArtifactsInfo:a}),h.onerror=g=>{c=l.objectStore(zd);const p=c.delete(this.modelPath);p.onsuccess=()=>(s.close(),i(h.error)),p.onerror=m=>(s.close(),i(h.error))}},u.onerror=f=>(s.close(),i(u.error)),l.oncomplete=()=>{d==null?s.close():d.oncomplete=()=>s.close()}}},o.onerror=s=>i(o.error)})}}Bp.URL_SCHEME="indexeddb://";const Lue=t=>Te().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Bp.URL_SCHEME)?lft(t.slice(Bp.URL_SCHEME.length)):null;ii.registerSaveRouter(Lue);ii.registerLoadRouter(Lue);function lft(t){return new Bp(t)}function cft(t){return t.startsWith(Bp.URL_SCHEME)?t.slice(Bp.URL_SCHEME.length):t}class uft{constructor(){this.indexedDB=$ue()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(v3,y3);r.onupgradeneeded=()=>b3(r),r.onsuccess=()=>{const i=r.result,o=i.transaction(zd,"readonly"),a=o.objectStore(zd).getAll();a.onsuccess=()=>{const l={};for(const c of a.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},a.onerror=l=>(i.close(),n(a.error)),o.oncomplete=()=>i.close()},r.onerror=i=>n(r.error)})}async removeModel(e){return e=cft(e),new Promise((n,r)=>{const i=this.indexedDB.open(v3,y3);i.onupgradeneeded=()=>b3(i),i.onsuccess=()=>{const o=i.result,s=o.transaction(zd,"readwrite"),a=s.objectStore(zd),l=a.get(e);let c;l.onsuccess=()=>{if(l.result==null)return o.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const u=a.delete(e),d=()=>{c=o.transaction(Xh,"readwrite");const h=c.objectStore(Xh).delete(e);h.onsuccess=()=>n(l.result.modelArtifactsInfo),h.onerror=g=>r(l.error)};u.onsuccess=d,u.onerror=f=>(d(),o.close(),r(l.error))}},l.onerror=u=>(o.close(),r(l.error)),s.oncomplete=()=>{c==null?o.close():c.oncomplete=()=>o.close()}},i.onerror=o=>r(i.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const du="/",gg="tensorflowjs_models",Fue="info",dft="model_topology",fft="weight_specs",hft="weight_data",pft="model_metadata";function Bue(t){return{info:[gg,t,Fue].join(du),topology:[gg,t,dft].join(du),weightSpecs:[gg,t,fft].join(du),weightData:[gg,t,hft].join(du),modelMetadata:[gg,t,pft].join(du)}}function Uue(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function mft(t){const e=t.split(du);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(du)}function gft(t){return t.startsWith(Up.URL_SCHEME)?t.slice(Up.URL_SCHEME.length):t}class Up{constructor(e){if(!Te().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Bue(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=BW(e),o=jf.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Ydt(o));const s={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(s)),{modelArtifactsInfo:i}}catch{throw Uue(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=i;const o=this.LS.getItem(this.keys.modelMetadata);if(o!=null){const a=JSON.parse(o);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const s=this.LS.getItem(this.keys.weightData);if(s==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=Qdt(s),n}}Up.URL_SCHEME="localstorage://";const zue=t=>Te().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Up.URL_SCHEME)?vft(t.slice(Up.URL_SCHEME.length)):null;ii.registerSaveRouter(zue);ii.registerLoadRouter(zue);function vft(t){return new Up(t)}class yft{constructor(){Y(Te().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),Y(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=gg+du,r=du+Fue;for(let i=0;i<this.LS.length;++i){const o=this.LS.key(i);if(o.startsWith(n)&&o.endsWith(r)){const s=mft(o);e[s]=JSON.parse(this.LS.getItem(o))}}return e}async removeModel(e){e=gft(e);const n=Bue(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return Uue(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y7="://";class jl{constructor(){this.managers={}}static getInstance(){return jl.instance==null&&(jl.instance=new jl),jl.instance}static registerManager(e,n){Y(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Y7)&&(e=e.slice(0,e.indexOf(Y7))),Y(e.length>0,()=>"scheme must not be an empty string.");const r=jl.getInstance();Y(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=jl.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(jl.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bft{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!Te().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const i=this.functionRefs[r.data.index];i(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return gue(e)}}if(Te().get("IS_BROWSER")){Te().setPlatform("browser",new bft);try{jl.registerManager(Up.URL_SCHEME,new yft)}catch{}try{jl.registerManager(Bp.URL_SCHEME,new uft)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xft={importFetch:()=>require("node-fetch")};let NP;class wft{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return Te().global.fetch!=null?Te().global.fetch(e,n):(NP==null&&(NP=xft.importFetch()),NP(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}Te().get("IS_NODE")&&!Te().get("IS_BROWSER")&&Te().setPlatform("node",new wft);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vt(t,e="float32",n){return e=e||"float32",rd(t),new Ai(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ft(t,e){const n=oe(t,"x","cast");if(!idt(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},i={dtype:e};return pe.runKernel(t1,r,i)}const st=ve({cast_:_ft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sft(t){const n={x:oe(t,"x","clone","string_or_numeric")};return pe.runKernel(p1,n)}const lp=ve({clone_:Sft});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cft(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Iue();const Eft={buffer:Vt,cast:st,clone:lp,print:Cft};$dt(Eft);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tft(t,e){let n=oe(t,"a","add"),r=oe(e,"b","add");[n,r]=Cr(n,r);const i={a:n,b:r};return pe.runKernel(t0,i)}const Ke=ve({add_:Tft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kft(t,e){let n=oe(t,"a","floorDiv"),r=oe(e,"b","floorDiv");[n,r]=Cr(n,r);const i={a:n,b:r};return pe.runKernel(f1,i)}const jue=ve({floorDiv_:kft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aft(t,e){let n=oe(t,"a","div"),r=oe(e,"b","div");if([n,r]=Cr(n,r),n.dtype==="int32"&&r.dtype==="int32")return jue(n,r);const i={a:n,b:r},o={};return pe.runKernel(s1,i,o)}const Et=ve({div_:Aft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mft(t,e){let n=oe(t,"a","mul"),r=oe(e,"b","mul");[n,r]=Cr(n,r);const i={a:n,b:r};return pe.runKernel(S1,i)}const fe=ve({mul_:Mft});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ift(t){const e=oe(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return pe.runKernel(kO,n)}else{const n={x:e};return pe.runKernel(xO,n)}}const io=ve({abs_:Ift});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oft(t){const n={x:oe(t,"x","acos")};return pe.runKernel(X_,n)}const Rft=ve({acos_:Oft});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dft(t){const n={x:oe(t,"x","acosh")};return pe.runKernel(K_,n)}const Pft=ve({acosh_:Dft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nft(t,e=null,n=!1){const i={x:oe(t,"x","all","bool")},o={axis:e,keepDims:n};return pe.runKernel(Y4,i,o)}const Wue=ve({all_:Nft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ft(t,e=null,n=!1){const i={x:oe(t,"x","any","bool")},o={axis:e,keepDims:n};return pe.runKernel(Q4,i,o)}const x3=ve({any_:$ft});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lft(t,e=0){const r={x:oe(t,"x","argMax")},i={axis:e};return pe.runKernel(wO,r,i)}const Ow=ve({argMax_:Lft});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fft(t,e=0){const r={x:oe(t,"x","argMin")},i={axis:e};return pe.runKernel(_O,r,i)}const Bft=ve({argMin_:Fft});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uft(t){const n={x:oe(t,"x","asin")};return pe.runKernel(Y_,n)}const zft=ve({asin_:Uft});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jft(t){const n={x:oe(t,"x","asinh")};return pe.runKernel(Q_,n)}const Wft=ve({asinh_:jft});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vft(t){const n={x:oe(t,"x","atan")};return pe.runKernel(Z_,n)}const Hft=ve({atan_:Vft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gft(t,e){let n=oe(t,"a","atan2"),r=oe(e,"b","atan2");[n,r]=Cr(n,r);const i={a:n,b:r};return pe.runKernel(e1,i)}const qft=ve({atan2_:Gft});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xft(t){const n={x:oe(t,"x","atanh")};return pe.runKernel(J_,n)}const Kft=ve({atanh_:Xft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H1(t,e,n,r,i="NHWC",o){const s=t[3],a=[...e,s],l=od(i);return Di(t,a,n,o,r,null,null,l)}function ja(t,e,n,r,i,o,s="channelsLast"){const[a,l]=Rw(e);let c;if(s==="channelsLast")c=[a,l,t[3],t[3]];else if(s==="channelsFirst")c=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${s}`);return Di(t,c,n,r,i,o,!1,s)}function id(t,e,n,r,i,o,s="NDHWC"){const[a,l,c]=w3(e);let u,d;if(s==="NDHWC")d="channelsLast",u=[a,l,c,t[4],t[4]];else if(s==="NCDHW")d="channelsFirst",u=[a,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${s}`);return Wf(t,u,n,r,i,!1,d,o)}function Di(t,e,n,r,i,o,s=!1,a="channelsLast"){let[l,c,u,d]=[-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,d]=t;else if(a==="channelsFirst")[l,d,c,u]=t;else throw new Error(`Unknown dataFormat ${a}`);const[f,h,,g]=e,[p,m]=Rw(n),[v,_]=Rw(r),w=av(f,v),y=av(h,_),{padInfo:b,outHeight:x,outWidth:S}=Zft(i,c,u,p,m,w,y,o,a),C=s?g*d:g;let T;return a==="channelsFirst"?T=[l,C,x,S]:a==="channelsLast"&&(T=[l,x,S,C]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:d,outHeight:x,outWidth:S,outChannels:C,padInfo:b,strideHeight:p,strideWidth:m,filterHeight:f,filterWidth:h,effectiveFilterHeight:w,effectiveFilterWidth:y,dilationHeight:v,dilationWidth:_,inShape:t,outShape:T,filterShape:e}}function Wf(t,e,n,r,i,o=!1,s="channelsLast",a){let[l,c,u,d,f]=[-1,-1,-1,-1,-1];if(s==="channelsLast")[l,c,u,d,f]=t;else if(s==="channelsFirst")[l,f,c,u,d]=t;else throw new Error(`Unknown dataFormat ${s}`);const[h,g,p,,m]=e,[v,_,w]=w3(n),[y,b,x]=w3(r),S=av(h,y),C=av(g,b),T=av(p,x),{padInfo:E,outDepth:k,outHeight:A,outWidth:O}=Jft(i,c,u,d,v,_,w,S,C,T,a),D=o?m*f:m;let P;return s==="channelsFirst"?P=[l,D,k,A,O]:s==="channelsLast"&&(P=[l,k,A,O,D]),{batchSize:l,dataFormat:s,inDepth:c,inHeight:u,inWidth:d,inChannels:f,outDepth:k,outHeight:A,outWidth:O,outChannels:D,padInfo:E,strideDepth:v,strideHeight:_,strideWidth:w,filterDepth:h,filterHeight:g,filterWidth:p,effectiveFilterDepth:S,effectiveFilterHeight:C,effectiveFilterWidth:T,dilationDepth:y,dilationHeight:b,dilationWidth:x,inShape:t,outShape:P,filterShape:e}}function Yft(t,e,n,r,i){r==null&&(r=UW(t,e,n));const o=t[0],s=t[1],a=Dw((o-e+2*r)/n+1,i),l=Dw((s-e+2*r)/n+1,i);return[a,l]}function Qft(t,e,n,r,i,o){i==null&&(i=UW(t,e[0],r[0]));const s=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*i>=e[a]&&(s[a]=Dw((t[a]-e[a]+2*i)/r[a]+1,o));return s}function UW(t,e,n,r=1){const i=av(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function Rw(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function w3(t){return typeof t=="number"?[t,t,t]:t}function av(t,e){return e<=1?t:t+(t-1)*(e-1)}function Zft(t,e,n,r,i,o,s,a,l){let c,u,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const h=Yft([e,n],o,r,t,a);u=h[0],d=h[1]}else if(t==="same"){u=Math.ceil(e/r),d=Math.ceil(n/i);const f=Math.max(0,(u-1)*r+o-e),h=Math.max(0,(d-1)*i+s-n),g=Math.floor(f/2),p=f-g,m=Math.floor(h/2),v=h-m;c={top:g,bottom:p,left:m,right:v,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-o+1)/r),d=Math.ceil((n-s+1)/i);else if(typeof t=="object"){const f=l==="channelsLast"?t[1][0]:t[2][0],h=l==="channelsLast"?t[1][1]:t[2][1],g=l==="channelsLast"?t[2][0]:t[3][0],p=l==="channelsLast"?t[2][1]:t[3][1];c={top:f,bottom:h,left:g,right:p,type:f===0&&h===0&&g===0&&p===0?"VALID":"EXPLICIT"},u=Dw((e-o+f+h)/r+1,a),d=Dw((n-s+g+p)/i+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:u,outWidth:d}}function Jft(t,e,n,r,i,o,s,a,l,c,u){let d,f,h,g;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const m=Qft([e,n,r,1],[a,l,c],1,[i,o,s],t,u);f=m[0],h=m[1],g=m[2]}else if(t==="same"){f=Math.ceil(e/i),h=Math.ceil(n/o),g=Math.ceil(r/s);const p=(f-1)*i+a-e,m=(h-1)*o+l-n,v=(g-1)*s+c-r,_=Math.floor(p/2),w=p-_,y=Math.floor(m/2),b=m-y,x=Math.floor(v/2),S=v-x;d={top:y,bottom:b,left:x,right:S,front:_,back:w,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:f,outHeight:h,outWidth:g}}function Dw(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function zp(t){const[e,n,r]=Rw(t);return e===1&&n===1&&r===1}function Xi(t,e){return zp(t)||zp(e)}function jp(t){return Rw(t).every(e=>e>0)}function od(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Bo(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")Y(iy(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(i=>{Y(iy(i),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${i}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eht(t,e){const r={x:oe(t,"x","reshape","string_or_numeric")},i={shape:e};return pe.runKernel(a2,r,i)}const ge=ve({reshape_:eht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tht(t,e,n,r,i){const o=oe(t,"x","avgPool","float32"),s=1;Y(Xi(n,s),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);let a=o,l=!1;o.rank===3&&(l=!0,a=ge(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Y(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),Bo("avgPool",r,i);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:i};let d=pe.runKernel(SO,c,u);return d=st(d,o.dtype),l?ge(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const zW=ve({avgPool_:tht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nht(t,e,n,r,i,o="NDHWC"){const s=oe(t,"x","avgPool3d","float32");let a=s,l=!1;s.rank===4&&(l=!0,a=ge(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Y(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),Y(o==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`),Y(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Bo("avgPool3d",r,i);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:o};let d=pe.runKernel(CO,c,u);return d=st(d,a.dtype),l?ge(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const rht=ve({avgPool3d_:nht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iht(t,e=0){Y(t.length>=1,()=>"Pass at least one tensor to concat");const n=Pue(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(o=>{if(o.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${o.dtype}. `)}),n.length===1)return lp(n[0]);const r=n,i={axis:e};return pe.runKernel(AO,r,i)}const Po=ve({concat_:iht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oht(t,e,n=!1,r=!1){let i=oe(t,"a","matMul"),o=oe(e,"b","matMul");[i,o]=Cr(i,o);const s={a:i,b:o},a={transposeA:n,transposeB:r};return pe.runKernel(EO,s,a)}const un=ve({matMul_:oht});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sht(t){const n={x:oe(t,"x","sigmoid","float32")};return pe.runKernel(P1,n)}const n0=ve({sigmoid_:sht});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aht(t,e,n){const r=oe(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const i={x:r},o={begin:e,size:n};return pe.runKernel(f2,i,o)}const Fn=ve({slice_:aht});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lht(t){const n={x:oe(t,"x","tanh","float32")};return pe.runKernel(U1,n)}const w2=ve({tanh_:lht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cht(t,e,n){const r=oe(t,"x","batchToSpaceND"),i=e.reduce((a,l)=>a*l);Y(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),Y(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),Y(r.shape[0]%i===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${i}`);const o={x:r},s={blockShape:e,crops:n};return pe.runKernel(TO,o,s)}const jW=ve({batchToSpaceND_:cht});function uht(t){let e;return t.rank===0||t.rank===1?e=ge(t,[1,1,1,t.size]):t.rank===2?e=ge(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=ge(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dht(t,e,n,r,i,o){o==null&&(o=.001);const s=oe(t,"x","batchNorm"),a=oe(e,"mean","batchNorm"),l=oe(n,"variance","batchNorm");let c;i!=null&&(c=oe(i,"scale","batchNorm"));let u;r!=null&&(u=oe(r,"offset","batchNorm")),Y(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Y(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Y(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const f={x:uht(s),scale:c,offset:u,mean:a,variance:l},h={varianceEpsilon:o},g=pe.runKernel(LO,f,h);return ge(g,s.shape)}const _2=ve({batchNorm_:dht});function fht(t,e,n,r,i,o){const s=oe(t,"x","batchNorm"),a=oe(e,"mean","batchNorm"),l=oe(n,"variance","batchNorm");let c;i!=null&&(c=oe(i,"scale","batchNorm"));let u;return r!=null&&(u=oe(r,"offset","batchNorm")),Y(s.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${s.rank}.`),Y(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),Y(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&Y(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&Y(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),_2(s,a,l,u,c,o)}const hht=ve({batchNorm2d_:fht});function pht(t,e,n,r,i,o){const s=oe(t,"x","batchNorm"),a=oe(e,"mean","batchNorm"),l=oe(n,"variance","batchNorm");let c;i!=null&&(c=oe(i,"scale","batchNorm"));let u;return r!=null&&(u=oe(r,"offset","batchNorm")),Y(s.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${s.rank}.`),Y(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),Y(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&Y(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&Y(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),_2(s,a,l,u,c,o)}const mht=ve({batchNorm3d_:pht});function ght(t,e,n,r,i,o){const s=oe(t,"x","batchNorm"),a=oe(e,"mean","batchNorm"),l=oe(n,"variance","batchNorm");let c;i!=null&&(c=oe(i,"scale","batchNorm"));let u;return r!=null&&(u=oe(r,"offset","batchNorm")),Y(s.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${s.rank}.`),Y(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),Y(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&Y(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&Y(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),_2(s,a,l,u,c,o)}const vht=ve({batchNorm4d_:ght});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yht(t,e,n){const r=oe(t,"x","bincount"),i=oe(e,"weights","bincount");Y(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),Y(n>=0,()=>`size must be non-negative, but got ${n}.`),Y(i.size===r.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`);const o={x:r,weights:i},s={size:n};return pe.runKernel(eW,o,s)}const bht=ve({bincount_:yht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xht(t,e){let n=oe(t,"broadcastTo","x");const r=n.shape;if(rd(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=ge(n,c)}const i=n.shape,o=Array.from(e);for(let c=e.length-1;c>=0;c--)if(i[c]===e[c])o[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(o.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return lp(n);const a={x:n},l={reps:o};return pe.runKernel(z1,a,l)}const rx=ve({broadcastTo_:xht});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wht(t){const n={x:oe(t,"x","ceil","float32")};return pe.runKernel(n1,n)}const _ht=ve({ceil_:wht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S2(t,e,n){rd(t),n=n||Jy(e);const r={shape:t,value:e,dtype:n};return pe.runKernel(mW,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sht(t,e,n){const r=oe(t,"x","clipByValue");if(Y(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return S2(r.shape,e,r.dtype);const i={x:r},o={clipValueMin:e,clipValueMax:n};return pe.runKernel(r1,i,o)}const Ws=ve({clipByValue_:Sht});function Cht(t){return Po(t,0)}const Eht=ve({concat1d_:Cht});function Tht(t,e){return Po(t,e)}const kht=ve({concat2d_:Tht});function Aht(t,e){return Po(t,e)}const Mht=ve({concat3d_:Aht});function Iht(t,e){return Po(t,e)}const Oht=ve({concat4d_:Iht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rht(t,e,n,r,i="NHWC",o=[1,1],s){const a=oe(t,"x","conv2d","float32"),l=oe(e,"filter","conv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=ge(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Y(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),Y(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Bo("conv2d",r,s);const d=i==="NHWC"?c.shape[3]:c.shape[1];Y(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),Y(Xi(n,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),Y(jp(o),()=>"Error in conv2D: Dilated rates should be larger than 0."),Y(jp(n),()=>"Error in conv2D: Strides should be larger than 0.");const f={x:c,filter:l},h={strides:n,pad:r,dataFormat:i,dilations:o,dimRoundingMode:s},g=pe.runKernel(MO,f,h);return u?ge(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const Wp=ve({conv2d_:Rht});function Dht(t,e,n,r,i="NWC",o=1,s){const a=oe(t,"x","conv1d"),l=oe(e,"filter","conv1d");let c=a,u=!1;a.rank===2&&(u=!0,c=ge(a,[1,a.shape[0],a.shape[1]])),Y(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),Y(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Bo("conv1d",r,s),Y(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),Y(Xi(n,o),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${o}'`),Y(jp(o),()=>"Error in conv1D: Dilated rates should be larger than 0."),Y(jp(n),()=>"Error in conv1D: Stride should be larger than 0."),Y(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const d=ge(l,[1,l.shape[0],l.shape[1],l.shape[2]]),f=ge(c,[c.shape[0],1,c.shape[1],c.shape[2]]),m=Wp(f,d,[1,n],r,"NHWC",[1,o],s);return u?ge(m,[m.shape[2],m.shape[3]]):ge(m,[m.shape[0],m.shape[2],m.shape[3]])}const Vue=ve({conv1d_:Dht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pht(t,e,n,r,i,o="NHWC",s){Y(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,c=!1;e.rank===3&&(c=!0,l=ge(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),Y(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),Y(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),Y(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const u=o==="NHWC"?a[3]:a[1],d=o==="NHWC"?l.shape[3]:l.shape[1];Y(u===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[2]}.`),Y(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),Bo("conv2dDerInput",i,s);const f={dy:l,filter:n},h={strides:r,pad:i,dataFormat:o,dimRoundingMode:s,inputShape:a},g=pe.runKernel(IO,f,h);return c?ge(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const WW=ve({conv2DBackpropInput_:Pht});function Nht(t,e,n,r,i,o){const s=oe(t,"x","conv2dTranspose"),a=oe(e,"filter","conv2dTranspose");return WW(n,s,a,r,i,"NHWC",o)}const Hue=ve({conv2dTranspose_:Nht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ht(t,e,n,r,i="NDHWC",o=[1,1,1]){const s=oe(t,"x","conv3d"),a=oe(e,"filter","conv3d");let l=s,c=!1;s.rank===4&&(c=!0,l=ge(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Y(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),Y(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),Y(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),Y(Xi(n,o),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),Y(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),Y(jp(o),()=>"Error in conv3D: Dilated rates should be larger than 0."),Y(jp(n),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:l,filter:a},d={strides:n,pad:r,dataFormat:i,dilations:o},f=pe.runKernel(OO,u,d);return c?ge(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const Lht=ve({conv3d_:$ht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fht(t,e,n,r,i){Y(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let o=t,s=e,a=!1;e.rank===4&&(a=!0,s=ge(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),o=[1,t[0],t[1],t[2],t[3]]);const l=o[4],c=s.shape[4];Y(o.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${o.length}.`),Y(s.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${s.rank}`),Y(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),Y(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),Y(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const u={dy:s,filter:n},d={pad:i,strides:r,inputShape:o},f=pe.runKernel(oW,u,d);return a?ge(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const Gue=ve({conv3DBackpropInput_:Fht});function Bht(t,e,n,r,i){const o=oe(t,"x","conv3dTranspose"),s=oe(e,"filter","conv3dTranspose");return Gue(n,o,s,r,i)}const Uht=ve({conv3dTranspose_:Bht});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zht(t){const n={x:oe(t,"x","cos","float32")};return pe.runKernel(i1,n)}const VW=ve({cos_:zht});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jht(t){const n={x:oe(t,"x","cosh","float32")};return pe.runKernel(o1,n)}const que=ve({cosh_:jht});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wht(t,e=0,n=!1,r=!1){const o={x:oe(t,"x","cumprod")},s={axis:e,exclusive:n,reverse:r};return pe.runKernel(sW,o,s)}const _3=ve({cumprod_:Wht});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vht(t,e=0,n=!1,r=!1){const o={x:oe(t,"x","cumsum")},s={axis:e,exclusive:n,reverse:r};return pe.runKernel(RO,o,s)}const Xue=ve({cumsum_:Vht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hht(t,e,n,r=!1){const i=oe(t,"x","denseBincount"),o=oe(e,"weights","denseBincount");Y(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),Y(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),Y(n>=0,()=>`size must be non-negative, but got ${n}.`),Y(o.size===i.size||o.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${o.shape}.`);const s={x:i,weights:o},a={size:n,binaryOutput:r};return pe.runKernel(lW,s,a)}const Q7=ve({denseBincount_:Hht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ght(t,e,n="NHWC"){const r=oe(t,"x","depthToSpace","float32"),i=n==="NHWC"?r.shape[1]:r.shape[2],o=n==="NHWC"?r.shape[2]:r.shape[3],s=n==="NHWC"?r.shape[3]:r.shape[1];Y(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),Y(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e}  for depthToSpace with input shape
    ${r.shape}`),Y(o*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${e} for depthToSpace with input shape
        ${r.shape}`),Y(s%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${s} for depthToSpace with input shape ${r.shape}`);const a={x:r},l={blockSize:e,dataFormat:n};return pe.runKernel(cW,a,l)}const qht=ve({depthToSpace_:Ght});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xht(t,e,n,r,i="NHWC",o=[1,1],s){const a=oe(t,"x","depthwiseConv2d","float32"),l=oe(e,"filter","depthwiseConv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=ge(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Y(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),Y(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=i==="NHWC"?c.shape[3]:c.shape[1];Y(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),Bo("depthwiseConv2d",r,s);const f={x:c,filter:l},h={strides:n,pad:r,dataFormat:i,dilations:o,dimRoundingMode:s},g=pe.runKernel(DO,f,h);return u?ge(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const HW=ve({depthwiseConv2d_:Xht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kht(t,e,n,r,i=[1,1],o="NHWC"){const s=oe(t,"x","dilation2d"),a=oe(e,"filter","dilation2d");Y(s.rank===3||s.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${s.rank}.`),Y(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),Y(o==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${o}`);let l=s,c=!1;s.rank===3&&(l=ge(s,[1,s.shape[0],s.shape[1],s.shape[2]]),c=!0),Y(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const u={x:l,filter:a},d={strides:n,pad:r,dilations:i},f=pe.runKernel(PO,u,d);return c?ge(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const Yht=ve({dilation2d_:Kht});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ly(t,e){const n=t.length,r=[];for(let i=0;i<n;i++){const o=n-1-i,s=t[o]||1;(e[e.length-1-i]||1)>1&&s===1&&r.unshift(o)}return r}function Zr(t,e){const n=[];for(let r=0;r<e.length;r++){const i=t[t.length-r-1],o=e.length-r-1,s=e[o];(i==null||i===1&&s>1)&&n.unshift(o)}return n}function Lt(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let i=0;i<n;i++){let o=t[t.length-i-1];o==null&&(o=1);let s=e[e.length-i-1];if(s==null&&(s=1),o===1)r[n-i-1]=s;else if(s===1)r[n-i-1]=o;else if(o!==s){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-i-1]=o}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qht(t,e){let n=oe(t,"a","equal","string_or_numeric"),r=oe(e,"b","equal","string_or_numeric");[n,r]=Cr(n,r),Lt(n.shape,r.shape);const i={a:n,b:r};return pe.runKernel(NO,i)}const $c=ve({equal_:Qht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zht(t,e,n){const r=oe(e,"a","where"),i=oe(n,"b","where"),o=oe(t,"condition","where","bool"),s=Lt(Lt(o.shape,r.shape),i.shape),a=rx(o,s),l=rx(r,s),c=rx(i,s),u={condition:a,t:l,e:c};return pe.runKernel(d2,u)}const ho=ve({where_:Zht});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jht(t){const n={x:oe(t,"x","zerosLike")};return pe.runKernel(b2,n)}const en=ve({zerosLike_:Jht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ept(t,e){let n=oe(t,"a","div"),r=oe(e,"b","div");[n,r]=Cr(n,r);const i=Et(n,r),o=en(i),s=$c(r,o);return ho(s,o,i)}const tpt=ve({divNoNan_:ept});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function npt(t,e){const n=oe(t,"t1","dot"),r=oe(e,"t2","dot");Y((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const i=n.rank===1?n.size:n.shape[1],o=r.rank===1?r.size:r.shape[0];if(Y(i===o,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${o}.`),n.rank===1&&r.rank===1){const s=ge(n,[1,-1]),a=ge(r,[-1,1]),l=un(s,a);return ge(l,[])}else if(n.rank===1&&r.rank===2){const s=ge(n,[1,-1]),a=ge(r,[r.shape[0],r.shape[1]]),l=un(s,a);return ge(l,[l.size])}else if(n.rank===2&&r.rank===1){const s=ge(r,[-1,1]),a=un(n,s);return ge(a,[a.size])}else{const s=ge(r,[r.shape[0],r.shape[1]]);return un(n,s)}}const rpt=ve({dot_:npt});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ipt(t,...e){const n=e.map((i,o)=>oe(i,`tensors${o}`,"einsum")),r={equation:t};return pe.runKernel(fW,n,r)}const ob=ve({einsum_:ipt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function opt(t){const n={x:oe(t,"x","elu","float32")};return pe.runKernel(a1,n)}const C2=ve({elu_:opt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function spt(t){let e=oe(t,"x","erf");Y(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=st(e,"float32"));const n={x:e};return pe.runKernel(l1,n)}const Kue=ve({erf_:spt});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GW(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function Yue(t,e,n){const r=t.length+e.length,i=[];let o=0,s=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?i.push(t[o++]):i.push(e[s++]);return i}function bi(t,e){const n=[],r=t.length;for(let o=0;o<r;o++)e.indexOf(o)===-1&&n.push(t[o]);const i=e.map(o=>t[o]);return[n,i]}function $r(t,e){const n=e.map(r=>1);return Yue(t,n,e)}function Pi(t,e,n){Y(GW(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function cr(t,e){if(GW(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function Vf(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Er(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function apt(t,e=null,n=!1){const i={x:oe(t,"x","max")},o={reductionIndices:e,keepDims:n};return pe.runKernel(qO,i,o)}const wl=ve({max_:apt});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lpt(t,e=null,n=!1){const i={x:oe(t,"x","min")},o={axis:e,keepDims:n};return pe.runKernel(QO,i,o)}const yA=ve({min_:lpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cpt(t,e){let n=oe(t,"base","pow"),r=oe(e,"exp","pow");[n,r]=Cr(n,r);const i={a:n,b:r};return pe.runKernel(C1,i)}const Vp=ve({pow_:cpt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dn(t,e){if(($a(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&$a(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return V1(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function upt(t){const n={x:oe(t,"x","sqrt","float32")};return pe.runKernel($1,n)}const qi=ve({sqrt_:upt});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dpt(t){const e=oe(t,"x","square"),n={};return pe.runKernel("Square",{x:e},n)}const Vn=ve({square_:dpt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fpt(t,e=null,n=!1){let r=oe(t,"x","sum");r.dtype==="bool"&&(r=st(r,"int32"));const i={x:r},o={axis:e,keepDims:n};return pe.runKernel(h2,i,o)}const St=ve({sum_:fpt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hpt(t,e="euclidean",n=null,r=!1){t=oe(t,"x","norm");const i=Que(t,e,n);let o=i.shape;if(r){const s=Gt(n,t.shape);o=$r(i.shape,s)}return ge(i,o)}function Que(t,e,n=null){if(t.rank===0)return io(t);if(t.rank!==1&&n===null)return Que(ge(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return St(io(t),n);if(e===1/0)return wl(io(t),n);if(e===-1/0)return yA(io(t),n);if(e==="euclidean"||e===2)return qi(St(Vp(io(t),dn(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return wl(St(io(t),n[0]),n[1]-1);if(e===1/0)return wl(St(io(t),n[1]),n[0]);if(e===-1/0)return yA(St(io(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return qi(St(Vn(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const E2=ve({norm_:hpt});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ppt(t,e=null,n=!1){return E2(t,"euclidean",e,n)}const mpt=ve({euclideanNorm_:ppt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gpt(t){const n={x:oe(t,"x","exp")};return pe.runKernel(c1,n)}const Lc=ve({exp_:gpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vpt(t,e=0){const n=oe(t,"x","expandDims","string_or_numeric");Y(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},i={dim:e};return pe.runKernel($O,r,i)}const Eo=ve({expandDims_:vpt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ypt(t){const n={x:oe(t,"x","expm1")};return pe.runKernel(u1,n)}const bpt=ve({expm1_:ypt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xpt(t,e){const n=oe(t,"x","tile","string_or_numeric");Y(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},i={reps:e};return pe.runKernel(z1,r,i)}const hl=ve({tile_:xpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wpt(t,e,n,r="float32"){e==null&&(e=t);const i=Vt([t,e],r),o=t<=e?t:e;for(let a=0;a<o;++a)i.set(1,a,a);const s=ge(i.toTensor(),[t,e]);if(n==null)return s;if(n.length===1)return hl(Eo(s,0),[n[0],1,1]);if(n.length===2)return hl(Eo(Eo(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return hl(Eo(Eo(Eo(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const Zue=ve({eye_:wpt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _pt(t){const n={x:oe(t,"x","floor","float32")};return pe.runKernel(d1,n)}const T2=ve({floor_:_pt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Spt(t,e,n=0,r=0){const i=oe(t,"x","gather"),o=oe(e,"indices","gather","int32"),s={x:i,indices:o},a={axis:n,batchDims:r};return pe.runKernel(FO,s,a)}const qW=ve({gather_:Spt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cpt(t,e){let n=oe(t,"a","greater","string_or_numeric"),r=oe(e,"b","greater","string_or_numeric");[n,r]=Cr(n,r),Lt(n.shape,r.shape);const i={a:n,b:r};return pe.runKernel(BO,i)}const Ys=ve({greater_:Cpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ept(t,e){let n=oe(t,"a","greaterEqual","string_or_numeric"),r=oe(e,"b","greaterEqual","string_or_numeric");[n,r]=Cr(n,r),Lt(n.shape,r.shape);const i={a:n,b:r};return pe.runKernel(h1,i)}const cm=ve({greaterEqual_:Ept});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tpt(t){const n={input:oe(t,"input","imag")};return pe.runKernel(yW,n)}const XW=ve({imag_:Tpt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kpt(t){const n={x:oe(t,"x","isFinite")};return pe.runKernel(m1,n)}const Apt=ve({isFinite_:kpt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mpt(t){const n={x:oe(t,"x","isInf")};return pe.runKernel(g1,n)}const Ipt=ve({isInf_:Mpt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Opt(t){const n={x:oe(t,"x","isNaN")};return pe.runKernel(v1,n)}const Rpt=ve({isNaN_:Opt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dpt(t,e=.2){const r={x:oe(t,"x","leakyRelu")},i={alpha:e};return pe.runKernel(UO,r,i)}const KW=ve({leakyRelu_:Dpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ppt(t,e){let n=oe(t,"a","less","string_or_numeric"),r=oe(e,"b","less","string_or_numeric");[n,r]=Cr(n,r),Lt(n.shape,r.shape);const i={a:n,b:r};return pe.runKernel(zO,i)}const bA=ve({less_:Ppt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Npt(t,e){let n=oe(t,"a","lessEqual","string_or_numeric"),r=oe(e,"b","lessEqual","string_or_numeric");[n,r]=Cr(n,r),Lt(n.shape,r.shape);const i={a:n,b:r};return pe.runKernel(jO,i)}const r0=ve({lessEqual_:Npt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $pt(t,e=5,n=1,r=1,i=.5){const o=oe(t,"x","localResponseNormalization");Y(o.rank===4||o.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${o.rank}.`),Y(iy(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let s=o,a=!1;o.rank===3&&(a=!0,s=ge(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const l={x:s},c={depthRadius:e,bias:n,alpha:r,beta:i},u=pe.runKernel(GO,l,c);return a?ge(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const Lpt=ve({localResponseNormalization_:$pt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fpt(t){const n={x:oe(t,"x","log","float32")};return pe.runKernel(y1,n)}const Fc=ve({log_:Fpt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bpt(t){const n={x:oe(t,"x","log1p")};return pe.runKernel(b1,n)}const Jue=ve({log1p_:Bpt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Upt(t,e){Y(s3(t),()=>"The f passed in variableGrads(f) must be a function"),Y(e==null||Array.isArray(e)&&e.every(c=>c instanceof gA),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const c in pe.registeredVariables)e.push(pe.registeredVariables[c])}const r=n?e.filter(c=>!c.trainable):null,i=e.length;e=e.filter(c=>c.trainable),Y(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);const o=!0,{value:s,grads:a}=pe.gradients(t,e,null,o);Y(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),Y(s.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);const l={};return e.forEach((c,u)=>{a[u]!=null&&(l[c.name]=a[u])}),r!=null&&r.forEach(c=>l[c.name]=null),{value:s,grads:l}}function cy(t){return pe.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zpt(t){const n={x:oe(t,"x","neg")};return pe.runKernel(JO,n)}const _r=ve({neg_:zpt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jpt(t){const n={x:oe(t,"x","softplus")};return pe.runKernel(N1,n)}const G1=ve({softplus_:jpt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wpt(t){const e=oe(t,"x","logSigmoid");return cy(r=>({value:_r(G1(_r(r))),gradFunc:s=>fe(s,n0(_r(r)))}))(e)}const Vpt=ve({logSigmoid_:Wpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hpt(t,e){let n=oe(t,"a","sub"),r=oe(e,"b","sub");[n,r]=Cr(n,r);const i={a:n,b:r};return pe.runKernel(F1,i)}const Tt=ve({sub_:Hpt});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gpt(t,e=-1){const n=oe(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return cy((i,o)=>{const a=wl(i,e,!0),l=Tt(i,a),c=Tt(st(l,"float32"),Fc(St(Lc(l),e,!0)));return o([c]),{value:c,gradFunc:(d,f)=>{const[h]=f,g=!0,p=Lc(h);return Tt(d,fe(St(d,e,g),p))}}})(n)}const ede=ve({logSoftmax_:Gpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qpt(t,e=null,n=!1){const r=oe(t,"x","logSumExp"),i=Gt(e,r.shape),o=wl(r,i,!0),s=Tt(r,o),a=Lc(s),l=St(a,i),c=Fc(l),u=Ke(ge(o,c.shape),c);if(n){const d=$r(u.shape,i);return ge(u,d)}return u}const tde=ve({logSumExp_:qpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xpt(t,e){const n=oe(t,"a","logicalAnd","bool"),r=oe(e,"b","logicalAnd","bool");Lt(n.shape,r.shape);const i={a:n,b:r};return pe.runKernel(WO,i)}const Wu=ve({logicalAnd_:Xpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kpt(t){const n={x:oe(t,"x","logicalNot","bool")};return pe.runKernel(VO,n)}const YW=ve({logicalNot_:Kpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ypt(t,e){const n=oe(t,"a","logicalOr","bool"),r=oe(e,"b","logicalOr","bool");Lt(n.shape,r.shape);const i={a:n,b:r};return pe.runKernel(HO,i)}const nde=ve({logicalOr_:Ypt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qpt(t,e){const n=oe(t,"a","logicalXor","bool"),r=oe(e,"b","logicalXor","bool");return Lt(n.shape,r.shape),Wu(nde(t,e),YW(Wu(t,e)))}const Zpt=ve({logicalXor_:Qpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jpt(t,e,n,r,i){const o=oe(t,"x","maxPool"),s=1;let a=o,l=!1;o.rank===3&&(l=!0,a=ge(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Y(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),Y(Xi(n,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),Bo("maxPool",r,i);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:i},d=pe.runKernel(XO,c,u);return l?ge(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const QW=ve({maxPool_:Jpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function emt(t,e=[1,1,1],n,r,i,o="NDHWC"){const s=oe(t,"x","maxPool3d");let a=s,l=!1;s.rank===4&&(l=!0,a=ge(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Y(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),Y(o==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`),Bo("maxPool3d",r,i);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:o},d=pe.runKernel(KO,c,u);return l?ge(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const tmt=ve({maxPool3d_:emt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nmt(t,e){let n=oe(t,"a","maximum"),r=oe(e,"b","maximum");[n,r]=Cr(n,r),n.dtype==="bool"&&(n=st(n,"int32"),r=st(r,"int32")),Lt(n.shape,r.shape);const i={a:n,b:r};return pe.runKernel(x1,i)}const Hf=ve({maximum_:nmt});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rmt(t,e=null,n=!1){const i={x:oe(t,"x","mean")},o={axis:e,keepDims:n};return pe.runKernel(YO,i,o)}const Rr=ve({mean_:rmt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ui(t,e="float32"){if(rd(t),e==="complex64"){const r=ui(t,"float32"),i=ui(t,"float32");return Fp(r,i)}const n=Gi(Re(t),e);return pe.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gf(t,e="float32"){if(rd(t),e==="complex64"){const r=Gf(t,"float32"),i=ui(t,"float32");return Fp(r,i)}const n=G4(Re(t),e);return pe.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function imt(t,e){let n=oe(t,"a","minimum"),r=oe(e,"b","minimum");[n,r]=Cr(n,r),n.dtype==="bool"&&(n=st(n,"int32"),r=st(r,"int32")),Lt(n.shape,r.shape);const i={a:n,b:r};return pe.runKernel(w1,i)}const Pw=ve({minimum_:imt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function omt(t,e,n){Y(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=oe(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");Y(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const i=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)Y(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Y(e[a][0]>=0&&e[a][0]<=r.shape[a]-i&&e[a][1]>=0&&e[a][1]<=r.shape[a]-i,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-i} or less than 0 for input of shape ${r.shape}`);const o={paddings:e,mode:n},s={x:r};return pe.runKernel(ZO,s,o)}const smt=ve({mirrorPad_:omt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function amt(t,e){let n=oe(t,"a","mod"),r=oe(e,"b","mod");[n,r]=Cr(n,r);const i={a:n,b:r};return pe.runKernel(_1,i)}const lmt=ve({mod_:amt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cmt(t,e=null,n=!1){t=oe(t,"x","moments");const r=Gt(e,t.shape),i=Rr(t,r,n);let o=i.shape;n||(o=$r(i.shape,r));const s=Vn(Tt(st(t,"float32"),ge(i,o))),a=Rr(s,r,n);return{mean:i,variance:a}}const ZW=ve({moments_:cmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function umt(t,e){let n=oe(t,"a","notEqual","string_or_numeric"),r=oe(e,"b","notEqual","string_or_numeric");[n,r]=Cr(n,r),Lt(n.shape,r.shape);const i={a:n,b:r};return pe.runKernel(e2,i)}const xA=ve({notEqual_:umt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dmt(t,e,n=1,r=0,i="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const s={indices:oe(t,"indices","oneHot","int32")},a={dtype:i,depth:e,onValue:n,offValue:r};return pe.runKernel(n2,s,a)}const rde=ve({oneHot_:dmt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fmt(t){const n={x:oe(t,"x","onesLike")};return pe.runKernel(t2,n)}const La=ve({onesLike_:fmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hmt(t,e,n=0){const r=oe(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:e,constantValue:n},o={x:r};return pe.runKernel(i2,o,i)}const JW=ve({pad_:hmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pmt(t,e,n){const r=oe(t,"x","spaceToBatchND");Y(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),Y(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),Y(r.shape.reduce((s,a,l)=>l>0&&l<=e.length?s&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:s,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const i={x:r},o={blockShape:e,paddings:n};return pe.runKernel(p2,i,o)}const eV=ve({spaceToBatchND_:pmt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mmt(t,e,n,r,i,o,s){i==null&&(i=[1,1]),o==null&&(o=1),r===0&&(r="valid");const a=oe(t,"x","maxPool");let l=a,c=!1;a.rank===3&&(c=!0,l=ge(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Y(Xi(o,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${o} and dilations '${i}'`);const u=ja(l.shape,e,o,i,r),d=[u.dilationHeight,u.dilationWidth];let f;r==="same"?f=vmt([u.filterHeight,u.filterWidth],d):f=[[0,0],[0,0]];const h=d[0]===1&&d[1]===1,[g,p]=gmt([u.inHeight,u.inWidth],d,f),m=h?r:"valid",v=h?l:eV(l,d,g),w=(n==="avg"?()=>zW(v,e,o,m,s):()=>QW(v,e,o,m,s))(),y=h?w:jW(w,d,p);return c?ge(y,[y.shape[1],y.shape[2],y.shape[3]]):y}function gmt(t,e,n){const r=n.map(u=>u[0]),i=n.map(u=>u[1]),o=t.concat(r,i),s=e.map((u,d)=>(u-o[d]%u)%u),a=i.map((u,d)=>u+s[d]),l=e.map((u,d)=>[r[d],a[d]]),c=e.map((u,d)=>[0,s[d]]);return[l,c]}function vmt(t,e){const r=t.map((s,a)=>s+(s-1)*(e[a]-1)).map(s=>s-1),i=r.map(s=>Math.floor(s/2)),o=r.map((s,a)=>s-i[a]);return r.map((s,a)=>[i[a],o[a]])}const ymt=ve({pool_:mmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bmt(t,e){const n=oe(t,"x","prelu"),r=oe(e,"alpha","prelu"),i={x:n,alpha:r};return pe.runKernel(o2,i)}const tV=ve({prelu_:bmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xmt(t,e=null,n=!1){let r=oe(t,"x","prod");r.dtype==="bool"&&(r=st(r,"int32"));const i={x:r},o={axis:e,keepDims:n};return pe.runKernel(s2,i,o)}const wmt=ve({prod_:xmt});var nV={exports:{}};nV.exports;(function(t){(function(e,n,r){function i(l){var c=this,u=a();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function o(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function s(l,c){var u=new i(l),d=c&&c.state,f=u.next;return f.int32=function(){return u.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&o(d,u),f.state=function(){return o(u,{})}),f}function a(){var l=4022871197,c=function(u){u=String(u);for(var d=0;d<u.length;d++){l+=u.charCodeAt(d);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=s:this.alea=s})(co,t)})(nV);var _mt=nV.exports,rV={exports:{}};rV.exports;(function(t){(function(e,n,r){function i(a){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function o(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function s(a,l){var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,g=(f+h)/(1<<21);while(g===0);return g},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&o(u,c),d.state=function(){return o(c,{})}),d}n&&n.exports?n.exports=s:this.xor128=s})(co,t)})(rV);var Smt=rV.exports,iV={exports:{}};iV.exports;(function(t){(function(e,n,r){function i(a){var l=this,c="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function o(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function s(a,l){var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,g=(f+h)/(1<<21);while(g===0);return g},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&o(u,c),d.state=function(){return o(c,{})}),d}n&&n.exports?n.exports=s:this.xorwow=s})(co,t)})(iV);var Cmt=iV.exports,oV={exports:{}};oV.exports;(function(t){(function(e,n,r){function i(a){var l=this;l.next=function(){var u=l.x,d=l.i,f,h;return f=u[d],f^=f>>>7,h=f^f<<24,f=u[d+1&7],h^=f^f>>>10,f=u[d+3&7],h^=f^f>>>3,f=u[d+4&7],h^=f^f<<7,f=u[d+7&7],f=f^f<<13,h^=f^f<<9,u[d]=h,l.i=d+1&7,h};function c(u,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8?h[7]=-1:h[f],u.x=h,u.i=0,f=256;f>0;--f)u.next()}c(l,a)}function o(a,l){return l.x=a.x.slice(),l.i=a.i,l}function s(a,l){a==null&&(a=+new Date);var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,g=(f+h)/(1<<21);while(g===0);return g},d.int32=c.next,d.quick=d,u&&(u.x&&o(u,c),d.state=function(){return o(c,{})}),d}n&&n.exports?n.exports=s:this.xorshift7=s})(co,t)})(oV);var Emt=oV.exports,sV={exports:{}};sV.exports;(function(t){(function(e,n,r){function i(a){var l=this;l.next=function(){var u=l.w,d=l.X,f=l.i,h,g;return l.w=u=u+1640531527|0,g=d[f+34&127],h=d[f=f+1&127],g^=g<<13,h^=h<<17,g^=g>>>15,h^=h>>>12,g=d[f]=g^h,l.i=f,g+(u^u>>>16)|0};function c(u,d){var f,h,g,p,m,v=[],_=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,_=Math.max(_,d.length)),g=0,p=-32;p<_;++p)d&&(h^=d.charCodeAt((p+32)%d.length)),p===0&&(m=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,p>=0&&(m=m+1640531527|0,f=v[p&127]^=h+m,g=f==0?g+1:0);for(g>=128&&(v[(d&&d.length||0)&127]=-1),g=127,p=4*128;p>0;--p)h=v[g+34&127],f=v[g=g+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,v[g]=h^f;u.w=m,u.X=v,u.i=g}c(l,a)}function o(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function s(a,l){a==null&&(a=+new Date);var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,g=(f+h)/(1<<21);while(g===0);return g},d.int32=c.next,d.quick=d,u&&(u.X&&o(u,c),d.state=function(){return o(c,{})}),d}n&&n.exports?n.exports=s:this.xor4096=s})(co,t)})(sV);var Tmt=sV.exports,aV={exports:{}};aV.exports;(function(t){(function(e,n,r){function i(a){var l=this,c="";l.next=function(){var d=l.b,f=l.c,h=l.d,g=l.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^g,g=g-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-h|0,l.d=h<<16^f>>>16^g,l.a=g-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):c+=a;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function o(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function s(a,l){var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,g=(f+h)/(1<<21);while(g===0);return g},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&o(u,c),d.state=function(){return o(c,{})}),d}n&&n.exports?n.exports=s:this.tychei=s})(co,t)})(aV);var kmt=aV.exports,ide={exports:{}};const Amt={},Mmt=Object.freeze(Object.defineProperty({__proto__:null,default:Amt},Symbol.toStringTag,{value:"Module"})),Imt=jc(Mmt);(function(t){(function(e,n,r){var i=256,o=6,s=52,a="random",l=r.pow(i,o),c=r.pow(2,s),u=c*2,d=i-1,f;function h(y,b,x){var S=[];b=b==!0?{entropy:!0}:b||{};var C=v(m(b.entropy?[y,w(n)]:y??_(),3),S),T=new g(S),E=function(){for(var k=T.g(o),A=l,O=0;k<c;)k=(k+O)*i,A*=i,O=T.g(1);for(;k>=u;)k/=2,A/=2,O>>>=1;return(k+O)/A};return E.int32=function(){return T.g(4)|0},E.quick=function(){return T.g(4)/4294967296},E.double=E,v(w(T.S),n),(b.pass||x||function(k,A,O,D){return D&&(D.S&&p(D,T),k.state=function(){return p(T,{})}),O?(r[a]=k,A):k})(E,C,"global"in b?b.global:this==r,b.state)}function g(y){var b,x=y.length,S=this,C=0,T=S.i=S.j=0,E=S.S=[];for(x||(y=[x++]);C<i;)E[C]=C++;for(C=0;C<i;C++)E[C]=E[T=d&T+y[C%x]+(b=E[C])],E[T]=b;(S.g=function(k){for(var A,O=0,D=S.i,P=S.j,N=S.S;k--;)A=N[D=d&D+1],O=O*i+N[d&(N[D]=N[P=d&P+A])+(N[P]=A)];return S.i=D,S.j=P,O})(i)}function p(y,b){return b.i=y.i,b.j=y.j,b.S=y.S.slice(),b}function m(y,b){var x=[],S=typeof y,C;if(b&&S=="object")for(C in y)try{x.push(m(y[C],b-1))}catch{}return x.length?x:S=="string"?y:y+"\0"}function v(y,b){for(var x=y+"",S,C=0;C<x.length;)b[d&C]=d&(S^=b[d&C]*19)+x.charCodeAt(C++);return w(b)}function _(){try{var y;return f&&(y=f.randomBytes)?y=y(i):(y=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(y)),w(y)}catch{var b=e.navigator,x=b&&b.plugins;return[+new Date,e,x,e.screen,w(n)]}}function w(y){return String.fromCharCode.apply(0,y)}if(v(r.random(),n),t.exports){t.exports=h;try{f=Imt}catch{}}else r["seed"+a]=h})(typeof self<"u"?self:co,[],Math)})(ide);var Omt=ide.exports,Rmt=_mt,Dmt=Smt,Pmt=Cmt,Nmt=Emt,$mt=Tmt,Lmt=kmt,um=Omt;um.alea=Rmt;um.xor128=Dmt;um.xorwow=Pmt;um.xorshift7=Nmt;um.xor4096=$mt;um.tychei=Lmt;var lV=um;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ode{constructor(e,n,r,i,o){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const s=o||Math.random();this.random=lV.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){const i=this.nextVal;return this.nextVal=NaN,i}let e,n,r=!1;for(;!r;){let i,o,s;do i=2*this.random()-1,o=2*this.random()-1,s=i*i+o*o;while(s>=1||s===0);const a=Math.sqrt(-2*Math.log(s)/s);e=this.mean+this.stdDev*i*a,n=this.mean+this.stdDev*o*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Fmt{constructor(e=0,n=1,r,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=lV.alea(i)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bmt(t,e=0,n=1,r,i){if(rd(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const o=new ode(e,n,r,!1,i),s=Vt(t,r);for(let a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}const Umt=ve({randomNormal_:Bmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zmt(t,e=0,n=1,r="float32",i){rd(t);const o=Vt(t,r),s=new Fmt(e,n,null,i);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}const q1=ve({randomUniform_:zmt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nw(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const i={start:t,stop:e,step:n,dtype:r};return pe.runKernel(EW,{},i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jmt(t){const n={input:oe(t,"input","real")};return pe.runKernel(TW,n)}const wA=ve({real_:jmt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wmt(t){const n={x:oe(t,"x","reciprocal")};return pe.runKernel(E1,n)}const Vmt=ve({reciprocal_:Wmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hmt(t){const n={x:oe(t,"x","relu")};return pe.runKernel(T1,n)}const dm=ve({relu_:Hmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gmt(t){const n={x:oe(t,"x","relu6")};return pe.runKernel(k1,n)}const sde=ve({relu6_:Gmt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qmt(t,e){const r={x:oe(t,"x","reverse")},i={dims:e};return pe.runKernel(u2,r,i)}const Hp=ve({reverse_:qmt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xmt(t){const n={x:oe(t,"x","round")};return pe.runKernel(A1,n)}const ade=ve({round_:Xmt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kmt(t){const n={x:oe(t,"x","rsqrt","float32")};return pe.runKernel(M1,n)}const lde=ve({rsqrt_:Kmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ymt(t){const n={x:oe(t,"x","selu")};return pe.runKernel(I1,n)}const cde=ve({selu_:Ymt});function Qmt(t,e,n,r,i,o=[1,1],s="NHWC"){const a=oe(t,"x","separableConv2d"),l=oe(e,"depthwiseFilter","separableConv2d"),c=oe(n,"pointwiseFilter","separableConv2d");let u=a,d=!1;if(a.rank===3&&(d=!0,u=ge(a,[1,a.shape[0],a.shape[1],a.shape[2]])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Y(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),Y(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),Y(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),Y(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),Y(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const f=l.shape[2],h=l.shape[3];Y(c.shape[2]===f*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${f*h}, but got ${c.shape[2]}.`);const g=HW(u,l,r,i,s,o),m=Wp(g,c,1,"valid",s);return d?ge(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const ude=ve({separableConv2d_:Qmt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zmt(t){const n={x:oe(t,"x","sign")};return pe.runKernel(D1,n)}const Jmt=ve({sign_:Zmt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function egt(t){const n={x:oe(t,"x","sin","float32")};return pe.runKernel(O1,n)}const dde=ve({sin_:egt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tgt(t){const n={x:oe(t,"x","sinh")};return pe.runKernel(R1,n)}const fde=ve({sinh_:tgt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ngt(t,e,n){const r=oe(t,"x","slice1d");return Y(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Fn(r,[e],[n])}const cV=ve({slice1d_:ngt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rgt(t,e,n){const r=oe(t,"x","slice2d");return Y(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Fn(r,e,n)}const hde=ve({slice2d_:rgt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function igt(t,e,n){const r=oe(t,"x","slice3d");return Y(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Fn(r,e,n)}const uV=ve({slice3d_:igt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ogt(t,e,n){const r=oe(t,"x","slice4d");return Y(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Fn(r,e,n)}const _A=ve({slice4d_:ogt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sgt(t,e=-1){const n=oe(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},i={dim:e};return pe.runKernel(g2,r,i)}const dV=ve({softmax_:sgt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function agt(t){Y(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return pe.runKernel(pW,e)}const pde=ve({fft_:agt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lgt(t){Y(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return pe.runKernel(vW,e)}const S3=ve({ifft_:lgt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cgt(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const i=ge(t,[n,e]);r=S3(i)}else{const i=[n,2*(e-1)],o=ge(wA(t),[n,e]),s=ge(XW(t),[n,e]),a=Hp(Fn(o,[0,1],[n,e-2]),1),l=fe(Hp(Fn(s,[0,1],[n,e-2]),1),dn(-1)),c=Po([o,a],1),u=Po([s,l],1),d=ge(Fp(c,u),[i[0],i[1]]);r=S3(d)}if(r=wA(r),t.rank===3&&t.shape[0]!==0){const i=r,o=t.shape[0];r=ge(r,[o,r.shape[0]/o,r.shape[1]]),i.dispose()}return r}const ugt=ve({irfft_:cgt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dgt(t,e,n=0){const i={x:oe(t,"x","split")},o={numOrSizeSplits:e,axis:n};return pe.runKernel(m2,i,o)}const Fs=ve({split_:dgt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fgt(t,e){Y(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let i;if(e!=null&&e<n){const g=t.shape.map(m=>0),p=t.shape.map(m=>m);p[t.shape.length-1]=e,i=Fn(t,g,p),n=e}else if(e!=null&&e>n){const g=t.shape.map(p=>p);g[t.shape.length-1]=e-n,i=Po([t,ui(g)],t.shape.length-1),n=e}else i=t;const o=en(i),s=ge(Fp(i,o),[r,n]),a=pde(s),l=Math.floor(n/2)+1,c=wA(a),u=XW(a),d=Fs(c,[l,n-l],c.shape.length-1),f=Fs(u,[l,n-l],u.shape.length-1),h=i.shape.slice();return h[i.shape.length-1]=l,ge(Fp(d[0],f[0]),h)}const hgt=ve({rfft_:fgt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pgt(t,e){let n=oe(t,"a","squaredDifference"),r=oe(e,"b","squaredDifference");[n,r]=Cr(n,r),Lt(n.shape,r.shape);const i={a:n,b:r},o={};return pe.runKernel(L1,i,o)}const mgt=ve({squaredDifference_:pgt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ggt(t,e){const n=oe(t,"x","squeeze","string_or_numeric");return ge(n,Uf(n.shape,e).newShape)}const X1=ve({squeeze_:ggt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vgt(t,e=0){const n=Pue(t,"tensors","stack","string_or_numeric");Y(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&Y(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,i={axis:e};return pe.runKernel(r2,r,i)}const Vu=ve({stack_:vgt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ygt(t,e=0){const r={x:oe(t,"x","step")},i={alpha:e};return pe.runKernel(j1,r,i)}const K1=ve({step_:ygt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bgt(t,e,n,r,i=0,o=0,s=0,a=0,l=0){const u={x:oe(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:r,beginMask:i,endMask:o,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:l};return pe.runKernel(OW,u,d)}const xgt=ve({stridedSlice_:bgt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wgt(t){const n={x:oe(t,"x","tan","float32")};return pe.runKernel(B1,n)}const _gt=ve({tan_:wgt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zo(t,e){H4(t);const n=W1(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return V1(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XE(t,e,n){if(H4(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=W1(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return V1(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z7(t,e,n){if(H4(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=W1(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return V1(t,e,r,n)}function mde(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,o=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(o+` update.rank < ${i}. `);if(t.length<r+(n.rank-i))throw new Error(o+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+t.length-r)throw new Error(o+` update.rank != ${i+t.length-r}`);for(let s=0;s<i;++s)if(n.shape[s]!==e.shape[s])throw new Error(o+` updates.shape[${s}] (${n.shape[s]}) != indices.shape[${s}] (${e.shape[s]}).`);for(let s=0;s<n.rank-i;++s)if(n.shape[s+i]!==t[s+r])throw new Error(o+` updates.shape[${s+i}] (${n.shape[s+i]}) != shape[${s+i}] (${t[s+i]})`)}function Sgt(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}mde(n,e,t)}function fm(t,e,n){const r=e.shape.length,i=r>1?e.shape[r-1]:1,o=n.length;let s=1;for(let d=i;d<o;++d)s*=n[d];const a=i<1?1:i,l=Re(e.shape)/a,c=[..._t(n.slice(0,i)),1],u=Re(n);return{sliceRank:i,numUpdates:l,sliceSize:s,strides:c,outputSize:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cgt(t,e=1,n=!0){const r=oe(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${e}`);const o={x:r},s={k:e,sorted:n},[a,l]=pe.runKernel(RW,o,s);return{values:a,indices:l}}const Egt=ve({topk_:Cgt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tgt(t,e=0,n=1,r,i){if(rd(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const o=new ode(e,n,r,!0,i),s=Vt(t,r);for(let a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}const gde=ve({truncatedNormal_:Tgt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kgt(t,e=0){const n=oe(t,"x","unique","string_or_numeric");Y(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},i={axis:e},[o,s]=pe.runKernel(PW,r,i);return{values:o,indices:s}}const Agt=ve({unique_:kgt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mgt(t,e,n){const r=oe(t,"x","unsortedSegmentSum"),i=oe(e,"segmentIds","unsortedSegmentSum","int32");Y(iy(n),()=>"numSegments must be of dtype int");const o={x:r,segmentIds:i},s={numSegments:n};return pe.runKernel(y2,o,s)}const vde=ve({unsortedSegmentSum_:Mgt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Igt(t,e=0){const n=oe(t,"x","unstack","string_or_numeric");Y(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},i={axis:e};return pe.runKernel(v2,r,i)}const Gp=ve({unstack_:Igt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ogt(t,e=!0,n,r){return pe.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yde(t,e){const n=[];for(let o=0;o<e.length;o++)e[o]&&n.push(o);const r=Vt(t,"int32"),i=Vt([n.length,t.length],"int32");for(let o=0;o<n.length;o++){const s=r.indexToLoc(n[o]),a=o*t.length;i.values.set(s,a)}return i.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rgt(t,e,n){const r=oe(t,"x","transpose");if(e==null&&(e=r.shape.map((s,a)=>a).reverse()),Y(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(s=>{Y(s>=0&&s<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const i={x:r},o={perm:e};return r.dtype==="complex64"?Se(()=>{let s=wA(r),a=XW(r);return s=pe.runKernel(sv,{x:s},o),a=pe.runKernel(sv,{x:a},o),n&&(a=_r(a)),Fp(s,a)}):pe.runKernel(sv,i,o)}const Jt=ve({transpose_:Rgt});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dgt(t,e){if(e==null)return t.shape.slice();if(mn(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pgt(t,e,n,r){const i=oe(t,"x","dropout");if(Y(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),Y(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Vr?i.clone():i;const o=Dgt(i,n),s=1-e,a=Et(T2(Ke(q1(o,0,1,"float32",r),s)),s);return fe(i,a)}const Ngt=ve({dropout_:Pgt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $gt(t,e,n,r,i,o="NHWC",s){let a=t;t.rank===3&&(a=ge(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=ge(e,[1,e.shape[0],e.shape[1],e.shape[2]])),Y(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),Y(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),Y(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=o==="NHWC"?a.shape[3]:a.shape[1],u=o==="NHWC"?l.shape[3]:l.shape[1];Y(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),Y(u===n[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${n[3]}).`),Bo("conv2dDerFilter",i,s);const d={x:a,dy:l},f={strides:r,pad:i,dataFormat:o,dimRoundingMode:s,filterShape:n};return pe.runKernel(rW,d,f)}const fV=ve({conv2DBackpropFilter_:$gt});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hV(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return fe(t,K1(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function pV(t,e){let n=e;const r=Zr(t.shape,e.shape);return r.length>0&&(n=St(n,r)),ge(n,t.shape)}function mV(t,e,n,r){if(e==="linear")return t;if(e==="relu")return dm(t);if(e==="elu")return C2(t);if(e==="relu6")return sde(t);if(e==="prelu")return tV(t,n);if(e==="leakyrelu")return KW(t,r);if(e==="sigmoid")return n0(t);throw new Error(`Unknown fused activation ${e}.`)}const gV=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lgt({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:o=[1,1],dimRoundingMode:s,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",gV(pe.state.gradientDepth,l)===!1){Y(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let x=Wp(t,e,n,r,i,o,s);return a!=null&&(x=Ke(x,a)),mV(x,l,c,u)}const d=oe(t,"x","conv2d","float32"),f=oe(e,"filter","conv2d","float32");let h=d,g=!1;d.rank===3&&(g=!0,h=ge(d,[1,d.shape[0],d.shape[1],d.shape[2]])),Y(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),Y(f.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${f.rank}.`),Bo("fused conv2d",r,s);const p=i==="NHWC"?h.shape[3]:h.shape[1];Y(f.shape[2]===p,()=>`Error in conv2d: depth of input (${p}) must match input depth for filter ${f.shape[2]}.`),Y(Xi(n,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);const m=Di(h.shape,f.shape,n,o,r,s);let v;a!=null&&(v=oe(a,"bias","fused conv2d"),[v]=Cr(v,d),i==="NHWC"?Lt(m.outShape,v.shape):(Y(v.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${v.shape.length}.`),Y(v.shape.length===0||v.shape[0]===m.outChannels||v.shape[0]===1,()=>`Error in fused conv2d: bias shape (${v.shape}) is not compatible with the number of output channels (${m.outChannels})`)));let _;if(c!=null){const x=c.shape;if(Y(x.length<=1||x.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${x.length}.`),x.length===1)Y(x[0]===1||x[0]===m.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${x}) is not compatible with the number of output channels (${m.outChannels}).`);else if(x.length===3)try{Lt(x,m.outShape)}catch{const C=`Error in fused conv2d: PReLU activation weights (${x}) is not compatible with the output shape of the conv2d (${m.outShape}).`;throw Error(C)}_=oe(c,"prelu weights","fused conv2d")}const w=(x,S)=>{Y(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);const[C,T,E,k]=S,A=hV(x,E,l);Y(zp(o),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`);const O=WW(T.shape,A,C,n,r),D=fV(T,A,C.shape,n,r),P=[O,D];if(k!=null){const N=pV(k,A);P.push(N)}return P},y={x:h,filter:f,bias:v,preluActivationWeights:_},b={strides:n,pad:r,dataFormat:i,dilations:o,dimRoundingMode:s,activation:l,leakyreluAlpha:u};return a==null?cy((S,C,T)=>{let E=pe.runKernel(hA,y,b);return T([C,S,E]),g&&(E=ge(E,[E.shape[1],E.shape[2],E.shape[3]])),{value:E,gradFunc:w}})(h,f):cy((S,C,T,E)=>{let k=pe.runKernel(hA,y,b);return E([C,S,k,T]),g&&(k=ge(k,[k.shape[1],k.shape[2],k.shape[3]])),{value:k,gradFunc:w}})(h,f,v)}const Fgt=ve({fusedConv2d_:Lgt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bgt(t,e,n,r,i,o=[1,1],s){let a=t;t.rank===3&&(a=ge(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=ge(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:a,dy:l},u={strides:r,pad:i,dimRoundingMode:s,dilations:o,filterShape:n};return pe.runKernel(uW,c,u)}const Ugt=ve({depthwiseConv2dNativeBackpropFilter_:Bgt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zgt(t,e,n,r,i,o=[1,1],s){let a=e,l=!1;e.rank===3&&(l=!0,a=ge(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:a,filter:n},u={strides:r,pad:i,dimRoundingMode:s,dilations:o,inputShape:t},d=pe.runKernel(dW,c,u);return l?ge(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const jgt=ve({depthwiseConv2dNativeBackpropInput_:zgt});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wgt({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:i,activation:o="linear",preluActivationWeights:s,leakyreluAlpha:a=.2}){if(gV(pe.state.gradientDepth,o)===!1){let k=un(t,e,n,r);return i!=null&&(k=Ke(k,i)),mV(k,o,s,a)}let l=oe(t,"a","fused matMul"),c=oe(e,"b","fused matMul");[l,c]=Cr(l,c);const u=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?c.shape[c.rank-1]:c.shape[c.rank-2],f=n?l.shape[l.rank-1]:l.shape[l.rank-2],h=r?c.shape[c.rank-2]:c.shape[c.rank-1],g=l.shape.slice(0,-2),p=c.shape.slice(0,-2),m=Re(g),v=Re(p);Y(u===d,()=>`Error in fused matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);const w=Lt(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([f,h]),y=n?ge(l,[m,u,f]):ge(l,[m,f,u]),b=r?ge(c,[v,h,d]):ge(c,[v,d,h]);let x;i!=null&&(x=oe(i,"bias","fused matMul"),[x]=Cr(x,l),Lt(w,x.shape));let S;s!=null&&(S=oe(s,"prelu weights","fused matMul"));const C=(k,A)=>{const[O,D,P,N]=A,U=hV(ge(k,P.shape),P,o);let L,V;if(!n&&!r?(L=un(U,D,!1,!0),V=un(O,U,!0,!1)):!n&&r?(L=un(U,D,!1,!1),V=un(U,O,!0,!1)):n&&!r?(L=un(D,U,!1,!0),V=un(O,U,!1,!1)):(L=un(D,U,!0,!0),V=un(U,O,!0,!0)),i!=null){const G=pV(N,U);return[L,V,G]}else return[L,V]},T={a:y,b,bias:x,preluActivationWeights:S},E={transposeA:n,transposeB:r,activation:o,leakyreluAlpha:a};return i==null?cy((A,O,D)=>{const P=pe.runKernel(fA,T,E);return D([A,O,P]),{value:ge(P,w),gradFunc:C}})(y,b):cy((A,O,D,P)=>{const N=pe.runKernel(fA,T,E);return P([A,O,N,D]),{value:ge(N,w),gradFunc:C}})(y,b,x)}const J7=ve({fusedMatMul_:Wgt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vgt(t,e,n,r,i="bilinear",o=0){const s=oe(t,"image","cropAndResize"),a=oe(e,"boxes","cropAndResize","float32"),l=oe(n,"boxInd","cropAndResize","int32"),c=a.shape[0];Y(s.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`),Y(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),Y(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),Y(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),Y(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),Y(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);const u={image:s,boxes:a,boxInd:l},d={method:i,extrapolationValue:o,cropSize:r};return pe.runKernel(aW,u,d)}const Hgt=ve({cropAndResize_:Vgt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ggt(t){const e=oe(t,"image","flipLeftRight","float32");Y(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return pe.runKernel(gW,n,{})}const qgt=ve({flipLeftRight_:Ggt});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xgt(t){const e=oe(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];Y(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),Y(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const i=new Array(e.rank);return i.fill(1,0,n),i[n]=3,hl(e,i)}const Kgt=ve({grayscaleToRGB_:Xgt});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ygt(t){const e=oe(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];Y(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),Y(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const i=e.dtype,o=st(e,"float32"),s=Zo([.2989,.587,.114]);let a;switch(e.rank){case 2:a=ob("ij,j->i",o,s);break;case 3:a=ob("ijk,k->ij",o,s);break;case 4:a=ob("ijkl,l->ijk",o,s);break;case 5:a=ob("ijklm,m->ijkl",o,s);break;case 6:a=ob("ijklmn,n->ijklm",o,s);break;default:throw new Error("Not a valid tensor rank.")}return a=Eo(a,-1),st(a,i)}const Qgt=ve({rgbToGrayscale_:Ygt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zgt(t,e,n=0,r=.5){const i=oe(t,"image","rotateWithOffset","float32");Y(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);const o={image:i},s={radians:e,fillValue:n,center:r};return pe.runKernel(NW,o,s)}const Jgt=ve({rotateWithOffset_:Zgt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i0(t,e,n,r,i,o){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),o==null&&(o=0);const s=t.shape[0];return n=Math.min(n,s),Y(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),Y(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),Y(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),Y(e.rank===1,()=>"scores must be a 1D tensor"),Y(e.shape[0]===s,()=>`scores has incompatible shape with boxes. Expected ${s}, but was ${e.shape[0]}`),Y(0<=o&&o<=1,()=>`softNmsSigma must be in [0, 1], but was '${o}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function evt(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const o=oe(t,"boxes","nonMaxSuppression","float32"),s=oe(e,"scores","nonMaxSuppression","float32"),a=i0(o,s,n,r,i);n=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return pe.runKernel(_W,{boxes:o,scores:s},l)}const tvt=ve({nonMaxSuppression_:evt});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nvt(t,e,n){const r=rvt(t,e,n),i=r<0?-(r+1):r;t.splice(i,0,e)}function rvt(t,e,n){return ovt(t,e,n||ivt)}function ivt(t,e){return t>e?1:t<e?-1:0}function ovt(t,e,n){let r=0,i=t.length,o=0,s=!1;for(;r<i;){o=r+(i-r>>>1);const a=n(e,t[o]);a>0?r=o+1:(i=o,s=!a)}return s?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vV(t,e,n,r,i){return xV(t,e,n,r,i,0)}function yV(t,e,n,r,i,o){return xV(t,e,n,r,i,0,!1,o,!0)}function bV(t,e,n,r,i,o){return xV(t,e,n,r,i,o,!0)}function xV(t,e,n,r,i,o,s=!1,a=!1,l=!1){const c=[];for(let m=0;m<e.length;m++)e[m]>i&&c.push({score:e[m],boxIndex:m,suppressBeginIndex:0});c.sort(eQ);const u=o>0?-.5/o:0,d=[],f=[];for(;d.length<n&&c.length>0;){const m=c.pop(),{score:v,boxIndex:_,suppressBeginIndex:w}=m;if(v<i)break;let y=!1;for(let b=d.length-1;b>=w;--b){const x=svt(t,_,d[b]);if(x>=r){y=!0;break}if(m.score=m.score*avt(r,u,x),m.score<=i)break}m.suppressBeginIndex=d.length,y||(m.score===v?(d.push(_),f.push(m.score)):m.score>i&&nvt(c,m,eQ))}const h=d.length,g=n-h;a&&g>0&&(d.push(...new Array(g).fill(0)),f.push(...new Array(g).fill(0)));const p={selectedIndices:d};return s&&(p.selectedScores=f),l&&(p.validOutputs=h),p}function svt(t,e,n){const r=t.subarray(e*4,e*4+4),i=t.subarray(n*4,n*4+4),o=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),u=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),f=Math.max(i[1],i[3]),h=(a-o)*(l-s),g=(d-c)*(f-u);if(h<=0||g<=0)return 0;const p=Math.max(o,c),m=Math.max(s,u),v=Math.min(a,d),_=Math.min(l,f),w=Math.max(v-p,0)*Math.max(_-m,0);return w/(h+g-w)}function avt(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function eQ(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function lvt(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const o=oe(t,"boxes","nonMaxSuppressionAsync"),s=oe(e,"scores","nonMaxSuppressionAsync"),a=i0(o,s,n,r,i);n=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold;const l=await Promise.all([o.data(),s.data()]),c=l[0],u=l[1],{selectedIndices:d}=vV(c,u,n,r,i);return o!==t&&o.dispose(),s!==e&&s.dispose(),Zo(d,"int32")}const cvt=lvt;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uvt(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,o=0){const s=oe(t,"boxes","nonMaxSuppression"),a=oe(e,"scores","nonMaxSuppression"),l=i0(s,a,n,r,i,o);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,o=l.softNmsSigma;const c={boxes:s,scores:a},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:o},d=pe.runKernel(CW,c,u);return{selectedIndices:d[0],selectedScores:d[1]}}const dvt=ve({nonMaxSuppressionWithScore_:uvt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function fvt(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,o=0){const s=oe(t,"boxes","nonMaxSuppressionAsync"),a=oe(e,"scores","nonMaxSuppressionAsync"),l=i0(s,a,n,r,i,o);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,o=l.softNmsSigma;const c=await Promise.all([s.data(),a.data()]),u=c[0],d=c[1],{selectedIndices:f,selectedScores:h}=bV(u,d,n,r,i,o);return s!==t&&s.dispose(),a!==e&&a.dispose(),{selectedIndices:Zo(f,"int32"),selectedScores:Zo(h)}}const hvt=fvt;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pvt(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,o=!1){const s=oe(t,"boxes","nonMaxSuppression"),a=oe(e,"scores","nonMaxSuppression"),l=i0(s,a,n,r,i,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,f={boxes:s,scores:a},h={maxOutputSize:c,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:o},g=pe.runKernel(SW,f,h);return{selectedIndices:g[0],validOutputs:g[1]}}const mvt=ve({nonMaxSuppressionPadded_:pvt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function gvt(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,o=!1){const s=oe(t,"boxes","nonMaxSuppressionAsync"),a=oe(e,"scores","nonMaxSuppressionAsync"),l=i0(s,a,n,r,i,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,[f,h]=await Promise.all([s.data(),a.data()]),{selectedIndices:g,validOutputs:p}=yV(f,h,c,u,d,o);return s!==t&&s.dispose(),a!==e&&a.dispose(),{selectedIndices:Zo(g,"int32"),validOutputs:dn(p,"int32")}}const vvt=gvt;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yvt(t,e,n=!1,r=!1){const i=oe(t,"images","resizeBilinear");Y(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),Y(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),Y(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let o=i,s=!1;i.rank===3&&(s=!0,o=ge(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const a={images:o},l={alignCorners:n,halfPixelCenters:r,size:e},c=pe.runKernel(c2,a,l);return s?ge(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const bde=ve({resizeBilinear_:yvt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bvt(t,e,n=!1,r=!1){const i=oe(t,"images","resizeNearestNeighbor");Y(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),Y(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),Y(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),Y(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let o=i,s=!1;i.rank===3&&(s=!0,o=ge(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const a={images:o},l={alignCorners:n,halfPixelCenters:r,size:e},c=pe.runKernel(l2,a,l);return s?ge(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const xde=ve({resizeNearestNeighbor_:bvt});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xvt(t,e="binary",n=!1,r=.5){const i=oe(t,"image","threshold"),o=.2989,s=.587,a=.114,l=i.shape[0]*i.shape[1];let c=fe(Zo([r]),255),u,d,f,h;if(Y(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),Y(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),Y(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),Y(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),i.shape[2]===3){[u,d,f]=Fs(i,[1,1,1],-1);const m=fe(u,o),v=fe(d,s),_=fe(f,a);h=Ke(Ke(m,v),_)}else h=t;if(e==="otsu"){const m=bht(st(ade(h),"int32"),nx([]),256);c=wvt(m,l)}const g=n?r0(h,c):Ys(h,c);return st(fe(g,255),"int32")}function wvt(t,e){let n=Zo([-1]),r=Zo([0]),i=Zo([0]),o,s,a,l,c,u;for(let d=0;d<t.size-1;d++){o=Fn(t,0,d+1),s=Fn(t,d+1),c=Et(St(o),e),u=Et(St(s),e);const f=St(fe(o,Nw(0,o.size)));a=Et(f,St(o));const h=S2(s.shape,o.size),g=Ke(Nw(0,s.size),h),p=fe(s,g);l=Et(St(p),St(s));const m=Tt(a,l),v=Tt(a,l),_=fe(c,u);i=fe(fe(_,m),v);const w=Ys(i,r);r=ho(w,i,r),n=ho(w,Zo([d]),n)}return n}const _vt=ve({threshold_:xvt});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Svt(t,e,n="nearest",r="constant",i=0,o){const s=oe(t,"image","transform","float32"),a=oe(e,"transforms","transform","float32");Y(s.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${s.rank}.`),Y(a.rank===2&&(a.shape[0]===s.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),Y(o==null||o.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${o}.`);const l={image:s,transforms:a},c={interpolation:n,fillMode:r,fillValue:i,outputShape:o};return pe.runKernel(DW,l,c)}const Cvt=ve({transform_:Svt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Evt(t,e,n){const r=oe(t,"a","bandPart");Y(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[o,s]=r.shape.slice(-2);let a,l;typeof e=="number"?(Y(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),Y(e<=o,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${o}).`),a=oe(e<0?o:e,"numLower","bandPart")):(Y(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=ho(bA(e,0),o,Pw(e,o))),typeof n=="number"?(Y(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),Y(n<=s,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${s}).`),l=oe(n<0?s:n,"numUpper","bandPart")):(Y(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=ho(bA(n,0),s,Pw(n,s)));const c=ge(Nw(0,o,1,"int32"),[-1,1]),u=Nw(0,s,1,"int32"),d=Tt(c,u),f=Wu(r0(d,a),cm(d,_r(l))),h=ui([o,s],r.dtype);return ge(Vu(Gp(ge(r,[-1,o,s])).map(g=>ho(f,g,h))),i)}const Tvt=ve({bandPart_:Evt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kvt(t){let e;if(Array.isArray(t)){e=!1,Y(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const i=t[0].shape[0];for(let o=1;o<t.length;++o)Y(t[o].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[o].shape[0]} vs. ${i})`)}else e=!0,t=Fs(t,t.shape[0],0).map(i=>X1(i,[0]));Y(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let i=0;i<t.length;++i)n.push(pe.tidy(()=>{let o=r[i];if(i>0)for(let s=0;s<i;++s){const a=fe(St(fe(n[s],o)),n[s]);o=Tt(o,a)}return Et(o,E2(o,"euclidean"))}));return e?Vu(n,0):n}const Avt=ve({gramSchmidt_:kvt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mvt(t,e=!1){if(Y(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return tQ(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=Gp(ge(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],o=[];r.forEach(l=>{const[c,u]=tQ(l,e);i.push(c),o.push(u)});const s=ge(Vu(i,0),t.shape),a=ge(Vu(o,0),t.shape);return[s,a]}}function tQ(t,e=!1){return pe.tidy(()=>{Y(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let i=Zue(n),o=lp(t);const s=XE([[1]],[1,1]);let a=lp(s);const l=n>=r?r:n;for(let c=0;c<l;++c){const u=o,d=a,f=i;[a,o,i]=pe.tidy(()=>{const h=Fn(o,[c,c],[n-c,1]),g=E2(h),p=Fn(o,[c,c],[1,1]),m=ho(Ys(p,0),XE([[-1]]),XE([[1]])),v=Tt(p,fe(m,g)),_=Et(h,v);_.shape[0]===1?a=lp(s):a=Po([s,Fn(_,[1,0],[_.shape[0]-1,_.shape[1]])],0);const w=_r(Et(un(m,v),g)),y=Fn(o,[c,0],[n-c,r]),b=fe(w,a),x=Jt(a);if(c===0)o=Tt(y,un(b,un(x,y)));else{const T=Tt(y,un(b,un(x,y)));o=Po([Fn(o,[0,0],[c,r]),T],0)}const S=Jt(b),C=Fn(i,[0,c],[n,i.shape[1]-c]);if(c===0)i=Tt(C,un(un(C,a),S));else{const T=Tt(C,un(un(C,a),S));i=Po([Fn(i,[0,0],[n,c]),T],1)}return[a,o,i]}),zt([u,d,f])}return!e&&n>r&&(i=Fn(i,[0,0],[n,r]),o=Fn(o,[0,0],[r,r])),[i,o]})}const Ivt=ve({qr_:Mvt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wu={flipLeftRight:qgt,grayscaleToRGB:Kgt,resizeNearestNeighbor:xde,resizeBilinear:bde,rgbToGrayscale:Qgt,rotateWithOffset:Jgt,cropAndResize:Hgt,nonMaxSuppression:tvt,nonMaxSuppressionAsync:cvt,nonMaxSuppressionWithScore:dvt,nonMaxSuppressionWithScoreAsync:hvt,nonMaxSuppressionPadded:mvt,nonMaxSuppressionPaddedAsync:vvt,threshold:_vt,transform:Cvt},Ovt={bandPart:Tvt,gramSchmidt:Avt,qr:Ivt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rvt=new Map,Dvt=new Map;class o0{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class ga{constructor(){this.classNameMap={}}static getMap(){return ga.instance==null&&(ga.instance=new ga),ga.instance}static register(e){ga.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Ge(t,e,n){Y(t.className!=null,()=>"Class being registered does not have the static className property defined."),Y(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),Y(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,i=e+">"+r;return ga.register(t),Rvt.set(i,t),Dvt.set(t,i),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qf extends o0{minimize(e,n=!1,r){const{value:i,grads:o}=this.computeGradients(e,r);if(r!=null){const s=r.map(a=>({name:a.name,tensor:o[a.name]}));this.applyGradients(s)}else this.applyGradients(o);return zt(o),n?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return Upt(e,n)}dispose(){this.iterations_!=null&&zt(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:dn(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(qf,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wde extends qf{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=pe.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const o=pe.registeredVariables[r],s=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accum_grad`,variable:Se(()=>en(o).variable(s))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${r}/accum_var`,variable:Se(()=>en(o).variable(s))});const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const l=this.accumulatedGrads[i].variable,c=this.accumulatedUpdates[i].variable;Se(()=>{const u=Ke(fe(l,this.rho),fe(Vn(a),1-this.rho)),d=fe(Et(qi(Ke(c,this.epsilon)),qi(Ke(l,this.epsilon))),a),f=Ke(fe(c,this.rho),fe(Vn(d),1-this.rho));l.assign(u),c.assign(f);const h=Ke(fe(d,-this.learningRate),o);o.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(zt(this.accumulatedGrads.map(e=>e.variable)),zt(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _de extends qf{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const o=pe.registeredVariables[r];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accumulator`,variable:Se(()=>S2(o.shape,this.initialAccumulatorValue).variable(!1))});const s=Array.isArray(e)?e[i].tensor:e[r];if(s==null)return;const a=this.accumulatedGrads[i].variable;Se(()=>{const l=Ke(a,Vn(s));a.assign(l);const c=Ke(fe(Et(s,qi(Ke(l,pe.backend.epsilon()))),-this.learningRate),o);o.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&zt(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sde extends qf{static get className(){return"Adam"}constructor(e,n,r,i=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Se(()=>{this.accBeta1=dn(n).variable(),this.accBeta2=dn(r).variable()}),i==null&&(this.epsilon=pe.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Se(()=>{const r=Tt(1,this.accBeta1),i=Tt(1,this.accBeta2);n.forEach((o,s)=>{const a=pe.registeredVariables[o],l=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${o}/m`,variable:Se(()=>en(a).variable(l))}),this.accumulatedSecondMoment[s]==null&&(this.accumulatedSecondMoment[s]={originalName:`${o}/v`,variable:Se(()=>en(a).variable(l))});const c=Array.isArray(e)?e[s].tensor:e[o];if(c==null)return;const u=this.accumulatedFirstMoment[s].variable,d=this.accumulatedSecondMoment[s].variable,f=Ke(fe(u,this.beta1),fe(c,1-this.beta1)),h=Ke(fe(d,this.beta2),fe(Vn(c),1-this.beta2)),g=Et(f,r),p=Et(h,i);u.assign(f),d.assign(h);const m=Ke(fe(Et(g,Ke(qi(p),this.epsilon)),-this.learningRate),a);a.assign(m)}),this.accBeta1.assign(fe(this.accBeta1,this.beta1)),this.accBeta2.assign(fe(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&zt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&zt(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),Se(()=>{this.accBeta1.assign(Vp(this.beta1,this.iterations_+1)),this.accBeta2.assign(Vp(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cde extends qf{static get className(){return"Adamax"}constructor(e,n,r,i=null,o=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.decay=o,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Se(()=>{this.iteration=dn(0).variable(),this.accBeta1=dn(n).variable()}),i==null&&(this.epsilon=pe.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Se(()=>{const r=Tt(1,this.accBeta1),i=Et(-this.learningRate,Ke(fe(this.iteration,this.decay),1));n.forEach((o,s)=>{const a=pe.registeredVariables[o],l=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${o}/m`,variable:en(a).variable(l)}),this.accumulatedWeightedInfNorm[s]==null&&(this.accumulatedWeightedInfNorm[s]={originalName:`${o}/v`,variable:en(a).variable(l)});const c=Array.isArray(e)?e[s].tensor:e[o];if(c==null)return;const u=this.accumulatedFirstMoment[s].variable,d=this.accumulatedWeightedInfNorm[s].variable,f=Ke(fe(u,this.beta1),fe(c,1-this.beta1)),h=fe(d,this.beta2),g=io(c),p=Hf(h,g);u.assign(f),d.assign(p);const m=Ke(fe(Et(i,r),Et(f,Ke(p,this.epsilon))),a);a.assign(m)}),this.iteration.assign(Ke(this.iteration,1)),this.accBeta1.assign(fe(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&zt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&zt(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wV extends qf{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const o=Array.isArray(e)?e[i].tensor:e[r];if(o==null)return;const s=pe.registeredVariables[r];Se(()=>{const a=Ke(fe(this.c,o),s);s.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Ec(dn(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ede extends wV{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=dn(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const o=pe.registeredVariables[r];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${r}/momentum`,variable:Se(()=>en(o).variable(!1))});const s=this.accumulations[i].variable,a=Array.isArray(e)?e[i].tensor:e[r];a!=null&&Se(()=>{let l;const c=Ke(fe(this.m,s),a);this.useNesterov?l=Ke(fe(this.c,Ke(a,fe(c,this.m))),o):l=Ke(fe(this.c,c),o),s.assign(c),o.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&zt(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tde extends qf{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,i=null,o=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=o,i==null&&(this.epsilon=pe.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const o=pe.registeredVariables[r],s=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${r}/rms`,variable:Se(()=>en(o).variable(s))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${r}/momentum`,variable:Se(()=>en(o).variable(s))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${r}/mg`,variable:Se(()=>en(o).variable(s))});const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const l=this.accumulatedMeanSquares[i].variable,c=this.accumulatedMoments[i].variable;Se(()=>{const u=Ke(fe(l,this.decay),fe(Vn(a),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[i].variable,f=Ke(fe(d,this.decay),fe(a,1-this.decay)),h=Et(fe(a,this.learningRate),qi(Tt(u,Ke(Vn(f),this.epsilon)))),g=Ke(fe(c,this.momentum),h);l.assign(u),d.assign(f),c.assign(g);const p=Tt(o,g);o.assign(p)}else{const d=Ke(fe(l,this.decay),fe(Vn(a),1-this.decay)),f=Ke(fe(c,this.momentum),Et(fe(a,this.learningRate),qi(Ke(d,this.epsilon))));l.assign(d),c.assign(f);const h=Tt(o,f);o.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&zt(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&zt(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&zt(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pvt=[wde,_de,Sde,Cde,Ede,Tde,wV];function Nvt(){for(const t of Pvt)Ge(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nQ(t,e,n,r){s(t),n=n??0,r=r??1,a(n,r);let i=0;const o=l=>(l.then(c=>{const u=n+ ++i/t.length*(r-n);return e(u),c}),l);function s(l){Y(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,c){Y(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),Y(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),Y(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(t.map(o))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function $vt(t,e){e==null&&(e={});const n=e.fetchFunc==null?Te().platform.fetch:e.fetchFunc,r=t.map(d=>n(d,e.requestInit,{isBinary:!0})),a=(e.onProgress==null?await Promise.all(r):await nQ(r,e.onProgress,0,.5)).map(d=>d.arrayBuffer());return e.onProgress==null?await Promise.all(a):await nQ(a,e.onProgress,.5,1)}function Lvt(t,e){var n;const r=e.fetchFunc==null?Te().platform.fetch:e.fetchFunc;let i=0,o;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async s=>{for(var a;i<t.length;){o||(o=(await r(t[i],e.requestInit,{isBinary:!0})).body.getReader());const{done:l,value:c}=await o.read();if(l){i++,o=void 0,(a=e.onProgress)===null||a===void 0||a.call(e,i/t.length);continue}s.enqueue(c);return}s.close()}})}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fvt="application/octet-stream",Bvt="application/json";class _V{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(Y(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=Te().platform.fetch,Y(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&Y(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],i=Jdt(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(i)],{type:Bvt}),"model.json"),e.weightData!=null){const s=jf.join(e.weightData);n.body.append("model.weights.bin",new Blob([s],{type:Fvt}),"model.weights.bin")}const o=await this.fetch(this.path,n);if(o.ok)return{modelArtifactsInfo:BW(e),responses:[o]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${o.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let s=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?s+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":s+=" Please make sure the server is serving valid JSON for this request.",new Error(s)}const r=n.modelTopology,i=n.weightsManifest;if(r==null&&i==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return tft(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),r=K7(e.weightsManifest),i=()=>Lvt(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:i})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,i]=Uvt(n),o=this.weightPathPrefix||r,s=[],a=[];for(const l of e)for(const c of l.paths)this.weightUrlConverter!=null?a.push(this.weightUrlConverter(c)):s.push(o+c+i);return this.weightUrlConverter&&s.push(...await Promise.all(a)),s}async loadWeights(e){const n=await this.getWeightUrls(e),r=K7(e),i=await $vt(n,this.loadOptions);return[r,i]}}_V.URL_SCHEME_REGEX=/^https?:\/\//;function Uvt(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),i=n>e?t.substring(n):"";return[r+"/",i]}function rQ(t){return t.match(_V.URL_SCHEME_REGEX)!=null}const kde=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>rQ(r)):n=rQ(t),n)return Ade(t,e)}return null};ii.registerSaveRouter(kde);ii.registerLoadRouter(kde);function Ade(t,e){return new _V(t,e)}function zvt(t,e){return Ade(t,e)}function SV(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(Re(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const i=e.shape,o=i[i.length-1];let s=1;for(let d=0;d<i.length-1;++d)s*=i[d];const a=t.shape,l=i.slice();l.pop();let c=1;for(let d=o;d<n;++d)c*=a[d],l.push(a[d]);const u=[..._t(t.shape).map(d=>d/c),1].slice(0,o);return[l,s,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C3=-2,jvt=-1;function CV(t,e,n){const r=t.shape.length;Y(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),Y(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let i=0;i<r;++i)Y(e[i]+n[i]<=t.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${e[i]+n[i]}) would overflow input.shape[${i}] (${t.shape[i]})`)}function Wvt(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function EV(t,e,n){const r=[];for(let i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function Mde(t,e,n,r){const i=[...t];for(let o=i.length;o<r.length;o++)i.push(1);for(let o=0;o<n;o++)o===0?i[e]=1:(i.splice(e,0,1),i.pop());return i}function Ide(t,e,n){return n<=t?n:n-(e-1)}function Ode(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function Vvt(t,e,n,r,i,o,s,a,l){const c=t.length;let u=new Array(c),d=new Array(c),f=new Array(c);if(e.length&&n>0){const h=e[0],g=n+1;u=Rde(s,h,g,r,t),d=Dde(a,h,g,i,t),f=Mde(o,h,g,t)}else for(let h=0;h<c;h++)u[h]=Nde(s,r,o,t,h,l),d[h]=$de(a,i,o,t,h,l),f[h]=Pde(o,h,l);return{begin:u,end:d,strides:f}}function Rde(t,e,n,r,i){const o=[...i],s=Ode(n,e);for(let a=0;a<o.length;a++)if(s.indexOf(a)>-1)o[a]=0;else{const l=Ide(e,n,a);let c=r[l];t&1<<l&&(c=0),o[a]=c}return o}function Dde(t,e,n,r,i){const o=[...i],s=Ode(n,e);for(let a=0;a<o.length;a++)if(s.indexOf(a)>-1)o[a]=Number.MAX_SAFE_INTEGER;else{const l=Ide(e,n,a);let c=r[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),o[a]=c}for(let a=0;a<o.length;a++){const l=i[a];o[a]<0&&(o[a]+=l),o[a]=$p(0,o[a],i[a])}return o}function Pde(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function Nde(t,e,n,r,i,o){let s=e[i];const a=n[i]||1;(t&1<<i||o&1<<i||s==null)&&(a>0?s=Number.MIN_SAFE_INTEGER:s=Number.MAX_SAFE_INTEGER);const l=r[i];return s<0&&(s+=l),s=$p(0,s,l-1),s}function $de(t,e,n,r,i,o){let s=e[i];const a=n[i]||1;(t&1<<i||o&1<<i||s==null)&&(a>0?s=Number.MAX_SAFE_INTEGER:s=Number.MIN_SAFE_INTEGER);const l=r[i];return s<0&&(s+=l),a>0?s=$p(0,s,l):s=$p(-1,s,l-1),s}function TV(t,e,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function kV(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function k2(t,e,n){let r;const i=t.shape.length;typeof e=="number"?r=[e,...new Array(i-1).fill(0)]:e.length<i?r=e.concat(new Array(i-e.length).fill(0)):r=e.slice(),r.forEach(s=>{Y(s!==-1,()=>"slice() does not support negative begin indexing.")});let o;return n==null?o=new Array(i).fill(-1):typeof n=="number"?o=[n,...new Array(i-1).fill(-1)]:n.length<i?o=n.concat(new Array(i-n.length).fill(-1)):o=n,o=o.map((s,a)=>s>=0?s:(Y(s===-1,()=>`Negative size values should be exactly -1 but got ${s} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,o]}function AV(t,e,n,r,i,o,s,a,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,s!=null&&s&s-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:i,endMask:o,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:l};for(let w=0;w<d.dims;w++)u&&1<<w&a&&d.numAddAxisAfterEllipsis++,1<<w&s&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);const f={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};Hvt(d,f);let h=!0,g=!0,p=!0;const m=[],v=[];for(let w=0;w<t.length;++w){if(f.strides[w]===0)throw Error(`strides[${w}] must be non-zero`);const y=!!(f.shrinkAxisMask&1<<w),b=t[w];if(b===-1){m.push(y?1:-1);continue}const x=[f.beginMask&1<<w,f.endMask&1<<w],S=[f.strides[w]>0?0:-1,f.strides[w]>0?b:b-1];if(y&&f.strides[w]<=0)throw Error("only stride 1 allowed on non-range indexing.");p=p&&f.strides[w]===1;const C=!!(f.beginMask&1<<w&&f.endMask&1<<w);if(f.beginValid&&f.endValid){if(y){const A=f.begin[w]<0?b+f.begin[w]:f.begin[w];if(f.begin[w]=A,f.end[w]=f.begin[w]+1,A<0||A>=b)throw Error(`slice index ${f.begin[w]} of dimension ${w} out of bounds.`)}else f.begin[w]=iQ(f.begin[w],0,f.strides[w],b,x,S),f.end[w]=iQ(f.end[w],1,f.strides[w],b,x,S);const k=f.strides[w]===1&&f.begin[w]===0&&f.end[w]===b;h=h&&k,g=g&&(w===0&&f.strides[w]===1||k)}else h=h&&f.strides[w]===1&&C,g=g&&(w===0&&f.strides[w]===1||C);let T,E=!1;if(f.beginValid&&f.endValid?(T=f.end[w]-f.begin[w],E=!0):y?(T=1,E=!0):C&&b>=0&&(f.strides[w]<0?T=-b:T=b,E=!0),E){let k;T===0||T<0!=f.strides[w]<0?k=0:k=Math.trunc(T/f.strides[w])+(T%f.strides[w]!==0?1:0),m.push(k)}else m.push(-1)}for(let w=0;w<f.finalShapeGatherIndices.length;++w){const y=f.finalShapeGatherIndices[w];y>=0?v.push(m[y]):y===C3&&v.push(1)}return{finalShapeSparse:v.filter((w,y)=>f.finalShapeGatherIndices[y]!==C3),finalShape:v,isIdentity:h,sliceDim0:g,isSimpleSlice:p,begin:f.begin,end:f.end,strides:f.strides}}function Hvt(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const i=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<i;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(C3),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(jvt),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function iQ(t,e,n,r,i,o){if(i[e])return n>0?o[e]:o[e+1&1];{const s=t<0?r+t:t;return s<o[0]?o[0]:s>o[1]?o[1]:s}}const Gvt=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:CV,computeFlatOffset:kV,computeOutShape:EV,getNormalizedAxes:Vvt,isSliceContinous:TV,maskToAxes:Wvt,parseSliceParams:k2,sliceInfo:AV,startForAxis:Nde,startIndicesWithElidedDims:Rde,stopForAxis:$de,stopIndicesWithElidedDims:Dde,stridesForAxis:Pde,stridesWithElidedDims:Mde},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qvt{static sgd(e){return new wV(e)}static momentum(e,n,r=!1){return new Ede(e,n,r)}static rmsprop(e,n=.9,r=0,i=null,o=!1){return new Tde(e,n,r,i,o)}static adam(e=.001,n=.9,r=.999,i=null){return new Sde(e,n,r,i)}static adadelta(e=.001,n=.95,r=null){return new wde(e,n,r)}static adamax(e=.002,n=.9,r=.999,i=null,o=0){return new Cde(e,n,r,i,o)}static adagrad(e,n=.1){return new _de(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ag=qvt;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xvt=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function Lde(){return new Promise(t=>Xvt(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MV(t,e){const n=t[0].length;t.forEach((i,o)=>{Y(i.length===n,()=>`Error in concat${n}D: rank of tensors[${o}] must be the same as the rank of the rest (${n})`)}),Y(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((i,o)=>{for(let s=0;s<n;s++)Y(s===e||i[s]===r[s],()=>`Error in concat${n}D: Shape of tensors[${o}] (${i}) does not match the shape of the rest (${r}) along the non-concatenated axis ${o}.`)})}function Tc(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var al;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(al||(al={}));function Fde(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let i=1;i<n.length;++i){const o=n[i],s=r[r.length-n.length+i],a=r[s];if(o>=0)if(a>=0){if(a!==o)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${i+t}] = ${o} but shape[${i+t}] = ${a}`)}else r[s]=o}return r}function Bde(t){const e={FIRST_DIM_SIZE:al.FIRST_DIM_SIZE,VALUE_ROWIDS:al.VALUE_ROWIDS,ROW_LENGTHS:al.ROW_LENGTHS,ROW_SPLITS:al.ROW_SPLITS,ROW_LIMITS:al.ROW_LIMITS,ROW_STARTS:al.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function Ude(t){return t.length===0?0:t[0]===al.FIRST_DIM_SIZE?t.length-1:t.length}function zde(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(n,r-1);++i){const o=t[i],s=e[i+1];if(o>=0&&s>=0&&o!==1&&o!==s)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${i-t.length}] = ${o} but ragged tensor input.flatValues.shape[${i-t.length}] = ${s}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IV=30;function A2(t){return t<=IV?t:a3(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OV(t,e,n){const r=n*(typeof t=="number"?t:t[0]),i=e*(typeof t=="number"?t:t[1]);return[r,i]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y1(t,e,n,r=!0){let i=[];if(r)i=i.concat(e.slice(0)),i.push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);const o=e.length;for(let s=0;s<o;++s)i=i.concat([t[s+1]/e[s],e[s]]);i=i.concat(t.slice(o+1))}return i}function Q1(t,e,n=!0){const r=[];if(n){r.push(e);for(let i=e+1;i<t;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{const i=[],o=[];for(let s=1;s<t;++s)s>=e*2+1||s%2===1?o.push(s):i.push(s);r.push(...i),r.push(0),r.push(...o)}return r}function Z1(t,e,n,r=!0){const i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(let o=1;o<t.length;++o)o<=e.length?r?i.push(e[o-1]*t[o]):i.push(t[o]/e[o-1]):i.push(t[o]);return i}function RV(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function DV(t,e,n){const r=t.slice(0,1);for(let i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M2=1.7580993408473768,I2=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PV=.3275911,NV=.254829592,$V=-.284496736,LV=1.421413741,FV=-1.453152027,BV=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hu(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function jde(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function Wde(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function Vde(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function UV(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function Hde(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function Gde(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){const o=(e?2:-2)*Math.PI*(i/t);n[i]=Math.cos(o),r[i]=Math.sin(o)}return{real:n,imag:r}}function qde(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),i=Math.cos(r),o=Math.sin(r);return{real:i,imag:o}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $P="->",Kvt=/->/g,oQ=",",sQ="...";function zV(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(Kvt,"").length)/$P.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${$P}").`);const[r,i]=t.split($P);Y(r.indexOf(sQ)===-1,()=>`The ellipsis notation ("${sQ}") is not supported yet.`);const o=r.split(oQ),s=o.length;if(e!==s)throw new Error(`Expected ${s} input tensors, received ${e}`);if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let f=0;f<i.length;++f){const h=i[f];if(!o.some(g=>g.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);a.indexOf(h)===-1&&a.push(h)}for(let f=0;f<r.length;++f){const h=r[f];a.indexOf(h)===-1&&h!==oQ&&a.push(h)}const l=new Array(o.length);for(let f=0;f<s;++f){if(new Set(o[f].split("")).size!==o[f].length)throw new Error(`Found duplicate axes in input component ${o[f]}. Support for duplicate axes in input is not implemented yet.`);l[f]=[];for(let h=0;h<o[f].length;++h)l[f].push(a.indexOf(o[f][h]))}const c=a.length,u=i.length,d=[];for(let f=u;f<c;++f)d.push(f);return{allDims:a,summedDims:d,idDims:l}}function jV(t,e){let n=new Array(t);n.fill(-1);for(let i=0;i<e.length;++i)n[e[i]]=i;const r=[];for(let i=0;i<t;++i)n[i]===-1&&r.push(i);return n=n.filter(i=>i!==-1),{permutationIndices:n,expandDims:r}}function WV(t,e,n){const r=new Array(t);for(let i=0;i<n.length;++i){const o=n[i].shape;for(let s=0;s<e[i].length;++s)r[e[i][s]]===void 0?r[e[i][s]]=o[s]:Y(r[e[i][s]]===o[s],()=>`Expected dimension ${r[e[i][s]]} at axis ${s} of input shaped ${JSON.stringify(o)}, but got dimension ${o[s]}`)}}function VV(t,e){const n=t,r=[];let i=0;t.length===0&&n.push(-1),i=t.length+1;for(let s=0;s<i;++s)r.push([]);const o=[];for(let s=0;s<n.length;++s){const a=n[s],l=Yvt(e,a);for(const c of l)o.indexOf(c)===-1&&(r[s].push(c),o.push(c))}return{path:n,steps:r}}function HV(t){return t.every((e,n)=>e===n)}function Yvt(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function GV(t,e,n=0){let r=[];if(typeof e=="number")Y(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const i=e.reduce((s,a)=>(a===-1&&(s+=1),s),0);Y(i<=1,()=>"There should be only one negative value in split array.");const o=e.indexOf(-1);if(o!==-1){const s=e.reduce((a,l)=>l>0?a+l:a);e[o]=t.shape[n]-s}Y(t.shape[n]===e.reduce((s,a)=>s+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xde(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function Kde(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function Yde(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qde(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function Zde(t,e){return`size ${t} must be non-negative, not ${e}`}function Jde(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function efe(t,e){const n=Re(t),r=Re(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function tfe(t,e){const n=Re(t),r=Re(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E3(){return"segment ids must be >= 0"}function nfe(){return"segment ids are not increasing"}function rfe(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function ife(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ofe(t,e){let n=!1,r;for(t<=IV?(r=t,n=!0):r=a3(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=a3(t,r+1);return r}function sfe(t,e,n){const r=[],i=t.length;for(let o=0;o<i;o++)o!==e?r.push(t[o]):r.push(n);return r}function qV(t,e,n,r){const i=e.shape.length,o=t.shape.length;if(r!==0&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>o)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${o}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const s=t.shape[n],a=[];let l=1,c=1,u=1;for(let d=0;d<r;++d)a.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<n;d++)a.push(t.shape[d]),c*=t.shape[d];for(let d=r;d<i;d++)a.push(e.shape[d]);for(let d=n+1;d<o;d++)a.push(t.shape[d]),u*=t.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:s,outputShape:a}}const Qvt=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:qV,computeOutShape:sfe,segOpComputeOptimalWindowSize:ofe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gu(t){try{return t.map(e=>wf(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function afe(t){return t.map(e=>lf(e))}const Zvt=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:NV,ERF_A2:$V,ERF_A3:LV,ERF_A4:FV,ERF_A5:BV,ERF_P:PV,PARALLELIZE_THRESHOLD:IV,get RowPartitionType(){return al},SELU_SCALE:I2,SELU_SCALEALPHA:M2,applyActivation:mV,assertAndGetBroadcastShape:Lt,assertAxesAreInnerMostDims:Pi,assertParamsConsistent:MV,assignToTypedArray:Hde,axesAreInnerMostDims:GW,calculateShapes:fm,checkEinsumDimSizes:WV,checkPadOnDimRoundingMode:Bo,combineLocations:Yue,combineRaggedTensorToTensorShapes:Fde,complexWithEvenIndex:Wde,complexWithOddIndex:Vde,computeConv2DInfo:Di,computeConv3DInfo:Wf,computeDefaultPad:UW,computeDilation2DInfo:H1,computeOptimalWindowSize:A2,computeOutAndReduceShapes:bi,computeOutShape:Tc,computePool2DInfo:ja,computePool3DInfo:id,convertConv2DDataFormat:od,decodeEinsumEquation:zV,eitherStridesOrDilationsAreOne:Xi,expandShapeToKeepDim:$r,exponent:qde,exponents:Gde,fromStringArrayToUint8:afe,fromUint8ToStringArray:Gu,getAxesPermutation:cr,getBroadcastDims:ly,getComplexWithIndex:UV,getEinsumComputePath:VV,getEinsumPermutation:jV,getFusedBiasGradient:pV,getFusedDyActivation:hV,getImageCenter:OV,getInnerMostAxes:Er,getPermuted:Q1,getRaggedRank:Ude,getReductionAxes:Zr,getReshaped:Y1,getReshapedPermuted:Z1,getRowPartitionTypesHelper:Bde,getSliceBeginCoords:RV,getSliceSize:DV,getSparseFillEmptyRowsIndicesDenseShapeMismatch:Xde,getSparseFillEmptyRowsNegativeIndexErrorMessage:Kde,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:Yde,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:Jde,getSparseReshapeInputOutputMismatchErrorMessage:tfe,getSparseReshapeInputOutputMultipleErrorMessage:efe,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:Qde,getSparseReshapeNegativeOutputDimErrorMessage:Zde,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:ife,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:E3,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:nfe,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:rfe,getUndoAxesPermutation:Vf,isIdentityPermutation:HV,log:ydt,mergeRealAndImagArrays:Hu,prepareAndValidate:SV,prepareSplitSize:GV,segment_util:Qvt,shouldFuse:gV,slice_util:Gvt,splitRealAndImagArrays:jde,stridesOrDilationsArePositive:jp,tupleValuesAreOne:zp,upcastType:cs,validateDefaultValueShape:zde,validateInput:Sgt,validateUpdateShape:mde,warn:Es},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Nvt();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lfe={kernelName:xO,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fe(t,K1(st(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jvt={kernelName:X_,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Vn(st(n,"float32")),i=qi(Tt(dn(1),r));return _r(Et(t,i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eyt={kernelName:K_,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=qi(Tt(Vn(st(n,"float32")),1));return Et(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tyt={kernelName:t0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Lt(n.shape,r.shape);return{a:()=>{let a=t;const l=Zr(n.shape,i);return l.length>0&&(a=St(a,l)),ge(a,n.shape)},b:()=>{let a=t;const l=Zr(r.shape,i);return l.length>0&&(a=St(a,l)),ge(a,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nyt={kernelName:K4,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,i)=>{n[i]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ryt={kernelName:wO,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>en(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iyt={kernelName:_O,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>en(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oyt={kernelName:Y_,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Et(t,qi(Tt(dn(1),Vn(st(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const syt={kernelName:Q_,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=qi(Ke(dn(1),Vn(st(n,"float32"))));return Et(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ayt={kernelName:e1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Lt(n.shape,r.shape);return{a:()=>{const a=Ke(Vn(n),Vn(r));let l=fe(t,Et(r,a));const c=Zr(n.shape,i);return c.length>0&&(l=St(l,c)),ge(l,n.shape)},b:()=>{const a=Ke(Vn(n),Vn(r));let l=_r(fe(t,Et(n,a)));const c=Zr(r.shape,i);return c.length>0&&(l=St(l,c)),ge(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lyt={kernelName:Z_,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Et(t,Ke(Vn(st(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cyt={kernelName:J_,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Et(t,Tt(dn(1),Vn(st(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uyt(t,e,n,r,i,o){const s=oe(t,"dy","avgPool3dGrad"),a=oe(e,"input","avgPool3dGrad");let l=s,c=a,u=!1;a.rank===4&&(u=!0,l=ge(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),c=ge(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),Y(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),Y(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),Bo("avgPool3dGrad",i,o);const d={dy:l,input:c},f={filterSize:n,strides:r,pad:i,dimRoundingMode:o},h=pe.runKernel(J4,d,f);return u?ge(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const dyt=ve({avgPool3dGrad_:uyt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fyt={kernelName:CO,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:o,pad:s,dimRoundingMode:a}=n;return{x:()=>dyt(t,r,i,o,s,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hyt(t,e,n,r,i){const o=oe(t,"dy","avgPoolGrad"),s=oe(e,"input","avgPoolGrad");Y(s.rank===o.rank,()=>`Rank of input (${s.rank}) does not match rank of dy (${o.rank})`);let a=s,l=o,c=!1;s.rank===3&&(c=!0,a=ge(s,[1,s.shape[0],s.shape[1],s.shape[2]]),l=ge(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Y(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),Y(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const u={dy:l,input:a},d={filterSize:n,strides:r,pad:i},f=pe.runKernel(Z4,u,d);return c?ge(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const pyt=ve({avgPoolGrad_:hyt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const myt={kernelName:SO,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:o,pad:s}=n;return{x:()=>pyt(t,r,i,o,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gyt={kernelName:EO,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,i]=e,{transposeA:o,transposeB:s}=n;return!o&&!s?{a:()=>un(t,i,!1,!0),b:()=>un(r,t,!0,!1)}:!o&&s?{a:()=>un(t,i,!1,!1),b:()=>un(t,r,!0,!1)}:o&&!s?{a:()=>un(i,t,!1,!0),b:()=>un(r,t,!1,!1)}:{a:()=>un(i,t,!0,!0),b:()=>un(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vyt={kernelName:TO,gradFunc:(t,e,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>eV(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yyt={kernelName:pdt,gradFunc:(t,e,n)=>{const r=n,i=r.inputShape,o=r.shape,s=Array.from(o);for(let l=i.length-1;l>=0;l--)if(i[l]===o[l])s[l]=1;else if(i[l]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${o}].`);const a=[];for(let l=0;l<s.length;l++)s[l]>1&&a.push(l);return{x:()=>St(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const byt={kernelName:t1,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xyt={kernelName:n1,gradFunc:t=>({x:()=>en(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wyt={kernelName:r1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:i,clipValueMax:o}=n;return{x:()=>ho(Wu(cm(r,i),r0(r,o)),t,en(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _yt={kernelName:kO,inputsToSave:["x"],gradFunc:lfe.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Syt={kernelName:AO,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:i}=n,o=Gt(i,e[0].shape)[0],s=r.map(l=>l[o]);return Fs(t,s,o).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cyt={kernelName:MO,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{dilations:o,strides:s,pad:a,dataFormat:l}=n;return Y(zp(o),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`),{x:()=>WW(r.shape,t,i,s,a,l),filter:()=>fV(r,t,i.shape,s,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eyt={kernelName:IO,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{strides:o,pad:s,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>Wp(t,i,o,s,a,1,l),filter:()=>fV(t,r,i.shape,o,s,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tyt(t,e,n,r,i){let o=t;t.rank===4&&(o=ge(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let s=e;s.rank===4&&(s=ge(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),Y(o.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${o.shape}.`),Y(s.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${s.shape}.`),Y(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),Y(o.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${o.shape[4]}) must match input depth in filter (${n[3]}.`),Y(s.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${s.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:o,dy:s},l={strides:r,pad:i,filterShape:n};return pe.runKernel(iW,a,l)}const kyt=ve({conv3DBackpropFilter_:Tyt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ayt={kernelName:OO,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:o}=n;Y(zp(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[s,a]=e;return{x:()=>Gue(s.shape,t,a,i,o),filter:()=>kyt(s,t,a.shape,i,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Myt={kernelName:i1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fe(_r(dde(st(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iyt={kernelName:o1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fe(fde(st(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oyt={kernelName:RO,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i,exclusive:o,reverse:s}=n;return{x:()=>{const a=cr([i],r.rank);let l=Xue(t,i,o,!s);return a!=null&&(l=Jt(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ryt={kernelName:DO,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:o,dimRoundingMode:s}=n,a=r??[1,1];Y(zp(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,c]=e;return Y(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),Y(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),Y(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),Y(Xi(i,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${a}'.`),Bo("depthwiseConv2d",o,s),{x:()=>jgt(l.shape,t,c,i,o,a,s),filter:()=>Ugt(l,t,c.shape,i,o,a,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dyt={kernelName:PO,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,o={x:r,filter:i,dy:t},s={x:r,filter:i,dy:t};return{x:()=>pe.runKernel(l3,o,n),filter:()=>pe.runKernel(c3,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pyt={kernelName:a1,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>pe.runKernel(hW,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nyt={kernelName:l1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=fe(Lc(_r(Vn(n))),2/Math.sqrt(Math.PI));return{x:()=>fe(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $yt={kernelName:c1,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fe(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lyt={kernelName:$O,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>ge(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fyt={kernelName:u1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fe(t,Lc(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Byt={kernelName:d1,gradFunc:t=>({x:()=>en(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uyt={kernelName:f1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Lt(n.shape,r.shape);return{a:()=>{const a=Et(t,st(r,"float32")),l=Zr(n.shape,i);return l.length>0?ge(St(a,l),n.shape):a},b:()=>{let a=fe(t,st(n,"float32"));const l=Zr(r.shape,i);l.length>0&&(a=ge(St(a,l),r.shape));const c=Vn(r);return _r(Et(a,st(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zyt={kernelName:LO,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[i,o,s,a]=e,l=a??dn(1),c=Zr(o.shape,i.shape),u=[];if(o.rank===1){for(let y=0;y<i.shape.length-1;++y)u.push(i.shape[y]);u.push(1)}const d=Tt(i,o),f=fe(t,l),h=lde(Ke(s,dn(r))),g=fe(fe(fe(h,h),h),dn(-.5));return{x:()=>o.rank===1?ge(fe(fe(t,hl(ge(h,[1,1,1,o.shape[0]]),u)),l),i.shape):ge(fe(fe(t,h),l),i.shape),mean:()=>{let y=fe(fe(h,dn(-1)),f);return o.rank===1&&(y=St(y,c)),ge(y,o.shape)},variance:()=>{let y=fe(fe(g,d),f);return o.rank===1&&(y=St(y,c)),ge(y,o.shape)},scale:()=>{const y=fe(d,h);let b=fe(t,y);return o.rank===1&&(b=St(b,c)),ge(b,o.shape)},offset:()=>{let y=t;return o.rank===1&&(y=St(y,c)),ge(y,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jyt={kernelName:FO,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,i]=e,{axis:o,batchDims:s}=n,a=Gt(o,r.shape)[0],l=(c,u,d)=>()=>{const f=c.shape,h=u.size,g=f.slice(0,a),p=g.length,m=f.slice(o,f.length).slice(1),v=m.length,_=aQ(0,p),w=aQ(p+1,p+1+v),y=lQ([g,[h],m]),b=ge(d,y),x=ge(u,[h]),S=lQ([[p],_,w]),C=Jt(b,S);let T=vde(C,x,c.shape[a]);const E=Vf(S);return T=Jt(T,E),T};if(s===1){const c=r.shape[0],u=r.split(c,0);return{x:()=>Vu(u.map((h,g)=>l(h,i.slice(g,1),t.slice(g,1))())).reshape(r.shape),indices:()=>i}}else return{x:l(r,i,t),indices:()=>i}}};function aQ(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function lQ(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wyt={kernelName:h1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>en(n),b:()=>en(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vyt={kernelName:p1,gradFunc:t=>({x:()=>st(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hyt={kernelName:m1,gradFunc:t=>({x:()=>en(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gyt={kernelName:g1,gradFunc:t=>({x:()=>en(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qyt={kernelName:v1,gradFunc:t=>({x:()=>en(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xyt={kernelName:UO,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:i}=n,o=Ys(r,0);return{x:()=>ho(o,t,fe(t,i))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kyt={kernelName:b1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Et(t,Ke(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yyt={kernelName:y1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Et(t,st(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qyt={kernelName:gdt,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;return{logits:()=>{const s=Lc(r);return Tt(t,fe(St(t,i,!0),s))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zyt(t,e,n,r=5,i=1,o=1,s=.5){const a={x:t,y:e,dy:n},l={depthRadius:r,bias:i,alpha:o,beta:s};return pe.runKernel(bW,a,l)}const Jyt=ve({localResponseNormalizationBackprop_:Zyt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e0t={kernelName:GO,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{depthRadius:o,bias:s,alpha:a,beta:l}=n;return{x:()=>Jyt(r,i,t,o,s,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cfe(t,e,n,r){return e.rank<n.rank&&(e=ge(e,$r(e.shape,r))),t.rank<n.rank&&(t=ge(t,$r(t.shape,r))),{x:()=>fe(t,st($c(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cQ={kernelName:qO,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:i}=r,o=e[0],s=e[1],a=Gt(i,o.shape),l=cfe(t,s,o,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t0t={kernelName:x1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>fe(t,st(cm(n,r),"float32")),b:()=>fe(t,st(bA(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n0t(t,e,n,r,i,o,s){const a=oe(t,"dy","maxPool3dGrad"),l=oe(e,"input","maxPool3dGrad"),c=oe(n,"output","maxPool3dGrad");let u=a,d=l,f=c,h=!1;l.rank===4&&(h=!0,u=ge(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=ge(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),f=ge(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),Y(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),Y(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),Y(f.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${f.rank}.`),Bo("maxPool3dGrad",o,s);const g={dy:u,input:d,output:f},p={filterSize:r,strides:i,pad:o,dimRoundingMode:s},m=pe.runKernel(wW,g,p);return h?ge(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}const r0t=ve({maxPool3dGrad_:n0t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i0t={kernelName:KO,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:o,strides:s,pad:a,dimRoundingMode:l}=n;return{x:()=>r0t(t,r,i,o,s,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o0t(t,e,n,r,i,o,s){const a=oe(t,"dy","maxPoolGrad"),l=oe(e,"input","maxPoolGrad"),c=oe(n,"output","maxPoolGrad");Y(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),Y(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),Y(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Bo("maxPoolGrad",o,s);const u={dy:a,input:l,output:c},d={filterSize:r,strides:i,pad:o,dimRoundingMode:s};return pe.runKernel(xW,u,d)}const s0t=ve({maxPoolGrad_:o0t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a0t={kernelName:XO,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:o,strides:s,pad:a}=n;return{x:()=>s0t(t,r,i,o,s,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l0t={kernelName:YO,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n,o=Gt(i,r.shape),a=bi(r.shape,o)[1],l=Re(a);return{x:()=>{const u=r.shape.slice();o.forEach(h=>{u[h]=1});const d=ge(t,u);return Et(fe(d,Gf(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c0t={kernelName:QO,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:i}=r,[o,s]=e,a=Gt(i,o.shape),l=cfe(t,s,o,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u0t={kernelName:w1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>fe(t,st(r0(n,r),"float32")),b:()=>fe(t,st(Ys(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d0t={kernelName:ZO,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,o=i.map(s=>s[0]);return{x:()=>Fn(t,o,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f0t={kernelName:_1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Lt(n.shape,r.shape);return{a:()=>{const a=Zr(n.shape,i);return a.length>0?ge(St(t,a),n.shape):t},b:()=>{const a=fe(t,_r(T2(Et(n,r)))),l=Zr(r.shape,i);return l.length>0?ge(St(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h0t={kernelName:S1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Lt(n.shape,r.shape);return{a:()=>{const a=fe(t,st(r,"float32")),l=Zr(n.shape,i);return l.length>0?ge(St(a,l),n.shape):a},b:()=>{const a=fe(t,st(n,"float32")),l=Zr(r.shape,i);return l.length>0?ge(St(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p0t={kernelName:JO,gradFunc:t=>({x:()=>_r(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m0t={kernelName:n2,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>ui(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g0t={kernelName:t2,gradFunc:t=>({x:()=>en(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v0t={kernelName:r2,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return Gp(t,r).map(o=>()=>o)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uQ={kernelName:i2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,o=i.map(s=>s[0]);return{x:()=>Fn(t,o,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y0t={kernelName:C1,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,i]=e,o=n,s=r,a=Lt(o.shape,s.shape);return{a:()=>{const u=st(s,"float32");let d=fe(t,fe(u,Vp(o,Tt(u,dn(1)))));const f=Zr(o.shape,a);return f.length>0&&(d=St(d,f)),ge(d,o.shape)},b:()=>{const u=Ys(o,0),d=ho(u,Fc(o),en(o));let f=fe(t,fe(i,d));const h=Zr(s.shape,a);return h.length>0&&(f=St(f,h)),ge(f,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b0t={kernelName:o2,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,i=Ys(n,0);return{x:()=>ho(i,t,fe(t,r)),alpha:()=>{let o=ho(i,en(t),fe(t,n));const s=Zr(r.shape,t.shape);return s.length>0&&(o=St(o,s)),ge(o,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x0t(t,e,n){const r=t.shape.slice();r[n]=1;const i=ge(e,r),o=_3(t,n,!0,!1),s=_3(t,n,!0,!0),a=fe(o,s);return fe(i,a)}function w0t(t,e,n){const r=t.shape.length,i=r-n.length,o=cr(n,r);let s=t;o!=null&&(s=Jt(t,o));const a=s.shape.slice(),c=a.splice(r-n.length,n.length).reduce((f,h)=>f*h,1);a.push(c);const u=s.reshape(a);let d=x0t(u,e,i);if(d=d.reshape(s.shape),o!=null){const f=Vf(o);d=Jt(d,f)}return d}const _0t={kernelName:s2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;let o=[];return i==null?o=r.shape.map((s,a)=>a):typeof i=="number"?o=[i]:o=i,{x:()=>w0t(r,t,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S0t={kernelName:s1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Lt(n.shape,r.shape);return{a:()=>{const a=Et(t,st(r,"float32")),l=Zr(n.shape,i);return l.length>0?ge(St(a,l),n.shape):a},b:()=>{let a=fe(t,st(n,"float32"));const l=Zr(r.shape,i);l.length>0&&(a=ge(St(a,l),r.shape));const c=Vn(r);return _r(Et(a,st(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C0t={kernelName:E1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Et(t,_r(Vn(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E0t={kernelName:k1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=fe(r0(n,6),K1(n));return{x:()=>fe(t,st(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T0t={kernelName:T1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fe(t,st(K1(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k0t={kernelName:a2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A0t={kernelName:c2,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>pe.runKernel(AW,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M0t={kernelName:l2,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>pe.runKernel(kW,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I0t={kernelName:u2,gradFunc:(t,e,n)=>{const{dims:r}=n,i=Gt(r,t.shape);return{x:()=>Hp(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O0t={kernelName:A1,gradFunc:t=>({x:()=>en(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R0t={kernelName:M1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>_r(Et(t,fe(Vp(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D0t={kernelName:d2,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>st(en(n),"float32"),t:()=>fe(t,st(n,t.dtype)),e:()=>fe(t,st(YW(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P0t={kernelName:I1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Ys(n,dn(0)),i=dn(M2),o=dn(I2),s=fe(t,o),a=fe(fe(t,i),Lc(st(n,"float32")));return ho(r,s,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N0t={kernelName:P1,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fe(t,fe(n,Tt(dn(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $0t={kernelName:D1,gradFunc:t=>({x:()=>en(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L0t={kernelName:O1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fe(VW(st(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F0t={kernelName:R1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fe(que(st(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B0t={kernelName:f2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:i,size:o}=n,s=r.shape,[a,l]=k2(r,i,o),c=[];for(let u=0;u<t.rank;u++)c.push([a[u],s[u]-a[u]-l[u]]);return{x:()=>JW(t,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U0t={kernelName:g2,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:i}=n,o=!0,s=fe(t,r);return{logits:()=>Tt(s,fe(St(s,[i],o),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z0t={kernelName:N1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fe(t,n0(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dQ={kernelName:p2,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>jW(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fQ={kernelName:m2,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Po(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j0t={kernelName:$1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Et(t,fe(qi(st(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W0t={kernelName:MW,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fe(t,fe(st(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V0t={kernelName:L1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=dn(2);return{a:()=>fe(t,fe(i,Tt(n,r))),b:()=>fe(t,fe(i,Tt(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H0t={kernelName:j1,gradFunc:t=>({x:()=>en(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G0t={kernelName:F1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Lt(n.shape,r.shape);return{a:()=>{let a=t;const l=Zr(n.shape,i);return l.length>0&&(a=St(a,l)),ge(a,n.shape)},b:()=>{let a=t;const l=Zr(r.shape,i);return l.length>0&&(a=St(a,l)),ge(_r(a),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q0t={kernelName:h2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,i=r.shape.slice(),{axis:o}=n;Gt(o,r.shape).forEach(c=>{i[c]=1});const a=ge(t,i),l=fe(a,Gf(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X0t={kernelName:B1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Et(t,Vn(VW(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K0t={kernelName:U1,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>fe(Tt(dn(1),Vn(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y0t={kernelName:z1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:i}=n;return{x:()=>{let s=en(r);if(r.rank===1)for(let a=0;a<i[0];++a)s=Ke(s,Fn(t,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)s=Ke(s,Fn(t,[a*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)for(let c=0;c<i[2];++c)s=Ke(s,Fn(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)for(let c=0;c<i[2];++c)for(let u=0;u<i[3];++u)s=Ke(s,Fn(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2],u*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return s}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q0t={kernelName:sv,gradFunc:(t,e,n)=>{const r=n,{perm:i}=r,o=Vf(i);return{x:()=>Jt(t,o)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z0t={kernelName:v2,gradFunc:(t,e,n)=>{const r=n,{axis:i}=r;return{value:()=>Vu(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J0t={kernelName:y2,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ebt(t,n)}}};function ebt(t,e){const n=Hf(e,en(e)),r=qW(t,n);let i=cm(e,dn(0,"int32"));const o=r.rank-i.rank;for(let a=0;a<o;++a)i=Eo(i,a+1);i=Wu(i,Gf(r.shape,"bool"));const s=en(r);return ho(i,r,s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tbt={kernelName:b2,gradFunc:t=>({x:()=>en(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nbt=[lfe,Jvt,eyt,tyt,nyt,ryt,iyt,oyt,syt,ayt,lyt,cyt,fyt,myt,gyt,vyt,yyt,byt,xyt,wyt,_yt,Syt,Eyt,Cyt,Ayt,Myt,Iyt,Oyt,Ryt,Dyt,S0t,Pyt,Nyt,$yt,Lyt,Fyt,Uyt,Byt,zyt,jyt,Wyt,Vyt,Hyt,Gyt,qyt,Xyt,Kyt,Yyt,Qyt,e0t,cQ,cQ,t0t,i0t,a0t,l0t,c0t,u0t,d0t,f0t,h0t,p0t,m0t,g0t,v0t,uQ,uQ,y0t,b0t,_0t,C0t,E0t,T0t,k0t,A0t,M0t,I0t,O0t,R0t,D0t,P0t,N0t,$0t,L0t,F0t,B0t,U0t,z0t,dQ,dQ,fQ,fQ,j0t,V0t,W0t,H0t,G0t,q0t,X0t,K0t,Y0t,Q0t,Z0t,J0t,tbt];for(const t of nbt)bdt(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.abs=function(){return this.throwIfDisposed(),io(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.acos=function(){return this.throwIfDisposed(),Rft(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.acosh=function(){return this.throwIfDisposed(),Pft(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.add=function(t){return this.throwIfDisposed(),Ke(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.all=function(t,e){return this.throwIfDisposed(),Wue(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.any=function(t,e){return this.throwIfDisposed(),x3(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.argMax=function(t){return this.throwIfDisposed(),Ow(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.argMin=function(t){return this.throwIfDisposed(),Bft(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.asScalar=function(){return this.throwIfDisposed(),Y(this.size===1,()=>"The array must have only 1 element."),ge(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.asType=function(t){return this.throwIfDisposed(),st(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.as1D=function(){return this.throwIfDisposed(),ge(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.as2D=function(t,e){return this.throwIfDisposed(),ge(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),ge(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),ge(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.as5D=function(t,e,n,r,i){return this.throwIfDisposed(),ge(this,[t,e,n,r,i])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.asin=function(){return this.throwIfDisposed(),zft(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.asinh=function(){return this.throwIfDisposed(),Wft(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.atan=function(){return this.throwIfDisposed(),Hft(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.atan2=function(t){return this.throwIfDisposed(),qft(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.atanh=function(){return this.throwIfDisposed(),Kft(this)};Oe().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),zW(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),jW(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.batchNorm=function(t,e,n,r,i){return this.throwIfDisposed(),_2(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.broadcastTo=function(t){return this.throwIfDisposed(),rx(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.cast=function(t){return this.throwIfDisposed(),st(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.ceil=function(){return this.throwIfDisposed(),_ht(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Ws(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Vr&&(t=[t]),Po([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.conv1d=function(t,e,n,r,i,o){return this.throwIfDisposed(),Vue(this,t,e,n,r,i,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.conv2dTranspose=function(t,e,n,r,i){return this.throwIfDisposed(),Hue(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.conv2d=function(t,e,n,r,i,o){return this.throwIfDisposed(),Wp(this,t,e,n,r,i,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.cos=function(){return this.throwIfDisposed(),VW(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.cosh=function(){return this.throwIfDisposed(),que(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),_3(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),Xue(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),qht(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.depthwiseConv2d=function(t,e,n,r,i,o){return this.throwIfDisposed(),HW(this,t,e,n,r,i,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.dilation2d=function(t,e,n,r,i){return this.throwIfDisposed(),Yht(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.divNoNan=function(t){return this.throwIfDisposed(),tpt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.div=function(t){return this.throwIfDisposed(),Et(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.dot=function(t){return this.throwIfDisposed(),rpt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.elu=function(){return this.throwIfDisposed(),C2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.equal=function(t){return this.throwIfDisposed(),$c(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.erf=function(){return this.throwIfDisposed(),Kue(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),mpt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.exp=function(){return this.throwIfDisposed(),Lc(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.expandDims=function(t){return this.throwIfDisposed(),Eo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.expm1=function(){return this.throwIfDisposed(),bpt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.fft=function(){return this.throwIfDisposed(),pde(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.flatten=function(){return this.throwIfDisposed(),ge(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.floor=function(){return this.throwIfDisposed(),T2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.floorDiv=function(t){return this.throwIfDisposed(),jue(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.gather=function(t,e,n){return this.throwIfDisposed(),qW(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.greaterEqual=function(t){return this.throwIfDisposed(),cm(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.greater=function(t){return this.throwIfDisposed(),Ys(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.ifft=function(){return this.throwIfDisposed(),S3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.irfft=function(){return this.throwIfDisposed(),ugt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.isFinite=function(){return this.throwIfDisposed(),Apt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.isInf=function(){return this.throwIfDisposed(),Ipt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.isNaN=function(){return this.throwIfDisposed(),Rpt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.leakyRelu=function(t){return this.throwIfDisposed(),KW(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.lessEqual=function(t){return this.throwIfDisposed(),r0(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.less=function(t){return this.throwIfDisposed(),bA(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),Lpt(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.logSigmoid=function(){return this.throwIfDisposed(),Vpt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.logSoftmax=function(t){return this.throwIfDisposed(),ede(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),tde(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.log=function(){return this.throwIfDisposed(),Fc(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.log1p=function(){return this.throwIfDisposed(),Jue(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.logicalAnd=function(t){return this.throwIfDisposed(),Wu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.logicalNot=function(){return this.throwIfDisposed(),YW(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.logicalOr=function(t){return this.throwIfDisposed(),nde(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.logicalXor=function(t){return this.throwIfDisposed(),Zpt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),un(this,t,e,n)};Oe().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),QW(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.max=function(t,e){return this.throwIfDisposed(),wl(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.maximum=function(t){return this.throwIfDisposed(),Hf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.mean=function(t,e){return this.throwIfDisposed(),Rr(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.min=function(t,e){return this.throwIfDisposed(),yA(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.minimum=function(t){return this.throwIfDisposed(),Pw(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),smt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.mod=function(t){return this.throwIfDisposed(),lmt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.mul=function(t){return this.throwIfDisposed(),fe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.neg=function(){return this.throwIfDisposed(),_r(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.norm=function(t,e,n){return this.throwIfDisposed(),E2(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.notEqual=function(t){return this.throwIfDisposed(),xA(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),rde(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.onesLike=function(){return this.throwIfDisposed(),La(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.pad=function(t,e){return this.throwIfDisposed(),JW(this,t,e)};Oe().prototype.pool=function(t,e,n,r,i,o){return this.throwIfDisposed(),ymt(this,t,e,n,r,i,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.pow=function(t){return this.throwIfDisposed(),Vp(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.prelu=function(t){return this.throwIfDisposed(),tV(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.prod=function(t,e){return this.throwIfDisposed(),wmt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.reciprocal=function(){return this.throwIfDisposed(),Vmt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.relu=function(){return this.throwIfDisposed(),dm(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.relu6=function(){return this.throwIfDisposed(),sde(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.reshapeAs=function(t){return this.throwIfDisposed(),ge(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.reshape=function(t){return this.throwIfDisposed(),ge(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),bde(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),xde(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.reverse=function(t){return this.throwIfDisposed(),Hp(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.rfft=function(){return this.throwIfDisposed(),hgt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.round=function(){return this.throwIfDisposed(),ade(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.rsqrt=function(){return this.throwIfDisposed(),lde(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.selu=function(){return this.throwIfDisposed(),cde(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.separableConv2d=function(t,e,n,r,i,o){return this.throwIfDisposed(),ude(this,t,e,n,r,i,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.sigmoid=function(){return this.throwIfDisposed(),n0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.sign=function(){return this.throwIfDisposed(),Jmt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.sin=function(){return this.throwIfDisposed(),dde(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.sinh=function(){return this.throwIfDisposed(),fde(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.slice=function(t,e){return this.throwIfDisposed(),Fn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.softmax=function(t){return this.throwIfDisposed(),dV(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.softplus=function(){return this.throwIfDisposed(),G1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),eV(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.split=function(t,e){return this.throwIfDisposed(),Fs(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.sqrt=function(){return this.throwIfDisposed(),qi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.square=function(){return this.throwIfDisposed(),Vn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.squaredDifference=function(t){return this.throwIfDisposed(),mgt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.squeeze=function(t){return this.throwIfDisposed(),X1(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Vr?[this,t]:[this,...t];return Vu(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.step=function(t){return this.throwIfDisposed(),K1(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.stridedSlice=function(t,e,n,r,i,o,s,a){return this.throwIfDisposed(),xgt(this,t,e,n,r,i,o,s,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.sub=function(t){return this.throwIfDisposed(),Tt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.sum=function(t,e){return this.throwIfDisposed(),St(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.tan=function(){return this.throwIfDisposed(),_gt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.tanh=function(){return this.throwIfDisposed(),w2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.tile=function(t){return this.throwIfDisposed(),hl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.toBool=function(){return this.throwIfDisposed(),st(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.toFloat=function(){return this.throwIfDisposed(),st(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.toInt=function(){return this.throwIfDisposed(),st(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.topk=function(t,e){return this.throwIfDisposed(),Egt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.transpose=function(t){return this.throwIfDisposed(),Jt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.unique=function(t){return this.throwIfDisposed(),Agt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),vde(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.unstack=function(t){return this.throwIfDisposed(),Gp(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.where=function(t,e){return this.throwIfDisposed(),ho(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.zerosLike=function(){return this.throwIfDisposed(),en(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Kl extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Kl.prototype)}}class Ca extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ca.prototype)}}class ue extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ue.prototype)}}class Ut extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ut.prototype)}}class XV extends Error{constructor(e){super(e),Object.setPrototypeOf(this,XV.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ufe{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function qp(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function Yl(t,e){if(!t)throw new XV(e)}function hQ(t,e){let n=0;for(const r of t)r===e&&n++;return n}function To(t){return t.length===1?t[0]:t}function Sn(t){return Array.isArray(t)?t:[t]}function au(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Ah(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let ra={};function KV(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function T3(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>T3(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:T3(r))}}}function J1(t,e={},n={},r="object",i=!1){if(typeof t=="string"){const o=t;let s;if(o in n)s=n[o];else if(o in ra)s=ra[o];else if(s=e[o],s==null)throw new ue(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return s}else{const o=t;if(o.className==null||o.config==null)throw new ue(`${r}: Improper config format: ${JSON.stringify(o)}.
'className' and 'config' must set.`);const s=o.className;let a,l;if(s in n?[a,l]=n[s]:s in ra?[a,l]=ra.className:s in e&&([a,l]=e[s]),a==null)throw new ue(`Unknown ${r}: ${s}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const h of Object.keys(ra))c[h]=ra[h];for(const h of Object.keys(n))c[h]=n[h];const u=o.config;u.customObjects=c;const d=Object.assign({},ra);for(const h of Object.keys(n))ra[h]=n[h];T3(o.config);const f=l(a,o.config,n,i);return ra=Object.assign({},d),f}else{const c=Object.assign({},ra);for(const d of Object.keys(n))ra[d]=n[d];const u=new a(o.config);return ra=Object.assign({},c),u}}}function rbt(t,e){return t<e?-1:t>e?1:0}function VC(t,e){return-1*rbt(t,e)}function cf(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function ibt(t){if(t==null)throw new ue(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function hm(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new ue(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function YV(t,e,n=0,r=1/0){return Yl(n>=0),Yl(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(i=>typeof i===e)}function hi(t,e){Array.isArray(t)?(Y(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>hi(n,`element ${r+1} of ${e}`))):Y(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${dfe(t)}.`)}function dfe(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>dfe(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function obt(t,e,n){let r=n!=null?n():Co(),i;return(...s)=>{const a=n!=null?n():Co();return a-r<e||(r=a,i=t(...s)),i}}function ffe(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let sbt=0;function hfe(){return sbt++}const HC={};function O2(t=""){return t in HC||(HC[t]=0),HC[t]+=1,t+HC[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const abt=["channelsFirst","channelsLast"],lbt=["nearest","bilinear"],cbt=["valid","same","causal"],ubt=["max","avg"],dbt=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const lg=new Map;function Tr(t){hm(abt,"DataFormat",t)}function fbt(t){hm(lbt,"InterpolationFormat",t)}function Qs(t){hm(cbt,"PaddingMode",t)}function pfe(t){hm(ubt,"PoolMode",t)}const ix=[],pQ="/";function cp(t,e){ix.push(t);try{const n=e();return ix.pop(),n}catch(n){throw ix.pop(),n}}function hbt(){return ix.length===0?"":ix.join(pQ)+pQ}function mfe(t){if(!vfe(t))throw new Error("Not a valid tensor name: '"+t+"'");return hbt()+t}function gfe(t){if(!vfe(t))throw new Error("Not a valid tensor name: '"+t+"'");lg.has(t)||lg.set(t,0);const e=lg.get(t);if(lg.set(t,lg.get(t)+1),e>0){const n=`${t}_${e}`;return lg.set(n,1),n}else return t}const pbt=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function vfe(t){return!!t.match(pbt)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function mbt(t){return t===parseInt(t.toString(),10)}function uf(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let i=e;i<n;++i)r*=t[i];return r}function uy(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function _f(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function Al(t,e){if(e<t)throw new ue(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let LP;function qr(){return LP==null&&(LP=Hdt().epsilon()),LP}function Ml(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function kc(t,e){return st(t,e)}function eS(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),ge(t,n)}function gbt(t,e){return Se(()=>{if(t.shape.length!==2)throw new ue(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=eS(t,1);return k3(n,[1,e,1])})}function vbt(t){const e=[uf(t.shape)];return ge(t,e)}function ybt(t){if(t.rank<=1)throw new ue(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],uf(t.shape,1)];return ge(t,e)}function up(t,e,n){return Se(()=>{switch(t.rank){case 1:return cV(t,e,n);case 2:return hde(t,[e,0],[n,t.shape[1]]);case 3:return uV(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return _A(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Fn(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Fn(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new ue(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function FP(t,e,n){return Se(()=>{switch(t.rank){case 1:return cV(t,e,n);case 2:return hde(t,[0,e],[t.shape[0],n]);case 3:return uV(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return _A(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new ue(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function GC(t,e,n,r){return Se(()=>{switch(t.rank){case 1:return cV(t,e,n);case 2:switch(r){case 1:return up(t,e,n);case 2:return FP(t,e,n);default:throw new ue(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return up(t,e,n);case 2:return uV(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return FP(t,e,n);default:throw new ue(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return up(t,e,n);case 2:return _A(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return _A(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return FP(t,e,n);default:throw new ue(`The axis is not within the rank of the tensor ${r}`)}default:throw new ue(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function QV(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Po(t,e)}function mQ(t,e){switch(t.rank){case 1:return Eht([t,e]);case 2:return kht([t,e],0);case 3:return Mht([t,e],0);case 4:return Oht([t,e],0);default:throw new ue(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function k3(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new ue(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return hl(t,e)}function R2(t,e=0,n=1,r,i){return Umt(t,e,n,r,i)}function Ac(t,e,n,r){if(t.rank<2||e.rank<2)throw new Ut(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const i=t.shape.slice(-1)[0],o=e.shape.slice(-2)[0];if(i!==o)throw new Ut(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return J7({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?A3(t.rank,r,Ml()):null,activation:n});{const i=t.shape.slice(),o=i.pop();t=ge(t,[-1,o]);const s=e.shape.slice(),a=s.pop(),l=s.pop(),c=[...s,a],u=Array.from({length:e.rank},(g,p)=>p===0?e.rank-2:p<=e.rank-2?p-1:p);e=ge(Jt(e,u),[l,-1]);const d=[...i,...c];return ge(J7({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?A3(t.rank,r,Ml()):null,activation:n}),d)}}function yfe(t,e,n){return Se(()=>(Array.isArray(e)?e=Zo(e,"int32"):e=st(e,"int32"),qW(t,e,n)))}function tS(t){return fe(t,t)}function A3(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new ue(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?ge(e,[1,r[0],1,1,1]):ge(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?ge(e,[1,1,1,1,r[0]]):ge(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?ge(e,[1,r[0],1,1]):ge(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?ge(e,[1,1,1,r[0]]):ge(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?ge(e,[1,r[0],1]):ge(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?ge(e,[1,1,r[0]]):ge(e,[1].concat(r))}else if(t<3)return e;throw new ue(`Unsupported input rank by biasAdd: ${e.rank}`)}function Nl(t,e,n){return Se(()=>(n==null&&(n=Ml()),Tr(n),Ke(t,A3(t.rank,e,n))))}function bbt(t,e=1){if(e!==1)throw new Ut(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return C2(t)}function xbt(t){return Se(()=>Et(t,Ke(io(t),1)))}function bfe(t,e,n,r){return Se(()=>Ngt(t,e,n,r))}function wbt(t){return Se(()=>{const e=Ke(.5,fe(.2,t));return Ws(e,0,1)})}function nS(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const _bt=["fanIn","fanOut","fanAvg"],Sbt=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Cbt(t){hm(_bt,"FanMode",t)}function Ebt(t){hm(Sbt,"Distribution",t)}class Wa extends o0{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class xfe extends Wa{apply(e,n){return ui(e,n)}}xfe.className="Zeros";Ge(xfe);class ZV extends Wa{apply(e,n){return Gf(e,n)}}ZV.className="Ones";Ge(ZV);class wfe extends Wa{constructor(e){if(super(),typeof e!="object")throw new ue(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new ue(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return Se(()=>fe(dn(this.value),Gf(e,n)))}getConfig(){return{value:this.value}}}wfe.className="Constant";Ge(wfe);class _fe extends Wa{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return q1(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}_fe.className="RandomUniform";Ge(_fe);class Sfe extends Wa{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Ut(`randomNormal does not support dType ${n}.`);return R2(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Sfe.className="RandomNormal";Ge(Sfe);class Cfe extends Wa{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Ut(`truncatedNormal does not support dType ${n}.`);return gde(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Cfe.className="TruncatedNormal";Ge(Cfe);class Efe extends Wa{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return Se(()=>{if(e.length!==2||e[0]!==e[1])throw new ue("Identity matrix initializer can only be used for 2D square matrices.");return fe(this.gain,Zue(e[0]))})}getConfig(){return{gain:this.gain}}}Efe.className="Identity";Ge(Efe);function Tbt(t,e="channelsLast"){let n,r;if(Tr(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const i=uf(t,2);n=t[1]*i,r=t[0]*i}else if(e==="channelsLast"){const i=uf(t,0,t.length-2);n=t[t.length-2]*i,r=t[t.length-1]*i}}else{const i=uf(t);n=Math.sqrt(i),r=Math.sqrt(i)}return[n,r]}class us extends Wa{constructor(e){if(super(),e.scale<0)throw new ue(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,Cbt(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,Ebt(this.distribution),this.seed=e.seed}apply(e,n){const r=Tbt(e),i=r[0],o=r[1];let s=this.scale;if(this.mode==="fanIn"?s/=Math.max(1,i):this.mode==="fanOut"?s/=Math.max(1,o):s/=Math.max(1,(i+o)/2),this.distribution==="normal"){const a=Math.sqrt(s);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Ut(`${this.getClassName()} does not support dType ${n}.`);return gde(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*s);return q1(e,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}us.className="VarianceScaling";Ge(us);class JV extends us{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return us.className}}JV.className="GlorotUniform";Ge(JV);class eH extends us{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return us.className}}eH.className="GlorotNormal";Ge(eH);class tH extends us{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return us.className}}tH.className="HeNormal";Ge(tH);class nH extends us{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return us.className}}nH.className="HeUniform";Ge(nH);class rH extends us{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return us.className}}rH.className="LeCunNormal";Ge(rH);class iH extends us{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return us.className}}iH.className="LeCunUniform";Ge(iH);class Tfe extends Wa{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return Se(()=>{if(e.length<2)throw new Ut("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=Re(e.slice(0,-1)),i=e[e.length-1],o=r*i;o>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${o}) elements: Slowness may result.`);const s=[Math.max(i,r),Math.min(i,r)],a=R2(s,0,1,n,this.seed),l=Ovt.qr(a,!1);let c=l[0];const d=l[1].flatten().stridedSlice([0],[Math.min(i,r)*Math.min(i,r)],[Math.min(i,r)+1]);return c=fe(c,d.sign()),r<i&&(c=c.transpose()),fe(dn(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}Tfe.className="Orthogonal";Ge(Tfe);const gQ={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function vQ(t,e={}){return J1(t,ga.getMap().classNameMap,e,"initializer")}function lr(t){return KV(t)}function nr(t){if(typeof t=="string"){const e=t in gQ?gQ[t]:t;if(e==="GlorotNormal")return new eH;if(e==="GlorotUniform")return new JV;if(e==="HeNormal")return new tH;if(e==="HeUniform")return new nH;if(e==="LeCunNormal")return new rH;if(e==="LeCunUniform")return new iH;{const n={};return n.className=e,n.config={},vQ(n)}}else return t instanceof Wa?t:vQ(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function M3(t){return Array.isArray(t)&&Array.isArray(t[0])}function SA(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function Mt(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new ue(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function rn(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new ue(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function CA(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,i)=>r*i);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const yQ="Variable";class kbt{constructor(e,n="float32",r=yQ,i=!0,o=null){this.dtype=n??"float32",this.shape=e.shape,this.id=hfe(),r=r??yQ,this.originalName=mfe(r),this.name=gfe(this.originalName),this.trainable_=i,this.constraint=o,this.val=Ogt(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),Abt(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function Abt(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function I3(t){return t.map(e=>e.read())}function oH(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Xr{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class Bc{constructor(e,n,r,i,o,s,a){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=i,this.callArgs=o,this.outputTensorIndex=a,this.id=hfe(),s!=null&&(this.originalName=mfe(s),this.name=gfe(this.originalName)),this.rank=n.length}}let Mbt=0,D2=class{constructor(e,n){this.callArgs=n,this.id=Mbt++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},Ibt=0;class qt extends o0{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=Ibt++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=au(r)+"_"+O2(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let o=null;e.batchSize!=null&&(o=e.batchSize),r=[o].concat(e.inputShape)}this.batchInputShape=r;let i=e.dtype;i==null&&(i=e.inputDType),i==null&&(i="float32"),this.dtype=i}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new Ca(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new ue(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return To(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return To(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Kl(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Kl(`Layer ${this.name} is not connected, no input to return.`);return To(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Kl(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Kl(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return To(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=Sn(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=Sn(this.inputSpec);if(n.length!==r.length)throw new ue(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let i=0;i<n.length;i++){const o=n[i],s=r[i];if(s==null)continue;const a=o.rank;if(s.ndim!=null&&a!==s.ndim)throw new ue(`Input ${i} is incompatible with layer ${this.name}: expected ndim=${s.ndim}, found ndim=${a}`);if(s.maxNDim!=null&&a>s.maxNDim)throw new ue(`Input ${i} is incompatible with layer ${this.name}: expected max_ndim=${s.maxNDim}, found ndim=${a}`);if(s.minNDim!=null&&a<s.minNDim)throw new ue(`Input ${i} is incompatible with layer ${this.name}: expected min_ndim=${s.minNDim}, found ndim=${a}.`);if(s.dtype!=null&&o.dtype!==s.dtype)throw new ue(`Input ${i} is incompatible with layer ${this.name} : expected dtype=${s.dtype}, found dtype=${o.dtype}.`);if(s.axes){const l=o.shape;for(const c in s.axes){const u=Number(c),d=s.axes[c],f=u>=0?l[u]:l[l.length+u];if(d!=null&&[d,null].indexOf(f)===-1)throw new ue(`Input ${i} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${d} but got shape ${l}.`)}}if(s.shape!=null)for(let l=0;l<s.shape.length;++l){const c=s.shape[l],u=o.shape[l];if(c!=null&&u!=null&&c!==u)throw new ue(`Input ${i} is incompatible with layer ${this.name}: expected shape=${s.shape}, found shape=${o.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=Sn(e),i=Dbt(e),o=Pbt(e);if(i===o)throw new ue("Arguments to apply() must be all SymbolicTensors or all Tensors");return cp(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const s=[];for(const a of Sn(e))s.push(a.shape);this.build(To(s)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&o&&(this._refCount=1)}if(this.assertInputCompatibility(e),o){let s=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,s);const a=Sn(s),l=[];for(let c of a)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(s=To(l),this.activityRegularizer!=null)throw new Ut("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return s}else{const s=Obt(e),a=this.computeOutputShape(s);let l;const c=Rbt(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?s[0]:s),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((u,d)=>new Bc(c,u,this,Sn(e),n,this.name,d)):l=new Bc(c,a,this,Sn(e),n,this.name),this.addInboundNode(e,l,null,null,s,a,n),this._refCount++,this.activityRegularizer!=null)throw new Ut("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,i)=>{r!=null&&e[i]!=null&&e[i]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Kl(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new Kl(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Ca(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return CA(this.weights)}build(e){this.built=!0}getWeights(e=!1){return I3(e?this.trainableWeights:this.weights)}setWeights(e){Se(()=>{const n=this.weights;if(n.length!==e.length)throw new ue(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],i=I3(n);for(let o=0;o<i.length;++o){const s=i[o],a=n[o],l=e[o];if(!mn(s.shape,l.shape))throw new ue(`Layer weight shape ${s.shape} not compatible with provided weight shape ${l.shape}`);r.push([a,l])}oH(r)})}addWeight(e,n,r,i,o,s,a,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new ue(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(i=l!=null?l():nr("zeros"));const c=i.apply(n,r),u=new kbt(c,r,e,s,a);return c.dispose(),o!=null&&this.addLoss(()=>o.apply(u.read())),s==null&&(s=!0),s?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=Sn(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const i=this.computeMask(e,r),o=Sn(n),s=Sn(i);if(o.length!==s.length)throw new Error(`${this.name} outputs ${o.length} tensors but ${o.length} masks for those tensors`);for(let a=0;a<o.length;a++)o[a].kerasMask=s[a]}addInboundNode(e,n,r,i,o,s,a=null){const l=Sn(e);n=Sn(n),r=Sn(r),i=Sn(i),o=SA(o),s=SA(s);const c=[],u=[],d=[];for(const f of l)c.push(f.sourceLayer),u.push(f.nodeIndex),d.push(f.tensorIndex);new D2({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:d,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:i,inputShapes:o,outputShapes:s},a);for(let f=0;f<n.length;f++)n[f].sourceLayer=this,n[f].nodeIndex=this.inboundNodes.length-1,n[f].tensorIndex=f}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function Obt(t){t=Sn(t);const e=[];for(const n of t)e.push(n.shape);return To(e)}function Rbt(t){return"float32"}function kfe(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const i=[];for(let o=0;o<r.inboundLayers.length;o++){const s=r.inputTensors[o],a=r.inboundLayers[o],l=r.nodeIndices[o],c=kfe(s,a,l);for(const u of c)i.indexOf(u)===-1&&i.push(u)}return i}}}function Dbt(t){let e=!0;for(const n of Sn(t))if(!(n instanceof Bc)){e=!1;break}return e}function Pbt(t){let e=!0;for(const n of Sn(t))if(n instanceof Bc){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class rS extends qt{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:O2("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new ue("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new ue("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new ue("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const i=new Bc(this.dtype,this.batchInputShape,this,[],{},this.name);i.nodeIndex=0,i.tensorIndex=0,new D2({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new ue(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}rS.className="InputLayer";Ge(rS);function Nbt(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new ue("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new rS({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $bt(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return st(e,t.dtype)}catch{throw new ue(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class jd{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof jd)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=$bt(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new ue(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Bc){if(this.id2Value[e.id]==null)throw new ue(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new ue(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof Bc){if(this.id2Value[e.id]==null)throw new ue(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new ue(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&zt(this.id2Mask)}}const EA=new ufe,TA=new ufe;function Lbt(t){EA!=null&&EA.setMaxEntries(t),TA!=null&&TA.setMaxEntries(t)}function Sb(t,e,n,r){const i=n==null?!1:n.training,o=Array.isArray(t),s=o?t:[t],a=s.map(g=>g.name),l=[],c=e.names();for(const g of a)c.indexOf(g)!==-1?l.push(e.getValue(g)):l.push(null);const u=a.join(",")+"|"+e.names().sort().join(",");let d=EA.get(u),f;if(d==null){const g=Fbt(s,e);d=g.sorted,f=g.recipientCounts,EA.put(u,d),TA.put(u,f)}f={},i||Object.assign(f,TA.get(u));const h=new jd(e);for(let g=0;g<d.length;++g){const p=d[g],m=p.sourceLayer;if(m instanceof rS)continue;const v=[],_=[],w=[];let y=!1;for(const T of p.inputs){const E=h.getValue(T),k=h.getMask(T);v.push(E),_.push(k),k!=null&&(y=!0),i||(f[T.name]--,f[T.name]===0&&!e.hasKey(T)&&a.indexOf(T.name)===-1&&!E.isDisposed&&T.sourceLayer.stateful!==!0&&w.push(E))}y&&(n=n||{},n.mask=_[0]);const b=Sn(m.apply(v,n));let x=null;m.supportsMasking&&(x=m.computeMask(v,_));const S=Ubt(p),C=Array.isArray(S)?S:[S];for(let T=0;T<C.length;++T){h.hasKey(C[T])||h.add(C[T],b[T],Array.isArray(x)?x[0]:x);const E=a.indexOf(C[T].name);E!==-1&&(l[E]=b[T])}i||zt(w)}return h.disposeMasks(),o?l:l[0]}function Fbt(t,e){Y(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const i=bQ(t[0],e);n=i.sorted,r=i.recipientMap}else{const i=new Set;for(const o of t){const{sorted:s,recipientMap:a}=bQ(o,e);for(const l of s)i.has(l.name)||(n.push(l),i.add(l.name));for(const l in a)r[l]==null&&(r[l]=new Set),a[l].forEach(c=>r[l].add(c))}}return{sorted:n,recipientCounts:Bbt(r)}}function Bbt(t){const e={};for(const n in t)e[n]=t[n].size;return e}function bQ(t,e){const n=new Set,r=[],i={};for(const a of e.names())n.add(a);const o=[],s=[];for(o.push(t);o.length>0;){const a=o[o.length-1];if(n.has(a.name)){o.pop();continue}const l=s[s.length-1]===o.length-1;if(a.inputs.length===0||l)o.pop(),r.push(a),n.add(a.name),l&&s.pop();else{s.push(o.length-1);for(const c of a.inputs)i[c.name]==null&&(i[c.name]=new Set),i[c.name].add(a.name),!n.has(c.name)&&o.push(c)}}return{sorted:r,recipientMap:i}}function Ubt(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const i of t.sourceLayer.inboundNodes[r].outputTensors)if(i.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zbt=Te();zbt.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,Lbt);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function sH(t,e){return Se(()=>qi(St(fe(t,t),e,!0)))}class iS extends o0{getConfig(){return{}}}class Afe extends iS{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Se(()=>{const n=sH(e,this.axis),r=Ws(n,0,this.maxValue);return fe(e,Et(r,Ke(qr(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}Afe.className="MaxNorm";Ge(Afe);class Mfe extends iS{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Se(()=>Et(e,Ke(qr(),sH(e,this.axis))))}getConfig(){return{axis:this.axis}}}Mfe.className="UnitNorm";Ge(Mfe);class Ife extends iS{apply(e){return dm(e)}}Ife.className="NonNeg";Ge(Ife);class Ofe extends iS{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Se(()=>{const n=sH(e,this.axis),r=Ke(fe(this.rate,Ws(n,this.minValue,this.maxValue)),fe(1-this.rate,n));return fe(e,Et(r,Ke(qr(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}Ofe.className="MinMaxNorm";Ge(Ofe);const xQ={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Yr(t){return KV(t)}function wQ(t,e={}){return J1(t,ga.getMap().classNameMap,e,"constraint")}function Qr(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in xQ?xQ[t]:t,config:{}};return wQ(n)}else return t instanceof iS?t:wQ(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function ah(t){if(t==null)return;const e=[],n=[],r=[];for(const i in t){const o=t[i];if(typeof o!="number"){const s=o;e.push(s.data()),n.push(i),r.push(s)}}if(e.length>0){const i=await Promise.all(e);for(let o=0;o<i.length;++o)t[n[o]]=i[o][0];zt(r)}}function Rfe(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var _Q;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(_Q||(_Q={}));const jbt=125;class $w{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class Wbt{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class Vbt extends $w{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const i in n){const o=n[i];if(typeof o=="number")this.totals.hasOwnProperty(i)||(this.totals[i]=0),this.totals[i]=this.totals[i]+o*r;else{let s;i in this.totals?s=this.totals[i]:this.totals[i]=0;const a=Se(()=>Ke(this.totals[i],fe(o,r)));this.totals[i]=a,s!=null&&s.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:Se(()=>{const i=fe(Et(1,this.seen),this.totals[r]);n[r]=i,this.totals[r].dispose(),Ec(n[r])}))}}class Hbt extends $w{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const o in this.history){const s=this.history[o];for(let a=0;a<s.length;++a)if(typeof s[a]!="number"){const l=s[a];e.push(l.data()),n.push(o),r.push(a)}}const i=await Promise.all(e);for(let o=0;o<i.length;++o)this.history[n[o]][r[o]].dispose(),this.history[n[o]][r[o]]=i[o][0]}}class Gbt extends $w{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||Lde,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=jbt),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");o3(this.yieldEvery)&&(this.maybeWait=obt(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const i=[];this.yield!=null&&(await ah(r),i.push(this.yield(e,n,r))),i.push(this.nextFrameFunc()),await Promise.all(i)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await ah(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await ah(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await ah(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await ah(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):o3(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await ah(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await ah(e),await this.trainEnd(e))}}function Dfe(t,e){return t==null&&(t={}),t instanceof $w?[t]:Array.isArray(t)&&t[0]instanceof $w?t:Sn(t).map(r=>new Gbt(r,e))}class sa{constructor(){}static registerCallbackConstructor(e,n){Y(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),sa.checkForDuplicate(n),sa.constructors[e]==null&&(sa.constructors[e]=[]),sa.constructors[e].push(n)}static checkForDuplicate(e){for(const n in sa.constructors)sa.constructors[+n].forEach(i=>{if(i===e)throw new ue("Duplicate callback constructor.")})}static clear(){sa.constructors={}}static createCallbacks(e){const n=[];for(const r in sa.constructors){const i=+r;e>=i&&n.push(...sa.constructors[i])}return n.map(r=>new r)}}sa.constructors={};function Pfe(t,e,n,r,i,o,s,a,l){const c=new Hbt,u=[new Vbt,...sa.createCallbacks(e)];t!=null&&u.push(...t),u.push(c);const d=new Wbt(u);return d.setParams({epochs:n,initialEpoch:r,samples:i,steps:o,batchSize:s,verbose:e,doValidation:a,metrics:l}),{callbackList:d,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Mc(t,e={},n=!1){return J1(t,ga.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function kA(t,e){return Se(()=>{t.dtype!=="float32"&&(t=st(t,"float32"));const n=St(tS(t),e,!0),r=S2(n.shape,qr()),i=qi(Hf(n,r));return Et(t,i)})}function P2(t,e){return Se(()=>Rr(tS(Tt(e,t)),-1))}function aH(t,e){return Se(()=>Rr(io(Tt(e,t)),-1))}function lH(t,e){return Se(()=>{const n=Tt(t,e),r=Ws(io(t),qr(),Number.MAX_VALUE),i=io(Et(n,r));return fe(100,Rr(i,-1))})}function qbt(t,e){return Se(()=>{const n=Ws(e,qr(),Number.MAX_VALUE),r=Fc(Ke(1,n)),i=Ws(t,qr(),Number.MAX_VALUE),o=Fc(Ke(1,i));return Rr(tS(Tt(r,o)),-1)})}function Xbt(t,e){return Se(()=>{const n=Hf(0,Tt(1,fe(t,e)));return Rr(tS(n),-1)})}function Kbt(t,e){return Se(()=>{const n=Hf(0,Tt(1,fe(t,e)));return Rr(n,-1)})}function Ybt(t,e){return Se(()=>{const n=St(fe(t,e),-1),r=wl(fe(Tt(1,t),e),-1);return Hf(0,Ke(1,Tt(r,n)))})}function Qbt(t,e){return Se(()=>{const n=Math.log(2),r=Tt(e,t),i=Tt(Ke(r,G1(fe(-2,r))),n);return Rr(i,-1)})}function Lw(t,e,n=!1){return Se(()=>{if(n)e=dV(e);else{const r=St(e,e.shape.length-1,!0);e=Et(e,r)}return e=Ws(e,qr(),1-qr()),_r(St(fe(st(t,"float32"),Fc(e)),e.shape.length-1))})}function AA(t,e,n=!1){return Se(()=>{const r=st(T2(vbt(t)),"int32");e=Ws(e,qr(),1-qr());const i=e.shape,o=ge(rde(r,i[i.length-1]),i);return Lw(o,e,n)})}function Zbt(t,e){if(!mn(t.shape,e.shape))throw new ue(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return Se(()=>{const n=dm(e),r=_r(io(e));return Ke(Tt(n,fe(e,t)),Jue(Lc(r)))})}function N2(t,e){return Se(()=>{let n;return n=Ws(e,qr(),1-qr()),n=Fc(Et(n,Tt(1,n))),Rr(Zbt(t,n),-1)})}function Jbt(t,e){return Se(()=>{const n=Ws(t,qr(),1),r=Ws(e,qr(),1);return St(fe(t,Fc(Et(n,r))),-1)})}function ext(t,e){return Se(()=>{const n=Fc(Ke(qr(),e));return Rr(Tt(e,fe(t,n)),-1)})}function Nfe(t,e){return Se(()=>{const n=kA(t,-1),r=kA(e,-1),i=fe(n,r);return _r(St(i,-1))})}const MA={meanSquaredError:P2,meanAbsoluteError:aH,meanAbsolutePercentageError:lH,meanSquaredLogarithmicError:qbt,squaredHinge:Xbt,hinge:Kbt,categoricalHinge:Ybt,logcosh:Qbt,categoricalCrossentropy:Lw,sparseCategoricalCrossentropy:AA,binaryCrossentropy:N2,kullbackLeiblerDivergence:Jbt,poisson:ext,cosineProximity:Nfe};function BP(t){if(typeof t=="string"){if(t in MA)return MA[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ue(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $fe(t,e){return Se(()=>{const n=fe(.5,La(e)),r=kc(Ys(e,n),t.dtype);return Rr($c(t,r),-1)})}function Lfe(t,e){return Se(()=>kc($c(Ow(t,-1),Ow(e,-1)),"float32"))}function txt(t,e){return Se(()=>st(St(Wu($c(t,1),$c(e,1))),"float32"))}function nxt(t,e){return Se(()=>st(St(Wu($c(t,0),$c(e,1))),"float32"))}function rxt(t,e){return Se(()=>{const n=txt(t,e),r=nxt(t,e),i=Ke(n,r);return st(ho(Ys(i,0),Et(n,i),0),"float32")})}function ixt(t,e){return N2(t,e)}function oxt(t,e){return t.rank===e.rank&&(t=X1(t,[t.rank-1])),e=Ow(e,-1),e.dtype!==t.dtype&&(e=st(e,t.dtype)),st($c(t,e),"float32")}const sxt=P2,axt=P2,lxt=aH,cxt=aH,uxt=lH,dxt=lH,Ffe=Lw,fxt=Nfe,Bfe=AA,IA={binaryAccuracy:$fe,categoricalAccuracy:Lfe,precision:rxt,categoricalCrossentropy:Ffe,sparseCategoricalCrossentropy:Bfe,mse:sxt,MSE:axt,mae:lxt,MAE:cxt,mape:uxt,MAPE:dxt,cosine:fxt};function hxt(t){if(typeof t=="string"&&t in IA)return IA[t];if(typeof t!="string"&&t!=null)return t;throw new ue(`Unknown metric ${t}`)}function qC(t){if(Yl(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(MA))if(MA[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(IA))if(IA[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pxt(t){const e={Adagrad:()=>ag.adagrad(.01),Adadelta:()=>ag.adadelta(1,.95,qr()),Adam:()=>ag.adam(.001,.9,.999,qr()),Adamax:()=>ag.adamax(.002,.9,.999,qr(),0),RMSProp:()=>ag.rmsprop(.001,.9,0,qr()),SGD:()=>ag.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new ue(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const SQ=1*1024*1024;function CQ(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!O3(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>SQ&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${SQ}.`)}}function O3(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!O3(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!O3(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function mxt(t,e,n,r=console.log){const i=vxt(t),o=["Layer (type)","Input Shape","Output shape","Param #"];i?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(u=>Math.floor(e*u)));let s;if(!i){o.push("Receives inputs"),s=[];for(const u in t.nodesByDepth)s.push(...t.nodesByDepth[u])}r("_".repeat(e)),OA(o,n,r),r("=".repeat(e));const a=t.layers;for(let u=0;u<a.length;++u)i?yxt(a[u],n,r):bxt(a[u],n,s,r),r((u===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=gxt(t),c=CA(t.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(e))}function gxt(t){let e;return t.collectedTrainableWeights!=null?e=CA(t.collectedTrainableWeights):e=CA(t.trainableWeights),e}function vxt(t){let e=!0;const n=[],r=[];for(const i in t.nodesByDepth)n.push(t.nodesByDepth[i]);for(const i of n){if(i.length>1||i.length===1&&i[0].inboundLayers.length>1){e=!1;break}r.push(...i)}if(e)for(const i of t.layers){let o=!1;for(const s of i.inboundNodes)if(r.indexOf(s)!==-1)if(o){e=!1;break}else o=!0;if(!e)break}return e}function OA(t,e,n=console.log){let r="";for(let i=0;i<t.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=t[i],r=r.slice(0,e[i]),r+=" ".repeat(e[i]-r.length);n(r)}function yxt(t,e,n){let r,i;try{i=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{i="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const o=t.name,s=t.getClassName(),a=[`${o} (${s})`,i,r,t.countParams().toString()];OA(a,e,n)}function bxt(t,e,n,r){let i,o;try{o=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{o="multiple"}try{i=JSON.stringify(t.outputShape)}catch{i="multiple"}const s=[];for(const d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let f=0;f<d.inboundLayers.length;++f){const h=d.inboundLayers[f].name,g=d.nodeIndices[f],p=d.tensorIndices[f];s.push(`${h}[${g}][${p}]`)}const a=t.name,l=t.getClassName(),c=s.length===0?"":s[0],u=[`${a} (${l})`,o,i,t.countParams().toString(),c];OA(u,e,r);for(let d=1;d<s.length;++d)OA(["","","","",s[d]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ufe(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function RA(t,e){if(t===null)return null;if(typeof t=="string")return Ah(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const o=t[i];Ufe(e,i,o)?n.push(o):n.push(RA(o,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r];if(r==="name"&&typeof i=="string")n[r]=i;else{const o=Ah(r);n[o]=RA(i,o)}}return n}}function R3(t,e){if(t==null)return null;if(typeof t=="string")return au(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const o=t[i];Ufe(e,i,o)?n.push(o):n.push(R3(o,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r],o=au(r);(r==="name"||r==="className")&&typeof i=="string"?n[o]=i:n[o]=R3(i,r)}return n}}/** @license See the LICENSE file. */const zfe="4.20.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const xxt=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class Ja extends qt{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const _=this.getClassName().toLowerCase();this.name=O2(_)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],cf(this.inputs).length!==this.inputs.length)throw new ue(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(_=>_.name)}`);cf(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(_=>_.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const _ of this.outputs){const w=_.sourceLayer,y=_.nodeIndex,b=_.tensorIndex;this.outputLayers.push(w),this.outputLayersNodeIndices.push(y),this.outputLayersTensorIndices.push(b)}for(const _ of this.inputs){const w=_.sourceLayer,y=_.nodeIndex,b=_.tensorIndex;Yl(y===0,"input layer has >1 nodes"),Yl(b===0,"input layer has >1 tensors"),this.inputLayers.push(w),this.inputLayersNodeIndices.push(y),this.inputLayersTensorIndices.push(b)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let _=0;_<this.inputLayers.length;_++){const w=this.inputLayers[_];if(!(w instanceof rS))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${_} (0-based) originates from layer type ${w.getClassName()}.`);this.inputNames.push(w.name),this.feedInputShapes.push(w.batchInputShape),this.feedInputNames.push(w.name)}for(const _ of this.outputLayers)this.outputNames.push(_.name);this.internalInputShapes=this.inputs.map(_=>_.shape),this.internalOutputShapes=this.outputs.map(_=>_.shape);const n={},r={},i={},o={},s={},a=[],l=(_,w,y,b,x,S)=>{(b==null||x==null||S==null)&&(b=_.sourceLayer,x=_.nodeIndex,S=_.tensorIndex);const C=b.inboundNodes[x];if(y.indexOf(C)!==-1)throw new Ca(`The tensor ${_.name} at layer "${b.name}" is part of a cycle.`);if(w.indexOf(C)!==-1)return;this.containerNodes.add(Ja.nodeKey(b,x)),b.id in s||(s[b.id]=Object.keys(s).length),y.indexOf(C)===-1&&y.push(C);const T=C.inboundLayers.length;for(let E=0;E<T;E++){const k=C.inputTensors[E],A=C.inboundLayers[E],O=C.nodeIndices[E],D=C.tensorIndices[E];l(k,w,y,A,O,D)}for(w.push(C);y.indexOf(C)>=0;)y.splice(y.indexOf(C),1);a.push(C)},c=[],u=[];for(const _ of this.outputs)l(_,c,u);const d=a.slice().reverse();for(const _ of d){r[_.id]=_,_.id in n||(n[_.id]=0);let w=n[_.id];const y=i[_.outboundLayer.id]==null?0:i[_.outboundLayer.id];w=Math.max(w,y),i[_.outboundLayer.id]=w,o[_.outboundLayer.id]=_.outboundLayer,n[_.id]=w;for(let b=0;b<_.inboundLayers.length;b++){const x=_.inboundLayers[b],S=_.nodeIndices[b],C=x.inboundNodes[S],T=n[C.id]==null?0:n[C.id];n[C.id]=Math.max(w+1,T),r[C.id]=C}}const f={};for(const _ in n){const w=n[_];w in f||(f[w]=[]),f[w].push(r[_])}const h={};for(const _ in i){const w=i[_];w in h||(h[w]=[]),h[w].push(o[_])}let g=Object.keys(h).map(_=>parseInt(_,10)).sort(VC);this.layers=[];for(const _ of g){const w=h[_];w.sort((y,b)=>{const x=s[y.id],S=s[b.id];return x<S?-1:x>S?1:0});for(const y of w)y instanceof Ja&&this.internalContainerRefs.push(y),this.layers.push(y)}this.layersByDepth=h,g=Object.keys(f).map(_=>parseInt(_,10)).sort(VC);const p=this.inputs.slice(),m=[];for(const _ of g)for(const w of f[_]){const y=w.outboundLayer;if(y!=null){for(const b of w.inputTensors)if(p.indexOf(b)===-1)throw new Ca(`Graph disconnected: cannot obtain value for tensor ${b} at layer "${y.name}". The following previous layers were accessed without issue: ${m}`);for(const b of w.outputTensors)p.push(b);m.push(y.name)}}this.nodesByDepth=f;const v=this.layers.map(_=>_.name);for(const _ of v){const w=v.filter(y=>y===_).length;if(w!==1)throw new Ca(`The name "${_}" is used ${w} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(v))}this.outboundNodes=[],this.inboundNodes=[],new D2({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(_=>null),outputMasks:this.outputs.map(_=>null),inputShapes:this.inputs.map(_=>_.shape),outputShapes:this.outputs.map(_=>_.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new ue("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let i=0;const o=xxt(e);o&&this.parseWeights(e);for(const a of this.layers)for(const[l,c]of a.weights.entries()){const u=o?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[u]!=null)throw new ue(`Duplicate weight name: ${u}`);r[u]=c,i++}const s=[];for(const a in e){let l=a;if(r[a]==null){const c=a.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)s.push([r[l],e[a]]);else if(n)throw new ue(`Provided weight data has no target variable: ${a}`);delete r[l]}if(n){const a=[];for(const l in r)a.push(l);if(a.length>0)throw new ue(`${a.length} of ${i} weights are not set: ${a}`)}oH(s)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),i=["vars","layer_checkpoint_dependencies"],o=r.map(s=>s.startsWith("_")?s.slice(1):s).filter(s=>!i.includes(s)).join("/");o!==n&&(e[o]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${zfe}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=R3(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return Se(()=>{e=Sn(e);const r=new jd;for(let i=0;i<this.inputs.length;++i)r.add(this.inputs[i],e[i]);return Sb(this.outputs,r,n)})}computeMask(e,n){return Se(()=>{e=Sn(e);let r;return n==null?r=qp(null,e.length):r=Sn(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=SA(e);if(n.length!==this.inputLayers.length)throw new ue(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],c=n[a],u=l.name+"_0_0";r[u]=c}const i=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(VC);if(i.length>1)for(const a of i){const l=this.nodesByDepth[a];for(const c of l){const u=c.outboundLayer;if(this.inputLayers.map(p=>p.id).indexOf(u.id)!==-1)continue;const d=[];for(let p=0;p<c.inboundLayers.length;p++){const m=c.inboundLayers[p],v=c.nodeIndices[p],_=c.tensorIndices[p],w=`${m.name}_${v}_${_}`,y=r[w];d.push(y)}const f=u.computeOutputShape(To(d)),h=SA(f),g=u.inboundNodes.indexOf(c);for(let p=0;p<h.length;p++){const m=`${u.name}_${g}_${p}`;r[m]=h[p]}}}const o=[],s=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],c=this.outputLayersNodeIndices[a],u=this.outputLayersTensorIndices[a],d=`${l.name}_${c}_${u}`;s.push(d)}for(let a=0;a<s.length;a++){const l=s[a];Yl(l in r),o.push(r[l])}return To(o)}runInternalGraph(e,n){n==null&&(n=qp(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],u=e[l],d=n[l];r[c.id]=[u,d]}const i=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(VC);for(const l of i){const c=this.nodesByDepth[l];for(const u of c){const d=u.outboundLayer,f=u.inputTensors,h=u.outputTensors,g=new Array;for(const p of f)p.id in r&&g.push(r[p.id]);if(g.length===f.length){let p={},m,v,_,w;if(u.callArgs!=null&&(p=u.callArgs),g.length===1){const[y,b]=g[0];p.mask==null&&(p.mask=b),_=Sn(d.call(y,p)),w=Sn(d.computeMask(y,b)),m=[y],v=[b]}else m=g.map(y=>y[0]),v=g.map(y=>y[1]),p.mask==null&&(p.mask=v),_=Sn(d.call(m,p)),w=Sn(d.computeMask(m,v));if(d.activityRegularizer)throw new Ut("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let y=0;y<h.length;++y){const b=h[y],x=_[y],S=w[y];r[b.id]=[x,S]}}}}const o=[],s=[],a=[];for(const l of this.outputs){Yl(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[c,u]=r[l.id];a.push(c.shape),o.push(c),s.push(u)}return[o,s,a]}buildNodeConversionMap(e){const n={};let r;for(const i of this.layers){r=i instanceof Ja?1:0;for(let o=0;o<i.inboundNodes.length;o++){const s=Ja.nodeKey(i,o);this.containerNodes.has(s)&&(n[s]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new ue("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new ue(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new ue(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return Se(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const i=Ja.nodeKey(n,r);this.containerNodes.has(i)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const s of this.layers){const a=s.getClassName(),l=s.getConfig(),c=[];for(let d=0;d<s.inboundNodes.length;d++){const f=s.inboundNodes[d],h=Ja.nodeKey(s,d);let g={};if(this.containerNodes.has(h)){if(f.callArgs)try{JSON.stringify(f.callArgs),g=f.callArgs}catch{console.warn(`Layer ${s.name} was passed non-serializable keyword arguments: ${f.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),g={}}if(f.inboundLayers.length>0){const p=[];for(let m=0;m<f.inboundLayers.length;m++){const v=f.inboundLayers[m],_=f.nodeIndices[m],w=f.tensorIndices[m],y=Ja.nodeKey(v,_);let b=n[y];b==null&&(b=0),p.push([v.name,b,w,g])}c.push(p)}}}const u={};u.name=s.name,u.className=a,u.config=l,u.inboundNodes=c,r.push(u)}e.layers=r;const i=[];for(let s=0;s<this.inputLayers.length;s++){const a=this.inputLayers[s],l=this.inputLayersNodeIndices[s],c=Ja.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const d=this.inputLayersTensorIndices[s];i.push([a.name,u,d])}e.inputLayers=i;const o=[];for(let s=0;s<this.outputLayers.length;s++){const a=this.outputLayers[s],l=this.outputLayersNodeIndices[s],c=Ja.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const d=this.outputLayersTensorIndices[s];o.push([a.name,u,d])}return e.outputLayers=o,e}static fromConfig(e,n,r={},i=!1){const o={},s={};function a(m,v){m.name in s?s[m.name].push(v):s[m.name]=[v]}function l(m,v){const _=[];let w;for(const y of v){const b=y[0],x=y[1],S=y[2];if(w=y[3]==null?{}:y[3],!(b in o)){a(m,v);return}const C=o[b];if(C.inboundNodes.length<=x){a(m,v);return}const T=C.inboundNodes[x];_.push(T.outputTensors[S])}_.length>0&&m.apply(To(_),w)}function c(m){const v=m.name,_=Mc(m,n.customObjects!=null?n.customObjects:{});_.setFastWeightInitDuringBuild(i),o[v]=_,m.inboundNodes.forEach(y=>{if(!(y instanceof Array))throw new ue(`Corrupted configuration, expected array for nodeData: ${y}`);a(_,y)})}const u=n.name,d=n.layers;for(const m of d)c(m);for(;!ibt(s);)for(const m of d){const v=o[m.name];if(v.name in s){const _=s[v.name];delete s[v.name];for(const w of _)l(v,w)}}const f=[],h=[],g=n.inputLayers;for(const m of g){const v=m[0],_=m[1],w=m[2];Yl(v in o);const b=o[v].inboundNodes[_].outputTensors;f.push(b[w])}const p=n.outputLayers;for(const m of p){const v=m[0],_=m[1],w=m[2];Yl(v in o);const b=o[v].inboundNodes[_].outputTensors;h.push(b[w])}return new e({inputs:f,outputs:h,name:u})}get stateful(){if(this._stateful)throw new ue("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){Se(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function wxt(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(i=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const i=[];return e.forEach(o=>{o in t?i.push(t[o]):i.push(null)}),i}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function jfe(t,e){return wxt(t,e,"classWeight")}async function Wfe(t,e,n,r){if(n!=null){const i=Se(()=>{if(t.shape.length===1)return lp(t);if(t.shape.length===2){if(t.shape[1]>1)return Ow(t,1);if(t.shape[1]===1)return ge(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),o=Array.from(await i.data());zt(i);const s=[];return o.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);s.push(n[a])}),Zo(s,"float32")}else return null}function _xt(t,e){return fe(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Sxt=32;function Vfe(t,e){let n,r;const i=e;n=i.xs,r=i.ys,Y(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const o=EQ("input",t.inputNames,n),s=EQ("output",t.outputNames,r),a=o[0].shape[0];Y(o.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${o.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),Y(s.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${s.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<o.length;l++)Y(o[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${o[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<s.length;l++)Y(s[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${s[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:o,ys:s}}function EQ(t,e,n){if(n instanceof Vr)return[n];if(Array.isArray(n))return Y(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const i of e){if(n[i]==null)throw new ue(`The feature data generated by the dataset lacks the required ${t} key '${i}'.`);r.push(n[i])}return r}}function Cxt(t){if(t.length===3)throw new Ut("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function Ext(t,e,n){const r=n.batchesPerEpoch!=null;if(Y(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),Y(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),Y(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),Y(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),Y(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const i=n.validationData!=null;let o,s;if(i)if(TQ(n.validationData))Y(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const m=Cxt(n.validationData);o=m.xs,s=m.ys}const a=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let c;i?c=l.slice().concat(l.map(m=>"val_"+m)):c=l.slice();const u=Dfe(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:f,history:h}=Pfe(u,d,n.epochs,null,null,Txt(e,n),null,i,c);f.setModel(t),t.history=h,await f.onTrainBegin(),t.stopTraining_=!1;let g=n.initialEpoch==null?0:n.initialEpoch,p=await e.iterator();for(;g<n.epochs;){const m={};await f.onEpochBegin(g);let v=0,_=0;for(r||(p=await e.iterator());!r||v<n.batchesPerEpoch;){const w=await p.next();if(r&&w.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${v} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(w.value!=null){const{xs:y,ys:b}=Vfe(t,w.value),x={};x.batch=_,x.size=y[0].shape[0],await f.onBatchBegin(_,x);const S=[];if(n.classWeight!=null){const E=jfe(n.classWeight,t.outputNames);for(let k=0;k<E.length;++k)S.push(await Wfe(b[k],null,E[k]))}const C=y.concat(b).concat(S),T=a(C);zt(C);for(let E=0;E<l.length;++E){const k=l[E],A=T[E];x[k]=A,Ec(A)}await f.onBatchEnd(_,x),Rfe(x),_++,v++}if(r?v>=n.batchesPerEpoch:w.done){if(i){let y;TQ(n.validationData)?y=Sn(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):y=Sn(t.evaluate(o,s,{batchSize:n.validationBatchSize==null?Sxt:n.validationBatchSize,verbose:0}));for(let b=0;b<t.metricsNames.length;++b)m[`val_${t.metricsNames[b]}`]=y[b]}break}if(t.stopTraining_)break}if(await f.onEpochEnd(g,m),g++,t.stopTraining_)break}return await f.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function Txt(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function TQ(t){return typeof t.iterator=="function"}function kxt(t){return typeof t.next=="function"}async function Axt(t,e,n){n=n||{};const r=n.batches!=null,i=t.testFunction;let o=[];if(n.verbose>0)throw new Ut("Verbose mode is not implemented yet.");Y(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const s=kxt(e)?e:await e.iterator();let a=0,l=0;for(;!r||l<n.batches;){const c=await s.next();if(o=Se(()=>{if(c.value){const{xs:u,ys:d}=Vfe(t,c.value),f=u.concat(d),h=Se(()=>i(f));if(zt(f),l===0)for(let p=0;p<h.length;++p)o.push(dn(0));const g=f[0].shape[0];for(let p=0;p<h.length;++p){const m=h[p],v=o[p];o[p]=Se(()=>Ke(o[p],fe(g,m))),l>0&&zt(v)}zt(h),a+=g,++l}return o}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<o.length;++c){const u=o[c];o[c]=Et(o[c],a),zt(u)}return To(o)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function UP(t){Y(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function sb(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>up(r,e,n-e)):up(t,e,n-e)}function D3(t,e){return Se(()=>t==null?null:Array.isArray(t)?t.map(n=>D3(n,e)):yfe(t,e.dtype==="int32"?e:st(e,"int32")))}function zP(t,e){const n=[];let r=0,i=null;for(;r<t;)i=r+e,i>=t&&(i=t),n.push([r,i]),r=i;return n}function Hfe(t){const e=[];t instanceof Vr&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(eS(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Qa(t,e){if(t==null)return;const n=[];if(e instanceof Vr)n.push(e.id);else if(Array.isArray(e))e.forEach(i=>n.push(i.id));else if(e!=null)for(const i in e){const o=e[i];n.push(o.id)}const r=[];if(t instanceof Vr)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(i=>{n.indexOf(i.id)===-1&&r.push(i)});else if(t!=null)for(const i in t){const o=t[i];n.indexOf(o.id)===-1&&r.push(o)}r.forEach(i=>{i.isDisposed||i.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Mxt(t){return t instanceof Vr}function P3(t){return Array.isArray(t)}function kQ(t){return!Mxt(t)&&!P3(t)}function AQ(t,e,n,r=!0,i=""){if(e==null||e.length===0){if(t!=null){let s=!1;if(P3(t)&&t.length>0)s=!0;else if(kQ(t)){for(const a in t)if(t.hasOwnProperty(a)){s=!0;break}}else s=!0;if(s)throw new ue(`Error when checking model ${i} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(s=>null);let o;if(kQ(t)){t=t,o=[];for(const s of e){if(t[s]==null)throw new ue(`No data provided for "${s}". Need data for each key in: ${e}`);o.push(t[s])}}else if(P3(t)){if(t=t,t.length!==e.length)throw new ue(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);o=t}else{if(t=t,e.length>1)throw new ue(`The model ${i} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);o=[t]}if(o=Hfe(o),n!=null)for(let s=0;s<e.length;++s){if(n[s]==null)continue;const a=o[s];if(a.shape.length!==n[s].length)throw new ue(`Error when checking ${i}: expected ${e[s]} to have ${n[s].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<n[s].length;++l){if(l===0&&!r)continue;const c=a.shape[l],u=n[s][l];if(u!=null&&u>=0&&c!==u)throw new ue(`${i} expected a batch of elements where each example has shape [${n[s].slice(1,n[s].length)}] (i.e.,tensor shape [*,${n[s].slice(1,n[s].length)}]) but the ${i} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return o}function Ixt(t,e,n){const r=cf(t.map(o=>o.shape[0]));r.sort();const i=cf(e.map(o=>o.shape[0]));if(i.sort(),r.length>1)throw new ue(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(o=>o.shape))}`);if(i.length>1)throw new ue(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(o=>o.shape))}`);if(r.length>0&&i.length>0&&!mn(r,i))throw new ue(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${i[0]} target sample(s).`)}function Oxt(t,e,n){const r=[P2,N2,Lw];for(let i=0;i<t.length;++i){const o=t[i],s=e[i],a=n[i];if(s!=null){if(s===Lw&&o.shape[o.shape.length-1]===1)throw new ue(`You are passing a target array of shape ${o.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(s)!==-1){const l=o.shape.slice(1),c=a.slice(1);for(let u=0;u<l.length;++u){const d=l[u],f=c[u];if(f!=null&&d!==f)throw new ue(`A target Tensor with shape ${o.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function MQ(t,e,n,r=!0,i=""){let o;if(Array.isArray(t)){if(t.length!==e.length)throw new ue(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);o=t}else{if(e.length>1)throw new ue(`The model expects ${e.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);o=[t]}if(n!=null)for(let s=0;s<e.length;++s){if(n[s]==null)continue;const a=o[s];if(a.shape.length!==n[s].length)throw new ue(`Error when checking ${i}: expected ${e[s]} to have ${n[s].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<n[s].length;++l){if(l===0&&!r)continue;const c=a.shape[l],u=n[s][l];if(u!=null&&u!==c)throw new ue(`Error when checking ${i}: expected ${e[s]} to have shape ${JSON.stringify(n[s])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function Rxt(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const i of e){let o=n.hasOwnProperty(i)?n[i]:[];Array.isArray(o)||(o=[o]),r.push(o)}return r}}const Dxt="layers-model";class lv extends Ja{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new ue("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");mxt(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=pxt(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof qf))throw new ue("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const s in e.loss)if(this.outputNames.indexOf(s)===-1)throw new ue(`Unknown entry in loss dictionary: "${s}". Only expected the following keys: ${this.outputNames}`);for(const s of this.outputNames)e.loss[s]==null&&console.warn(`Output "${s}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${s} during training`),n.push(BP(e.loss[s]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new ue(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>BP(a))}else{const s=BP(e.loss);this.outputs.forEach(a=>{n.push(s)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let s=0;s<this.outputs.length;++s){const a=this.internalOutputShapes[s],l=this.outputNames[s];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[s])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],cp("loss",()=>{for(let s=0;s<this.outputs.length;++s){if(r.indexOf(s)!==-1)continue;const a=this.lossFunctions[s];this.outputs.length>1&&(this.metricsTensors.push([a,s]),this.metricsNames.push(this.outputNames[s]+"_loss"))}});const i=Rxt(e.metrics,this.outputNames),o=(s,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[s]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,s])};cp("metric",()=>{for(let s=0;s<this.outputs.length;++s){if(r.indexOf(s)!==-1)continue;const a=i[s];(c=>{const u="";let d,f,h;for(const g of c){if(typeof g=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(g)!==-1){const m=this.internalOutputShapes[s];m[m.length-1]===1||this.lossFunctions[s]===N2?["accuracy","acc"].indexOf(g)!==-1?f=$fe:["crossentropy","ce"].indexOf(g)!==-1&&(f=ixt):this.lossFunctions[s]===AA?["accuracy","acc"].indexOf(g)!==-1?f=oxt:["crossentropy","ce"].indexOf(g)!==-1&&(f=Bfe):["accuracy","acc"].indexOf(g)!==-1?f=Lfe:["crossentropy","ce"].indexOf(g)!==-1&&(f=Ffe);let v;["accuracy","acc"].indexOf(g)!==-1?v="acc":["crossentropy","ce"].indexOf(g)!==-1&&(v="ce"),h=f,d=u+v}else h=hxt(g),d=u+qC(g);let p;cp(d,()=>{p=h}),o(s,d,p)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const i=r.batchSize==null?32:r.batchSize;UP(i);const s=this.standardizeUserDataXY(e,n,!0,i);try{const a=s[0].concat(s[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,a,i,r.verbose,r.steps);return To(c)}finally{Qa(s[0],e),Qa(s[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),Axt(this,e,n)}checkNumSamples(e,n,r,i="steps"){let o;if(r!=null){if(o=null,n!=null)throw new ue(`If ${i} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?o=e[0].shape[0]:o=e.shape[0];else throw new ue(`Either the input data should have a defined shape, or ${i} shoud be specified.`);return o}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new ue("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),i=r?n:[n],o=this.retrieveSymbolicTensors(i),s=new jd;if(e instanceof Vr&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new ue(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)s.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new ue(`No value is provided for the model's input ${l.name}`);s.add(l,c)}const a=Sb(o,s);return r?a:a[0]}retrieveSymbolicTensors(e){const n=qp(null,e.length);let r=e.length;for(const i of this.layers){const o=Array.isArray(i.output)?i.output:[i.output],s=o.map(a=>a.name);for(let a=0;a<e.length;++a){const l=s.indexOf(e[a]);if(l!==-1&&(n[a]=o[l],r--),r===0)break}if(r===0)break}if(r>0){const i=[];throw n.forEach((o,s)=>{o==null&&i.push(e[s])}),new ue(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(i)}`)}return n}predictLoop(e,n=32,r=!1){return Se(()=>{const i=this.checkNumSamples(e);if(r)throw new Ut("Verbose predictLoop() is not implemented yet.");const o=zP(i,n),s=this.outputs.map(a=>[]);for(let a=0;a<o.length;++a)Se(()=>{const c=o[a][0],u=o[a][1],d=sb(e,c,u),f=[];if(Array.isArray(d))for(let g=0;g<d.length;++g)f.push({key:this.inputs[g],value:d[g]});else f.push({key:this.inputs[0],value:d});const h=new jd(f);return Sb(this.outputs,h)}).forEach((c,u)=>s[u].push(c));return To(s.map(a=>Po(a,0)))})}predict(e,n={}){const r=Hfe(e);MQ(r,this.inputNames,this.feedInputShapes,!1);try{const i=n.batchSize==null?32:n.batchSize;return UP(i),this.predictLoop(r,i)}finally{Qa(r,e)}}predictOnBatch(e){MQ(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,i){if(this.optimizer_==null)throw new Ca("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const o=[];for(let s=0;s<this.feedOutputShapes.length;++s){const a=this.feedOutputShapes[s];this.feedLossFns[s]===AA?o.push(a.slice(0,a.length-1).concat([1])):o.push(a)}if(e=AQ(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=AQ(n,this.feedOutputNames,o,!1,"target"),Ixt(e,n),Oxt(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&i!=null&&i>0&&e[0].shape[0]%i!==0)throw new ue(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${i}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,i,o=!0,s){const[a,l]=this.standardizeUserDataXY(e,n,o,s);if(r!=null)throw new Error("sample weight is not supported yet.");let c=null;if(i!=null){const u=jfe(i,this.outputNames);c=[];for(let d=0;d<u.length;++d)c.push(await Wfe(l[d],null,u[d]))}return[a,l,c]}testLoop(e,n,r,i=0,o){return Se(()=>{const s=this.checkNumSamples(n,r,o,"steps"),a=[];if(i>0)throw new Ut("Verbose mode is not implemented yet.");if(o!=null)throw new Ut("steps mode in testLoop() is not implemented yet");{const l=zP(s,r),c=Zo(Al(0,s));for(let u=0;u<l.length;++u){const d=l[u][0],f=l[u][1],h=up(c,d,f-d),g=D3(n,h),p=e(g);if(u===0)for(let m=0;m<p.length;++m)a.push(dn(0));for(let m=0;m<p.length;++m){const v=p[m];a[m]=Ke(a[m],fe(f-d,v))}}for(let u=0;u<a.length;++u)a[u]=Et(a[u],s)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const i=e[r];let o=i;if(hQ(e,i)>1){const s=hQ(e.slice(0,r),i);o+=`_${s}`}n.push(o)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),s=[],a=()=>{const d=[];for(let p=0;p<this.inputs.length;++p)d.push({key:this.inputs[p],value:r[p]});const f=new jd(d),h=Sb(this.outputs,f,{training:!0});let g;for(let p=0;p<this.lossFunctions.length;++p){const m=this.lossFunctions[p];let v=m(i[p],h[p]);o[p]!=null&&(v=_xt(v,o[p]));const _=Rr(v);n.push(_),p===0?g=v:g=Ke(g,v)}for(let p=0;p<this.metricsTensors.length;++p){let m;if(this.outputs.length>1&&p<this.outputs.length)m=n[p];else{const v=this.metricsTensors[p][0],_=this.metricsTensors[p][1];m=Rr(v(i[_],h[_]))}Ec(m),s.push(m)}return g=Rr(g),this.calculateLosses().forEach(p=>{g=Ke(g,p)}),g},l=this.collectedTrainableWeights.map(d=>d.read());return[this.optimizer_.minimize(a,!0,l)].concat(s)}}makeTestFunction(){this.testFunction=e=>Se(()=>{const n=[];let r;const i=e.slice(0,this.inputs.length),o=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=[];for(let c=0;c<this.inputs.length;++c)s.push({key:this.inputs[c],value:i[c]});const a=new jd(s),l=Sb(this.outputs,a);for(let c=0;c<this.lossFunctions.length;++c){const u=this.lossFunctions[c],d=Rr(u(o[c],l[c]));c===0?r=d:r=Ke(r,d),n.push(r)}for(let c=0;c<this.metricsTensors.length;++c){const u=this.metricsTensors[c][0],d=this.metricsTensors[c][1],f=Rr(u(o[d],l[d]));n.push(f)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let i,o,s,a,l,c,u,d,f;try{const h=r.batchSize==null?32:r.batchSize;UP(h);const p=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,h);i=p[0],o=p[1],f=p[2];let m=!1,v;if(r.validationData!=null&&r.validationData.length>0){if(m=!0,r.validationData.length===2)l=r.validationData[0],c=r.validationData[1];else throw r.validationData.length===3?new Ut("validationData including sample weights is not supported yet."):new ue(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const E=await this.standardizeUserData(l,c,null,null,!0,h);u=E[0],d=E[1],v=u.concat(d)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){m=!0;const T=Math.floor(i[0].shape[0]*(1-r.validationSplit)),E=i[0].shape[0];u=sb(i,T,E),s=i,i=sb(i,0,T),d=sb(o,T,E),a=o,o=sb(o,0,T),v=u.concat(d)}else r.validationSteps!=null&&(m=!0);const _=i.concat(o).concat(f);this.checkTrainableWeightsConsistency();const w=this.makeTrainFunction(),y=this.getDedupedMetricsNames();let b,x;m?(this.makeTestFunction(),b=this.testFunction,x=y.slice().concat(y.map(T=>"val_"+T))):(b=null,v=[],x=y.slice());const S=Dfe(r.callbacks,r.yieldEvery);return await this.fitLoop(w,_,y,h,r.epochs,r.verbose,S,b,v,r.shuffle,x,r.initialEpoch,null,null)}finally{this.isTraining=!1,Qa(i,e),Qa(o,n),Qa(s,e),Qa(a,n),Qa(u,l),Qa(d,c),f!=null&&zt(f)}}async fitLoop(e,n,r,i,o,s,a,l,c,u,d,f,h,g){i==null&&(i=32),o==null&&(o=1),u==null&&(u=!0),f==null&&(f=0);let p=!1;if(l!=null&&c!=null&&(p=!0),g!=null&&(p=!0,h==null))throw new ue("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const m=this.checkNumSamples(n,i,h,"steps_per_epoch");let v;m!=null&&(v=Al(0,m)),s==null&&(s=1);const{callbackList:_,history:w}=Pfe(a,s,o,f,m,h,i,p,d);_.setModel(this),this.history=w,await _.onTrainBegin(),this.stopTraining_=!1;for(let y=f;y<o;++y){await _.onEpochBegin(y);const b={};if(h!=null)throw new Ut("stepsPerEpoch mode is not implemented yet.");{if(u==="batch")throw new Ut("batch shuffling is not implemneted yet");u&&tdt(v);const x=Zo(v),S=zP(m,i);for(let C=0;C<S.length;++C){const T={};if(await _.onBatchBegin(C,T),Se(()=>{const E=S[C][0],k=S[C][1],A=up(x,E,k-E);T.batch=C,T.size=k-E;const O=D3(n,A),D=e(O);for(let P=0;P<r.length;++P){const N=r[P],U=D[P];T[N]=U,Ec(U)}if(C===S.length-1&&p){const P=this.testLoop(l,c,i);for(let N=0;N<r.length;++N){const U=r[N],L=P[N];Ec(L),b["val_"+U]=L}}}),await _.onBatchEnd(C,T),Rfe(T),this.stopTraining_)break}x.dispose()}if(await _.onEpochEnd(y,b),this.stopTraining_)break}return await _.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return Ext(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),i=r[0],o=r[1],a=this.makeTrainFunction()(i.concat(o)),l=[];for(const c of a){const u=await c.data();l.push(u[0])}return zt(a),Qa(r[0],e),Qa(r[1],n),To(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,i=r?this.trainableWeights:this.weights,o=this.getWeights(r);for(let s=0;s<i.length;++s)r&&!i[s].trainable||n.push({name:i[s].originalName,tensor:o[s]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=G7().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-G7().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=au(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>au(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const i of n)if(typeof r[i]=="string")e[i]=au(r[i]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[au(qC(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>au(qC(e)));{const e={};for(const n in this.metrics)e[n]=au(qC(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=RA(e.optimizer_config),r=Mc(n);let i;if(typeof e.loss=="string")i=Ah(e.loss);else if(Array.isArray(e.loss))i=e.loss.map(s=>Ah(s));else if(e.loss!=null){i={};for(const s in e.loss)i[s]=Ah(e.loss[s])}let o;if(Array.isArray(e.metrics))o=e.metrics.map(s=>Ah(s));else if(e.metrics!=null){o={};for(const s in e.metrics)o[s]=Ah(e.metrics[s])}this.compile({loss:i,metrics:o,optimizer:r})}async save(e,n){if(typeof e=="string"){const c=sft(e);if(c.length===0)throw new ue(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new ue(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new ue("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await q7(this.getNamedWeights(n)),a={modelTopology:this.toJSON(null,!1),format:Dxt,generatedBy:`TensorFlow.js tfjs-layers v${zfe}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:u,specs:d}=await q7(await this.optimizer.getWeights(),c);r.specs.push(...d),r.data=Zdt([r.data,u])}return this.userDefinedMetadata!=null&&(CQ(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=r.data,a.weightSpecs=r.specs,e.save(a)}setUserDefinedMetadata(e){CQ(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}lv.className="Model";Ge(lv);class Gfe extends lv{}Gfe.className="Functional";Ge(Gfe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function Pxt(t,e){if(e==null&&(e={}),typeof t=="string"){const n=aft(t,e);if(n.length===0)n.push(zvt(t,e));else if(n.length>1)throw new ue(`Found more than one (${n.length}) load handlers for URL '${t}'`);t=n[0]}return Nxt(t,void 0,e)}async function Nxt(t,e,n){if(n==null&&(n={}),t.load==null)throw new ue("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const r=await t.load();let i=r.modelTopology;i.model_config!=null&&(i=i.model_config);const o=n.strict==null?!0:n.strict,s=r.weightData!=null&&r.weightSpecs!=null&&o,a=Mc(RA(i),e,s),l=r.trainingConfig;if(l!=null&&a.loadTrainingConfig(l),r.userDefinedMetadata!=null&&a.setUserDefinedMetadata(r.userDefinedMetadata),r.weightData!=null){if(r.weightSpecs==null)throw new ue("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:c,optimizerWeights:u}=$xt(r.weightData,r.weightSpecs);a.loadWeights(c,o),a.optimizer!=null&&u.length>0&&await a.optimizer.setWeights(u),zt(c),zt(u.map(d=>d.tensor))}return a}function $xt(t,e){const n=Gdt(t,e),r={},i=[];return e.forEach(o=>{o.group==="optimizer"?i.push({name:o.name,tensor:n[o.name]}):r[o.name]=n[o.name]}),{modelWeights:r,optimizerWeights:i}}class dy extends lv{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:O2("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new ue(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof dy||e instanceof lv;let r;if(n){if(r=e,r.outputs.length!==1)throw new ue("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new ue("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new ue("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const i=Nbt({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(i)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new ue(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new ue("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=kfe(this.outputs[0])}this.inboundNodes=[],new D2({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:qp(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(i=>i.shape),outputShapes:this.outputs[0].shape})}else{const i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(rn(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new lv({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new Ca("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new Ca("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new Ca("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new Ca("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},i=!1){let o,s={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new ue("Legacy serialization format not supported yet.");o=n}else Y(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),o=n.layers,delete n.layers,s=n;const a=new e(s);if(!(a instanceof dy))throw new Ut(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of o){const u=Mc(l,void 0,i);i&&u.setFastWeightInitDuringBuild(!0),a.add(u)}return a}set stopTraining(e){if(this.model==null)throw new ue("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new ue("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}dy.className="Sequential";Ge(dy);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Lxt(t){return new dy(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Ki=class extends o0{getConfig(){return{}}};class qfe extends Ki{apply(e,n=1){return bbt(e,n)}}qfe.className="elu";Ge(qfe);class Xfe extends Ki{apply(e){return cde(e)}}Xfe.className="selu";Ge(Xfe);class Kfe extends Ki{apply(e){return dm(e)}}Kfe.className="relu";Ge(Kfe);class Yfe extends Ki{apply(e){return Se(()=>Pw(6,dm(e)))}}Yfe.className="relu6";Ge(Yfe);class Qfe extends Ki{apply(e){return e}}Qfe.className="linear";Ge(Qfe);class Zfe extends Ki{apply(e){return n0(e)}}Zfe.className="sigmoid";Ge(Zfe);class Jfe extends Ki{apply(e){return wbt(e)}}Jfe.className="hardSigmoid";Ge(Jfe);class ehe extends Ki{apply(e){return G1(e)}}ehe.className="softplus";Ge(ehe);class the extends Ki{apply(e){return xbt(e)}}the.className="softsign";Ge(the);class nhe extends Ki{apply(e){return w2(e)}}nhe.className="tanh";Ge(nhe);let cH=class extends Ki{apply(e,n=-1){return dV(e,n)}};cH.className="softmax";Ge(cH);class rhe extends Ki{apply(e,n=-1){return ede(e,n)}}rhe.className="logSoftmax";Ge(rhe);class ihe extends Ki{apply(e){return Se(()=>Se(()=>{const n=Math.sqrt(2),r=fe(.5,Ke(1,Kue(Et(e,n))));return fe(e,r)}))}}ihe.className="gelu";Ge(ihe);class ohe extends Ki{apply(e){return Se(()=>fe(.5,fe(e,Ke(1,w2(fe(qi(Et(2,Math.PI)),Ke(e,fe(.044715,Vp(e,3)))))))))}}ohe.className="gelu_new";Ge(ohe);class she extends Ki{apply(e){return Se(()=>fe(e,w2(G1(e))))}}she.className="mish";Ge(she);class ahe extends Ki{apply(e,n=1){return Se(()=>fe(n0(fe(e,n)),e))}}ahe.className="swish";Ge(ahe);function Sf(t){return t.getClassName()}function jP(t,e={}){return J1(t,ga.getMap().classNameMap,e,"activation")}function Cf(t){if(t==null){const e={};return e.className="linear",e.config={},jP(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},jP(e)}else return t instanceof Ki?t:jP(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Fxt(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class lhe extends o0{}class che extends lhe{constructor(e){super(),Fxt(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return Se(()=>{let n=ui([1]);return this.hasL1&&(n=Ke(n,St(fe(this.l1,io(e))))),this.hasL2&&(n=Ke(n,St(fe(this.l2,tS(e))))),ge(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}che.className="L1L2";Ge(che);const IQ={l1l2:"L1L2"};function $n(t){return KV(t)}function OQ(t,e={}){return J1(t,ga.getMap().classNameMap,e,"regularizer")}function rr(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in IQ?IQ[t]:t,config:{}};return OQ(n)}else return t instanceof lhe?t:OQ(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class uhe extends qt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=Mt(e);let r=dm(e);return this.maxValue!=null&&(r=Ws(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}uhe.className="ReLU";Ge(uhe);class dhe extends qt{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Mt(e);return KW(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}dhe.className="LeakyReLU";Ge(dhe);class fhe extends qt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=nr(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=rr(e.alphaRegularizer),this.alphaConstraint=Qr(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new ue(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=rn(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const i of this.sharedAxes)n[i-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let i=1;i<e.length;++i)r[i]=e[i];this.inputSpec=[new Xr({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=Mt(e),tV(e,this.alpha.read())}getConfig(){const e={alphaInitializer:lr(this.alphaInitializer),alphaRegularizer:$n(this.alphaRegularizer),alphaConstraint:Yr(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}fhe.className="PReLU";Ge(fhe);let hhe=class extends qt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new Ut(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Mt(e);return C2(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};hhe.className="ELU";Ge(hhe);class phe extends qt{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=Mt(e);return fe(r,st(Ys(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}phe.className="ThresholdedReLU";Ge(phe);class mhe extends qt{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new cH().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return Se(()=>{let r=Mt(e);const i=n.mask;if(i!=null){const o=fe(Tt(Gf(r.shape),st(i,r.dtype)),dn(-1e9));r=Ke(r,o)}return this.axis instanceof Array?this.axis.length>1?Lc(Tt(r,tde(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}mhe.className="Softmax";Ge(mhe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function cv(t,e,n){if(typeof t=="number")return qp(t,e);if(t.length!==e)throw new ue(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const i=t[r];if(!mbt(i))throw new ue(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${i}`)}return t}function _l(t,e,n,r,i=1){if(t==null)return t;const o=e+(e-1)*(i-1);let s;return n==="same"?s=t:s=t-o+1,Math.floor((s+r-1)/r)}function Ql(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+_f([n-e,0]);else if(r==="same")t=t*e;else throw new ue(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function uH(t,e){return Se(()=>(Tr(e),e==="channelsFirst"?Jt(t,[0,2,3,1]):t))}function ghe(t,e){return Se(()=>(Tr(e),e==="channelsFirst"?Jt(t,[0,2,3,4,1]):t))}function Bxt(t,e,n,r=1,i="valid",o,s=1){return Se(()=>{if(o==null&&(o=Ml()),Tr(o),t.shape.length!==3)throw new ue(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new ue(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new ue(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(o==="channelsFirst"&&(t=Jt(t,[0,2,1])),i==="causal")throw new Ut("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=Vue(t,e,r,i==="same"?"same":"valid","NWC",s);return n!=null&&(a=Nl(a,n)),a})}function RQ(t,e,n,r=[1,1],i="valid",o,s,a=null){return Se(()=>{if(o==null&&(o=Ml()),Tr(o),t.rank!==3&&t.rank!==4)throw new ue(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new ue(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=uH(t,o);if(i==="causal")throw new Ut("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=Fgt({x:l,filter:e,strides:r,pad:i==="same"?"same":"valid",dilations:s,dataFormat:"NHWC",bias:n,activation:a}),o==="channelsFirst"&&(l=Jt(l,[0,3,1,2])),l})}function Uxt(t,e,n,r=[1,1,1],i="valid",o,s){return Se(()=>{if(o==null&&(o=Ml()),Tr(o),t.rank!==4&&t.rank!==5)throw new ue(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new ue(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=ghe(t,o);if(i==="causal")throw new Ut("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=Lht(a,e,r,i==="same"?"same":"valid","NDHWC",s),n!=null&&(a=Nl(a,n)),o==="channelsFirst"&&(a=Jt(a,[0,4,1,2,3])),a})}class $2 extends qt{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",$2.verifyArgs(n),this.rank=e,hi(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new Ut(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=cv(n.kernelSize,e,"kernelSize"),this.strides=cv(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,Qs(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Tr(this.dataFormat),this.activation=Cf(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=nr(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Qr(n.biasConstraint),this.biasRegularizer=rr(n.biasRegularizer),this.activityRegularizer=rr(n.activityRegularizer),this.dilationRate=cv(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new ue(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new ue(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new ue(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Yl("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!YV(e.kernelSize,"number",1,3))throw new ue(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Sf(this.activation),useBias:this.useBias,biasInitializer:lr(this.biasInitializer),biasRegularizer:$n(this.biasRegularizer),activityRegularizer:$n(this.activityRegularizer),biasConstraint:Yr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class s0 extends $2{constructor(e,n){super(e,n),this.kernel=null,s0.verifyArgs(n),this.filters=n.filters,hi(this.filters,"filters"),this.kernelInitializer=nr(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Qr(n.kernelConstraint),this.kernelRegularizer=rr(n.kernelRegularizer)}build(e){e=rn(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ue(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],i=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return Se(()=>{e=Mt(e);let r;const i=this.bias==null?null:this.bias.read(),o=ffe(this.activation.getClassName());if(o!=null&&this.rank===2)r=RQ(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,o);else{if(this.rank===1)r=Bxt(e,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=RQ(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=Uxt(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new Ut("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=rn(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let o=0;o<r.length;++o){const s=_l(r[o],this.kernelSize[o],this.padding,this.strides[o],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[o]);n.push(s)}let i=[e[0]];return this.dataFormat==="channelsLast"?(i=i.concat(n),i.push(this.filters)):(i.push(this.filters),i=i.concat(n)),i}getConfig(){const e={filters:this.filters,kernelInitializer:lr(this.kernelInitializer),kernelRegularizer:$n(this.kernelRegularizer),kernelConstraint:Yr(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new ue(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class oS extends s0{constructor(e){super(2,e),oS.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!YV(e.kernelSize,"number",1,2))throw new ue(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}oS.className="Conv2D";Ge(oS);class sS extends s0{constructor(e){super(3,e),sS.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new ue(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}sS.className="Conv3D";Ge(sS);class vhe extends oS{constructor(e){if(super(e),this.inputSpec=[new Xr({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new ue(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=rn(e),e.length!==4)throw new ue("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ue("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Xr({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return Se(()=>{let r=Mt(e);if(r.shape.length!==4)throw new ue(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,o=i[0];let s,a;this.dataFormat==="channelsFirst"?(s=2,a=3):(s=1,a=2);const l=i[s],c=i[a],u=this.kernelSize[0],d=this.kernelSize[1],f=this.strides[0],h=this.strides[1],g=Ql(l,f,u,this.padding),p=Ql(c,h,d,this.padding),m=[o,g,p,this.filters];this.dataFormat!=="channelsLast"&&(r=Jt(r,[0,2,3,1]));let v=Hue(r,this.kernel.read(),m,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(v=Jt(v,[0,3,1,2])),this.bias!=null&&(v=Nl(v,this.bias.read(),this.dataFormat)),this.activation!=null&&(v=this.activation.apply(v)),v})}computeOutputShape(e){e=rn(e);const n=e.slice();let r,i,o;this.dataFormat==="channelsFirst"?(r=1,i=2,o=3):(r=3,i=1,o=2);const s=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return n[r]=this.filters,n[i]=Ql(n[i],l,s,this.padding),n[o]=Ql(n[o],c,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}vhe.className="Conv2DTranspose";Ge(vhe);class yhe extends sS{constructor(e){if(super(e),this.inputSpec=[new Xr({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new ue(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=rn(e),e.length!==5)throw new ue("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ue("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Xr({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return Se(()=>{let r=Mt(e);if(r.shape.length!==5)throw new ue(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,o=i[0];let s,a,l;this.dataFormat==="channelsFirst"?(l=2,s=3,a=4):(l=1,s=2,a=3);const c=i[l],u=i[s],d=i[a],f=this.kernelSize[0],h=this.kernelSize[1],g=this.kernelSize[2],p=this.strides[0],m=this.strides[1],v=this.strides[2],_=Ql(c,p,f,this.padding),w=Ql(u,m,h,this.padding),y=Ql(d,v,g,this.padding),b=[o,_,w,y,this.filters];this.dataFormat!=="channelsLast"&&(r=Jt(r,[0,2,3,4,1]));let x=Uht(r,this.kernel.read(),b,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(x=Jt(x,[0,4,1,2,3])),this.bias!==null&&(x=Nl(x,this.bias.read(),this.dataFormat)),this.activation!==null&&(x=this.activation.apply(x)),x})}computeOutputShape(e){e=rn(e);const n=e.slice();let r,i,o,s;this.dataFormat==="channelsFirst"?(r=1,i=2,o=3,s=4):(r=4,i=1,o=2,s=3);const a=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],u=this.strides[0],d=this.strides[1],f=this.strides[2];return n[r]=this.filters,n[i]=Ql(n[i],u,a,this.padding),n[o]=Ql(n[o],d,l,this.padding),n[s]=Ql(n[s],f,c,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}yhe.className="Conv3DTranspose";Ge(yhe);class bhe extends s0{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new ue("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new ue("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new ue(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=nr(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=rr(n.depthwiseRegularizer),this.depthwiseConstraint=Qr(n.depthwiseConstraint),this.pointwiseInitializer=nr(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=rr(n.pointwiseRegularizer),this.pointwiseConstraint=Qr(n.pointwiseConstraint)}build(e){if(e=rn(e),e.length<this.rank+2)throw new ue(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new ue(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],i=this.kernelSize.concat([r,this.depthMultiplier]),o=[];for(let a=0;a<this.rank;++a)o.push(1);o.push(r*this.depthMultiplier,this.filters);const s=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,s,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",o,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,s,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,s,this.biasConstraint):this.bias=null,this.inputSpec=[new Xr({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return Se(()=>{e=Mt(e);let r;if(this.rank===1)throw new Ut("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=Jt(e,[0,2,3,1])),r=ude(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Nl(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=Jt(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=lr(this.depthwiseInitializer),e.pointwiseInitializer=lr(this.pointwiseInitializer),e.depthwiseRegularizer=$n(this.depthwiseRegularizer),e.pointwiseRegularizer=$n(this.pointwiseRegularizer),e.depthwiseConstraint=Yr(this.depthwiseConstraint),e.pointwiseConstraint=Yr(this.pointwiseConstraint),e}}bhe.className="SeparableConv";class xhe extends bhe{constructor(e){super(2,e)}}xhe.className="SeparableConv2D";Ge(xhe);class L2 extends s0{constructor(e){super(1,e),L2.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!YV(e.kernelSize,"number",1,1))throw new ue(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}L2.className="Conv1D";Ge(L2);class whe extends qt{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return Se(()=>{if(e=Mt(e),this.dataFormat==="channelsLast"){const r=GC(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return GC(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=GC(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return GC(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}whe.className="Cropping2D";Ge(whe);class _he extends qt{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Tr(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,fbt(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return Se(()=>{let r=Mt(e);const i=r.shape;if(this.dataFormat==="channelsFirst"){r=Jt(r,[0,2,3,1]);const o=this.size[0]*i[2],s=this.size[1]*i[3],a=this.interpolation==="nearest"?wu.resizeNearestNeighbor(r,[o,s]):wu.resizeBilinear(r,[o,s]);return Jt(a,[0,3,1,2])}else{const o=this.size[0]*i[1],s=this.size[1]*i[2];return this.interpolation==="nearest"?wu.resizeNearestNeighbor(r,[o,s]):wu.resizeBilinear(r,[o,s])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}_he.className="UpSampling2D";Ge(_he);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function zxt(t,e,n=[1,1],r="valid",i,o){return Se(()=>{i==null&&(i=Ml()),Tr(i);let s=uH(t,i);if(t.rank!==4)throw new ue(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new ue(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return s=HW(s,e,n,r==="same"?"same":"valid","NHWC",o),i==="channelsFirst"&&(s=Jt(s,[0,3,1,2])),s})}class She extends $2{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=nr(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Qr(e.depthwiseConstraint),this.depthwiseRegularizer=rr(e.depthwiseRegularizer)}build(e){if(e=rn(e),e.length<4)throw new ue(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new ue(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],i=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",i,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Se(()=>{e=Mt(e);let r=zxt(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Nl(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=rn(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,o=_l(n,this.kernelSize[0],this.padding,this.strides[0]),s=_l(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],i,o,s]:[e[0],o,s,i]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=lr(this.depthwiseInitializer),e.depthwiseRegularizer=$n(this.depthwiseRegularizer),e.depthwiseConstraint=Yr(this.depthwiseRegularizer),e}}She.className="DepthwiseConv2D";Ge(She);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Che(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new ue("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function i(o){return o==null||Array.isArray(o)?o:[o]}return e=i(e),n=i(n),{inputs:t,initialState:e,constants:n}}function Ehe(t,e,n,r=!1,i,o,s=!1,a=!1){return Se(()=>{const l=e.shape.length;if(l<3)throw new ue(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(Al(2,l));e=Jt(e,c),s&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&(i=st(st(i,"bool"),"float32"),i.rank===l-1&&(i=Eo(i,-1)),i=Jt(i,c)),r&&(e=Hp(e,0),i!=null&&(i=Hp(i,0)));const u=[];let d,f=n;const h=e.shape[0],g=Gp(e);let p;i!=null&&(p=Gp(i));for(let v=0;v<h;++v){const _=g[v],w=Se(()=>t(_,f));if(i==null)d=w[0],f=w[1];else{const y=Se(()=>{const b=p[v],x=Tt(La(b),b),S=Ke(fe(w[0],b),fe(f[0],x)),C=f.map((T,E)=>Ke(fe(w[1][E],b),fe(T,x)));return{output:S,newStates:C}});d=y.output,f=y.newStates}a&&u.push(d)}let m;return a&&(m=Vu(u,1)),[d,m,f]})}class Xf extends qt{constructor(e){super(e);let n;if(e.cell==null)throw new ue("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new pH({cells:e.cell}):n=e.cell,n.stateSize==null)throw new ue("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Xr({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Al(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){M3(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let i;if(this.returnSequences?i=[e[0],e[1],r]:i=[e[0],r],this.returnState){const o=[];for(const s of n)o.push([e[0],s]);return[i].concat(o)}else return i}computeMask(e,n){return Se(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const i=this.states.map(o=>null);return[r].concat(i)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new Ut("Constants support is not implemented in RNN yet.");M3(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new Xr({shape:[n,null,...r]});const i=[e[0]].concat(e.slice(2));this.cell.build(i);let o;if(Array.isArray(this.cell.stateSize)?o=this.cell.stateSize:o=[this.cell.stateSize],this.stateSpec!=null){if(!mn(this.stateSpec.map(s=>s.shape[s.shape.length-1]),o))throw new ue(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=o.map(s=>new Xr({shape:[null,s]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){Se(()=>{if(!this.stateful)throw new Kl("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new ue("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>ui([r,i])):this.states_=[ui([r,this.cell.stateSize])];else if(e==null)zt(this.states_),this.keptStates!=null&&(zt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>ui([r,i])):this.states_[0]=ui([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ue(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):zt(this.states_);for(let i=0;i<this.states_.length;++i){const o=e[i],s=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,a=[r,s];if(!mn(o.shape,a))throw new ue(`State ${i} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${o.shape}`);this.states_[i]=o}}this.states_=this.states_.map(i=>Ec(i.clone()))})}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const o=Che(e,r,i,this.numConstants);e=o.inputs,r=o.initialState,i=o.constants;let s=[],a=[];if(r!=null){n.initialState=r,s=s.concat(r),this.stateSpec=[];for(const c of r)this.stateSpec.push(new Xr({shape:c.shape}));a=a.concat(this.stateSpec)}if(i!=null&&(n.constants=i,s=s.concat(i),this.numConstants=i.length),s[0]instanceof Bc){const c=[e].concat(s),u=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=u;const f=super.apply(c,n);return this.inputSpec=d,f}else return super.apply(e,n)}call(e,n){return Se(()=>{const r=n==null?null:n.mask,i=n==null?null:n.training;let o=n==null?null:n.initialState;e=Mt(e),o==null&&(this.stateful?o=this.states_:o=this.getInitialState(e));const s=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(o.length!==s)throw new ue(`RNN Layer has ${s} state(s) but was passed ${o.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:i},c=Ehe((g,p)=>{const m=this.cell.call([g].concat(p),a);return[m[0],m.slice(1)]},e,o,this.goBackwards,r,null,this.unroll,this.returnSequences),u=c[0],d=c[1],f=c[2];this.stateful&&this.resetStates(f,i);const h=this.returnSequences?d:u;return this.returnState?[h].concat(f):h})}getInitialState(e){return Se(()=>{let n=ui(e.shape);return n=St(n,[1,2]),n=eS(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?k3(n,[1,r]):n):this.cell.stateSize>1?[k3(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Xf.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const i=n.cell,o=Mc(i,r);return new e(Object.assign(n,{cell:o}))}}Xf.className="RNN";Ge(Xf);class F2 extends qt{}class dH extends F2{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,hi(this.units,"units"),this.activation=Cf(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=nr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=nr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=nr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=rr(e.kernelRegularizer),this.recurrentRegularizer=rr(e.recurrentRegularizer),this.biasRegularizer=rr(e.biasRegularizer),this.kernelConstraint=Qr(e.kernelConstraint),this.recurrentConstraint=Qr(e.recurrentConstraint),this.biasConstraint=Qr(e.biasConstraint),this.dropout=uy([1,_f([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=uy([1,_f([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=rn(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Se(()=>{if(e=e,e.length!==2)throw new ue(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const i=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ef({ones:()=>La(e),rate:this.dropout,training:i,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ef({ones:()=>La(r),rate:this.recurrentDropout,training:i,dropoutFunc:this.dropoutFunc}));let o;const s=this.dropoutMask,a=this.recurrentDropoutMask;s!=null?o=Ac(fe(e,s),this.kernel.read()):o=Ac(e,this.kernel.read()),this.bias!=null&&(o=Nl(o,this.bias.read())),a!=null&&(r=fe(r,a));let l=Ke(o,Ac(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Sf(this.activation),useBias:this.useBias,kernelInitializer:lr(this.kernelInitializer),recurrentInitializer:lr(this.recurrentInitializer),biasInitializer:lr(this.biasInitializer),kernelRegularizer:$n(this.kernelRegularizer),recurrentRegularizer:$n(this.recurrentRegularizer),biasRegularizer:$n(this.biasRegularizer),activityRegularizer:$n(this.activityRegularizer),kernelConstraint:Yr(this.kernelConstraint),recurrentConstraint:Yr(this.recurrentConstraint),biasConstraint:Yr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}dH.className="SimpleRNNCell";Ge(dH);class The extends Xf{constructor(e){e.cell=new dH(e),super(e)}call(e,n){return Se(()=>{this.cell.dropoutMask!=null&&(zt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(zt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,o=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:o})})}static fromConfig(e,n){return new e(n)}}The.className="SimpleRNN";Ge(The);class fH extends F2{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new ue("GRUCell does not support reset_after parameter set to true.");this.units=e.units,hi(this.units,"units"),this.activation=Cf(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Cf(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=nr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=nr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=nr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=rr(e.kernelRegularizer),this.recurrentRegularizer=rr(e.recurrentRegularizer),this.biasRegularizer=rr(e.biasRegularizer),this.kernelConstraint=Qr(e.kernelConstraint),this.recurrentConstraint=Qr(e.recurrentConstraint),this.biasConstraint=Qr(e.biasConstraint),this.dropout=uy([1,_f([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=uy([1,_f([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=rn(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Se(()=>{if(e=e,e.length!==2)throw new ue(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let i=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ef({ones:()=>La(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ef({ones:()=>La(i),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,s=this.recurrentDropoutMask;let a,l,c;0<this.dropout&&this.dropout<1&&(e=fe(e,o[0]));let u=Ac(e,this.kernel.read());this.useBias&&(u=Nl(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(i=fe(i,s[0]));const d=this.recurrentKernel.read(),[f,h]=Fs(d,[2*this.units,this.units],d.rank-1),g=Ac(i,f),[p,m,v]=Fs(u,3,u.rank-1),[_,w]=Fs(g,2,g.rank-1);a=this.recurrentActivation.apply(Ke(p,_)),l=this.recurrentActivation.apply(Ke(m,w));const y=Ac(fe(l,i),h);c=this.activation.apply(Ke(v,y));const b=Ke(fe(a,i),fe(Ke(1,_r(a)),c));return[b,b]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Sf(this.activation),recurrentActivation:Sf(this.recurrentActivation),useBias:this.useBias,kernelInitializer:lr(this.kernelInitializer),recurrentInitializer:lr(this.recurrentInitializer),biasInitializer:lr(this.biasInitializer),kernelRegularizer:$n(this.kernelRegularizer),recurrentRegularizer:$n(this.recurrentRegularizer),biasRegularizer:$n(this.biasRegularizer),activityRegularizer:$n(this.activityRegularizer),kernelConstraint:Yr(this.kernelConstraint),recurrentConstraint:Yr(this.recurrentConstraint),biasConstraint:Yr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}fH.className="GRUCell";Ge(fH);class khe extends Xf{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new fH(e),super(e)}call(e,n){return Se(()=>{this.cell.dropoutMask!=null&&(zt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(zt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,o=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:o})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}khe.className="GRU";Ge(khe);class B2 extends F2{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,hi(this.units,"units"),this.activation=Cf(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Cf(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=nr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=nr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=nr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=rr(e.kernelRegularizer),this.recurrentRegularizer=rr(e.recurrentRegularizer),this.biasRegularizer=rr(e.biasRegularizer),this.kernelConstraint=Qr(e.kernelConstraint),this.recurrentConstraint=Qr(e.recurrentConstraint),this.biasConstraint=Qr(e.biasConstraint),this.dropout=uy([1,_f([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=uy([1,_f([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=rn(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let i;if(this.useBias){if(this.unitForgetBias){const o=this.biasInitializer,s=this.units;i=new(n=class extends Wa{apply(l,c){const u=o.apply([s]),d=new ZV().apply([s]),f=o.apply([s*2]);return mQ(mQ(u,d),f)}},n.className="CustomInit",n)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return Se(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new ue(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let i=e[1];const o=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ef({ones:()=>La(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ef({ones:()=>La(i),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,a=this.recurrentDropoutMask;let l,c,u,d;0<this.dropout&&this.dropout<1&&(e=fe(e,s[0]));let f=Ac(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(i=fe(i,a[0])),f=Ke(f,Ac(i,this.recurrentKernel.read())),this.useBias&&(f=Nl(f,this.bias.read()));const[h,g,p,m]=Fs(f,4,f.rank-1);l=this.recurrentActivation.apply(h),c=this.recurrentActivation.apply(g),u=Ke(fe(c,o),fe(l,this.activation.apply(p))),d=this.recurrentActivation.apply(m);const v=fe(d,this.activation.apply(u));return[v,v,u]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Sf(this.activation),recurrentActivation:Sf(this.recurrentActivation),useBias:this.useBias,kernelInitializer:lr(this.kernelInitializer),recurrentInitializer:lr(this.recurrentInitializer),biasInitializer:lr(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:$n(this.kernelRegularizer),recurrentRegularizer:$n(this.recurrentRegularizer),biasRegularizer:$n(this.biasRegularizer),activityRegularizer:$n(this.activityRegularizer),kernelConstraint:Yr(this.kernelConstraint),recurrentConstraint:Yr(this.recurrentConstraint),biasConstraint:Yr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}B2.className="LSTMCell";Ge(B2);class hH extends Xf{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new B2(e),super(e)}call(e,n){return Se(()=>{this.cell.dropoutMask!=null&&(zt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(zt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,o=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:o})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}hH.className="LSTM";Ge(hH);class pH extends F2{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return Se(()=>{e=e;let r=e.slice(1);const i=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?i.push(r.splice(0,a.stateSize.length)):i.push(r.splice(0,1));i.reverse();const o=[];let s;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];r=i[a],a===0?s=[e[0]].concat(r):s=[s[0]].concat(r),s=l.call(s,n),o.push(s.slice(1))}r=[];for(const a of o.slice().reverse())r.push(...a);return[s[0]].concat(r)})}build(e){M3(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,i)=>{cp(`RNNCell_${i}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=o=>({className:o.getClassName(),config:o.getConfig()}),i={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),i)}static fromConfig(e,n,r={}){const i=[];for(const o of n.cells)i.push(Mc(o,r));return new e({cells:i})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return I3(e)}setWeights(e){const n=[];for(const r of this.cells){const i=r.weights.length,o=e.splice(i);for(let s=0;s<r.weights.length;++s)n.push([r.weights[s],o[s]])}oH(n)}}pH.className="StackedRNNCells";Ge(pH);function Ef(t){const{ones:e,rate:n,training:r=!1,count:i=1,dropoutFunc:o}=t,s=()=>o!=null?o(e(),n):bfe(e(),n),a=()=>nS(s,e,r);return!i||i<=1?Ec(a().clone()):Array(i).fill(void 0).map(a).map(c=>Ec(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var jxt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class Ahe extends Xf{constructor(e){if(e.unroll)throw new Ut("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Ut("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Xr({ndim:5})]}call(e,n){return Se(()=>{if(this.cell.dropoutMask!=null&&(zt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(zt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new ue("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,i=n==null?null:n.training,o=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:o})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return Se(()=>{const{stateSize:n}=this.cell,r=e.shape,i=this.computeSingleOutputShape(r),o=[i[0],...i.slice(2)],s=ui(o);return Array.isArray(n)?Array(n.length).fill(s):[s]})}resetStates(e,n=!1){Se(()=>{if(!this.stateful)throw new Kl("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,i=this.computeSingleOutputShape(r),o=[i[0],...i.slice(2)];if(r[0]==null)throw new ue("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>ui(o)):this.states_=[ui(o)];else if(e==null)zt(this.states_),this.keptStates!=null&&(zt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>ui(o)):this.states_[0]=ui(o);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ue(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):zt(this.states_);for(let a=0;a<this.states_.length;++a){const l=e[a],c=o;if(!mn(l.shape,c))throw new ue(`State ${a} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>Ec(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:i,padding:o,strides:s,dilationRate:a}=this.cell,l=n==="channelsFirst",c=e[l?3:2],u=e[l?4:3],d=_l(c,i[0],o,s[0],a[0]),f=_l(u,i[1],o,s[1],a[1]);return[...e.slice(0,2),...l?[r,d,f]:[d,f,r]]}}Ahe.className="ConvRNN2D";class mH extends B2{constructor(e){const{filters:n,kernelSize:r,strides:i,padding:o,dataFormat:s,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,hi(this.filters,"filters"),this.kernelSize=cv(r,2,"kernelSize"),this.kernelSize.forEach(l=>hi(l,"kernelSize")),this.strides=cv(i||1,2,"strides"),this.strides.forEach(l=>hi(l,"strides")),this.padding=o||"valid",Qs(this.padding),this.dataFormat=s||"channelsLast",Tr(this.dataFormat),this.dilationRate=cv(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>hi(l,"dilationRate"))}build(e){var n;e=rn(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new ue(`The channel dimension of the input should be defined. Found ${e[r]}`);const i=e[r],o=4,s=this.kernelSize.concat([i,this.filters*o]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*o]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,u=this.filters;l=new(n=class extends Wa{apply(f,h){const g=c.apply([u]),p=Gf([u]),m=c.apply([u*2]);return QV([g,p,m])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*o],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return Se(()=>{if(e.length!==3)throw new ue(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,i=e[0],o=e[1],s=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ef({ones:()=>La(i),rate:this.dropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(G,Q,te)=>!Q||!Q[te]?G:fe(Q[te],G);let u=c(i,l,0),d=c(i,l,1),f=c(i,l,2),h=c(i,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ef({ones:()=>La(o),rate:this.recurrentDropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const g=this.recurrentDropoutMask;let p=c(o,g,0),m=c(o,g,1),v=c(o,g,2),_=c(o,g,3);const w=3,[y,b,x,S]=Fs(this.kernel.read(),a,w),[C,T,E,k]=this.useBias?Fs(this.bias.read(),a):[null,null,null,null];u=this.inputConv(u,y,C,this.padding),d=this.inputConv(d,b,T,this.padding),f=this.inputConv(f,x,E,this.padding),h=this.inputConv(h,S,k,this.padding);const[A,O,D,P]=Fs(this.recurrentKernel.read(),a,w);p=this.recurrentConv(p,A),m=this.recurrentConv(m,O),v=this.recurrentConv(v,D),_=this.recurrentConv(_,P);const N=this.recurrentActivation.apply(Ke(u,p)),U=this.recurrentActivation.apply(Ke(d,m)),L=Ke(fe(U,s),fe(N,this.activation.apply(Ke(f,v)))),V=fe(this.recurrentActivation.apply(Ke(h,_)),this.activation.apply(L));return[V,V,L]})}getConfig(){const e=super.getConfig(),n=jxt(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,n,r,i){const o=Wp(e,n,this.strides,i||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Nl(o,r,this.dataFormat):o}recurrentConv(e,n){return Wp(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}mH.className="ConvLSTM2DCell";Ge(mH);class Mhe extends Ahe{constructor(e){const n=new mH(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}Mhe.className="ConvLSTM2D";Ge(Mhe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class gH extends qt{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let i=0;i<this.noiseShape.length;++i)r.push(this.noiseShape[i]==null?n[i]:this.noiseShape[i]);return r}call(e,n){return Se(()=>{this.invokeCallHook(e,n);const r=Mt(e);if(0<this.rate&&this.rate<1){const i=n.training==null?!1:n.training,o=this.getNoiseShape(r);return nS(()=>bfe(r,this.rate,o,this.seed),()=>r,i)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}gH.className="Dropout";Ge(gH);class Ihe extends gH{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}Ihe.className="SpatialDropout1D";Ge(Ihe);class vH extends qt{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,hi(this.units,"units"),this.activation=Cf(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=nr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=nr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Qr(e.kernelConstraint),this.biasConstraint=Qr(e.biasConstraint),this.kernelRegularizer=rr(e.kernelRegularizer),this.biasRegularizer=rr(e.biasRegularizer),this.activityRegularizer=rr(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=rn(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=rn(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return Se(()=>{this.invokeCallHook(e,n);const r=Mt(e),i=ffe(this.activation.getClassName());let o;return i!=null?o=Ac(r,this.kernel.read(),i,this.bias?this.bias.read():null):(o=Ac(r,this.kernel.read()),this.bias!=null&&(o=Nl(o,this.bias.read())),this.activation!=null&&(o=this.activation.apply(o))),o})}getConfig(){const e={units:this.units,activation:Sf(this.activation),useBias:this.useBias,kernelInitializer:lr(this.kernelInitializer),biasInitializer:lr(this.biasInitializer),kernelRegularizer:$n(this.kernelRegularizer),biasRegularizer:$n(this.biasRegularizer),activityRegularizer:$n(this.activityRegularizer),kernelConstraint:Yr(this.kernelConstraint),biasConstraint:Yr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}vH.className="Dense";Ge(vH);class Ohe extends qt{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=rn(e);for(const n of e.slice(1))if(n==null)throw new ue(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],uf(e,1)]}call(e,n){return Se(()=>{this.invokeCallHook(e,n);let r=Mt(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const i=[0];for(let o=2;o<r.rank;++o)i.push(o);i.push(1),r=Jt(r,i)}return ybt(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}Ohe.className="Flatten";Ge(Ohe);class Rhe extends qt{constructor(e){super(e),this.supportsMasking=!0,this.activation=Cf(e.activation)}call(e,n){return Se(()=>{this.invokeCallHook(e,n);const r=Mt(e);return this.activation.apply(r)})}getConfig(){const e={activation:Sf(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}Rhe.className="Activation";Ge(Rhe);class Dhe extends qt{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return Se(()=>(e=Mt(e),gbt(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}Dhe.className="RepeatVector";Ge(Dhe);class Phe extends qt{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",i=n.slice();let o=1,s=null;for(let l=0;l<i.length;++l){const c=i[l];if(this.isUnknown(c))if(s===null)s=l;else throw new ue("Can only specifiy one unknown dimension.");else o*=c}const a=uf(e);if(s!==null){if(o===0||a%o!==0)throw new ue(r);i[s]=a/o}else if(a!==o)throw new ue(r);return i}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return Se(()=>{this.invokeCallHook(e,n);const r=Mt(e),i=r.shape,o=i.slice(0,1).concat(this.fixUnknownDimension(i.slice(1),this.targetShape));return ge(r,o)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}Phe.className="Reshape";Ge(Phe);class Nhe extends qt{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=Al(1,e.dims.length+1);if(!mn(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Xr({ndim:this.dims.length+1})]}computeOutputShape(e){e=rn(e);const n=e.slice();return this.dims.forEach((r,i)=>{n[i+1]=e[r]}),n}call(e,n){return Jt(Mt(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}Nhe.className="Permute";Ge(Nhe);class $he extends qt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=Mt(e);return x3(xA(r,this.maskValue),-1)}call(e,n){return Se(()=>{this.invokeCallHook(e,n);const r=Mt(e),s=x3(xA(r,this.maskValue),-1,!0);return fe(r,st(s,r.dtype))})}}$he.className="Masking";Ge($he);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Lhe extends qt{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(Sn(e.inputLength))}this.inputDim=e.inputDim,hi(this.inputDim,"inputDim"),this.outputDim=e.outputDim,hi(this.outputDim,"outputDim"),this.embeddingsInitializer=nr(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=rr(e.embeddingsRegularizer),this.activityRegularizer=rr(e.activityRegularizer),this.embeddingsConstraint=Qr(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return Se(()=>this.maskZero?(e=Mt(e),xA(e,en(e))):null)}computeOutputShape(e){if(e=rn(e),this.inputLength==null)return[...e,this.outputDim];const n=Sn(this.inputLength);if(n.length!==e.length-1)throw new ue(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let i=0;i<n.length;++i){const o=n[i],s=e[i+1];if(o!=null&&s!=null&&o!==s)throw new ue(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);o==null&&(n[r]=s),r++}}return[e[0],...n,this.outputDim]}call(e,n){return Se(()=>{this.invokeCallHook(e,n);let r=Mt(e);r.dtype!=="int32"&&(r=kc(r,"int32"));const i=yfe(this.embeddings.read(),ge(r,[r.size]));return ge(i,rn(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:lr(this.embeddingsInitializer),embeddingsRegularizer:$n(this.embeddingsRegularizer),activityRegularizer:$n(this.activityRegularizer),embeddingsConstraint:Yr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}Lhe.className="Embedding";Ge(Lhe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class pm extends qt{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Ut}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let i=0;i<n.length;++i){const o=e[e.length-n.length+i],s=n[i];if(o==null||s==null||o<0||s<0)r.push(null);else if(o===1)r.push(s);else if(s===1)r.push(o);else{if(o!==s)throw new ue("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(o)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[rn(e)]),e=e,e.length<2)throw new ue(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const o of e)o!=null&&o[0]!==null&&n.push(o[0]);if(n=cf(n),n.length>1)throw new ue(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let o=1;o<e.length;++o){const s=e[o]==null?null:e[o].slice(1);r=this.computeElementwiseOpOutputShape(r,s)}const i=e.map(o=>o.length);e.indexOf(null)===-1&&cf(i).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return Se(()=>{if(e=e,this.reshapeRequired){const r=[],i=e.map(o=>o.rank);if(i.indexOf(null)===-1){const o=_f(i);for(let s of e){const a=s.rank;for(let l=0;l<o-a;++l)s=eS(s,1);r.push(s)}return this.mergeFunction(r)}else{let o=!1;for(const l of e){const c=l.rank;if(c==null){const u=l.shape,d=u[0],f=u.slice(1).concat([d]);let h=ge(l,[d].concat(uf(u.slice(1))));h=Jt(h,[1,0]),h=ge(h,f),r.push(h),o=!0}else if(c>1){const u=Al(1,c).concat([0]);r.push(Jt(l,u)),o=!0}else r.push(l)}let s=this.mergeFunction(r);const a=s.rank;if(o){if(a==null){const l=s.shape,c=l.length,u=l[c-1],d=[u].concat(l.slice(0,l.length-1));s=ge(Jt(ge(s,[-1,u]),[1,0]),d)}else if(a>1){const l=[a-1].concat(Al(0,a-1));s=Jt(s,l)}}return s}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let i=1;i<e.length;++i){const o=e[i]==null?null:e[i].slice(1);n=this.computeElementwiseOpOutputShape(n,o)}let r=[];for(const i of e)i!=null&&i[0]!==null&&r.push(i[0]);return r=cf(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return Se(()=>{if(n==null)return null;if(!Array.isArray(n))throw new ue("`mask` should be an Array");if(!Array.isArray(e))throw new ue("`inputs` should be an Array");if(n.length!==e.length)throw new ue(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(i=>i==null))return null;n=n.map(i=>i==null?i:Eo(i,0));let r=n[0];for(let i=1;i<n.length-1;++i)r=Wu(r,n[i]);return r})}}class Fhe extends pm{constructor(e){super(e)}mergeFunction(e){return Se(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Ke(n,e[r]);return n})}}Fhe.className="Add";Ge(Fhe);class Bhe extends pm{constructor(e){super(e)}mergeFunction(e){return Se(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=fe(n,e[r]);return n})}}Bhe.className="Multiply";Ge(Bhe);class Uhe extends pm{constructor(e){super(e)}mergeFunction(e){return Se(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Ke(n,e[r]);return fe(1/e.length,n)})}}Uhe.className="Average";Ge(Uhe);class zhe extends pm{constructor(e){super(e)}mergeFunction(e){return Se(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Hf(n,e[r]);return n})}}zhe.className="Maximum";Ge(zhe);class jhe extends pm{constructor(e){super(e)}mergeFunction(e){return Se(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Pw(n,e[r]);return n})}}jhe.className="Minimum";Ge(jhe);class Whe extends pm{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new ue("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const i of e)if(i!=null){n=!1;break}if(n)return;const r=[];for(let i=0;i<e.length;++i){const o=e[i].slice();o.splice(this.axis,1);let s=!1;for(const a of r)if(mn(a,o)){s=!0;break}s||r.push(o)}if(r.length>1)throw new ue("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return Se(()=>QV(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new ue("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),i=this.axis<0?r.length+this.axis:this.axis;for(const o of n.slice(1)){if(r[i]==null||o[i]==null){r[i]=null;break}r[i]+=o[i]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new ue("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new ue("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new ue(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return Se(()=>{let r=!0;if(n.forEach(s=>{if(s!=null){r=!1;return}}),r)return null;const i=[];for(let s=0;s<e.length;++s)n[s]==null?i.push(st(La(e[s]),"bool")):n[s].rank<e[s].rank?i.push(Eo(n[s],-1)):i.push(n[s]);const o=Po(i,this.axis);return Wue(o,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}Whe.className="Concatenate";Ge(Whe);function ab(t,e){for(;t<0;)t+=e;return t}function Wxt(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new Ut("batchDot is not implemented for tensors of 4D or higher rank yet");if(Y(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),Y(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new Ut("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,i=e.shape.length;n==null&&(n=[r-1,i-2]);const o=n;return Se(()=>{let s;if(r>i){s=r-i;const l=[];for(let c=0;c<s;++c)l.push(1);e=ge(e,e.shape.concat(l))}else if(i>r){s=i-r;const l=[];for(let c=0;c<s;++c)l.push(1);t=ge(t,t.shape.concat(l))}else s=0;let a;if(t.shape.length===2&&e.shape.length===2)o[0]===o[1]?a=St(fe(t,e),o[0]):a=St(fe(Jt(t,[1,0]),e),o[1]);else{const l=o[0]!==t.shape.length-1,c=o[1]===e.shape.length-1;a=un(t,e,l,c)}if(s>0){let l;r>i?l=r+i-3:l=r-1;const c=[];for(let u=l;u<l+s;++u)c.push(u);a=X1(a,c)}return a.shape.length===1&&(a=Eo(a,1)),a})}class Vhe extends pm{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){Y(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new Ut("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);if(n[i[0]]!==r[i[1]])throw new ue(`Dimension incompatibility: ${n[i[0]]} !== ${r[i[1]]}`)}mergeFunction(e){if(e.length!==2)throw new ue(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],i;return Array.isArray(this.axes)?i=this.axes.map((o,s)=>ab(o,e[s].shape.length)):i=[ab(this.axes,n.shape.length),ab(this.axes,r.shape.length)],this.normalize&&(n=kA(n,i[0]),r=kA(r,i[1])),Wxt(n,r,i)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[ab(this.axes,e.length),ab(this.axes,n.length)],r}computeOutputShape(e){Y(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new Ut("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);n.splice(i[0],1),r.splice(i[1],1),r.splice(0,1);const o=n.concat(r);return o.length===1&&o.push(1),o}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}Vhe.className="Dot";Ge(Vhe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Hhe extends qt{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return Se(()=>{this.invokeCallHook(e,n);const r=Mt(e);return nS(()=>Ke(R2(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}Hhe.className="GaussianNoise";Ge(Hhe);class Ghe extends qt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Se(()=>{this.invokeCallHook(e,n);const r=Mt(e);return this.rate>0&&this.rate<1?nS(()=>{const o=Math.sqrt(this.rate/(1-this.rate));return fe(r,R2(r.shape,1,o))},()=>r,n.training||!1):r})}}Ghe.className="GaussianDropout";Ge(Ghe);class qhe extends qt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Mt(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Se(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return nS(()=>{const o=Mt(e),l=-1.6732632423543772*1.0507009873554805;let c=cm(q1(r),this.rate);c=kc(c,"float32");const u=((1-this.rate)*(1+this.rate*l**2))**-.5,d=-u*l*this.rate,f=Ke(fe(o,c),fe(Ke(c,-1),l));return Ke(fe(f,u),d)},()=>Mt(e),n.training||!1)}return e})}}qhe.className="AlphaDropout";Ge(qhe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Fw(t,e,n,r,i,o=.001){let s;if(t.rank===2)s=hht(t,e,n,r,i,o);else if(t.rank===3)s=mht(t,e,n,r,i,o);else if(t.rank===4)s=vht(t,e,n,r,i,o);else throw new Ut(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return s}function Vxt(t,e,n,r,i=.001){return Se(()=>{const o=ZW(t,r),s=o.mean,a=o.variance;return[Fw(t,s,a,n,e,i),s,a]})}function Hxt(t,e,n,r,i=.001){return Se(()=>{const o=ZW(t,r),s=o.mean,a=o.variance,l=[];for(const g of Al(0,t.rank))r.indexOf(g)!==-1?l.push(1):l.push(t.shape[g]);const c=ge(s,l),u=ge(a,l),d=e==null?null:ge(e,l),f=n==null?null:ge(n,l);return[Fw(t,c,u,f,d,i),s,a]})}function Gxt(t,e,n,r,i=.001){return mn(r.slice().sort(),Al(0,t.rank-1))?Vxt(t,e,n,r,i):Hxt(t,e,n,r,i)}class Xhe extends qt{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=nr(e.betaInitializer||"zeros"),this.gammaInitializer=nr(e.gammaInitializer||"ones"),this.movingMeanInitializer=nr(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=nr(e.movingVarianceInitializer||"ones"),this.betaConstraint=Qr(e.betaConstraint),this.gammaConstraint=Qr(e.gammaConstraint),this.betaRegularizer=rr(e.betaRegularizer),this.gammaRegularizer=rr(e.gammaRegularizer)}build(e){e=rn(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new ue(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Xr({ndim:e.length,axes:{[n]:r}})];const i=[r];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return Se(()=>{const r=n.training==null?!1:n.training,i=Mt(e),o=i.shape,s=o.length,a=Al(0,s),l=this.axis>=0?this.axis:this.axis+s;a.splice(l,1);const c=qp(1,s);c[l]=o[l];const u=a.slice();u.sort();const d=!mn(u,Al(0,s).slice(0,s-1)),f=()=>{if(d){const _=ge(this.movingMean.read(),c),w=ge(this.movingVariance.read(),c),y=this.center?ge(this.beta.read(),c):null,b=this.scale?ge(this.gamma.read(),c):null;return Fw(i,_,w,y,b,this.epsilon)}else return Fw(i,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return f();const[h,g,p]=Gxt(i,this.gamma.read(),this.beta.read(),a,this.epsilon),m=(_,w,y)=>{Se(()=>{const b=1-y,x=_.read(),S=fe(Tt(x,w),b);_.write(Tt(x,S))})};return(()=>{m(this.movingMean,g,this.momentum),m(this.movingVariance,p,this.momentum)})(),h})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:lr(this.betaInitializer),gammaInitializer:lr(this.gammaInitializer),movingMeanInitializer:lr(this.movingMeanInitializer),movingVarianceInitializer:lr(this.movingVarianceInitializer),betaRegularizer:$n(this.betaRegularizer),gammaRegularizer:$n(this.gammaRegularizer),betaConstraint:Yr(this.betaConstraint),gammaConstraint:Yr(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}Xhe.className="BatchNormalization";Ge(Xhe);class Khe extends qt{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=nr(e.betaInitializer||"zeros"),this.gammaInitializer=nr(e.gammaInitializer||"ones"),this.betaRegularizer=rr(e.betaRegularizer),this.gammaRegularizer=rr(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=rn(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let o=0;o<this.axis.length;++o)this.axis[o]<0&&(this.axis[o]+=n);for(const o of this.axis)if(o<0||o>=n)throw new Error(`Invalid axis: ${o}`);if(this.axis.length!==cf(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(o=>e[o]),i=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,i):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,i):this.beta=null,this.built=!0}call(e,n){const r=Mt(e),i=r.shape,o=i.length;return Se(()=>{let{mean:a,variance:l}=ZW(r,this.axis,!0);const c=qp(1,o);for(const p of this.axis)c[p]=i[p];const u=p=>p!=null&&p.shape.length!==o?ge(p,c):p;let d=this.scale?u(this.gamma.read()):null,f=this.center?u(this.beta.read()):null;const h=[],g=[];for(let p=0;p<o;++p)this.axis.indexOf(p)!==-1?(h.push(i[p]),g.push(1)):(h.push(1),g.push(i[p]));return a=hl(a,h),l=hl(l,h),d!=null&&(d=hl(d,g)),f!=null&&(f=hl(f,g)),Fw(r,a,l,f,d,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:lr(this.betaInitializer),gammaInitializer:lr(this.gammaInitializer),betaRegularizer:$n(this.betaRegularizer),gammaRegularizer:$n(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}Khe.className="LayerNormalization";Ge(Khe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function qxt(t,e,n){return Se(()=>{if(t.rank!==4)throw new ue(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new ue("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=Ml()),n!=="channelsLast"&&n!=="channelsFirst")throw new ue(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],JW(t,r)})}class Yhe extends qt{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?Ml():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new ue(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new ue(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new ue(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new Xr({ndim:4})]}computeOutputShape(e){e=rn(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return Se(()=>qxt(Mt(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}Yhe.className="ZeroPadding2D";Ge(Yhe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function U2(t,e,n,r,i,o){return Se(()=>{Tr(i),pfe(o),Qs(r),n==null&&(n=[1,1]),r==null&&(r="valid"),i==null&&(i=Ml()),o==null&&(o="max"),t=uH(t,i);let s;const a=r==="same"?"same":"valid";return o==="max"?s=QW(t,e,n,a):s=zW(t,e,n,a),i==="channelsFirst"&&(s=Jt(s,[0,3,1,2])),s})}function Qhe(t,e,n,r,i,o){return Se(()=>{Tr(i),pfe(o),Qs(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),i==null&&(i=Ml()),o==null&&(o="max"),t=ghe(t,i);let s;const a=r==="same"?"same":"valid";return o==="max"?s=tmt(t,e,n,a):s=rht(t,e,n,a),i==="channelsFirst"&&(s=Jt(s,[0,4,1,2,3])),s})}class Zhe extends qt{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new ue(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(hi(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new ue(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);hi(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,Qs(this.padding),this.inputSpec=[new Xr({ndim:3})]}computeOutputShape(e){e=rn(e);const n=_l(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return Se(()=>{this.invokeCallHook(e,n),e=eS(Mt(e),2);const r=this.poolingFunction(Mt(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return X1(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class Jhe extends Zhe{constructor(e){super(e)}poolingFunction(e,n,r,i,o){return Tr(o),Qs(i),U2(e,n,r,i,o,"max")}}Jhe.className="MaxPooling1D";Ge(Jhe);class epe extends Zhe{constructor(e){super(e)}poolingFunction(e,n,r,i,o){return Tr(o),Qs(i),U2(e,n,r,i,o,"avg")}}epe.className="AveragePooling1D";Ge(epe);class tpe extends qt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new ue(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];hi(this.poolSize,"poolSize"),hi(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Tr(this.dataFormat),Qs(this.padding),this.inputSpec=[new Xr({ndim:4})]}computeOutputShape(e){e=rn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=_l(n,this.poolSize[0],this.padding,this.strides[0]),r=_l(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return Se(()=>(this.invokeCallHook(e,n),this.poolingFunction(Mt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class npe extends tpe{constructor(e){super(e)}poolingFunction(e,n,r,i,o){return Tr(o),Qs(i),U2(e,n,r,i,o,"max")}}npe.className="MaxPooling2D";Ge(npe);class rpe extends tpe{constructor(e){super(e)}poolingFunction(e,n,r,i,o){return Tr(o),Qs(i),U2(e,n,r,i,o,"avg")}}rpe.className="AveragePooling2D";Ge(rpe);class ipe extends qt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new ue(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];hi(this.poolSize,"poolSize"),hi(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Tr(this.dataFormat),Qs(this.padding),this.inputSpec=[new Xr({ndim:5})]}computeOutputShape(e){e=rn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=_l(n,this.poolSize[0],this.padding,this.strides[0]),r=_l(r,this.poolSize[1],this.padding,this.strides[1]),i=_l(i,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,i]:[e[0],n,r,i,e[4]]}call(e,n){return Se(()=>(this.invokeCallHook(e,n),this.poolingFunction(Mt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class ope extends ipe{constructor(e){super(e)}poolingFunction(e,n,r,i,o){return Tr(o),Qs(i),Qhe(e,n,r,i,o,"max")}}ope.className="MaxPooling3D";Ge(ope);class spe extends ipe{constructor(e){super(e)}poolingFunction(e,n,r,i,o){return Tr(o),Qs(i),Qhe(e,n,r,i,o,"avg")}}spe.className="AveragePooling3D";Ge(spe);class ape extends qt{constructor(e){super(e),this.inputSpec=[new Xr({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new Ut}}class lpe extends ape{constructor(e){super(e||{})}call(e,n){return Se(()=>{const r=Mt(e);return Rr(r,1)})}}lpe.className="GlobalAveragePooling1D";Ge(lpe);class cpe extends ape{constructor(e){super(e||{})}call(e,n){return Se(()=>{const r=Mt(e);return wl(r,1)})}}cpe.className="GlobalMaxPooling1D";Ge(cpe);class upe extends qt{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Tr(this.dataFormat),this.inputSpec=[new Xr({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new Ut}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class dpe extends upe{call(e,n){return Se(()=>{const r=Mt(e);return this.dataFormat==="channelsLast"?Rr(r,[1,2]):Rr(r,[2,3])})}}dpe.className="GlobalAveragePooling2D";Ge(dpe);class fpe extends upe{call(e,n){return Se(()=>{const r=Mt(e);return this.dataFormat==="channelsLast"?wl(r,[1,2]):wl(r,[2,3])})}}fpe.className="GlobalMaxPooling2D";Ge(fpe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class hpe extends qt{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const i=n.layer,o=Mc(i,r);delete n.layer;const s={layer:o};return Object.assign(s,n),new e(s)}}class ppe extends hpe{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=rn(e),e.length<3)throw new ue(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=rn(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),i=e[1];return[r[0],i].concat(r.slice(1))}call(e,n){return Se(()=>(e=Mt(e),Ehe((s,a)=>[Mt(this.layer.call(s,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}ppe.className="TimeDistributed";Ge(ppe);function Xxt(t){hm(dbt,"BidirectionalMergeMode",t)}const Kxt="concat";class mpe extends hpe{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=Mc(r),n.goBackwards=n.goBackwards!==!0;const i={};if(i.className=e.layer.getClassName(),i.config=n,this.backwardLayer=Mc(i),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?Kxt:e.mergeMode,Xxt(this.mergeMode),e.weights)throw new Ut("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,i,o;return this.returnState&&(o=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,i=[r]):this.mergeMode==null?i=[r,r.slice()]:i=[r],this.returnState?this.mergeMode==null?i.concat(o).concat(o.slice()):[r].concat(o).concat(o.slice()):To(i)}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const o=Che(e,r,i,this.numConstants);if(e=o.inputs,r=o.initialState,i=o.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&i==null)return super.apply(e,n);const s=[],a=[];if(r!=null){const c=r.length;if(c%2>0)throw new ue("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,s.push(...r);const u=r.map(d=>new Xr({shape:d.shape}));this.forwardLayer.stateSpec=u.slice(0,c/2),this.backwardLayer.stateSpec=u.slice(c/2),a.push(...u)}if(i!=null)throw new Ut("Support for constants in Bidirectional layers is not implemented yet.");const l=s[0]instanceof Bc;for(const c of s)if(c instanceof Bc!==l)throw new ue("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(s),u=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=u;const f=super.apply(c,n);return this.inputSpec=d,f}else return super.apply(e,n)}call(e,n){return Se(()=>{const r=n.initialState;let i,o;if(r==null)i=this.forwardLayer.call(e,n),o=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),c=r.slice(r.length/2);i=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),o=this.backwardLayer.call(e,Object.assign(n,{initialState:c}))}let s;this.returnState&&(Array.isArray(i)&&(s=i.slice(1).concat(o.slice(1))),i=i[0],o=o[0]),this.returnSequences&&(o=Hp(o,1));let a;return this.mergeMode==="concat"?a=QV([i,o]):this.mergeMode==="sum"?a=Ke(i,o):this.mergeMode==="ave"?a=fe(.5,Ke(i,o)):this.mergeMode==="mul"?a=fe(i,o):this.mergeMode==null&&(a=[i,o]),this.returnState?this.mergeMode==null?a.concat(s):[a].concat(s):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){cp(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),cp(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const o=this.forwardLayer.states.map(s=>null);return Array.isArray(r)?r.concat(o).concat(o):[r].concat(o).concat(o)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=Mc(n.layer);if(delete n.layer,n.numConstants!=null)throw new Ut("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const i=n;return i.layer=r,new e(i)}}mpe.className="Bidirectional";Ge(mpe);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class gpe extends qt{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return Se(()=>(e=Mt(e),e.dtype!=="float32"&&(e=kc(e,"float32")),Ke(fe(e,this.scale),this.offset)))}}gpe.className="Rescaling";Ge(gpe);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:Yxt,cropAndResize:Qxt}=wu;class vpe extends qt{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,i,o,s,a,l){return Se(()=>{let c,u=!1;const d=n/s,f=r/a,h=(i+n)/s,g=(o+r)/a,p=[d,f,h,g],m=[];e.rank===3?(u=!0,c=Vu([e])):c=e;for(let b=0;b<c.shape[0];b++)m.push(p);const v=nx(m,[m.length,4]),_=Nw(0,m.length,1,"int32"),y=Qxt(c,v,_,[i,o],"nearest");return kc(u?Mt(Gp(y)):y,l)})}upsize(e,n,r,i){return Se(()=>{const o=Yxt(e,[n,r]);return kc(o,i)})}call(e,n){return Se(()=>{const r=Mt(e),i=r.dtype,o=r.shape,s=o[o.length-3],a=o[o.length-2];let l=0;s!==this.height&&(l=Math.floor((s-this.height)/2));let c=0;return a!==this.width&&(c=Math.floor((a-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(r,l,c,this.height,this.width,s,a,i):this.upsize(e,this.height,this.width,i)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=rn(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}vpe.className="CenterCrop";Ge(vpe);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Zxt(t,e,n,r){let i=Mt(t);if(i.dtype!=="int32"&&(i=kc(i,"int32")),e==="int")return i;const o=i.shape;if(i.rank===0&&(i=Eo(i,-1)),e==="oneHot"&&i.shape[i.shape.length-1]!==1&&(i=Eo(i,-1)),i.rank>2)throw new ue(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${o} which would result in output rank ${i.rank}.`);const s=["multiHot","oneHot"].includes(e),a=i;let l;if(typeof r<"u"&&e==="count"?l=Q7(a,r,n,s):l=Q7(a,[],n,s),e!=="tfIdf")return l;if(r)return fe(l,r);throw new ue("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ype extends qt{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=rn(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return Se(()=>{e=Mt(e),e.dtype!=="int32"&&(e=kc(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new ue(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=Mt(n.countWeights)}const i=wl(e),o=yA(e),s=Ys(this.numTokens,i).bufferSync().get(0),a=cm(o,0).bufferSync().get(0);if(!(s&&a))throw new ue(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return Zxt(e,this.outputMode,this.numTokens,r)})}}ype.className="CategoryEncoding";Ge(ype);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Jxt=["bilinear","nearest"],DQ=new Set(Jxt);class bpe extends qt{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(DQ.has(e.interpolation))this.interpolation=e.interpolation;else throw new ue(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=rn(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return Se(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return wu.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return wu.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...DQ]} are supported`)})}}bpe.className="Resizing";Ge(bpe);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class xpe{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}xpe.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class wpe extends qt{constructor(e){super(e),this.randomGenerator=new xpe(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}wpe.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const ewt=["bilinear","nearest"],PQ=new Set(ewt);class _pe extends wpe{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new ue(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new ue(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new ue(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(PQ.has(r))this.interpolation=r;else throw new ue(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=rn(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return Se(()=>{const r=Mt(e);this.imgHeight=r.shape[r.shape.length-3];const i=r.shape[r.shape.length-2];this.widthFactor=q1([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let o=this.widthFactor.dataSync()[0]*i;o=Math.round(o);const s=[this.imgHeight,o];switch(this.interpolation){case"bilinear":return wu.resizeBilinear(e,s);case"nearest":return wu.resizeNearestNeighbor(e,s);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...PQ]} are supported`)}})}}_pe.className="RandomWidth";Ge(_pe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function twt(t){return new vH(t)}function NQ(t){return new hH(t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nwt=Te();nwt.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var $Q;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})($Q||($Q={}));var LQ;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(LQ||(LQ={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var FQ;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(FQ||(FQ={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mt(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&Y(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rwt=yde;class z2 extends j4{nextDataId(){return z2.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Uce(this,Bl())}write(e,n,r){this.firstUse&&(this.firstUse=!1,Te().get("IS_NODE")&&Es(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const i={id:this.nextDataId()};return this.data.set(i,{values:e,dtype:r,refCount:1}),i}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&q_(r[0])){const o=r.map(s=>lf(s));i=this.write(o,e,n)}else i=this.write(r,e,n);return{dataId:i,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,i,o){this.data.set(e,{values:n,dtype:i,refCount:o})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const i=this.readSync(r.real.dataId),o=this.readSync(r.imag.dataId);return Hu(i,o)}return adt(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>wf(i));return Vt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Vt(e.shape,e.dtype,n)}makeOutput(e,n,r){return Bl().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Co();return e(),{kernelMs:Co()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){mt([e],"where");const n=this.readSync(e.dataId);return rwt(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}z2.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Spe(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const iwt=t=>{const{x:e}=t.inputs,n=t.backend;mt(e,"abs");let r=new Float32Array(Re(e.shape));const i=n.data.get(e.dataId).values;return r=Spe(i),n.makeOutput(r,e.shape,e.dtype)},owt={kernelName:xO,backendName:"cpu",kernelFunc:iwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kr(t){return(e,n,r,i,o)=>{const s=Lt(e,n),a=s.length,l=_t(s),c=Re(s),u=Hi(o,c),d=e.length,f=n.length,h=_t(e),g=_t(n),p=ly(e,s),m=ly(n,s);if(p.length+m.length===0)for(let v=0;v<u.length;++v)u[v]=t(r[v%r.length],i[v%i.length]);else for(let v=0;v<u.length;++v){const _=e0(v,a,l),w=_.slice(-d);p.forEach(S=>w[S]=0);const y=Cc(w,d,h),b=_.slice(-f);m.forEach(S=>b[S]=0);const x=Cc(b,f,g);u[v]=t(r[y],i[x])}return[u,s]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qo(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,o=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,a=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(i.shape,"float32",s)},a}const swt={kernelName:nW,backendName:"cpu",kernelFunc:qo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DA(t,e,n="float32"){if(n==="complex64"){const i=DA(t,e,"float32"),o=DA(t,e,"float32");return qo({inputs:{real:i,imag:o},backend:t})}const r=Gi(Re(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uc(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const awt={kernelName:p1,backendName:"cpu",kernelFunc:Uc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xp(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.real,o=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,o)}const lwt={kernelName:TW,backendName:"cpu",kernelFunc:Xp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cpe(t,e,n,r){if(r==="int32"){const i=Int32Array.from(t);return[e,"int32",i]}if(r==="bool"){const i=lm([0],n),[o,s]=kr((a,l)=>a!==l?1:0)(e,[],t,i,"bool");return[s,"bool",o]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function Tf(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:o}=r;if(o==="complex64"){if(i.dtype==="complex64")return Uc({inputs:{x:i},backend:n});const u=DA(n,i.shape,i.dtype),d=Tf({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),f=qo({inputs:{real:d,imag:u},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),f}if(i.dtype==="complex64"){const u=Xp({inputs:{input:i},backend:n}),d=Tf({inputs:{x:u},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(u),d}if(!jce(i.dtype,o)){const u=Uc({inputs:{x:i},backend:n});return{dataId:u.dataId,shape:u.shape,dtype:o}}const s=n.data.get(i.dataId).values,[a,l,c]=Cpe(s,i.shape,i.dtype,o);return n.makeTensorInfo(a,l,c)}const cwt={kernelName:t1,backendName:"cpu",kernelFunc:Tf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jr(t,e,n,r){return n==null?({inputs:i,backend:o})=>{const{a:s,b:a}=i,l=o;mt([s,a],t);const c=l.data.get(s.dataId).values,u=l.data.get(a.dataId).values,d=s.dtype==="string"?Gu(c):c,f=s.dtype==="string"?Gu(u):u,h=r||s.dtype,[g,p]=e(s.shape,a.shape,d,f,h);return l.makeTensorInfo(p,h,g)}:({inputs:i,backend:o})=>{const{a:s,b:a}=i,l=o;if(s.dtype==="complex64"||a.dtype==="complex64"){const c=Tf({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),d=u.complexTensorInfos.real,f=u.complexTensorInfos.imag,h=l.data.get(d.dataId).values,g=l.data.get(f.dataId).values,p=Tf({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),m=l.data.get(p.dataId),v=m.complexTensorInfos.real,_=m.complexTensorInfos.imag,w=l.data.get(v.dataId).values,y=l.data.get(_.dataId).values,[b,x,S]=n(s.shape,a.shape,h,g,w,y),C=l.makeTensorInfo(S,"float32",b),T=l.makeTensorInfo(S,"float32",x),E=qo({inputs:{real:C,imag:T},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(p),l.disposeIntermediateTensorInfo(C),l.disposeIntermediateTensorInfo(T),E}else{const c=l.data.get(s.dataId).values,u=l.data.get(a.dataId).values,d=r||s.dtype,[f,h]=e(s.shape,a.shape,c,u,d);return l.makeTensorInfo(h,d,f)}}}function yH(t){return(e,n,r,i,o,s)=>{const a=Lt(e,n),l=Re(a),c=a.length,u=_t(a),d=Hi("float32",l),f=Hi("float32",l),h=ly(e,a),g=ly(n,a),p=Hu(r,i),m=Hu(o,s),v=e.length,_=_t(e),w=n.length,y=_t(n);if(h.length+g.length===0)for(let b=0;b<d.length;b++){const x=b%p.length,S=b%m.length,C=t(p[x*2],p[x*2+1],m[S*2],m[S*2+1]);d[b]=C.real,f[b]=C.imag}else for(let b=0;b<d.length;b++){const x=e0(b,c,u),S=x.slice(-v);h.forEach(A=>S[A]=0);const C=Cc(S,v,_),T=x.slice(-w);g.forEach(A=>T[A]=0);const E=Cc(T,w,y),k=t(p[C*2],p[C*2+1],m[E*2],m[E*2+1]);d[b]=k.real,f[b]=k.imag}return[d,f,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Epe=kr((t,e)=>t+e),uwt=yH((t,e,n,r)=>({real:t+n,imag:e+r})),fy=Jr(t0,Epe,uwt),dwt={kernelName:t0,backendName:"cpu",kernelFunc:fy};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bH(t,e,n,r,i){const o=Re(r),s=Gi(i,n);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=i||(o>0?s[l]+=e[a]:s[l]+=1)}return s}function Tpe(t,e,n,r=!1){const i=t.shape[0],o=t.shape[1],s=Vt([i,n],e.dtype);for(let a=0;a<i;a++)for(let l=0;l<o;l++){const c=t.get(a,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?s.set(1,a,c):e.size>0?s.set(s.get(a,c)+e.get(a,l),a,c):s.set(s.get(a,c)+1,a,c))}return s}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kpe=kr((t,e)=>t&e),fwt=Jr(tW,kpe),hwt={kernelName:tW,backendName:"cpu",kernelFunc:fwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gc(t){return(e,n,r)=>{const i=wr(n,e.length);for(let o=0;o<e.length;++o)i[o]=t(e[o],r);return i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function En(t,e,n){const r=Gc(e);return Kf(t,r,n)}function Kf(t,e,n){return({inputs:r,attrs:i,backend:o})=>{const{x:s}=r;mt(s,t);const a=o,l=a.data.get(s.dataId).values;let c;if(s.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=Gu(l)}else c=l;const u=n||s.dtype,d=e(c,u,i);return a.makeTensorInfo(s.shape,u,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ape=Gc(t=>Math.ceil(t)),pwt=Kf(n1,Ape),mwt={kernelName:n1,backendName:"cpu",kernelFunc:pwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mpe(t,e,n,r){const i=wr(n,Re(e));if(r&&n!=="string"){let o=0;t.forEach(s=>{const a=Re(s.shape);i.set(s.vals,o),o+=a})}else{let o=0;t.forEach(s=>{const a=n==="string"?Gu(s.vals):s.vals;let l=0;for(let c=0;c<s.shape[0];++c){const u=c*e[1]+o;for(let d=0;d<s.shape[1];++d)i[u+d]=a[l++]}o+=s.shape[1]})}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ipe=kr((t,e)=>t===e?1:0),Ope=Jr(NO,Ipe,null,"bool"),gwt={kernelName:NO,backendName:"cpu",kernelFunc:Ope};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rpe=Gc(t=>Math.exp(t)),Dpe=Kf(c1,Rpe,"float32"),vwt={kernelName:c1,backendName:"cpu",kernelFunc:Dpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ppe=Gc(t=>Math.expm1(t)),ywt=Kf(u1,Ppe),bwt={kernelName:u1,backendName:"cpu",kernelFunc:ywt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Npe=Gc(t=>Math.floor(t)),xwt=Kf(d1,Npe),wwt={kernelName:d1,backendName:"cpu",kernelFunc:xwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $pe=kr((t,e)=>Math.floor(t/e)),_wt=Jr(f1,$pe,null,"int32"),Swt={kernelName:f1,backendName:"cpu",kernelFunc:_wt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lpe(t,e,n,r,i,o,s,a,l){const c=Vt([r,o],n);for(let u=0;u<r;u++){const d=[];let f=0;for(let h=0;h<i;h++){const g=t[u*i+h];f+=g*s[h],d.push(g)}if(f<0||f>=l/o)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let h=0;h<o;h++)c.values[u*o+h]=e.get(...e.indexToLoc(f*o+h))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fpe(t,e,n){const r=Vt(n,t.dtype);for(let i=0;i<r.size;++i){const s=r.indexToLoc(i).slice(),a=s[0],l=s[2],c=e.locToIndex([a,l]);s[2]=e.values[c];const u=t.locToIndex(s);0<=u&&u<t.values.length&&(r.values[i]=t.values[u])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bpe=kr((t,e)=>t>e?1:0),Cwt=Jr(BO,Bpe,null,"bool"),Ewt={kernelName:BO,backendName:"cpu",kernelFunc:Cwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Upe=kr((t,e)=>t>=e?1:0),Twt=Jr(h1,Upe,null,"bool"),kwt={kernelName:h1,backendName:"cpu",kernelFunc:Twt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zpe=kr((t,e)=>t<e?1:0),Awt=Jr(zO,zpe,null,"bool"),Mwt={kernelName:zO,backendName:"cpu",kernelFunc:Awt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jpe=kr((t,e)=>t<=e?1:0),Iwt=Jr(jO,jpe,null,"bool"),Owt={kernelName:jO,backendName:"cpu",kernelFunc:Iwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wpe(t,e,n){const r=(e-t)/(n-1),i=Gi(n,"float32");i[0]=t;for(let o=1;o<i.length;o++)i[o]=i[o-1]+r;return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vpe=Gc(t=>Math.log(t)),Rwt=Kf(y1,Vpe),Dwt={kernelName:y1,backendName:"cpu",kernelFunc:Rwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hpe(t,e,n,r){const i=Hi(r,Re(n));for(let o=0;o<i.length;++o){const s=o*e;let a=t[s];for(let l=0;l<e;++l){const c=t[s+l];(Number.isNaN(c)||c>a)&&(a=c)}i[o]=a}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gpe=kr((t,e)=>Math.max(t,e)),Pwt=Jr(x1,Gpe),Nwt={kernelName:x1,backendName:"cpu",kernelFunc:Pwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qpe=kr((t,e)=>Math.min(t,e)),$wt=Jr(w1,qpe),Lwt={kernelName:w1,backendName:"cpu",kernelFunc:$wt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xH=kr((t,e)=>t*e),Fwt=yH((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),j2=Jr(S1,xH,Fwt),Bwt={kernelName:S1,backendName:"cpu",kernelFunc:j2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xpe(t,e,n){const r=zf(-1,n);return xH([],e,r,t,n)}function Uwt(t){const{inputs:e,backend:n}=t,{x:r}=e;mt(r,"neg");const i=n.data.get(r.dataId).values,[o,s]=Xpe(i,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,o)}const zwt={kernelName:JO,backendName:"cpu",kernelFunc:Uwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kpe=kr((t,e)=>t!==e?1:0),jwt=Jr(e2,Kpe,null,"bool"),Wwt={kernelName:e2,backendName:"cpu",kernelFunc:jwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wH(t,e,n,r,i){const o=e.length,s=Re(e),a=_t(e),l=_t(i),c=Hi(n,Re(i));for(let u=0;u<s;++u){const d=e0(u,o,a),f=new Array(d.length);for(let g=0;g<f.length;g++)f[g]=d[r[g]];const h=Cc(f,o,l);c[h]=t[u]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $o(t){const{inputs:e,attrs:n,backend:r}=t,{x:i}=e,{perm:o}=n;mt(i,"transpose");const s=i.shape.length,a=new Array(s);for(let d=0;d<a.length;d++)a[d]=i.shape[o[d]];const l=r.data.get(i.dataId).values,c=wH(l,i.shape,i.dtype,o,a);return{dataId:r.write(c,a,i.dtype),shape:a,dtype:i.dtype}}const Vwt={kernelName:sv,backendName:"cpu",kernelFunc:$o};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ype(t,e,n,r){const[i,o]=bi(t,r),s=cs(e,"int32"),a=Gi(Re(i),s),l=Re(o);for(let c=0;c<a.length;++c){const u=c*l;let d=1;for(let f=0;f<l;++f)d*=n[u+f];a[c]=d}return{outVals:a,outShape:i,outDtype:s}}function Hwt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,keepDims:s}=r;mt(i,"prod");const a=i.shape.length,l=Gt(o,i.shape),c=cr(l,a);let u=l,d=i;const f=[];c!=null&&(d=$o({inputs:{x:i},backend:n,attrs:{perm:c}}),f.push(d),u=Er(u.length,a));const h=n.data.get(d.dataId).values,{outVals:g,outShape:p,outDtype:m}=Ype(d.shape,d.dtype,h,u);let v=p;return s&&(v=$r(p,l)),f.forEach(_=>n.disposeIntermediateTensorInfo(_)),n.makeTensorInfo(v,m,g)}const Gwt={kernelName:s2,backendName:"cpu",kernelFunc:Hwt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qwt(t,e,n){t.forEach((r,i)=>{if(r<0||r>=n){const o=e0(i,e.length,_t(e)).join(",");throw new Error(`indices[${o}] = ${r} is not in [0, ${n})`)}})}function Xwt(t,e){for(let n=0;n<t.length;++n){const r=t[n],i=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let o=1;o<r.length;++o)if(r[o-1]>r[o])throw new Error("Ragged splits must be sorted in ascending order")}}function Kwt(t,e,n,r){const i=[];let o=0;const s=e.length-1+n.length,a=new Array(s).fill(null).map(()=>[0]);Xwt(n,r);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const u=e[c+1];for(let d=1;d<l+1;++d)a[c].push(d*u)}for(let c=0;c<t.length;++c){let u=t[c],d=t[c]+1;for(let f=0;f<n.length;++f){const h=n[f],g=f+e.length-1;if(g>=0){const p=a[g],m=p[p.length-1]-h[u];for(let v=u;v<d;++v)a[g].push(h[v+1]+m)}u=h[u],d=h[d]}d!==u&&(i.push([u,d]),o+=d-u)}return{outSplits:a,valueSlices:i,numValues:o}}function Ywt(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,i=wr("int32",r);e.push(i),t[n].forEach((o,s)=>i[s]=o)}return e}function BQ(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function Qwt(t,e,n,r,i,o){const s=BQ(e,2)[1],a=BQ(o,2)[1];let l=0;for(const c of n)for(let u=c[0];u<c[1];++u){for(let d=0;d<r;++d)i[l*a+d]=t[u*s+d];++l}}function Zwt(t,e,n,r,i){const o=e.slice();o[0]=i;const s=wr(n,Re(o)),a=t.length,l=a===0?0:a/e[0];return Qwt(t,e,r,l,s,o),[s,o]}function Qpe(t,e,n,r,i,o,s,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(qwt(o,s,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:u,valueSlices:d,numValues:f}=Kwt(o,s,t,c),h=Ywt(u),g=Zwt(n,r,i,d,f);return[h,g[0],g[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UQ=2147483647;function Zpe(t,e,n,r,i,o,s){if(e.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(s.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,l=i.length===0,c=s.length===0,u=[];a||u.push(e[0]),l||u.push(i[0]),c||u.push(s[0]);for(let m=1;m<u.length;++m)if(u[m]!==u[m-1])throw new Error("starts, limits, and deltas must have the same shape");const d=u.length===0?1:u[0],f=wr("int32",d+1);f[0]=0;for(let m=0;m<d;++m){const v=a?t[0]:t[m],_=l?r[0]:r[m],w=c?o[0]:o[m];if(w===0)throw new Error("Requires delta != 0");let y;if(w>0&&_<v||w<0&&_>v)y=0;else if(y=Math.ceil(Math.abs((_-v)/w)),y>UQ)throw new Error(`Requires ((limit - start) / delta) <= ${UQ}`);f[m+1]=f[m]+y}const h=f[d],g=wr(n,h);let p=0;for(let m=0;m<d;++m){const v=f[m+1]-f[m];let _=a?t[0]:t[m];const w=c?o[0]:o[m];for(let y=0;y<v;++y)g[p++]=_,_+=w}return[f,g]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ia=al;class PA{constructor(e,n,r,i,o,s,a,l,c,u){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=i,this.valuesDType=o,this.defaultValue=s,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=Bde(u),this.raggedRank=Ude(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===ia.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===ia.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case ia.VALUE_ROWIDS:return PA.getMaxWidthValueRowID(n);case ia.ROW_SPLITS:return PA.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${ia[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let i=0;i<n-1;++i){const o=e[i+1]-e[i];o>r&&(r=o)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,i=e[0],o=0;for(let s=1;s<n;++s){const a=e[s];a!==i&&(i=a,o=Math.max(s-r,o),r=s)}return Math.max(n-r,o)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return jQ(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;zde(r,n);const i=this.tensorShapeFromTensor(this.shape,this.shapeShape),s=Fde(this.raggedRank,i,n);s[0]<0&&(s[0]=e);for(let a=1;a<=this.raggedRank;++a)s[a]<0&&(s[a]=this.getMaxWidth(a));return s}calculateFirstParentOutputIndex(e,n,r){const i=Math.min(e,r),o=[];let s=0;for(let a=0;a<i;++a,s+=n)o.push(s);for(let a=i;a<e;++a)o.push(-1);return Y(o.length===e,()=>"Final length of result must be equal to firstDimension."),o}calculateOutputIndexRowSplit(e,n,r,i){const o=e.length,s=[];for(let a=0;a<o-1;++a){const l=e[a+1]-e[a];let c=Math.min(i,l),u=n[a];u===-1&&(c=0);for(let d=0;d<c;++d)s.push(u),u+=r;for(let d=0;d<l-c;++d)s.push(-1)}if(o>0&&s.length!==e[o-1])throw new Error("Invalid row split size.");return s}calculateOutputIndexValueRowID(e,n,r,i){const o=e.length,s=[];if(o===0)return[];let a=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let c=n[l];s.push(c);for(let u=1;u<o;++u){const d=e[u];if(d===l)c>=0&&(++a,a<i?c+=r:c=-1);else{if(a=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);c=n[d]}s.push(c)}if(s.length!==e.length)throw new Error("Invalid row ids.");return s}calculateOutputIndex(e,n,r,i){const o=this.getRowPartitionTensor(e),s=this.getRowPartitionTypeByDimension(e);switch(s){case ia.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(o,n,r,i);case ia.ROW_SPLITS:if(o.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${o.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(o,n,r,i);default:throw new Error(`Unsupported partition type: ${ia[s]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case ia.FIRST_DIM_SIZE:return e[0];case ia.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case ia.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${ia[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),i=new Array(this.raggedRank+1);i[i.length-1]=1;for(let l=i.length-2;l>=0;--l)i[l]=i[l+1]*r[l+1];const o=jQ(r,!1),s=wr(this.valuesDType,Re(o));if(i[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,i[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,i[c],r[c]);this.setOutput(this.raggedRank,l,s,o)}return[o,s]}setOutput(e,n,r,i){if(r.length===0)return;const o=this.values,s=r;let a=i.slice();a=a.slice(e+1);const l=Re(a),c=n.length;let u=this.defaultValue;if(u.length!==l&&u.length!==1){const g=this.defaultValueShape;Se(()=>{const p=ge(u,g);u=rx(p,a).dataSync()})}let d=0,f=0,h=0;for(let g=0;g<=c;++g){let p=g<c?n[g]:-1;if(p===h){++h;continue}if(f<h){const m=o.subarray(d*l),v=s.subarray(f*l),_=(h-f)*l;zQ(v,m,_)}if(g>=c){const m=r.length;p=Math.floor(m/l)}if(p>h)if(this.defaultValue.length===1)s.subarray(h*l,p*l).fill(this.defaultValue[0]),h=p;else for(;p>h;){const m=s.slice(h*l);zQ(m,u,l),++h}p<0?(d=g+1,f=h):(d=g,f=h,h=f+1)}}}function zQ(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function jQ(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function Jpe(t,e,n,r,i,o,s,a,l,c){return new PA(t,e,n,r,i,o,s,a,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eme(t,e,n,r){const i=t===e,o=t<e&&n<0,s=e<t&&n>1;if(i||o||s)return Gi(0,r);const a=Math.abs(Math.ceil((e-t)/n)),l=Gi(a,r);e<t&&n===1&&(n=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tme=Gc(t=>1/Math.sqrt(t)),Jwt=Kf(M1,tme),e_t={kernelName:M1,backendName:"cpu",kernelFunc:Jwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kh(t,e,n,r,i,o,s,a,l,c){const u=[r/i,i],d=t.values,f=e.values;if(r===0)return Vt(n,e.dtype);const h=l instanceof Ai?l:Vt(u,e.dtype);typeof l=="string"||typeof l=="number"?h.values.fill(l):typeof l=="boolean"&&h.values.fill(+l);for(let g=0;g<o;g++){const p=[];let m=0;for(let v=0;v<s;v++){const _=d[g*s+v];p.push(_),m+=_*a[v]}if(m<0||m>=r/i)throw new Error(`Invalid indices: ${p} does not index into ${n}`);for(let v=0;v<i;v++)c?h.values[m*i+v]+=f[g*i+v]:h.values[m*i+v]=e.rank===0?f[0]:f[g*i+v]}return h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t_t=Gc(t=>1/(1+Math.exp(-t))),nme=En(P1,t=>1/(1+Math.exp(-t))),n_t={kernelName:P1,backendName:"cpu",kernelFunc:nme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rme(t,e,n,r,i){const o=TV(r,e,n),s=Re(n),a=_t(r);if(o){const d=kV(e,a);return i==="string"?t.slice(d,d+s):t.subarray(d,d+s)}const l=i==="string"?Gu(t):t,c=Vt(r,i,l),u=Vt(n,i);for(let d=0;d<u.size;++d){const f=u.indexToLoc(d),h=f.map((g,p)=>g+e[p]);u.set(c.get(...h),...f)}return i==="string"?afe(u.values):u.values}function Kp(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:o,size:s}=r;mt(i,"slice");const[a,l]=k2(i,o,s);CV(i,a,l);const c=n.data.get(i.dataId).values,u=rme(c,a,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,u)}const r_t={kernelName:f2,backendName:"cpu",kernelFunc:Kp};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ime(t,e,n,r,i,o,s){const a=e[0],l=o[0],c=new Array(l),u=new Array(a),d=e[1];if(l===0){if(a!==0)throw new Error(Xde(a));const m=wr(n,0),v=wr(i,0);return[m,[0,d],v,c,u]}let f=!0,h=0;const g=new Array(l).fill(0);for(let m=0;m<a;++m){const v=t[m*d];if(v<0)throw new Error(Kde(m,v));if(v>=l)throw new Error(Yde(m,v,l));++g[v],f=f&&v>=h,h=v}let p=!0;for(let m=0;m<l;++m){const v=g[m]===0;c[m]=v,p=p&&!v,g[m]=Math.max(g[m],1),m>0&&(g[m]+=g[m-1])}if(p&&f){const m=t,v=r;for(let _=0;_<a;++_)u[_]=_;return[m,[a,d],v,c,u]}else{const m=g[l-1],v=wr(n,m*d),_=wr(i,m),w=new Array(l).fill(0);for(let y=0;y<a;++y){const b=t[y*d],x=w[b],S=(b===0?0:g[b-1])+x;w[b]++;for(let C=0;C<d;++C)v[S*d+C]=t[y*d+C];_[S]=r[y],u[y]=S}for(let y=0;y<l;++y)if(w[y]===0){const x=y===0?0:g[y-1];v[x*d+0]=y;for(let S=1;S<d;++S)v[x*d+S]=0;_[x]=s}return[v,[m,d],_,c,u]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ome(t,e,n,r,i){const o=Re(r),s=e[0],a=i.length,l=[];let c=1,u=-1;for(let m=0;m<a;++m){const v=i[m];if(v===-1){if(u!==-1)throw new Error(Qde(u,m));u=m,l.push(1)}else{if(v<0)throw new Error(Zde(m,v));c*=v,l.push(v)}}if(u!==-1){if(c<=0)throw new Error(Jde());const m=Math.trunc(o/c);if(c*m!==o)throw new Error(efe(r,l));l[u]=m}if(Re(l)!==o)throw new Error(tfe(r,l));const f=r.length,h=[];if(f>0){h[f-1]=1;for(let m=f-2;m>=0;--m)h[m]=h[m+1]*r[m+1]}const g=[];if(a>0){g[a-1]=1;for(let m=a-2;m>=0;--m)g[m]=g[m+1]*l[m+1]}const p=wr(n,s*a);for(let m=0;m<s;++m){let v=0;for(let _=0;_<f;++_)v+=t[m*f+_]*h[_];for(let _=0;_<a;++_)p[m*a+_]=Math.trunc(v/g[_]),v%=g[_]}return[p,[s,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _H(t,e,n,r,i,o=!1,s=0){const a=r.length,l=[e[0],t.length/e[0]],c=l[1],d=a>0?i[a-1]+1:0;if(d<0)throw new Error(E3());const f=e.slice();f[0]=d;const h=f.reduce((w,y)=>w*y,1),g=wr(n,h);if(a===0)return d>0&&g.fill(s),[g,f];if(d<=0)throw new Error(E3());let p=0,m=1,v=0,_=i[p];for(;;){let w=0;if(m<a){if(w=i[m],_===w){++m;continue}if(_>=w)throw new Error(nfe())}if(_<0||_>=d)throw new Error(rfe(_,d));_>v&&g.fill(s,v*c,_*c);for(let y=p;y<m;++y){const b=r[y];if(b<0||b>=l[0])throw new Error(ife(y,r[y],l[0]));for(let x=0;x<c;x++)g[_*c+x]+=t[b*c+x]}if(o)for(let y=0;y<c;y++)g[_*c+y]/=m-p;if(p=m,++m,v=_+1,_=w,m>a)break}return v<d&&g.fill(s,v*c,d*c),[g,f]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i_t=Gc(t=>Math.sqrt(t)),o_t=En($1,t=>Math.sqrt(t)),s_t={kernelName:$1,backendName:"cpu",kernelFunc:o_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sme=kr((t,e)=>{const n=t-e;return n*n}),a_t=Jr(L1,sme),l_t={kernelName:L1,backendName:"cpu",kernelFunc:a_t};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ame=Gc((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:i}=e;return t.replace(new RegExp(n,r?"g":""),i)}),c_t=Kf(IW,ame),u_t={kernelName:IW,backendName:"cpu",kernelFunc:c_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lme(t,e,n,r){const i=Vt(t,e.dtype);for(let o=0;o<i.size;o++){const s=i.indexToLoc(o),a=new Array(s.length);for(let l=0;l<a.length;l++)a[l]=s[l]*n[l]+r[l];i.set(e.get(...a),...s)}return i}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d_t{constructor(e,n,r,i,o,s){this.separator=lf(e),this.nGramWidths=n,this.leftPad=lf(r),this.rightPad=lf(i),this.padWidth=o,this.preserveShort=s}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,i,o,s){for(let a=0;a<o;++a){const l=this.getPadWidth(s),c=Math.max(0,l-a),u=Math.max(0,l-(o-(a+1))),d=s-(c+u),f=n+(c>0?0:a-l);let h=0;h+=c*this.leftPad.length;for(let _=0;_<d;++_)h+=e[f+_].length;h+=u*this.rightPad.length;const g=c+u+d-1;h+=g*this.separator.length,r[i+a]=new Uint8Array(h);const p=r[i+a];let m=0;const v=_=>_.forEach(w=>p[m++]=w);for(let _=0;_<c;++_)v(this.leftPad),v(this.separator);for(let _=0;_<d-1;++_)v(e[f+_]),v(this.separator);if(d>0){v(e[f+d-1]);for(let _=0;_<u;++_)v(this.separator),v(this.rightPad)}else{for(let _=0;_<u-1;++_)v(this.rightPad),v(this.separator);v(this.rightPad)}}}compute(e,n){const r=e.length,i=n.length;if(i>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<i;++c){let u=n[c]>=l;if(u=u&&n[c]<=r,!u)throw new Error(`Invalid split value ${n[c]}, must be in [${l}, ${r}]`);l=n[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const o=i-1,s=wr("int32",i);if(r===0||i===0){const l=new Array(r);for(let c=0;c<=o;++c)s[c]=0;return[l,s]}s[0]=0;for(let l=1;l<=o;++l){const c=n[l]-n[l-1];let u=0;this.nGramWidths.forEach(d=>{u+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&u===0&&(u=1),s[l]=s[l-1]+u}const a=new Array(s[o]);for(let l=0;l<o;++l){const c=n[l];let u=s[l];if(this.nGramWidths.forEach(d=>{const f=n[l+1]-n[l],h=this.getNumNGrams(f,d);this.createNGrams(e,c,a,u,h,d),u+=h}),this.preserveShort&&u===s[l]){const d=n[l+1]-n[l];if(d===0)continue;const f=d+2*this.padWidth;this.createNGrams(e,c,a,u,1,f)}}return[a,s]}}function cme(t,e,n,r,i,o,s,a){return new d_t(n,r,i,o,s,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f_t(t,e,n,r){if(!t.length)return;if(e.length===0){for(let o=0;o<t.length;++o)r.push(t.subarray(o,o+1));return}if(e.length===1){const o=e[0];let s=t.indexOf(o);for(;s!==-1;){const a=t.subarray(0,s);(!n||a.length!==0)&&r.push(a),t=t.subarray(s+1),s=t.indexOf(o)}(!n||t.length!==0)&&r.push(t);return}let i=0;for(let o=0;o<t.length+1;o++)if(o===t.length||e.indexOf(t[o])!==-1){const s=t.subarray(i,o);(!n||s.length!==0)&&r.push(s),i=o+1}}function ume(t,e,n){const r=t.length,i=[];let o=0,s=0;const a=new Array(r);for(let f=0;f<r;++f){const h=i.length;f_t(t[f],e,n,i);const g=i.length-h;a[f]=g,o+=g,s=Math.max(s,g)}const l=wr("int32",o*2),c=new Array(o),u=[r,s];let d=0;for(let f=0;f<r;++f)for(let h=0;h<a[f];++h)l[d*2]=f,l[d*2+1]=h,c[d]=i[d],++d;return[l,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dme(t,e){const n=wr("int32",t.length);for(let r=0;r<t.length;++r)n[r]=Tdt(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fme=kr((t,e)=>t-e),h_t=yH((t,e,n,r)=>({real:t-n,imag:e-r})),SH=Jr(F1,fme,h_t),p_t={kernelName:F1,backendName:"cpu",kernelFunc:SH};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hme(t,e){const n=new Array(t.rank);for(let i=0;i<n.length;i++)n[i]=t.shape[i]*e[i];const r=Vt(n,t.dtype);for(let i=0;i<r.values.length;++i){const o=r.indexToLoc(i),s=new Array(t.rank);for(let l=0;l<s.length;l++)s[l]=o[l]%t.shape[l];const a=t.locToIndex(s);r.values[i]=t.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cb=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function pme(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,l=e-n+1,c=Math.log(a),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(a-u)/a)*Math.sign(l-a/2),f=Math.max(n,Math.floor(e-l*u/a+d)),h=Math.min(r,Math.floor(e+(a-l)*u/a+d));pme(t,e,f,h)}const i=t[e];let o=n,s=r;for(pg(t,n,e),Cb(t[r],i)>0&&pg(t,n,r);o<s;){for(pg(t,o,s),o++,s--;Cb(t[o],i)<0;)o=o+1;for(;Cb(t[s],i)>0;)s=s-1}Cb(t[n],i)===0?pg(t,n,s):(s=s+1,pg(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}}function mme(t,e,n,r,i){const o=e[e.length-1],[s,a]=[t.length/o,o],l=Hi(n,s*r),c=Hi("int32",s*r);for(let d=0;d<s;d++){const f=d*a,h=t.subarray(f,f+a);let g=new Array(h.length);h.forEach((_,w)=>g[w]={value:_,index:w}),r<g.length&&(pme(g,r),g=g.slice(0,r)),i&&g.sort(Cb);const p=d*r,m=l.subarray(p,p+r),v=c.subarray(p,p+r);for(let _=0;_<r;_++)m[_]=g[_].value,v[_]=g[_].index}const u=e.slice();return u[u.length-1]=r,[Vt(u,n,l),Vt(u,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gme(t,e,n,r){const i=Gt(e,n)[0],o=[1,n[0],1];for(let g=0;g<i;g++)o[0]*=n[g];o[1]=n[i];for(let g=i+1;g<n.length;g++)o[2]*=n[g];const s=new Map,a=new Int32Array(n[i]),l=new Ai(o,r,t),c=[],u=o[0]===1&&o[2]===1;for(let g=0;g<n[i];g++){let p;if(u)p=t[g].toString();else{const v=[];for(let _=0;_<o[0];_++)for(let w=0;w<o[2];w++)v.push(l.get(_,g,w));p=v.join(",")}const m=s.get(p);if(m!=null)a[g]=m;else{const v=s.size;s.set(p,v),a[g]=v,c.push(g)}}const d=o.slice();d[1]=s.size;const f=new Ai(d,r);c.forEach((g,p)=>{for(let m=0;m<o[0];m++)for(let v=0;v<o[2];v++)f.set(l.get(m,g,v),m,p,v)});const h=n.slice();return h[i]=d[1],{outputValues:f.values,outputShape:h,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m_t=Object.freeze(Object.defineProperty({__proto__:null,addImpl:Epe,bincountImpl:bH,bincountReduceImpl:Tpe,bitwiseAndImpl:kpe,castImpl:Cpe,ceilImpl:Ape,concatImpl:Mpe,equalImpl:Ipe,expImpl:Rpe,expm1Impl:Ppe,floorDivImpl:$pe,floorImpl:Npe,gatherNdImpl:Lpe,gatherV2Impl:Fpe,greaterEqualImpl:Upe,greaterImpl:Bpe,lessEqualImpl:jpe,lessImpl:zpe,linSpaceImpl:Wpe,logImpl:Vpe,maxImpl:Hpe,maximumImpl:Gpe,minimumImpl:qpe,multiplyImpl:xH,negImpl:Xpe,notEqualImpl:Kpe,prodImpl:Ype,raggedGatherImpl:Qpe,raggedRangeImpl:Zpe,raggedTensorToTensorImpl:Jpe,rangeImpl:eme,rsqrtImpl:tme,scatterImpl:Kh,sigmoidImpl:t_t,simpleAbsImpl:Spe,sliceImpl:rme,sparseFillEmptyRowsImpl:ime,sparseReshapeImpl:ome,sparseSegmentReductionImpl:_H,sqrtImpl:i_t,squaredDifferenceImpl:sme,staticRegexReplaceImpl:ame,stridedSliceImpl:lme,stringNGramsImpl:cme,stringSplitImpl:ume,stringToHashBucketFastImpl:dme,subImpl:fme,tileImpl:hme,topKImpl:mme,transposeImpl:wH,uniqueImpl:gme},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Nue("cpu",()=>new z2,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vme=En(a1,t=>t>=0?t:Math.exp(t)-1),g_t={kernelName:a1,backendName:"cpu",kernelFunc:vme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yme(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:o}=r;mt([i],"leakyRelu");const s=Re(i.shape),a=n.data.get(i.dataId).values,l=Hi("float32",s);for(let c=0;c<a.length;c++)l[c]=a[c]<0?o*a[c]:a[c];return n.makeTensorInfo(i.shape,"float32",l)}const v_t={kernelName:UO,backendName:"cpu",kernelFunc:yme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y_t=kr((t,e)=>t<0?e*t:t);function bme(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e;mt([r,i],"prelu");const o=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,[a,l]=y_t(r.shape,i.shape,o,s,"float32");return n.makeTensorInfo(l,"float32",a)}const b_t={kernelName:o2,backendName:"cpu",kernelFunc:bme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xme=En(T1,t=>Math.max(0,t)),x_t={kernelName:T1,backendName:"cpu",kernelFunc:xme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wme=En(k1,t=>Math.min(Math.max(0,t),6)),w_t={kernelName:k1,backendName:"cpu",kernelFunc:wme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NA(t,e,n,r,i){if(n==="linear")return Uc({inputs:{x:e},backend:t});if(n==="relu")return xme({inputs:{x:e},backend:t});if(n==="elu")return vme({inputs:{x:e},backend:t});if(n==="relu6")return wme({inputs:{x:e},backend:t});if(n==="prelu")return bme({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return yme({inputs:{x:e},backend:t,attrs:{alpha:i}});if(n==="sigmoid")return nme({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Un(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:o}=r,s=Re(i.shape),a=zce(o,s),l=Re(a);Y(s===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${i.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);const c=n.data.get(i.dataId);if(c.complexTensorInfos!=null){const u=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;u.shape=a,d.shape=a}return{dataId:i.dataId,shape:a,dtype:i.dtype}}const __t={kernelName:a2,backendName:"cpu",kernelFunc:Un};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _me(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:o}=e,{transposeA:s,transposeB:a}=r;mt([i,o],"matMul");const l=i.shape.length,c=o.shape.length,u=s?i.shape[l-2]:i.shape[l-1],d=a?o.shape[c-1]:o.shape[c-2],f=s?i.shape[l-1]:i.shape[l-2],h=a?o.shape[c-2]:o.shape[c-1],g=i.shape.slice(0,-2),p=o.shape.slice(0,-2),m=Re(g),v=Re(p),w=Lt(i.shape.slice(0,-2),o.shape.slice(0,-2)).concat([f,h]);Y(u===d,()=>`Error in matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${i.shape} and ${o.shape} and transposeA=${s} and transposeB=${a} must match.`);const y=s?[m,u,f]:[m,f,u],b=a?[v,h,d]:[v,d,h],x=Un({inputs:{x:i},backend:n,attrs:{shape:y}}),S=Un({inputs:{x:o},backend:n,attrs:{shape:b}}),C=s?x.shape[1]:x.shape[2],T=s?x.shape[2]:x.shape[1],E=a?S.shape[1]:S.shape[2],k=Math.max(m,v),A=n.data.get(x.dataId).values,O=n.data.get(S.dataId).values,D=_t(x.shape),P=_t(S.shape),[N,U,L]=s?[D[0],1,D[1]]:[D[0],D[1],1],[V,G,Q]=a?[1,P[1],P[0]]:[P[1],1,P[0]],te=T*E,ne=Vt([k,T,E],x.dtype),ee=ne.values,re=n.blockSize;for(let se=0;se<k;se++){const me=se%m,Me=se%v;for(let de=0;de<T;de+=re){const Ce=Math.min(de+re,T);for(let Ee=0;Ee<E;Ee+=re){const q=Math.min(Ee+re,E);for(let Ve=0;Ve<C;Ve+=re){const ze=Math.min(Ve+re,C);for(let Fe=de;Fe<Ce;Fe++)for(let we=Ee;we<q;we++){let Je=0;for(let Z=Ve;Z<ze;Z++){const ce=A[me*N+Fe*U+Z*L],H=O[Z*V+we*G+Me*Q];Je+=ce*H}ee[se*te+(Fe*E+we)]+=Je}}}}}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(S),n.makeTensorInfo(w,ne.dtype,ne.values)}const S_t={kernelName:EO,backendName:"cpu",kernelFunc:_me};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C_t(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:o,bias:s,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;let f,h,g;const p=[];f=_me({inputs:{a:i,b:o},attrs:{transposeA:l,transposeB:c},backend:n}),s&&(h=fy({inputs:{a:f,b:s},backend:n}),p.push(f),f=h),u&&(g=NA(n,f,u,a,d),p.push(f),f=g);for(const v of p)n.disposeIntermediateTensorInfo(v);return f}const E_t={kernelName:fA,backendName:"cpu",kernelFunc:C_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T_t=En(X_,t=>Math.acos(t)),k_t={kernelName:X_,backendName:"cpu",kernelFunc:T_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A_t=En(K_,t=>Math.acosh(t)),M_t={kernelName:K_,backendName:"cpu",kernelFunc:A_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I_t(t){const{inputs:e,backend:n}=t,r=e;mt(e,"addN");const i=r.map(a=>n.data.get(a.dataId).values),o=Vt(r[0].shape,r[0].dtype),s=o.values;for(let a=0;a<r.length;a++){const l=i[a];for(let c=0;c<s.length;c++)s[c]+=l[c]}return n.makeTensorInfo(o.shape,o.dtype,o.values)}const O_t={kernelName:K4,backendName:"cpu",kernelFunc:I_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R_t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,keepDims:s}=r;mt(i,"all");const a=Gt(o,i.shape);let l=a;const c=cr(l,i.shape.length);let u=i;c!=null&&(u=$o({inputs:{x:i},backend:n,attrs:{perm:c}}),l=Er(l.length,i.shape.length)),Pi("all",l,u.shape.length);const[d,f]=bi(u.shape,l),h=Re(f),g=Gi(Re(d),u.dtype),p=n.data.get(u.dataId).values;for(let v=0;v<g.length;++v){const _=v*h;let w=p[_];for(let y=0;y<h;++y){const b=p[_+y];w=w&&b}g[v]=w}c!=null&&n.disposeIntermediateTensorInfo(u);const m=n.makeTensorInfo(d,u.dtype,g);if(s){const v=$r(d,a),_=Un({inputs:{x:m},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(m),_}return m}const D_t={kernelName:Y4,backendName:"cpu",kernelFunc:R_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P_t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,keepDims:s}=r;mt(i,"any");const a=Gt(o,i.shape);let l=a;const c=cr(l,i.shape.length);let u=i;c!=null&&(u=$o({inputs:{x:i},backend:n,attrs:{perm:c}}),l=Er(l.length,i.shape.length)),Pi("any",l,u.shape.length);const[d,f]=bi(u.shape,l),h=Re(f),g=Gi(Re(d),u.dtype),p=n.data.get(u.dataId).values;for(let v=0;v<g.length;++v){const _=v*h;let w=p[_];for(let y=0;y<h;++y){const b=p[_+y];w=w||b}g[v]=w}c!=null&&n.disposeIntermediateTensorInfo(u);const m=n.makeTensorInfo(d,u.dtype,g);if(s){const v=$r(d,a),_=Un({inputs:{x:m},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(m),_}return m}const N_t={kernelName:Q4,backendName:"cpu",kernelFunc:P_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $_t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o}=r;mt(i,"argMax");let s=Gt(o,i.shape);const a=cr(s,i.shape.length);let l=i;const c=[];a!=null&&(l=$o({inputs:{x:i},backend:n,attrs:{perm:a}}),c.push(l),s=Er(s.length,l.shape.length)),s=[s[0]],Pi("argMax",s,l.shape.length);const[u,d]=bi(l.shape,s),f=Re(u),h=Gi(f,"int32"),g=Re(d),p=n.data.get(l.dataId).values;for(let m=0;m<h.length;++m){const v=m*g;let _=p[v],w=0;for(let y=0;y<g;++y){const b=p[v+y];b>_&&(_=b,w=y)}h[m]=w}return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),n.makeTensorInfo(u,"int32",h)}const L_t={kernelName:wO,backendName:"cpu",kernelFunc:$_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F_t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o}=r;mt(i,"argMin");let s=Gt(o,i.shape);const a=cr(s,i.shape.length);let l=i;const c=[];a!=null&&(l=$o({inputs:{x:i},backend:n,attrs:{perm:a}}),c.push(l),s=Er(s.length,l.shape.length)),s=[s[0]],Pi("argMin",s,l.shape.length);const[u,d]=bi(l.shape,s),f=Re(u),h=Gi(f,"int32"),g=Re(d),p=n.data.get(l.dataId).values;for(let m=0;m<h.length;++m){const v=m*g;let _=p[v],w=0;for(let y=0;y<g;++y){const b=p[v+y];b<_&&(_=b,w=y)}h[m]=w}return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),n.makeTensorInfo(u,"int32",h)}const B_t={kernelName:_O,backendName:"cpu",kernelFunc:F_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U_t=En(Y_,t=>Math.asin(t)),z_t={kernelName:Y_,backendName:"cpu",kernelFunc:U_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j_t=En(Q_,t=>Math.asinh(t)),W_t={kernelName:Q_,backendName:"cpu",kernelFunc:j_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V_t=En(Z_,t=>Math.atan(t)),H_t={kernelName:Z_,backendName:"cpu",kernelFunc:V_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G_t=kr((t,e)=>Math.atan2(t,e)),q_t=Jr(e1,G_t),X_t={kernelName:e1,backendName:"cpu",kernelFunc:q_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K_t=En(J_,t=>Math.atanh(t)),Y_t={kernelName:J_,backendName:"cpu",kernelFunc:K_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CH(t,e,n,r,i,o){const s=i.strideHeight,a=i.strideWidth,l=i.dilationHeight,c=i.dilationWidth,u=i.effectiveFilterHeight,d=i.effectiveFilterWidth,f=i.padInfo.top,h=i.padInfo.left,g=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,p=Vt(i.outShape,n),m=p.values,v=i.outShape[1]*i.outShape[2]*i.outShape[3],_=i.outShape[2]*i.outShape[3],w=i.outShape[3];for(let y=0;y<i.batchSize;++y){const b=y*v,x=y*r[0];for(let S=0;S<i.inChannels;++S)for(let C=0;C<i.outHeight;++C){const T=C*s-f,E=Math.max(0,T),k=Math.min(i.inHeight,u+T),A=b+C*_;for(let O=0;O<i.outWidth;++O){const D=O*a-h,P=Math.max(0,D),N=Math.min(i.inWidth,d+D);let U=g,L=0,V=0;for(let Q=E;Q<k;Q+=l){const te=x+Q*r[1];for(let ne=P;ne<N;ne+=c){const ee=te+ne*r[2],re=t[ee+S];o==="max"&&re>U?U=re:o==="avg"&&(L+=re,V++)}if(isNaN(U))break}const G=A+O*w+S;m[G]=o==="avg"?L/V:U}}}return p}function Sme(t,e,n,r,i=!1,o=!1){const s=Vt(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,d=r.effectiveFilterHeight,f=r.effectiveFilterWidth,h=r.padInfo.top,g=r.padInfo.left,p=Vt(e,n,t);for(let m=0;m<r.batchSize;++m)for(let v=0;v<r.inChannels;++v)for(let _=0;_<r.outHeight;++_){const w=_*a-h;let y=w;for(;y<0;)y+=c;const b=Math.min(r.inHeight,d+w);for(let x=0;x<r.outWidth;++x){const S=x*l-g;let C=S;for(;C<0;)C+=u;const T=Math.min(r.inWidth,f+S);let E=Number.NEGATIVE_INFINITY,k=-1;for(let A=y;A<b;A+=c){const O=A-w;for(let D=C;D<T;D+=u){const P=D-S,N=p.get(m,A,D,v);N>E&&(E=N,i?k=o?((m*r.inHeight+A)*r.inWidth+D)*r.inChannels+v:(A*r.inWidth+D)*r.inChannels+v:k=O*f+P)}}s.set(k,m,_,x,v)}}return s}function Cme(t,e,n,r,i,o){const s=i.strideDepth,a=i.strideHeight,l=i.strideWidth,c=i.dilationDepth,u=i.dilationHeight,d=i.dilationWidth,f=i.effectiveFilterDepth,h=i.effectiveFilterHeight,g=i.effectiveFilterWidth,p=i.padInfo.front,m=i.padInfo.top,v=i.padInfo.left,_=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,w=Vt(i.outShape,n),y=w.values,b=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],x=i.outShape[2]*i.outShape[3]*i.outShape[4],S=i.outShape[3]*i.outShape[4],C=i.outShape[4];for(let T=0;T<i.batchSize;++T){const E=T*b,k=T*r[0];for(let A=0;A<i.inChannels;++A)for(let O=0;O<i.outDepth;++O){const D=O*s-p;let P=D;for(;P<0;)P+=c;const N=Math.min(i.inDepth,f+D),U=E+O*x;for(let L=0;L<i.outHeight;++L){const V=L*a-m;let G=V;for(;G<0;)G+=u;const Q=Math.min(i.inHeight,h+V),te=U+L*S;for(let ne=0;ne<i.outWidth;++ne){const ee=ne*l-v;let re=ee;for(;re<0;)re+=d;const se=Math.min(i.inWidth,g+ee),me=te+ne*C;let Me=_,de=0,Ce=0;for(let q=P;q<N;q+=c){const Ve=k+q*r[1];for(let ze=G;ze<Q;ze+=u){const Fe=Ve+ze*r[2];for(let we=re;we<se;we+=d){const Je=Fe+we*r[3],Z=t[Je+A];if(o==="max"&&Z>Me?Me=Z:o==="avg"&&(de+=Z,Ce++),isNaN(Me))break}if(isNaN(Me))break}if(isNaN(Me))break}const Ee=me+A;y[Ee]=o==="avg"?de/Math.max(Ce,1):Me}}}}return w}function Q_t(t,e){const n=Vt(e.outShape,"int32"),r=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,u=e.effectiveFilterHeight,d=e.effectiveFilterWidth,f=e.padInfo.front,h=e.padInfo.top,g=e.padInfo.left;for(let p=0;p<e.batchSize;++p)for(let m=0;m<e.inChannels;++m)for(let v=0;v<e.outDepth;++v){const _=v*r-f;let w=_;for(;w<0;)w+=s;const y=Math.min(e.inDepth,c+_);for(let b=0;b<e.outHeight;++b){const x=b*i-h;let S=x;for(;S<0;)S+=a;const C=Math.min(e.inHeight,u+x);for(let T=0;T<e.outWidth;++T){const E=T*o-g;let k=E;for(;k<0;)k+=l;const A=Math.min(e.inWidth,d+E);let O=Number.NEGATIVE_INFINITY,D=-1;for(let P=w;P<y;P+=s){const N=P-_;for(let U=S;U<C;U+=a){const L=U-x;for(let V=k;V<A;V+=l){const G=V-E,Q=t.get(p,P,U,V,m);Q>=O&&(O=Q,D=N*u*d+L*u+G)}}}n.set(D,p,v,b,T,m)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z_t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;mt(i,"avgPool");const{filterSize:o,strides:s,pad:a,dimRoundingMode:l}=r,c=1;Y(Xi(s,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const u=ja(i.shape,o,s,c,a,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&mn(u.inShape,u.outShape))d=Uc({inputs:{x:i},backend:n});else{const f=n.data.get(i.dataId).values,h=_t(i.shape),g=CH(f,i.shape,i.dtype,h,u,"avg");d=n.makeTensorInfo(u.outShape,i.dtype,g.values)}return d}const J_t={kernelName:SO,backendName:"cpu",kernelFunc:Z_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e1t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:o,strides:s,pad:a,dimRoundingMode:l,dataFormat:c}=r;mt(i,"avgPool3d");const u=id(i.shape,o,s,1,a,l,c),d=n.data.get(i.dataId).values,f=Cme(d,i.shape,i.dtype,_t(i.shape),u,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}const t1t={kernelName:CO,backendName:"cpu",kernelFunc:e1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n1t(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:o}=e,{filterSize:s,strides:a,pad:l,dimRoundingMode:c}=r;mt([i,o],"avgPool3DGrad");const u=id(o.shape,s,a,1,l,c),d=u.strideDepth,f=u.strideHeight,h=u.strideWidth,g=u.filterDepth,p=u.filterHeight,m=u.filterWidth,v=u.dilationDepth,_=u.dilationHeight,w=u.dilationWidth,y=u.effectiveFilterDepth,b=u.effectiveFilterHeight,x=u.effectiveFilterWidth,S=y-1-u.padInfo.front,C=x-1-u.padInfo.left,T=b-1-u.padInfo.top,E=Vt(o.shape,"float32"),k=1/(g*p*m),A=n.bufferSync(i);for(let O=0;O<u.batchSize;++O)for(let D=0;D<u.inChannels;++D)for(let P=0;P<u.inDepth;++P)for(let N=0;N<u.inHeight;++N)for(let U=0;U<u.inWidth;++U){const L=P-S,V=N-T,G=U-C;let Q=0;for(let te=0;te<y;te+=v){const ne=(L+te)/d;if(!(ne<0||ne>=u.outDepth||Math.floor(ne)!==ne))for(let ee=0;ee<b;ee+=_){const re=(V+ee)/f;if(!(re<0||re>=u.outHeight||Math.floor(re)!==re))for(let se=0;se<x;se+=w){const me=(G+se)/h;if(me<0||me>=u.outWidth||Math.floor(me)!==me)continue;const Me=A.get(O,ne,re,me,D);Q+=Me}}}E.set(Q*k,O,P,N,U,D)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const r1t={kernelName:J4,backendName:"cpu",kernelFunc:n1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i1t(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:o}=e,s=o;mt([i,o],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=ja(s.shape,a,l,1,c),d=u.strideHeight,f=u.strideWidth,h=u.filterHeight,g=u.filterWidth,p=u.dilationHeight,m=u.dilationWidth,v=u.effectiveFilterHeight,_=u.effectiveFilterWidth,w=_-1-u.padInfo.left,y=v-1-u.padInfo.top,b=Vt(s.shape,"float32"),x=1/(h*g),S=n.data.get(i.dataId).values,C=Vt(i.shape,"float32",S);for(let T=0;T<u.batchSize;++T)for(let E=0;E<u.inChannels;++E)for(let k=0;k<u.inHeight;++k)for(let A=0;A<u.inWidth;++A){const O=k-y,D=A-w;let P=0;for(let N=0;N<v;N+=p){const U=(O+N)/d;if(!(U<0||U>=u.outHeight||Math.floor(U)!==U))for(let L=0;L<_;L+=m){const V=(D+L)/f;if(V<0||V>=u.outWidth||Math.floor(V)!==V)continue;const G=C.get(T,U,V,E);P+=G}}b.set(P*x,T,k,A,E)}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const o1t={kernelName:Z4,backendName:"cpu",kernelFunc:i1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s1t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,scale:o,offset:s,mean:a,variance:l}=e;Y(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Y(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Y(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),mt([i,a,l,o,s],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const u=n.data.get(i.dataId).values,d=n.data.get(a.dataId).values,f=n.data.get(l.dataId).values,h=o?n.data.get(o.dataId).values:new Float32Array([1]),g=s?n.data.get(s.dataId).values:new Float32Array([0]),p=new Float32Array(u.length),m=g.length,v=h.length,_=f.length,w=d.length;let y=0,b=0,x=0,S=0;for(let C=0;C<u.length;++C)p[C]=g[y++]+(u[C]-d[b++])*h[x++]/Math.sqrt(f[S++]+c),y>=m&&(y=0),b>=w&&(b=0),x>=v&&(x=0),S>=_&&(S=0);return n.makeTensorInfo(i.shape,i.dtype,p)}const a1t={kernelName:LO,backendName:"cpu",kernelFunc:s1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l1t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:o,crops:s}=r;mt([i],"batchToSpaceND");const a=o.reduce((v,_)=>v*_),l=Y1(i.shape,o,a),c=Q1(l.length,o.length),u=Z1(i.shape,o,a),d=RV(s,o.length),f=DV(u,s,o.length),h=Un({inputs:{x:i},backend:n,attrs:{shape:l}}),g=$o({inputs:{x:h},backend:n,attrs:{perm:c}}),p=Un({inputs:{x:g},backend:n,attrs:{shape:u}}),m=Kp({inputs:{x:p},backend:n,attrs:{begin:d,size:f}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(p),m}const c1t={kernelName:TO,backendName:"cpu",kernelFunc:l1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u1t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:o}=e,{size:s}=r,a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,c=bH(a,l,o.dtype,o.shape,s);return n.makeTensorInfo([s],o.dtype,c)}const d1t={kernelName:eW,backendName:"cpu",kernelFunc:u1t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f1t(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,o=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,a=Lt(Array.from(o),Array.from(s));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const h1t={kernelName:qce,backendName:"cpu",kernelFunc:f1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p1t=En(r1,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),m1t={kernelName:r1,backendName:"cpu",kernelFunc:p1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g1t=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(Re(e.shape)),i=n.data.get(e.dataId),o=i.complexTensorInfos.real,s=i.complexTensorInfos.imag,a=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values;for(let c=0;c<a.length;c++){const u=a[c],d=l[c];r[c]=Math.hypot(u,d)}return n.makeOutput(r,e.shape,"float32")},v1t={kernelName:kO,backendName:"cpu",kernelFunc:g1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hy(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.imag,o=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,o)}const y1t={kernelName:yW,backendName:"cpu",kernelFunc:hy};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function py(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,o=Gt(i,e[0].shape)[0],s=e.map(p=>p.shape);MV(s,o);let a=Tc(e.map(p=>p.shape),o);if(Re(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(p=>Re(p.shape)>0);if(l.length===1)return Uc({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const p=l.map(y=>Xp({inputs:{input:y},backend:n})),m=l.map(y=>hy({inputs:{input:y},backend:n})),v=py({inputs:p,backend:n,attrs:{axis:o}}),_=py({inputs:m,backend:n,attrs:{axis:o}}),w=qo({inputs:{real:v,imag:_},backend:n});return p.forEach(y=>n.disposeIntermediateTensorInfo(y)),m.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(_),w}const c=l.map(p=>{const v=[-1,Re(p.shape.slice(o))];return Un({inputs:{x:p},backend:n,attrs:{shape:v}})}),u=c.map(p=>({vals:n.data.get(p.dataId).values,shape:p.shape}));a=Tc(c.map(p=>p.shape),1);const d=c[0].shape[0]===1,f=Mpe(u,a,e[0].dtype,d),h=Tc(l.map(p=>p.shape),o),g=n.makeTensorInfo(h,e[0].dtype,f);return c.forEach(p=>n.disposeIntermediateTensorInfo(p)),g}const b1t={kernelName:AO,backendName:"cpu",kernelFunc:py};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eme(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:o}=e,{strides:s,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r;mt([i,o],"conv2d");const d=od(l),f=Di(i.shape,o.shape,s,c,a,u,!1,d),h=f.filterHeight,g=f.filterWidth,p=f.dilationHeight,m=f.dilationWidth,v=f.padInfo.left,_=f.padInfo.top,w=f.dataFormat==="channelsLast",y=new Ai(f.outShape,i.dtype),b=_t(i.shape),x=_t(o.shape),S=b[0],C=w?b[1]:b[2],T=w?b[2]:1,E=w?1:b[1],k=y.strides[0],A=w?y.strides[1]:y.strides[2],O=w?y.strides[2]:1,D=w?1:y.strides[1],P=n.data.get(i.dataId).values,N=n.data.get(o.dataId).values,U=y.values;for(let L=0;L<f.batchSize;++L){const V=L*S,G=L*k;for(let Q=0;Q<f.outHeight;++Q){const te=G+Q*A,ne=Q*f.strideHeight-_;for(let ee=0;ee<h;++ee){const re=ne+ee*p;if(re<0||re>=f.inHeight)continue;const se=ee*x[0],me=V+re*C;for(let Me=0;Me<f.outWidth;++Me){const de=te+Me*O,Ce=Me*f.strideWidth-v;for(let Ee=0;Ee<g;++Ee){const q=Ce+Ee*m;if(q<0||q>=f.inWidth)continue;const Ve=se+Ee*x[1],ze=me+q*T;let Fe=Ve;for(let we=0;we<f.inChannels;++we){const Je=P[ze+we*E];for(let Z=0;Z<f.outChannels;++Z)U[de+Z*D]+=Je*N[Fe+Z];Fe+=f.outChannels}}}}}}return n.makeTensorInfo(y.shape,y.dtype,U)}const x1t={kernelName:MO,backendName:"cpu",kernelFunc:Eme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w1t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:o}=e,{strides:s,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;mt([i,o],"conv2dBackpropFilter");const d=od(l),f=Di(i.shape,u,s,1,a,c,!1,d),{strideHeight:h,strideWidth:g,filterHeight:p,filterWidth:m}=f,v=f.dataFormat==="channelsLast",_=new Ai(f.filterShape,"float32"),w=f.padInfo.left,y=f.padInfo.top,b=n.data.get(i.dataId).values,x=n.data.get(o.dataId).values,S=new Ai(i.shape,i.dtype,b),C=new Ai(o.shape,o.dtype,x);for(let T=0;T<p;++T){const E=Math.max(0,Math.ceil((y-T)/h)),k=Math.min(f.outHeight,(f.inHeight+y-T)/h);for(let A=0;A<m;++A){const O=Math.max(0,Math.ceil((w-A)/g)),D=Math.min(f.outWidth,(f.inWidth+w-A)/g);for(let P=0;P<f.inChannels;++P)for(let N=0;N<f.outChannels;++N){let U=0;for(let L=0;L<f.batchSize;++L)for(let V=E;V<k;++V){const G=T+V*h-y;for(let Q=O;Q<D;++Q){const te=A+Q*g-w;v?U+=S.get(L,G,te,P)*C.get(L,V,Q,N):U+=S.get(L,P,G,te)*C.get(L,N,V,Q)}}_.set(U,T,A,P,N)}}}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const _1t={kernelName:rW,backendName:"cpu",kernelFunc:w1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S1t(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:o}=e,{inputShape:s,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r;mt([i,o],"conv2dBackpropInput");const d=_t(o.shape),f=_t(i.shape);let h=od(c);const g=Di(s,o.shape,a,1,l,u,!1,h),p=new Ai(g.inShape,"float32"),m=p.values,v=n.data.get(i.dataId).values,_=n.data.get(o.dataId).values,[w,y,b]=d,{batchSize:x,filterHeight:S,filterWidth:C,inChannels:T,inHeight:E,inWidth:k,outChannels:A,outHeight:O,outWidth:D,strideHeight:P,strideWidth:N}=g;h=g.dataFormat;const U=S-1-g.padInfo.top,L=C-1-g.padInfo.left,V=h==="channelsLast",G=p.strides[0],Q=V?p.strides[1]:p.strides[2],te=V?p.strides[2]:1,ne=V?1:p.strides[1],ee=f[0],re=V?f[1]:f[2],se=V?f[2]:1,me=V?1:f[1];for(let Me=0;Me<x;++Me)for(let de=0;de<T;++de)for(let Ce=0;Ce<E;++Ce){const Ee=Ce-U,q=Math.max(0,Math.ceil(Ee/P)),Ve=Math.min(O,(S+Ee)/P);for(let ze=0;ze<k;++ze){const Fe=ze-L,we=Math.max(0,Math.ceil(Fe/N)),Je=Math.min(D,(C+Fe)/N);let Z=0;for(let H=q;H<Ve;++H){const j=H*P-Ee;for(let ie=we;ie<Je;++ie){const z=ie*N-Fe,K=ee*Me+re*H+se*ie,F=w*(S-1-j)+y*(C-1-z)+b*de;for(let W=0;W<A;++W){const X=v[K+me*W],ae=_[F+W];Z+=X*ae}}}const ce=G*Me+Q*Ce+te*ze+ne*de;m[ce]=Z}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const C1t={kernelName:IO,backendName:"cpu",kernelFunc:S1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E1t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:o}=e,{strides:s,pad:a,dilations:l}=r;mt([i,o],"conv3d");const c=Wf(i.shape,o.shape,s,l,a),{filterDepth:u,filterHeight:d,filterWidth:f,dilationDepth:h,dilationHeight:g,dilationWidth:p,padInfo:m}=c,v=m.front,_=m.left,w=m.top,y=new Ai(c.outShape,i.dtype),b=n.data.get(i.dataId).values,x=n.data.get(o.dataId).values,S=y.values,C=_t(i.shape),T=_t(o.shape);for(let E=0;E<c.batchSize;++E){const k=E*C[0],A=E*y.strides[0];for(let O=0;O<c.outDepth;++O){const D=A+O*y.strides[1],P=O*c.strideDepth-v;for(let N=0;N<u;++N){const U=P+N*h;if(U<0||U>=c.inDepth)continue;const L=N*T[0],V=k+U*C[1];for(let G=0;G<c.outHeight;++G){const Q=D+G*y.strides[2],te=G*c.strideHeight-w;for(let ne=0;ne<d;++ne){const ee=te+ne*g;if(ee<0||ee>=c.inHeight)continue;const re=L+ne*T[1],se=V+ee*C[2];for(let me=0;me<c.outWidth;++me){const Me=Q+me*c.outChannels,de=me*c.strideWidth-_;for(let Ce=0;Ce<f;++Ce){const Ee=de+Ce*p;if(Ee<0||Ee>=c.inWidth)continue;const q=re+Ce*T[2],Ve=se+Ee*c.inChannels;let ze=q;for(let Fe=0;Fe<c.inChannels;++Fe){const we=b[Ve+Fe];for(let Je=0;Je<c.outChannels;++Je)S[Me+Je]+=we*x[ze+Je];ze+=c.outChannels}}}}}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const T1t={kernelName:OO,backendName:"cpu",kernelFunc:E1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k1t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:o}=e,{strides:s,pad:a,filterShape:l}=r;mt([i,o],"conv3dBackpropFilterV2");const c=_t(i.shape),u=_t(o.shape),d=Wf(i.shape,l,s,1,a),f=d.strideDepth,h=d.strideHeight,g=d.strideWidth,p=d.filterDepth,m=d.filterHeight,v=d.filterWidth,_=new Ai(d.filterShape,"float32"),w=_.values,[y,b,x,S]=_.strides,C=n.data.get(o.dataId).values,[T,E,k,A]=u,O=n.data.get(i.dataId).values,[D,P,N,U]=c,L=d.padInfo.front,V=d.padInfo.left,G=d.padInfo.top;for(let Q=0;Q<p;++Q){const te=Math.max(0,Math.ceil((L-Q)/f)),ne=Math.min(d.outDepth,(d.inDepth+L-Q)/f),ee=Q*y;for(let re=0;re<m;++re){const se=Math.max(0,Math.ceil((G-re)/h)),me=Math.min(d.outHeight,(d.inHeight+G-re)/h),Me=re*b+ee;for(let de=0;de<v;++de){const Ce=Math.max(0,Math.ceil((V-de)/g)),Ee=Math.min(d.outWidth,(d.inWidth+V-de)/g),q=de*x+Me;for(let Ve=0;Ve<d.inChannels;++Ve){const ze=Ve*S+q;for(let Fe=0;Fe<d.outChannels;++Fe){let we=0;for(let Je=0;Je<d.batchSize;++Je){const Z=Je*D,ce=Je*T;for(let H=te;H<ne;++H){const ie=(Q+H*f-L)*P+Z,z=H*E+ce;for(let K=se;K<me;++K){const W=(re+K*h-G)*N+ie,X=K*k+z;for(let ae=Ce;ae<Ee;++ae){const _e=(de+ae*g-V)*U+W,Be=ae*A+X;we+=O[_e+Ve]*C[Be+Fe]}}}}w[ze+Fe]=we}}}}}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const A1t={kernelName:iW,backendName:"cpu",kernelFunc:k1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M1t(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:o}=e,{pad:s,strides:a,inputShape:l}=r;mt([i],"conv3dBackpropInputV2");const c=_t(i.shape),u=_t(o.shape),d=Wf(l,o.shape,a,1,s),f=new Ai(d.inShape,"float32"),h=f.values,[g,p,m,v]=f.strides,_=n.data.get(i.dataId).values,[w,y,b,x]=c,S=n.data.get(o.dataId).values,[C,T,E,k]=u,{batchSize:A,filterDepth:O,filterHeight:D,filterWidth:P,inChannels:N,inDepth:U,inHeight:L,inWidth:V,outChannels:G,outDepth:Q,outHeight:te,outWidth:ne,strideDepth:ee,strideHeight:re,strideWidth:se}=d,me=O-1-d.padInfo.front,Me=D-1-d.padInfo.top,de=P-1-d.padInfo.left;for(let Ce=0;Ce<A;++Ce)for(let Ee=0;Ee<N;++Ee)for(let q=0;q<U;++q){const Ve=q-me,ze=Math.max(0,Math.ceil(Ve/ee)),Fe=Math.min(Q,(O+Ve)/ee);for(let we=0;we<L;++we){const Je=we-Me,Z=Math.max(0,Math.ceil(Je/re)),ce=Math.min(te,(D+Je)/re);for(let H=0;H<V;++H){const j=H-de,ie=Math.max(0,Math.ceil(j/se)),z=Math.min(ne,(P+j)/se);let K=0;for(let F=ze;F<Fe;++F){const W=F*ee-Ve;for(let X=Z;X<ce;++X){const ae=X*re-Je;for(let he=ie;he<z;++he){const _e=he*se-j,Be=w*Ce+y*F+b*X+x*he,Xe=C*(O-1-W)+T*(D-1-ae)+E*(P-1-_e)+k*Ee;for(let lt=0;lt<G;++lt){const tt=_[Be+lt],ye=S[Xe+lt];K+=tt*ye}}}}h[g*Ce+p*q+m*we+v*H+Ee]=K}}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}const I1t={kernelName:oW,backendName:"cpu",kernelFunc:M1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O1t=En(i1,t=>Math.cos(t)),R1t={kernelName:i1,backendName:"cpu",kernelFunc:O1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D1t=En(o1,t=>Math.cosh(t)),P1t={kernelName:o1,backendName:"cpu",kernelFunc:D1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N1t(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:o,boxInd:s}=e,{cropSize:a,method:l,extrapolationValue:c}=r,[u,d,f,h]=i.shape,g=o.shape[0],[p,m]=a,v=Vt([g,p,m,h],"float32"),_=n.data.get(o.dataId).values,w=n.data.get(s.dataId).values,y=n.data.get(i.dataId).values,b=_t(i.shape),x=_t(v.shape);for(let S=0;S<g;S++){const C=S*4,T=_[C],E=_[C+1],k=_[C+2],A=_[C+3],O=w[S];if(O>=u)continue;const D=p>1?(k-T)*(d-1)/(p-1):0,P=m>1?(A-E)*(f-1)/(m-1):0;for(let N=0;N<p;N++){const U=p>1?T*(d-1)+N*D:.5*(T+k)*(d-1);if(U<0||U>d-1){for(let L=0;L<m;L++)for(let V=0;V<h;V++){const G=V+L*x[2]+N*x[1]+S*x[0];v.values[G]=c}continue}if(l==="bilinear"){const L=Math.floor(U),V=Math.ceil(U),G=U-L;for(let Q=0;Q<m;Q++){const te=m>1?E*(f-1)+Q*P:.5*(E+A)*(f-1);if(te<0||te>f-1){for(let se=0;se<h;se++){const me=se+Q*x[2]+N*x[1]+S*x[0];v.values[me]=c}continue}const ne=Math.floor(te),ee=Math.ceil(te),re=te-ne;for(let se=0;se<h;se++){let me=se+ne*b[2]+L*b[1]+O*b[0];const Me=y[me];me=se+ee*b[2]+L*b[1]+O*b[0];const de=y[me];me=se+ne*b[2]+V*b[1]+O*b[0];const Ce=y[me];me=se+ee*b[2]+V*b[1]+O*b[0];const Ee=y[me],q=Me+(de-Me)*re,Ve=Ce+(Ee-Ce)*re;me=se+Q*x[2]+N*x[1]+S*x[0],v.values[me]=q+(Ve-q)*G}}}else for(let L=0;L<m;++L){const V=m>1?E*(f-1)+L*P:.5*(E+A)*(f-1);if(V<0||V>f-1){for(let te=0;te<h;te++){const ne=te+L*x[2]+N*x[1]+S*x[0];v.values[ne]=c}continue}const G=Math.round(V),Q=Math.round(U);for(let te=0;te<h;te++){const ne=te+G*b[2]+Q*b[1]+O*b[0],ee=te+L*x[2]+N*x[1]+S*x[0];v.values[ee]=y[ne]}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const $1t={kernelName:aW,backendName:"cpu",kernelFunc:N1t};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L1t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,exclusive:s,reverse:a}=r;mt(i,"cumprod");const l=cr([o],i.shape.length);let c=i;l!=null&&(c=$o({inputs:{x:i},backend:n,attrs:{perm:l}}));const u=Er(1,i.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=cs(c.dtype,"int32"),f=G4(Re(c.shape),d),h=n.data.get(c.dataId).values,g=c.shape[c.shape.length-1],p=a?(v,_)=>v+g-_-1:(v,_)=>v+_;for(let v=0;v<h.length;v+=g)for(let _=0;_<g;_++){const w=p(v,_);if(_===0)f[w]=s?1:h[w];else{const y=p(v,_-1);f[w]=s?h[y]*f[y]:h[w]*f[y]}}const m=n.makeTensorInfo(c.shape,d,f);if(l!=null){const v=Vf(l),_=$o({inputs:{x:m},backend:n,attrs:{perm:v}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(c),_}return m}const F1t={kernelName:sW,backendName:"cpu",kernelFunc:L1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B1t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,exclusive:s,reverse:a}=r;mt(i,"cumsum");const l=cr([o],i.shape.length);let c=i;l!=null&&(c=$o({inputs:{x:i},backend:n,attrs:{perm:l}}));const u=Er(1,i.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=cs(c.dtype,"int32"),f=Gi(Re(c.shape),d),h=n.data.get(c.dataId).values,g=c.shape[c.shape.length-1],p=a?(v,_)=>v+g-_-1:(v,_)=>v+_;for(let v=0;v<h.length;v+=g)for(let _=0;_<g;_++){const w=p(v,_);if(_===0)f[w]=s?0:h[w];else{const y=p(v,_-1);f[w]=s?h[y]+f[y]:h[w]+f[y]}}const m=n.makeTensorInfo(c.shape,d,f);if(l!=null){const v=Vf(l),_=$o({inputs:{x:m},backend:n,attrs:{perm:v}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(c),_}return m}const U1t={kernelName:RO,backendName:"cpu",kernelFunc:B1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z1t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:o}=e,{size:s,binaryOutput:a}=r;if(i.shape.length===1){const l=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values,u=bH(l,c,o.dtype,o.shape,s);return n.makeTensorInfo([s],o.dtype,u)}else if(i.shape.length===2){const l=n.bufferSync(i),c=n.bufferSync(o),u=Tpe(l,c,s,a);return n.makeTensorInfo(u.shape,o.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const j1t={kernelName:lW,backendName:"cpu",kernelFunc:z1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W1t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:o,dataFormat:s}=r;Y(s==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${s}`);const a=i.shape[0],l=i.shape[1],c=i.shape[2],u=i.shape[3],d=l*o,f=c*o,h=u/(o*o),g=n.data.get(i.dataId).values,p=new Float32Array(a*d*f*h);let m=0;for(let v=0;v<a;++v)for(let _=0;_<d;++_){const w=Math.floor(_/o),y=_%o;for(let b=0;b<f;++b){const x=Math.floor(b/o),S=b%o,C=(y*o+S)*h;for(let T=0;T<h;++T){const k=T+C+u*(x+c*(w+l*v));p[m++]=g[k]}}}return n.makeTensorInfo([a,d,f,h],i.dtype,p)}const V1t={kernelName:cW,backendName:"cpu",kernelFunc:W1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tme(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:o}=e,{strides:s,pad:a,dilations:l,dimRoundingMode:c}=r;mt([i,o],"depthwiseConv2DNative");const u=_t(i.shape),d=_t(o.shape);let f=l;f==null&&(f=[1,1]),Y(Xi(s,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${f}'`);const h=Di(i.shape,o.shape,s,f,a,c,!0),{filterHeight:g,filterWidth:p,dilationHeight:m,dilationWidth:v,padInfo:_}=h,w=_.left,y=_.top,b=h.outChannels/h.inChannels,x=new Ai(h.outShape,i.dtype),S=n.data.get(i.dataId).values,C=n.data.get(o.dataId).values,T=x.values;for(let E=0;E<h.batchSize;++E){const k=E*u[0],A=E*x.strides[0];for(let O=0;O<h.outHeight;++O){const D=A+O*x.strides[1],P=O*h.strideHeight-y;for(let N=0;N<g;++N){const U=P+N*m;if(U<0||U>=h.inHeight)continue;const L=N*d[0],V=k+U*u[1];for(let G=0;G<h.outWidth;++G){const Q=D+G*x.strides[2],te=G*h.strideWidth-w;for(let ne=0;ne<p;++ne){const ee=te+ne*v;if(ee<0||ee>=h.inWidth)continue;const re=L+ne*d[1],se=V+ee*h.inChannels;let me=Q,Me=re;for(let de=0;de<h.inChannels;++de){const Ce=S[se+de];for(let Ee=0;Ee<b;++Ee)T[me+Ee]+=Ce*C[Me+Ee];me+=b,Me+=b}}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const H1t={kernelName:DO,backendName:"cpu",kernelFunc:Tme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G1t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:o}=e,{strides:s,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r;mt([i,o],"depthwiseConv2dNativeBackpropFilter");const d=Di(i.shape,u,s,a,l,c,!0),{strideHeight:f,strideWidth:h,filterHeight:g,filterWidth:p}=d,m=new Ai(d.filterShape,"float32"),v=d.padInfo.left,_=d.padInfo.top,w=d.outChannels/d.inChannels,y=n.data.get(i.dataId).values,b=new Ai(i.shape,i.dtype,y),x=n.data.get(o.dataId).values,S=new Ai(o.shape,o.dtype,x);for(let C=0;C<g;++C){const T=Math.max(0,Math.ceil((_-C)/f)),E=Math.min(d.outHeight,(d.inHeight+_-C)/f);for(let k=0;k<p;++k){const A=Math.max(0,Math.ceil((v-k)/h)),O=Math.min(d.outWidth,(d.inWidth+v-k)/h);for(let D=0;D<d.outChannels;++D){const P=Math.trunc(D/w),N=D%w;let U=0;for(let L=0;L<d.batchSize;++L)for(let V=T;V<E;++V){const G=C+V*f-_;for(let Q=A;Q<O;++Q){const te=k+Q*h-v;U+=b.get(L,G,te,P)*S.get(L,V,Q,D)}}m.set(U,C,k,P,N)}}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const q1t={kernelName:uW,backendName:"cpu",kernelFunc:G1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X1t(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:o}=e,{strides:s,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r;mt([i,o],"depthwiseConv2DNativeBackpropInput");const d=_t(i.shape),f=_t(o.shape),h=Di(u,o.shape,s,a,l,c,!0),g=new Ai(h.inShape,"float32"),p=g.values,[m,v,_]=g.strides,w=n.data.get(i.dataId).values,[y,b,x]=d,S=n.data.get(o.dataId).values,[C,T,E]=f,{batchSize:k,filterHeight:A,filterWidth:O,inChannels:D,inHeight:P,inWidth:N,outChannels:U,outHeight:L,outWidth:V,strideHeight:G,strideWidth:Q}=h,te=A-1-h.padInfo.top,ne=O-1-h.padInfo.left,ee=U/D;for(let re=0;re<k;++re)for(let se=0;se<D;++se)for(let me=0;me<P;++me){const Me=me-te,de=Math.max(0,Math.ceil(Me/G)),Ce=Math.min(L,(A+Me)/G);for(let Ee=0;Ee<N;++Ee){const q=Ee-ne,Ve=Math.max(0,Math.ceil(q/Q)),ze=Math.min(V,(O+q)/Q);let Fe=0;for(let we=de;we<Ce;++we){const Je=we*G-Me;for(let Z=Ve;Z<ze;++Z){const ce=Z*Q-q,H=y*re+b*we+x*Z,j=C*(A-1-Je)+T*(O-1-ce)+E*se;for(let ie=0;ie<ee;++ie){const z=se*ee+ie,K=w[H+z],F=S[j+ie];Fe+=K*F}}}p[m*re+v*me+_*Ee+se]=Fe}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const K1t={kernelName:dW,backendName:"cpu",kernelFunc:X1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y1t(t){const{inputs:e,backend:n}=t,{x:r}=e,i=Re(r.shape),o=n.data.get(r.dataId).values,s=Vt([i,i],r.dtype),a=s.values;for(let c=0;c<o.length;c++)a[c*i+c]=o[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,s.dtype,s.values)}const Q1t={kernelName:Xce,backendName:"cpu",kernelFunc:Y1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z1t={kernelName:PO,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i}=t,{strides:o,pad:s,dilations:a}=n,l=e,c=l.data.get(r.dataId).values,u=r.shape.length,d=l.data.get(i.dataId).values,f=i.shape.length,{batchSize:h,inHeight:g,inWidth:p,inChannels:m,outHeight:v,outWidth:_,padInfo:w,strideHeight:y,strideWidth:b,filterHeight:x,filterWidth:S,dilationHeight:C,dilationWidth:T,outShape:E}=H1(r.shape,i.shape,o,s,"NHWC",a),k=Re(E),A=E.length,O=wr(r.dtype,k);for(let P=0;P<h;++P)for(let N=0;N<v;++N){const U=N*y-w.top;for(let L=0;L<_;++L){const V=L*b-w.left;for(let G=0;G<m;++G){let Q=Number.MIN_SAFE_INTEGER;for(let ne=0;ne<x;++ne){const ee=U+ne*C;if(ee>=0&&ee<g)for(let re=0;re<S;++re){const se=V+re*T;if(se>=0&&se<p){const me=Cc([P,ee,se,G],u,_t(r.shape)),Me=Cc([ne,re,G],f,_t(i.shape)),de=c[me]+d[Me];de>Q&&(Q=de)}}}const te=Cc([P,N,L,G],A,_t(E));O[te]=Q}}}return{dataId:l.write(lm(O,r.dtype),E,r.dtype),shape:E,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J1t={kernelName:c3,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:o}=t,{strides:s,pad:a,dilations:l}=n,c=e,u=xl(r.shape,c.data.get(r.dataId).values),d=xl(i.shape,c.data.get(i.dataId).values),{batchSize:f,inHeight:h,inWidth:g,inChannels:p,outHeight:m,outWidth:v,padInfo:_,strideHeight:w,strideWidth:y,filterHeight:b,filterWidth:x,dilationHeight:S,dilationWidth:C,outShape:T}=H1(r.shape,i.shape,s,a,"NHWC",l);Y(o.rank===T.length,()=>`Error in ${c3}, dy must have the same rank as output ${T.length}, but got ${o.rank}`);const E=xl(T,c.data.get(o.dataId).values),k=Vce(i.shape,i.dtype);for(let O=0;O<f;++O)for(let D=0;D<m;++D){const P=D*w-_.top;for(let N=0;N<v;++N){const U=N*y-_.left;for(let L=0;L<p;++L){let V=Number.MIN_SAFE_INTEGER,G=0,Q=0;for(let te=0;te<b;++te){const ne=P+te*S;if(ne>=0&&ne<h)for(let ee=0;ee<x;++ee){const re=U+ee*C;if(re>=0&&re<g){const se=u[O][ne][re][L]+d[te][ee][L];se>V&&(V=se,G=te,Q=ee)}}}k[G][Q][L]+=E[O][D][N][L]}}}return{dataId:c.write(lm(k,r.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eSt={kernelName:l3,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:o}=t,{strides:s,pad:a,dilations:l}=n,c=e,u=xl(r.shape,c.data.get(r.dataId).values),d=xl(i.shape,c.data.get(i.dataId).values),{batchSize:f,inHeight:h,inWidth:g,inChannels:p,outHeight:m,outWidth:v,padInfo:_,strideHeight:w,strideWidth:y,filterHeight:b,filterWidth:x,dilationHeight:S,dilationWidth:C,outShape:T}=H1(r.shape,i.shape,s,a,"NHWC",l);Y(o.rank===T.length,()=>`Error in ${l3}, dy must have the same rank as output ${T.length}, but got ${o.rank}`);const E=xl(T,c.data.get(o.dataId).values),k=Vce(r.shape,r.dtype);for(let O=0;O<f;++O)for(let D=0;D<m;++D){const P=D*w-_.top;for(let N=0;N<v;++N){const U=N*y-_.left;for(let L=0;L<p;++L){let V=Number.MIN_SAFE_INTEGER,G=P<0?0:P,Q=U<0?0:U;for(let te=0;te<b;++te){const ne=P+te*S;if(ne>=0&&ne<h)for(let ee=0;ee<x;++ee){const re=U+ee*C;if(re>=0&&re<g){const se=u[O][ne][re][L]+d[te][ee][L];se>V&&(V=se,G=ne,Q=re)}}}k[O][G][Q][L]+=E[O][D][N][L]}}}return{dataId:c.write(lm(k,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tSt(t){const{inputs:e,backend:n,attrs:r}=t,{image:i}=e,{canvas:o,options:s}=r,{contextOptions:a,imageOptions:l}=s||{},c=(l==null?void 0:l.alpha)||1,u=(a==null?void 0:a.contextType)||"2d";if(u!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const d=o.getContext(u,(a==null?void 0:a.contextAttributes)||{});if(d==null)throw new Error(`Could not get the context with ${u} type.`);const[f,h]=i.shape.slice(0,2),g=i.shape.length===2?1:i.shape[2],p=n.data.get(i.dataId).values,m=i.dtype==="float32"?255:1,v=new Uint8ClampedArray(h*f*4);for(let w=0;w<f*h;++w){const y=[0,0,0,255*c];for(let x=0;x<g;x++){const S=p[w*g+x];if(i.dtype==="float32"){if(S<0||S>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${S}.`)}else if(i.dtype==="int32"&&(S<0||S>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${S}.`);g===1?(y[0]=S*m,y[1]=S*m,y[2]=S*m):y[x]=S*m}const b=w*4;v[b+0]=Math.round(y[0]),v[b+1]=Math.round(y[1]),v[b+2]=Math.round(y[2]),v[b+3]=Math.round(y[3])}o.width=h,o.height=f;const _=new ImageData(v,h,f);return d.putImageData(_,0,0),i}const nSt={kernelName:mdt,backendName:"cpu",kernelFunc:tSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aS(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,keepDims:s}=r;mt(i,"sum");let a;i.dtype==="bool"?a=Tf({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):a=Uc({inputs:{x:i},backend:n});const l=a.shape.length,c=Gt(o,a.shape),u=cr(c,l);let d=c,f=a;u!=null&&(f=$o({inputs:{x:a},backend:n,attrs:{perm:u}}),d=Er(d.length,l)),Pi("sum",d,f.shape.length);const[h,g]=bi(f.shape,d),p=cs(f.dtype,"int32");let m=DA(n,h,p);const v=Re(g),_=n.data.get(m.dataId).values,w=n.data.get(f.dataId).values;for(let y=0;y<_.length;++y){const b=y*v;let x=0;for(let S=0;S<v;++S)x+=w[b+S];_[y]=x}if(s){const y=$r(m.shape,c),b=m;m=Un({inputs:{x:m},backend:n,attrs:{shape:y}}),n.disposeIntermediateTensorInfo(b)}return n.disposeIntermediateTensorInfo(a),u!=null&&n.disposeIntermediateTensorInfo(f),m}const rSt={kernelName:h2,backendName:"cpu",kernelFunc:aS};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iSt(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,o=e,{allDims:s,summedDims:a,idDims:l}=zV(i,o.length);WV(s.length,l,o);const{path:c,steps:u}=VV(a,l),d=u.length;let f=null,h=s.length;const g=[];for(let p=0;p<d;++p){for(const m of u[p]){const{permutationIndices:v,expandDims:_}=jV(h,l[m]);let w;HV(v)?w=o[m]:(w=$o({inputs:{x:o[m]},backend:n,attrs:{perm:v}}),g.push(w));const y=w.shape.slice();for(let b=0;b<_.length;++b)y.splice(_[b],0,1);mn(w.shape,y)||(w=Un({inputs:{x:w},backend:n,attrs:{shape:y}}),g.push(w)),f===null?f=w:(f=j2({inputs:{a:w,b:f},backend:n}),g.push(f))}p<d-1&&(c[p]>=0&&(f=aS({inputs:{x:f},backend:n,attrs:{axis:c[p]-(s.length-h),keepDims:!1}}),g.push(f)),h--)}for(const p of g)p!==f&&n.disposeIntermediateTensorInfo(p);return f}const oSt={kernelName:fW,backendName:"cpu",kernelFunc:iSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sSt(t){const{inputs:e,backend:n}=t,{dy:r,y:i}=e;mt([r,i],"eluGrad");const o=new Float32Array(Re(i.shape)),s=n.data.get(i.dataId).values,a=n.data.get(r.dataId).values;for(let l=0;l<s.length;++l){const c=s[l];c>=0?o[l]=a[l]:o[l]=a[l]*(c+1)}return n.makeTensorInfo(i.shape,"float32",o)}const aSt={kernelName:hW,backendName:"cpu",kernelFunc:sSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lSt=PV,cSt=NV,uSt=$V,dSt=LV,fSt=FV,hSt=BV,pSt=En(l1,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+lSt*n);return e*(1-((((hSt*r+fSt)*r+dSt)*r+uSt)*r+cSt)*r*Math.exp(-n*n))}),mSt={kernelName:l1,backendName:"cpu",kernelFunc:pSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $A(t){const{inputs:e,backend:n,attrs:r}=t,{input:i}=e,{dim:o}=r,s=i.shape.length,a=i.shape.slice();let l=o;return o<0&&(Y(-(s+1)<=o,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+o+1),a.splice(l,0,1),Un({inputs:{x:i},backend:n,attrs:{shape:a}})}const gSt={kernelName:$O,backendName:"cpu",kernelFunc:$A};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vSt=kr((t,e)=>t/e),EH=Jr(s1,vSt),N3={kernelName:s1,backendName:"cpu",kernelFunc:EH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kme(t,e,n){const r=t.shape,i=r[0],o=r[1],s=n.data.get(t.dataId),a=s.complexTensorInfos.real,l=s.complexTensorInfos.imag,c=[i,o],u=Re(c),d=Hi("float32",u),f=Hi("float32",u);for(let m=0;m<i;m++){const v=Kp({inputs:{x:a},backend:n,attrs:{begin:[m,0],size:[1,o]}}),_=Kp({inputs:{x:l},backend:n,attrs:{begin:[m,0],size:[1,o]}}),w=qo({inputs:{real:v,imag:_},backend:n}),{real:y,imag:b}=ySt(w,e,n),x=Hu(y,b);for(let S=0;S<o;S++){const C=UV(x,S);d[m*o+S]=C.real,f[m*o+S]=C.imag}n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(_),n.disposeIntermediateTensorInfo(w)}const h=n.makeTensorInfo(c,"float32",d),g=n.makeTensorInfo(c,"float32",f),p=qo({inputs:{real:h,imag:g},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g),p}function ySt(t,e,n){const r=Re(t.shape),i=n.data.get(t.dataId),o=n.data.get(i.complexTensorInfos.real.dataId).values,s=n.data.get(i.complexTensorInfos.imag.dataId).values;if(bSt(r)){const a=$3(o,s,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const c=n.makeTensorInfo(l,"float32",a.real),u=n.makeTensorInfo(l,"float32",a.imag),d=n.makeTensorInfo([],"float32",zf(r,"float32")),f=Uc({inputs:{x:d},backend:n}),h=N3.kernelFunc({inputs:{a:c,b:d},backend:n}),g=N3.kernelFunc({inputs:{a:u,b:f},backend:n}),p=n.data.get(h.dataId).values,m=n.data.get(g.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g),{real:p,imag:m}}return a}else{const a=Hu(o,s),l=xSt(a,r,e);return jde(l)}}function bSt(t){return(t&t-1)===0}function $3(t,e,n,r,i){if(n===1)return{real:t,imag:e};const o=Hu(t,e),s=n/2,a=Wde(o),l=a.real,c=a.imag,u=[l.length],d=i.makeTensorInfo(u,"float32",l),f=i.makeTensorInfo(u,"float32",c),h=qo({inputs:{real:d,imag:f},backend:i}),g=Vde(o),p=g.real,m=g.imag,v=[p.length],_=i.makeTensorInfo(v,"float32",p),w=i.makeTensorInfo(v,"float32",m),y=qo({inputs:{real:_,imag:w},backend:i}),b=$3(l,c,s,r,i),x=b.real,S=b.imag,C=[x.length],T=i.makeTensorInfo(C,"float32",x),E=i.makeTensorInfo(C,"float32",S),k=qo({inputs:{real:T,imag:E},backend:i}),A=$3(p,m,s,r,i),O=A.real,D=A.imag,P=[O.length],N=i.makeTensorInfo(P,"float32",O),U=i.makeTensorInfo(P,"float32",D),L=qo({inputs:{real:N,imag:U},backend:i}),V=Gde(n,r),G=[V.real.length],Q=i.makeTensorInfo(G,"float32",V.real),te=i.makeTensorInfo(G,"float32",V.imag),ne=qo({inputs:{real:Q,imag:te},backend:i}),ee=j2({inputs:{a:ne,b:L},backend:i}),re=fy({inputs:{a:k,b:ee},backend:i}),se=SH({inputs:{a:k,b:ee},backend:i}),me=Xp({inputs:{input:re},backend:i}),Me=Xp({inputs:{input:se},backend:i}),de=hy({inputs:{input:re},backend:i}),Ce=hy({inputs:{input:se},backend:i}),Ee=py({inputs:[me,Me],backend:i,attrs:{axis:0}}),q=py({inputs:[de,Ce],backend:i,attrs:{axis:0}}),Ve=i.data.get(Ee.dataId).values,ze=i.data.get(q.dataId).values;return i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(f),i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(_),i.disposeIntermediateTensorInfo(w),i.disposeIntermediateTensorInfo(y),i.disposeIntermediateTensorInfo(T),i.disposeIntermediateTensorInfo(E),i.disposeIntermediateTensorInfo(k),i.disposeIntermediateTensorInfo(N),i.disposeIntermediateTensorInfo(U),i.disposeIntermediateTensorInfo(L),i.disposeIntermediateTensorInfo(Q),i.disposeIntermediateTensorInfo(te),i.disposeIntermediateTensorInfo(ne),i.disposeIntermediateTensorInfo(ee),i.disposeIntermediateTensorInfo(re),i.disposeIntermediateTensorInfo(se),i.disposeIntermediateTensorInfo(me),i.disposeIntermediateTensorInfo(de),i.disposeIntermediateTensorInfo(Me),i.disposeIntermediateTensorInfo(Ce),i.disposeIntermediateTensorInfo(Ee),i.disposeIntermediateTensorInfo(q),{real:Ve,imag:ze}}function xSt(t,e,n){const r=new Float32Array(e*2);for(let i=0;i<e;i++){let o=0,s=0;for(let a=0;a<e;a++){const l=qde(i*a,e,n),c=UV(t,a);o+=c.real*l.real-c.imag*l.imag,s+=c.real*l.imag+c.imag*l.real}n&&(o/=e,s/=e),Hde(r,o,s,i)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wSt(t){const{inputs:e,backend:n}=t,{input:r}=e,i=Re(r.shape),o=r.shape[r.shape.length-1],s=i/o,a=Un({inputs:{x:r},backend:n,attrs:{shape:[s,o]}}),l=kme(a,!1,n),c=Un({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const _St={kernelName:pW,backendName:"cpu",kernelFunc:wSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TH(t){const{backend:e,attrs:n}=t,{shape:r,value:i,dtype:o}=n,s=o||Jy(i),a=wr(s,Re(r));return CSt(a,i,s),e.makeTensorInfo(r,s,a)}const SSt={kernelName:mW,backendName:"cpu",kernelFunc:TH};function CSt(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ESt={kernelName:gW,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,i=n,o=Hi(r.dtype,Re(r.shape)),[s,a,l,c]=r.shape,u=i.data.get(r.dataId).values;for(let f=0;f<s;f++){const h=f*l*a*c;for(let g=0;g<a;g++){const p=g*(l*c);for(let m=0;m<l;m++){const v=m*c;for(let _=0;_<c;_++){const w=Math.round(l-m-1),y=h+p+v+_;let b=u[y];if(w>=0&&w<l){const x=w*c,S=h+p+x+_;b=u[S]}o[y]=b}}}}return{dataId:i.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TSt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:o,bias:s,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:g}=r;let p=Eme({inputs:{x:i,filter:o},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f}});if(s){const m=p;if(u==="NCHW"&&s.shape.length===1&&s.shape[0]!==1){const v=Un({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});p=fy({inputs:{a:p,b:v},backend:n}),n.disposeIntermediateTensorInfo(v)}else p=fy({inputs:{a:p,b:s},backend:n});n.disposeIntermediateTensorInfo(m)}if(h){const m=p;if(u==="NCHW"&&h==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const v=Un({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});p=NA(n,p,h,v,g),n.disposeIntermediateTensorInfo(v)}else p=NA(n,p,h,a,g);n.disposeIntermediateTensorInfo(m)}return p}const kSt={kernelName:hA,backendName:"cpu",kernelFunc:TSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ASt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:o,bias:s,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:g}=r;let p=Tme({inputs:{x:i,filter:o},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f}});if(s){const m=p;p=fy({inputs:{a:p,b:s},backend:n}),n.disposeIntermediateTensorInfo(m)}if(h){const m=p;p=NA(n,p,h,a,g),n.disposeIntermediateTensorInfo(m)}return p}const MSt={kernelName:hue,backendName:"cpu",kernelFunc:ASt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ISt(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,o=Re(r.shape),s=i.shape,a=s[s.length-1],[l,c,u,d]=SV(r,i);if(c===0)return n.makeTensorInfo(l,r.dtype,[]);const f=n.data.get(i.dataId).values,h=n.bufferSync(r),g=Lpe(f,h,r.dtype,c,a,u,d,r.shape,o);return n.makeTensorInfo(l,r.dtype,g.values)}const OSt={kernelName:Kce,backendName:"cpu",kernelFunc:ISt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RSt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:o}=e,{axis:s,batchDims:a}=r;mt([i,o],"gatherV2");const l=Gt(s,i.shape)[0],c=n.data.get(o.dataId).values,u=i.shape[l];for(let y=0;y<c.length;++y){const b=c[y];Y(b<=u-1&&b>=0,()=>`GatherV2: the index value ${b} is not in [0, ${u-1}]`)}let d=a;a==null&&(d=0);const f=Re(o.shape),h=qV(i,o,l,d),g=Un({inputs:{x:i},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),p=Un({inputs:{x:o},backend:n,attrs:{shape:[h.batchSize,f/h.batchSize]}}),m=[h.batchSize,h.outerSize,f/h.batchSize,h.sliceSize],v=n.bufferSync(p),_=n.bufferSync(g),w=Fpe(_,v,m);return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(p),n.makeTensorInfo(h.outputShape,w.dtype,w.values)}const DSt={kernelName:FO,backendName:"cpu",kernelFunc:RSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PSt(t){const{inputs:e,backend:n}=t,{input:r}=e,i=Re(r.shape),o=r.shape[r.shape.length-1],s=i/o,a=Un({inputs:{x:r},backend:n,attrs:{shape:[s,o]}}),l=kme(a,!0,n),c=Un({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const NSt={kernelName:vW,backendName:"cpu",kernelFunc:PSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $St=En(m1,t=>Number.isFinite(t)?1:0,"bool"),LSt={kernelName:m1,backendName:"cpu",kernelFunc:$St};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FSt=En(g1,t=>Math.abs(t)===1/0?1:0,"bool"),BSt={kernelName:g1,backendName:"cpu",kernelFunc:FSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const USt=En(v1,t=>Number.isNaN(t)?1:0,"bool"),zSt={kernelName:v1,backendName:"cpu",kernelFunc:USt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jSt(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:o}=n,s=Wpe(r,i,o);return e.makeTensorInfo([s.length],"float32",s)}const WSt={kernelName:Yce,backendName:"cpu",kernelFunc:jSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VSt=En(b1,t=>Math.log1p(t)),HSt={kernelName:b1,backendName:"cpu",kernelFunc:VSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GSt=kr((t,e)=>t&&e),qSt=Jr(WO,GSt,null,"bool"),XSt={kernelName:WO,backendName:"cpu",kernelFunc:qSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KSt=En(VO,t=>t?0:1,"bool"),YSt={kernelName:VO,backendName:"cpu",kernelFunc:KSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QSt=kr((t,e)=>t||e),ZSt=Jr(HO,QSt,null,"bool"),JSt={kernelName:HO,backendName:"cpu",kernelFunc:ZSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eCt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:o,bias:s,alpha:a,beta:l}=r;mt(i,"LRN");const c=i.shape[3],u=c-1,d=n.data.get(i.dataId).values,f=Re(i.shape),h=new Float32Array(f);function g(p){const m=p%c;let v=p-m+Math.max(0,m-o);const _=p-m+Math.min(m+o,u);let w=0;for(;v<=_;v++){const y=d[v];w+=y*y}return w}for(let p=0;p<f;p++){const m=g(p),v=d[p]*Math.pow(s+a*m,-l);h[p]=v}return n.makeTensorInfo(i.shape,i.dtype,h)}const tCt={kernelName:GO,backendName:"cpu",kernelFunc:eCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nCt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,y:o,dy:s}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=r;mt(s,"LRNGrad");const d=Re(s.shape),f=s.shape[3],h=n.data.get(s.dataId).values,g=n.data.get(i.dataId).values,p=n.data.get(o.dataId).values,m=new Float32Array(d),v=d;for(let _=0;_<v;_++){const w=_%f,y=_-w+Math.max(0,w-a),b=_-w+Math.min(f,w+a+1);let x=0;for(let S=y;S<b;S++)x+=Math.pow(g[S],2);x=c*x+l;for(let S=y;S<b;S++){let C=-2*c*u*g[S]*p[_]/x;_===S&&(C+=Math.pow(x,-u)),C*=h[_],m[S]+=C}}return n.makeTensorInfo(s.shape,i.dtype,m)}const rCt={kernelName:bW,backendName:"cpu",kernelFunc:nCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ame(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:o,keepDims:s}=r,a=n;let l=i.shape;const c=l.length,u=Gt(o,l);let d=u;const f=cr(d,c);let h=a.data.get(i.dataId).values;if(f!=null){const y=new Array(c);for(let b=0;b<y.length;b++)y[b]=l[f[b]];h=wH(h,l,i.dtype,f,y),d=Er(d.length,c),l=y}mt(i,"max"),Pi("max",d,c);const[g,p]=bi(l,d),m=Re(p),v=Hpe(h,m,g,i.dtype),_=a.write(v,g,i.dtype);let w=g;return s&&(w=$r(g,u)),{dataId:_,shape:w,dtype:i.dtype}}const iCt={kernelName:qO,backendName:"cpu",kernelFunc:Ame};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oCt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;mt(i,"maxPool");const{filterSize:o,strides:s,pad:a,dimRoundingMode:l}=r,c=1;Y(Xi(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const u=ja(i.shape,o,s,c,a,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&mn(u.inShape,u.outShape))d=Uc({inputs:{x:i},backend:n});else{const f=n.data.get(i.dataId).values,h=_t(i.shape),g=CH(f,i.shape,i.dtype,h,u,"max");d=n.makeTensorInfo(u.outShape,i.dtype,g.values)}return d}const sCt={kernelName:XO,backendName:"cpu",kernelFunc:oCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aCt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:o,strides:s,pad:a,dimRoundingMode:l,dataFormat:c}=r;mt(i,"maxPool3d");const u=id(i.shape,o,s,1,a,l,c),d=n.data.get(i.dataId).values,f=Cme(d,i.shape,i.dtype,_t(i.shape),u,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}const lCt={kernelName:KO,backendName:"cpu",kernelFunc:aCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cCt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:o}=e,{filterSize:s,strides:a,pad:l,dimRoundingMode:c}=r;mt([i,o],"maxPool3DGrad");const u=id(o.shape,s,a,1,l,c),d=n.bufferSync(o),f=Q_t(d,u),h=u.strideDepth,g=u.strideHeight,p=u.strideWidth,m=u.dilationDepth,v=u.dilationHeight,_=u.dilationWidth,w=u.effectiveFilterDepth,y=u.effectiveFilterHeight,b=u.effectiveFilterWidth,x=w-1-u.padInfo.front,S=b-1-u.padInfo.left,C=y-1-u.padInfo.top,T=Vt(o.shape,"float32"),E=n.bufferSync(i);for(let k=0;k<u.batchSize;++k)for(let A=0;A<u.inChannels;++A)for(let O=0;O<u.inDepth;++O)for(let D=0;D<u.inHeight;++D)for(let P=0;P<u.inWidth;++P){const N=O-x,U=D-C,L=P-S;let V=0;for(let G=0;G<w;G+=m){const Q=(N+G)/h;if(!(Q<0||Q>=u.outDepth||Math.floor(Q)!==Q))for(let te=0;te<y;te+=v){const ne=(U+te)/g;if(!(ne<0||ne>=u.outHeight||Math.floor(ne)!==ne))for(let ee=0;ee<b;ee+=_){const re=(L+ee)/p;if(re<0||re>=u.outWidth||Math.floor(re)!==re)continue;const se=w*y*b-1-f.get(k,Q,ne,re,A),me=G*y*b+te*b+ee,Me=se===me?1:0;if(Me===0)continue;const de=E.get(k,Q,ne,re,A);V+=de*Me}}}T.set(V,k,O,D,P,A)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}const uCt={kernelName:wW,backendName:"cpu",kernelFunc:cCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dCt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:o,output:s}=e,a=o;mt([o,s],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,f=ja(a.shape,l,c,1,u,d),h=n.data.get(a.dataId).values,g=Vt(f.outShape,a.dtype,Sme(h,a.shape,a.dtype,f).values),p=f.strideHeight,m=f.strideWidth,v=f.dilationHeight,_=f.dilationWidth,w=f.effectiveFilterHeight,y=f.effectiveFilterWidth,b=y-1-f.padInfo.left,x=w-1-f.padInfo.top,S=Vt(a.shape,"float32"),C=n.data.get(i.dataId).values,T=Vt(i.shape,"float32",C);for(let E=0;E<f.batchSize;++E)for(let k=0;k<f.inChannels;++k)for(let A=0;A<f.inHeight;++A)for(let O=0;O<f.inWidth;++O){const D=A-x,P=O-b;let N=0;for(let U=0;U<w;U+=v){const L=(D+U)/p;if(!(L<0||L>=f.outHeight||Math.floor(L)!==L))for(let V=0;V<y;V+=_){const G=(P+V)/m;if(G<0||G>=f.outWidth||Math.floor(G)!==G)continue;const Q=w*y-1-g.get(E,L,G,k),te=U*y+V,ne=Q===te?1:0;if(ne===0)continue;const ee=T.get(E,L,G,k);N+=ee*ne}}S.set(N,E,A,O,k)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const fCt={kernelName:xW,backendName:"cpu",kernelFunc:dCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hCt(t,e,n,r,i){const o=_t(e),s=CH(t,e,n,o,i,"max"),a=Sme(t,e,n,i,!0,r);return[s.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pCt={kernelName:Qce,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:o,pad:s,includeBatchInIndex:a}=e,l=n;mt(r,"MaxPoolWithArgmax");const c=l.data.get(r.dataId).values,u=ja(r.shape,i,o,[1,1],s),[d,f]=hCt(c,r.shape,r.dtype,a,u),h=l.write(d,u.outShape,r.dtype),g=l.write(f,u.outShape,r.dtype);return[{dataId:h,shape:u.outShape,dtype:r.dtype},{dataId:g,shape:u.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mCt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,keepDims:s}=r,a=Gt(o,i.shape),c=bi(i.shape,a)[1],u=Re(c),d=[],f=n.makeTensorInfo([],"float32",new Float32Array([u]));d.push(f);const h=Tf({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});d.push(h);const g=EH({inputs:{a:h,b:f},backend:n});d.push(g);const p=aS({inputs:{x:g},backend:n,attrs:{axis:o,keepDims:s}});return d.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const gCt={kernelName:YO,backendName:"cpu",kernelFunc:mCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vCt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,keepDims:s}=r;mt(i,"min");const a=Gt(o,i.shape);let l=a;const c=cr(l,i.shape.length);let u=i;c!=null&&(u=$o({inputs:{x:i},backend:n,attrs:{perm:c}}),l=Er(l.length,i.shape.length)),Pi("min",l,u.shape.length);const[d,f]=bi(u.shape,l),h=Re(f),g=Gi(Re(d),u.dtype),p=n.data.get(u.dataId).values;for(let v=0;v<g.length;++v){const _=v*h;let w=p[_];for(let y=0;y<h;++y){const b=p[_+y];(Number.isNaN(b)||b<w)&&(w=b)}g[v]=w}c!=null&&n.disposeIntermediateTensorInfo(u);const m=n.makeTensorInfo(d,u.dtype,g);if(s){const v=$r(d,a),_=Un({inputs:{x:m},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(m),_}return m}const yCt={kernelName:QO,backendName:"cpu",kernelFunc:vCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bCt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:o,mode:s}=r;mt(i,"mirrorPad");const a=o.map((w,y)=>w[0]+i.shape[y]+w[1]),l=o.map(w=>w[0]),c=o.map((w,y)=>w[0]+i.shape[y]),u=s==="reflect"?0:1,d=n.data.get(i.dataId).values,f=i.shape.length,h=_t(i.shape),g=Re(a),p=a.length,m=_t(a),v=Hi(i.dtype,g);for(let w=0;w<g;w++){let y=e0(w,p,m);for(let x=0;x<p;x++)y[x]<l[x]?y[x]=l[x]*2-y[x]-u:y[x]>=c[x]&&(y[x]=(c[x]-1)*2-y[x]+u);y=y.map((x,S)=>x-l[S]);const b=Cc(y,f,h);v[w]=d[b]}return{dataId:n.write(v,a,i.dtype),shape:a,dtype:i.dtype}}const xCt={kernelName:ZO,backendName:"cpu",kernelFunc:bCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wCt=kr((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),_Ct=Jr(_1,wCt),SCt={kernelName:_1,backendName:"cpu",kernelFunc:_Ct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mme(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:o}=r,s=i.shape.length;let a=o;if(a===-1&&(a=s-1),a!==s-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${s} and dim was ${a}`);const l=Gt([a],i.shape),c=Ame({inputs:{x:i},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=$r(c.shape,l),d=Un({inputs:{x:c},backend:n,attrs:{shape:u}}),f=SH({inputs:{a:i,b:d},backend:n}),h=Dpe({inputs:{x:f},backend:n}),g=aS({inputs:{x:h},backend:n,attrs:{axis:l,keepDims:!1}}),p=Un({inputs:{x:g},backend:n,attrs:{shape:u}}),m=EH({inputs:{a:h,b:p},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(p),m}const CCt={kernelName:g2,backendName:"cpu",kernelFunc:Mme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ECt(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:o,seed:s,normalized:a}=r;mt(i,"multinomial");const l=a?i:Mme({inputs:{logits:i},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=n.data.get(l.dataId).values,f=[c,o],h=Gi(Re(f),"int32");for(let g=0;g<c;++g){const p=g*u,m=new Float32Array(u-1);m[0]=d[p];for(let w=1;w<m.length;++w)m[w]=m[w-1]+d[p+w];const v=lV.alea(s.toString()),_=g*o;for(let w=0;w<o;++w){const y=v();h[_+w]=m.length;for(let b=0;b<m.length;b++)if(y<m[b]){h[_+w]=b;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(f,"int32",h)}const TCt={kernelName:Zce,backendName:"cpu",kernelFunc:ECt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kCt=vV;function ACt(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:o}=e,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l}=r;mt(i,"NonMaxSuppression");const c=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,{selectedIndices:d}=kCt(c,u,s,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const MCt={kernelName:_W,backendName:"cpu",kernelFunc:ACt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ICt=yV;function OCt(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:o}=e,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r;mt(i,"NonMaxSuppressionPadded");const u=n.data.get(i.dataId).values,d=n.data.get(o.dataId).values,{selectedIndices:f,validOutputs:h}=ICt(u,d,s,a,l,c);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const RCt={kernelName:SW,backendName:"cpu",kernelFunc:OCt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DCt=bV;function PCt(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:o}=e,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r;mt(i,"NonMaxSuppressionWithScore");const u=n.data.get(i.dataId).values,d=n.data.get(o.dataId).values,f=s,h=a,g=l,p=c,{selectedIndices:m,selectedScores:v}=DCt(u,d,f,h,g,p);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}const NCt={kernelName:CW,backendName:"cpu",kernelFunc:PCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ct(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:o,depth:s,onValue:a,offValue:l}=r;mt(i,"oneHot");const c=Re(i.shape),u=new Float32Array(c*s);u.fill(l);const d=n.data.get(i.dataId).values;for(let f=0;f<c;++f)d[f]>=0&&d[f]<s&&(u[f*s+d[f]]=a);return n.makeTensorInfo([...i.shape,s],o,u)}const LCt={kernelName:n2,backendName:"cpu",kernelFunc:$Ct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LA(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const i=Xp({inputs:{input:r},backend:n}),o=LA({inputs:{x:i},backend:n}),s=hy({inputs:{input:r},backend:n}),a=LA({inputs:{x:s},backend:n}),l=qo({inputs:{real:o,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),l}else return TH({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const FCt={kernelName:b2,backendName:"cpu",kernelFunc:LA};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ime(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const i=Xp({inputs:{input:r},backend:n}),o=Ime({inputs:{x:i},backend:n}),s=hy({inputs:{input:r},backend:n}),a=LA({inputs:{x:s},backend:n}),l=qo({inputs:{real:o,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),l}else return TH({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const BCt={kernelName:t2,backendName:"cpu",kernelFunc:Ime};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ome(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return $A({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const o=e[0].shape,s=e[0].dtype;e.forEach(u=>{V4(o,u.shape,"All tensors passed to stack must have matching shapes"),Y(s===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const d=$A({inputs:{input:u},backend:n,attrs:{dim:i}});return a.push(d),d}),c=py({inputs:l,backend:n,attrs:{axis:i}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const UCt={kernelName:r2,backendName:"cpu",kernelFunc:Ome};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zCt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:o,constantValue:s}=r;mt(i,"pad");const a=o.map((_,w)=>_[0]+i.shape[w]+_[1]),l=o.map(_=>_[0]),c=n.data.get(i.dataId).values,u=Re(i.shape),d=i.shape.length,f=_t(i.shape),h=Re(a),g=a.length,p=_t(a),m=Hi(i.dtype,h);s!==0&&m.fill(s);for(let _=0;_<u;_++){const y=e0(_,d,f).map((x,S)=>x+l[S]),b=Cc(y,g,p);m[b]=c[_]}return{dataId:n.write(m,a,i.dtype),shape:a,dtype:i.dtype}}const Rme={kernelName:i2,backendName:"cpu",kernelFunc:zCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jCt=kr((t,e)=>Math.pow(t,e)),WCt=Jr(C1,jCt),VCt={kernelName:C1,backendName:"cpu",kernelFunc:WCt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HCt(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:o,indices:s}=e,a=i.map(m=>n.data.get(m.dataId).values),l=i.map(m=>m.shape),c=n.data.get(o.dataId).values,u=n.data.get(s.dataId).values,[d,f,h]=Qpe(a,l,c,o.shape,o.dtype,u,s.shape),g=d.map(m=>n.makeTensorInfo([m.length],"int32",m)),p=n.makeTensorInfo(h,o.dtype,f);return g.concat([p])}const GCt={kernelName:Jce,backendName:"cpu",kernelFunc:HCt};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qCt(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:o}=e,s=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,[c,u]=Zpe(s,r.shape,r.dtype,a,i.shape,l,o.shape),d=n.makeTensorInfo([c.length],"int32",c),f=n.makeTensorInfo([u.length],r.dtype,u);return[d,f]}const XCt={kernelName:eue,backendName:"cpu",kernelFunc:qCt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KCt(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:o,defaultValue:s,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,d=n.data.get(s.dataId).values,f=a.map(m=>n.data.get(m.dataId).values),h=a.map(m=>m.shape),[g,p]=Jpe(c,i.shape,u,o.shape,o.dtype,d,s.shape,f,h,l);return n.makeTensorInfo(g,o.dtype,p)}const YCt={kernelName:tue,backendName:"cpu",kernelFunc:KCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QCt(t){const{backend:e,attrs:n}=t,{start:r,stop:i,dtype:o,step:s}=n,a=eme(r,i,s,o);return e.makeTensorInfo([a.length],o,a)}const ZCt={kernelName:EW,backendName:"cpu",kernelFunc:QCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JCt=En(E1,t=>1/t),eEt={kernelName:E1,backendName:"cpu",kernelFunc:JCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tEt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:o,halfPixelCenters:s,size:a}=r;mt(i,"resizeBilinear");const l=_t(i.shape),[c,u]=a,[d,f,h,g]=i.shape,p=n.data.get(i.dataId).values,m=new Float32Array(Re([d,c,u,g])),v=[o&&c>1?f-1:f,o&&u>1?h-1:h],_=[o&&c>1?c-1:c,o&&u>1?u-1:u];let w=0;const y=v[0]/_[0],b=v[1]/_[1];for(let x=0;x<d;x++)for(let S=0;S<c;S++){let C;s?C=y*(S+.5)-.5:C=y*S;const T=Math.max(0,Math.floor(C)),E=C-T,k=Math.min(f-1,Math.ceil(C)),A=x*l[0]+T*l[1],O=x*l[0]+k*l[1];for(let D=0;D<u;D++){let P;s?P=b*(D+.5)-.5:P=b*D;const N=Math.max(0,Math.floor(P)),U=P-N,L=Math.min(h-1,Math.ceil(P)),V=A+N*l[2],G=O+N*l[2],Q=A+L*l[2],te=O+L*l[2];for(let ne=0;ne<g;ne++){const ee=p[V+ne],re=p[G+ne],se=p[Q+ne],me=p[te+ne],Me=ee+(se-ee)*U,de=re+(me-re)*U,Ce=Me+(de-Me)*E;m[w++]=Ce}}}return n.makeTensorInfo([d,c,u,g],"float32",m)}const nEt={kernelName:c2,backendName:"cpu",kernelFunc:tEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rEt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:o}=e,{alignCorners:s}=r;mt([o,i],"resizeBilinearGrad");const a=_t(i.shape),[l,c,u,d]=i.shape,[,f,h]=o.shape,g=new Float32Array(l*c*u*d),p=[s&&f>1?c-1:c,s&&h>1?u-1:u],m=[s&&f>1?f-1:f,s&&h>1?h-1:h],v=p[0]/m[0],_=p[1]/m[1],w=n.data.get(o.dataId).values;let y=0;for(let b=0;b<l;b++){const x=b*a[0];for(let S=0;S<f;S++){const C=S*v,T=Math.floor(C),E=Math.min(Math.ceil(C),c-1),k=x+T*a[1],A=x+E*a[1],O=C-T,D=1-O;for(let P=0;P<h;P++){const N=P*_,U=Math.floor(N),L=Math.min(Math.ceil(N),u-1),V=N-U,G=1-V,Q=k+U*a[2],te=k+L*a[2],ne=A+U*a[2],ee=A+L*a[2],re=D*G,se=D*V,me=O*G,Me=O*V;for(let de=0;de<d;de++){const Ce=w[y++];g[Q+de]+=Ce*re,g[te+de]+=Ce*se,g[ne+de]+=Ce*me,g[ee+de]+=Ce*Me}}}}return n.makeTensorInfo([l,u,c,d],"float32",g)}const iEt={kernelName:AW,backendName:"cpu",kernelFunc:rEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oEt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:o,halfPixelCenters:s,size:a}=r;mt(i,"resizeNearestNeighbor");const l=_t(i.shape),[c,u]=a,[d,f,h,g]=i.shape,p=n.data.get(i.dataId).values,m=new Float32Array(d*c*u*g),v=[o&&c>1?f-1:f,o&&u>1?h-1:h],_=[o&&c>1?c-1:c,o&&u>1?u-1:u],w=v[0]/_[0],y=v[1]/_[1];let b=0;for(let x=0;x<d;x++){const S=x*l[0];for(let C=0;C<c;C++){const T=s?w*(C+.5):w*C;let E=Math.min(f-1,o?Math.round(T):Math.floor(T));s&&(E=Math.max(0,E));const k=S+E*l[1];for(let A=0;A<u;A++){const O=s?y*(A+.5):y*A;let D=Math.min(h-1,o?Math.round(O):Math.floor(O));s&&(D=Math.max(0,D));const P=k+D*l[2];for(let N=0;N<g;N++){const U=p[P+N];m[b++]=U}}}}return n.makeTensorInfo([d,c,u,g],i.dtype,m)}const sEt={kernelName:l2,backendName:"cpu",kernelFunc:oEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aEt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:o}=e,{alignCorners:s}=r;mt([o,i],"resizeNearestNeighborGrad");const a=_t(i.shape),l=_t(o.shape),[c,u,d,f]=i.shape,[,h,g]=o.shape,p=new Float32Array(c*u*d*f),m=n.data.get(o.dataId).values,v=[s&&h>1?u-1:u,s&&g>1?d-1:d],_=[s&&h>1?h-1:h,s&&g>1?g-1:g],w=v[0]/_[0],y=v[1]/_[1],b=1/w,x=1/y,S=Math.ceil(b)*2+2,C=Math.ceil(x)*2+2;for(let T=0;T<c;T++){const E=T*a[0];for(let k=0;k<u;k++){const A=E+k*a[1],O=Math.floor(k*b),D=Math.floor(O-S/2);for(let P=0;P<d;P++){const N=A+P*a[2],U=Math.floor(P*x),L=Math.floor(U-C/2);for(let V=0;V<f;V++){let G=0;for(let Q=0;Q<S;Q++){const te=Q+D;if(te<0||te>=h)continue;const ne=E+te*l[1],ee=te*w,re=Math.min(u-1,s?Math.round(ee):Math.floor(ee));if(k===re)for(let se=0;se<C;se++){const me=se+L;if(me<0||me>=g)continue;const Me=ne+me*l[2],de=me*y,Ce=Math.min(d-1,s?Math.round(de):Math.floor(de));P===Ce&&(G+=m[Me+V])}}p[N+V]=G}}}}return n.makeTensorInfo(i.shape,i.dtype,p)}const lEt={kernelName:kW,backendName:"cpu",kernelFunc:aEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cEt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:o}=r;mt(i,"reverse");const s=i.shape.length,a=Gt(o,i.shape);if(s===0)return Uc({inputs:{x:i},backend:n});const l=new Ai(i.shape,i.dtype),c=n.bufferSync(i);for(let u=0;u<l.size;u++){const d=l.indexToLoc(u),f=d.slice();a.forEach(h=>f[h]=i.shape[h]-1-f[h]),l.set(c.get(...f),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const uEt={kernelName:u2,backendName:"cpu",kernelFunc:cEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dEt={kernelName:NW,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:o,center:s}=e,a=n,l=Hi(r.dtype,Re(r.shape)),[c,u,d,f]=r.shape,[h,g]=OV(s,u,d),p=255,m=Math.sin(i),v=Math.cos(i),_=a.data.get(r.dataId).values;for(let y=0;y<c;y++){const b=y*d*u*f;for(let x=0;x<u;x++){const S=x*(d*f);for(let C=0;C<d;C++){const T=C*f;for(let E=0;E<f;E++){const k=[c,x,C,E],A=k[2],O=k[1];let D=(A-h)*v-(O-g)*m,P=(A-h)*m+(O-g)*v;D=Math.round(D+h),P=Math.round(P+g);let N=o;if(typeof o!="number"&&(E===3?N=p:N=o[E]),D>=0&&D<d&&P>=0&&P<u){const L=P*(d*f),V=D*f,G=b+L+V+E;N=_[G]}const U=b+S+T+E;l[U]=N}}}}return{dataId:a.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fEt=En(A1,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),hEt={kernelName:A1,backendName:"cpu",kernelFunc:fEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pEt(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:o}=e,{shape:s}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=fm(o,i,s),f=!0,h=n.bufferSync(i),g=n.bufferSync(o),p=Kh(h,g,s,d,c,l,a,u,0,f);return n.makeTensorInfo(s,p.dtype,p.values)}const mEt={kernelName:nue,backendName:"cpu",kernelFunc:pEt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gEt(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<e?n=i+1:r=i;return r}function vEt(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<=e?n=i+1:r=i;return r}function yEt(t,e,n,r,i,o){const s=wr("int32",n*i);for(let a=0;a<n;++a){const l=t.slice(a*r,(a+1)*r),c=a*i;for(let u=0;u<i;++u)s[c+u]=o==="left"?gEt(l,e[u+c]):vEt(l,e[u+c])}return s}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bEt(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:o}=e,{side:s}=r,a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,c=yEt(a,l,i.shape[0],i.shape[1],o.shape[1],s);return n.makeTensorInfo(o.shape,"int32",c)}const xEt={kernelName:iue,backendName:"cpu",kernelFunc:bEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wEt(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:o}=e;mt([r,i,o],"select");const s=r.shape.length,a=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values,u=cs(i.dtype,o.dtype),d=Gi(Re(i.shape),u);let f=0;const h=s===0||s>1||i.shape.length===1?1:Re(i.shape.slice(1));for(let g=0;g<a.length;g++)for(let p=0;p<h;p++)a[g]===1?d[f++]=l[g]:d[f++]=c[g];return n.makeTensorInfo(i.shape,u,d)}const _Et={kernelName:d2,backendName:"cpu",kernelFunc:wEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SEt=M2,CEt=I2,EEt=En(I1,t=>t>=0?CEt*t:SEt*(Math.exp(t)-1)),TEt={kernelName:I1,backendName:"cpu",kernelFunc:EEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kEt=En(D1,t=>t<0?-1:t>0?1:0),AEt={kernelName:D1,backendName:"cpu",kernelFunc:kEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MEt=En(O1,t=>Math.sin(t)),IEt={kernelName:O1,backendName:"cpu",kernelFunc:MEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OEt=En(R1,t=>Math.sinh(t)),REt={kernelName:R1,backendName:"cpu",kernelFunc:OEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DEt=11920928955078125e-23,WQ=Math.log(DEt)+2,PEt=En(N1,t=>{const e=t>-WQ,n=t<WQ,r=Math.exp(t);let i;return n?i=r:e?i=t:i=Math.log(1+r),i}),NEt={kernelName:N1,backendName:"cpu",kernelFunc:PEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Et(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:o,paddings:s}=r;mt([i],"spaceToBatchND");const a=Re(o),l=[[0,0]];l.push(...s);for(let x=1+o.length;x<i.shape.length;++x)l.push([0,0]);const c=Rme.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),u=Y1(c.shape,o,a,!1),d=Q1(u.length,o.length,!1),f=Z1(c.shape,o,a,!1),p=Un({inputs:{x:c},backend:n,attrs:{shape:u}}),_=$o({inputs:{x:p},backend:n,attrs:{perm:d}}),b=Un({inputs:{x:_},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(_),b}const LEt={kernelName:p2,backendName:"cpu",kernelFunc:$Et};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FEt(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:o,defaultValue:s}=e;if(o.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${o.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${i.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);const a=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values,u=n.data.get(s.dataId).values[0],[d,f,h,g,p]=ime(a,r.shape,r.dtype,l,i.dtype,c,u);return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([f[0]],i.dtype,h),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map(m=>Number(m)))),n.makeTensorInfo([p.length],r.dtype,new Int32Array(p))]}const BEt={kernelName:oue,backendName:"cpu",kernelFunc:FEt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UEt(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:o}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(o.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${o.shape}`);const s=Array.from(n.data.get(i.dataId).values),a=n.data.get(r.dataId).values,l=Array.from(n.data.get(o.dataId).values),[c,u,d]=ome(a,r.shape,r.dtype,s,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],o.dtype,new Int32Array(d))]}const zEt={kernelName:sue,backendName:"cpu",kernelFunc:UEt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jEt(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:o}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${i.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${o.shape}`);if(i.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const s=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,[c,u]=_H(s,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const WEt={kernelName:aue,backendName:"cpu",kernelFunc:jEt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VEt(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:o}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${i.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${o.shape}`);if(i.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const s=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,[c,u]=_H(s,r.shape,r.dtype,a,l);return n.makeTensorInfo(u,r.dtype,c)}const HEt={kernelName:lue,backendName:"cpu",kernelFunc:VEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GEt(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:o,defaultValue:s}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:f}=fm(o,i,a),h=!1,g=n.bufferSync(i);let p;switch(o.dtype){case"bool":{const m=n.bufferSync(o),v=!!n.data.get(s.dataId).values[0];p=Kh(g,m,a,f,u,c,l,d,v,h);break}case"float32":{const m=n.bufferSync(o),v=n.data.get(s.dataId).values[0];p=Kh(g,m,a,f,u,c,l,d,v,h);break}case"int32":{const m=n.bufferSync(o),v=n.data.get(s.dataId).values[0];p=Kh(g,m,a,f,u,c,l,d,v,h);break}case"string":{const m=n.bufferSync(o),v=wf(n.data.get(s.dataId).values[0]);p=Kh(g,m,a,f,u,c,l,d,v,h);break}default:throw new Error(`Unsupported type ${o.dtype}`)}return n.makeTensorInfo(a,p.dtype,p.values)}const qEt={kernelName:cue,backendName:"cpu",kernelFunc:GEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XEt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:o,axis:s}=r,a=Gt(s,i.shape)[0],l=GV(i,o,a),c=new Array(i.shape.length).fill(0),u=i.shape.slice();return l.map(d=>{const f=[...u];f[a]=d;const h=Kp({inputs:{x:i},backend:n,attrs:{begin:c,size:f}});return c[a]+=d,h})}const KEt={kernelName:m2,backendName:"cpu",kernelFunc:XEt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YEt={kernelName:MW,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;mt(n,"square");const i=r.data.get(n.dataId).values,o=new Float32Array(i.length);for(let a=0;a<i.length;++a){const l=i[a];o[a]=l*l}return{dataId:r.write(o,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QEt=En(j1,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),ZEt={kernelName:j1,backendName:"cpu",kernelFunc:QEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JEt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:o,end:s,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:f}=r;mt(i,"stridedSlice");const{finalShapeSparse:h,finalShape:g,isIdentity:p,sliceDim0:m,isSimpleSlice:v,begin:_,end:w,strides:y}=AV(i.shape,o,s,a,l,c,u,d,f);let b;if(p)b=Un({inputs:{x:i},backend:n,attrs:{shape:g}});else if(m||v){Y(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const x=EV(_,w,y),S=Kp({inputs:{x:i},backend:n,attrs:{begin:_,size:x}});b=Un({inputs:{x:S},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(S)}else{const x=n.bufferSync(i),S=lme(h,x,y,_);b=n.makeTensorInfo(g,S.dtype,S.values)}return b}const eTt={kernelName:OW,backendName:"cpu",kernelFunc:JEt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tTt(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:o,leftPad:s,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,f=n.data.get(u.dataId).values,h=n.data.get(d.dataId).values,[g,p]=cme(f,h,i,o,s,a,l,c);return[n.makeTensorInfo([g.length],"string",g),n.makeTensorInfo(d.shape,"int32",p)]}const nTt={kernelName:uue,backendName:"cpu",kernelFunc:tTt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rTt(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:o,delimiter:s}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(o.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${o.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);const a=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values[0],[c,u,d]=ume(a,l,i),f=u.length;return[n.makeTensorInfo([f,2],"int32",c),n.makeTensorInfo([f],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const iTt={kernelName:due,backendName:"cpu",kernelFunc:rTt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oTt(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:o}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const s=n.data.get(o.dataId).values,a=dme(s,i);return n.makeTensorInfo(o.shape,"int32",a)}const sTt={kernelName:fue,backendName:"cpu",kernelFunc:oTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aTt=En(B1,t=>Math.tan(t)),lTt={kernelName:B1,backendName:"cpu",kernelFunc:aTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cTt=En(U1,t=>Math.tanh(t)),uTt={kernelName:U1,backendName:"cpu",kernelFunc:cTt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dTt(t){const{inputs:e,backend:n}=t,{tensor:r,indices:i,updates:o}=e,{sliceRank:s,numUpdates:a,sliceSize:l,strides:c,outputSize:u}=fm(o,i,r.shape),d=!1,f=n.bufferSync(i),h=n.bufferSync(o),g=n.bufferSync(r),p=Kh(f,h,r.shape,u,l,a,s,c,g,d);return n.makeTensorInfo(r.shape,p.dtype,p.values)}const fTt={kernelName:rue,backendName:"cpu",kernelFunc:dTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hTt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:o}=r;mt(i,"tile");const s=hme(n.bufferSync(i),o);return n.makeTensorInfo(s.shape,s.dtype,s.values)}const pTt={kernelName:z1,backendName:"cpu",kernelFunc:hTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mTt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:o,sorted:s}=r;mt(i,"topk");const a=n.data.get(i.dataId).values,[l,c]=mme(a,i.shape,i.dtype,o,s);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const gTt={kernelName:RW,backendName:"cpu",kernelFunc:mTt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vTt(t){const{inputs:e,attrs:n,backend:r}=t,{image:i,transforms:o}=e,{interpolation:s,fillMode:a,fillValue:l,outputShape:c}=n,[u,d,f,h]=i.shape,[g,p]=c??[d,f],m=[u,g,p,h],v=_t(i.shape),_=v[0],w=v[1],y=v[2],b=_t(m),x=b[0],S=b[1],C=b[2],T=Hi(i.dtype,Re(m));T.fill(l);const E=r.data.get(i.dataId).values,k=r.data.get(o.dataId).values;for(let O=0;O<u;++O){const D=o.shape[0]===1?k:k.subarray(O*8,O*8+8);for(let P=0;P<g;++P)for(let N=0;N<p;++N)for(let U=0;U<h;++U){let L;const V=D[6]*N+D[7]*P+1;if(V===0)continue;const G=(D[0]*N+D[1]*P+D[2])/V,Q=(D[3]*N+D[4]*P+D[5])/V,te=VQ(G,f,a),ne=VQ(Q,d,a);switch(s){case"nearest":L=STt(E,d,f,_,w,y,O,ne,te,U,l);break;case"bilinear":L=CTt(E,d,f,_,w,y,O,ne,te,U,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${s}`)}const ee=O*x+P*S+N*C+U;T[ee]=L}return r.makeTensorInfo(m,i.dtype,T)}return{dataId:r.write(T,m,i.dtype),shape:i.shape,dtype:i.dtype}}const yTt={kernelName:DW,backendName:"cpu",kernelFunc:vTt};function VQ(t,e,n){switch(n){case"reflect":return bTt(t,e);case"wrap":return xTt(t,e);case"nearest":return _Tt(t,e);case"constant":default:return wTt(t)}}function bTt(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return $p(0,n,e-1)}function xTt(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return $p(0,n,e-1)}function wTt(t,e){return t}function _Tt(t,e){return $p(0,t,e-1)}function Eb(t,e,n,r,i,o,s,a,l,c,u){const d=s*r+a*i+l*o+c;return 0<=a&&a<e&&0<=l&&l<n?t[d]:u}function STt(t,e,n,r,i,o,s,a,l,c,u){const d=Math.round(a),f=Math.round(l);return Eb(t,e,n,r,i,o,s,d,f,c,u)}function CTt(t,e,n,r,i,o,s,a,l,c,u){const d=Math.floor(a),f=Math.floor(l),h=d+1,g=f+1,p=(g-l)*Eb(t,e,n,r,i,o,s,d,f,c,u)+(l-f)*Eb(t,e,n,r,i,o,s,d,g,c,u),m=(g-l)*Eb(t,e,n,r,i,o,s,h,f,c,u)+(l-f)*Eb(t,e,n,r,i,o,s,h,g,c,u);return(h-a)*p+(a-d)*m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ETt(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:o}=e;mt(o,"unique");const s=r.data.get(o.dataId).values,{outputValues:a,outputShape:l,indices:c}=gme(s,i,o.shape,o.dtype);return[r.makeTensorInfo(l,o.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const TTt={kernelName:PW,backendName:"cpu",kernelFunc:ETt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kTt(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:o}=r;o<0&&(o+=i.shape.length);const s=i.shape.length,a=i.shape[o],l=new Array(s-1);let c=0;for(let h=0;h<s;h++)h!==o&&(l[c++]=i.shape[h]);const u=new Array(s).fill(0),d=i.shape.slice();d[o]=1;const f=new Array(a);for(let h=0;h<f.length;h++){u[o]=h;const g=Kp({inputs:{x:i},backend:n,attrs:{begin:u,size:d}});f[h]=Un({inputs:{x:g},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(g)}return f}const ATt={kernelName:v2,backendName:"cpu",kernelFunc:kTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MTt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:o}=e,{numSegments:s}=r;mt(i,"unsortedSegmentSum");const a=i.shape.length,l=o.shape.length,c=[],u=[],d=a-l;let f=o;for(let g=0;g<d;++g){const p=$A({inputs:{input:f},backend:n,attrs:{dim:g+1}});f=p,u.push(p)}for(let g=0;g<s;++g){const p=zf(g,"int32"),m=n.makeTensorInfo([],"int32",p),v=Ope({inputs:{a:m,b:f},backend:n}),_=Tf({inputs:{x:v},backend:n,attrs:{dtype:"float32"}}),w=j2({inputs:{a:_,b:i},backend:n}),y=aS({inputs:{x:w},backend:n,attrs:{axis:0,keepDims:!1}});c.push(y),u.push(m),u.push(v),u.push(_),u.push(w),u.push(y)}const h=Ome({inputs:c,backend:n,attrs:{axis:0}});return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),h}const ITt={kernelName:y2,backendName:"cpu",kernelFunc:MTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OTt=[E_t,owt,k_t,M_t,dwt,O_t,D_t,N_t,L_t,B_t,z_t,W_t,H_t,X_t,Y_t,J_t,t1t,r1t,o1t,S_t,a1t,c1t,d1t,hwt,h1t,cwt,mwt,m1t,swt,v1t,b1t,x1t,_1t,C1t,T1t,A1t,I1t,R1t,P1t,$1t,F1t,U1t,j1t,V1t,H1t,q1t,K1t,Q1t,Z1t,J1t,eSt,nSt,oSt,g_t,aSt,gwt,mSt,vwt,gSt,bwt,_St,SSt,ESt,wwt,Swt,kSt,MSt,OSt,DSt,Ewt,kwt,awt,NSt,y1t,LSt,BSt,zSt,v_t,Mwt,Owt,WSt,Dwt,HSt,XSt,YSt,JSt,tCt,rCt,iCt,Nwt,sCt,lCt,uCt,fCt,pCt,gCt,yCt,Lwt,xCt,SCt,TCt,Bwt,zwt,MCt,RCt,NCt,Wwt,LCt,BCt,UCt,Rme,VCt,b_t,Gwt,GCt,XCt,YCt,ZCt,lwt,N3,eEt,x_t,w_t,__t,nEt,iEt,sEt,lEt,uEt,dEt,hEt,e_t,mEt,xEt,_Et,TEt,n_t,AEt,IEt,REt,r_t,CCt,NEt,LEt,BEt,zEt,WEt,HEt,qEt,KEt,s_t,YEt,l_t,u_t,ZEt,eTt,nTt,iTt,sTt,p_t,rSt,lTt,uTt,fTt,pTt,gTt,yTt,Vwt,TTt,ATt,ITt,FCt];for(const t of OTt)pue(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mh={},XC={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function RTt(t,e){Mh[t]=e}function Il(t,e){if(!(t in Mh)||e!=null){const r=PTt(t,e);if(r!==null)Mh[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=Mh[t];return n==null||n.isContextLost()?(delete Mh[t],Il(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Mh[t])}function DTt(t){if(!Te().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function PTt(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??DTt(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Mh[t]},!1),Te().getBool("SOFTWARE_WEBGL_ENABLED")&&(XC.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",XC)||n.getContext("experimental-webgl",XC):n.getContext("webgl2",XC)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Bw;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Bw||(Bw={}));var Is;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Is||(Is={}));var Ti;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Ti||(Ti={}));function lS(t,e){return[e,t]}function NTt(t,e){return t*e}function KC(t){const e=Re(t),n=Math.ceil(e/4);return i3(n)}function a0(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function $Tt(t,e){const[n,r]=a0(t,e);return n*r*4}function kH(t,e){const n=t;let r,i,o,s,a,l,c,u,d,f;return Te().getNumber("WEBGL_VERSION")===2?(r=n.R32F,i=n.R16F,o=n.RGBA16F,s=n.RGBA32F,a=n.RED,c=4,u=1,d=n.HALF_FLOAT,f=n.FLOAT,l=n.RGBA8):(r=t.RGBA,i=t.RGBA,o=t.RGBA,s=n.RGBA,a=t.RGBA,c=4,u=4,d=e!=null?e.HALF_FLOAT_OES:null,f=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:s,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:f}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ot(t,e){const n=e();return Te().getBool("DEBUG")&&LTt(t),n}function LTt(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+zTt(t,e))}const FTt=596e-10,BTt=65504;function UTt(t){return!!(Te().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||FTt<Math.abs(t)&&Math.abs(t)<BTt)}function zTt(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function YC(t,e){return sd(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function jTt(t,e){const n=sd(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(ot(t,()=>t.shaderSource(n,e)),ot(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function WTt(t,e){const n=sd(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(ot(t,()=>t.shaderSource(n,e)),ot(t,()=>t.compileShader(n)),Te().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw Dme(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const VTt=/ERROR: [0-9]+:([0-9]+):/g;function Dme(t,e){const n=VTt.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],i=t.split(`
`),o=i.length.toString().length+2,s=i.map((d,f)=>ov((f+1).toString(),o)+d);let a=0;for(let d=0;d<s.length;d++)a=Math.max(s[d].length,a);const l=s.slice(0,r-1),c=s.slice(r-1,r),u=s.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${ov(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function HTt(t){return sd(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function GTt(t,e){if(ot(t,()=>t.linkProgram(e)),!Te().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function WP(t,e){if(ot(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function qTt(t,e){const n=sd(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return ot(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),ot(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function XTt(t,e){const n=sd(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return ot(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),ot(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function KTt(t){return sd(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function YTt(t,e){const n=Te().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}function QTt(t){return sd(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function HQ(t,e,n,r,i,o,s){const a=t.getAttribLocation(e,n);return a===-1?!1:(ot(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),ot(t,()=>t.vertexAttribPointer(a,i,t.FLOAT,!1,o,s)),ot(t,()=>t.enableVertexAttribArray(a)),!0)}function ZTt(t,e,n){rkt(t,n),ot(t,()=>t.activeTexture(t.TEXTURE0+n)),ot(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function JTt(t,e,n){return sd(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function ekt(t,e,n){return t.getUniformLocation(e,n)}function tkt(t,e,n,r){ot(t,()=>ZTt(t,e,r)),ot(t,()=>t.uniform1i(n,r))}function VP(t,e,n){ot(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),ot(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function GQ(t,e){ot(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),ot(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function QC(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+nkt(t,e))}function nkt(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function sd(t,e,n){const r=ot(t,()=>e());if(r==null)throw new Error(n);return r}function rkt(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const i=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${i}.`)}}function my(t,e=2){return Re(t.slice(0,t.length-e))}function gy(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function ZC(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[my(t),...gy(t)]),e}function ikt(t,e=!1){let n=Te().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=Te().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&Te().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((a,l)=>l>=t.length-2?W4(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=Uf(t).newShape);let i=Re(t),o=null;t.length<=1&&i<=n?o=[1,i]:t.length===2&&t[0]<=n&&t[1]<=n?o=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?o=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?o=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?o=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(o=[t[0],t[1]*t[2]*t[3]]);const s=o!=null&&Math.max(...o)>r&&Math.min(...o)<=(e?2:1)&&Math.min(...o)>0;if(o==null||s)if(e){const a=my(t);let l=2,c=2;t.length&&([l,c]=gy(t)),i=a*(l/2)*(c/2),o=i3(i).map(u=>u*2)}else o=i3(i);return o}function JC(t){return t%2===0}function FA(t,e){if(t=t.slice(-2),e=e.slice(-2),mn(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||JC(n)&&JC(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&JC(t[0])&&JC(e[0])}let HP,GP;function okt(t){if(HP==null){const e=Il(t);HP=e.getParameter(e.MAX_TEXTURE_SIZE)}return HP}function skt(t){if(GP==null){const e=Il(t);GP=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,GP)}function akt(t){if(t===0)return 0;let e;const n=Il(t);return Ea(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:Ea(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function Ea(t,e){return t.getExtension(e)!=null}function qQ(t){try{if(Il(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function lkt(t){if(t===0)return!1;const e=Il(t);if(t===1){if(!Ea(e,"OES_texture_float"))return!1}else if(!Ea(e,"EXT_color_buffer_float"))return!1;return L3(e)}function ckt(t){if(t===0)return!1;const e=Il(t);if(t===1){if(!Ea(e,"OES_texture_float")||!Ea(e,"WEBGL_color_buffer_float"))return!1}else{if(Ea(e,"EXT_color_buffer_float"))return L3(e);const r="EXT_color_buffer_half_float";if(Ea(e,r)){const i=e.getExtension(r);return ukt(e,i)}return!1}return L3(e)}function L3(t){const e=kH(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(o),s}function ukt(t,e){const n=kH(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(s),a}function dkt(t){return t!==2?!1:Il(t).fenceSync!=null}function cS(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&Y(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vt=Te();vt.registerFlag("HAS_WEBGL",()=>vt.getNumber("WEBGL_VERSION")>0);vt.registerFlag("WEBGL_VERSION",()=>qQ(2)?2:qQ(1)?1:0);vt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);vt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>vt.get("WEBGL_VERSION")===2);vt.registerFlag("WEBGL_CPU_FORWARD",()=>!0);vt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);vt.registerFlag("WEBGL_PACK",()=>vt.getBool("HAS_WEBGL"));vt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_CLIP",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_REDUCE",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_LAZILY_UNPACK",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_CONV_IM2COL",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>okt(vt.getNumber("WEBGL_VERSION")));vt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>skt(vt.getNumber("WEBGL_VERSION")));vt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=vt.getNumber("WEBGL_VERSION");return t===0?0:akt(t)});vt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>vt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Oue());vt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>lkt(vt.getNumber("WEBGL_VERSION")));vt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>vt.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:vt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));vt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>ckt(vt.getNumber("WEBGL_VERSION")));vt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>dkt(vt.getNumber("WEBGL_VERSION")));vt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>vt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);vt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});vt.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>Oue()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});vt.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);vt.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);vt.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);vt.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);vt.registerFlag("WEBGL_EXP_CONV",()=>!1);vt.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>vt.getBool("IS_TEST"));vt.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);vt.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);vt.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);vt.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vo(){let t,e,n,r,i,o,s,a,l,c;return Te().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",i="texture",o="outputColor",s="out vec4 outputColor;",a=Te().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",i="texture2D",o="gl_FragColor",s="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:o,defineOutput:s,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mm(t,e,n="index"){const r=_t(e);return r.map((i,o)=>{const s=`int ${t[o]} = ${n} / ${i}`,a=o===r.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${i}`:`index -= ${t[o]} * ${i}`;return`${s}; ${a};`}).join("")}function W2(t,e,n="index"){const r=_t(e);return r.map((i,o)=>{const s=`int ${t[o]} = ${n} / outShapeStrides[${o}]`,a=o===r.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * outShapeStrides[${o}]`:`index -= ${t[o]} * outShapeStrides[${o}]`;return`${s}; ${a};`}).join("")}function fkt(t,e){const n=t.length,r=t.map(o=>`${e}[${o}]`),i=new Array(n-1);i[n-2]=r[n-1];for(let o=n-3;o>=0;--o)i[o]=`(${i[o+1]} * ${r[o+1]})`;return i}function hkt(t,e,n="index"){const r=t.map((o,s)=>s),i=fkt(r,e);return i.map((o,s)=>{const a=`int ${t[s]} = ${n} / ${i[s]}`,l=s===i.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * ${i[s]}`:`index -= ${t[s]} * ${i[s]}`;return`${a}; ${l};`}).join("")}function AH(t){const e=_t(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function MH(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const Pme=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:Nme}=Zvt;function pkt(t,e,n){const r=[];if(t.forEach(h=>{const g=Re(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?r.push(`uniform float ${h.name}${g>1?`[${g}]`:""};`):(r.push(`uniform sampler2D ${h.name};`),r.push(`uniform int offset${h.name};`)),n.enableShapeUniforms){const{uniformShape:p}=IH(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(p.length){case 1:r.push(`uniform int ${h.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${h.name}Shape;`);break}r.push(`uniform ivec2 ${h.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{r.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});const i=r.join(`
`),o=t.map(h=>mkt(h,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),s=e.texShape,a=vo(),l=ykt(a);let c,u,d=wkt(a);return e.isPacked?(c=gkt(e.logicalShape,s,n.enableShapeUniforms),u=xkt(a)):(c=vkt(e.logicalShape,s,n.enableShapeUniforms),u=bkt(a)),n.packedInputs&&(d+=Ekt),[d,l,u,i,c,o,n.userCode].join(`
`)}function l0(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return Lkt(t,e);case 1:return Bkt(t,e);case 2:return zkt(t,e);case 3:return Wkt(t,e);case 4:return Hkt(t,e);case 5:return Gkt(t);case 6:return qkt(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function $me(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return $kt(t);case 1:return Fkt(t,e);case 2:return Ukt(t,e);case 3:return jkt(t,e);default:return Vkt(t,e)}}function mkt(t,e,n=!1,r){let i="";n?i+=$me(t,r):i+=l0(t,r);const o=t.shapeInfo.logicalShape,s=e.logicalShape;return o.length<=s.length&&(n?i+=Xkt(t,e):i+=Kkt(t,e)),i}function gkt(t,e,n){switch(t.length){case 0:return Lme();case 1:return Tkt(t,e,n);case 2:return Pkt(t,e,n);case 3:return Akt(t,e,n);default:return Ikt(t,e,n)}}function vkt(t,e,n){switch(t.length){case 0:return Lme();case 1:return kkt(t,e,n);case 2:return Nkt(t,e,n);case 3:return Mkt(t,e,n);case 4:return Okt(t,e,n);case 5:return Rkt(t,e);case 6:return Dkt(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function ykt(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function bkt(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function xkt(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function wkt(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${_kt}
    ${Skt}
    ${Ckt}
  `}const _kt=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Skt=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Ckt=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Ekt=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Lme(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function Tkt(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function kkt(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function Akt(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[2]/2),o=i*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${o};
      index -= b * ${o};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec3(b, r, c);
    }
  `}function Mkt(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${W2(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=mm(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function Ikt(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[t.length-1]/2),o=i*Math.ceil(t[t.length-2]/2);let s=o,a="",l="b, r, c";for(let c=2;c<t.length-1;c++)s*=t[t.length-c-1],a=`
      int b${c} = index / ${s};
      index -= b${c} * ${s};
    `+a,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${o};
      index -= b * ${o};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec${t.length}(${l});
    }
  `}function Okt(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${W2(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=mm(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function Rkt(t,e){const n=mm(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function Dkt(t,e){const n=mm(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function Pkt(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(mn(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const i=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec2(r, c);
    }
  `}function Nkt(t,e,n){return mn(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function gm(t){return`offset${t}`}function $kt(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=vo();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function Lkt(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[i,o]=t.shapeInfo.texShape;if(i===1&&o===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const s=gm(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${s});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${s});
      return sampleTexture(${n}, uv);
    }
  `}function Fkt(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,o=vo();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${o.texture2D}(${n}, uv);
    }
  `;const s=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${s[0]}, ${s[1]}, index);
      return ${o.texture2D}(${n}, uv);
    }
  `}function Bkt(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${c0(t)}
      }
    `;const i=t.shapeInfo.texShape,o=i[0],s=i[1];if(s===1&&o===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=gm(n);return s===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${o}.0);
        return sampleTexture(${n}, uv);
      }
    `:o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${s}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${o}, ${s}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function Ukt(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t.shapeInfo.texShape,s=o[0],a=o[1],l=vo();if(o!=null&&mn(n,o))return e?`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${s}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${i}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],u=Math.ceil(n[1]/2);return`
    vec4 ${i}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function zkt(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t.shapeInfo.texShape;if(o!=null&&mn(n,o)){if(e)return`
      float ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const f=o[0],h=o[1];return`
    float ${i}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:s,keptDims:a}=Uf(n),l=s;if(l.length<n.length){const f=u0(t,l),h=["row","col"];return`
      ${l0(f,e)}
      float ${i}(int row, int col) {
        return ${i}(${d0(h,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${c0(t)}
      }
    `;const c=o[0],u=o[1],d=gm(r);return u===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${i}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${i}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${r}, uv);
  }
`}function jkt(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t.shapeInfo.texShape,s=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(n[0]===1){const f=n.slice(1),h=[1,2],g=u0(t,f),p=["b","row","col"];return`
        ${$me(g,e)}
        vec4 ${i}(int b, int row, int col) {
          return ${i}(${d0(p,h)});
        }
      `}const a=vo();if(e)return`
    vec4 ${i}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const l=s[0],c=s[1],u=Math.ceil(n[2]/2),d=u*Math.ceil(n[1]/2);return`
    vec4 ${i}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${d}, ${u}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function Wkt(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],s=n[2],{newShape:a,keptDims:l}=Uf(n),c=a;if(c.length<n.length){const p=u0(t,c),m=["row","col","depth"];return`
        ${l0(p,e)}
        float ${i}(int row, int col, int depth) {
          return ${i}(${d0(m,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${o}, ${s}, 1)));
        ${c0(t)}
      }
    `;const u=t.shapeInfo.texShape,d=u[0],f=u[1],h=t.shapeInfo.flatOffset;if(f===o&&h==null)return e?`
      float ${i}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${i}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${s}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${f}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(f===s&&h==null)return e?`
      float ${i}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const g=gm(r);return e?`
    float ${i}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${g};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${i}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${o} + col * ${s} + depth + ${g};
        vec2 uv = uvFromFlat(${d}, ${f}, index);
        return sampleTexture(${r}, uv);
      }
  `}function Vkt(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=vo();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);
    }
  `;const o=t.shapeInfo.logicalShape,s=o.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],u=l[1],d=Math.ceil(o[s-1]/2);let f=d*Math.ceil(o[s-2]/2),h="int b, int row, int col",g=`b * ${f} + (row / 2) * ${d} + (col / 2)`;for(let p=2;p<s-1;p++)h=`int b${p}, `+h,f*=o[s-p-1],g=`b${p} * ${f} + `+g;return`
    vec4 ${r}(${h}) {
      int index = ${g};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${i.texture2D}(${n}, uv);
    }
  `}function Hkt(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],s=n[2]*o,a=n[1]*s,{newShape:l,keptDims:c}=Uf(n);if(l.length<n.length){const _=u0(t,l),w=["row","col","depth","depth2"];return`
      ${l0(_,e)}
      float ${i}(int row, int col, int depth, int depth2) {
        return ${i}(${d0(w,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${s}, ${o}, 1)));
        ${c0(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],h=d[1],g=`int stride2 = ${r}Shape[3];`,p=`int stride1 = ${r}Shape[2] * stride2;`,m=`int stride0 = ${r}Shape[1] * stride1;`;if(h===a&&u==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        ${g}
        ${p}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${s}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(h===o&&u==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;const v=gm(r);return e?`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${g}
      ${p}
      ${m}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${v});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${s} +
          depth * ${o} + depth2;
      vec2 uv = uvFromFlat(${f}, ${h}, index + ${v});
      return sampleTexture(${r}, uv);
    }
  `}function Gkt(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[4],o=e[3]*i,s=e[2]*o,a=e[1]*s,{newShape:l,keptDims:c}=Uf(e);if(l.length<e.length){const p=u0(t,l),m=["row","col","depth","depth2","depth3"];return`
      ${l0(p)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${d0(m,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${s}, ${o}, ${i})) +
          depth3;
        ${c0(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],h=d[1];if(h===a&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${s}, ${o}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===i&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const g=gm(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${s} + depth * ${o} +
          depth2 * ${i} + depth3 + ${g};
      vec2 uv = uvFromFlat(${f}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function qkt(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:o}=Uf(e);if(i.length<e.length){const m=u0(t,i),v=["row","col","depth","depth2","depth3","depth4"];return`
      ${l0(m)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${d0(v,o)});
      }
    `}const s=e[5],a=e[4]*s,l=e[3]*a,c=e[2]*l,u=e[1]*c;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${s}, 1)));
        ${c0(t)}
      }
    `;const d=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,h=f[0],g=f[1];if(g===u&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${a}, ${s})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(g===s&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=gm(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${a} + depth3 * ${s} + depth4 + ${p};
      vec2 uv = uvFromFlat(${h}, ${g}, index);
      return sampleTexture(${n}, uv);
    }
  `}function c0(t){const e=t.name,n=Re(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function Xkt(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",o=t.shapeInfo.logicalShape.length,s=e.logicalShape.length,a=Nme(t.shapeInfo.logicalShape,e.logicalShape),l=On(s),c=s-o;let u;const d=["x","y","z","w","u","v"];o===0?u="":s<2&&a.length>=1?u="coords = 0;":u=a.map(_=>`coords.${d[_+c]} = 0;`).join(`
`);let f="";s<2&&o>0?f="coords":f=t.shapeInfo.logicalShape.map((_,w)=>`coords.${d[w+c]}`).join(", ");let h="return outputValue;";const p=Re(t.shapeInfo.logicalShape)===1,v=Re(e.logicalShape)===1;if(o===1&&!p&&!v)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(p&&!v)s===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(a.length){const _=o-2,w=o-1;a.indexOf(_)>-1&&a.indexOf(w)>-1?h="return vec4(outputValue.x);":a.indexOf(_)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(w)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${r}(${f});
      ${h}
    }
  `}function Kkt(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",o=e.texShape,s=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&mn(s,o))return`
      float ${i}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const c=On(l),u=Nme(t.shapeInfo.logicalShape,e.logicalShape),d=l-a;let f;const h=["x","y","z","w","u","v"];a===0?f="":l<2&&u.length>=1?f="coords = 0;":f=u.map(p=>`coords.${h[p+d]} = 0;`).join(`
`);let g="";return l<2&&a>0?g="coords":g=t.shapeInfo.logicalShape.map((p,m)=>`coords.${h[m+d]}`).join(", "),`
    float ${i}() {
      ${c} coords = getOutputCoords();
      ${f}
      return get${r}(${g});
    }
  `}function On(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function IH(t,e,n){const{newShape:r,keptDims:i}=Uf(e),o=e.length,s=t&&o===3&&e[0]===1,a=s?e.slice(1):r,l=!t&&o>1&&!mn(e,n)&&r.length<o||s;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:i}}function u0(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function d0(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ykt(t,e,n,r){const i=n.map((u,d)=>{const f={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(f.flatOffset=u.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:f}}),o=i.map(u=>u.shapeInfo),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=pkt(i,s,e),l=WTt(t.gl,a),c=t.createProgram(l);return Te().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:o,outShapeInfo:s,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:o,outShapeInfo:s},Fme(t,e,c)))}function Fme(t,e,n){const r=[],i=[];let o,s,a,l=null,c=null;c=t.getUniformLocation(n,"NAN",!1),Te().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const d of e.variableNames){const f={name:d,uniform:t.getUniformLocation(n,d,u),offset:t.getUniformLocation(n,`offset${d}`,u)};e.enableShapeUniforms&&(f.shape=t.getUniformLocation(n,`${d}Shape`,u),f.texShape=t.getUniformLocation(n,`${d}TexShape`,u)),r.push(f)}if(e.enableShapeUniforms&&(o=t.getUniformLocation(n,"outShape",u),a=t.getUniformLocation(n,"outShapeStrides",u),s=t.getUniformLocation(n,"outTexShape",u)),e.customUniforms)for(const d of e.customUniforms)i.push(t.getUniformLocation(n,d.name,u));return{variablesLocations:r,customUniformLocations:i,infLoc:l,nanLoc:c,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:s}}function XQ(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const i=n.logicalShape,o=e[r],s=o.shape;if(!mn(i,s))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${s} must match`);if(n.isUniform&&o.isUniform)return;const a=n.texShape,l=o.isUniform?null:o.texData.texShape;if(!mn(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function Qkt(t,e,n,r,i){e.program.enableShapeUniforms||(XQ(e.inShapeInfos,n),XQ([e.outShapeInfo],[r]));const o=r.texData.texture,s=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(o.texture,s[0],s[1]):t.setOutputMatrixTexture(o.texture,s[0],s[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),Te().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const c=n[l],{uniform:u,offset:d,shape:f,texShape:h}=e.variablesLocations[l];if(f){const{uniformShape:g}=IH(e.program.packedInputs,c.shape,c.texData.texShape);switch(g.length){case 1:t.gl.uniform1iv(f,new Int32Array(g));break;case 2:t.gl.uniform2iv(f,new Int32Array(g));break;case 3:t.gl.uniform3iv(f,new Int32Array(g));break;case 4:t.gl.uniform4iv(f,new Int32Array(g));break}}if(h&&t.gl.uniform2i(h,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(Re(c.shape)<2)t.gl.uniform1f(u,c.uniformValues[0]);else{let g=c.uniformValues;g instanceof Float32Array||(g=new Float32Array(g)),t.gl.uniform1fv(u,g)}continue}c.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,u,l)}}const a=e.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=_t(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&i)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],u=e.customUniformLocations[l],d=i[l];if(c.type==="float")t.gl.uniform1fv(u,d);else if(c.type==="vec2")t.gl.uniform2fv(u,d);else if(c.type==="vec3")t.gl.uniform3fv(u,d);else if(c.type==="vec4")t.gl.uniform4fv(u,d);else if(c.type==="int")t.gl.uniform1iv(u,d);else if(c.type==="ivec2")t.gl.uniform2iv(u,d);else if(c.type==="ivec3")t.gl.uniform3iv(u,d);else if(c.type==="ivec4")t.gl.uniform4iv(u,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function Zkt(t,e,n){let r="";e.concat(n).forEach(s=>{const a=s.texData!=null&&s.texData.slice!=null&&s.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!s.isUniform){const l=s.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:d}=IH(t.packedInputs,s.shape,l);let f="",h="",g="";if(u.length===1&&t.packedInputs){const b=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];f=`${b[0]>1}_${b[1]>1}`}else if(u.length===2&&!t.packedInputs)h=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!t.packedInputs){const b=_t(u);g=`${b[0]===l[1]}_${b[b.length-1]===l[1]}`}const p=s.shape.length,m=u.length===2&&mn(s.shape,l),v=Re(s.shape)===1,_=ly(s.shape,n.shape),w=!t.packedInputs&&p===n.shape.length&&mn(l,n.texData.texShape),y=t.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${p}_${w}_${c?d:""}_${u.length}_${v}_${_}_${m}_${f}_${h}_${g}_${y}_${a}`}else{const l=s.isUniform?"uniform":s.texData.texShape;r+=`${s.shape}_${l}_${a}`}});const i=t.userCode;let o=t.constructor.name;return o+="_"+r+"_"+i+`${Te().getNumber("WEBGL_VERSION")}`,o}function Yi(t){return Te().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jkt{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Bw.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=vo();this.outputShape=e,this.enableShapeUniforms=Yi(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?W2(["r","c","d"],e):mm(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eAt{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Bw.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=vo();this.outputShape=e,this.enableShapeUniforms=Yi(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?W2(["r","c","d"],e):mm(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tAt{constructor(e){this.variableNames=["A"],this.outTexUsage=Is.DOWNLOAD;const n=vo();this.outputShape=e,this.userCode=`
      ${Pme}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nAt{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Is.DOWNLOAD;const n=vo();this.outputShape=e,this.userCode=`
      ${Pme}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rAt={R:0,G:1,B:2,A:3};class KQ{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const i=vo();this.outputShape=e,this.enableShapeUniforms=Yi(this.outputShape.length);let o="result";n&&(o="floor(result * 255. + 0.5)");let s="";for(let a=0;a<r.length;a++){const l=r[a];s+=`
          if(offset == ${a}) {
            result = values[${rAt[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?MH():AH(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${i.texture2D}(A, uv);
          ${s}
        }
        ${i.output} = vec4(${o}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iAt{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=vo();this.outputShape=e,this.enableShapeUniforms=Yi(this.outputShape.length);let i="",o="result";n&&(o="floor(result * 255. + 0.5)");for(let s=0;s<=1;s++)for(let a=0;a<=1;a++){const l=s*2+a;i+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${s} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${s};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?MH():AH(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${i}

          ${r.output} = ${o};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oAt(t){const e=vo(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return jTt(t,n)}function sAt(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return qTt(t,e)}function aAt(t){const e=new Uint16Array([0,1,2,2,1,3]);return XTt(t,e)}function uS(t,e,n,r,i,o){YTt(e,n);const s=KTt(t),a=t.TEXTURE_2D;return ot(t,()=>t.bindTexture(a,s)),ot(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),ot(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),ot(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),ot(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),Te().getNumber("WEBGL_VERSION")===1?ot(t,()=>t.texImage2D(a,0,r,e,n,0,i,o,null)):ot(t,()=>t.texStorage2D(a,1,r,e,n)),ot(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:s,texShape:[n,e]}}function Bme(t){return t.internalFormatFloat}function lAt(t,e,n,r){const[i,o]=lS(e,n);return uS(t,i,o,Bme(r),r.textureFormatFloat,t.FLOAT)}function Ume(t){return t.internalFormatHalfFloat}function cAt(t,e,n,r){const[i,o]=lS(e,n);return uS(t,i,o,Ume(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function zme(t){return t.downloadTextureFormat}function uAt(t,e,n,r){const[i,o]=lS(e,n);return uS(t,i,o,zme(r),t.RGBA,t.UNSIGNED_BYTE)}function jme(t){return t.internalFormatPackedFloat}function dAt(t,e,n,r){const[i,o]=a0(e,n);return uS(t,i,o,jme(r),t.RGBA,t.FLOAT)}function Wme(t){return t.internalFormatPackedHalfFloat}function fAt(t,e,n,r){const[i,o]=a0(e,n);return uS(t,i,o,Wme(r),t.RGBA,r.textureTypeHalfFloat)}function hAt(t,e,n){return ot(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),HQ(t,e,"clipSpacePos",n,3,20,0)&&HQ(t,e,"uv",n,2,20,12)}function pAt(t,e,n,r,i,o){ot(t,()=>t.bindTexture(t.TEXTURE_2D,e));let s,a,l;i instanceof Uint8Array?(s=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(s=new Float32Array(n*r*4),a=t.FLOAT,l=o.internalFormatPackedFloat),s.set(i),Te().getNumber("WEBGL_VERSION")===2?ot(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,a,s)):ot(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,a,s)),ot(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function mAt(t,e,n){ot(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?Te().getNumber("WEBGL_VERSION")===2?ot(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):ot(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):Te().getNumber("WEBGL_VERSION")===2?ot(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):ot(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),ot(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function gAt(t,e,n,r){const i=t.createBuffer();ot(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,i));const a=4*4*e*n;return ot(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),ot(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),ot(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),i}function vAt(t,e,n){const r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function yAt(t,e,n,r){const[i,o]=lS(e,n),s=4,a=new Uint8Array(NTt(e*n,s));return ot(t,()=>t.readPixels(0,0,i,o,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function bAt(t,e,n,r,i,o,s,a){const l=t,c=new Float32Array($Tt(o,s));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function xAt(t,e,n){const r=new Float32Array(e*n*4);return ot(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qP{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=Te().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,RTt(n,e)):this.gl=Il(n),e=this.gl,Te().getNumber("WEBGL_VERSION")===2){const o=e;this.createVertexArray=()=>ot(o,()=>o.createVertexArray()),this.bindVertexArray=s=>ot(o,()=>o.bindVertexArray(s)),this.deleteVertexArray=s=>ot(o,()=>o.deleteVertexArray(s)),this.getVertexArray=()=>ot(o,()=>o.getParameter(o.VERTEX_ARRAY_BINDING))}else if(e!=null){const o=e.getExtension("OES_vertex_array_object");if(o==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>ot(e,()=>o.createVertexArrayOES()),this.bindVertexArray=s=>ot(e,()=>o.bindVertexArrayOES(s)),this.deleteVertexArray=s=>ot(e,()=>o.deleteVertexArrayOES(s)),this.getVertexArray=()=>ot(e,()=>e.getParameter(o.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),Te().getNumber("WEBGL_VERSION")===1){const o="OES_texture_float",s="OES_texture_half_float";if(this.textureFloatExtension=YC(this.gl,o),Ea(this.gl,s))this.textureHalfFloatExtension=YC(this.gl,s);else if(Te().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Ea(this.gl,i))this.colorBufferHalfFloatExtension=YC(this.gl,i);else if(Te().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Ea(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Ea(this.gl,i))this.colorBufferHalfFloatExtension=this.gl.getExtension(i);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=sAt(this.gl),this.indexBuffer=aAt(this.gl),this.framebuffer=QTt(this.gl),this.textureConfig=kH(this.gl,this.textureHalfFloatExtension)}get debug(){return Te().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;ot(e,()=>e.finish()),ot(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),ot(e,()=>e.deleteFramebuffer(this.framebuffer)),ot(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),ot(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),ot(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),lAt(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),cAt(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),uAt(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),mAt(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,i){this.throwIfDisposed(),pAt(this.gl,e,n,r,i,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),fAt(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),dAt(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(GQ(this.gl,this.framebuffer),this.outputTexture=null),ot(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>yAt(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,i,o,s){return bAt(this.gl,e,n,r,i,o,s,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return vAt(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const i=gAt(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(Te().getBool("WEBGL_FENCE_API_ENABLED")){const i=e,o=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const s=i.clientWaitSync(o,0,0);return s===i.ALREADY_SIGNALED||s===i.CONDITION_SATISFIED},n=o}else Te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,Te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>xAt(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=oAt(n));const r=HTt(n);ot(n,()=>n.attachShader(r,this.vertexShader)),ot(n,()=>n.attachShader(r,e)),GTt(n,r);const i=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&WP(n,i),i}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;ot(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),hAt(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(ot(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&WP(this.gl,this.program),ot(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?JTt(this.gl,e,n):ekt(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),ot(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),tkt(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[i,o]=a0(n,r);this.setOutputMatrixTextureDriver(e,i,o)}setOutputMatrixWriteRegion(e,n,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,n)}setOutputPackedMatrixWriteRegion(e,n,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&WP(this.gl,this.program),QC(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}ot(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),ot(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=YC(this.gl,Te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(Te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),o=r.createQuery();return r.beginQuery(i.TIME_ELAPSED_EXT,o),o}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(Te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await O7(()=>this.disposed||this.isQueryAvailable(e,Te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,Te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),o=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),i=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=wAt(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in Te().platform&&(r=Te().platform.setTimeoutCustom.bind(Te().platform)),O7(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),VP(this.gl,e,this.framebuffer),this.debug&&QC(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(VP(this.gl,this.outputTexture,this.framebuffer),this.debug&&QC(this.gl)):GQ(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const i=this.gl;VP(i,e,this.framebuffer),this.debug&&QC(i),this.outputTexture=e,ot(i,()=>i.viewport(0,0,n,r)),ot(i,()=>i.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,i){this.throwIfDisposed(),ot(this.gl,()=>this.gl.scissor(e,n,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function wAt(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:_At,bincountImpl:Vme,bincountReduceImpl:SAt,bitwiseAndImpl:CAt,castImpl:EAt,ceilImpl:TAt,concatImpl:kAt,equalImpl:AAt,expImpl:MAt,expm1Impl:IAt,floorImpl:OAt,gatherNdImpl:RAt,gatherV2Impl:DAt,greaterImpl:PAt,greaterEqualImpl:NAt,lessImpl:$At,lessEqualImpl:LAt,linSpaceImpl:FAt,logImpl:BAt,maxImpl:UAt,maximumImpl:zAt,minimumImpl:jAt,multiplyImpl:WAt,negImpl:VAt,notEqualImpl:HAt,prodImpl:GAt,raggedGatherImpl:qAt,raggedRangeImpl:XAt,raggedTensorToTensorImpl:KAt,rangeImpl:YAt,rsqrtImpl:QAt,scatterImpl:ZAt,sigmoidImpl:JAt,simpleAbsImpl:Hme,sliceImpl:eMt,sparseFillEmptyRowsImpl:tMt,sparseReshapeImpl:nMt,sparseSegmentReductionImpl:Gme,sqrtImpl:rMt,staticRegexReplaceImpl:iMt,stridedSliceImpl:oMt,stringNGramsImpl:sMt,stringSplitImpl:aMt,stringToHashBucketFastImpl:lMt,subImpl:cMt,tileImpl:uMt,topKImpl:dMt,transposeImpl:OH,uniqueImpl:fMt}=m_t;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qme(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function uo(t,e){return e===1?[t]:qme(t,e)}function hMt(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pMt{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Yi(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=uo("rc",this.rank),r=On(this.rank),i=this.getOutOfBoundsCondition(n),o=this.getSetup(n),s=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${i}) {
            setOutput(vec4(0));
          } else {
            ${o}

            setOutput(vec4(${s}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let o=`${r===0?"r":"rp1"}, ${i===0?"c":"cp1"}`;for(let s=2;s<this.rank;s++)o=`${e[e.length-1-s]},`+o;n.push(o)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],i=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${i};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xme{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Yi(this.outputShape.length);let r="";for(let i=0;i<4;i++){let o="thisRC = rc;";i%2===1&&(o+="thisRC.z += 1;"),i>1&&(o+="thisRC.y += 1;"),r+=`
        ${o}
        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${i>0?"}":""}
      `}this.userCode=`
      ${mMt(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?MH():AH(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function mMt(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?hkt(["r","c","d"],"inputShape"):mm(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gMt{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const i=QQ(n,r),o=ZQ(e,i,r);o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]);const s=YQ(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=s,this.log();const l=this.freeTextures[o].pop();return this.usedTextures[o].push(l),l}let a;return i===Ti.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===Ti.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===Ti.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===Ti.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===Ti.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(a),this.numUsedTextures++,this._numBytesAllocated+=s,this.log(),a}releaseTexture(e,n,r,i){if(this.freeTextures==null)return;const o=QQ(r,i),s=ZQ(n,o,i);s in this.freeTextures||(this.freeTextures[s]=[]);const a=YQ(n,o,this.gpgpu.gl,this.gpgpu.textureConfig,i),l=Te().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[s].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const c=this.usedTextures[s],u=c&&c.indexOf(e);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function vMt(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function YQ(t,e,n,r,i){const o=yMt(e,r);let s;if(i){const[l,c]=a0(t[0],t[1]);s=l*c}else{const[l,c]=lS(t[0],t[1]);s=l*c}const a=vMt(n,o);return s*a}function yMt(t,e){switch(t){case Ti.PACKED_2X2_FLOAT32:return jme(e);case Ti.PACKED_2X2_FLOAT16:return Wme(e);case Ti.UNPACKED_FLOAT32:return Bme(e);case Ti.UNPACKED_FLOAT16:return Ume(e);case Ti.PACKED_4X1_UNSIGNED_BYTE:return zme(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function bMt(t){return Te().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Ti.PACKED_2X2_FLOAT32:Ti.UNPACKED_FLOAT32:t?Ti.PACKED_2X2_FLOAT16:Ti.UNPACKED_FLOAT16}function QQ(t,e){if(t===Is.UPLOAD)return Ti.PACKED_2X2_FLOAT32;if(t===Is.RENDER||t==null)return bMt(e);if(t===Is.DOWNLOAD||t===Is.PIXELS)return Ti.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function ZQ(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lc{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Yi(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Va="if (isnan(x)) return x;",xMt="return x;",JQ="return abs(x);",wMt="return (x >= 0.0) ? x : (exp(x) - 1.0);",_Mt=Va+`
  return (x < 0.0) ? 0.0 : x;
`,SMt=Va+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Td="return x;",CMt="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EMt="return x;",TMt=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,kMt=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,AMt=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,MMt="return 1.0 / (1.0 + exp(-1.0 * x));";class Wd{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Yi(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IMt{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Yi(this.outputShape.length);const n=e.length,r=uo("rc",n),i=On(n),o=hMt(n,r),s=r.slice(-2),a=n<=1?"rc":`vec2(${s.join(",")})`;this.userCode=`
      void main() {
        ${i} rc = getOutputCoords();
        vec4 packedInput = getA(${o});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OMt=yde,RMt=1e-7,DMt=1e-4,eE={};function PMt(t){return t in eE||(eE[t]={}),eE[t]}const NMt=Te().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),$Mt=600;function LMt(){return Te().global.screen==null?1024:Te().global.screen.height*Te().global.screen.width*window.devicePixelRatio*$Mt/1024/1024}class V2 extends j4{nextDataId(){return V2.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Te().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof qP)n=e;else{const r=Il(Te().getNumber("WEBGL_VERSION"),e);n=new qP(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Il(Te().getNumber("WEBGL_VERSION"));n=new qP(r),this.binaryCache=PMt(Te().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new gMt(this.gpgpu),this.numMBBeforeWarning=LMt(),this.texData=new Uce(this,Bl())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,i,o,s){const a=this.makeTensorInfo(n,r),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[i,o]},l.texShape=[i,o];const c=ZC(n),u=new KQ(c,!1,s),d=this.runWebGLProgram(u,[a],r,[[i,o]]);return d.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(a),d.dataId}write(e,n,r){if((Te().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Te().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const i={id:this.nextDataId()};return this.texData.set(i,{shape:n,dtype:r,values:e,usage:Is.UPLOAD,refCount:1}),i}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,i,o){if(Te().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:i,values:n,usage:Is.UPLOAD,refCount:o})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:i,complexTensorInfos:o,slice:s,shape:a,isPacked:l}=n;if(s!=null){let f;l?f=new Wd(a,Td):f=new lc(a,Td);const h=this.runWebGLProgram(f,[{dataId:e,shape:a,dtype:i}],i),g=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),g}if(r!=null)return this.convertAndCacheOnCPU(e);if(i==="string")return r;const c=this.activeTimers!=null;let u;c&&(u=Co());let d;if(i==="complex64"){const f=this.readSync(o.real.dataId),h=this.readSync(o.imag.dataId);d=Hu(f,h)}else d=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=Co()-u),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const g=this.pendingRead.get(e);return new Promise(p=>g.push(p))}const n=this.texData.get(e),{values:r,shape:i,slice:o,dtype:s,complexTensorInfos:a,isPacked:l}=n;if(o!=null){let g;l?g=new Wd(i,Td):g=new lc(i,Td);const p=this.runWebGLProgram(g,[{dataId:e,shape:i,dtype:s}],s),m=this.read(p.dataId);return this.disposeIntermediateTensorInfo(p),m}if(r!=null)return this.convertAndCacheOnCPU(e);if(Te().getBool("DEBUG")&&!Te().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Te().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,u;if(s!=="complex64"&&Te().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);const g=this.texData.get(u.dataId);c=this.gpgpu.createBufferFromTexture(g.texture.texture,...KC(i))}this.pendingRead.set(e,[]),s!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(s==="complex64"){const g=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),p=g[0],m=g[1];d=Hu(p,m)}else if(c==null)d=this.getValuesFromTexture(e);else{const g=Re(i);d=this.gpgpu.downloadFloat32MatrixFromBuffer(c,g)}if(u!=null&&this.disposeIntermediateTensorInfo(u),c!=null){const g=this.gpgpu.gl;ot(g,()=>g.deleteBuffer(c))}const f=this.convertAndCacheOnCPU(e,d),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach(g=>g(f)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Bl().removeDataId(e,this),this.pendingDeletes--),f}readToGPU(e,n={}){const r=this.texData.get(e),{values:i,shape:o,slice:s,dtype:a,isPacked:l,texture:c}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(s!=null){let h;l?h=new Wd(o,Td):h=new lc(o,Td);const g=this.runWebGLProgram(h,[{dataId:e,shape:o,dtype:a}],a),p=this.readToGPU(g,n);return this.disposeIntermediateTensorInfo(g),p}if(c==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,n.customTexShape),d=Bl().makeTensorFromTensorInfo(u),f=this.texData.get(u.dataId);return Object.assign({tensorRef:d},f.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>wf(i));return Vt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Vt(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!UTt(r))throw Te().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:i}=this.texData.get(e),o=Re(n);if(Te().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const f=this.decode(e),h=this.texData.get(f.dataId),g=this.gpgpu.downloadMatrixFromPackedTexture(h.texture.texture,...KC(n)).subarray(0,o);return this.disposeIntermediateTensorInfo(f),g}const s=Te().getBool("WEBGL_PACK")&&i===!0,a=s?ZC(n):n,l=s?new nAt(a):new tAt(a),c=this.runWebGLProgram(l,[{shape:a,dtype:r,dataId:e}],"float32"),u=this.texData.get(c.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(c),d}timerAvailable(){return Te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let i=!1;this.programTimersStack==null?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,e();const o=Lp(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),s=Lp(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,i&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(o);a.kernelMs=ndt(l),a.getExtraProfileInfo=()=>l.map((c,u)=>({name:s[u],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Co(),endMs:null}}endTimer(e){return Te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Co(),e)}async getQueryTime(e){if(Te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:i,usage:o,isPacked:s,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,o,s)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=NMt){return Te().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&Re(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Es("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return OMt(e.shape,n)}packedUnaryOp(e,n,r){const i=new Wd(e.shape,n),o=this.compileAndRun(i,[e],r);return Bl().makeTensorFromTensorInfo(o)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const i=Hme(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,i)}if(Te().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,JQ,e.dtype);const n=new lc(e.shape,JQ),r=this.compileAndRun(n,[e]);return Bl().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&q_(r[0])){const o=r.map(s=>lf(s));i=this.write(o,e,n)}else i=this.write(r,e,n);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:n}}makeOutput(e,n,r){return Bl().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new IMt(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new pMt(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[my(e.shape),...gy(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},o=[my(n),...gy(n)],s=new Xme(o,r),a=!0,l=[r],c=this.runWebGLProgram(s,[i],e.dtype,l,a);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:i,shape:o,dtype:s}=r;if(n!=null){const f=Re(o),h=n[0]*n[1]*4;Y(f<=h,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=ZC(o);let l;i?l=new eAt(a):l=new Jkt(a);const c=!0,u=[n??KC(a)],d=this.runWebGLProgram(l,[{shape:a,dtype:s,dataId:e}],s,u,c,n);return{dtype:s,shape:o,dataId:d.dataId}}runWebGLProgram(e,n,r,i,o=!1,s){const a=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===Bw.DENSE){const v=s??KC(e.outputShape);l.texShape=v.map(_=>_*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),Re(a.shape)===0)return l.values=Hi(a.dtype,0),a;const c=[],u=n.map(v=>{if(v.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let _=this.texData.get(v.dataId);if(_.texture==null){if(!e.packedInputs&&Re(v.shape)<=Te().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:v.shape,texData:null,isUniform:!0,uniformValues:_.values};e.packedInputs&&(_.isPacked=!0,_.shape=v.shape)}if(this.uploadToGPU(v.dataId),!!_.isPacked!=!!e.packedInputs)v=_.isPacked?this.unpackTensor(v):this.packTensor(v),c.push(v),_=this.texData.get(v.dataId);else if(_.isPacked&&!FA(_.shape,v.shape)){const w=v,y=v.shape;v.shape=_.shape,v=this.packedReshape(v,y),c.push(v),_=this.texData.get(v.dataId),w.shape=y}return{shape:v.shape,texData:_,isUniform:!1}});this.uploadToGPU(a.dataId);const d={shape:a.shape,texData:l,isUniform:!1},f=Zkt(e,u,d),h=this.getAndSaveBinary(f,()=>Ykt(this.gpgpu,e,u,d)),g=this.activeTimers!=null;let p;g&&(p=this.startTimer()),Te().get("ENGINE_COMPILE_ONLY")||Qkt(this.gpgpu,h,u,d,i),c.forEach(v=>this.disposeIntermediateTensorInfo(v)),g&&(p=this.endTimer(p),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(p)}));const m=Te().getNumber("WEBGL_FLUSH_THRESHOLD");if(m>0){const v=Co();v-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=v)}if(!Te().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&o===!1){const v=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),v}return a}compileAndRun(e,n,r,i,o=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,i,o)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Te().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Se(()=>{if(!Te().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Te().getBool("DEBUG");Te().set("DEBUG",!1);const n=this.abs(dn(1e-8)).dataSync()[0];if(Te().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?RMt:DMt}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:i,values:o,texture:s,usage:a,isPacked:l}=n;if(s!=null)return;const c=this.activeTimers!=null;let u;c&&(u=Co());let d=n.texShape;if(d==null&&(d=ikt(r,l),n.texShape=d),o!=null){const f=ZC(r);let h,g=d[1],p=d[0];const m=o instanceof Uint8Array||o instanceof Uint8ClampedArray;(l||!m)&&([g,p]=a0(d[0],d[1])),l?h=new iAt(f,m):h=new KQ(f,m);const v=m?[p,g]:d,_=this.makeTensorInfo(v,i),w=this.texData.get(_.dataId);m?w.usage=Is.PIXELS:w.usage=Is.UPLOAD,w.texShape=v,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(_.dataId),g,p,o);const y=[[p,g]],x=this.runWebGLProgram(h,[_],i,y,!0),S=this.texData.get(x.dataId);n.texShape=S.texShape,n.isPacked=S.isPacked,n.usage=S.usage,Te().get("ENGINE_COMPILE_ONLY")?this.disposeData(x.dataId):(n.texture=S.texture,n.values=null,this.texData.delete(x.dataId)),this.disposeIntermediateTensorInfo(_),c&&(this.uploadWaitMs+=Co()-u)}else{const f=this.acquireTexture(d,a,i,l);n.texture=f}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:i}=r;return n!=null&&(r.values=FMt(n,i)),r.values}acquireTexture(e,n,r,i){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${o} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,i)}computeBytes(e,n){return e[0]*e[1]*dA(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(i=>{try{this.checkCompletion_(n),i(!0)}catch(o){throw o}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await Lde(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(Dme(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:i,nanLoc:o,outShapeLocation:s,outShapeStridesLocation:a,outTexShapeLocation:l}=Fme(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=i,e.nanLoc=o,e.outShapeLocation=s,e.outShapeStridesLocation=a,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:i,height:o,width:s,channels:a}=e,l=Bl().backend;if(!l.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(i,n,r,o,s,a);return Bl().makeTensorFromDataId(c,n,r,l)}}V2.nextDataId=0;function FMt(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Rue()&&Nue("webgl",()=>new V2,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RH=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Yp{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=Lt(n,r),this.enableShapeUniforms=Yi(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vm=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class f0{constructor(e,n,r,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Lt(n,r);const o=this.outputShape.length;this.enableShapeUniforms=Yi(o);let s="";if(i)if(o===0||Re(this.outputShape)===1)s=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(s=`
          ${On(o)} coords = getOutputCoords();
        `,o===1)this.enableShapeUniforms?s+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:s+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=uo("coords",o);this.enableShapeUniforms?s+=`
            bool nextRowOutOfBounds =
              (${l[o-2]} + 1) >= outShape[${o} - 2];
            bool nextColOutOfBounds =
              (${l[o-1]} + 1) >= outShape[${o} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:s+=`
            bool nextRowOutOfBounds =
              (${l[o-2]} + 1) >= ${this.outputShape[o-2]};
            bool nextColOutOfBounds =
              (${l[o-1]} + 1) >= ${this.outputShape[o-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${s}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ds(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const BMt={kernelName:p1,backendName:"webgl",kernelFunc:ds};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yf(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,o=n.makeTensorInfo(r.shape,"complex64"),s=n.texData.get(o.dataId),a=ds({inputs:{x:r},backend:n}),l=ds({inputs:{x:i},backend:n});return s.complexTensorInfos={real:a,imag:l},o}const UMt={kernelName:nW,backendName:"webgl",kernelFunc:Yf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kme="return (a < 0.) ? b * a : a;",Yme=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function zMt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:o}=r,s=n.makeTensorInfo([],"float32",zf(o,"float32")),a=Te().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new f0(Yme,i.shape,s.shape):new Yp(Kme,i.shape,s.shape),l=n.runWebGLProgram(a,[i,s],"float32");return n.disposeIntermediateTensorInfo(s),l}const jMt={kernelName:UO,backendName:"webgl",kernelFunc:zMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qme="return (a < 0.) ? b * a : a;",Zme=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function WMt(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e,o=Te().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new f0(Zme,r.shape,i.shape):new Yp(Qme,r.shape,i.shape);return n.runWebGLProgram(o,[r,i],"float32")}const VMt={kernelName:o2,backendName:"webgl",kernelFunc:WMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h0="if (isnan(x)) return x;";function tn({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:i,backend:o})=>{const{x:s}=i,a=o,l=r||s.dtype;if(a.shouldExecuteOnCPU([s])&&n!=null){const d=a.texData.get(s.dataId),f=n(d.values,l);return a.makeTensorInfo(s.shape,l,f)}const c=Te().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let u;return c?u=new Wd(s.shape,e):u=new lc(s.shape,t),a.runWebGLProgram(u,[s],l)}}function Ni({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:o}){return({inputs:s,backend:a})=>{const{a:l,b:c}=s,u=a;if(r&&l.dtype==="complex64"){const g=u.texData.get(l.dataId),p=u.texData.get(c.dataId),[m,v]=[[g.complexTensorInfos.real,p.complexTensorInfos.real],[g.complexTensorInfos.imag,p.complexTensorInfos.imag]].map(w=>{const[y,b]=w,x={dataId:y.dataId,dtype:y.dtype,shape:l.shape},S={dataId:b.dataId,dtype:b.dtype,shape:c.shape},C=new Yp(t,l.shape,c.shape);return u.runWebGLProgram(C,[x,S],cs(y.dtype,b.dtype))}),_=Yf({inputs:{real:m,imag:v},backend:u});return u.disposeIntermediateTensorInfo(m),u.disposeIntermediateTensorInfo(v),_}const d=o||cs(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&i!=null){const g=u.texData.get(l.dataId).values,p=u.texData.get(c.dataId).values,m=l.dtype==="string"?Gu(g):g,v=l.dtype==="string"?Gu(p):p,[_,w]=i(l.shape,c.shape,m,v,d),y=u.makeTensorInfo(w,d),b=u.texData.get(y.dataId);return b.values=_,y}const f=Te().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let h;return f?h=new f0(e,l.shape,c.shape,n):h=new Yp(t,l.shape,c.shape),u.runWebGLProgram(h,[l,c],d)}}function Uw(t,e=!1){if(t==="linear")return e?EMt:xMt;if(t==="relu")return e?kMt:_Mt;if(t==="elu")return e?TMt:wMt;if(t==="relu6")return e?AMt:SMt;if(t==="prelu")return e?Zme:Qme;if(t==="leakyrelu")return e?Yme:Kme;if(t==="sigmoid")return e?MMt:CMt;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jme{constructor(e,n,r,i=!1,o=!1,s=!1,a=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Yi(this.outputShape.length);const u=i?e[1]:e[2],d=Math.ceil(u/2),f=i?"i * 2, rc.y":"rc.y, i * 2",h=o?"rc.z, i * 2":"i * 2, rc.z",g=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],p=o?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",v="";a&&(l?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:c?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:m=`vec4 activation(vec4 x) {
          ${a}
        }`,v="result = activation(result);");const _=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let w="rc.x",y="rc.x";e[0]<n[0]?w=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(y=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${m}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${w};
        int batchB = ${y};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${f});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${g[0]} * ${p[0]});
          result += (${g[1]} * ${p[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${_}

        ${v}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eZ={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class tZ{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Lt(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nZ="return a * b;";function DH(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,o=cs(r.dtype,i.dtype);if(r.dtype==="complex64"){const a=n.texData.get(r.dataId),l=n.texData.get(i.dataId),c=new tZ(eZ.REAL,r.shape,i.shape),u=new tZ(eZ.IMAG,r.shape,i.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],f=n.runWebGLProgram(c,d,"float32"),h=n.runWebGLProgram(u,d,"float32"),g=Yf({inputs:{real:f,imag:h},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),g}if(n.shouldExecuteOnCPU([r,i])){const a=n.texData.get(r.dataId),l=n.texData.get(i.dataId),[c,u]=WAt(r.shape,i.shape,a.values,l.values,o),d=n.makeTensorInfo(u,o),f=n.texData.get(d.dataId);return f.values=c,d}let s;return Te().getBool("WEBGL_PACK_BINARY_OPERATIONS")?s=new f0(nZ,r.shape,i.shape):s=new Yp(nZ,r.shape,i.shape),n.runWebGLProgram(s,[r,i],o)}const HMt={kernelName:S1,backendName:"webgl",kernelFunc:DH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GMt(t,e,n){const r=[my(t.shape),...gy(t.shape)],i={dtype:t.dtype,shape:r,dataId:t.dataId},o=[my(e),...gy(e)],s=new Xme(o,r),a=!0,l=[r],c=n.runWebGLProgram(s,[i],t.dtype,l,a);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:o}=r,s=n,a=Re(i.shape),l=zce(o,a),c=Re(l);Y(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const u=s.texData.get(i.dataId);return u.isPacked&&!FA(i.shape,l)&&!(u.texture!==null&&FA(u.shape,l))?GMt(i,l,s):(s.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype})}const qMt={kernelName:a2,backendName:"webgl",kernelFunc:nt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rZ{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:o,outSize:s}=e;this.outputShape=[i,s];const a=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(n!=null){const d=1/n;c=`sumValue += dot(values * ${iy(d)?d.toPrecision(2):d}, ones);`}let u="";o%r>0&&(u=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XMt{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:o,outSize:s}=e;this.outputShape=[i,s];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const u=Math.floor(r/4)*4,d=r%4;let f=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";n==="all"?(a="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(a="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let g="";o%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${g}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${f}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${f}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KMt(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=A2(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function ym(t,e,n,r){const i=KMt(t.shape);let o=t;for(let s=0;s<i.length;s++){const{inSize:a,windowSize:l,outSize:c}=i[s];let u,d;n==="mean"?u=s===0?new rZ({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},a):new rZ({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c}):u=new XMt({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},n),d=o,o=r.runWebGLProgram(u,[o],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return o}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YMt{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let s=0;s<r.length;s++)r[s]=e[n[s]];this.outputShape=r,this.rank=r.length;const i=On(this.rank),o=QMt(n);this.userCode=`
    void main() {
      ${i} resRC = getOutputCoords();
      setOutput(getA(${o}));
    }
    `}}function QMt(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let i=0;i<t.length;i++)r[t[i]]=n[i];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZMt{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let u=0;u<r.length;u++)r[u]=e[n[u]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const i=On(this.rank),o=qme("rc",this.rank),s=new Array(this.rank);for(let u=0;u<n.length;u++)s[n[u]]=o[u];const a=`vec2(${s.slice(-2).join()})`,l=`++${o[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${s.join()}), ${a})`;this.userCode=`
    void main() {
      ${i} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${o[this.rank-1]};
      if(++${o[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H2(t,e,n){const r=Te().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ZMt(t.shape,e):new YMt(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JMt(t,e,n,r){const i=e,o=t.shape.length,s=Gt(i,t.shape);let a=s;const l=cr(a,o),c=l!=null;let u=t;c&&(u=H2(t,l,r),a=Er(a.length,o)),Pi("sum",a,o);const[d,f]=bi(u.shape,a);let h=d;n&&(h=$r(d,s));const g=Re(f),m=Re(t.shape)/g,v=nt({inputs:{x:u},attrs:{shape:[m,g]},backend:r}),_=LW(t.dtype),w=ym(v,_,"sum",r),y=nt({inputs:{x:w},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(w),c&&r.disposeIntermediateTensorInfo(u),y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G2(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,keepDims:s}=r;return JMt(i,o,s,n)}const eIt={kernelName:h2,backendName:"webgl",kernelFunc:G2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mo(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{perm:o}=r,s=n,a=i.shape.length,l=new Array(a);for(let u=0;u<l.length;u++)l[u]=i.shape[o[u]];let c;if(s.shouldExecuteOnCPU([i])){const d=s.texData.get(i.dataId).values,f=OH(d,i.shape,i.dtype,o,l);c=s.makeTensorInfo(l,i.dtype);const h=s.texData.get(c.dataId);h.values=f}else c=H2(i,o,s);return c}const tIt={kernelName:sv,backendName:"webgl",kernelFunc:mo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ege=1e3;function BA({a:t,b:e,transposeA:n,transposeB:r,backend:i,bias:o=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:l=null}){const c=t.shape.length,u=e.shape.length,d=n?t.shape[c-2]:t.shape[c-1],f=r?e.shape[u-1]:e.shape[u-2],h=n?t.shape[c-1]:t.shape[c-2],g=r?e.shape[u-2]:e.shape[u-1],p=t.shape.slice(0,-2),m=e.shape.slice(0,-2),v=Re(p),_=Re(m),y=Lt(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([h,g]);Y(d===f,()=>`Error in matMul: inner shapes (${d}) and (${f}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const b=n?[v,d,h]:[v,h,d],x=r?[_,g,f]:[_,f,g],S=nt({inputs:{x:t},backend:i,attrs:{shape:b}}),C=nt({inputs:{x:e},backend:i,attrs:{shape:x}}),T=[S,C],E=Math.max(v,_),k=n?S.shape[1]:S.shape[2],A=o!=null,O=s!=null,D=l==="leakyrelu",P=l!=null?Uw(l,!0):null,N=A||O||D||P!=null;let U;if((h===1||g===1)&&k>ege&&N===!1){let V=S,G=C;n&&(V=mo({inputs:{x:S},backend:i,attrs:{perm:[0,2,1]}}),T.push(V)),r&&(G=mo({inputs:{x:C},backend:i,attrs:{perm:[0,2,1]}}),T.push(G));const Q=g!==1,te=g===1;let ne=V;Q&&(ne=nt({inputs:{x:V},backend:i,attrs:{shape:[E,k,1]}}),T.push(ne));const ee=g===1?2:1;let re=G;te&&(re=nt({inputs:{x:G},backend:i,attrs:{shape:[E,1,k]}}),T.push(re));const se=DH({inputs:{a:ne,b:re},backend:i});U=G2({inputs:{x:se},backend:i,attrs:{axis:ee,keepDims:!0}}),T.push(se)}else{const V=cs(t.dtype,e.dtype),G=new Jme(b,x,[E,h,g],n,r,A,P,O,D),Q=[S,C];if(o!=null&&Q.push(o),O&&Q.push(s),D){const te=i.makeTensorInfo([],"float32",zf(a,"float32"));Q.push(te),T.push(te)}U=i.runWebGLProgram(G,Q,V)}const L=nt({inputs:{x:U},backend:i,attrs:{shape:y}});T.push(U);for(const V of T)i.disposeIntermediateTensorInfo(V);return L}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nIt(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:o,bias:s,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;return BA({a:i,b:o,transposeA:l,transposeB:c,backend:n,bias:s,preluActivationWeights:a,leakyreluAlpha:d,activation:u})}const rIt={kernelName:fA,backendName:"webgl",kernelFunc:nIt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iZ="return abs(x);";function iIt(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const o=n.texData.get(r.dataId),s=Hme(o.values);return n.makeTensorInfo(r.shape,r.dtype,s)}let i;return Te().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new Wd(r.shape,iZ):i=new lc(r.shape,iZ),n.runWebGLProgram(i,[r],r.dtype)}const oIt={kernelName:xO,backendName:"webgl",kernelFunc:iIt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sIt=Va+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,aIt=tn({opSnippet:sIt}),lIt={kernelName:X_,backendName:"webgl",kernelFunc:aIt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cIt=Va+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,uIt=tn({opSnippet:cIt}),dIt={kernelName:K_,backendName:"webgl",kernelFunc:uIt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oZ="return a + b;",fIt=Ni({opSnippet:oZ,packedOpSnippet:oZ,supportsComplex:!0,cpuKernelImpl:_At}),hIt={kernelName:t0,backendName:"webgl",kernelFunc:fIt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pIt{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((o,s)=>`T${s}`);const r=[];this.variableNames.forEach(o=>{r.push(`float v${o} = get${o}AtOutCoords();`)});const i=this.variableNames.map(o=>`v${o}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mIt{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((o,s)=>`T${s}`);const r=[];this.variableNames.forEach(o=>{r.push(`vec4 v${o} = get${o}AtOutCoords();`)});const i=this.variableNames.map(o=>`v${o}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KE(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return ds({inputs:{x:r[0]},backend:n});if(r.length>Te().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=KE({inputs:r.slice(0,l),backend:n}),u=KE({inputs:r.slice(l),backend:n});return KE({inputs:[c,u],backend:n})}const i=r.map(l=>l.dtype).reduce((l,c)=>cs(l,c)),o=r.map(l=>l.shape),a=Te().getBool("WEBGL_PACK")?new mIt(r[0].shape,o):new pIt(r[0].shape,o);return n.runWebGLProgram(a,r,i)}const gIt={kernelName:K4,backendName:"webgl",kernelFunc:KE};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vIt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,keepDims:s}=r,a=i.shape.length,l=Gt(o,i.shape);let c=l;const u=cr(c,a);let d=i;u!=null&&(d=mo({inputs:{x:i},backend:n,attrs:{perm:u}}),c=Er(c.length,a)),Pi("all",c,a);const[f,h]=bi(d.shape,c),g=Re(h),p=nt({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}}),m=ym(p,p.dtype,"all",n);let v;if(s){const _=$r(f,l);v=nt({inputs:{x:m},backend:n,attrs:{shape:_}})}else v=nt({inputs:{x:m},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),u!=null&&n.disposeIntermediateTensorInfo(d),v}const yIt={kernelName:Y4,backendName:"webgl",kernelFunc:vIt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bIt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,keepDims:s}=r,a=i.shape.length,l=Gt(o,i.shape);let c=l;const u=cr(c,a);let d=i;u!=null&&(d=mo({inputs:{x:i},backend:n,attrs:{perm:u}}),c=Er(c.length,a)),Pi("any",c,a);const[f,h]=bi(d.shape,c),g=Re(h),p=nt({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}}),m=ym(p,p.dtype,"any",n);let v;if(s){const _=$r(f,l);v=nt({inputs:{x:m},backend:n,attrs:{shape:_}})}else v=nt({inputs:{x:m},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),u!=null&&n.disposeIntermediateTensorInfo(d),v}const xIt={kernelName:Q4,backendName:"webgl",kernelFunc:bIt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wIt{constructor(e,n,r){this.variableNames=["A"];const{windowSize:i,batchSize:o,outSize:s}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[o,s];const a=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${i}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _It{constructor(e,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Y(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const o=e[e.length-1],s=Math.ceil(o/n);this.outputShape=e.slice(0,-1),s>1&&this.outputShape.push(s),i||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,c=On(l),u=uo("coords",l);let d,f;if(s===1){f=l+1;const C=On(f);d=`
        ${C} sourceLocR = ${C}(${u.join()}, 0);
        ++${u[l-1]};
        ${C} sourceLocG = ${C}(${u.join()}, 0);
        ++${u[l-2]};
        ${C} sourceLocA = ${C}(${u.join()}, 0);
        --${u[l-1]};
        ${C} sourceLocB = ${C}(${u.join()}, 0);
        --${u[l-2]};`}else f=l,d=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;const h=["x","y","z","w","u","v"].slice(0,f),g="."+h[f-1],p=h.map(C=>"int "+C),m=uo("sourceLocR",f-1).concat("inIdx.r"),v=uo("sourceLocG",f-1).concat("inIdx.g"),_=uo("sourceLocB",f-1).concat("inIdx.b"),w=uo("sourceLocA",f-1).concat("inIdx.a"),y=r==="max"?"greaterThan":"lessThan",b=i?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${m.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${_.join()}),
                             getBestIndicesAChannel(${w.join()})));`,x=`vec4(
            getAChannel(${m.join()}),
            hasNextCol ? getAChannel(${v.join()}) : 0.,
            hasNextRow ? getAChannel(${_.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${w.join()}) : 0.)`,S=i?"":`
      float getBestIndicesAChannel(${p.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${p.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${S}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${a[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${g}, sourceLocG${g},
          sourceLocB${g}, sourceLocA${g}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${x};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${b}
          vec4 candidate = ${x};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${y}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tge(t,e,n,r=null){let i=e.shape[0],o=e.shape[1];r!=null&&(i=r.shape[0],o=r.shape[1]);const s=A2(o),a={windowSize:s,inSize:o,batchSize:i,outSize:Math.ceil(o/s)},l=new wIt(a,n,r==null),c=[e];r!=null&&c.push(r);const u=t.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;const d=tge(t,e,n,u);return t.disposeIntermediateTensorInfo(u),d}function nge(t,e,n,r=null){const i=r!=null?r.shape:e.shape,o=i[i.length-1],s=A2(o),a=new _It(i,s,n,r==null),l=r==null?[e]:[e,r],c=t.runWebGLProgram(a,l,"int32");if(c.shape.length===e.shape.length){const u=nge(t,e,n,c);return t.disposeIntermediateTensorInfo(c),u}return c}function rge(t,e,n,r){const i=[n];if(Pi("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,e.shape.length),!Te().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const o=[],s=t.texData.get(e.dataId),a=s!==null&&s.isPacked;let l=e;a&&(l=t.unpackTensor(e),o.push(l));const[c,u]=bi(l.shape,i),d=Re(u),f=nt({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});o.push(f);const h=tge(t,f,r);o.push(h);const g=nt({inputs:{x:h},backend:t,attrs:{shape:c}});return o.forEach(p=>t.disposeIntermediateTensorInfo(p)),g}return nge(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SIt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o}=r;let s=Gt(o,i.shape);const a=cr(s,i.shape.length);let l=i;const c=[];a!=null&&(l=mo({inputs:{x:i},backend:n,attrs:{perm:a}}),c.push(l),s=Er(s.length,l.shape.length)),Pi("argMax",[s[0]],l.shape.length);const u=rge(n,l,s[0],"max");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const CIt={kernelName:wO,backendName:"webgl",kernelFunc:SIt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EIt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o}=r;let s=Gt(o,i.shape);const a=cr(s,i.shape.length);let l=i;const c=[];a!=null&&(l=mo({inputs:{x:i},backend:n,attrs:{perm:a}}),c.push(l),s=Er(s.length,l.shape.length)),Pi("argMin",[s[0]],l.shape.length);const u=rge(n,l,s[0],"min");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const TIt={kernelName:_O,backendName:"webgl",kernelFunc:EIt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kIt=Va+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,AIt=tn({opSnippet:kIt}),MIt={kernelName:Y_,backendName:"webgl",kernelFunc:AIt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IIt=Va+"return log(x + sqrt(x * x + 1.0));",OIt=tn({opSnippet:IIt}),RIt={kernelName:Q_,backendName:"webgl",kernelFunc:OIt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DIt=Va+`
  return atan(x);
`,PIt=tn({opSnippet:DIt}),NIt={kernelName:Z_,backendName:"webgl",kernelFunc:PIt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $It=RH+`
  return atan(a, b);
`,LIt=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+vm+`
  return result;
`,FIt=Ni({opSnippet:$It,packedOpSnippet:LIt}),BIt={kernelName:e1,backendName:"webgl",kernelFunc:FIt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UIt=Va+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,zIt=tn({opSnippet:UIt}),jIt={kernelName:J_,backendName:"webgl",kernelFunc:zIt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zw{constructor(e,n,r,i=!1,o=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const s=e.filterWidth,a=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;const p=n==="avg",m=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,v=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let _="0.0";if(p||(_="-1.0 / 1e-20"),r){const C=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${h}, ${g});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${C} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${i?o?m:v:`wR * ${f} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let y=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(y="avgValue / max(count, 1.0)");const b=Math.floor(s/4)*4,x=s%4,S=`
      if (${p}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${h}, ${g});
      const float initializationValue = ${_};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${_});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${b}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${S}
          }

          int xC = xCCorner + ${b};
          if (${x===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${S}
          } else if (${x===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${S}
          } else if (${x===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${S}
          }
        }
        setOutput(${y});
      }
    `}}class PH{constructor(e,n,r,i=!1,o=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const s=e.filterWidth,a=e.strideDepth,l=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,d=e.dilationHeight,f=e.dilationWidth,h=e.effectiveFilterDepth,g=e.effectiveFilterHeight,p=e.effectiveFilterWidth,m=e.padInfo.front,v=e.padInfo.top,_=e.padInfo.left;this.outputShape=e.outShape;const w=n==="avg";let y="0.0";if(w||(y="-1.0 / 1e-20"),r){const E=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${c});
        const ivec3 pads = ivec3(${m}, ${v}, ${_});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${g};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${p};
                  wC += ${f}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${E} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${i?o?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${g} * ${p} +
                      wR * ${p} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const b="max";let x=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(x="avgValue / max(count, 1.0)");const S=Math.floor(s/4)*4,C=s%4,T=`
      if (${w}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${b}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${c});
      const ivec3 pads = ivec3(${m}, ${v}, ${_});
      const float initializationValue = ${y};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${y});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${g};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${S}; wC += 4) {
              int xC = xCCorner + wC * ${f};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                getValue(batch, xD, xR, xC + 3 * ${f}, ch)
              );

              ${T}
            }

            int xC = xCCorner + ${S};
            if (${C===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${T}
            } else if (${C===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                initializationValue,
                initializationValue
              );

              ${T}
            } else if (${C===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                initializationValue
              );

              ${T}
            }
          }
        }
        setOutput(${x});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WIt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;cS(i,"avgPool");const{filterSize:o,strides:s,pad:a,dimRoundingMode:l}=r,c=1;Y(Xi(s,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const u=ja(i.shape,o,s,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&mn(u.inShape,u.outShape))return ds({inputs:{x:i},backend:n});const d=new zw(u,"avg",!1);return n.runWebGLProgram(d,[i],"float32")}const VIt={kernelName:SO,backendName:"webgl",kernelFunc:WIt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HIt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:o,strides:s,pad:a,dimRoundingMode:l,dataFormat:c}=r,u=[1,1,1],d=id(i.shape,o,s,u,a,l,c),f=new PH(d,"avg",!1);return n.runWebGLProgram(f,[i],"float32")}const GIt={kernelName:CO,backendName:"webgl",kernelFunc:HIt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qIt{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,o=e.strideWidth,s=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=l-1-e.padInfo.top,d=c-1-e.padInfo.left,f=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${d});
      const float avgMultiplier = float(${f});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class XIt{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,o=e.strideDepth,s=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterDepth,f=e.effectiveFilterHeight,h=e.effectiveFilterWidth,g=d-1-e.padInfo.front,p=f-1-e.padInfo.top,m=h-1-e.padInfo.left,v=1/(n*r*i);this.userCode=`
      const ivec3 pads = ivec3(${g}, ${p}, ${m});
      const float avgMultiplier = float(${v});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${o}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${f};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KIt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:o}=e,s=o,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],f=id(s.shape,a,l,d,c,u),h=new XIt(f);return n.runWebGLProgram(h,[i],s.dtype)}const YIt={kernelName:J4,backendName:"webgl",kernelFunc:KIt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QIt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:o}=e,s=o;cS([i,o],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=ja(s.shape,a,l,1,c),d=new qIt(u);return n.runWebGLProgram(d,[i],s.dtype)}const ZIt={kernelName:Z4,backendName:"webgl",kernelFunc:QIt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JIt(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:o}=e,{transposeA:s,transposeB:a}=r;return BA({a:i,b:o,transposeA:s,transposeB:a,backend:n})}const eOt={kernelName:EO,backendName:"webgl",kernelFunc:JIt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tOt{constructor(e,n,r,i,o,s){this.outputShape=[],this.variableNames=["x","mean","variance"],Lt(e,n),Lt(e,r);let a="0.0";i!=null&&(Lt(e,i),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";o!=null&&(Lt(e,o),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${s}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nOt{constructor(e,n,r,i,o,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Lt(e,n),Lt(e,r);let a="vec4(0.0)";i!=null&&(Lt(e,i),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";o!=null&&(Lt(e,o),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${s}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rOt=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:i,variance:o,offset:s,scale:a}=t;Y(i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Y(s==null||i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Y(a==null||i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[r,i,o];let u=null;s!=null&&(u=s.shape,c.push(s));let d=null;a!=null&&(d=a.shape,c.push(a));const f=Te().getBool("WEBGL_PACK_NORMALIZATION")?new nOt(r.shape,i.shape,o.shape,u,d,l):new tOt(r.shape,i.shape,o.shape,u,d,l);return e.runWebGLProgram(f,c,c[0].dtype)},iOt={kernelName:LO,backendName:"webgl",kernelFunc:rOt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oOt{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=On(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=sOt(this.rank);let i;const o=e.map((s,a)=>`sourceLoc.${F3[a]} = start[${a}] + coords.${F3[a]};`);i=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${o.join(`
`)}
      `,this.userCode=`
      void main() {
        ${i}
        setOutput(getSource(${r}));
      }
    `}}const F3=["x","y","z","w","u","v"];function sOt(t){if(t===1)return"sourceLoc";if(t<=6)return F3.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aOt{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=On(this.rank),r=uo("coords",this.rank),i=uo("sourceLoc",this.rank),o=this.rank===1?"sourceLoc":`vec2(${i.slice(-2).join()})`,s=`getChannel(getSource(${i.join()}), ${o})`,a=`
      result.x = ${s};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${i[this.rank-1]};
        result.y = ${s};
        --${i[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${i[this.rank-2]};
        result.z = ${s};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${i[this.rank-1]};
          result.w = ${s};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((u,d)=>`start[${d}]`).join()});`:e.map((u,d)=>`${i[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lOt(t,e,n,r){const i=r.texData.get(t.dataId),o=r.makeTensorInfo(n,t.dtype),s=r.texData.get(o.dataId);Object.assign(s,i),s.refCount=1,s.shape=n,s.dtype=t.dtype;let a=kV(e,_t(t.shape));i.slice&&(a+=i.slice.flatOffset),s.slice={flatOffset:a,origDataId:i.slice&&i.slice.origDataId||t.dataId};const l=r.dataRefCount.get(s.slice.origDataId)||1;return r.dataRefCount.set(s.slice.origDataId,l+1),o}function p0(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:o,size:s}=r,[a,l]=k2(i,o,s);if(CV(i,a,l),Re(l)===0)return n.makeTensorInfo(l,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||i.dtype==="string"){const d=n.texData.get(i.dataId),f=eMt(d.values,a,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,f)}const{isPacked:c}=n.texData.get(i.dataId),u=TV(i.shape,a,l);if(c||!u){const d=Te().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new aOt(l):new oOt(l),f=[a];return n.runWebGLProgram(d,[i],i.dtype,f)}return n.uploadToGPU(i.dataId),lOt(i,a,l,n)}const cOt={kernelName:f2,backendName:"webgl",kernelFunc:p0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uOt=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:o,crops:s}=r;Y(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=o.reduce((_,w)=>_*w),l=Y1(i.shape,o,a),c=Q1(l.length,o.length),u=Z1(i.shape,o,a),d=RV(s,o.length),f=DV(u,s,o.length),h=[],g=nt({inputs:{x:i},backend:n,attrs:{shape:l}}),p=mo({inputs:{x:g},backend:n,attrs:{perm:c}}),m=nt({inputs:{x:p},backend:n,attrs:{shape:u}}),v=p0({inputs:{x:m},backend:n,attrs:{begin:d,size:f}});return h.push(g),h.push(p),h.push(m),h.forEach(_=>n.disposeIntermediateTensorInfo(_)),v},dOt={kernelName:TO,backendName:"webgl",kernelFunc:uOt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fOt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:o}=e,{size:s}=r,a=n.readSync(i.dataId),l=n.readSync(o.dataId),c=Vme(a,l,o.dtype,o.shape,s);return n.makeTensorInfo([s],o.dtype,c)}const hOt={kernelName:eW,backendName:"webgl",kernelFunc:fOt};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pOt=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,mOt=`
  return float(int(a.r) & int(b.r));
`;function gOt(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,o=Te().getBool("WEBGL_PACK_BINARY_OPERATIONS"),s=Te().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,i])||s===1){const l=n.texData.get(r.dataId).values,c=n.texData.get(i.dataId).values,[u,d]=CAt(r.shape,i.shape,l,c,r.dtype),f=n.makeTensorInfo(d,r.dtype),h=n.texData.get(f.dataId);return h.values=u,f}let a;return o?a=new f0(pOt,r.shape,i.shape,!1):a=new Yp(mOt,r.shape,i.shape),n.runWebGLProgram(a,[r,i],r.dtype)}const vOt={kernelName:tW,backendName:"webgl",kernelFunc:gOt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yOt(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,o=n.readSync(r.dataId),s=n.readSync(i.dataId),a=Lt(Array.from(o),Array.from(s));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const bOt={kernelName:qce,backendName:"webgl",kernelFunc:yOt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xOt="return float(a != b);",ige=Ni({opSnippet:xOt,cpuKernelImpl:HAt,dtype:"bool"}),wOt={kernelName:e2,backendName:"webgl",kernelFunc:ige};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dS(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return ds({inputs:{x:i.complexTensorInfos.real},backend:n})}const _Ot={kernelName:TW,backendName:"webgl",kernelFunc:dS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SOt="return float(int(x));";function COt(t,e){const n=new lc(t.shape,SOt),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B3(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:o}=r;if(o==="complex64"){if(i.dtype==="complex64")return ds({inputs:{x:i},backend:n});const s=ui(i.shape),a=B3({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),l=Yf({inputs:{real:a,imag:s},backend:n});return s.dispose(),n.disposeIntermediateTensorInfo(a),l}if(i.dtype==="complex64"){const s=dS({inputs:{input:i},backend:n}),a=B3({inputs:{x:s},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(s),a}if(!jce(i.dtype,o)){const s=ds({inputs:{x:i},backend:n});return{dataId:s.dataId,shape:s.shape,dtype:o}}if(n.shouldExecuteOnCPU([i])){const s=n.texData.get(i.dataId).values,[a,l,c]=EAt(s,i.shape,i.dtype,o);return n.makeTensorInfo(a,l,c)}if(o==="int32")return COt(i,n);if(o==="bool"){const s=n.makeTensorInfo([],"bool",Hi("bool",1)),l=ige({inputs:{a:i,b:s},backend:n});return n.disposeIntermediateTensorInfo(s),l}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${o}`)}const EOt={kernelName:t1,backendName:"webgl",kernelFunc:B3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sZ="return ceil(x);",TOt=tn({opSnippet:sZ,packedOpSnippet:sZ,cpuKernelImpl:TAt}),kOt={kernelName:n1,backendName:"webgl",kernelFunc:TOt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AOt{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MOt{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IOt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{clipValueMin:o,clipValueMax:s}=r;let a;Te().getBool("WEBGL_PACK_CLIP")?a=new MOt(i.shape):a=new AOt(i.shape);const l=[[o],[s]];return n.runWebGLProgram(a,[i],i.dtype,l)}const OOt={kernelName:r1,backendName:"webgl",kernelFunc:IOt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ROt{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aZ(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function DOt(t){const{inputs:e,backend:n}=t,{x:r}=e,i=n.texData.get(r.dataId),o=new ROt(r.shape),s=[aZ(r,i.complexTensorInfos.real),aZ(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(o,s,s[0].dtype)}const POt={kernelName:kO,backendName:"webgl",kernelFunc:DOt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NOt{constructor(e){this.outputShape=[],this.outputShape=Tc(e,1),this.variableNames=e.map((s,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let s=1;s<n.length;s++)n[s]=n[s-1]+e[s][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let s=1;s<n.length;s++){const a=n[s-1];r.push(`else if (yC < ${n[s]}) setOutput(getT${s}(yR, yC-${a}));`)}const i=n.length,o=n[n.length-1];r.push(`else setOutput(getT${i}(yR, yC-${o}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Ot{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Tc(e,n);const r=this.outputShape,i=r.length,o=On(i),s=uo("coords",i),a=["x","y","z","w","u","v"].slice(0,i);this.variableNames=e.map((p,m)=>`T${m}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let p=1;p<l.length;p++)l[p]=l[p-1]+e[p][n];const c=a[n],u=a.slice(-2),d=a.join();let f=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${u.join()}));
        }`;for(let p=1;p<l.length;p++){const m=l[p-1];f+=`
        if (${c} < ${l[p]}  && ${c} >= ${l[p-1]}) {
          return getChannel(
            getT${p}(${tE(a,c,m)}),
            vec2(${tE(u,c,m)}));
        }`}const h=l.length,g=l[l.length-1];f+=`
        return getChannel(
          getT${h}(${tE(a,c,g)}),
          vec2(${tE(u,c,g)}));`,this.userCode=`
      float getValue(${a.map(p=>"int "+p)}) {
        ${f}
      }

      void main() {
        ${o} coords = getOutputCoords();
        vec4 result = vec4(getValue(${s}), 0., 0., 0.);

        ${s[i-1]} = ${s[i-1]} + 1;
        if (${s[i-1]} < ${r[i-1]}) {
          result.g = getValue(${s});
        }

        ${s[i-2]} = ${s[i-2]} + 1;
        if (${s[i-2]} < ${r[i-2]}) {
          result.a = getValue(${s});
        }

        ${s[i-1]} = ${s[i-1]} - 1;
        if (${s[i-2]} < ${r[i-2]} &&
            ${s[i-1]} < ${r[i-1]}) {
          result.b = getValue(${s});
        }
        setOutput(result);
      }
    `}}function tE(t,e,n){const r=t.indexOf(e);return t.map((o,s)=>s===r?`${o} - ${n}`:o).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q2(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return ds({inputs:{x:i.complexTensorInfos.imag},backend:n})}const LOt={kernelName:yW,backendName:"webgl",kernelFunc:q2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tb(t,e,n){const r=t[0].dtype;if(r==="complex64"){const h=t.map(_=>dS({inputs:{input:_},backend:n})),g=t.map(_=>q2({inputs:{input:_},backend:n})),p=Tb(h,e,n),m=Tb(g,e,n),v=Yf({inputs:{real:p,imag:m},backend:n});return h.forEach(_=>n.disposeIntermediateTensorInfo(_)),g.forEach(_=>n.disposeIntermediateTensorInfo(_)),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),v}let i=n.shouldExecuteOnCPU(t);if(r==="string"&&(i=!0),i){const h=t.map(y=>{const x=[-1,Re(y.shape.slice(e))];return nt({inputs:{x:y},backend:n,attrs:{shape:x}})}),g=h.map(y=>({vals:n.readSync(y.dataId),shape:y.shape})),p=Tc(h.map(y=>y.shape),1),m=h[0].shape[0]===1,v=kAt(g,p,r,m),_=Tc(t.map(y=>y.shape),e),w=n.makeTensorInfo(_,r,v);return h.forEach(y=>n.disposeIntermediateTensorInfo(y)),w}const o=t.filter(h=>Re(h.shape)>0),s=Te().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&o[0].shape.length>1;if(o.length===1){const h=s?new lc(t[0].shape,Td):new Wd(t[0].shape,Td);return n.runWebGLProgram(h,t,r)}const a=Te().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(o.length>a){const h=[];for(let p=0;p<o.length;p+=a){const m=o.slice(p,p+a);h.push(Tb(m,e,n))}const g=Tb(h,e,n);for(const p of h)n.disposeIntermediateTensorInfo(p);return g}if(s){const h=new $Ot(o.map(g=>g.shape),e);return n.runWebGLProgram(h,o,r)}const{tensors2D:l,outShape:c}=FOt(o,e,n),u=new NOt(l.map(h=>h.shape)),d=n.runWebGLProgram(u,l,r);l.forEach(h=>n.disposeIntermediateTensorInfo(h));const f=nt({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),f}function FOt(t,e,n){const r=Tc(t.map(o=>o.shape),e);return{tensors2D:t.map(o=>nt({inputs:{x:o},attrs:{shape:[-1,Re(o.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oge(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,o=Gt(i,e[0].shape)[0],s=e.map(c=>c.shape);MV(s,o);const a=Tc(e.map(c=>c.shape),o);if(Re(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(c=>Re(c.shape)>0);return l.length===1?ds({inputs:{x:l[0]},backend:n}):Tb(l,o,n)}const BOt={kernelName:AO,backendName:"webgl",kernelFunc:oge};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sge{constructor(e,n=!1,r=null,i=!1,o=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const s=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,d=e.dilationWidth,f=e.filterHeight,h=e.filterWidth,g=Math.floor(e.inChannels/4)*4,p=e.inChannels%4,m=e.dataFormat==="channelsLast",v=m?1:2,_=m?2:3,w=m?3:1;let y="",b="";r&&(i?y=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:o?y=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:y=`
          float activation(float x) {
            ${r}
          }
        `,b="result = activation(result);");const x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${y}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${s}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${w}];

        ivec2 xRCCorner =
            ivec2(coords[${v}], coords[${_}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${f}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${g}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${m}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${p===1}) {

              if (${m}) {
                dotProd +=
                    getX(batch, xR, xC, ${g}) *
                    getW(wR, wC, ${g}, d2);
              } else {
                dotProd +=
                    getX(batch, ${g}, xR, xC) *
                    getW(wR, wC, ${g}, d2);
              }

            } else if (${p===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${g}, d2),
                getW(wR, wC, ${g} + 1, d2)
              );

              if (${m}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${g}),
                  getX(batch, xR, xC, ${g} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${g}, xR, xC),
                  getX(batch, ${g} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${p===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${g}, d2),
                getW(wR, wC, ${g} + 1, d2),
                getW(wR, wC, ${g} + 2, d2)
              );

              if (${m}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${g}),
                  getX(batch, xR, xC, ${g} + 1),
                  getX(batch, xR, xC, ${g} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${g}, xR, xC),
                  getX(batch, ${g} + 1, xR, xC),
                  getX(batch, ${g} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${x}
        ${b}
        setOutput(result);
      }
    `}}class UOt{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,i=e.padInfo.left,o=e.strideDepth,s=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.filterDepth,f=e.filterHeight,h=e.filterWidth,g=Math.floor(e.inChannels/4)*4,p=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${o}, ${s}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${g}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${p===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${g}) *
                  getW(wF, wR, wC, ${g}, d2);
              } else if (${p===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${g}),
                  getX(batch, xF, xR, xC, ${g} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${g}, d2),
                  getW(wF, wR, wC, ${g} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${p===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${g}),
                  getX(batch, xF, xR, xC, ${g} + 1),
                  getX(batch, xF, xR, xC, ${g} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${g}, d2),
                  getW(wF, wR, wC, ${g} + 1, d2),
                  getW(wF, wR, wC, ${g} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class age{constructor(e,n=!1,r=null,i=!1,o=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Yi(this.outputShape.length);const s=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,d=u;let f=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let m=0;m<u;m++)f+=`
           vec4 xTexelC${m*2};
           int xTexelC${m*2}Ready;
           vec4 xTexelC${m*2+1};
           int xTexelC${m*2+1}Ready;
           vec4 xC${m};`;f+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let m=0;m<u;m++)f+=`
           xTexelC${m*2} = vec4(0.0);
           xTexelC${m*2}Ready = 0;
           xTexelC${m*2+1} = vec4(0.0);
           xTexelC${m*2+1}Ready = 0;
           xC${m} = vec4(0.0);`;f+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let m=0;m<(d+1)/2;m++){const v=m*2;if(f+=`
           xC = xCCorner + ${v*l};
           `,a===1){if(v<u&&(s%2===1?(f+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }
               `,l===1&&v>0?f+=`
                 xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                 `:f+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                   } else {
                     xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                   }
                   `):f+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 xC${v} = xTexelC${v};
                 `,v+1<u)){const _=s%2===0?W4(l):l;l%2===0&&s%2===1||l%2!==0&&s%2!==1?(f+=`
                   xCOffset = xC + imod(pads[1], 2) + ${_};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                     xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${v+1}.zw = vec2(0.0);
                     }
                     xTexelC${v+1}Ready = 1;
                   }
                   `,l>1?f+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${v+1} = vec4(previous.zw, xTexelC${v+1}.xy);
                     } else {
                      xC${v+1} = vec4(0.0, 0.0, xTexelC${v+1}.xy);
                     }
                     `:f+=`
                     xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                     `):_===1?f+=`
                     xC${v+1} = xTexelC${v};
                     `:f+=`
                     xCOffset = xC + ${_};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                       xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${v+1}.zw = vec2(0.0);
                       }
                       xTexelC${v+1}Ready = 1;
                     }

                     xC${v+1} = xTexelC${v+1};
                     `}}else v<u&&(s%2===1?(f+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                   xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${v+1}.zw = vec2(0.0);
                   }
                   xTexelC${v+1}Ready = 1;
                 }

                 xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
               `,v+1<u&&(f+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                 `)):(f+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                   xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v+1}.zw = vec2(0.);
                   }
                   xTexelC${v+1}Ready = 1;
                 }

                 xC${v} = vec4(
                   xTexelC${v}.xy, xTexelC${v+1}.xy);
               `,v+1<u&&(f+=`
                   xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                 `)));v<u&&(f+=`
             wTexel = getW(r, ${v}, d1, d2);
             dotProd += xC${v}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${v}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,v+1<u&&(f+=`
               wTexel = getW(r, ${v+1}, d1, d2);
               dotProd += xC${v+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${v+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}f+=`
     }
   `,f+=`
     }
   `,f+=`
     }
   `;let h="",g="";r&&(i?h=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:o?h=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:h=`vec4 activation(vec4 x) {
           ${r}
         }`,g="result = activation(result);");const p=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${h}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${f}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${p}
         ${g}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zOt{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Yi(this.outputShape.length);const{dataFormat:r}=n,i=vo(),o=r==="channelsLast",s=o?1:2,a=o?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let u=0;u<=1;u++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${s}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${o}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${i.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UA(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function lge({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:s=0,activation:a=null}){const l=t.shape,c=r.texData.get(t.dataId),u=n.inChannels,d=l[0]*l[1]*l[2],f=n.outChannels,h=n.dataFormat==="channelsLast",g=!1,p=!1;let m;const v=[];if(o!=null){const y=UA(o.shape,h);y!=null&&(o=nt({inputs:{x:o},backend:r,attrs:{shape:y}}),v.push(o))}if(i!=null){const y=UA(i.shape,h);y!=null&&(i=nt({inputs:{x:i},backend:r,attrs:{shape:y}}),v.push(i))}if(!((d===1||f===1)&&u>ege)&&c.isPacked&&h&&c.texture!=null&&l[2]%2!==0&&mn(c.shape.slice(-3),l.slice(-3))){const y=l[0]*l[1]*(l[2]+1),b={dataId:t.dataId,shape:[1,y,n.inChannels],dtype:t.dtype},x=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,Y(FA(c.shape,b.shape),()=>`packed reshape ${c.shape} to ${b.shape} isn't free`);const S=nt({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});v.push(S);const C=BA({a:b,b:S,backend:r,transposeA:g,transposeB:p,bias:i,activation:a,preluActivationWeights:o,leakyreluAlpha:s}),T=r.texData.get(C.dataId);Y(T.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=x,T.shape=n.outShape,m=ds({inputs:{x:C},backend:r}),m.shape=n.outShape,v.push(C)}else{const y=n.outHeight*n.outWidth,b=nt({inputs:{x:t},backend:r,attrs:{shape:h?[n.batchSize,y,n.inChannels]:[n.batchSize,n.inChannels,y]}}),x=nt({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),S=BA({a:h?b:x,b:h?x:b,transposeA:!h,transposeB:p,backend:r,bias:i,activation:a,preluActivationWeights:o,leakyreluAlpha:s});m=nt({inputs:{x:S},backend:r,attrs:{shape:n.outShape}}),v.push(b),v.push(x),v.push(S)}for(const y of v)r.disposeIntermediateTensorInfo(y);return m}function cge({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:s=0,activation:a=null}){const{filterWidth:l,filterHeight:c,inChannels:u,outWidth:d,outHeight:f,dataFormat:h}=n,g=h==="channelsLast",p=l*c*u,m=f*d,v=[n.batchSize,p,m],_=!0,w=!1,y=[];if(o!=null){const L=UA(o.shape,g);L!=null&&(o=nt({inputs:{x:o},backend:r,attrs:{shape:L}}),y.push(o))}if(i!=null){const L=UA(i.shape,g);L!=null&&(i=nt({inputs:{x:i},backend:r,attrs:{shape:L}}),y.push(i))}const b=nt({inputs:{x:e},backend:r,attrs:{shape:[1,p,Re(e.shape)/p]}});y.push(b);const x=new zOt(v,n),S=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],C=r.runWebGLProgram(x,[t],"float32",S),T=nt({inputs:{x:C},backend:r,attrs:{shape:v}});y.push(C),y.push(T);const E=i!=null,k=o!=null,A=a==="leakyrelu",O=a?Uw(a,!0):null,D=new Jme(g?T.shape:b.shape,g?b.shape:T.shape,g?[n.batchSize,m,n.outChannels]:[n.batchSize,n.outChannels,m],_,w,E,O,k,A),P=g?[T,b]:[b,T];if(i&&P.push(i),k&&P.push(o),A){const L=r.makeTensorInfo([],"float32",zf(s,"float32"));P.push(L),y.push(L)}const N=r.runWebGLProgram(D,P,"float32"),U=nt({inputs:{x:N},backend:r,attrs:{shape:n.outShape}});y.push(N);for(const L of y)r.disposeIntermediateTensorInfo(L);return U}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jOt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:o}=e,{strides:s,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r,d=od(l),f=Di(i.shape,o.shape,s,c,a,u,!1,d);let h;if(f.filterHeight===1&&f.filterWidth===1&&f.dilationHeight===1&&f.dilationWidth===1&&f.strideHeight===1&&f.strideWidth===1&&(f.padInfo.type==="SAME"||f.padInfo.type==="VALID"))h=lge({x:i,filter:o,convInfo:f,backend:n});else if(f.strideWidth<=2&&d==="channelsLast"&&Te().getBool("WEBGL_EXP_CONV")){const p=new age(f),m=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];h=n.runWebGLProgram(p,[i,o],"float32",m)}else if(Te().getBool("WEBGL_CONV_IM2COL"))h=cge({x:i,filter:o,convInfo:f,backend:n});else{const p=new sge(f);h=n.runWebGLProgram(p,[i,o],"float32")}const g=nt({inputs:{x:h},backend:n,attrs:{shape:f.outShape}});return n.disposeIntermediateTensorInfo(h),g}const WOt={kernelName:MO,backendName:"webgl",kernelFunc:jOt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VOt{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,o=e.padInfo.left,s=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${o};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${s?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class HOt{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,o=e.strideWidth,s=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,l=r-1-e.padInfo.left,c=s?1:2,u=s?2:3,d=s?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${s}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class GOt{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,o=e.padInfo.front,s=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${o};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${s};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${i} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class qOt{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,o=e.strideDepth,s=e.strideHeight,a=e.strideWidth,l=n-1-e.padInfo.front,c=r-1-e.padInfo.top,u=i-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${o}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${i}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${i} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XOt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:o}=e,{strides:s,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,d=od(l),f=Di(i.shape,u,s,1,a,c,!1,d),h=new VOt(f);return n.runWebGLProgram(h,[i,o],"float32")}const KOt={kernelName:rW,backendName:"webgl",kernelFunc:XOt};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YOt{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=Yi(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,i=n-1-e.padInfo.top,o=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QOt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:o}=e,{inputShape:s,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r,d=od(c),f=Di(s,o.shape,a,1,l,u,!1,d);if(Te().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const h=[[f.strideHeight,f.strideWidth]],g=new YOt(f);return n.runWebGLProgram(g,[i,o],"float32",h)}else{const h=new HOt(f);return n.runWebGLProgram(h,[i,o],"float32")}}const ZOt={kernelName:IO,backendName:"webgl",kernelFunc:QOt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JOt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:o}=e,{strides:s,pad:a,dilations:l}=r,c=Wf(i.shape,o.shape,s,l,a),u=new UOt(c);return n.runWebGLProgram(u,[i,o],"float32")}const e2t={kernelName:OO,backendName:"webgl",kernelFunc:JOt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t2t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:o}=e,{strides:s,pad:a,filterShape:l}=r,c=Wf(i.shape,l,s,1,a),u=new GOt(c);return n.runWebGLProgram(u,[i,o],"float32")}const n2t={kernelName:iW,backendName:"webgl",kernelFunc:t2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r2t(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:o}=e,{pad:s,strides:a,inputShape:l}=r,c=Wf(l,o.shape,a,1,s),u=new qOt(c);return n.runWebGLProgram(u,[i,o],"float32")}const i2t={kernelName:oW,backendName:"webgl",kernelFunc:r2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o2t=h0+`
  return cos(x);
`,s2t=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${vm}
  return result;
`,a2t=tn({opSnippet:o2t,packedOpSnippet:s2t}),l2t={kernelName:i1,backendName:"webgl",kernelFunc:a2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c2t=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,u2t=tn({opSnippet:c2t}),d2t={kernelName:o1,backendName:"webgl",kernelFunc:u2t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f2t{constructor(e,n,r,i,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[s,a,l,c]=e,[u]=n,[d,f]=r;this.outputShape=[u,d,f,c];const h=i==="bilinear"?1:0,[g,p]=[`${a-1}.0`,`${l-1}.0`],[m,v,_]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${g} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${g}`],[w,y,b]=f>1?[`${(l-1)/(f-1)}`,"(x2-x1) * width_ratio",`x1*${p} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${p}`];this.userCode=`
      const float height_ratio = float(${m});
      const float width_ratio = float(${w});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${s}) {
          return;
        }

        float height_scale = ${v};
        float width_scale = ${y};

        float in_y = ${_};
        if( in_y < 0.0 || in_y > ${g} ) {
          setOutput(float(${o}));
          return;
        }
        float in_x = ${b};
        if( in_x < 0.0 || in_x > ${p} ) {
          setOutput(float(${o}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h2t=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:o,boxInd:s}=e,{cropSize:a,method:l,extrapolationValue:c}=r,u=new f2t(i.shape,o.shape,a,l,c);return n.runWebGLProgram(u,[i,o,s],"float32")},p2t={kernelName:aW,backendName:"webgl",kernelFunc:h2t};var jw;(function(t){t.Prod="*",t.Sum="+"})(jw||(jw={}));class lZ{constructor(e,n,r,i){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const o=this.outputShape.length,s=this.op===jw.Prod?"1.0":"0.0",a=r?s:`getX(${cZ(o,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",u="";r?(c=i?`end != ${l-1}`:"end != 0",u=i?"end + 1":"end - 1"):(c=i?`end + pow2 < ${l}`:"end >= pow2",u=i?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${On(o)} coords = getOutputCoords();
        int end = ${uZ(o,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${uZ(o,"coords",this.op)} = idx;
          val ${this.op}= getX(${cZ(o,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function cZ(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function uZ(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uge(t,e,n,r,i,o){const s=e.shape.length,a=cr([r],s);let l=e;a!=null&&(l=mo({inputs:{x:e},backend:n,attrs:{perm:a}}));const c=Er(1,s)[0];if(c!==s-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const u=l.shape[c];let d=ds({inputs:{x:l},backend:n});for(let f=0;f<=Math.ceil(Math.log2(u))-1;f++){const h=new lZ(t,l.shape,!1,o),g=[[f]],p=d;d=n.runWebGLProgram(h,[d],d.dtype,g),n.disposeIntermediateTensorInfo(p)}if(i){const f=new lZ(t,l.shape,i,o),h=d;d=n.runWebGLProgram(f,[d],d.dtype),n.disposeIntermediateTensorInfo(h)}if(a!=null){const f=Vf(a),h=mo({inputs:{x:d},backend:n,attrs:{perm:f}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),h}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m2t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,exclusive:s,reverse:a}=r;return uge(jw.Prod,i,n,o,s,a)}const g2t={kernelName:sW,backendName:"webgl",kernelFunc:m2t};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v2t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,exclusive:s,reverse:a}=r;return uge(jw.Sum,i,n,o,s,a)}const y2t={kernelName:RO,backendName:"webgl",kernelFunc:v2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b2t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:o}=e,{size:s,binaryOutput:a}=r;if(i.shape.length===1){const l=n.readSync(i.dataId),c=n.readSync(o.dataId),u=Vme(l,c,o.dtype,o.shape,s);return n.makeTensorInfo([s],o.dtype,u)}else if(i.shape.length===2){const l=n.bufferSync(i),c=n.bufferSync(o),u=SAt(l,c,s,a);return n.makeTensorInfo(u.shape,o.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const x2t={kernelName:lW,backendName:"webgl",kernelFunc:b2t};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w2t{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _2t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:o,dataFormat:s}=r,a=i.shape[0],l=s==="NHWC"?i.shape[1]:i.shape[2],c=s==="NHWC"?i.shape[2]:i.shape[3],u=s==="NHWC"?i.shape[3]:i.shape[1],d=l*o,f=c*o,h=u/(o*o),g=s==="NHWC"?[a,d,f,h]:[a,h,d,f],p=new w2t(g,o,s);return n.runWebGLProgram(p,[i],i.dtype)}const S2t={kernelName:cW,backendName:"webgl",kernelFunc:_2t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dge{constructor(e,n=!1,r=null,i=!1,o=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Yi(this.outputShape.length);const s=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let c="",u="";r&&(i?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:o?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,u="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${s}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fge{constructor(e,n=!1,r=null,i=!1,o=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Yi(this.outputShape.length);const s=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,d=e.filterWidth,f=d;let h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<d;v++)h+=`
          vec4 xTexelC${v*2};
          int xTexelC${v*2}Ready;
          vec4 xTexelC${v*2+1};
          int xTexelC${v*2+1}Ready;
          vec4 xC${v};`;h+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let v=0;v<d;v++)h+=`
          xTexelC${v*2} = vec4(0.0);
          xTexelC${v*2}Ready = 0;
          xTexelC${v*2+1} = vec4(0.0);
          xTexelC${v*2+1}Ready = 0;
          xC${v} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let v=0;v<(f+1)/2;v++){const _=v*2;if(h+=`
          xC = xCCorner + ${_*c};
          `,l===1){if(_<d&&(a%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${_}Ready == 0) {
                  xTexelC${_} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${_}.zw = vec2(0.0);
                  }
                  xTexelC${_}Ready = 1;
                }
              `,c===1&&_>0?h+=`
                xC${_} = vec4(xTexelC${_-2}.zw, xTexelC${_}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${_} = vec4(previous.zw, xTexelC${_}.xy);
                  } else {
                    xC${_} = vec4(0.0, 0.0, xTexelC${_}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${_}Ready == 0) {
                  xTexelC${_} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${_}.zw = vec2(0.0);
                  }
                  xTexelC${_}Ready = 1;
                }

                xC${_} = xTexelC${_};
                `,_+1<d)){const w=a%2===0?W4(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${w};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${_+1}Ready == 0) {
                    xTexelC${_+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${_+1}.zw = vec2(0.0);
                    }
                    xTexelC${_+1}Ready = 1;
                  }
                  `,c>1?h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${_+1} = vec4(previous.zw, xTexelC${_+1}.xy);
                    } else {
                     xC${_+1} = vec4(0.0, 0.0, xTexelC${_+1}.xy);
                    }
                    `:h+=`
                    xC${_+1} = vec4(xTexelC${_}.zw, xTexelC${_+1}.xy);
                    `):w===1?h+=`
                    xC${_+1} = xTexelC${_};
                    `:h+=`
                    xCOffset = xC + ${w};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${_+1}Ready == 0) {
                      xTexelC${_+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${_+1}.zw = vec2(0.0);
                      }
                      xTexelC${_+1}Ready = 1;
                    }

                    xC${_+1} = xTexelC${_+1};
                    `}}else _<d&&(a%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${_}Ready == 0) {
                  xTexelC${_} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${_}.zw = vec2(0.0);
                  }
                  xTexelC${_}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${_+1}Ready == 0) {
                  xTexelC${_+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${_+1}.zw = vec2(0.0);
                  }
                  xTexelC${_+1}Ready = 1;
                }

                xC${_} = vec4(xTexelC${_}.zw, xTexelC${_+1}.zw);
              `,_+1<d&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${_+1} = vec4(xTexelC${_+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${_}Ready == 0) {
                  xTexelC${_} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${_}.zw = vec2(0.0);
                  }
                  xTexelC${_}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${_+1}Ready == 0) {
                  xTexelC${_+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${_+1}.zw = vec2(0.);
                  }
                  xTexelC${_+1}Ready = 1;
                }

                xC${_} = vec4(
                  xTexelC${_}.xy, xTexelC${_+1}.xy);
              `,_+1<d&&(h+=`
                  xC${_+1} = vec4(xTexelC${_}.zw, xTexelC${_+1}.zw);
                `)));_<d&&(h+=`
            wTexel = getW(r, ${_}, d1, q);
            dotProd += xC${_} * vec4(wTexel.xz, wTexel.xz);
          `,_+1<d&&(h+=`
              wTexel = getW(r, ${_+1}, d1, q);
              dotProd += xC${_+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let g="",p="";r&&(i?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:o?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:g=`vec4 activation(vec4 x) {
          ${r}
        }`,p="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${g}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${s};
        int q = d2 - d1 * ${s};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${m}
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C2t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:o}=e,{strides:s,pad:a,dilations:l,dimRoundingMode:c}=r;let u=l;u==null&&(u=[1,1]),Y(Xi(s,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);const d=Di(i.shape,o.shape,s,u,a,c,!0);let f;Te().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?f=new fge(d):f=new dge(d);const h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(f,[i,o],"float32",h)}const E2t={kernelName:DO,backendName:"webgl",kernelFunc:C2t};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T2t{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,o=e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${s} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${o};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class k2t{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,o=e.strideWidth,s=n-1-e.padInfo.top,a=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A2t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:o}=e,{strides:s,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r,d=Di(i.shape,u,s,a,l,c,!0),f=new T2t(d);return n.runWebGLProgram(f,[i,o],"float32")}const M2t={kernelName:uW,backendName:"webgl",kernelFunc:A2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I2t(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:o}=e,{strides:s,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r,d=Di(u,o.shape,s,a,l,c,!0),f=new k2t(d);return n.runWebGLProgram(f,[i,o],"float32")}const O2t={kernelName:dW,backendName:"webgl",kernelFunc:I2t};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R2t{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D2t(t){const{inputs:e,backend:n}=t,{x:r}=e,i=[...r.shape,...r.shape],o=Re(r.shape),s=nt({inputs:{x:r},backend:n,attrs:{shape:[o]}}),a=new R2t(o),l=n.runWebGLProgram(a,[s],s.dtype),c=nt({inputs:{x:l},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),c}const P2t={kernelName:Xce,backendName:"webgl",kernelFunc:D2t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class N2t{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:i,strideHeight:o,strideWidth:s,filterHeight:a,filterWidth:l,dilationHeight:c,dilationWidth:u}=e,{top:d,left:f}=i;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${s});
      const ivec2 pads = ivec2(${d}, ${f});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $2t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:o}=e,{strides:s,pad:a,dilations:l}=r,c=H1(i.shape,o.shape,s,a,"NHWC",l);let u;const d=new N2t(c);u=n.runWebGLProgram(d,[i,o],"float32");const f=nt({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),f}const L2t={kernelName:PO,backendName:"webgl",kernelFunc:$2t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F2t(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,o=e,{allDims:s,summedDims:a,idDims:l}=zV(i,o.length);WV(s.length,l,o);const{path:c,steps:u}=VV(a,l),d=u.length;let f=null,h=s.length;const g=[];for(let p=0;p<d;++p){for(const m of u[p]){const{permutationIndices:v,expandDims:_}=jV(h,l[m]);let w;HV(v)?w=o[m]:(w=mo({inputs:{x:o[m]},backend:n,attrs:{perm:v}}),g.push(w));const y=w.shape.slice();for(let b=0;b<_.length;++b)y.splice(_[b],0,1);mn(w.shape,y)||(w=nt({inputs:{x:w},backend:n,attrs:{shape:y}}),g.push(w)),f===null?f=w:(f=DH({inputs:{a:w,b:f},backend:n}),g.push(f))}p<d-1&&(c[p]>=0&&(f=G2({inputs:{x:f},backend:n,attrs:{axis:c[p]-(s.length-h),keepDims:!1}}),g.push(f)),h--)}for(const p of g)p!==f&&n.disposeIntermediateTensorInfo(p);return f}const B2t={kernelName:fW,backendName:"webgl",kernelFunc:F2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U2t="return (x >= 0.0) ? x : (exp(x) - 1.0);",z2t=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,j2t=tn({opSnippet:U2t,packedOpSnippet:z2t}),W2t={kernelName:a1,backendName:"webgl",kernelFunc:j2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V2t="return (b >= 0.0) ? a : a * (b + 1.0);",H2t=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,G2t=t=>{const{inputs:e,backend:n}=t,{dy:r,y:i}=e,o=Te().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new f0(H2t,r.shape,i.shape):new Yp(V2t,r.shape,i.shape);return n.runWebGLProgram(o,[r,i],r.dtype)},q2t={kernelName:hW,backendName:"webgl",kernelFunc:G2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X2t=`
  return vec4(equal(a, b));
`,K2t="return float(a == b);",Y2t=Ni({opSnippet:K2t,packedOpSnippet:X2t,dtype:"bool",cpuKernelImpl:AAt}),Q2t={kernelName:NO,backendName:"webgl",kernelFunc:Y2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z2t=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${PV};
  float a1 = ${NV};
  float a2 = ${$V};
  float a3 = ${LV};
  float a4 = ${FV};
  float a5 = ${BV};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,J2t=tn({opSnippet:Z2t}),eRt={kernelName:l1,backendName:"webgl",kernelFunc:J2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tRt=h0+`
  return exp(x);
`,nRt=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,hge=tn({opSnippet:tRt,packedOpSnippet:nRt,cpuKernelImpl:MAt,dtype:"float32"}),rRt={kernelName:c1,backendName:"webgl",kernelFunc:hge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U3(t){const{inputs:e,attrs:n,backend:r}=t,{dim:i}=n,{input:o}=e,s=o.shape.length,a=o.shape.slice();let l=i;return i<0&&(Y(-(s+1)<=i,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+i+1),a.splice(l,0,1),nt({inputs:{x:o},backend:r,attrs:{shape:a}})}const iRt={kernelName:$O,backendName:"webgl",kernelFunc:U3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dZ="return exp(x) - 1.0;",oRt=tn({opSnippet:dZ,packedOpSnippet:dZ,cpuKernelImpl:IAt}),sRt={kernelName:u1,backendName:"webgl",kernelFunc:oRt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fZ{constructor(e,n,r){this.variableNames=["real","imag"];const i=n[1];this.outputShape=n;const o=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,s=r?`${i}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${o};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${s};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pge(t,e,n){const r=n.texData.get(t.dataId),i=Re(t.shape),o=t.shape[t.shape.length-1],s=i/o,a=nt({inputs:{x:t},backend:n,attrs:{shape:[s,o]}}),l=a.shape,c=new fZ("real",l,e),u=new fZ("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],f=n.runWebGLProgram(c,d,"float32"),h=n.runWebGLProgram(u,d,"float32"),g=Yf({inputs:{real:f,imag:h},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h);const p=nt({inputs:{x:g},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(g),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aRt(t){const{inputs:e,backend:n}=t,{input:r}=e;return pge(r,!1,n)}const lRt={kernelName:pW,backendName:"webgl",kernelFunc:aRt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cRt{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fS(t){const{backend:e,attrs:n}=t,{shape:r,value:i}=n;let{dtype:o}=n;if(o=o||Jy(i),o==="string"){const s=wr(o,Re(r));return s.fill(i),e.makeTensorInfo(r,o,s)}else{const s=new cRt(r,i),a=[[i]];return e.runWebGLProgram(s,[],o,a)}}const uRt={kernelName:mW,backendName:"webgl",kernelFunc:fS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dRt{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fRt={kernelName:gW,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,i=new dRt(n.shape);return r.runWebGLProgram(i,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hZ="return floor(x);",hRt=tn({opSnippet:hZ,packedOpSnippet:hZ,cpuKernelImpl:OAt}),pRt={kernelName:d1,backendName:"webgl",kernelFunc:hRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mRt=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,gRt=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,vRt=Ni({opSnippet:mRt,packedOpSnippet:gRt,dtype:"int32"}),yRt={kernelName:f1,backendName:"webgl",kernelFunc:vRt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bRt{constructor(e){this.variableNames=["A"];const n=vo(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xRt{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=vo(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${i}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wRt={kernelName:vdt,backendName:"webgl",kernelFunc:_Rt};let cg,XP=Te().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function _Rt(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:i}=e;const{numChannels:o}=r,s=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[l,c]=s?[i.videoWidth,i.videoHeight]:[i.width,i.height],u=[c,l],d=[c,l,o];if(a||s){const p=Te().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(cg==null||p!==XP)&&(XP=p,cg=document.createElement("canvas").getContext("2d",{willReadFrequently:XP})),cg.canvas.width=l,cg.canvas.height=c,cg.drawImage(i,0,0,l,c),i=cg.canvas}const f=n.makeTensorInfo(u,"int32");n.texData.get(f.dataId).usage=Is.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),i);const h=Te().getBool("WEBGL_PACK")?new xRt(d):new bRt(d),g=n.runWebGLProgram(h,[f],"int32");return n.disposeData(f.dataId),g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SRt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:o,bias:s,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:g}=r,p=od(u),m=Di(i.shape,o.shape,l,d,c,f,!1,p);let v;const _=[],w=s!=null,y=a!=null,b=h==="leakyrelu",x=()=>{const C=[i,o],T=(E,k)=>{if(k==="NCHW"&&E.shape.length===1&&E.shape[0]!==1){const A=nt({inputs:{x:E},backend:n,attrs:{shape:[E.shape[0],1,1]}});return _.push(A),A}return E};if(w&&C.push(T(s,u)),y&&C.push(T(a,u)),b){const E=n.makeTensorInfo([],"float32",zf(g,"float32"));C.push(E),_.push(E)}return C};if(m.filterHeight===1&&m.filterWidth===1&&m.dilationHeight===1&&m.dilationWidth===1&&m.strideHeight===1&&m.strideWidth===1&&(m.padInfo.type==="SAME"||m.padInfo.type==="VALID"))v=lge({x:i,filter:o,convInfo:m,backend:n,bias:s,activation:h,preluActivationWeights:a,leakyreluAlpha:g});else if(m.strideWidth<=2&&p==="channelsLast"&&Te().getBool("WEBGL_EXP_CONV")){const C=h?Uw(h,!0):null,T=new age(m,w,C,y,b),E=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],k=x();v=n.runWebGLProgram(T,k,"float32",E)}else if(Te().getBool("WEBGL_CONV_IM2COL"))v=cge({x:i,filter:o,convInfo:m,backend:n,bias:s,activation:h,preluActivationWeights:a,leakyreluAlpha:g});else{const C=h?Uw(h,!1):null,T=new sge(m,w,C,y,b),E=x();v=n.runWebGLProgram(T,E,"float32")}const S=nt({inputs:{x:v},backend:n,attrs:{shape:m.outShape}});return _.push(v),_.forEach(C=>n.disposeIntermediateTensorInfo(C)),S}const CRt={kernelName:hA,backendName:"webgl",kernelFunc:SRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ERt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:o,bias:s,preluActivationWeights:a}=e,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:f,leakyreluAlpha:h}=r,g=[];let p=u;p==null&&(p=[1,1]),Y(Xi(l,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${p}'`);const m=Di(i.shape,o.shape,l,p,c,d,!0),v=Te().getBool("WEBGL_PACK_DEPTHWISECONV")&&m.strideWidth<=2&&m.outChannels/m.inChannels===1,_=f?Uw(f,v):null,w=[i,o],y=s!=null,b=a!=null,x=f==="leakyrelu";if(y&&w.push(s),b&&w.push(a),x){const E=n.makeTensorInfo([],"float32",zf(h,"float32"));w.push(E),g.push(E)}let S;v?S=new fge(m,y,_,b,x):S=new dge(m,y,_,b,x);const C=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],T=n.runWebGLProgram(S,w,"float32",C);return g.forEach(E=>n.disposeIntermediateTensorInfo(E)),T}const TRt={kernelName:hue,backendName:"webgl",kernelFunc:ERt};class kRt{constructor(e,n,r,i){this.sliceDim=e,this.strides=n,this.paramsShape=i,this.variableNames=["x","indices"],this.outputShape=r;const o=On(r.length);let s=`
    int index;`;for(let a=0;a<this.sliceDim;a++)s+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${o} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${s}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ARt(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,o=i.shape,s=o[o.length-1],a=Re(r.shape),[l,c,u,d]=SV(r,i),f=nt({inputs:{x:i},backend:n,attrs:{shape:[c,s]}}),h=nt({inputs:{x:r},backend:n,attrs:{shape:[Re(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,i])||r.dtype==="string"){const v=n.readSync(i.dataId),_=n.bufferSync(r),w=RAt(v,_,r.dtype,c,s,u,d,r.shape,a);return n.makeTensorInfo(l,r.dtype,w.values)}const g=new kRt(s,d,[c,u],r.shape),p=n.runWebGLProgram(g,[h,f],h.dtype),m=nt({inputs:{x:p},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),m}const MRt={kernelName:Kce,backendName:"webgl",kernelFunc:ARt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IRt{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=On(this.rank),i=ORt(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${i}));
      }
    `}}function ORt(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<t.length;i++)i===2?r.push("index"):r.push(`${n[i]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mge(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:o}=e,{axis:s,batchDims:a}=r,l=Gt(s,i.shape)[0];if(Te().get("DEBUG")){const _=n.readSync(o.dataId),w=i.shape[l];for(let y=0;y<_.length;++y){const b=_[y];Y(b<=w-1&&b>=0,()=>`GatherV2: the index value ${b} is not in [0, ${w-1}]`)}}const c=qV(i,o,l,a),u=Re(o.shape),d=[],f=nt({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),h=nt({inputs:{x:o},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(f),d.push(h);const g=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([i,o])||i.dtype==="string"){const _=n.bufferSync(h),w=n.bufferSync(f),y=DAt(w,_,g);return d.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(c.outputShape,y.dtype,y.values)}const p=new IRt(f.shape,g),m=n.runWebGLProgram(p,[f,h],f.dtype);d.push(m);const v=nt({inputs:{x:m},backend:n,attrs:{shape:c.outputShape}});return d.forEach(_=>n.disposeIntermediateTensorInfo(_)),v}const RRt={kernelName:FO,backendName:"webgl",kernelFunc:mge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DRt="return float(a > b);",PRt=`
  return vec4(greaterThan(a, b));
`,NRt=Ni({opSnippet:DRt,packedOpSnippet:PRt,cpuKernelImpl:PAt,dtype:"bool"}),$Rt={kernelName:BO,backendName:"webgl",kernelFunc:NRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LRt="return float(a >= b);",FRt=`
  return vec4(greaterThanEqual(a, b));
`,BRt=Ni({opSnippet:LRt,packedOpSnippet:FRt,dtype:"bool",cpuKernelImpl:NAt}),URt={kernelName:h1,backendName:"webgl",kernelFunc:BRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zRt(t){const{inputs:e,backend:n}=t,{input:r}=e;return pge(r,!0,n)}const jRt={kernelName:vW,backendName:"webgl",kernelFunc:zRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WRt="return float(!isnan(x) && !isinf(x));",VRt=tn({opSnippet:WRt,dtype:"bool"}),HRt={kernelName:m1,backendName:"webgl",kernelFunc:VRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GRt="return float(isinf(x));",qRt=tn({opSnippet:GRt,dtype:"bool"}),XRt={kernelName:g1,backendName:"webgl",kernelFunc:qRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KRt="return float(isnan(x));",YRt=tn({opSnippet:KRt,dtype:"bool"}),QRt={kernelName:v1,backendName:"webgl",kernelFunc:YRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZRt="return float(a < b);",JRt=`
  return vec4(lessThan(a, b));
`,eDt=Ni({opSnippet:ZRt,packedOpSnippet:JRt,cpuKernelImpl:$At,dtype:"bool"}),tDt={kernelName:zO,backendName:"webgl",kernelFunc:eDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nDt="return float(a <= b);",rDt=`
  return vec4(lessThanEqual(a, b));
`,iDt=Ni({opSnippet:nDt,packedOpSnippet:rDt,cpuKernelImpl:LAt,dtype:"bool"}),oDt={kernelName:jO,backendName:"webgl",kernelFunc:iDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sDt(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:o}=n,s=FAt(r,i,o);return e.makeTensorInfo([s.length],"float32",s)}const aDt={kernelName:Yce,backendName:"webgl",kernelFunc:sDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lDt=h0+`
  return x < 0.0 ? 0./0. : log(x);
`,cDt=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,uDt=tn({opSnippet:lDt,packedOpSnippet:cDt,cpuKernelImpl:BAt}),dDt={kernelName:y1,backendName:"webgl",kernelFunc:uDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fDt=h0+`
  return log(1.0 + x);
`,hDt=tn({opSnippet:fDt}),pDt={kernelName:b1,backendName:"webgl",kernelFunc:hDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mDt="return float(a >= 1.0 && b >= 1.0);",gDt=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,vDt=Ni({opSnippet:mDt,packedOpSnippet:gDt,dtype:"bool"}),yDt={kernelName:WO,backendName:"webgl",kernelFunc:vDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bDt="return float(!(x >= 1.0));",xDt=tn({opSnippet:bDt}),wDt={kernelName:VO,backendName:"webgl",kernelFunc:xDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Dt="return float(a >= 1.0 || b >= 1.0);",SDt=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,CDt=Ni({opSnippet:_Dt,packedOpSnippet:SDt,dtype:"bool"}),EDt={kernelName:HO,backendName:"webgl",kernelFunc:CDt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TDt{constructor(e,n,r,i,o){this.variableNames=["x"],this.outputShape=[];const s=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${i}) * sum`;o===.5?l=`inversesqrt(${c})`:o===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${o}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${s}; j <= ${s}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kDt{constructor(e,n,r,i,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const s=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${i}) * sum`;o===.5?l=`inversesqrt(${c})`:o===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${o}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${s};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${s}; j <= ${s}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ADt=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:o,bias:s,alpha:a,beta:l}=r,c=Te().getBool("WEBGL_PACK_NORMALIZATION")?new kDt(i.shape,o,s,a,l):new TDt(i.shape,o,s,a,l);return n.runWebGLProgram(c,[i],i.dtype)},MDt={kernelName:GO,backendName:"webgl",kernelFunc:ADt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IDt{constructor(e,n,r,i,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=i,this.beta=o,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${i}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${i})
                * float(${o})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${o});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ODt=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i,y:o,dy:s}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=r,d=new IDt(i.shape,a,l,c,u);return n.runWebGLProgram(d,[i,o,s],i.dtype)},RDt={kernelName:bW,backendName:"webgl",kernelFunc:ODt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DDt(t,e,n,r){const i=Re(e),s=Re(t.shape)/i,a=nt({inputs:{x:t},attrs:{shape:[s,i]},backend:r}),l=ym(a,t.dtype,"max",r),c=nt({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gge(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:o,keepDims:s}=r,a=i.shape.length,l=Gt(o,i.shape);let c=l;const u=cr(c,a),d=u!=null,f=n.shouldExecuteOnCPU([i]);let h=i;if(d){if(f){const w=n.texData.get(h.dataId).values,y=new Array(a);for(let S=0;S<y.length;S++)y[S]=i.shape[u[S]];const b=OH(w,i.shape,i.dtype,u,y);h=n.makeTensorInfo(y,i.dtype);const x=n.texData.get(h.dataId);x.values=b}else h=H2(i,u,n);c=Er(c.length,a)}Pi("max",c,a);const[g,p]=bi(h.shape,c);let m=g;s&&(m=$r(g,l));let v;if(f){const w=n.texData.get(h.dataId).values,y=UAt(w,Re(p),m,i.dtype);v=n.makeTensorInfo(m,i.dtype);const b=n.texData.get(v.dataId);b.values=y}else v=DDt(h,p,m,n);return d&&n.disposeIntermediateTensorInfo(h),v}const PDt={kernelName:qO,backendName:"webgl",kernelFunc:gge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NDt=RH+`
  return max(a, b);
`,$Dt=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+vm+`
  return result;
`,LDt=Ni({opSnippet:NDt,packedOpSnippet:$Dt,cpuKernelImpl:zAt}),FDt={kernelName:x1,backendName:"webgl",kernelFunc:LDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BDt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;cS(i,"maxPool");const{filterSize:o,strides:s,pad:a,dimRoundingMode:l}=r,c=1;Y(Xi(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const u=ja(i.shape,o,s,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&mn(u.inShape,u.outShape))return ds({inputs:{x:i},backend:n});const d=new zw(u,"max",!1);return n.runWebGLProgram(d,[i],i.dtype)}const UDt={kernelName:XO,backendName:"webgl",kernelFunc:BDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zDt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:o,strides:s,pad:a,dataFormat:l,dimRoundingMode:c}=r,u=[1,1,1],d=id(i.shape,o,s,u,a,c,l),f=new PH(d,"max",!1);return n.runWebGLProgram(f,[i],i.dtype)}const jDt={kernelName:KO,backendName:"webgl",kernelFunc:zDt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WDt{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,i=e.dilationHeight,o=e.effectiveFilterHeight,s=e.effectiveFilterWidth,a=o-1-e.padInfo.top,l=s-1-e.padInfo.left,c=o*s-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${o};
          wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${s} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class VDt{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,s=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,d=l-1-e.padInfo.front,f=c-1-e.padInfo.top,h=u-1-e.padInfo.left,g=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${f}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${o}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${s}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${g} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HDt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:o}=e,s=o,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],f=id(s.shape,a,l,d,c,u),h=new PH(f,"max",!0),g=n.runWebGLProgram(h,[s],s.dtype),p=new VDt(f),m=n.runWebGLProgram(p,[i,g],s.dtype);return n.disposeIntermediateTensorInfo(g),m}const GDt={kernelName:wW,backendName:"webgl",kernelFunc:HDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qDt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:o,output:s}=e,a=o;cS([o,s],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,f=ja(a.shape,l,c,1,u,d),h=!0,g=new zw(f,"max",h),p=n.runWebGLProgram(g,[a],a.dtype),m=new WDt(f),v=n.runWebGLProgram(m,[i,p],a.dtype);return n.disposeIntermediateTensorInfo(p),v}const XDt={kernelName:xW,backendName:"webgl",kernelFunc:qDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KDt(t,e,n,r){let i=new zw(n,"max",!1);const o=r.runWebGLProgram(i,[t],"float32");i=new zw(n,"max",!0,!0,e);const s=r.runWebGLProgram(i,[t],"float32");return[o,s]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YDt={kernelName:Qce,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:o,pad:s,includeBatchInIndex:a}=e,l=n;Y(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];Y(Xi(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=ja(r.shape,i,o,c,s),[d,f]=KDt(r,a,u,l);return[d,f]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QDt(t,e,n,r){const i=Re(e),s=Re(t.shape)/i,a=nt({inputs:{x:t},attrs:{shape:[s,i]},backend:r}),l=ym(a,"float32","mean",r),c=nt({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZDt={kernelName:YO,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:i,axis:o}=e,s=n,a=r.shape.length,l=Gt(o,r.shape);let c=l;const u=cr(c,a),d=u!=null,f=s.shouldExecuteOnCPU([r]),h=[];let g=r;if(d){if(f){const y=s.texData.get(g.dataId).values,b=new Array(a);for(let C=0;C<b.length;C++)b[C]=r.shape[u[C]];const x=OH(y,r.shape,r.dtype,u,b);g=s.makeTensorInfo(b,r.dtype);const S=s.texData.get(g.dataId);S.values=x}else g=H2(r,u,s);h.push(g),c=Er(c.length,a)}Pi("sum",c,a);const[p,m]=bi(g.shape,c);let v=p;i&&(v=$r(p,l));const _=QDt(g,m,v,s);for(const w of h)s.disposeIntermediateTensorInfo(w);return _}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JDt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,keepDims:s}=r,a=i.shape.length,l=Gt(o,i.shape);let c=l;const u=cr(c,a);let d=i;u!=null&&(d=mo({inputs:{x:i},backend:n,attrs:{perm:u}}),c=Er(c.length,i.shape.length)),Pi("min",c,a);const[f,h]=bi(d.shape,c),g=Re(h),p=nt({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}}),m=ym(p,p.dtype,"min",n);let v;if(s){const _=$r(f,l);v=nt({inputs:{x:m},backend:n,attrs:{shape:_}})}else v=nt({inputs:{x:m},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),u!=null&&n.disposeIntermediateTensorInfo(d),v}const ePt={kernelName:QO,backendName:"webgl",kernelFunc:JDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tPt=RH+`
  return min(a, b);
`,nPt=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+vm+`
  return result;
`,rPt=Ni({opSnippet:tPt,packedOpSnippet:nPt,cpuKernelImpl:jAt}),iPt={kernelName:w1,backendName:"webgl",kernelFunc:rPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oPt{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((u,d)=>u[0]+e[d]+u[1]);const i=e.length,o=On(i),s=n.map(u=>u[0]).join(","),a=n.map((u,d)=>u[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),c=r==="reflect"?0:1;if(i===1){this.userCode=`
        int start = ${s};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${o} start = ${o}(${s});
      ${o} end = ${o}(${a});

      void main() {
        ${o} outC = getOutputCoords();
        for (int i = 0; i < ${i}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${o} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sPt{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((g,p)=>g[0]+e[p]+g[1]);const i=e.length,o=On(i),s=n.map(g=>g[0]).join(","),a=n.map((g,p)=>g[0]+e[p]).join(","),l=uo("rc",i),c=uo("source",i),u=`${l[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,f=r==="reflect"?0:1;let h="";if(i===1){const g=`
        ${o} source = rc;
        if (source < start) {
          source = start * 2 - source - ${f};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${f};
        }
        source -= start;
      `;h=`
        ${o} rc = outputLoc;
        ${g}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[i-1]} += 1;
        if(${u}) {
          ${g}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{const g=`
        ${o} source = rc;
        ${o} lt = ${o}(lessThan(source, start));
        ${o} gte = ${o}(greaterThanEqual(source, end));
        ${o} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${f}) +
                gte * ((end - 1) * 2 - source + ${f});
        source -= start;
      `;h=`
        ${o} rc = outputLoc;
        ${g}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[i-1]} += 1;
        if(${u}) {
          ${g}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${l[i-2]} += 1;
        if(${l[i-2]} < ${this.outputShape[i-2]}) {
          ${g}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${l[i-1]} += 1;
          if(${u}) {
            ${g}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${o} start = ${o}(${s});
      const ${o} end = ${o}(${a});

      void main() {
        ${o} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aPt=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:i,mode:o}=n,s=Te().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new sPt(r.shape,i,o):new oPt(r.shape,i,o);return e.runWebGLProgram(s,[r],r.dtype)},lPt={kernelName:ZO,backendName:"webgl",kernelFunc:aPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cPt=`if (b == 0.0) return NAN;
  return mod(a, b);`,uPt=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+vm+`
  return result;
`,dPt=Ni({opSnippet:cPt,packedOpSnippet:uPt}),fPt={kernelName:_1,backendName:"webgl",kernelFunc:dPt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hPt{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pPt=`
if (a == b) {
  return 1.0;
};
return a / b;`,mPt=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,vge=Ni({opSnippet:pPt,packedOpSnippet:mPt,checkOutOfBounds:!0}),gPt={kernelName:s1,backendName:"webgl",kernelFunc:vge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pZ="return a - b;",yge=Ni({opSnippet:pZ,packedOpSnippet:pZ,supportsComplex:!0,cpuKernelImpl:cMt}),vPt={kernelName:F1,backendName:"webgl",kernelFunc:yge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bge(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:o}=r,s=Gt([o],i.shape),a=gge({inputs:{x:i},backend:n,attrs:{reductionIndices:s,keepDims:!1}}),l=$r(a.shape,s),c=nt({inputs:{x:a},backend:n,attrs:{shape:l}}),u=yge({inputs:{a:i,b:c},backend:n}),d=hge({inputs:{x:u},backend:n}),f=G2({inputs:{x:d},backend:n,attrs:{axis:s,keepDims:!1}}),h=nt({inputs:{x:f},backend:n,attrs:{shape:l}}),g=vge({inputs:{a:d,b:h},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),g}const yPt={kernelName:g2,backendName:"webgl",kernelFunc:bge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bPt(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:o,seed:s,normalized:a}=r,l=a?i:bge({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),c=l.shape[0],u=l.shape[1],d=new hPt(c,u,o),f=[[s]],h=n.runWebGLProgram(d,[l],"int32",f);return a||n.disposeIntermediateTensorInfo(l),h}const xPt={kernelName:Zce,backendName:"webgl",kernelFunc:bPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wPt=Va+`
  return -x;
`,_Pt=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function SPt(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const o=n.texData.get(r.dataId),[s,a]=VAt(o.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,s)}let i;return Te().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new Wd(r.shape,_Pt):i=new lc(r.shape,wPt),n.runWebGLProgram(i,[r],r.dtype)}const CPt={kernelName:JO,backendName:"webgl",kernelFunc:SPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EPt=vV;function TPt(t){Es("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:o}=e,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l}=r,c=n.readSync(i.dataId),u=n.readSync(o.dataId),{selectedIndices:d}=EPt(c,u,s,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const kPt={kernelName:_W,backendName:"webgl",kernelFunc:TPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const APt=yV;function MPt(t){Es("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:o}=e,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r,u=n.readSync(i.dataId),d=n.readSync(o.dataId),{selectedIndices:f,validOutputs:h}=APt(u,d,s,a,l,c);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const IPt={kernelName:SW,backendName:"webgl",kernelFunc:MPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OPt=bV;function RPt(t){Es("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:o}=e,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r,u=n.readSync(i.dataId),d=n.readSync(o.dataId),f=s,h=a,g=l,p=c,{selectedIndices:m,selectedScores:v}=OPt(u,d,f,h,g,p);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}const DPt={kernelName:CW,backendName:"webgl",kernelFunc:RPt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PPt{constructor(e,n,r,i){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${i}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NPt=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:o,depth:s,onValue:a,offValue:l}=r,c=Re(i.shape),u=new PPt(c,s,a,l),d=nt({inputs:{x:i},backend:n,attrs:{shape:[c]}}),f=n.runWebGLProgram(u,[d],o);n.disposeIntermediateTensorInfo(d);const h=[...i.shape,s],g=nt({inputs:{x:f},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),g},$Pt={kernelName:n2,backendName:"webgl",kernelFunc:NPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zA(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const i=dS({inputs:{input:r},backend:n}),o=zA({inputs:{x:i},backend:n}),s=q2({inputs:{input:r},backend:n}),a=zA({inputs:{x:s},backend:n}),l=Yf({inputs:{real:o,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),l}else return fS({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const LPt={kernelName:b2,backendName:"webgl",kernelFunc:zA};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xge(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const i=dS({inputs:{input:r},backend:n}),o=xge({inputs:{x:i},backend:n}),s=q2({inputs:{input:r},backend:n}),a=zA({inputs:{x:s},backend:n}),l=Yf({inputs:{real:o,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),l}else return fS({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const FPt={kernelName:t2,backendName:"webgl",kernelFunc:xge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BPt(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return U3({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const o=e[0].shape,s=e[0].dtype;e.forEach(u=>{V4(o,u.shape,"All tensors passed to stack must have matching shapes"),Y(s===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const d=U3({inputs:{input:u},backend:n,attrs:{dim:i}});return a.push(d),d}),c=oge({inputs:l,backend:n,attrs:{axis:i}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const UPt={kernelName:r2,backendName:"webgl",kernelFunc:BPt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zPt{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,u)=>c[0]+e[u]+c[1]);const i=e.length,o=On(i),s=n.map(c=>c[0]).join(","),a=n.map((c,u)=>c[0]+e[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);if(i===1){this.userCode=`
        int start = ${s};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${o} start = ${o}(${s});
      ${o} end = ${o}(${a});

      void main() {
        ${o} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${o} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jPt{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((p,m)=>p[0]+e[m]+p[1]);const i=e.length,o=On(i),s=n.map(p=>p[0]).join(","),a=n.map((p,m)=>p[0]+e[m]).join(","),l=uo("rc",i),c=uo("source",i),u=`${l[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,f=[`${o} rc = outputLoc;`,`${l[i-1]} += 1;
       if(${u}) {
      `,i===1?"":`}
       rc = outputLoc;
       ${l[i-2]} += 1;
       if(${l[i-2]} < ${this.outputShape[i-2]}) {`,i===1?"":`  ${l[i-1]} += 1;
         if(${u}) {`],h=i===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let g="";for(let p=0,m=i===1?2:4;p<m;p++)g+=`
        ${f[p]}
        if (${h}) {
          result[${p}] = float(value);
        } else {
          ${o} source = rc - start;
          result[${p}] = getChannel(getX(${c.join()}), ${d});
        }
      `;g+=i===1?"} ":"}}",this.userCode=`
      const ${o} start = ${o}(${s});
      const ${o} end = ${o}(${a});

      void main() {
        ${o} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${g}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wge=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:o,constantValue:s}=r;if(Re(i.shape)===0){const c=o.map((u,d)=>u[0]+i.shape[d]+u[1]);return fS({backend:n,attrs:{shape:c,value:s,dtype:i.dtype}})}const a=Te().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new jPt(i.shape,o,s):new zPt(i.shape,o,s),l=[[s]];return n.runWebGLProgram(a,[i],i.dtype,l)},WPt={kernelName:i2,backendName:"webgl",kernelFunc:wge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VPt=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,HPt=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+vm+`
  return result;
`,GPt=Ni({opSnippet:VPt,packedOpSnippet:HPt}),qPt={kernelName:C1,backendName:"webgl",kernelFunc:GPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XPt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,keepDims:s}=r,a=i.shape.length,l=[],c=Gt(o,i.shape);let u=c;const d=cr(u,a);let f=i;d!=null&&(f=mo({inputs:{x:i},backend:n,attrs:{perm:d}}),u=Er(u.length,a),l.push(f)),Pi("prod",u,a);let h;if(n.shouldExecuteOnCPU([f])){const g=n.texData.get(f.dataId).values,{outVals:p,outShape:m,outDtype:v}=GAt(f.shape,f.dtype,g,u);h=n.makeTensorInfo(m,v,p)}else{const[g,p]=bi(f.shape,u),m=Re(p),v=nt({inputs:{x:f},backend:n,attrs:{shape:[-1,m]}}),_=LW(i.dtype),w=ym(v,_,"prod",n);h=nt({inputs:{x:w},backend:n,attrs:{shape:g}}),l.push(v),l.push(w)}if(s){l.push(h);const g=$r(h.shape,c);h=nt({inputs:{x:h},backend:n,attrs:{shape:g}})}return l.forEach(g=>n.disposeIntermediateTensorInfo(g)),h}const KPt={kernelName:s2,backendName:"webgl",kernelFunc:XPt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YPt(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:o,indices:s}=e,{outputRaggedRank:a}=r,l=i.map(v=>n.readSync(v.dataId)),c=i.map(v=>v.shape),u=n.readSync(o.dataId),d=n.readSync(s.dataId),[f,h,g]=qAt(l,c,u,o.shape,o.dtype,d,s.shape,a),p=f.map(v=>n.makeTensorInfo([v.length],"int32",v)),m=n.makeTensorInfo(g,o.dtype,h);return p.concat([m])}const QPt={kernelName:Jce,backendName:"webgl",kernelFunc:YPt};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZPt(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:o}=e,s=n.readSync(r.dataId),a=n.readSync(i.dataId),l=n.readSync(o.dataId),[c,u]=XAt(s,r.shape,r.dtype,a,i.shape,l,o.shape),d=n.makeTensorInfo([c.length],"int32",c),f=n.makeTensorInfo([u.length],r.dtype,u);return[d,f]}const JPt={kernelName:eue,backendName:"webgl",kernelFunc:ZPt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eNt(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:o,defaultValue:s,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=n.readSync(i.dataId),u=n.readSync(o.dataId),d=n.readSync(s.dataId),f=a.map(m=>n.readSync(m.dataId)),h=a.map(m=>m.shape),[g,p]=KAt(c,i.shape,u,o.shape,o.dtype,d,s.shape,f,h,l);return n.makeTensorInfo(g,o.dtype,p)}const tNt={kernelName:tue,backendName:"webgl",kernelFunc:eNt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ge=t=>{const{backend:e,attrs:n}=t,{start:r,stop:i,step:o,dtype:s}=n,a=YAt(r,i,o,s);return e.makeTensorInfo([a.length],s,a)},nNt={kernelName:EW,backendName:"webgl",kernelFunc:_ge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rNt="return 1.0 / x;",iNt=tn({opSnippet:rNt}),oNt={kernelName:E1,backendName:"webgl",kernelFunc:iNt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sNt=Va+`
  return (x < 0.0) ? 0.0 : x;
`,aNt=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,lNt=tn({opSnippet:sNt,packedOpSnippet:aNt}),cNt={kernelName:T1,backendName:"webgl",kernelFunc:lNt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uNt=Va+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,dNt=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,fNt=tn({opSnippet:uNt,packedOpSnippet:dNt}),hNt={kernelName:k1,backendName:"webgl",kernelFunc:fNt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pNt{constructor(e,n,r,i,o){this.variableNames=["A"],this.outputShape=[];const[s,a,l,c]=e;this.outputShape=[s,n,r,c];const u=[i&&n>1?a-1:a,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r];let f;o?f="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mNt{constructor(e,n,r,i,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[s,a,l,c]=e;this.outputShape=[s,n,r,c];const u=[i&&n>1?a-1:a,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r];let f;o?f="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gNt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:o,halfPixelCenters:s,size:a}=r,[l,c]=a,u=Te().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new mNt(i.shape,l,c,o,s):new pNt(i.shape,l,c,o,s);return n.runWebGLProgram(u,[i],"float32")}const vNt={kernelName:c2,backendName:"webgl",kernelFunc:gNt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yNt{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,o]=n,[,s,a]=e,l=[r&&s>1?i-1:i,r&&a>1?o-1:o],c=[r&&s>1?s-1:s,r&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],f=1/u,h=1/d,g=Math.ceil(f)*2+2,p=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${g});
        const int winWidth = int(${p});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${o-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bNt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:o}=e,{alignCorners:s}=r,a=new yNt(o.shape,i.shape,s);return n.runWebGLProgram(a,[o],o.dtype)}const xNt={kernelName:AW,backendName:"webgl",kernelFunc:bNt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wNt{constructor(e,n,r,i,o){this.variableNames=["A"],this.outputShape=[];const[s,a,l,c]=e;this.outputShape=[s,n,r,c];const u=[i&&n>1?a-1:a,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r],f=i?"0.5":"0.0";let h;o?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Nt{constructor(e,n,r,i,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[s,a,l,c]=e;this.outputShape=[s,n,r,c];const u=[i&&n>1?a-1:a,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r],f=i?"0.5":"0.0";let h;o?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SNt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:o,halfPixelCenters:s,size:a}=r,[l,c]=a,u=Te().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new _Nt(i.shape,l,c,o,s):new wNt(i.shape,l,c,o,s);return n.runWebGLProgram(u,[i],i.dtype)}const CNt={kernelName:l2,backendName:"webgl",kernelFunc:SNt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ENt{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,o]=n,[,s,a]=e,l=[r&&s>1?i-1:i,r&&a>1?o-1:o],c=[r&&s>1?s-1:s,r&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],f=1/u,h=1/d,g=Math.ceil(f)*2+2,p=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${g});
        const int winWidth = int(${p});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${o}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TNt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:o}=e,{alignCorners:s}=r,a=new ENt(o.shape,i.shape,s);return n.runWebGLProgram(a,[o],o.dtype)}const kNt={kernelName:kW,backendName:"webgl",kernelFunc:TNt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ANt{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const i=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,o=e.map((a,l)=>i(l)).join(","),s=On(r);this.userCode=`
      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MNt{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const i=uo("rc",r),o=`${i[r-1]} + 1 < ${this.outputShape[r-1]}`,s=`${i[r-2]} + 1 < ${this.outputShape[r-2]}`,a=On(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${o}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(i.slice())};
          if(${o}){
            result.g = ${c(i.slice())};
          }
          if(${s}) {
            result.b = ${u(i.slice())};
            if(${o}) {
              result.a = ${d(i.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(g){return f(g)}function c(g){return g[r-1]="("+g[r-1]+" + 1)",f(g)}function u(g){return g[r-2]="("+g[r-2]+" + 1)",f(g)}function d(g){return g[r-1]="("+g[r-1]+" + 1)",g[r-2]="("+g[r-2]+" + 1)",f(g)}function f(g){const p=e.map((_,w)=>h(w,g)),m=p.join(","),v=p.slice(-2).join(",");return`getChannel(getX(${m}), vec2(${v}))`}function h(g,p){return n.indexOf(g)!==-1&&e[g]!==1?`${e[g]} - ${p[g]} - 1`:`${p[g]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function INt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:o}=r,s=i.shape.length,a=Gt(o,i.shape);if(s===0)return ds({inputs:{x:i},backend:n});const l=Te().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new MNt(i.shape,a):new ANt(i.shape,a);return n.runWebGLProgram(l,[i],i.dtype)}const ONt={kernelName:u2,backendName:"webgl",kernelFunc:INt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RNt{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],i=e[2];this.outputShape=e;let o="";typeof n=="number"?o=`float outputValue = ${n.toFixed(2)};`:o=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${o}
          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DNt={kernelName:NW,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:o,center:s}=e,a=n,l=new RNt(r.shape,o),[c,u]=OV(s,r.shape[1],r.shape[2]),d=[[c,u,Math.sin(i),Math.cos(i)]];return a.runWebGLProgram(l,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PNt=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,NNt=tn({opSnippet:PNt}),$Nt={kernelName:A1,backendName:"webgl",kernelFunc:NNt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LNt="return inversesqrt(x);",FNt=tn({opSnippet:LNt,cpuKernelImpl:QAt}),BNt={kernelName:M1,backendName:"webgl",kernelFunc:FNt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NH{constructor(e,n,r,i,o,s,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=s;const c=On(o.length),u=On(s.length);let d="";r===1?d="i":r===2&&(d="i, j");const f=`getIndices(${d})`;let h="";i===1?h="i":i===2&&(h="i, coords[1]");const g=`getUpdates(${h})`;let p="";l&&(p="coords[0], coords[1]");const m=`getDefaultValue(${p})`,v=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${o});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${f});
              flattenedIndex += index * ${v};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${g};
              found = true;
            }
          }
          setOutput(mix(${m}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UNt{constructor(e,n,r,i,o,s,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s;const c=On(o.length),u=On(s.length);let d="";r===1?d="i":r===2&&(d="i, j");const f=`getIndices(${d})`;let h="";i===1?h="i":i===2&&(h="i, coords[1]");const g=`getUpdates(${h})`;let p="";l&&(p="coords[0], coords[1]");const m=`getDefaultValue(${p})`,v=n>1?"strides[j]":"strides",_=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${o});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${f});
              flattenedIndex += index.xz * ${v};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${_};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${g};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${m}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zNt(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:o}=e,{shape:s}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=fm(o,i,s),f=[d/c,c];if(d===0)return n.makeTensorInfo(s,i.dtype);const h=nt({inputs:{x:i},backend:n,attrs:{shape:[l,a]}}),g=nt({inputs:{x:o},backend:n,attrs:{shape:[l,c]}}),p=n.makeTensorInfo([],"float32",new Float32Array([0]));let m;Te().getBool("WEBGL_PACK")?m=new UNt(l,a,h.shape.length,g.shape.length,u,f):m=new NH(l,a,h.shape.length,g.shape.length,u,f);const v=n.runWebGLProgram(m,[g,h,p],g.dtype),_=nt({inputs:{x:v},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(p),_}const jNt={kernelName:nue,backendName:"webgl",kernelFunc:zNt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WNt{constructor(e,n,r,i){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const o="while (left < right) {",s=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=Te().getNumber("WEBGL_VERSION")===2?o:s,l=i==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VNt(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:o}=e,{side:s}=r,a=new WNt(i.shape[0],i.shape[1],o.shape[1],s),l=[[i.shape[1]]];return n.runWebGLProgram(a,[i,o],"int32",l)}const HNt={kernelName:iue,backendName:"webgl",kernelFunc:VNt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GNt{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let i,o;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)o="resRC",i="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<n.length;u++)c.push(`${a[u]}`),u<e&&l.push(`${a[u]}`);i=l.join(),o=c.join()}const s=On(r);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        float cVal = getC(${i});
        if (cVal >= 1.0) {
          setOutput(getA(${o}));
        } else {
          setOutput(getB(${o}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qNt(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:o}=e,s=new GNt(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(s,[r,i,o],cs(i.dtype,o.dtype))}const XNt={kernelName:d2,backendName:"webgl",kernelFunc:qNt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KNt=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${M2};
  float scale = ${I2};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,YNt=tn({opSnippet:KNt}),QNt={kernelName:I1,backendName:"webgl",kernelFunc:YNt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZNt=h0+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,JNt=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,e$t=tn({opSnippet:ZNt,packedOpSnippet:JNt,cpuKernelImpl:JAt}),t$t={kernelName:P1,backendName:"webgl",kernelFunc:e$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n$t=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,r$t=tn({opSnippet:n$t}),i$t={kernelName:D1,backendName:"webgl",kernelFunc:r$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o$t=h0+`
  return sin(x);
`,s$t=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${vm}
  return result;
`,a$t=tn({opSnippet:o$t,packedOpSnippet:s$t}),l$t={kernelName:O1,backendName:"webgl",kernelFunc:a$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c$t=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,u$t=tn({opSnippet:c$t}),d$t={kernelName:R1,backendName:"webgl",kernelFunc:u$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f$t=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,h$t=tn({opSnippet:f$t}),p$t={kernelName:N1,backendName:"webgl",kernelFunc:h$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m$t=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:o,paddings:s}=r;Y(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=o.reduce((v,_)=>v*_),l=[[0,0]];l.push(...s);for(let v=1+o.length;v<i.shape.length;++v)l.push([0,0]);const c=[],u=wge({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),d=Y1(u.shape,o,a,!1),f=Q1(d.length,o.length,!1),h=Z1(u.shape,o,a,!1),g=nt({inputs:{x:u},backend:n,attrs:{shape:d}}),p=mo({inputs:{x:g},backend:n,attrs:{perm:f}}),m=nt({inputs:{x:p},backend:n,attrs:{shape:h}});return c.push(u),c.push(g),c.push(p),c.forEach(v=>n.disposeIntermediateTensorInfo(v)),m},g$t={kernelName:p2,backendName:"webgl",kernelFunc:m$t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v$t(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:o,defaultValue:s}=e;if(o.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${o.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${i.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);const a=n.readSync(r.dataId),l=n.readSync(i.dataId),c=n.readSync(o.dataId),u=n.readSync(s.dataId)[0],[d,f,h,g,p]=tMt(a,r.shape,r.dtype,l,i.dtype,c,u);return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([f[0]],i.dtype,h),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map(m=>Number(m)))),n.makeTensorInfo([p.length],r.dtype,new Int32Array(p))]}const y$t={kernelName:oue,backendName:"webgl",kernelFunc:v$t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b$t(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:o}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(o.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${o.shape}`);const s=Array.from(n.readSync(i.dataId)),a=n.readSync(r.dataId),l=Array.from(n.readSync(o.dataId)),[c,u,d]=nMt(a,r.shape,r.dtype,s,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],o.dtype,new Int32Array(d))]}const x$t={kernelName:sue,backendName:"webgl",kernelFunc:b$t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w$t(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:o}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${i.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${o.shape}`);const s=n.readSync(r.dataId),a=n.readSync(i.dataId),l=n.readSync(o.dataId),[c,u]=Gme(s,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const _$t={kernelName:aue,backendName:"webgl",kernelFunc:w$t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S$t(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:o}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${i.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${o.shape}`);const s=n.readSync(r.dataId),a=n.readSync(i.dataId),l=n.readSync(o.dataId),[c,u]=Gme(s,r.shape,r.dtype,a,l);return n.makeTensorInfo(u,r.dtype,c)}const C$t={kernelName:lue,backendName:"webgl",kernelFunc:S$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E$t(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:o,defaultValue:s}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:f}=fm(o,i,a),h=!1;if(o.dtype==="string"){const v=n.bufferSync(i),_=n.bufferSync(o),w=wf(n.readSync(s.dataId)[0]),y=ZAt(v,_,a,f,u,c,l,d,w,h);return n.makeTensorInfo(a,y.dtype,y.values)}const g=new NH(c,l,i.shape.length,o.shape.length,d,[f,1],h),p=n.runWebGLProgram(g,[o,i,s],o.dtype),m=nt({inputs:{x:p},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(p),m}const T$t={kernelName:cue,backendName:"webgl",kernelFunc:E$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k$t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:o,axis:s}=r,a=Gt(s,i.shape)[0],l=GV(i,o,a),c=i.shape.length,u=new Array(c).fill(0),d=i.shape.slice();return l.map(f=>{const h=[...d];h[a]=f;const g=p0({inputs:{x:i},backend:n,attrs:{begin:u,size:h}});return u[a]+=f,g})}const A$t={kernelName:m2,backendName:"webgl",kernelFunc:k$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mZ="return sqrt(x);",M$t=tn({opSnippet:mZ,packedOpSnippet:mZ,cpuKernelImpl:rMt}),I$t={kernelName:$1,backendName:"webgl",kernelFunc:M$t};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O$t="return x * x;",R$t=tn({opSnippet:O$t}),D$t={kernelName:MW,backendName:"webgl",kernelFunc:R$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gZ="return (a - b) * (a - b);",P$t=Ni({opSnippet:gZ,packedOpSnippet:gZ}),N$t={kernelName:L1,backendName:"webgl",kernelFunc:P$t};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $$t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");const o=n.readSync(i.dataId),s=Gu(o),a=iMt(s,"string",r);return n.makeTensorInfo(i.shape,"string",a)}const L$t={kernelName:IW,backendName:"webgl",kernelFunc:$$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F$t({inputs:t,attrs:e,backend:n}){const{x:r}=t,i=Va+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,o=new lc(r.shape,i);return n.runWebGLProgram(o,[r],r.dtype)}const B$t={kernelName:j1,backendName:"webgl",kernelFunc:F$t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class U$t{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const i=r.length,o=On(r.length),s=On(r.length);let a="";if(i===1)a="coords * strides + begin";else{let l=0;a=r.map((c,u)=>(l++,r.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${o} begin = ${o}(${e});
      ${o} strides = ${o}(${n});

      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z$t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:o,end:s,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:f}=r,{finalShapeSparse:h,finalShape:g,isIdentity:p,sliceDim0:m,isSimpleSlice:v,begin:_,end:w,strides:y}=AV(i.shape,o,s,a,l,c,u,d,f);let b;if(p)b=nt({inputs:{x:i},backend:n,attrs:{shape:g}});else if(m||v){Y(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const S=EV(_,w,y),C=p0({inputs:{x:i},backend:n,attrs:{begin:_,size:S}});b=nt({inputs:{x:C},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(C)}else if(n.shouldExecuteOnCPU([i])){const C=n.readSync(i.dataId),T=Vt(i.shape,i.dtype,C),E=oMt(h,T,y,_);b=n.makeTensorInfo(g,i.dtype,E.values)}else{const C=new U$t(_,y,h);b=n.runWebGLProgram(C,[i],i.dtype)}const x=nt({inputs:{x:b},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(b),x}const j$t={kernelName:OW,backendName:"webgl",kernelFunc:z$t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W$t(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:o,leftPad:s,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,f=n.readSync(u.dataId),h=n.readSync(d.dataId),[g,p]=sMt(f,h,i,o,s,a,l,c);return[n.makeTensorInfo([g.length],"string",g),n.makeTensorInfo(d.shape,"int32",p)]}const V$t={kernelName:uue,backendName:"webgl",kernelFunc:W$t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H$t(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:o,delimiter:s}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(o.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${o.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);const a=n.readSync(o.dataId),l=n.readSync(s.dataId)[0],[c,u,d]=aMt(a,l,i),f=u.length;return[n.makeTensorInfo([f,2],"int32",c),n.makeTensorInfo([f],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const G$t={kernelName:due,backendName:"webgl",kernelFunc:H$t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q$t(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:o}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const s=n.readSync(o.dataId),a=lMt(s,i);return n.makeTensorInfo(o.shape,"int32",a)}const X$t={kernelName:fue,backendName:"webgl",kernelFunc:q$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K$t="return tan(x);",Y$t=tn({opSnippet:K$t}),Q$t={kernelName:B1,backendName:"webgl",kernelFunc:Y$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z$t=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,J$t=tn({opSnippet:Z$t}),eLt={kernelName:U1,backendName:"webgl",kernelFunc:J$t};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tLt(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:i,indices:o,updates:s}=e,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=fm(s,o,i.shape),f=[d/c,c];if(d===0)return n.makeTensorInfo(i.shape,o.dtype);const h=nt({inputs:{x:o},backend:n,attrs:{shape:[l,a]}}),g=nt({inputs:{x:s},backend:n,attrs:{shape:[l,c]}}),p=nt({inputs:{x:i},backend:n,attrs:{shape:f}}),m=new NH(l,a,h.shape.length,g.shape.length,u,f,!1,!0),v=n.runWebGLProgram(m,[g,h,p],p.dtype),_=nt({inputs:{x:v},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),_}const nLt={kernelName:rue,backendName:"webgl",kernelFunc:tLt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rLt{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let s=0;s<r.length;s++)r[s]=e[s]*n[s];this.outputShape=r,this.rank=r.length;const i=On(this.rank),o=iLt(e);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        setOutput(getA(${o}));
      }
    `}}function iLt(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<t.length;i++)r.push(`imod(${n[i]}, ${t[i]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sge(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:o}=r;if(i.dtype==="string"||i.shape.length>5){const l=n.readSync(i.dataId),c=i.dtype==="string"?l.map(f=>wf(f)):l,u=Vt(i.shape,i.dtype,c),d=uMt(u,o);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const s=new rLt(i.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}const oLt={kernelName:z1,backendName:"webgl",kernelFunc:Sge};class sLt{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class aLt{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lh(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function vZ(t){let e=1;for(;e<t;)e*=2;return e}function lLt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:o,sorted:s}=r,a=Te().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Te().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=i.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([i])||u<a||o>l){const E=n.readSync(i.dataId),[k,A]=dMt(E,c,i.dtype,o,s);return[n.makeTensorInfo(k.shape,k.dtype,k.values),n.makeTensorInfo(A.shape,A.dtype,A.values)]}if(o===0)return c[c.length-1]=0,[n.makeTensorInfo(c,i.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(u===1)return[i,fS({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const d=n.texData.get(i.dataId),f=d!==null&&d.isPacked,h=f?n.unpackTensor(i):i,p=Re(c)/u,m=nt({inputs:{x:h},attrs:{shape:[p,u]},backend:n});f&&lh(n,h);const v=vZ(o),_=vZ(u);let w=null;const y=()=>w===null?[m,m]:[m,w],b=(E,k,A)=>{const O=y(),D=new sLt(A),N=[[u],[w===null?1:0],[Number.NEGATIVE_INFINITY],[E],[k]],U=w;w=n.runWebGLProgram(D,O,"int32",N),lh(n,U)};for(let E=1;E<v;E*=2){const k=E*2;for(let A=E;A>=1;A/=2)b(k,A,[p,_])}for(let E=_;E>v;E/=2){const k=y(),A=new aLt([p,E/2]),D=[[u],[w===null?1:0],[v]],P=w;w=n.runWebGLProgram(A,k,"int32",D),lh(n,P);const N=v/2,U=N*2;for(let L=N;L>=1;L/=2)b(U,L,w.shape)}let x=w;w=p0({inputs:{x:w},backend:n,attrs:{begin:0,size:[p,o]}}),lh(n,x);let S=mge({inputs:{x:m,indices:w},backend:n,attrs:{axis:1,batchDims:1}});lh(n,m);const C=c.slice(0,-1);C.push(o),x=w,w=nt({inputs:{x:w},attrs:{shape:C},backend:n}),lh(n,x);const T=S;return S=nt({inputs:{x:S},attrs:{shape:C},backend:n}),lh(n,T),[S,w]}const cLt={kernelName:RW,backendName:"webgl",kernelFunc:lLt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uLt{constructor(e,n,r,i,o,s){this.variableNames=["Image","Transforms"],this.outputShape=s;const a=r==="nearest"?1:2;let l;switch(i){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${o});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${o});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dLt(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,transforms:o}=e,{interpolation:s,fillMode:a,fillValue:l,outputShape:c}=r,[u,d,f,h]=i.shape,[g,p]=c??[d,f],m=[u,g,p,h],v=new uLt(d,f,s,a,l,m);return n.runWebGLProgram(v,[i,o],"float32")}const fLt={kernelName:DW,backendName:"webgl",kernelFunc:dLt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hLt(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:o}=e;cS(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const s=r.readSync(o.dataId),{outputValues:a,outputShape:l,indices:c}=fMt(s,i,o.shape,o.dtype);return[r.makeTensorInfo(l,o.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const pLt={kernelName:PW,backendName:"webgl",kernelFunc:hLt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mLt(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:o}=r;o<0&&(o+=i.shape.length);const s=i,a=s.shape.length,l=i.shape[o],c=new Array(a-1);let u=0;for(let p=0;p<a;p++)p!==o&&(c[u++]=s.shape[p]);const d=[],f=new Array(a).fill(0),h=s.shape.slice();h[o]=1;const g=new Array(l);for(let p=0;p<g.length;p++){f[o]=p;const m=p0({inputs:{x:s},backend:n,attrs:{begin:f,size:h}}),v=nt({inputs:{x:m},backend:n,attrs:{shape:c}});g[p]=v,d.push(m)}return d.forEach(p=>n.disposeIntermediateTensorInfo(p)),g}const gLt={kernelName:v2,backendName:"webgl",kernelFunc:mLt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vLt{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,i=e.batchSize,o=e.inSize,s=e.numSegments,a=s*Math.ceil(o/r);this.outputShape=[i,a];const l="0.0",c="sumValue",u=Math.floor(r/4)*4,d=r%4,f=`
        sumValue += dot(values, segFilter);
    `;let h="";o%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return initializationValue;
        }
      `);let g="";o%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${g}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${s})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${s})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${f}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${f}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${f}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${f}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yLt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:o}=e,{numSegments:s}=r,a=i.shape.length,l=[];let c=0;const u=cr([c],a);let d=i;u!=null&&(d=mo({inputs:{x:i},backend:n,attrs:{perm:u}}),l.push(d),c=Er(1,a)[0]);const f=sfe(d.shape,c,s),h=Re([d.shape[c]]),g=nt({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}});l.push(g);const p=LW(i.dtype),m=(y,b,x,S,C)=>{const T=y.shape[0],E=y.shape[1],k=ofe(E,C),A={windowSize:k,inSize:E,batchSize:T,numSegments:C},O=new vLt(A,b),D=n.compileAndRun(O,[y,x],S);if(l.push(D),D.shape[1]===C)return D;const P=_ge({backend:n,attrs:{start:0,stop:C,step:1,dtype:"float32"}}),N=Sge({inputs:{x:P},backend:n,attrs:{reps:[E/k]}});return l.push(P),l.push(N),m(D,b,N,S,C)},v=m(g,"unsortedSegmentSum",o,p,s),_=nt({inputs:{x:v},backend:n,attrs:{shape:f}});let w=_;if(u!=null){l.push(_);const y=Vf(u);w=mo({inputs:{x:w},backend:n,attrs:{perm:y}})}return l.forEach(y=>n.disposeIntermediateTensorInfo(y)),w}const bLt={kernelName:y2,backendName:"webgl",kernelFunc:yLt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xLt=[rIt,oIt,lIt,dIt,hIt,gIt,yIt,xIt,CIt,TIt,MIt,RIt,NIt,BIt,jIt,VIt,GIt,YIt,ZIt,eOt,iOt,dOt,hOt,vOt,bOt,EOt,kOt,OOt,UMt,POt,BOt,WOt,KOt,ZOt,e2t,n2t,i2t,l2t,d2t,p2t,g2t,y2t,x2t,S2t,E2t,M2t,O2t,P2t,L2t,B2t,W2t,q2t,Q2t,eRt,rRt,iRt,sRt,lRt,uRt,fRt,pRt,yRt,wRt,CRt,TRt,MRt,RRt,$Rt,URt,BMt,jRt,LOt,HRt,XRt,QRt,jMt,tDt,oDt,aDt,dDt,pDt,yDt,wDt,EDt,MDt,RDt,PDt,FDt,UDt,jDt,GDt,XDt,YDt,ZDt,ePt,iPt,lPt,fPt,xPt,HMt,CPt,kPt,IPt,DPt,wOt,$Pt,FPt,UPt,WPt,qPt,VMt,KPt,QPt,JPt,tNt,nNt,_Ot,gPt,oNt,cNt,hNt,qMt,vNt,xNt,CNt,kNt,ONt,DNt,$Nt,BNt,jNt,HNt,XNt,QNt,t$t,i$t,l$t,d$t,cOt,yPt,p$t,g$t,y$t,x$t,_$t,C$t,T$t,A$t,I$t,D$t,N$t,L$t,B$t,j$t,V$t,G$t,X$t,vPt,eIt,Q$t,eLt,nLt,oLt,cLt,fLt,tIt,pLt,gLt,bLt,LPt];for(const t of xLt)pue(t);const wLt="_container_1mf48_1",_Lt="_loadingIndicator_1mf48_19",KP={container:wLt,loadingIndicator:_Lt},SLt=()=>{const[t,e]=R.useState([]),[n,r]=R.useState([]),[i,o]=R.useState(7),[s,a]=R.useState(null),[l,c]=R.useState(""),[u,d]=R.useState([]),[f,h]=R.useState("BILLION•DOLLAR•CAT"),[g,p]=R.useState([]),[m,v]=R.useState([]);R.useEffect(()=>{Zut.AutoInit(),_(),w()},[]);const _=async()=>{try{const P=await Pxt("/model.json");a(P),y("Model loaded")}catch(P){console.error("Error loading model:",P),y("Error loading model")}},w=async()=>{try{const P=await Ht.get("http://99.37.183.149:3030/api1/rune-names");p(P.data)}catch(P){console.error("Error fetching rune names:",P),y("Error fetching rune names")}},y=P=>{c(P)},b=async()=>{const P=document.getElementById("btn_fetch_data"),N=document.getElementById("load_fetch_data"),U=document.getElementById("div_container_linegraph"),L=document.getElementById("div_linegraph_data_title");P&&(P.style.display="none"),N&&(N.style.display="block");const V=`http://99.37.183.149:3030/api1/rune-data?rune_name=${encodeURIComponent(f)}&limit=50`;try{const Q=(await Ht.get(V)).data;if(e(Q.map(te=>({timestamp:te.timestamp,price:te.price_sats}))),U&&(U.style.display="block"),P&&(P.style.display="block"),N&&(N.style.display="none"),L&&(L.innerText=`Symbol: ${f} (last refreshed ${new Date().toISOString()})`),Q.length>0)r(Q),document.getElementById("div_container_getsma")&&(document.getElementById("div_container_getsma").style.display="block",document.getElementById("div_container_getsmafirst").style.display="none");else{const te=document.getElementById("div_linegraph_data");te&&(te.innerText="No data found"),P&&(P.style.display="block"),N&&(N.style.display="none")}}catch(G){console.error("Error fetching data:",G);const Q=document.getElementById("div_linegraph_data");Q&&(Q.innerText="Error fetching data"),P&&(P.style.display="block"),N&&(N.style.display="none")}},x=()=>{const P=document.getElementById("input_windowsize"),N=P?parseInt(P.value):i;o(N);const U=document.getElementById("btn_draw_sma"),L=document.getElementById("load_draw_sma"),V=document.getElementById("div_container_sma"),G=document.getElementById("div_linegraph_sma_title");U&&(U.style.display="none"),L&&(L.style.display="block"),V&&(V.style.display="block");const Q=C(t,N);r(Q),G&&(G.innerText=`Rune Price and Simple Moving Average (window: ${N})`),U&&(U.style.display="block"),L&&(L.style.display="none"),document.getElementById("div_container_train")&&(document.getElementById("div_container_train").style.display="block",document.getElementById("div_container_trainfirst").style.display="none"),S(Q)},S=P=>{const N=document.getElementById("div_container_trainingdata");N&&(N.style.display="block");const U=P.map(G=>G.set);let L="";for(let G=0;G<25;G++)L+=`<tr key=${G}><td width="20px">${G+1}</td><td>[${U[G].map(Q=>(Math.round(Q.price*1e4)/1e4).toString()).toString()}]</td><td>${P[G].avg}</td></tr>`;L=`<table class='striped'><thead><tr><th scope='col'>#</th><th scope='col'>Input (X)</th><th scope='col'>Label (Y)</th></thead><tbody>${L}</tbody></table>`;const V=document.getElementById("div_trainingdata");V&&(V.innerHTML=L)},C=(P,N)=>{let U=[];for(let L=0;L<=P.length-N;L++){let V=0,G=L+N;for(let Q=L;Q<G&&Q<=P.length;Q++)V+=P[Q].price/N;U.push({set:P.slice(L,L+N),avg:V})}return U},T=async()=>{try{const P=t.map(U=>({timestamp:U.timestamp,price_sats:U.price})),N=await E(P);s?k(N):y("Model not loaded")}catch(P){console.error("Error preprocessing data:",P),y("Error preprocessing data")}},E=async P=>{y("Preprocessing data..."),P.forEach(ne=>ne.timestamp=new Date(ne.timestamp)),P.sort((ne,ee)=>ne.timestamp-ee.timestamp);const N={};P.forEach(ne=>{const ee=new Date(ne.timestamp).setMinutes(0,0,0);N[ee]?(N[ee].High=Math.max(N[ee].High,ne.price_sats),N[ee].Low=Math.min(N[ee].Low,ne.price_sats),N[ee].Close=ne.price_sats,N[ee].Volume+=1):N[ee]={Open:ne.price_sats,High:ne.price_sats,Low:ne.price_sats,Close:ne.price_sats,Volume:1}});const U=Object.keys(N).map(ne=>({Hour:new Date(Number(ne)),...N[ne]}));for(let ne=1;ne<U.length;ne++)U[ne].Close||(U[ne].Close=U[ne-1].Close);const L=U.map(ne=>ne.Close),V=Math.max(...L),G=L.map(ne=>ne/V),Q=30,te=[];for(let ne=Q;ne<G.length;ne++){const ee=G.slice(ne-Q,ne).map(re=>[re]);te.push(ee)}return y("Data preprocessed"),Z7(te,[te.length,Q,1])},k=async P=>{y("Running predictions...");try{const U=await s.predict(P).array(),L=U.map((V,G)=>({timestamp:new Date(t[t.length-U.length+G].timestamp),prediction:V[0]}));d(L),y("Predictions complete")}catch(N){console.error("Error during prediction:",N),y("Error during prediction")}},A=async()=>{y("Training model...");const P=await E(t),{X:N,y:U}=O(P),L=Lxt();L.add(NQ({units:50,returnSequences:!0,inputShape:[N.shape[1],1]})),L.add(NQ({units:50})),L.add(twt({units:1})),L.compile({optimizer:"adam",loss:"meanSquaredError"}),await L.fit(N,U,{epochs:10,batchSize:32,validationSplit:.2,callbacks:{onEpochEnd:(V,G)=>{G&&G.loss!==void 0&&G.val_loss!==void 0&&(y(`Epoch ${V+1}: loss = ${G.loss.toFixed(4)}, val_loss = ${G.val_loss.toFixed(4)}`),v(Q=>[...Q,{epoch:V+1,loss:G.loss,val_loss:G.val_loss}]))}}}),await L.save("localstorage://my-model"),a(L),y("Model trained and saved")},O=P=>{const U=[],L=[];for(let V=30;V<P.length;V++)U.push(P.slice(V-30,V)),L.push(P[V]);return{X:Z7(U,[U.length,30,1]),y:XE(L,[L.length,1])}},D=()=>{};return I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:KP.container,children:[I.jsx("h1",{children:"Rune Price Prediction "}),I.jsxs("div",{children:[I.jsx("select",{onChange:P=>h(P.target.value),value:f,children:g.map(P=>I.jsx("option",{value:P.rune_name,children:P.rune_name},P.rune_name))}),I.jsx("input",{type:"text",id:"input_ticker",placeholder:"Enter Rune Name",value:f,onChange:P=>h(P.target.value)}),I.jsx("button",{id:"btn_fetch_data",onClick:b,children:"Fetch Data"}),I.jsx("div",{id:"load_fetch_data",className:KP.loadingIndicator,style:{display:"none"},children:"Loading..."})]}),t.length>0&&I.jsxs("div",{id:"div_container_linegraph",children:[I.jsxs("h3",{id:"div_linegraph_data_title",children:["Symbol: ",f," (last refreshed ",new Date().toISOString(),")"]}),I.jsx(As,{width:"100%",height:400,children:I.jsxs(bu,{data:t,children:[I.jsxs("defs",{children:[I.jsxs("linearGradient",{id:"colorPrice",x1:"0",y1:"0",x2:"0",y2:"1",children:[I.jsx("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),I.jsx("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})]}),I.jsxs("linearGradient",{id:"colorSMA",x1:"0",y1:"0",x2:"0",y2:"1",children:[I.jsx("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),I.jsx("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})]})]}),I.jsx(Ko,{dataKey:"timestamp"}),I.jsx(Yo,{}),I.jsx(dl,{strokeDasharray:"3 3"}),I.jsx(si,{}),I.jsx(Mr,{type:"monotone",dataKey:"price",stroke:"#8884d8",fillOpacity:1,fill:"url(#colorPrice)"}),I.jsx(Mr,{type:"monotone",dataKey:"sma",stroke:"#82ca9d",fillOpacity:1,fill:"url(#colorSMA)"})]})})]}),n.length>0&&I.jsxs("div",{id:"div_container_getsma",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"input_windowsize",children:"Window Size"}),I.jsx("input",{type:"number",id:"input_windowsize",placeholder:"Enter window size",defaultValue:i})]}),I.jsx("button",{id:"btn_draw_sma",onClick:x,children:"Display SMA"}),I.jsx("div",{id:"load_draw_sma",className:KP.loadingIndicator,style:{display:"none"},children:"Loading..."})]}),n.length>0&&I.jsxs("div",{id:"div_container_sma",children:[I.jsxs("h3",{id:"div_linegraph_sma_title",children:["Rune Price and Simple Moving Average (window: ",i,")"]}),I.jsx(As,{width:"100%",height:400,children:I.jsxs(bu,{data:n,children:[I.jsxs("defs",{children:[I.jsxs("linearGradient",{id:"colorPrice",x1:"0",y1:"0",x2:"0",y2:"1",children:[I.jsx("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),I.jsx("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})]}),I.jsxs("linearGradient",{id:"colorSMA",x1:"0",y1:"0",x2:"0",y2:"1",children:[I.jsx("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),I.jsx("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})]})]}),I.jsx(Ko,{dataKey:"timestamp"}),I.jsx(Yo,{}),I.jsx(dl,{strokeDasharray:"3 3"}),I.jsx(si,{}),I.jsx(Mr,{type:"monotone",dataKey:"price",stroke:"#8884d8",fillOpacity:1,fill:"url(#colorPrice)"}),I.jsx(Mr,{type:"monotone",dataKey:"avg",stroke:"#82ca9d",fillOpacity:1,fill:"url(#colorSMA)"})]})})]}),u.length>0&&I.jsxs("div",{id:"div_container_predictions",children:[I.jsx("h3",{id:"div_linegraph_predictions_title",children:"Predictions"}),I.jsx(As,{width:"100%",height:400,children:I.jsxs(bu,{data:u,children:[I.jsx("defs",{children:I.jsxs("linearGradient",{id:"colorPrediction",x1:"0",y1:"0",x2:"0",y2:"1",children:[I.jsx("stop",{offset:"5%",stopColor:"#ff7300",stopOpacity:.8}),I.jsx("stop",{offset:"95%",stopColor:"#ff7300",stopOpacity:0})]})}),I.jsx(Ko,{dataKey:"timestamp"}),I.jsx(Yo,{}),I.jsx(dl,{strokeDasharray:"3 3"}),I.jsx(si,{}),I.jsx(Mr,{type:"monotone",dataKey:"prediction",stroke:"#ff7300",fillOpacity:1,fill:"url(#colorPrediction)"})]})})]}),m.length>0&&I.jsxs("div",{id:"div_container_training_history",children:[I.jsx("h3",{id:"div_linegraph_training_history_title",children:"Training History"}),I.jsx(As,{width:"100%",height:400,children:I.jsxs(bu,{data:m,children:[I.jsxs("defs",{children:[I.jsxs("linearGradient",{id:"colorLoss",x1:"0",y1:"0",x2:"0",y2:"1",children:[I.jsx("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),I.jsx("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})]}),I.jsxs("linearGradient",{id:"colorValLoss",x1:"0",y1:"0",x2:"0",y2:"1",children:[I.jsx("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),I.jsx("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})]})]}),I.jsx(Ko,{dataKey:"epoch"}),I.jsx(Yo,{}),I.jsx(dl,{strokeDasharray:"3 3"}),I.jsx(si,{}),I.jsx(Mr,{type:"monotone",dataKey:"loss",stroke:"#8884d8",fillOpacity:1,fill:"url(#colorLoss)",name:"Loss"}),I.jsx(Mr,{type:"monotone",dataKey:"val_loss",stroke:"#82ca9d",fillOpacity:1,fill:"url(#colorValLoss)",name:"Validation Loss"})]})})]}),I.jsx("button",{onClick:T,children:"Fetch and Predict"}),I.jsx("button",{onClick:A,children:"Train Model"}),I.jsx("div",{id:"status",children:l}),I.jsx("div",{id:"output",children:u.map((P,N)=>I.jsx("div",{children:P.prediction},N))})]}),I.jsx("div",{className:"card",id:"div_train",children:I.jsxs("div",{className:"card-content",children:[I.jsx("span",{className:"card-title",children:"Train Neural Network"}),I.jsxs("p",{children:["Now that you have the training data, it is time to create a model for time series prediction, to achieve this we will use ",I.jsx("a",{href:"https://js.tensorflow.org/",target:"_blank",children:"TensorFlow.js"})," framework."]}),I.jsxs("p",{children:[I.jsx("a",{href:"https://js.tensorflow.org/api/latest/#sequential",target:"_blank",children:"Sequential model"})," is selected which simply connects each layer and pass the data from input to the output during the training process. In order for the model to learn time series data which are sequential, ",I.jsx("a",{href:"https://js.tensorflow.org/api/latest/#layers.rnn",target:"_blank",children:"recurrent neural network (RNN) layer"})," layer is created and a number of ",I.jsx("a",{href:"https://js.tensorflow.org/api/latest/#layers.lstmCell",target:"_blank",children:"LSTM cells"})," are added to the RNN."]}),I.jsxs("p",{children:["The model will be trained using ",I.jsx("a",{href:"https://js.tensorflow.org/api/latest/#train.adam",target:"_blank",children:"Adam"})," (",I.jsx("a",{href:"https://arxiv.org/abs/1412.6980",target:"_blank",children:"read more"}),"), a popular optimisation algorithm for machine learning. ",I.jsx("a",{href:"https://js.tensorflow.org/api/latest/#losses.meanSquaredError",target:"_blank",children:"Root-means-squared error"})," which determine the difference between predicted values and the actual values, so model is able to learn by minimising the error during the training process."]}),I.jsxs("p",{children:["These are the hyperparameters (parameters used in the training process) available for tweaking:",I.jsx("li",{children:"Training Dataset Size (%): the amount of data used for training, and remaining data will be used for prediction"}),I.jsxs("li",{children:["Epochs: number of times the dataset is used to train the model (",I.jsx("a",{href:"https://machinelearningmastery.com/difference-between-a-batch-and-an-epoch/",target:"_blank",children:"learn more"}),")"]}),I.jsxs("li",{children:["Learning Rate: amount of change in the weights during training in each step (",I.jsx("a",{href:"https://machinelearningmastery.com/learning-rate-for-deep-learning-neural-networks/",target:"_blank",children:"learn more"}),")"]}),I.jsxs("li",{children:["Hidden LSTM Layers: to increase the model complexity to learn in higher dimensional space (",I.jsx("a",{href:"https://machinelearningmastery.com/how-to-configure-the-number-of-layers-and-nodes-in-a-neural-network/",target:"_blank",children:"learn more"}),")"]})]}),I.jsx("span",{className:"card-title",children:"Try It"}),I.jsxs("p",{children:["You may tweak the hyperparameters and then hit the ",I.jsx("i",{children:"Begin Training Model"})," button to train the model."]}),I.jsx("div",{className:"row",id:"div_container_trainfirst",children:I.jsx("div",{className:"col s12",children:I.jsxs("p",{children:["Need training data? Explore the previous section to ",I.jsx("a",{href:"#div_sma",children:"prepare training data"}),"."]})})}),I.jsxs("div",{id:"div_container_train",style:{display:"none"},children:[I.jsxs("div",{className:"row",children:[I.jsx("div",{className:"col s12",children:I.jsxs("p",{children:["You may tweak the hyperparameters and then hit the ",I.jsx("i",{children:"Begin Training Model"})," button to train the model."]})}),I.jsx("div",{className:"col s6",children:I.jsxs("div",{className:"input-field col s12",children:[I.jsx("label",{htmlFor:"input_trainingsize",children:"Training Dataset Size (%)"}),I.jsx("input",{type:"number",id:"input_trainingsize",placeholder:"a number between (1-99)",value:"98"})]})}),I.jsx("div",{className:"col s6",children:I.jsxs("div",{className:"input-field col s12",children:[I.jsx("label",{htmlFor:"input_epochs",children:"Epochs"}),I.jsx("input",{type:"number",id:"input_epochs",placeholder:"a number",value:"10"})]})})]}),I.jsxs("div",{className:"row",children:[I.jsx("div",{className:"col s6",children:I.jsxs("div",{className:"input-field col s12",children:[I.jsx("label",{htmlFor:"input_learningrate",children:"Learning Rate"}),I.jsx("input",{type:"number",id:"input_learningrate",placeholder:"a decimal",value:"0.01"}),I.jsx("small",{className:"form-text text-muted",children:"Typically range between 0.01 and 0.1"})]})}),I.jsx("div",{className:"col s6",children:I.jsxs("div",{className:"input-field col s12",children:[I.jsx("label",{htmlFor:"input_hiddenlayers",children:"Hidden LSTM Layers"}),I.jsx("input",{type:"number",id:"input_hiddenlayers",placeholder:"a number'",value:"4"}),I.jsx("small",{className:"form-text text-muted",children:"Number of LSTM layers"})]})}),I.jsx("div",{className:"col s12",children:I.jsx("button",{className:"waves-effect waves-light btn",id:"btn_draw_trainmodel",onClick:"onClickTrainModel()",children:"Begin Training Model"})})]})]}),I.jsx("div",{className:"row",id:"div_container_training",children:I.jsx("div",{className:"col s12",children:I.jsx("div",{className:"card z-depth-2",children:I.jsxs("div",{className:"card-content",children:[I.jsx("span",{className:"card-title grey-text text-darken-4",children:"Training Model"}),I.jsx("h6",{children:"Progress"}),I.jsx("div",{className:"progress",children:I.jsx("div",{className:"progress-bar progress-bar-striped progress-bar-animated",id:"div_training_progressbar",role:"progressbar","aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100",style:{width:"100%"}})}),I.jsx("div",{className:"progress",children:I.jsx("div",{className:"determinate",id:"div_training_progressbar",style:{width:"100%"}})}),I.jsx("hr",{}),I.jsx("h6",{children:"Loss"}),I.jsx("div",{id:"div_linegraph_trainloss",style:{width:"100%",height:"250px"}}),I.jsx("hr",{}),I.jsx("h6",{children:"Logs"}),I.jsx("div",{id:"div_traininglog",style:{overflowX:"scroll",overflowY:"scroll",height:"250px"}})]})})})})]})}),I.jsx("div",{className:"card",children:I.jsxs("div",{className:"card-content",style:{backgroundColor:"black"},children:[I.jsx("span",{className:"card-title",children:"Validation"}),I.jsx("p",{children:"Now that you have trained your model, it is time to use the model.predict function from TFJS to predicting future values. We have split the data into 2 sets, a subset of the data is training and the rest is the validation set. The training set has been used for training the model, thus will be using the validation set to validate the model. Since the model has not seen the data in the validation set before, it will be good if the model is able to predict values that are close to the exact values."}),I.jsx("span",{className:"card-title",children:"Try It"}),I.jsx("p",{children:"So let us use the remaining data for prediction which allow us to see how closely our predicted values are compared to the actual values."}),I.jsx("p",{children:"But if the model did not predict values that map closely to its true values, check the training loss graph. Generally, this model should converge with the loss to be less than 1. You can increase the number of epochs, or tweak the other learning hyperparameters."}),I.jsx("div",{className:"row",id:"div_container_validatefirst",children:I.jsx("div",{className:"col s12"})}),I.jsxs("div",{className:"row",id:"div_container_validate",style:{backgroundColor:"black"},children:[I.jsx("div",{className:"col s12",children:I.jsxs("p",{children:["Hit the ",I.jsx("i",{children:"Validate Model"})," button to see how this model performs. Whohoo!"]})}),I.jsxs("div",{className:"col s6",children:[I.jsx("button",{className:"waves-effect waves-light btn",id:"btn_validation",onClick:D,style:{backgroundColor:"black",color:"white"},children:"Validate Model"}),I.jsx("div",{className:"spinner-border",id:"load_validating",style:{display:"none"}})]})]}),I.jsx("div",{className:"row",id:"div_container_validating",style:{display:"none"},children:I.jsx("div",{className:"col s12",children:I.jsx("div",{className:"card z-depth-2",children:I.jsxs("div",{className:"card-content",children:[I.jsx("span",{className:"card-title grey-text text-darken-4",id:"div_predict_title",children:"Compare True values to Predicted values"}),I.jsx("div",{id:"div_validation_graph"})]})})})})]})})]})},to=qn(om)(({theme:t})=>({backgroundColor:t.palette.mode==="dark"?"#1A2027":"#fff",...t.typography.body2,padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary})),CLt=()=>(R.useEffect(()=>{const t=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",t)},[]),I.jsx(I.Fragment,{children:I.jsx(Yy,{sx:{flexGrow:1,padding:{xs:2,sm:4}},children:I.jsxs($t,{container:!0,spacing:4,children:[I.jsx(oO,{}),I.jsx($t,{xs:12,children:I.jsx(to,{sx:{backgroundColor:"#86797940",color:"white"},children:I.jsx(SLt,{})})}),I.jsx($t,{xs:12,children:I.jsx(to,{sx:{backgroundColor:"#1d1d1d"}})}),I.jsx($t,{xs:2,children:I.jsx(to,{sx:{backgroundColor:"black"}})}),I.jsx($t,{xs:8,children:I.jsx(to,{style:{color:"white"},sx:{backgroundColor:"black"}})}),I.jsx($t,{xs:2,children:I.jsx(to,{sx:{backgroundColor:"black"}})}),I.jsx($t,{xs:8,children:I.jsx(to,{sx:{backgroundColor:"black"}})}),I.jsx($t,{xs:2,children:I.jsx(to,{sx:{backgroundColor:"black"}})}),I.jsx($t,{xs:12,children:I.jsx(to,{sx:{backgroundColor:"black"}})}),I.jsx($t,{xs:2,children:I.jsx(to,{sx:{backgroundColor:"black"}})}),I.jsx($t,{xs:8,children:I.jsx(to,{sx:{backgroundColor:"black"}})}),I.jsx($t,{xs:2,children:I.jsx(to,{sx:{backgroundColor:"black"}})}),I.jsx($t,{xs:2,children:I.jsx(to,{sx:{backgroundColor:"black"}})}),I.jsx($t,{xs:8,children:I.jsx(to,{style:{color:"white"},sx:{backgroundColor:"#1d1d1d"},children:I.jsx("h1",{children:"Training LSTM Module"})})}),I.jsx($t,{xs:2,children:I.jsx(to,{sx:{backgroundColor:"black"}})}),I.jsx($t,{xs:2,children:I.jsx(to,{sx:{backgroundColor:"black"}})}),I.jsx($t,{xs:8,children:I.jsxs(to,{style:{color:"white"},sx:{backgroundColor:"#1d1d1d"},children:[I.jsx("h1",{children:"Training LSTM Module"}),I.jsx(Uut,{})]})})]})})})),ELt=()=>{const[t,e]=R.useState(null),{loading:n,userInfo:r,error:i,success:o}=vM(d=>d.auth),s=yM(),{register:a,handleSubmit:l}=Vae(),c=wM();R.useEffect(()=>{r&&c("/forecastpage"),o&&c("/login")},[c,r,o]);const u=d=>{if(d.password!==d.confirmPassword){e("Password mismatch");return}d.email=d.email.toLowerCase(),s(ep(d))};return I.jsx(I.Fragment,{children:I.jsxs("form",{onSubmit:l(u),children:[i&&I.jsx(AF,{children:i}),t&&I.jsx(AF,{children:t}),I.jsxs("div",{className:"form-group",children:[I.jsx("label",{htmlFor:"firstName",children:"First Name"}),I.jsx("input",{type:"text",className:"form-input",...a("firstName"),required:!0})]}),I.jsxs("div",{className:"form-group",children:[I.jsx("label",{htmlFor:"email",children:"Email"}),I.jsx("input",{type:"email",className:"form-input",...a("email"),required:!0})]}),I.jsxs("div",{className:"form-group",children:[I.jsx("label",{htmlFor:"password",children:"Password"}),I.jsx("input",{type:"password",className:"form-input",...a("password"),required:!0})]}),I.jsxs("div",{className:"form-group",children:[I.jsx("label",{htmlFor:"email",children:"Confirm Password"}),I.jsx("input",{type:"password",className:"form-input",...a("confirmPassword"),required:!0})]}),I.jsx("button",{type:"submit",className:"button",disabled:n,children:n?I.jsx(Hae,{}):"Register"})]})})},TLt=void 0,z3=FU({reducerPath:"userApi",baseQuery:PU({baseUrl:TLt,prepareHeaders:(t,{getState:e})=>{const n=e().auth.userToken;if(n)return t.set("authorization",`Bearer ${n}`),t}}),endpoints:t=>({register:t.mutation({query:e=>({url:"api/user/register",method:"POST",body:e})}),login:t.mutation({query:e=>({url:"api/user/login",method:"POST",body:e})}),withdraw:t.mutation({query:e=>({url:"api/user/withdraw",method:"POST",body:e})}),getAllUsers:t.query({query:()=>({url:"api/users",method:"GET"})}),getUserBalance:t.query({query:e=>({url:`api/user/balance/${e}`,method:"GET"})}),getUserById:t.query({query:e=>({url:`api/user/${e}`,method:"GET"})}),deposit:t.mutation({query:e=>({url:"api/user/deposit",method:"POST",body:e})})})});z3.reducer;const kLt=localStorage.getItem("userToken")?localStorage.getItem("userToken"):null,ALt={loading:!1,userInfo:null,userToken:kLt,error:null,success:!1},Cge=ou({name:"auth",initialState:ALt,reducers:{logout:t=>{localStorage.removeItem("userToken"),t.loading=!1,t.userInfo=null,t.userToken=null,t.error=null,t.balance=0},setCredentials:(t,{payload:e})=>{t.userInfo=e}},extraReducers:{[Jh.pending]:t=>{t.loading=!0,t.error=null},[Jh.fulfilled]:(t,{payload:e})=>{t.loading=!1,t.userInfo=e,t.userToken=e.userToken,t.balance=e.balance},[Jh.rejected]:(t,{payload:e})=>{t.loading=!1,t.error=e},[ep.pending]:t=>{t.loading=!0,t.error=null},[ep.fulfilled]:(t,{payload:e})=>{t.loading=!1,t.success=!0},[ep.rejected]:(t,{payload:e})=>{t.loading=!1,t.error=e}}}),{logout:MLt,setCredentials:ILt}=Cge.actions;Cge.reducer;var At="cs",Ege=["available","unavailable","away","dnd","invisible","eager"],Tge=["xs","sm","md","lg","fluid"];function Ww(t){"@babel/helpers - typeof";return Ww=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ww(t)}var OLt=["status","size","className","name","selected","children"];function j3(){return j3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j3.apply(this,arguments)}function yZ(t,e,n){return e=RLt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RLt(t){var e=DLt(t,"string");return Ww(e)=="symbol"?e:String(e)}function DLt(t,e){if(Ww(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ww(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function PLt(t,e){if(t==null)return{};var n=NLt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function NLt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var kge=function(e){var n=e.status,r=e.size,i=r===void 0?"md":r,o=e.className,s=e.name,a=e.selected,l=e.children,c=PLt(e,OLt),u="".concat(At,"-status"),d=B.createElement("div",{className:"".concat(u,"__bullet")}),f=s||l;return B.createElement("div",j3({},c,{"aria-selected":a===!0?"":null,className:yt(u,"".concat(u,"--").concat(i),"".concat(u,"--").concat(n),yZ({},"".concat(u,"--selected"),a),yZ({},"".concat(u,"--named"),f),o)}),d,f&&B.createElement("div",{className:"".concat(u,"__name")},s||l))};function Vw(t){"@babel/helpers - typeof";return Vw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vw(t)}var $Lt=["name","src","size","status","className","active","children"];function W3(){return W3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},W3.apply(this,arguments)}function LLt(t,e,n){return e=FLt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FLt(t){var e=BLt(t,"string");return Vw(e)=="symbol"?e:String(e)}function BLt(t,e){if(Vw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Vw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ULt(t,e){if(t==null)return{};var n=zLt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function zLt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function jLt(t,e){var n=t.name,r=n===void 0?"":n,i=t.src,o=i===void 0?"":i,s=t.size,a=s===void 0?"md":s,l=t.status,c=t.className,u=t.active,d=u===void 0?!1:u,f=t.children,h=ULt(t,$Lt),g="".concat(At,"-avatar"),p=typeof a<"u"?" ".concat(g,"--").concat(a):"",m=R.useRef();return R.useImperativeHandle(e,function(){return{focus:function(){return m.current.focus()}}}),B.createElement("div",W3({ref:m},h,{className:yt("".concat(g).concat(p),LLt({},"".concat(g,"--active"),d),c)}),f||B.createElement(B.Fragment,null,B.createElement("img",{src:o,alt:r}),typeof l=="string"&&B.createElement(kge,{status:l,size:a})," "))}var hS=R.forwardRef(jLt);hS.displayName="Avatar";hS.propTypes={children:De.node,name:De.string,src:De.string,size:De.oneOf(Tge),status:De.oneOf(Ege),active:De.bool,className:De.string};function bZ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bZ(Object(n),!0).forEach(function(r){WLt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bZ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WLt(t,e,n){return e=VLt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VLt(t){var e=HLt(t,"string");return kf(e)=="symbol"?e:String(e)}function HLt(t,e){if(kf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(kf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kf(t){"@babel/helpers - typeof";return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kf(t)}var YE=function(){},GLt=function(e){return e==null||Array.isArray(e)&&e.length===0},pS=function(e,n){var r=[],i=n.map(function(o){return o.displayName||o.name});return B.Children.toArray(e).forEach(function(o){var s=n.indexOf(o.type);if(s!==-1)r[s]=o;else{var a,l,c,u=(a=o==null||(l=o.props)===null||l===void 0?void 0:l.as)!==null&&a!==void 0?a:o==null||(c=o.props)===null||c===void 0?void 0:c.is,d=kf(u);if(d==="function"){var f=n.indexOf(u);f!==-1&&(r[f]=B.cloneElement(o,nE(nE({},o.props),{},{as:null})))}else if(d==="object"){var h=u.name||u.displayName,g=i.indexOf(h);g!==-1&&(r[g]=B.cloneElement(o,nE(nE({},o.props),{},{as:null})))}else if(d==="string"){var p=i.indexOf(u);p!==-1&&(r[p]=o)}}}),r},Age=function(e){if(typeof e=="string")return e;if("type"in e){var n=kf(e.type);if(n==="function"||n==="object"){if("displayName"in e.type)return e.type.displayName;if("name"in e.type)return e.type.name}else if(n==="string")return e.type;return"undefined"}return"undefined"},Mge=function(e){return function(n,r,i){var o=e.map(function(u){return u.name||u.displayName}),s=B.Children.toArray(n[r]).find(function(u){if(typeof u=="string"&&u.trim().length===0)return!1;if(e.indexOf(u.type)===-1){var d,f,h=(u==null||(d=u.props)===null||d===void 0?void 0:d.as)||(u==null||(f=u.props)===null||f===void 0?void 0:f.is),g=kf(h);if(g==="function")return e.indexOf(h)===-1;if(g==="object"){var p=h.name||h.displayName;return o.indexOf(p)===-1}else return g==="string"?o.indexOf(h)===-1:!0}});if(typeof s<"u"){var a=Age(s),l=e.map(function(u){return u.name||u.displayName}).join(", "),c='"'.concat(a,'" is not a valid child for ').concat(i,". Allowed types: ").concat(l);return new Error(c)}}},qLt=["children","size","className","max","activeIndex","hoverToFront"];function V3(){return V3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},V3.apply(this,arguments)}function XLt(t,e){if(t==null)return{};var n=KLt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function KLt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Ige=function(e){var n=e.children,r=e.size,i=r===void 0?"md":r,o=e.className,s=e.max,a=e.activeIndex,l=e.hoverToFront,c=XLt(e,qLt),u="".concat(At,"-avatar-group"),d=typeof s=="number"&&B.Children.count(n)>s?B.Children.toArray(n).reverse().slice(0,s):B.Children.toArray(n).reverse(),f=typeof a=="number"?d.length-a-1:void 0;return B.createElement("div",V3({},c,{className:yt(u,"".concat(u,"--").concat(i),o)}),d.map(function(h,g){var p=typeof f=="number"?{active:f===g}:{};return l===!0&&(p.className=yt("".concat(At,"-avatar--active-on-hover"),h.props.className)),B.cloneElement(h,p)}))};Ige.displayName="AvatarGroup";var YLt=["children","className","icon","border","labelPosition"];function H3(){return H3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},H3.apply(this,arguments)}function QLt(t,e){if(t==null)return{};var n=ZLt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ZLt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var $H=function(e){var n=e.children,r=n===void 0?void 0:n,i=e.className,o=i===void 0?"":i,s=e.icon,a=s===void 0?void 0:s,l=e.border,c=l===void 0?!1:l,u=e.labelPosition,d=u===void 0?void 0:u,f=QLt(e,YLt),h="".concat(At,"-button"),g=typeof d<"u"?d:"right",p=B.Children.count(r)>0?"".concat(h,"--").concat(g):"",m=c===!0?"".concat(h,"--border"):"";return B.createElement("button",H3({},f,{className:yt(h,p,m,o)}),g==="left"&&r,a,g==="right"&&r)};/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */function ox(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ox=function(e){return typeof e}:ox=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ox(t)}function JLt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eFt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tFt(t,e,n){return e&&eFt(t.prototype,e),t}function nFt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){nFt(t,i,n[i])})}return t}function Oge(t,e){return rFt(t)||iFt(t,e)||oFt()}function rFt(t){if(Array.isArray(t))return t}function iFt(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s=t[Symbol.iterator](),a;!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw o}}return n}function oFt(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var xZ=function(){},LH={},Rge={},sFt=null,Dge={mark:xZ,measure:xZ};try{typeof window<"u"&&(LH=window),typeof document<"u"&&(Rge=document),typeof MutationObserver<"u"&&(sFt=MutationObserver),typeof performance<"u"&&(Dge=performance)}catch{}var aFt=LH.navigator||{},wZ=aFt.userAgent,_Z=wZ===void 0?"":wZ,X2=LH,Ro=Rge,rE=Dge;X2.document;var FH=!!Ro.documentElement&&!!Ro.head&&typeof Ro.addEventListener=="function"&&typeof Ro.createElement=="function";~_Z.indexOf("MSIE")||~_Z.indexOf("Trident/");var qu="___FONT_AWESOME___",Pge="fa",Nge="svg-inline--fa",lFt="data-fa-i2svg";(function(){try{return!0}catch{return!1}})();var YP={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},$ge=X2.FontAwesomeConfig||{};function cFt(t){var e=Ro.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function uFt(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}if(Ro&&typeof Ro.querySelector=="function"){var dFt=[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];dFt.forEach(function(t){var e=Oge(t,2),n=e[0],r=e[1],i=uFt(cFt(n));i!=null&&($ge[r]=i)})}var fFt={familyPrefix:Pge,replacementClass:Nge,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},G3=yn({},fFt,$ge);G3.autoReplaceSvg||(G3.observeMutations=!1);var Bs=yn({},G3);X2.FontAwesomeConfig=Bs;var Xu=X2||{};Xu[qu]||(Xu[qu]={});Xu[qu].styles||(Xu[qu].styles={});Xu[qu].hooks||(Xu[qu].hooks={});Xu[qu].shims||(Xu[qu].shims=[]);var cc=Xu[qu],hFt=[],pFt=function t(){Ro.removeEventListener("DOMContentLoaded",t),q3=1,hFt.map(function(e){return e()})},q3=!1;FH&&(q3=(Ro.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Ro.readyState),q3||Ro.addEventListener("DOMContentLoaded",pFt));var BH="pending",Lge="settled",jA="fulfilled",WA="rejected",mFt=function(){},Fge=typeof global<"u"&&typeof global.process<"u"&&typeof global.process.emit=="function",gFt=typeof setImmediate>"u"?setTimeout:setImmediate,kb=[],X3;function vFt(){for(var t=0;t<kb.length;t++)kb[t][0](kb[t][1]);kb=[],X3=!1}function VA(t,e){kb.push([t,e]),X3||(X3=!0,gFt(vFt,0))}function yFt(t,e){function n(i){UH(e,i)}function r(i){Hw(e,i)}try{t(n,r)}catch(i){r(i)}}function Bge(t){var e=t.owner,n=e._state,r=e._data,i=t[n],o=t.then;if(typeof i=="function"){n=jA;try{r=i(r)}catch(s){Hw(o,s)}}Uge(o,r)||(n===jA&&UH(o,r),n===WA&&Hw(o,r))}function Uge(t,e){var n;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&(typeof e=="function"||ox(e)==="object")){var r=e.then;if(typeof r=="function")return r.call(e,function(i){n||(n=!0,e===i?zge(t,i):UH(t,i))},function(i){n||(n=!0,Hw(t,i))}),!0}}catch(i){return n||Hw(t,i),!0}return!1}function UH(t,e){(t===e||!Uge(t,e))&&zge(t,e)}function zge(t,e){t._state===BH&&(t._state=Lge,t._data=e,VA(bFt,t))}function Hw(t,e){t._state===BH&&(t._state=Lge,t._data=e,VA(xFt,t))}function jge(t){t._then=t._then.forEach(Bge)}function bFt(t){t._state=jA,jge(t)}function xFt(t){t._state=WA,jge(t),!t._handled&&Fge&&global.process.emit("unhandledRejection",t._data,t)}function wFt(t){global.process.emit("rejectionHandled",t)}function Aa(t){if(typeof t!="function")throw new TypeError("Promise resolver "+t+" is not a function");if(!(this instanceof Aa))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],yFt(t,this)}Aa.prototype={constructor:Aa,_state:BH,_then:null,_data:void 0,_handled:!1,then:function(e,n){var r={owner:this,then:new this.constructor(mFt),fulfilled:e,rejected:n};return(n||e)&&!this._handled&&(this._handled=!0,this._state===WA&&Fge&&VA(wFt,this)),this._state===jA||this._state===WA?VA(Bge,r):this._then.push(r),r.then},catch:function(e){return this.then(null,e)}};Aa.all=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.all().");return new Aa(function(e,n){var r=[],i=0;function o(l){return i++,function(c){r[l]=c,--i||e(r)}}for(var s=0,a;s<t.length;s++)a=t[s],a&&typeof a.then=="function"?a.then(o(s),n):r[s]=a;i||e(r)})};Aa.race=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.race().");return new Aa(function(e,n){for(var r=0,i;r<t.length;r++)i=t[r],i&&typeof i.then=="function"?i.then(e,n):e(i)})};Aa.resolve=function(t){return t&&ox(t)==="object"&&t.constructor===Aa?t:new Aa(function(e){e(t)})};Aa.reject=function(t){return new Aa(function(e,n){n(t)})};var Fg={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function _Ft(t){if(!(!t||!FH)){var e=Ro.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var n=Ro.head.childNodes,r=null,i=n.length-1;i>-1;i--){var o=n[i],s=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(s)>-1&&(r=o)}return Ro.head.insertBefore(e,r),t}}var SFt="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function HA(){for(var t=12,e="";t-- >0;)e+=SFt[Math.random()*62|0];return e}function Wge(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function CFt(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,'="').concat(Wge(t[n]),'" ')},"").trim()}function Vge(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,": ").concat(t[n],";")},"")}function Hge(t){return t.size!==Fg.size||t.x!==Fg.x||t.y!==Fg.y||t.rotate!==Fg.rotate||t.flipX||t.flipY}function Gge(t){var e=t.transform,n=t.containerWidth,r=t.iconWidth,i={transform:"translate(".concat(n/2," 256)")},o="translate(".concat(e.x*32,", ").concat(e.y*32,") "),s="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(o," ").concat(s," ").concat(a)},c={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:l,path:c}}var QP={x:0,y:0,width:"100%",height:"100%"};function SZ(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function EFt(t){return t.tag==="g"?t.children:[t]}function TFt(t){var e=t.children,n=t.attributes,r=t.main,i=t.mask,o=t.maskId,s=t.transform,a=r.width,l=r.icon,c=i.width,u=i.icon,d=Gge({transform:s,containerWidth:c,iconWidth:a}),f={tag:"rect",attributes:yn({},QP,{fill:"white"})},h=l.children?{children:l.children.map(SZ)}:{},g={tag:"g",attributes:yn({},d.inner),children:[SZ(yn({tag:l.tag,attributes:yn({},l.attributes,d.path)},h))]},p={tag:"g",attributes:yn({},d.outer),children:[g]},m="mask-".concat(o||HA()),v="clip-".concat(o||HA()),_={tag:"mask",attributes:yn({},QP,{id:m,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[f,p]},w={tag:"defs",children:[{tag:"clipPath",attributes:{id:v},children:EFt(u)},_]};return e.push(w,{tag:"rect",attributes:yn({fill:"currentColor","clip-path":"url(#".concat(v,")"),mask:"url(#".concat(m,")")},QP)}),{children:e,attributes:n}}function kFt(t){var e=t.children,n=t.attributes,r=t.main,i=t.transform,o=t.styles,s=Vge(o);if(s.length>0&&(n.style=s),Hge(i)){var a=Gge({transform:i,containerWidth:r.width,iconWidth:r.width});e.push({tag:"g",attributes:yn({},a.outer),children:[{tag:"g",attributes:yn({},a.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:yn({},r.icon.attributes,a.path)}]}]})}else e.push(r.icon);return{children:e,attributes:n}}function AFt(t){var e=t.children,n=t.main,r=t.mask,i=t.attributes,o=t.styles,s=t.transform;if(Hge(s)&&n.found&&!r.found){var a=n.width,l=n.height,c={x:a/l/2,y:.5};i.style=Vge(yn({},o,{"transform-origin":"".concat(c.x+s.x/16,"em ").concat(c.y+s.y/16,"em")}))}return[{tag:"svg",attributes:i,children:e}]}function MFt(t){var e=t.prefix,n=t.iconName,r=t.children,i=t.attributes,o=t.symbol,s=o===!0?"".concat(e,"-").concat(Bs.familyPrefix,"-").concat(n):o;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:yn({},i,{id:s}),children:r}]}]}function IFt(t){var e=t.icons,n=e.main,r=e.mask,i=t.prefix,o=t.iconName,s=t.transform,a=t.symbol,l=t.title,c=t.maskId,u=t.titleId,d=t.extra,f=t.watchable,h=f===void 0?!1:f,g=r.found?r:n,p=g.width,m=g.height,v=i==="fak",_=v?"":"fa-w-".concat(Math.ceil(p/m*16)),w=[Bs.replacementClass,o?"".concat(Bs.familyPrefix,"-").concat(o):"",_].filter(function(E){return d.classes.indexOf(E)===-1}).filter(function(E){return E!==""||!!E}).concat(d.classes).join(" "),y={children:[],attributes:yn({},d.attributes,{"data-prefix":i,"data-icon":o,class:w,role:d.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(p," ").concat(m)})},b=v&&!~d.classes.indexOf("fa-fw")?{width:"".concat(p/m*16*.0625,"em")}:{};h&&(y.attributes[lFt]=""),l&&y.children.push({tag:"title",attributes:{id:y.attributes["aria-labelledby"]||"title-".concat(u||HA())},children:[l]});var x=yn({},y,{prefix:i,iconName:o,main:n,mask:r,maskId:c,transform:s,symbol:a,styles:yn({},b,d.styles)}),S=r.found&&n.found?TFt(x):kFt(x),C=S.children,T=S.attributes;return x.children=C,x.attributes=T,a?MFt(x):AFt(x)}var CZ=function(){};Bs.measurePerformance&&rE&&rE.mark&&rE.measure;var ZP=function(e,n,r,i){var o=Object.keys(e),s=o.length,a=n,l,c,u;for(r===void 0?(l=1,u=e[o[0]]):(l=0,u=r);l<s;l++)c=o[l],u=a(u,e[c],c,e);return u};function qge(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.skipHooks,i=r===void 0?!1:r,o=Object.keys(e).reduce(function(s,a){var l=e[a],c=!!l.icon;return c?s[l.iconName]=l.icon:s[a]=l,s},{});typeof cc.hooks.addPack=="function"&&!i?cc.hooks.addPack(t,o):cc.styles[t]=yn({},cc.styles[t]||{},o),t==="fas"&&qge("fa",e)}var EZ=cc.styles,OFt=cc.shims,Xge=function(){var e=function(i){return ZP(EZ,function(o,s,a){return o[a]=ZP(s,i,{}),o},{})};e(function(r,i,o){return i[3]&&(r[i[3]]=o),r}),e(function(r,i,o){var s=i[2];return r[o]=o,s.forEach(function(a){r[a]=o}),r});var n="far"in EZ;ZP(OFt,function(r,i){var o=i[0],s=i[1],a=i[2];return s==="far"&&!n&&(s="fas"),r[o]={prefix:s,iconName:a},r},{})};Xge();cc.styles;function TZ(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}function Kge(t){var e=t.tag,n=t.attributes,r=n===void 0?{}:n,i=t.children,o=i===void 0?[]:i;return typeof t=="string"?Wge(t):"<".concat(e," ").concat(CFt(r),">").concat(o.map(Kge).join(""),"</").concat(e,">")}var RFt=function(e){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e?e.toLowerCase().split(" ").reduce(function(r,i){var o=i.toLowerCase().split("-"),s=o[0],a=o.slice(1).join("-");if(s&&a==="h")return r.flipX=!0,r;if(s&&a==="v")return r.flipY=!0,r;if(a=parseFloat(a),isNaN(a))return r;switch(s){case"grow":r.size=r.size+a;break;case"shrink":r.size=r.size-a;break;case"left":r.x=r.x-a;break;case"right":r.x=r.x+a;break;case"up":r.y=r.y-a;break;case"down":r.y=r.y+a;break;case"rotate":r.rotate=r.rotate+a;break}return r},n):n};function K3(t){this.name="MissingIcon",this.message=t||"Icon unavailable",this.stack=new Error().stack}K3.prototype=Object.create(Error.prototype);K3.prototype.constructor=K3;var K2={fill:"currentColor"},Yge={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};yn({},K2,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"});var zH=yn({},Yge,{attributeName:"opacity"});yn({},K2,{cx:"256",cy:"364",r:"28"}),yn({},Yge,{attributeName:"r",values:"28;14;28;28;14;28;"}),yn({},zH,{values:"1;0;1;1;0;1;"});yn({},K2,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),yn({},zH,{values:"1;0;0;0;0;1;"});yn({},K2,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),yn({},zH,{values:"0;0;1;1;0;0;"});cc.styles;function kZ(t){var e=t[0],n=t[1],r=t.slice(4),i=Oge(r,1),o=i[0],s=null;return Array.isArray(o)?s={tag:"g",attributes:{class:"".concat(Bs.familyPrefix,"-").concat(YP.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Bs.familyPrefix,"-").concat(YP.SECONDARY),fill:"currentColor",d:o[0]}},{tag:"path",attributes:{class:"".concat(Bs.familyPrefix,"-").concat(YP.PRIMARY),fill:"currentColor",d:o[1]}}]}:s={tag:"path",attributes:{fill:"currentColor",d:o}},{found:!0,width:e,height:n,icon:s}}cc.styles;var DFt=`svg:not(:root).svg-inline--fa {
  overflow: visible;
}

.svg-inline--fa {
  display: inline-block;
  font-size: inherit;
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.225em;
}
.svg-inline--fa.fa-w-1 {
  width: 0.0625em;
}
.svg-inline--fa.fa-w-2 {
  width: 0.125em;
}
.svg-inline--fa.fa-w-3 {
  width: 0.1875em;
}
.svg-inline--fa.fa-w-4 {
  width: 0.25em;
}
.svg-inline--fa.fa-w-5 {
  width: 0.3125em;
}
.svg-inline--fa.fa-w-6 {
  width: 0.375em;
}
.svg-inline--fa.fa-w-7 {
  width: 0.4375em;
}
.svg-inline--fa.fa-w-8 {
  width: 0.5em;
}
.svg-inline--fa.fa-w-9 {
  width: 0.5625em;
}
.svg-inline--fa.fa-w-10 {
  width: 0.625em;
}
.svg-inline--fa.fa-w-11 {
  width: 0.6875em;
}
.svg-inline--fa.fa-w-12 {
  width: 0.75em;
}
.svg-inline--fa.fa-w-13 {
  width: 0.8125em;
}
.svg-inline--fa.fa-w-14 {
  width: 0.875em;
}
.svg-inline--fa.fa-w-15 {
  width: 0.9375em;
}
.svg-inline--fa.fa-w-16 {
  width: 1em;
}
.svg-inline--fa.fa-w-17 {
  width: 1.0625em;
}
.svg-inline--fa.fa-w-18 {
  width: 1.125em;
}
.svg-inline--fa.fa-w-19 {
  width: 1.1875em;
}
.svg-inline--fa.fa-w-20 {
  width: 1.25em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-border {
  height: 1.5em;
}
.svg-inline--fa.fa-li {
  width: 2em;
}
.svg-inline--fa.fa-fw {
  width: 1.25em;
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: #ff253a;
  border-radius: 1em;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  color: #fff;
  height: 1.5em;
  line-height: 1;
  max-width: 5em;
  min-width: 1.5em;
  overflow: hidden;
  padding: 0.25em;
  right: 0;
  text-overflow: ellipsis;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: 0;
  right: 0;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: 0;
  left: 0;
  right: auto;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  right: 0;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: 0;
  right: auto;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-lg {
  font-size: 1.3333333333em;
  line-height: 0.75em;
  vertical-align: -0.0667em;
}

.fa-xs {
  font-size: 0.75em;
}

.fa-sm {
  font-size: 0.875em;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: 2.5em;
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: -2em;
  position: absolute;
  text-align: center;
  width: 2em;
  line-height: inherit;
}

.fa-border {
  border: solid 0.08em #eee;
  border-radius: 0.1em;
  padding: 0.2em 0.25em 0.15em;
}

.fa-pull-left {
  float: left;
}

.fa-pull-right {
  float: right;
}

.fa.fa-pull-left,
.fas.fa-pull-left,
.far.fa-pull-left,
.fal.fa-pull-left,
.fab.fa-pull-left {
  margin-right: 0.3em;
}
.fa.fa-pull-right,
.fas.fa-pull-right,
.far.fa-pull-right,
.fal.fa-pull-right,
.fab.fa-pull-right {
  margin-left: 0.3em;
}

.fa-spin {
  -webkit-animation: fa-spin 2s infinite linear;
          animation: fa-spin 2s infinite linear;
}

.fa-pulse {
  -webkit-animation: fa-spin 1s infinite steps(8);
          animation: fa-spin 1s infinite steps(8);
}

@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}

@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

:root .fa-rotate-90,
:root .fa-rotate-180,
:root .fa-rotate-270,
:root .fa-flip-horizontal,
:root .fa-flip-vertical,
:root .fa-flip-both {
  -webkit-filter: none;
          filter: none;
}

.fa-stack {
  display: inline-block;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: #fff;
}

.sr-only {
  border: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

.sr-only-focusable:active, .sr-only-focusable:focus {
  clip: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  position: static;
  width: auto;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse {
  color: #fff;
}`;function PFt(){var t=Pge,e=Nge,n=Bs.familyPrefix,r=Bs.replacementClass,i=DFt;if(n!==t||r!==e){var o=new RegExp("\\.".concat(t,"\\-"),"g"),s=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");i=i.replace(o,".".concat(n,"-")).replace(s,"--".concat(n,"-")).replace(a,".".concat(r))}return i}var NFt=function(){function t(){JLt(this,t),this.definitions={}}return tFt(t,[{key:"add",value:function(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var s=i.reduce(this._pullDefinitions,{});Object.keys(s).forEach(function(a){n.definitions[a]=yn({},n.definitions[a]||{},s[a]),qge(a,s[a]),Xge()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,r){var i=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(i).map(function(o){var s=i[o],a=s.prefix,l=s.iconName,c=s.icon;n[a]||(n[a]={}),n[a][l]=c}),n}}]),t}();function $Ft(){Bs.autoAddCss&&!MZ&&(_Ft(PFt()),MZ=!0)}function LFt(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(r){return Kge(r)})}}),Object.defineProperty(t,"node",{get:function(){if(FH){var r=Ro.createElement("div");return r.innerHTML=t.html,r.children}}}),t}function AZ(t){var e=t.prefix,n=e===void 0?"fa":e,r=t.iconName;if(r)return TZ(BFt.definitions,n,r)||TZ(cc.styles,n,r)}function FFt(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(e||{}).icon?e:AZ(e||{}),i=n.mask;return i&&(i=(i||{}).icon?i:AZ(i||{})),t(r,yn({},n,{mask:i}))}}var BFt=new NFt,MZ=!1,Y3={transform:function(e){return RFt(e)}},UFt=FFt(function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.transform,r=n===void 0?Fg:n,i=e.symbol,o=i===void 0?!1:i,s=e.mask,a=s===void 0?null:s,l=e.maskId,c=l===void 0?null:l,u=e.title,d=u===void 0?null:u,f=e.titleId,h=f===void 0?null:f,g=e.classes,p=g===void 0?[]:g,m=e.attributes,v=m===void 0?{}:m,_=e.styles,w=_===void 0?{}:_;if(t){var y=t.prefix,b=t.iconName,x=t.icon;return LFt(yn({type:"icon"},t),function(){return $Ft(),Bs.autoA11y&&(d?v["aria-labelledby"]="".concat(Bs.replacementClass,"-title-").concat(h||HA()):(v["aria-hidden"]="true",v.focusable="false")),IFt({icons:{main:kZ(x),mask:a?kZ(a.icon):{found:!1,width:null,height:null,icon:{}}},prefix:y,iconName:b,transform:yn({},Fg,r),symbol:o,title:d,maskId:c,titleId:h,extra:{attributes:v,styles:w,classes:p}})})}});function IZ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IZ(Object(n),!0).forEach(function(r){Bg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IZ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GA(t){"@babel/helpers - typeof";return GA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GA(t)}function Bg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zFt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Qge(t,e){if(t==null)return{};var n=zFt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Q3(t){return jFt(t)||WFt(t)||VFt(t)||HFt()}function jFt(t){if(Array.isArray(t))return Z3(t)}function WFt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function VFt(t,e){if(t){if(typeof t=="string")return Z3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z3(t,e)}}function Z3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function HFt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GFt(t){var e,n=t.beat,r=t.fade,i=t.beatFade,o=t.bounce,s=t.shake,a=t.flash,l=t.spin,c=t.spinPulse,u=t.spinReverse,d=t.pulse,f=t.fixedWidth,h=t.inverse,g=t.border,p=t.listItem,m=t.flip,v=t.size,_=t.rotation,w=t.pull,y=(e={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":o,"fa-shake":s,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":d,"fa-fw":f,"fa-inverse":h,"fa-border":g,"fa-li":p,"fa-flip":m===!0,"fa-flip-horizontal":m==="horizontal"||m==="both","fa-flip-vertical":m==="vertical"||m==="both"},Bg(e,"fa-".concat(v),typeof v<"u"&&v!==null),Bg(e,"fa-rotate-".concat(_),typeof _<"u"&&_!==null&&_!==0),Bg(e,"fa-pull-".concat(w),typeof w<"u"&&w!==null),Bg(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(y).map(function(b){return y[b]?b:null}).filter(function(b){return b})}function qFt(t){return t=t-0,t===t}function Zge(t){return qFt(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var XFt=["style"];function KFt(t){return t.charAt(0).toUpperCase()+t.slice(1)}function YFt(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var r=n.indexOf(":"),i=Zge(n.slice(0,r)),o=n.slice(r+1).trim();return i.startsWith("webkit")?e[KFt(i)]=o:e[i]=o,e},{})}function Jge(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var r=(e.children||[]).map(function(l){return Jge(t,l)}),i=Object.keys(e.attributes||{}).reduce(function(l,c){var u=e.attributes[c];switch(c){case"class":l.attrs.className=u,delete e.attributes.class;break;case"style":l.attrs.style=YFt(u);break;default:c.indexOf("aria-")===0||c.indexOf("data-")===0?l.attrs[c.toLowerCase()]=u:l.attrs[Zge(c)]=u}return l},{attrs:{}}),o=n.style,s=o===void 0?{}:o,a=Qge(n,XFt);return i.attrs.style=Vd(Vd({},i.attrs.style),s),t.apply(void 0,[e.tag,Vd(Vd({},i.attrs),a)].concat(Q3(r)))}var eve=!1;try{eve=!0}catch{}function QFt(){if(!eve&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function OZ(t){if(t&&GA(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(Y3.icon)return Y3.icon(t);if(t===null)return null;if(t&&GA(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function JP(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Bg({},t,e):{}}var ZFt=["forwardedRef"];function zc(t){var e=t.forwardedRef,n=Qge(t,ZFt),r=n.icon,i=n.mask,o=n.symbol,s=n.className,a=n.title,l=n.titleId,c=n.maskId,u=OZ(r),d=JP("classes",[].concat(Q3(GFt(n)),Q3(s.split(" ")))),f=JP("transform",typeof n.transform=="string"?Y3.transform(n.transform):n.transform),h=JP("mask",OZ(i)),g=UFt(u,Vd(Vd(Vd(Vd({},d),f),h),{},{symbol:o,title:a,titleId:l,maskId:c}));if(!g)return QFt("Could not find icon",u),null;var p=g.abstract,m={ref:e};return Object.keys(n).forEach(function(v){zc.defaultProps.hasOwnProperty(v)||(m[v]=n[v])}),JFt(p[0],m)}zc.displayName="FontAwesomeIcon";zc.propTypes={beat:De.bool,border:De.bool,beatFade:De.bool,bounce:De.bool,className:De.string,fade:De.bool,flash:De.bool,mask:De.oneOfType([De.object,De.array,De.string]),maskId:De.string,fixedWidth:De.bool,inverse:De.bool,flip:De.oneOf([!0,!1,"horizontal","vertical","both"]),icon:De.oneOfType([De.object,De.array,De.string]),listItem:De.bool,pull:De.oneOf(["right","left"]),pulse:De.bool,rotation:De.oneOf([0,90,180,270]),shake:De.bool,size:De.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:De.bool,spinPulse:De.bool,spinReverse:De.bool,symbol:De.oneOfType([De.bool,De.string]),title:De.string,titleId:De.string,transform:De.oneOfType([De.string,De.object]),swapOpacity:De.bool};zc.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var JFt=Jge.bind(null,B.createElement),tve={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="arrow-up",r=448,i=512,o=[],s="f062",a="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z";t.definition={prefix:e,iconName:n,icon:[r,i,o,s,a]},t.faArrowUp=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=i,t.ligatures=o,t.unicode=s,t.svgPathData=a})(tve);var nve={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="arrow-right",r=448,i=512,o=[],s="f061",a="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z";t.definition={prefix:e,iconName:n,icon:[r,i,o,s,a]},t.faArrowRight=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=i,t.ligatures=o,t.unicode=s,t.svgPathData=a})(nve);var rve={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="arrow-down",r=448,i=512,o=[],s="f063",a="M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z";t.definition={prefix:e,iconName:n,icon:[r,i,o,s,a]},t.faArrowDown=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=i,t.ligatures=o,t.unicode=s,t.svgPathData=a})(rve);var ive={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="arrow-left",r=448,i=512,o=[],s="f060",a="M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z";t.definition={prefix:e,iconName:n,icon:[r,i,o,s,a]},t.faArrowLeft=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=i,t.ligatures=o,t.unicode=s,t.svgPathData=a})(ive);var e3t=["className","direction","children"];function J3(){return J3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},J3.apply(this,arguments)}function t3t(t,e){if(t==null)return{};var n=n3t(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function n3t(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var r3t=function(e){var n=e.className,r=n===void 0?"":n,i=e.direction,o=i===void 0?"right":i,s=e.children,a=t3t(e,e3t),l="".concat(At,"-button--arrow"),c=function(){if(o==="up")return tve.faArrowUp;if(o==="right")return nve.faArrowRight;if(o==="down")return rve.faArrowDown;if(o==="left")return ive.faArrowLeft}();return B.createElement($H,J3({},a,{className:yt(l,r),icon:B.createElement(zc,{icon:c})}),s)},ove={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="ellipsis-v",r=192,i=512,o=[],s="f142",a="M96 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72zM24 80c0 39.8 32.2 72 72 72s72-32.2 72-72S135.8 8 96 8 24 40.2 24 80zm0 352c0 39.8 32.2 72 72 72s72-32.2 72-72-32.2-72-72-72-72 32.2-72 72z";t.definition={prefix:e,iconName:n,icon:[r,i,o,s,a]},t.faEllipsisV=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=i,t.ligatures=o,t.unicode=s,t.svgPathData=a})(ove);var sve={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="paper-plane",r=512,i=512,o=[],s="f1d8",a="M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z";t.definition={prefix:e,iconName:n,icon:[r,i,o,s,a]},t.faPaperPlane=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=i,t.ligatures=o,t.unicode=s,t.svgPathData=a})(sve);var i3t=["className","children"];function eB(){return eB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eB.apply(this,arguments)}function o3t(t,e){if(t==null)return{};var n=s3t(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function s3t(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var a3t=function(e){var n=e.className,r=n===void 0?"":n,i=e.children,o=o3t(e,i3t),s="".concat(At,"-button--send");return B.createElement($H,eB({},o,{className:yt(s,r),icon:B.createElement(zc,{icon:sve.faPaperPlane})}),i)},ave={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="paperclip",r=448,i=512,o=[],s="f0c6",a="M43.246 466.142c-58.43-60.289-57.341-157.511 1.386-217.581L254.392 34c44.316-45.332 116.351-45.336 160.671 0 43.89 44.894 43.943 117.329 0 162.276L232.214 383.128c-29.855 30.537-78.633 30.111-107.982-.998-28.275-29.97-27.368-77.473 1.452-106.953l143.743-146.835c6.182-6.314 16.312-6.422 22.626-.241l22.861 22.379c6.315 6.182 6.422 16.312.241 22.626L171.427 319.927c-4.932 5.045-5.236 13.428-.648 18.292 4.372 4.634 11.245 4.711 15.688.165l182.849-186.851c19.613-20.062 19.613-52.725-.011-72.798-19.189-19.627-49.957-19.637-69.154 0L90.39 293.295c-34.763 35.56-35.299 93.12-1.191 128.313 34.01 35.093 88.985 35.137 123.058.286l172.06-175.999c6.177-6.319 16.307-6.433 22.626-.256l22.877 22.364c6.319 6.177 6.434 16.307.256 22.626l-172.06 175.998c-59.576 60.938-155.943 60.216-214.77-.485z";t.definition={prefix:e,iconName:n,icon:[r,i,o,s,a]},t.faPaperclip=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=i,t.ligatures=o,t.unicode=s,t.svgPathData=a})(ave);var l3t=["className","children"];function tB(){return tB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tB.apply(this,arguments)}function c3t(t,e){if(t==null)return{};var n=u3t(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function u3t(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var d3t=function(e){var n=e.className,r=n===void 0?"":n,i=e.children,o=c3t(e,l3t),s="".concat(At,"-button--attachment");return B.createElement($H,tB({},o,{className:yt(s,r),icon:B.createElement(zc,{icon:ave.faPaperclip})}),i)},f3t=["onClick","children","className"];function nB(){return nB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nB.apply(this,arguments)}function h3t(t,e){if(t==null)return{};var n=p3t(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function p3t(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var jH=function(e){var n=e.onClick,r=n===void 0?function(){}:n,i=e.children,o=i===void 0?void 0:i,s=e.className,a=h3t(e,f3t),l="".concat(At,"-conversation-header__back");return B.createElement("div",nB({},a,{className:yt(l,s)}),typeof o<"u"?o:B.createElement(r3t,{direction:"left",onClick:r}))};jH.displayName="ConversationHeader.Back";var m3t=["children","className"];function rB(){return rB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rB.apply(this,arguments)}function g3t(t,e){if(t==null)return{};var n=v3t(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function v3t(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var WH=function(e){var n=e.children,r=n===void 0?void 0:n,i=e.className,o=g3t(e,m3t),s="".concat(At,"-conversation-header__actions");return B.createElement("section",rB({},o,{className:yt(s,i)}),r)};WH.displayName="ConversationHeader.Actions";var y3t=["userName","info","children","className"];function iB(){return iB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iB.apply(this,arguments)}function b3t(t,e){if(t==null)return{};var n=x3t(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function x3t(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var VH=function(e){var n=e.userName,r=n===void 0?"":n,i=e.info,o=i===void 0?"":i,s=e.children,a=s===void 0?void 0:s,l=e.className,c=b3t(e,y3t),u="".concat(At,"-conversation-header__content");return B.createElement("div",iB({},c,{className:yt(u,l)}),typeof a<"u"?a:B.createElement(B.Fragment,null,B.createElement("div",{className:"".concat(At,"-conversation-header__user-name")},r),B.createElement("div",{className:"".concat(At,"-conversation-header__info")},o)))};VH.displayName="ConversationHeader.Content";var w3t=["children","className"];function oB(){return oB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oB.apply(this,arguments)}function _3t(t,e){return T3t(t)||E3t(t,e)||C3t(t,e)||S3t()}function S3t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C3t(t,e){if(t){if(typeof t=="string")return RZ(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RZ(t,e)}}function RZ(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function E3t(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function T3t(t){if(Array.isArray(t))return t}function k3t(t,e){if(t==null)return{};var n=A3t(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function A3t(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var mS=function(e){var n=e.children,r=n===void 0?void 0:n,i=e.className,o=k3t(e,w3t),s="".concat(At,"-conversation-header"),a=pS(r,[jH,hS,Ige,VH,WH]),l=_3t(a,5),c=l[0],u=l[1],d=l[2],f=l[3],h=l[4];return B.createElement("div",oB({},o,{className:yt(s,i)}),c,u&&B.createElement("div",{className:"".concat(s,"__avatar")},u),!u&&d&&B.createElement("div",{className:"".concat(s,"__avatar")},d),f,h)};mS.displayName="ConversationHeader";mS.Back=jH;mS.Actions=WH;mS.Content=VH;/*!
 * perfect-scrollbar v1.5.0
 * Copyright 2020 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function uc(t){return getComputedStyle(t)}function Go(t,e){for(var n in e){var r=e[n];typeof r=="number"&&(r=r+"px"),t.style[n]=r}return t}function iE(t){var e=document.createElement("div");return e.className=t,e}var DZ=typeof Element<"u"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function Hd(t,e){if(!DZ)throw new Error("No element matching method supported");return DZ.call(t,e)}function Ug(t){t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)}function PZ(t,e){return Array.prototype.filter.call(t.children,function(n){return Hd(n,e)})}var jr={main:"ps",rtl:"ps__rtl",element:{thumb:function(e){return"ps__thumb-"+e},rail:function(e){return"ps__rail-"+e},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(e){return"ps--active-"+e},scrolling:function(e){return"ps--scrolling-"+e}}},lve={x:null,y:null};function cve(t,e){var n=t.element.classList,r=jr.state.scrolling(e);n.contains(r)?clearTimeout(lve[e]):n.add(r)}function uve(t,e){lve[e]=setTimeout(function(){return t.isAlive&&t.element.classList.remove(jr.state.scrolling(e))},t.settings.scrollingThreshold)}function M3t(t,e){cve(t,e),uve(t,e)}var gS=function(e){this.element=e,this.handlers={}},dve={isEmpty:{configurable:!0}};gS.prototype.bind=function(e,n){typeof this.handlers[e]>"u"&&(this.handlers[e]=[]),this.handlers[e].push(n);var r=["touchstart","wheel","touchmove"];r.indexOf(e)!==-1?this.element.addEventListener(e,n,{passive:!1}):this.element.addEventListener(e,n,!1)};gS.prototype.unbind=function(e,n){var r=this;this.handlers[e]=this.handlers[e].filter(function(i){return n&&i!==n?!0:(r.element.removeEventListener(e,i,!1),!1)})};gS.prototype.unbindAll=function(){for(var e in this.handlers)this.unbind(e)};dve.isEmpty.get=function(){var t=this;return Object.keys(this.handlers).every(function(e){return t.handlers[e].length===0})};Object.defineProperties(gS.prototype,dve);var m0=function(){this.eventElements=[]};m0.prototype.eventElement=function(e){var n=this.eventElements.filter(function(r){return r.element===e})[0];return n||(n=new gS(e),this.eventElements.push(n)),n};m0.prototype.bind=function(e,n,r){this.eventElement(e).bind(n,r)};m0.prototype.unbind=function(e,n,r){var i=this.eventElement(e);i.unbind(n,r),i.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(i),1)};m0.prototype.unbindAll=function(){this.eventElements.forEach(function(e){return e.unbindAll()}),this.eventElements=[]};m0.prototype.once=function(e,n,r){var i=this.eventElement(e),o=function s(a){i.unbind(n,s),r(a)};i.bind(n,o)};function oE(t){if(typeof window.CustomEvent=="function")return new CustomEvent(t);var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,void 0),e}function qA(t,e,n,r,i,o){r===void 0&&(r=!0),i===void 0&&(i=!1);var s;if(e==="top")s=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(e==="left")s=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");I3t(t,n,s,r,i,o)}function I3t(t,e,n,r,i,o){var s=n[0],a=n[1],l=n[2],c=n[3],u=n[4],d=n[5];r===void 0&&(r=!0),i===void 0&&(i=!1);var f=t.element;t.reach[c]=null;var h=o===!0?t[s]!==t[a]:!0;h&&f[l]<1&&(t.reach[c]="start"),h&&f[l]>t[s]-t[a]-1&&(t.reach[c]="end"),e&&(f.dispatchEvent(oE("ps-scroll-"+c)),e<0?f.dispatchEvent(oE("ps-scroll-"+u)):e>0&&f.dispatchEvent(oE("ps-scroll-"+d)),r&&M3t(t,c)),t.reach[c]&&(e||i)&&f.dispatchEvent(oE("ps-"+c+"-reach-"+t.reach[c]))}function ur(t){return parseInt(t,10)||0}function O3t(t){return Hd(t,"input,[contenteditable]")||Hd(t,"select,[contenteditable]")||Hd(t,"textarea,[contenteditable]")||Hd(t,"button,[contenteditable]")}function R3t(t){var e=uc(t);return ur(e.width)+ur(e.paddingLeft)+ur(e.paddingRight)+ur(e.borderLeftWidth)+ur(e.borderRightWidth)}var Ab={isWebKit:typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator<"u"&&navigator.msMaxTouchPoints,isChrome:typeof navigator<"u"&&/Chrome/i.test(navigator&&navigator.userAgent)};function Ku(t){var e=t.element,n=Math.floor(e.scrollTop),r=e.getBoundingClientRect();t.containerWidth=Math.round(r.width),t.containerHeight=Math.round(r.height),t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight,e.contains(t.scrollbarXRail)||(PZ(e,jr.element.rail("x")).forEach(function(i){return Ug(i)}),e.appendChild(t.scrollbarXRail)),e.contains(t.scrollbarYRail)||(PZ(e,jr.element.rail("y")).forEach(function(i){return Ug(i)}),e.appendChild(t.scrollbarYRail)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=NZ(t,ur(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=ur((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=NZ(t,ur(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=ur(n*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),D3t(e,t),t.scrollbarXActive?e.classList.add(jr.state.active("x")):(e.classList.remove(jr.state.active("x")),t.scrollbarXWidth=0,t.scrollbarXLeft=0,e.scrollLeft=t.isRtl===!0?t.contentWidth:0),t.scrollbarYActive?e.classList.add(jr.state.active("y")):(e.classList.remove(jr.state.active("y")),t.scrollbarYHeight=0,t.scrollbarYTop=0,e.scrollTop=0)}function NZ(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function D3t(t,e){var n={width:e.railXWidth},r=Math.floor(t.scrollTop);e.isRtl?n.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:n.left=t.scrollLeft,e.isScrollbarXUsingBottom?n.bottom=e.scrollbarXBottom-r:n.top=e.scrollbarXTop+r,Go(e.scrollbarXRail,n);var i={top:r,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?i.right=e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth-9:i.right=e.scrollbarYRight-t.scrollLeft:e.isRtl?i.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth*2-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:i.left=e.scrollbarYLeft+t.scrollLeft,Go(e.scrollbarYRail,i),Go(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),Go(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}function P3t(t){t.element,t.event.bind(t.scrollbarY,"mousedown",function(e){return e.stopPropagation()}),t.event.bind(t.scrollbarYRail,"mousedown",function(e){var n=e.pageY-window.pageYOffset-t.scrollbarYRail.getBoundingClientRect().top,r=n>t.scrollbarYTop?1:-1;t.element.scrollTop+=r*t.containerHeight,Ku(t),e.stopPropagation()}),t.event.bind(t.scrollbarX,"mousedown",function(e){return e.stopPropagation()}),t.event.bind(t.scrollbarXRail,"mousedown",function(e){var n=e.pageX-window.pageXOffset-t.scrollbarXRail.getBoundingClientRect().left,r=n>t.scrollbarXLeft?1:-1;t.element.scrollLeft+=r*t.containerWidth,Ku(t),e.stopPropagation()})}function N3t(t){$Z(t,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),$Z(t,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])}function $Z(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=t.element,f=null,h=null,g=null;function p(_){_.touches&&_.touches[0]&&(_[i]=_.touches[0].pageY),d[l]=f+g*(_[i]-h),cve(t,c),Ku(t),_.stopPropagation(),_.preventDefault()}function m(){uve(t,c),t[u].classList.remove(jr.state.clicking),t.event.unbind(t.ownerDocument,"mousemove",p)}function v(_,w){f=d[l],w&&_.touches&&(_[i]=_.touches[0].pageY),h=_[i],g=(t[r]-t[n])/(t[o]-t[a]),w?t.event.bind(t.ownerDocument,"touchmove",p):(t.event.bind(t.ownerDocument,"mousemove",p),t.event.once(t.ownerDocument,"mouseup",m),_.preventDefault()),t[u].classList.add(jr.state.clicking),_.stopPropagation()}t.event.bind(t[s],"mousedown",function(_){v(_)}),t.event.bind(t[s],"touchstart",function(_){v(_,!0)})}function $3t(t){var e=t.element,n=function(){return Hd(e,":hover")},r=function(){return Hd(t.scrollbarX,":focus")||Hd(t.scrollbarY,":focus")};function i(o,s){var a=Math.floor(e.scrollTop);if(o===0){if(!t.scrollbarYActive)return!1;if(a===0&&s>0||a>=t.contentHeight-t.containerHeight&&s<0)return!t.settings.wheelPropagation}var l=e.scrollLeft;if(s===0){if(!t.scrollbarXActive)return!1;if(l===0&&o<0||l>=t.contentWidth-t.containerWidth&&o>0)return!t.settings.wheelPropagation}return!0}t.event.bind(t.ownerDocument,"keydown",function(o){if(!(o.isDefaultPrevented&&o.isDefaultPrevented()||o.defaultPrevented)&&!(!n()&&!r())){var s=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(s){if(s.tagName==="IFRAME")s=s.contentDocument.activeElement;else for(;s.shadowRoot;)s=s.shadowRoot.activeElement;if(O3t(s))return}var a=0,l=0;switch(o.which){case 37:o.metaKey?a=-t.contentWidth:o.altKey?a=-t.containerWidth:a=-30;break;case 38:o.metaKey?l=t.contentHeight:o.altKey?l=t.containerHeight:l=30;break;case 39:o.metaKey?a=t.contentWidth:o.altKey?a=t.containerWidth:a=30;break;case 40:o.metaKey?l=-t.contentHeight:o.altKey?l=-t.containerHeight:l=-30;break;case 32:o.shiftKey?l=t.containerHeight:l=-t.containerHeight;break;case 33:l=t.containerHeight;break;case 34:l=-t.containerHeight;break;case 36:l=t.contentHeight;break;case 35:l=-t.contentHeight;break;default:return}t.settings.suppressScrollX&&a!==0||t.settings.suppressScrollY&&l!==0||(e.scrollTop-=l,e.scrollLeft+=a,Ku(t),i(a,l)&&o.preventDefault())}})}function L3t(t){var e=t.element;function n(s,a){var l=Math.floor(e.scrollTop),c=e.scrollTop===0,u=l+e.offsetHeight===e.scrollHeight,d=e.scrollLeft===0,f=e.scrollLeft+e.offsetWidth===e.scrollWidth,h;return Math.abs(a)>Math.abs(s)?h=c||u:h=d||f,h?!t.settings.wheelPropagation:!0}function r(s){var a=s.deltaX,l=-1*s.deltaY;return(typeof a>"u"||typeof l>"u")&&(a=-1*s.wheelDeltaX/6,l=s.wheelDeltaY/6),s.deltaMode&&s.deltaMode===1&&(a*=10,l*=10),a!==a&&l!==l&&(a=0,l=s.wheelDelta),s.shiftKey?[-l,-a]:[a,l]}function i(s,a,l){if(!Ab.isWebKit&&e.querySelector("select:focus"))return!0;if(!e.contains(s))return!1;for(var c=s;c&&c!==e;){if(c.classList.contains(jr.element.consuming))return!0;var u=uc(c);if(l&&u.overflowY.match(/(scroll|auto)/)){var d=c.scrollHeight-c.clientHeight;if(d>0&&(c.scrollTop>0&&l<0||c.scrollTop<d&&l>0))return!0}if(a&&u.overflowX.match(/(scroll|auto)/)){var f=c.scrollWidth-c.clientWidth;if(f>0&&(c.scrollLeft>0&&a<0||c.scrollLeft<f&&a>0))return!0}c=c.parentNode}return!1}function o(s){var a=r(s),l=a[0],c=a[1];if(!i(s.target,l,c)){var u=!1;t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(c?e.scrollTop-=c*t.settings.wheelSpeed:e.scrollTop+=l*t.settings.wheelSpeed,u=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(l?e.scrollLeft+=l*t.settings.wheelSpeed:e.scrollLeft-=c*t.settings.wheelSpeed,u=!0):(e.scrollTop-=c*t.settings.wheelSpeed,e.scrollLeft+=l*t.settings.wheelSpeed),Ku(t),u=u||n(l,c),u&&!s.ctrlKey&&(s.stopPropagation(),s.preventDefault())}}typeof window.onwheel<"u"?t.event.bind(e,"wheel",o):typeof window.onmousewheel<"u"&&t.event.bind(e,"mousewheel",o)}function F3t(t){if(!Ab.supportsTouch&&!Ab.supportsIePointer)return;var e=t.element;function n(g,p){var m=Math.floor(e.scrollTop),v=Math.ceil(e.scrollLeft),_=Math.abs(g),w=Math.abs(p);if(!t.settings.wheelPropagation)return!0;if(w>_){if(t.settings.suppressScrollY)return!1;if(p>0)return m!==0;if(p<0)return m<t.contentHeight-t.containerHeight}else if(_>w){if(t.settings.suppressScrollX)return!1;if(g>0)return v!==0;if(p<0)return v<t.contentWidth-t.containerWidth}return!0}function r(g,p){e.scrollTop-=p,e.scrollLeft-=g,Ku(t)}var i={},o=0,s={},a=null;function l(g){return g.targetTouches?g.targetTouches[0]:g}function c(g){return g.pointerType&&g.pointerType==="pen"&&g.buttons===0?!1:!!(g.targetTouches&&g.targetTouches.length===1||g.pointerType&&g.pointerType!=="mouse"&&g.pointerType!==g.MSPOINTER_TYPE_MOUSE)}function u(g){if(c(g)){var p=l(g);i.pageX=p.pageX,i.pageY=p.pageY,o=new Date().getTime(),a!==null&&clearInterval(a)}}function d(g,p,m){if(!e.contains(g))return!1;for(var v=g;v&&v!==e;){if(v.classList.contains(jr.element.consuming))return!0;var _=uc(v);if(m&&_.overflowY.match(/(scroll|auto)/)){var w=v.scrollHeight-v.clientHeight;if(w>0&&(v.scrollTop>0&&m<0||v.scrollTop<w&&m>0))return!0}if(p&&_.overflowX.match(/(scroll|auto)/)){var y=v.scrollWidth-v.clientWidth;if(y>0&&(v.scrollLeft>0&&p<0||v.scrollLeft<y&&p>0))return!0}v=v.parentNode}return!1}function f(g){if(c(g)){var p=l(g),m={pageX:p.pageX,pageY:p.pageY},v=m.pageX-i.pageX,_=m.pageY-i.pageY;if(d(g.target,v,_))return;r(v,_),i=m;var w=new Date().getTime(),y=w-o;y>0&&(s.x=v/y,s.y=_/y,o=w),g.cancelable&&n(v,_)&&g.preventDefault()}}function h(){t.settings.swipeEasing&&(clearInterval(a),a=setInterval(function(){if(t.isInitialized){clearInterval(a);return}if(!s.x&&!s.y){clearInterval(a);return}if(Math.abs(s.x)<.01&&Math.abs(s.y)<.01){clearInterval(a);return}r(s.x*30,s.y*30),s.x*=.8,s.y*=.8},10))}Ab.supportsTouch?(t.event.bind(e,"touchstart",u),t.event.bind(e,"touchmove",f),t.event.bind(e,"touchend",h)):Ab.supportsIePointer&&(window.PointerEvent?(t.event.bind(e,"pointerdown",u),t.event.bind(e,"pointermove",f),t.event.bind(e,"pointerup",h)):window.MSPointerEvent&&(t.event.bind(e,"MSPointerDown",u),t.event.bind(e,"MSPointerMove",f),t.event.bind(e,"MSPointerUp",h)))}var B3t=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},U3t={"click-rail":P3t,"drag-thumb":N3t,keyboard:$3t,wheel:L3t,touch:F3t},vS=function(e,n){var r=this;if(n===void 0&&(n={}),typeof e=="string"&&(e=document.querySelector(e)),!e||!e.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=e,e.classList.add(jr.main),this.settings=B3t();for(var i in n)this.settings[i]=n[i];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var o=function(){return e.classList.add(jr.state.focus)},s=function(){return e.classList.remove(jr.state.focus)};this.isRtl=uc(e).direction==="rtl",this.isRtl===!0&&e.classList.add(jr.rtl),this.isNegativeScroll=function(){var c=e.scrollLeft,u=null;return e.scrollLeft=-1,u=e.scrollLeft<0,e.scrollLeft=c,u}(),this.negativeScrollAdjustment=this.isNegativeScroll?e.scrollWidth-e.clientWidth:0,this.event=new m0,this.ownerDocument=e.ownerDocument||document,this.scrollbarXRail=iE(jr.element.rail("x")),e.appendChild(this.scrollbarXRail),this.scrollbarX=iE(jr.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",o),this.event.bind(this.scrollbarX,"blur",s),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var a=uc(this.scrollbarXRail);this.scrollbarXBottom=parseInt(a.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=ur(a.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=ur(a.borderLeftWidth)+ur(a.borderRightWidth),Go(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=ur(a.marginLeft)+ur(a.marginRight),Go(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=iE(jr.element.rail("y")),e.appendChild(this.scrollbarYRail),this.scrollbarY=iE(jr.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",o),this.event.bind(this.scrollbarY,"blur",s),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var l=uc(this.scrollbarYRail);this.scrollbarYRight=parseInt(l.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=ur(l.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?R3t(this.scrollbarY):null,this.railBorderYWidth=ur(l.borderTopWidth)+ur(l.borderBottomWidth),Go(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=ur(l.marginTop)+ur(l.marginBottom),Go(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:e.scrollLeft<=0?"start":e.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:e.scrollTop<=0?"start":e.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(c){return U3t[c](r)}),this.lastScrollTop=Math.floor(e.scrollTop),this.lastScrollLeft=e.scrollLeft,this.event.bind(this.element,"scroll",function(c){return r.onScroll(c)}),Ku(this)};vS.prototype.update=function(e){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,Go(this.scrollbarXRail,{display:"block"}),Go(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=ur(uc(this.scrollbarXRail).marginLeft)+ur(uc(this.scrollbarXRail).marginRight),this.railYMarginHeight=ur(uc(this.scrollbarYRail).marginTop)+ur(uc(this.scrollbarYRail).marginBottom),Go(this.scrollbarXRail,{display:"none"}),Go(this.scrollbarYRail,{display:"none"}),Ku(this),qA(this,"top",0,!1,!0,e),qA(this,"left",0,!1,!0,e),Go(this.scrollbarXRail,{display:""}),Go(this.scrollbarYRail,{display:""}))};vS.prototype.onScroll=function(e){this.isAlive&&(Ku(this),qA(this,"top",this.element.scrollTop-this.lastScrollTop),qA(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)};vS.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),Ug(this.scrollbarX),Ug(this.scrollbarY),Ug(this.scrollbarXRail),Ug(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)};vS.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(e){return!e.match(/^ps([-_].+|)$/)}).join(" ")};function vy(t){"@babel/helpers - typeof";return vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vy(t)}var z3t=["className","style","option","options","containerRef","onScrollY","onScrollX","onScrollUp","onScrollDown","onScrollLeft","onScrollRight","onYReachStart","onYReachEnd","onXReachStart","onXReachEnd","component","onSync","children"];function sB(){return sB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sB.apply(this,arguments)}function j3t(t,e){if(t==null)return{};var n=W3t(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function W3t(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function V3t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H3t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q3t(r.key),r)}}function G3t(t,e,n){return e&&H3t(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function q3t(t){var e=X3t(t,"string");return vy(e)=="symbol"?e:String(e)}function X3t(t,e){if(vy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function K3t(t,e,n){return e=XA(e),Y3t(t,fve()?Reflect.construct(e,n||[],XA(t).constructor):e.apply(t,n))}function Y3t(t,e){if(e&&(vy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hve(t)}function fve(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fve=function(){return!!t})()}function XA(t){return XA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},XA(t)}function hve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Q3t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aB(t,e)}function aB(t,e){return aB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},aB(t,e)}var QE={"ps-scroll-y":"onScrollY","ps-scroll-x":"onScrollX","ps-scroll-up":"onScrollUp","ps-scroll-down":"onScrollDown","ps-scroll-left":"onScrollLeft","ps-scroll-right":"onScrollRight","ps-y-reach-start":"onYReachStart","ps-y-reach-end":"onYReachEnd","ps-x-reach-start":"onXReachStart","ps-x-reach-end":"onXReachEnd"};Object.freeze(QE);var pve=function(t){Q3t(e,t);function e(n){var r;return V3t(this,e),r=K3t(this,e,[n]),r.handleRef=r.handleRef.bind(hve(r)),r._handlerByEvent={},r}return G3t(e,[{key:"componentDidMount",value:function(){this.props.option&&console.warn('react-perfect-scrollbar: the "option" prop has been deprecated in favor of "options"'),this._ps=new vS(this._container,this.props.options||this.props.option),this._updateEventHook(),this._updateClassName()}},{key:"componentDidUpdate",value:function(r){this._updateEventHook(r),this.updateScroll(),r.className!==this.props.className&&this._updateClassName()}},{key:"componentWillUnmount",value:function(){var r=this;Object.keys(this._handlerByEvent).forEach(function(i){var o=r._handlerByEvent[i];o&&r._container.removeEventListener(i,o,!1)}),this._handlerByEvent={},this._ps.destroy(),this._ps=null}},{key:"_updateEventHook",value:function(){var r=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.keys(QE).forEach(function(o){var s=r.props[QE[o]],a=i[QE[o]];if(s!==a){if(a){var l=r._handlerByEvent[o];r._container.removeEventListener(o,l,!1),r._handlerByEvent[o]=null}if(s){var c=function(){return s(r._container)};r._container.addEventListener(o,c,!1),r._handlerByEvent[o]=c}}})}},{key:"_updateClassName",value:function(){var r=this.props.className,i=this._container.className.split(" ").filter(function(o){return o.match(/^ps([-_].+|)$/)}).join(" ");this._container&&(this._container.className="scrollbar-container".concat(r?" ".concat(r):"").concat(i?" ".concat(i):""))}},{key:"updateScroll",value:function(){var r=this.props.onSync;typeof r=="function"?r(this._ps):this._ps.update()}},{key:"handleRef",value:function(r){var i,o;this._container=r,(i=(o=this.props).containerRef)===null||i===void 0||i.call(o,r)}},{key:"render",value:function(){var r=this.props;r.className;var i=r.style;r.option,r.options,r.containerRef,r.onScrollY,r.onScrollX,r.onScrollUp,r.onScrollDown,r.onScrollLeft,r.onScrollRight,r.onYReachStart,r.onYReachEnd,r.onXReachStart,r.onXReachEnd;var o=r.component;r.onSync;var s=r.children,a=j3t(r,z3t),l=typeof o>"u"?"div":o;return B.createElement(l,sB({style:i,ref:this.handleRef},a),s)}}]),e}(R.Component);function Gw(t){"@babel/helpers - typeof";return Gw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gw(t)}var Z3t=["className","variant","children"];function lB(){return lB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lB.apply(this,arguments)}function J3t(t,e,n){return e=eBt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eBt(t){var e=tBt(t,"string");return Gw(e)=="symbol"?e:String(e)}function tBt(t,e){if(Gw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Gw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nBt(t,e){if(t==null)return{};var n=rBt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rBt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var LZ=function(e){var n=e.className,r=n===void 0?void 0:n,i=e.variant,o=i===void 0?"default":i,s=e.children,a=nBt(e,Z3t),l="".concat(At,"-loader"),c=B.Children.count(s)>0?"".concat(l,"--content"):"";return B.createElement("div",lB({},a,{className:yt(l,c,J3t({},"".concat(l,"--variant-").concat(o),o!=="default"),r),role:"status"}),s)};function qw(t){"@babel/helpers - typeof";return qw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qw(t)}var iBt=["className","children","blur","grayscale"];function cB(){return cB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cB.apply(this,arguments)}function FZ(t,e,n){return e=oBt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oBt(t){var e=sBt(t,"string");return qw(e)=="symbol"?e:String(e)}function sBt(t,e){if(qw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aBt(t,e){if(t==null)return{};var n=lBt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function lBt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var cBt=function(e){var n=e.className,r=n===void 0?"":n,i=e.children,o=i===void 0?void 0:i,s=e.blur,a=s===void 0?!1:s,l=e.grayscale,c=l===void 0?!1:l,u=aBt(e,iBt),d="".concat(At,"-overlay"),f="".concat(d,"--blur"),h="".concat(d,"--grayscale");return B.createElement("div",cB({},u,{className:yt(d,FZ({},f,a),FZ({},h,c),r)}),B.createElement("div",{className:"".concat(d,"__content")},o))},uBt=["sender","sentTime","children","className"];function uB(){return uB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uB.apply(this,arguments)}function dBt(t,e){if(t==null)return{};var n=fBt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fBt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var HH=function(e){var n=e.sender,r=n===void 0?"":n,i=e.sentTime,o=i===void 0?"":i,s=e.children,a=s===void 0?void 0:s,l=e.className,c=dBt(e,uBt),u="".concat(At,"-message__header");return B.createElement("div",uB({},c,{className:yt(u,l)}),typeof a<"u"?a:B.createElement(B.Fragment,null,B.createElement("div",{className:"".concat(At,"-message__sender-name")},r),B.createElement("div",{className:"".concat(At,"-message__sent-time")},o)))};HH.displayName="Message.Header";var hBt=["sender","sentTime","children","className"];function dB(){return dB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dB.apply(this,arguments)}function pBt(t,e){if(t==null)return{};var n=mBt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function mBt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var GH=function(e){var n=e.sender,r=n===void 0?"":n,i=e.sentTime,o=i===void 0?"":i,s=e.children,a=s===void 0?void 0:s,l=e.className,c=pBt(e,hBt),u="".concat(At,"-message__footer");return B.createElement("div",dB({},c,{className:yt(u,l)}),typeof a<"u"?a:B.createElement(B.Fragment,null,B.createElement("div",{className:"".concat(At,"-message__sender-name")},r),B.createElement("div",{className:"".concat(At,"-message__sent-time")},o)))};GH.displayName="Message.Footer";var qH=function(e){var n=e.children,r=e.className,i="".concat(At,"-message__custom-content");return B.createElement("div",{className:yt(i,r)},n)};qH.displayName="Message.CustomContent";var KA=function(e){var n=e.src,r=e.width,i=e.height,o=e.alt,s=e.className,a="".concat(At,"-message__image-content"),l={width:typeof r=="number"?"".concat(r,"px"):typeof r=="string"?r:void 0,height:typeof i=="number"?"".concat(i,"px"):typeof i=="string"?i:void 0};return B.createElement("div",{className:yt(a,s)},B.createElement("img",{src:n,style:l,alt:o}))};KA.displayName="Message.ImageContent";var YA=function(e){var n=e.html,r=e.className,i="".concat(At,"-message__html-content"),o=function(){return{__html:n}};return B.createElement("div",{className:yt(i,r),dangerouslySetInnerHTML:o()})};YA.displayName="Message.HtmlContent";var QA=function(e){var n=e.text,r=e.className,i=e.children,o="".concat(At,"-message__text-content"),s=i??n;return B.createElement("div",{className:yt(o,r)},s)};QA.displayName="Message.TextContent";var gBt=["model","avatarSpacer","avatarPosition","type","payload","children","className"];function fB(){return fB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fB.apply(this,arguments)}function BZ(t,e,n){return e=vBt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vBt(t){var e=yBt(t,"string");return yy(e)=="symbol"?e:String(e)}function yBt(t,e){if(yy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(yy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yy(t){"@babel/helpers - typeof";return yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yy(t)}function bBt(t,e){return SBt(t)||_Bt(t,e)||wBt(t,e)||xBt()}function xBt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wBt(t,e){if(t){if(typeof t=="string")return UZ(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UZ(t,e)}}function UZ(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _Bt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function SBt(t){if(Array.isArray(t))return t}function CBt(t,e){if(t==null)return{};var n=EBt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function EBt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Qf=function(e){var n,r,i=e.model,o=i.message,s=o===void 0?"":o,a=i.sentTime,l=a===void 0?"":a,c=i.sender,u=c===void 0?"":c,d=i.direction,f=d===void 0?1:d,h=i.position,g=i.type,p=i.payload,m=e.avatarSpacer,v=m===void 0?!1:m,_=e.avatarPosition,w=_===void 0?void 0:_,y=e.type,b=y===void 0?"html":y,x=e.payload,S=e.children,C=e.className,T=CBt(e,gBt),E="".concat(At,"-message"),k=pS(S,[hS,HH,GH,YA,QA,KA,qH]),A=bBt(k,7),O=A[0],D=A[1],P=A[2],N=A[3],U=A[4],L=A[5],V=A[6],G=function(){if(f===0||f==="incoming")return"".concat(E,"--incoming");if(f===1||f==="outgoing")return"".concat(E,"--outgoing")}(),Q=function(se){var me="".concat(E,"--avatar-");if(se===0||se==="top-left"||se==="tl")return"".concat(me,"tl");if(se===1||se==="top-right"||se==="tr")return"".concat(me,"tr");if(se===2||se==="bottom-right"||se==="br")return"".concat(me,"br");if(se===3||se==="bottom-left"||se==="bl")return"".concat(me,"bl");if(se===4||se==="center-left"||se==="cl")return"".concat(me,"cl");if(se===5||se==="center-right"||se==="cr")return"".concat(me,"cr")}(w),te=function(se){var me="".concat(At,"-message--");if(se==="single"||se===0)return"".concat(me,"single");if(se==="first"||se===1)return"".concat(me,"first");if(se==="normal"||se===2)return"";if(se==="last"||se===3)return"".concat(me,"last")}(h),ne=function(){return(u==null?void 0:u.length)>0&&(l==null?void 0:l.length)>0?"".concat(u,": ").concat(l):(u==null?void 0:u.length)>0&&(typeof l>"u"||(l==null?void 0:l.length)===0)?u:null}(),ee=(n=(r=N??U)!==null&&r!==void 0?r:L)!==null&&n!==void 0?n:V,re=ee??function(){var se=g??b,me=p??s,Me=me??x,de=yy(Me)==="object"?Age(Me):"";if(se==="html"&&de!=="Message.CustomContent")return B.createElement(YA,{html:Me});if(se==="text")return B.createElement(QA,{text:Me});if(se==="image")return B.createElement(KA,Me);if(se==="custom"||de==="Message.CustomContent")return Me}();return B.createElement("section",fB({},T,{"aria-label":ne,className:yt(E,G,BZ({},"".concat(E,"--avatar-spacer"),v),te,Q,C)},BZ({},"data-".concat(At,"-message"),"")),typeof O<"u"&&B.createElement("div",{className:"".concat(E,"__avatar")},O),B.createElement("div",{className:"".concat(E,"__content-wrapper")},D,B.createElement("div",{className:"".concat(E,"__content")},re),P))};Qf.Header=HH;Qf.HtmlContent=YA;Qf.TextContent=QA;Qf.ImageContent=KA;Qf.CustomContent=qH;Qf.Footer=GH;var TBt=["children","className"];function hB(){return hB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hB.apply(this,arguments)}function kBt(t,e){if(t==null)return{};var n=ABt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ABt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var XH=function(e){var n=e.children,r=n===void 0?void 0:n,i=e.className,o=kBt(e,TBt),s="".concat(At,"-message-group__header");return B.createElement("div",hB({},o,{className:yt(s,i)}),r)};XH.displayName="MessageGroup.Header";var MBt=["children","className"];function pB(){return pB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pB.apply(this,arguments)}function IBt(t,e){if(t==null)return{};var n=OBt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function OBt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var KH=function(e){var n=e.children,r=n===void 0?void 0:n,i=e.className,o=IBt(e,MBt),s="".concat(At,"-message-group__footer");return B.createElement("div",pB({},o,{className:yt(s,i)}),r)};KH.displayName="MessageGroup.Footer";var RBt=["children","className"];function mB(){return mB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mB.apply(this,arguments)}function DBt(t,e){if(t==null)return{};var n=PBt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function PBt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var YH=function(e){var n=e.children,r=n===void 0?void 0:n,i=e.className,o=DBt(e,RBt),s="".concat(At,"-message-group");return B.createElement("div",mB({},o,{className:yt("".concat(s,"__messages"),i)}),r)};YH.displayName="MessageGroup.Messages";function Xw(t){"@babel/helpers - typeof";return Xw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xw(t)}var NBt=["direction","avatarPosition","sender","sentTime","children","className"];function gB(){return gB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gB.apply(this,arguments)}function $Bt(t,e,n){return e=LBt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LBt(t){var e=FBt(t,"string");return Xw(e)=="symbol"?e:String(e)}function FBt(t,e){if(Xw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Xw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BBt(t,e){return WBt(t)||jBt(t,e)||zBt(t,e)||UBt()}function UBt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zBt(t,e){if(t){if(typeof t=="string")return zZ(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zZ(t,e)}}function zZ(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jBt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function WBt(t){if(Array.isArray(t))return t}function VBt(t,e){if(t==null)return{};var n=HBt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function HBt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Y2=function(e){var n=e.direction,r=n===void 0?"incoming":n,i=e.avatarPosition,o=i===void 0?void 0:i,s=e.sender,a=s===void 0?"":s,l=e.sentTime,c=l===void 0?"":l,u=e.children,d=e.className,f=VBt(e,NBt),h="".concat(At,"-message-group"),g=function(){if(r===0||r==="incoming")return"".concat(h,"--incoming");if(r===1||r==="outgoing")return"".concat(h,"--outgoing")}(),p=function(){var S="".concat(h,"--avatar-");if(typeof o=="string"&&(o==="tl"||o==="top-left"||o==="tr"||o==="top-right"||o==="bl"||o==="bottom-right"||o==="br"||o==="bottom-right"||o==="cl"||o==="center-left"||o==="cr"||o==="center-right"))return"".concat(S).concat(o)}(),m=pS(u,[hS,XH,KH,YH]),v=BBt(m,4),_=v[0],w=v[1],y=v[2],b=v[3],x=function(){return a.length>0&&c.length>0?"".concat(a,": ").concat(c):a.length>0&&c.length===0?a:null}();return B.createElement("section",gB({"aria-label":x},f,{className:yt(h,g,p,d)},$Bt({},"data-".concat(At,"-message-group"),"")),typeof _<"u"&&B.createElement("div",{className:"".concat(h,"__avatar")},_),B.createElement("div",{className:"".concat(h,"__content")},w,b,y))};Y2.Header=XH;Y2.Footer=KH;Y2.Messages=YH;var GBt=["content","as","children","className"];function vB(){return vB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vB.apply(this,arguments)}function qBt(t,e){if(t==null)return{};var n=XBt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function XBt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var KBt=function(e){var n=e.content,r=n===void 0?void 0:n,i=e.as,o=i===void 0?"div":i,s=e.children,a=s===void 0?void 0:s,l=e.className,c=qBt(e,GBt),u="".concat(At,"-message-separator"),d=function(){return typeof o=="string"&&o.length>0?o:"div"}();return B.createElement(d,vB({},c,{className:yt(u,l)}),GLt(a)===!0?r:a)},YBt=["className","children"];function yB(){return yB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yB.apply(this,arguments)}function QBt(t,e){if(t==null)return{};var n=ZBt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ZBt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Q2=function(e){var n=e.className,r=e.children,i=QBt(e,YBt);return B.createElement("div",yB({},i,{className:n}),r)};Q2.displayName="MessageList.Content";var JBt=["children","typingIndicator","loading","loadingMore","loadingMorePosition","onYReachStart","onYReachEnd","className","disableOnYReachWhenNoScroll","scrollBehavior","autoScrollToBottom","autoScrollToBottomOnMount"];function by(t){"@babel/helpers - typeof";return by=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},by(t)}function Kw(){return Kw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kw.apply(this,arguments)}function eUt(t,e){return iUt(t)||rUt(t,e)||nUt(t,e)||tUt()}function tUt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nUt(t,e){if(t){if(typeof t=="string")return jZ(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jZ(t,e)}}function jZ(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rUt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function iUt(t){if(Array.isArray(t))return t}function oUt(t,e){if(t==null)return{};var n=sUt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function sUt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function aUt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lUt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gve(r.key),r)}}function cUt(t,e,n){return e&&lUt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function uUt(t,e,n){return e=ZA(e),dUt(t,mve()?Reflect.construct(e,n||[],ZA(t).constructor):e.apply(t,n))}function dUt(t,e){if(e&&(by(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vg(t)}function mve(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mve=function(){return!!t})()}function ZA(t){return ZA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ZA(t)}function vg(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fUt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bB(t,e)}function bB(t,e){return bB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},bB(t,e)}function ch(t,e,n){return e=gve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gve(t){var e=hUt(t,"string");return by(e)=="symbol"?e:String(e)}function hUt(t,e){if(by(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(by(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var QH=function(t){fUt(e,t);function e(n){var r;return aUt(this,e),r=uUt(this,e,[n]),ch(vg(r),"handleResize",function(){r.containerRef.current.clientHeight<r.lastClientHeight&&r.scrollToEnd(r.props.scrollBehavior),r.scrollRef.current.updateScroll()}),ch(vg(r),"handleContainerResize",function(){r.resizeTicking===!1&&(window.requestAnimationFrame(function(){var i=r.containerRef.current;if(i){var o=i.clientHeight,s=o-r.lastClientHeight;s>=1?r.preventScrollTop===!1&&(i.scrollTop=Math.round(i.scrollTop)-s):i.scrollTop=i.scrollTop-s,r.lastClientHeight=i.clientHeight,r.scrollRef.current.updateScroll()}r.resizeTicking=!1}),r.resizeTicking=!0)}),ch(vg(r),"isSticked",function(){var i=r.containerRef.current;return i.scrollHeight===Math.round(i.scrollTop+i.clientHeight)}),ch(vg(r),"handleScroll",function(){r.scrollTicking===!1&&(window.requestAnimationFrame(function(){r.noScroll===!1?r.preventScrollTop=r.isSticked():r.noScroll=!1,r.scrollTicking=!1}),r.scrollTicking=!0)}),ch(vg(r),"getLastMessageOrGroup",function(){var i=r.containerRef.current.querySelector("[data-".concat(At,"-message-list]>[data-").concat(At,"-message]:last-of-type,[data-").concat(At,"-message-list]>[data-").concat(At,"-message-group]:last-of-type")),o=i==null?void 0:i.querySelector("[data-".concat(At,"-message]:last-of-type"));return{lastElement:i,lastMessageInGroup:o}}),r.scrollPointRef=B.createRef(),r.containerRef=B.createRef(),r.scrollRef=B.createRef(),r.lastClientHeight=0,r.preventScrollTop=!1,r.resizeObserver=void 0,r.scrollTicking=!1,r.resizeTicking=!1,r.noScroll=void 0,r}return cUt(e,[{key:"getSnapshotBeforeUpdate",value:function(){var r=this.containerRef.current,i=Math.round(r.scrollTop+r.clientHeight),o=r.scrollHeight===i||r.scrollHeight+1===i||r.scrollHeight-1===i;return{sticky:o,clientHeight:r.clientHeight,scrollHeight:r.scrollHeight,lastMessageOrGroup:this.getLastMessageOrGroup(),diff:r.scrollHeight-r.scrollTop}}},{key:"componentDidMount",value:function(){this.props.autoScrollToBottomOnMount===!0&&this.scrollToEnd(this.props.scrollBehavior),this.lastClientHeight=this.containerRef.current.clientHeight,window.addEventListener("resize",this.handleResize),typeof window.ResizeObserver=="function"&&(this.resizeObserver=new ResizeObserver(this.handleContainerResize),this.resizeObserver.observe(this.containerRef.current)),this.containerRef.current.addEventListener("scroll",this.handleScroll)}},{key:"componentDidUpdate",value:function(r,i,o){var s=this.props.autoScrollToBottom;if(typeof o<"u"){var a=this.containerRef.current,l=this.getLastMessageOrGroup(),c=l.lastElement,u=l.lastMessageInGroup;if(c===o.lastMessageOrGroup.lastElement&&(typeof u>"u"||u===o.lastMessageOrGroup.lastMessageInGroup)&&(a.scrollTop=a.scrollHeight-o.diff+(this.lastClientHeight-a.clientHeight)),o.sticky===!0)s===!0&&this.scrollToEnd(this.props.scrollBehavior),this.preventScrollTop=!0;else if(o.clientHeight<this.lastClientHeight){var d=a.scrollTop+this.lastClientHeight;a.scrollHeight===d||a.scrollHeight+1===d||a.scrollHeight-1===d?s===!0&&(this.scrollToEnd(this.props.scrollBehavior),this.preventScrollTop=!0):this.preventScrollTop=!1}else this.preventScrollTop=!1,c===o.lastMessageOrGroup.lastElement&&(typeof u>"u"||u===o.lastMessageOrGroup.lastMessageInGroup)&&a.scrollTop===0&&a.scrollHeight>o.scrollHeight&&(a.scrollTop=a.scrollHeight-o.scrollHeight);this.lastClientHeight=o.clientHeight}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),typeof this.resizeObserver<"u"&&this.resizeObserver.disconnect(),this.containerRef.current.removeEventListener("scroll",this.handleScroll)}},{key:"scrollToEnd",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollBehavior,i=this.containerRef.current,o=this.scrollPointRef.current,s=i.getBoundingClientRect(),a=o.getBoundingClientRect(),l=a.top+i.scrollTop-s.top;i.scrollBy?i.scrollBy({top:l,behavior:r}):i.scrollTop=l,this.lastClientHeight=i.clientHeight,this.noScroll=!0}},{key:"render",value:function(){var r=this,i=this.props,o=i.children,s=i.typingIndicator,a=i.loading,l=i.loadingMore,c=i.loadingMorePosition,u=i.onYReachStart,d=i.onYReachEnd,f=i.className,h=i.disableOnYReachWhenNoScroll;i.scrollBehavior,i.autoScrollToBottom,i.autoScrollToBottomOnMount;var g=oUt(i,JBt),p="".concat(At,"-message-list"),m=pS(o,[Q2]),v=eUt(m,1),_=v[0];return B.createElement("div",Kw({},g,{className:yt(p,f)}),l&&B.createElement("div",{className:yt("".concat(p,"__loading-more"),ch({},"".concat(p,"__loading-more--bottom"),c==="bottom"))},B.createElement(LZ,null)),a&&B.createElement(cBt,null,B.createElement(LZ,null)),B.createElement(pve,Kw({onYReachStart:u,onYReachEnd:d,onSync:function(y){return y.update(h)},className:"".concat(p,"__scroll-wrapper"),ref:this.scrollRef,containerRef:function(y){return r.containerRef.current=y},options:{suppressScrollX:!0}},ch({},"data-".concat(At,"-message-list"),""),{style:{overscrollBehaviorY:"none",overflowAnchor:"auto",touchAction:"none"}}),_||o,B.createElement("div",{className:"".concat(p,"__scroll-to"),ref:this.scrollPointRef})),typeof s<"u"&&B.createElement("div",{className:"".concat(p,"__typing-indicator-container")},s))}}]),e}(B.Component);QH.displayName="MessageList";function pUt(t,e){var n=R.useRef(),r=function(o){return n.current.scrollToEnd(o)};return R.useImperativeHandle(e,function(){return{scrollToBottom:r}}),B.createElement(QH,Kw({ref:n},t))}var g0=R.forwardRef(pUt);g0.propTypes={children:Mge([Qf,Y2,KBt,Q2]),typingIndicator:De.node,loading:De.bool,loadingMore:De.bool,loadingMorePosition:De.oneOf(["top","bottom"]),onYReachStart:De.func,onYReachEnd:De.func,disableOnYReachWhenNoScroll:De.bool,autoScrollToBottom:De.bool,autoScrollToBottomOnMount:De.bool,scrollBehavior:De.oneOf(["auto","smooth"]),className:De.string};g0.defaultProps={typingIndicator:void 0,loading:!1,loadingMore:!1,loadingMorePosition:"top",disableOnYReachWhenNoScroll:!1,autoScrollToBottom:!0,autoScrollToBottomOnMount:!0,scrollBehavior:"auto"};QH.defaultProps=g0.defaultProps;g0.Content=Q2;function xy(t){"@babel/helpers - typeof";return xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xy(t)}function mUt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gUt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yve(r.key),r)}}function vUt(t,e,n){return e&&gUt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function yUt(t,e,n){return e=JA(e),bUt(t,vve()?Reflect.construct(e,n||[],JA(t).constructor):e.apply(t,n))}function bUt(t,e){if(e&&(xy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _h(t)}function vve(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vve=function(){return!!t})()}function JA(t){return JA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},JA(t)}function _h(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xUt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xB(t,e)}function xB(t,e){return xB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},xB(t,e)}function eN(t,e,n){return e=yve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yve(t){var e=wUt(t,"string");return xy(e)=="symbol"?e:String(e)}function wUt(t,e){if(xy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(xy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _Ut=function(e,n){var r=document.activeElement===e,i=document.createTextNode("");if(e.appendChild(i),i!==null&&i.nodeValue!==null&&(r||n)){var o=window.getSelection();if(o!==null){var s=document.createRange();s.setStart(i,i.nodeValue.length),s.collapse(!0),o.removeAllRanges(),o.addRange(s)}}},SUt=function(t){xUt(e,t);function e(n){var r;return mUt(this,e),r=yUt(this,e,[n]),eN(_h(r),"innerHTML",function(){var i=_h(r),o=i.props.value;return{__html:typeof o<"u"?o:""}}),eN(_h(r),"handleKeyPress",function(i){var o=_h(r),s=o.props.onKeyPress;s==null||s(i)}),eN(_h(r),"handleInput",function(i){var o=_h(r),s=o.props.onChange,a=i.target;s==null||s(a.innerHTML,a.textContent,a.innerText)}),r.msgRef=B.createRef(),r}return vUt(e,[{key:"focus",value:function(){typeof this.msgRef.current<"u"&&this.msgRef.current.focus()}},{key:"componentDidMount",value:function(){this.props.autoFocus===!0&&this.msgRef.current.focus()}},{key:"shouldComponentUpdate",value:function(r){var i=this.msgRef,o=this.props,s=o.placeholder,a=o.disabled,l=o.activateAfterChange;return typeof i.current>"u"||r.value!==i.current.innerHTML?!0:s!==r.placeholder||a!==r.disabled||l!==r.activateAfterChange}},{key:"componentDidUpdate",value:function(){var r=this.msgRef,i=this.props,o=i.value,s=i.activateAfterChange;o!==r.current.innerHTML&&(r.current.innerHTML=typeof o=="string"?o:""),_Ut(r.current,s)}},{key:"render",value:function(){var r=this.msgRef,i=this.handleInput,o=this.handleKeyPress,s=this.innerHTML,a=this.props,l=a.placeholder,c=a.disabled,u=a.className,d=typeof l=="string"?l:"";return B.createElement("div",{ref:r,className:u,contentEditable:c===!1,disabled:c,"data-placeholder":d,onInput:i,onKeyPress:o,dangerouslySetInnerHTML:s()})}}]),e}(R.Component);function wy(t){"@babel/helpers - typeof";return wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wy(t)}var CUt=["fancyScroll","children","forwardedRef"],EUt=["value","onSend","onChange","autoFocus","placeholder","fancyScroll","className","activateAfterChange","disabled","sendDisabled","sendOnReturnDisabled","attachDisabled","sendButton","attachButton","onAttachClick"];function TUt(t,e,n){return e=xve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wB(t,e){return IUt(t)||MUt(t,e)||AUt(t,e)||kUt()}function kUt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AUt(t,e){if(t){if(typeof t=="string")return WZ(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WZ(t,e)}}function WZ(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function MUt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function IUt(t){if(Array.isArray(t))return t}function uv(){return uv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uv.apply(this,arguments)}function bve(t,e){if(t==null)return{};var n=OUt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function OUt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function RUt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DUt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xve(r.key),r)}}function PUt(t,e,n){return e&&DUt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xve(t){var e=NUt(t,"string");return wy(e)=="symbol"?e:String(e)}function NUt(t,e){if(wy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(wy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Ut(t,e,n){return e=eM(e),LUt(t,wve()?Reflect.construct(e,n||[],eM(t).constructor):e.apply(t,n))}function LUt(t,e){if(e&&(wy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FUt(t)}function FUt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wve(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wve=function(){return!!t})()}function eM(t){return eM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},eM(t)}function BUt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_B(t,e)}function _B(t,e){return _B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_B(t,e)}function UUt(){var t=function(e){BUt(n,e);function n(){return RUt(this,n),$Ut(this,n,arguments)}return PUt(n,[{key:"render",value:function(){var i=this.props,o=i.fancyScroll,s=i.children,a=i.forwardedRef,l=bve(i,CUt);return B.createElement(B.Fragment,null,o===!0&&B.createElement(pve,uv({ref:function(u){return a.current=u}},l,{options:{suppressScrollX:!0}}),s),o===!1&&B.createElement("div",uv({ref:a},l),s))}}]),n}(R.Component);return B.forwardRef(function(e,n){return B.createElement(t,uv({forwardedRef:n},e))})}var zUt=UUt(),VZ=function(e,n){var r=typeof e<"u"?e:n,i=R.useState(r),o=wB(i,2),s=o[0],a=o[1],l=typeof e<"u"?e:s;return[l,function(c){a(c)}]};function jUt(t,e){var n=t.value,r=n===void 0?void 0:n,i=t.onSend,o=i===void 0?YE:i,s=t.onChange,a=s===void 0?YE:s,l=t.autoFocus,c=l===void 0?!1:l,u=t.placeholder,d=u===void 0?"":u,f=t.fancyScroll,h=f===void 0?!0:f,g=t.className,p=t.activateAfterChange,m=p===void 0?!1:p,v=t.disabled,_=v===void 0?!1:v,w=t.sendDisabled,y=t.sendOnReturnDisabled,b=y===void 0?!1:y,x=t.attachDisabled,S=x===void 0?!1:x,C=t.sendButton,T=C===void 0?!0:C,E=t.attachButton,k=E===void 0?!0:E,A=t.onAttachClick,O=A===void 0?YE:A,D=bve(t,EUt),P=R.useRef(),N=R.useRef(),U=VZ(r,""),L=wB(U,2),V=L[0],G=L[1],Q=VZ(w,!0),te=wB(Q,2),ne=te[0],ee=te[1],re=function(){typeof N.current<"u"&&N.current.focus()};R.useImperativeHandle(e,function(){return{focus:re}}),R.useEffect(function(){c===!0&&re()},[]),R.useEffect(function(){typeof P.current.updateScroll=="function"&&P.current.updateScroll()});var se=function(){var Ve=N.current.msgRef.current;return[Ve.textContent,Ve.innerText,Ve.cloneNode(!0).childNodes]},me=function(){if(V.length>0){r===void 0&&G(""),typeof w>"u"&&ee(!0);var Ve=se();o(V,Ve[0],Ve[1],Ve[2])}},Me=function(Ve){Ve.key==="Enter"&&Ve.shiftKey===!1&&b===!1&&(Ve.preventDefault(),me())},de=function(Ve,ze,Fe){G(Ve),typeof w>"u"&&ee(ze.length===0),typeof P.current.updateScroll=="function"&&P.current.updateScroll();var we=se();a(Ve,ze,Fe,we[2])},Ce="".concat(At,"-message-input"),Ee=typeof d=="string"?d:"";return B.createElement("div",uv({},D,{className:yt(Ce,TUt({},"".concat(Ce,"--disabled"),_),g)}),k===!0&&B.createElement("div",{className:"".concat(Ce,"__tools")},B.createElement(d3t,{onClick:O,disabled:_===!0||S===!0})),B.createElement("div",{className:"".concat(Ce,"__content-editor-wrapper")},B.createElement(zUt,{fancyScroll:h,ref:P,className:"".concat(Ce,"__content-editor-container")},B.createElement(SUt,{ref:N,className:"".concat(Ce,"__content-editor"),disabled:_,placeholder:Ee,onKeyPress:Me,onChange:de,activateAfterChange:m,value:V}))),T===!0&&B.createElement("div",{className:"".concat(Ce,"__tools")},B.createElement(a3t,{onClick:me,disabled:_===!0||ne===!0})))}var Z2=R.forwardRef(jUt);Z2.displayName="MessageInput";Z2.propTypes={value:De.string,placeholder:De.string,disabled:De.bool,sendOnReturnDisabled:De.bool,sendDisabled:De.bool,fancyScroll:De.bool,activateAfterChange:De.bool,autoFocus:De.bool,onChange:De.func,onSend:De.func,className:De.string,sendButton:De.bool,attachButton:De.bool,attachDisabled:De.bool,onAttachClick:De.func};var WUt=["className","children"];function SB(){return SB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SB.apply(this,arguments)}function VUt(t,e){if(t==null)return{};var n=HUt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function HUt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var _ve=function(e){var n=e.className,r=e.children,i=VUt(e,WUt),o="".concat(At,"-input-toolbox");return B.createElement("div",SB({},i,{className:yt(o,n)}),r)};_ve.displayName="InputToolbox";var GUt=["children","className"];function CB(){return CB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CB.apply(this,arguments)}function qUt(t,e){return QUt(t)||YUt(t,e)||KUt(t,e)||XUt()}function XUt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KUt(t,e){if(t){if(typeof t=="string")return HZ(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HZ(t,e)}}function HZ(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function YUt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function QUt(t){if(Array.isArray(t))return t}function ZUt(t,e){if(t==null)return{};var n=JUt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function JUt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var ezt=function(e){var n=e.children,r=n===void 0?void 0:n,i=e.className,o=ZUt(e,GUt),s="".concat(At,"-chat-container"),a=pS(r,[mS,g0,Z2,_ve]),l=qUt(a,4),c=l[0],u=l[1],d=l[2],f=l[3];return B.createElement("div",CB({},o,{className:yt(s,i)}),c,u,d,f)},dp="".concat(At,"-conversation");function Yw(t){"@babel/helpers - typeof";return Yw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yw(t)}var tzt=["children","className","visible"];function EB(){return EB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EB.apply(this,arguments)}function nzt(t,e,n){return e=rzt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rzt(t){var e=izt(t,"string");return Yw(e)=="symbol"?e:String(e)}function izt(t,e){if(Yw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Yw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ozt(t,e){if(t==null)return{};var n=szt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function szt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var azt=function(e){var n=e.children,r=e.className,i=e.visible,o=ozt(e,tzt);return B.createElement("div",EB({},o,{className:yt("".concat(dp,"__operations"),nzt({},"".concat(dp,"__operations--visible"),i),r)}),B.Children.count(n)>0?n:B.createElement(zc,{icon:ove.faEllipsisV}))};azt.displayName="Conversation.Operations";var lzt=["lastSenderName","info","name","children","className"];function TB(){return TB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TB.apply(this,arguments)}function kB(t){"@babel/helpers - typeof";return kB=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kB(t)}function czt(t,e){if(t==null)return{};var n=uzt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function uzt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var dzt=function(e){var n=e.name;return B.createElement(B.Fragment,null,B.createElement("div",{className:"".concat(dp,"__last-sender")},n),":")},fzt=function(e){var n=e.info;return B.createElement("div",{className:"".concat(dp,"__info-content")},n)},hzt=function(e){var n=e.lastSenderName,r=e.info,i=e.name,o=e.children,s=e.className,a=czt(e,lzt),l=kB(n);return B.createElement("div",TB({},a,{className:yt("".concat(dp,"__content"),s)}),B.Children.count(o)>0?o:B.createElement(B.Fragment,null,B.createElement("div",{className:"".concat(dp,"__name")},i),B.createElement("div",{className:"".concat(dp,"__info")},l!=="undefined"?B.createElement(B.Fragment,null,l==="string"?B.createElement(dzt,{name:n}):n," "):null,typeof r<"u"&&B.createElement(fzt,{info:r}))))};hzt.displayName="Conversation.Content";function Qw(t){"@babel/helpers - typeof";return Qw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qw(t)}var pzt=["responsive","children","className"];function AB(){return AB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AB.apply(this,arguments)}function mzt(t,e,n){return e=gzt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gzt(t){var e=vzt(t,"string");return Qw(e)=="symbol"?e:String(e)}function vzt(t,e){if(Qw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Qw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yzt(t,e){if(t==null)return{};var n=bzt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function bzt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var xzt=function(e){var n=e.responsive,r=n===void 0?!1:n,i=e.children,o=i===void 0?void 0:i,s=e.className,a=yzt(e,pzt),l="".concat(At,"-main-container");return B.createElement("div",AB({},a,{className:yt(l,mzt({},"".concat(l,"--responsive"),r),s)}),o)};/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */var wzt={prefix:"fas",iconName:"search",icon:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"]},_zt={prefix:"fas",iconName:"times",icon:[352,512,[],"f00d","M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"]};function Zw(t){"@babel/helpers - typeof";return Zw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zw(t)}var Szt=["placeholder","value","onChange","onClearClick","className","disabled"];function MB(){return MB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MB.apply(this,arguments)}function GZ(t,e,n){return e=Czt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Czt(t){var e=Ezt(t,"string");return Zw(e)=="symbol"?e:String(e)}function Ezt(t,e){if(Zw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Zw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qZ(t,e){return Mzt(t)||Azt(t,e)||kzt(t,e)||Tzt()}function Tzt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kzt(t,e){if(t){if(typeof t=="string")return XZ(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XZ(t,e)}}function XZ(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Azt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function Mzt(t){if(Array.isArray(t))return t}function Izt(t,e){if(t==null)return{};var n=Ozt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ozt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Rzt=function(e,n){return typeof n>"u"?R.useState(e):[n,function(){}]};function Dzt(t,e){var n=t.placeholder,r=n===void 0?"":n,i=t.value,o=i===void 0?void 0:i,s=t.onChange,a=s===void 0?function(){}:s,l=t.onClearClick,c=l===void 0?function(){}:l,u=t.className,d=t.disabled,f=d===void 0?!1:d,h=Izt(t,Szt),g="".concat(At,"-search"),p=R.useMemo(function(){return typeof o<"u"},[]),m=Rzt("",o),v=qZ(m,2),_=v[0],w=v[1],y=R.useState(p?_.length>0:!1),b=qZ(y,2),x=b[0],S=b[1];if(p!==typeof o<"u")throw"Search: Changing from controlled to uncontrolled component and vice versa is not allowed";var C=R.useRef(void 0),T=function(){typeof C.current<"u"&&C.current.focus()};R.useImperativeHandle(e,function(){return{focus:T}});var E=function(O){var D=O.target.value;S(D.length>0),p===!1&&w(D),a(D)},k=function(){p===!1&&w(""),S(!1),c()};return B.createElement("div",MB({},h,{className:yt(g,GZ({},"".concat(g,"--disabled"),f),u)}),B.createElement(zc,{icon:wzt,className:"".concat(g,"__search-icon")}),B.createElement("input",{ref:C,type:"text",className:"".concat(g,"__input"),placeholder:r,onChange:E,disabled:f,value:_}),B.createElement(zc,{icon:_zt,className:yt("".concat(g,"__clear-icon"),GZ({},"".concat(g,"__clear-icon--active"),x)),onClick:k}))}var Sve=R.forwardRef(Dzt);Sve.displayName="Search";Sve.propTypes={placeholder:De.string,value:De.string,onChange:De.func,onClearClick:De.func,className:De.string,disabled:De.bool};var Pzt=["content","className"];function IB(){return IB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IB.apply(this,arguments)}function Nzt(t,e){if(t==null)return{};var n=$zt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $zt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Lzt=function(e){var n=e.content,r=n===void 0?"":n,i=e.className,o=Nzt(e,Pzt),s="".concat(At,"-typing-indicator");return B.createElement("div",IB({},o,{className:yt(s,i)}),B.createElement("div",{className:"".concat(s,"__indicator")},B.createElement("div",{className:"".concat(s,"__dot")}),B.createElement("div",{className:"".concat(s,"__dot")}),B.createElement("div",{className:"".concat(s,"__dot")})),B.createElement("div",{className:"".concat(s,"__text")},r))};function Jw(t){"@babel/helpers - typeof";return Jw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jw(t)}var Fzt=["className","children","size","selected","onChange","itemsTabIndex"];function OB(){return OB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OB.apply(this,arguments)}function Bzt(t,e,n){return e=Uzt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uzt(t){var e=zzt(t,"string");return Jw(e)=="symbol"?e:String(e)}function zzt(t,e){if(Jw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Jw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jzt(t,e){if(t==null)return{};var n=Wzt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Wzt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Vzt(t,e){var n=t.className,r=t.children,i=t.size,o=t.selected,s=t.onChange,a=s===void 0?YE:s,l=t.itemsTabIndex,c=jzt(t,Fzt),u="".concat(At,"-status-list"),d=R.useRef();R.useImperativeHandle(e,function(){return{focus:function(g){var p=Array.from(d.current.querySelectorAll("li")),m=p.filter(function(v){return v.parentNode===d.current});typeof m[g]<"u"&&m[g].focus()}}});var f=l;return B.createElement("ul",OB({ref:d},c,{className:yt(u,n,Bzt({},"".concat(u,"--").concat(i),i))}),B.Children.map(r,function(h){var g={};o&&(g.selected=h.props.status===o),a&&(g.onClick=function(v){a(h.props.status),h.onClick&&h.onClick(v)});var p=function(_){a&&_.key==="Enter"&&_.shiftKey===!1&&_.altKey===!1&&a(h.props.status)},m=function(){if(typeof f=="number")return f>0?f++:f}();return B.createElement("li",{tabIndex:m,onKeyPress:p},B.cloneElement(h,g))}))}var Cve=R.forwardRef(Vzt);Cve.displayName="StatusList";Cve.propTypes={children:Mge([kge]),selected:De.oneOf(Ege),size:De.oneOf(Tge),itemsTabIndex:De.number,className:De.string,onChange:De.func};const Hzt={role:"system",content:'This multi-container application is designed to comprehensively collect, process, forecast, and visualize data related to the cryptocurrency project "runes." The architecture employs multiple Docker containers, each fulfilling a specific role within the system...'};function Gzt(){const[t,e]=R.useState([{message:"Welcome to Robert A. Sloan's Profile, How can I help you?",sentTime:"just now",sender:"Robert A. Sloan's AI"}]),[n,r]=R.useState(!1),i=async s=>{const a={message:s,direction:"outgoing",sender:"user"},l=[...t,a];e(l),r(!0),await o(l)};async function o(s){let a=s.map(g=>({role:g.sender==="ChatGPT"?"assistant":"user",content:g.message}));const l={model:"gpt-4",messages:[Hzt,...a],stream:!0},u=(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${API_KEY}`},body:JSON.stringify(l)})).body.getReader(),d=new TextDecoder("utf-8");let f=!1,h="";for(;!f;){const{value:g,done:p}=await u.read();f=p,h+=d.decode(g,{stream:!0});const m=h.split(`

`).filter(Boolean);m.forEach((v,_)=>{var w,y,b;if(v.startsWith("data: ")){const x=v.replace("data: ","").trim();if(x!=="[DONE]")try{const C=((b=(y=(w=JSON.parse(x).choices)==null?void 0:w[0])==null?void 0:y.delta)==null?void 0:b.content)||"";C&&e(T=>{const E=T[T.length-1];return E.sender==="ChatGPT"?(E.message+=C,[...T]):[...T,{message:C,sender:"ChatGPT"}]})}catch(S){console.error("Error parsing JSON:",S)}}}),h=m[m.length-1]}r(!1)}return I.jsx("div",{className:"ChatGPT",children:I.jsx("div",{style:{position:"relative",height:"575px",width:"350px"},children:I.jsx(xzt,{children:I.jsxs(ezt,{children:[I.jsx(g0,{scrollBehavior:"smooth",typingIndicator:n?I.jsx(Lzt,{content:"Robert's AI is responding"}):null,children:t.map((s,a)=>I.jsx(Qf,{model:s},a))}),I.jsx(Z2,{placeholder:"Type message here",onSend:i})]})})})})}const qzt=()=>{const{userInfo:t}=vM(u=>u.auth),[e,n]=R.useState(!1),r=()=>n(!1),i=()=>n(!0),o=yM(),[s,a]=R.useState(new Date().toLocaleString()),{data:l,isFetching:c}=h_e("userDetails",{pollingInterval:9e5});return R.useEffect(()=>{l&&o(ILt(l))},[l,o]),R.useEffect(()=>{const u=setInterval(()=>{a(new Date().toLocaleString())},1e3);return()=>clearInterval(u)},[]),I.jsx(I.Fragment,{children:I.jsxs("div",{children:[I.jsxs("header",{children:[I.jsxs("div",{className:"header-status",children:[t?I.jsx("div",{children:I.jsxs("h2",{children:["Welcome, ",t.name,"!"]})}):I.jsx("div",{children:"Please log in."}),I.jsx("span",{children:c?"Fetching your profile...":t!==null?`Logged in as ${t.email}`:"You're not logged in"}),I.jsx("div",{className:"cta",children:t?I.jsx("button",{className:"button",onClick:()=>o(MLt()),children:"Logout"}):I.jsx(wm,{className:"button",to:"/login",children:"Login"})})]}),I.jsxs("nav",{className:"container navigation",children:[I.jsx(wm,{to:"/register",children:"REGISTER"}),I.jsx(wm,{to:"/login",children:"LOGIN"}),I.jsx(wm,{to:"/forecastpage",children:"FORECASTPAGE"}),I.jsx(wm,{to:"/training",children:"LSTM TRAINING"}),I.jsx(wm,{to:"/",children:"HOME"}),I.jsx("br",{})]})]}),I.jsxs("div",{className:"offcanvas-menu",children:[I.jsx(DT,{variant:"primary",onClick:i,className:"me-2",children:"Chat with Robert Assistance (AI)"}),I.jsxs(IC,{show:e,onHide:r,children:[I.jsx(IC.Header,{closeButton:!0,children:I.jsx(IC.Title,{children:"Assistance "})}),I.jsx(IC.Body,{children:I.jsx(Gzt,{})})]})]})]})})},KZ=qn(om)(({theme:t})=>({backgroundColor:t.palette.mode==="dark"?"#1A2027":"#fff",...t.typography.body2,padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary})),Eve=()=>(R.useEffect(()=>{const t=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",t)},[]),I.jsx(I.Fragment,{children:I.jsx(Yy,{sx:{flexGrow:1,padding:{xs:2,sm:4}},children:I.jsxs($t,{container:!0,spacing:4,children:[I.jsx($t,{xs:12,children:I.jsx(KZ,{sx:{backgroundColor:"#1d1d1d"},children:I.jsx(qzt,{})})}),I.jsxs("div",{className:"treechart",children:[I.jsx(rit,{}),I.jsx(bO,{}),I.jsx(wI,{}),I.jsx(_I,{}),I.jsx(pYe,{})]}),I.jsx($t,{xs:12,children:I.jsx(KZ,{sx:{backgroundColor:"black"}})})]})})}));function Xzt(){const[t,e]=R.useState(!1);return I.jsxs(xxe,{children:[I.jsx(Eve,{}),I.jsxs(fxe,{children:[I.jsx(eu,{path:"/",element:I.jsx(Get,{})}),I.jsx(eu,{path:"/forecastpage",element:I.jsx(Xut,{})}),I.jsx(eu,{path:"/register",element:I.jsx(ELt,{})}),I.jsx(eu,{path:"/history",element:I.jsx(Kut,{})}),I.jsx(eu,{path:"/training",element:I.jsx(CLt,{})}),I.jsx(eu,{path:"/select",element:I.jsx(Yut,{})}),I.jsx(eu,{path:"/login",element:I.jsx(qut,{setIsAuthenticated:e})}),I.jsx(eu,{path:"/app",element:t?I.jsx(Kzt,{}):I.jsx(uxe,{to:"/login"})})]})]})}function Kzt(){return I.jsx(I.Fragment,{children:I.jsxs("div",{className:"root",children:[I.jsx(Eve,{}),I.jsx("div",{className:"content"})]})})}localStorage.getItem("userToken")&&localStorage.getItem("userToken");const tN=xv("user/deposit",async(t,{getState:e,rejectWithValue:n})=>{var r;try{const i=(r=e().auth)==null?void 0:r.userToken;if(!i)throw new Error("User not logged in");const o={headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`}},{data:s}=await axios.post(`${backendURL}/api/user/deposit`,{amount:t},o);return s}catch(i){return i.response&&i.response.data.message?n(i.response.data.message):n(i.message)}}),nN=xv("user/withdraw",async(t,{getState:e,rejectWithValue:n})=>{var r;try{const i=(r=e().auth)==null?void 0:r.userToken;if(!i)throw new Error("User not logged in");const o={headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`}},{data:s}=await axios.post(`${backendURL}/api/user/withdraw`,{amount:t},o);return s}catch(i){return i.response&&i.response.data.message?n(i.response.data.message):n(i.message)}}),Yzt=ou({name:"user",initialState:{user:null,users:[],transactionHistory:[],balance:0,loading:!1,error:null},reducers:{setUser:(t,e)=>{t.user=e.payload},setUsers:(t,e)=>{t.users=e.payload},setBalance:(t,e)=>{t.balance=e.payload}},extraReducers:t=>{t.addCase(tN.pending,e=>{e.loading=!0}).addCase(tN.fulfilled,(e,n)=>{e.loading=!1,e.balance=n.payload.balance}).addCase(tN.rejected,(e,n)=>{e.loading=!1,e.error=n.error.message}).addCase(nN.pending,e=>{e.loading=!0}).addCase(nN.fulfilled,(e,n)=>{e.loading=!1,e.balance=n.payload.balance}).addCase(nN.rejected,(e,n)=>{e.loading=!1,e.error=n.error.message})}}),Qzt=Yzt.reducer,YZ=FU({reducerPath:"auth0Api",baseQuery:PU({baseUrl:"/"}),endpoints:t=>({loginWithAuth0:t.mutation({query:()=>auth0Client.loginWithRedirect()}),logoutFromAuth0:t.mutation({query:()=>auth0Client.logout({returnTo:window.location.origin})}),getAuth0User:t.query({query:()=>auth0Client.getUser()})})}),Zzt=awe({reducer:{auth:l6,user:Qzt,auth0:l6,[bE.reducerPath]:bE.reducer,[z3.reducerPath]:z3.reducer,[YZ.reducerPath]:YZ.reducer},middleware:t=>t().concat(bE.middleware)}),Jzt=R.createContext(),ejt=({children:t})=>{const[e,n]=R.useState(0),[r,i]=R.useState([]),o=a=>{n(l=>l+Number(a)),i(l=>[...l,{type:"Deposit",amount:a,date:new Date}])},s=a=>{n(l=>l-Number(a)),i(l=>[...l,{type:"Withdrawal",amount:a,date:new Date}])};return I.jsx(Jzt.Provider,{value:{balance:e,deposit:o,withdraw:s,transactionHistory:r},children:t})};B.createContext();B.createContext();const tjt=B.createContext({users:[],loggedInUser:null,addUser:t=>{},setLoggedInUser:t=>{}}),njt=({children:t})=>{const[e,n]=R.useState([]),[r,i]=R.useState(null),o=s=>{n(a=>[...a,s])};return I.jsx(tjt.Provider,{value:{users:e,addUser:o,loggedInUser:r,setLoggedInUser:i},children:t})},rjt=R.createContext(),ijt=({children:t})=>{const[e,n]=R.useState(()=>localStorage.getItem("isLoggedIn")==="true"),r=()=>{localStorage.setItem("isLoggedIn","true"),n(!0)},i=()=>{localStorage.setItem("isLoggedIn","false"),n(!1)};return R.useEffect(()=>{const o=()=>{n(localStorage.getItem("isLoggedIn")==="true")};return window.addEventListener("storage",o),()=>{window.removeEventListener("storage",o)}},[]),I.jsx(rjt.Provider,{value:{isLoggedIn:e,login:r,logout:i},children:t})},ojt=R.createContext(),QZ=[],sjt=({children:t})=>{const[e,n]=R.useState(QZ.map(i=>({name:i.name,status:"loading",fill:"#8884d8"}))),r=async()=>{const i=await Promise.all(QZ.map(async(o,s)=>{try{return await Ht.head(o.endpoint),{name:o.name,status:"alive",fill:"#00C49F"}}catch{return{name:o.name,status:"down",fill:"#FF8042"}}}));n(i)};return R.useEffect(()=>{r();const i=setInterval(r,3e4);return()=>clearInterval(i)},[]),I.jsx(ojt.Provider,{value:e,children:t})},ajt=document.getElementById("root"),ljt=dte(ajt);ljt.render(I.jsx(Qtt,{domain:"dev-gtqcs7u8l0hno6ih.us.auth0.com",clientId:"95AfyE7lQRn34URfOLz4dgApVDU1jMPn",authorizationParams:{redirect_uri:window.location.origin},children:I.jsx(R.StrictMode,{children:I.jsx(_be,{store:Zzt,children:I.jsx(ijt,{children:I.jsx(njt,{children:I.jsx(ejt,{children:I.jsx(sjt,{children:I.jsx(Gut,{children:I.jsx(Kct,{children:I.jsx(Xzt,{})})})})})})})})})}));
